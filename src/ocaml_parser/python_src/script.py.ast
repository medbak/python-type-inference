Module([Import([alias('os', None), alias('time', None), alias('sys', None), alias('getopt', None)], lineno=10, col_offset=0), Import([alias('pty', None)], lineno=11, col_offset=0), FunctionDef('read', arguments([Name('fd', Param(), lineno=13, col_offset=9)], None, None, []), [Assign([Name('data', Store(), lineno=14, col_offset=4)], Call(Attribute(Name('os', Load(), lineno=14, col_offset=11), 'read', Load(), lineno=14, col_offset=11), [Name('fd', Load(), lineno=14, col_offset=19), Num(1024, lineno=14, col_offset=23)], [], None, None, lineno=14, col_offset=11), lineno=14, col_offset=4), Expr(Call(Attribute(Name('script', Load(), lineno=15, col_offset=4), 'write', Load(), lineno=15, col_offset=4), [Name('data', Load(), lineno=15, col_offset=17)], [], None, None, lineno=15, col_offset=4), lineno=15, col_offset=4), Return(Name('data', Load(), lineno=16, col_offset=11), lineno=16, col_offset=4)], [], lineno=13, col_offset=0), Assign([Name('shell', Store(), lineno=18, col_offset=0)], Str('sh', lineno=18, col_offset=8), lineno=18, col_offset=0), Assign([Name('filename', Store(), lineno=19, col_offset=0)], Str('typescript', lineno=19, col_offset=11), lineno=19, col_offset=0), Assign([Name('mode', Store(), lineno=20, col_offset=0)], Str('w', lineno=20, col_offset=7), lineno=20, col_offset=0), If(Call(Attribute(Attribute(Name('os', Load(), lineno=21, col_offset=3), 'environ', Load(), lineno=21, col_offset=3), 'has_key', Load(), lineno=21, col_offset=3), [Str('SHELL', lineno=21, col_offset=22)], [], None, None, lineno=21, col_offset=3), [Assign([Name('shell', Store(), lineno=22, col_offset=4)], Subscript(Attribute(Name('os', Load(), lineno=22, col_offset=12), 'environ', Load(), lineno=22, col_offset=12), Index(Str('SHELL', lineno=22, col_offset=23)), Load(), lineno=22, col_offset=12), lineno=22, col_offset=4)], [], lineno=21, col_offset=0), TryExcept([Assign([Tuple([Name('opts', Store(), lineno=25, col_offset=4), Name('args', Store(), lineno=25, col_offset=10)], Store(), lineno=25, col_offset=4)], Call(Attribute(Name('getopt', Load(), lineno=25, col_offset=17), 'getopt', Load(), lineno=25, col_offset=17), [Subscript(Attribute(Name('sys', Load(), lineno=25, col_offset=31), 'argv', Load(), lineno=25, col_offset=31), Slice(Num(1, lineno=25, col_offset=40), None, None), Load(), lineno=25, col_offset=31), Str('ap', lineno=25, col_offset=45)], [], None, None, lineno=25, col_offset=17), lineno=25, col_offset=4)], [ExceptHandler(Attribute(Name('getopt', Load(), lineno=26, col_offset=7), 'error', Load(), lineno=26, col_offset=7), Name('msg', Store(), lineno=26, col_offset=21), [Print(None, [BinOp(Str('%s: %s', lineno=27, col_offset=10), Mod(), Tuple([Subscript(Attribute(Name('sys', Load(), lineno=27, col_offset=22), 'argv', Load(), lineno=27, col_offset=22), Index(Num(0, lineno=27, col_offset=31)), Load(), lineno=27, col_offset=22), Name('msg', Load(), lineno=27, col_offset=35)], Load(), lineno=27, col_offset=22), lineno=27, col_offset=10)], True, lineno=27, col_offset=4), Expr(Call(Attribute(Name('sys', Load(), lineno=28, col_offset=4), 'exit', Load(), lineno=28, col_offset=4), [Num(2, lineno=28, col_offset=13)], [], None, None, lineno=28, col_offset=4), lineno=28, col_offset=4)], lineno=26, col_offset=0)], [], lineno=24, col_offset=0), For(Tuple([Name('o', Store(), lineno=30, col_offset=4), Name('a', Store(), lineno=30, col_offset=7)], Store(), lineno=30, col_offset=4), Name('opts', Load(), lineno=30, col_offset=12), [If(Compare(Name('o', Load(), lineno=31, col_offset=7), [Eq()], [Str('-a', lineno=31, col_offset=12)], lineno=31, col_offset=7), [Assign([Name('mode', Store(), lineno=32, col_offset=8)], Str('a', lineno=32, col_offset=15), lineno=32, col_offset=8)], [If(Compare(Name('o', Load(), lineno=33, col_offset=9), [Eq()], [Str('-p', lineno=33, col_offset=14)], lineno=33, col_offset=9), [Assign([Name('shell', Store(), lineno=34, col_offset=8)], Str('python', lineno=34, col_offset=16), lineno=34, col_offset=8)], [], lineno=33, col_offset=9)], lineno=31, col_offset=4)], [], lineno=30, col_offset=0), Assign([Name('script', Store(), lineno=36, col_offset=0)], Call(Name('open', Load(), lineno=36, col_offset=9), [Name('filename', Load(), lineno=36, col_offset=14), Name('mode', Load(), lineno=36, col_offset=24)], [], None, None, lineno=36, col_offset=9), lineno=36, col_offset=0), Expr(Call(Attribute(Attribute(Name('sys', Load(), lineno=38, col_offset=0), 'stdout', Load(), lineno=38, col_offset=0), 'write', Load(), lineno=38, col_offset=0), [BinOp(Str('Script started, file is %s\n', lineno=38, col_offset=17), Mod(), Name('filename', Load(), lineno=38, col_offset=50), lineno=38, col_offset=17)], [], None, None, lineno=38, col_offset=0), lineno=38, col_offset=0), Expr(Call(Attribute(Name('script', Load(), lineno=39, col_offset=0), 'write', Load(), lineno=39, col_offset=0), [BinOp(Str('Script started on %s\n', lineno=39, col_offset=13), Mod(), Call(Attribute(Name('time', Load(), lineno=39, col_offset=40), 'ctime', Load(), lineno=39, col_offset=40), [Call(Attribute(Name('time', Load(), lineno=39, col_offset=51), 'time', Load(), lineno=39, col_offset=51), [], [], None, None, lineno=39, col_offset=51)], [], None, None, lineno=39, col_offset=40), lineno=39, col_offset=13)], [], None, None, lineno=39, col_offset=0), lineno=39, col_offset=0), Expr(Call(Attribute(Name('pty', Load(), lineno=40, col_offset=0), 'spawn', Load(), lineno=40, col_offset=0), [Name('shell', Load(), lineno=40, col_offset=10), Name('read', Load(), lineno=40, col_offset=17)], [], None, None, lineno=40, col_offset=0), lineno=40, col_offset=0), Expr(Call(Attribute(Name('script', Load(), lineno=41, col_offset=0), 'write', Load(), lineno=41, col_offset=0), [BinOp(Str('Script done on %s\n', lineno=41, col_offset=13), Mod(), Call(Attribute(Name('time', Load(), lineno=41, col_offset=37), 'ctime', Load(), lineno=41, col_offset=37), [Call(Attribute(Name('time', Load(), lineno=41, col_offset=48), 'time', Load(), lineno=41, col_offset=48), [], [], None, None, lineno=41, col_offset=48)], [], None, None, lineno=41, col_offset=37), lineno=41, col_offset=13)], [], None, None, lineno=41, col_offset=0), lineno=41, col_offset=0), Expr(Call(Attribute(Attribute(Name('sys', Load(), lineno=42, col_offset=0), 'stdout', Load(), lineno=42, col_offset=0), 'write', Load(), lineno=42, col_offset=0), [BinOp(Str('Script done, file is %s\n', lineno=42, col_offset=17), Mod(), Name('filename', Load(), lineno=42, col_offset=47), lineno=42, col_offset=17)], [], None, None, lineno=42, col_offset=0), lineno=42, col_offset=0)])
