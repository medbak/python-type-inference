Module([Expr(Str('Statistics analyzer for HotShot.', lineno=1, col_offset=0), lineno=1, col_offset=0), Import([alias('profile', None)], lineno=3, col_offset=0), Import([alias('pstats', None)], lineno=4, col_offset=0), Import([alias('hotshot.log', None)], lineno=6, col_offset=0), ImportFrom('hotshot.log', [alias('ENTER', None), alias('EXIT', None)], 0, lineno=8, col_offset=0), FunctionDef('load', arguments([Name('filename', Param(), lineno=11, col_offset=9)], None, None, []), [Return(Call(Attribute(Call(Name('StatsLoader', Load(), lineno=12, col_offset=11), [Name('filename', Load(), lineno=12, col_offset=23)], [], None, None, lineno=12, col_offset=11), 'load', Load(), lineno=12, col_offset=11), [], [], None, None, lineno=12, col_offset=11), lineno=12, col_offset=4)], [], lineno=11, col_offset=0), ClassDef('StatsLoader', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=16, col_offset=17), Name('logfn', Param(), lineno=16, col_offset=23)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=17, col_offset=8), '_logfn', Store(), lineno=17, col_offset=8)], Name('logfn', Load(), lineno=17, col_offset=22), lineno=17, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=18, col_offset=8), '_code', Store(), lineno=18, col_offset=8)], Dict([], [], lineno=18, col_offset=21), lineno=18, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=19, col_offset=8), '_stack', Store(), lineno=19, col_offset=8)], List([], Load(), lineno=19, col_offset=22), lineno=19, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=20, col_offset=8), 'pop_frame', Store(), lineno=20, col_offset=8)], Attribute(Attribute(Name('self', Load(), lineno=20, col_offset=25), '_stack', Load(), lineno=20, col_offset=25), 'pop', Load(), lineno=20, col_offset=25), lineno=20, col_offset=8)], [], lineno=16, col_offset=4), FunctionDef('load', arguments([Name('self', Param(), lineno=22, col_offset=13)], None, None, []), [Assign([Name('p', Store(), lineno=25, col_offset=8)], Call(Name('Profile', Load(), lineno=25, col_offset=12), [], [], None, None, lineno=25, col_offset=12), lineno=25, col_offset=8), Assign([Attribute(Name('p', Load(), lineno=26, col_offset=8), 'get_time', Store(), lineno=26, col_offset=8)], Name('_brokentimer', Load(), lineno=26, col_offset=21), lineno=26, col_offset=8), Assign([Name('log', Store(), lineno=27, col_offset=8)], Call(Attribute(Attribute(Name('hotshot', Load(), lineno=27, col_offset=14), 'log', Load(), lineno=27, col_offset=14), 'LogReader', Load(), lineno=27, col_offset=14), [Attribute(Name('self', Load(), lineno=27, col_offset=36), '_logfn', Load(), lineno=27, col_offset=36)], [], None, None, lineno=27, col_offset=14), lineno=27, col_offset=8), Assign([Name('taccum', Store(), lineno=28, col_offset=8)], Num(0, lineno=28, col_offset=17), lineno=28, col_offset=8), For(Name('event', Store(), lineno=29, col_offset=12), Name('log', Load(), lineno=29, col_offset=21), [Assign([Tuple([Name('what', Store(), lineno=30, col_offset=12), Tuple([Name('filename', Store(), lineno=30, col_offset=19), Name('lineno', Store(), lineno=30, col_offset=29), Name('funcname', Store(), lineno=30, col_offset=37)], Store(), lineno=30, col_offset=19), Name('tdelta', Store(), lineno=30, col_offset=48)], Store(), lineno=30, col_offset=12)], Name('event', Load(), lineno=30, col_offset=57), lineno=30, col_offset=12), If(Compare(Name('tdelta', Load(), lineno=31, col_offset=15), [Gt()], [Num(0, lineno=31, col_offset=24)], lineno=31, col_offset=15), [AugAssign(Name('taccum', Store(), lineno=32, col_offset=16), Add(), Name('tdelta', Load(), lineno=32, col_offset=26), lineno=32, col_offset=16)], [], lineno=31, col_offset=12), If(Compare(Name('what', Load(), lineno=39, col_offset=15), [Eq()], [Name('ENTER', Load(), lineno=39, col_offset=23)], lineno=39, col_offset=15), [Assign([Name('frame', Store(), lineno=40, col_offset=16)], Call(Attribute(Name('self', Load(), lineno=40, col_offset=24), 'new_frame', Load(), lineno=40, col_offset=24), [Name('filename', Load(), lineno=40, col_offset=39), Name('lineno', Load(), lineno=40, col_offset=49), Name('funcname', Load(), lineno=40, col_offset=57)], [], None, None, lineno=40, col_offset=24), lineno=40, col_offset=16), Expr(Call(Attribute(Name('p', Load(), lineno=41, col_offset=16), 'trace_dispatch_call', Load(), lineno=41, col_offset=16), [Name('frame', Load(), lineno=41, col_offset=38), BinOp(Name('taccum', Load(), lineno=41, col_offset=45), Mult(), Num(1e-06, lineno=41, col_offset=54), lineno=41, col_offset=45)], [], None, None, lineno=41, col_offset=16), lineno=41, col_offset=16), Assign([Name('taccum', Store(), lineno=42, col_offset=16)], Num(0, lineno=42, col_offset=25), lineno=42, col_offset=16)], [If(Compare(Name('what', Load(), lineno=44, col_offset=17), [Eq()], [Name('EXIT', Load(), lineno=44, col_offset=25)], lineno=44, col_offset=17), [Assign([Name('frame', Store(), lineno=45, col_offset=16)], Call(Attribute(Name('self', Load(), lineno=45, col_offset=24), 'pop_frame', Load(), lineno=45, col_offset=24), [], [], None, None, lineno=45, col_offset=24), lineno=45, col_offset=16), Expr(Call(Attribute(Name('p', Load(), lineno=46, col_offset=16), 'trace_dispatch_return', Load(), lineno=46, col_offset=16), [Name('frame', Load(), lineno=46, col_offset=40), BinOp(Name('taccum', Load(), lineno=46, col_offset=47), Mult(), Num(1e-06, lineno=46, col_offset=56), lineno=46, col_offset=47)], [], None, None, lineno=46, col_offset=16), lineno=46, col_offset=16), Assign([Name('taccum', Store(), lineno=47, col_offset=16)], Num(0, lineno=47, col_offset=25), lineno=47, col_offset=16)], [], lineno=44, col_offset=17)], lineno=39, col_offset=12)], [], lineno=29, col_offset=8), Assert(UnaryOp(Not(), Attribute(Name('self', Load(), lineno=51, col_offset=19), '_stack', Load(), lineno=51, col_offset=19), lineno=51, col_offset=15), None, lineno=51, col_offset=8), Return(Call(Attribute(Name('pstats', Load(), lineno=52, col_offset=15), 'Stats', Load(), lineno=52, col_offset=15), [Name('p', Load(), lineno=52, col_offset=28)], [], None, None, lineno=52, col_offset=15), lineno=52, col_offset=8)], [], lineno=22, col_offset=4), FunctionDef('new_frame', arguments([Name('self', Param(), lineno=54, col_offset=18)], 'args', None, []), [TryExcept([Assign([Name('code', Store(), lineno=59, col_offset=12)], Subscript(Attribute(Name('self', Load(), lineno=59, col_offset=19), '_code', Load(), lineno=59, col_offset=19), Index(Name('args', Load(), lineno=59, col_offset=30)), Load(), lineno=59, col_offset=19), lineno=59, col_offset=12)], [ExceptHandler(Name('KeyError', Load(), lineno=60, col_offset=15), None, [Assign([Name('code', Store(), lineno=61, col_offset=12)], Call(Name('FakeCode', Load(), lineno=61, col_offset=19), [], [], Name('args', Load(), lineno=61, col_offset=29), None, lineno=61, col_offset=19), lineno=61, col_offset=12), Assign([Subscript(Attribute(Name('self', Load(), lineno=62, col_offset=12), '_code', Load(), lineno=62, col_offset=12), Index(Name('args', Load(), lineno=62, col_offset=23)), Store(), lineno=62, col_offset=12)], Name('code', Load(), lineno=62, col_offset=31), lineno=62, col_offset=12)], lineno=60, col_offset=8)], [], lineno=58, col_offset=8), If(Attribute(Name('self', Load(), lineno=65, col_offset=11), '_stack', Load(), lineno=65, col_offset=11), [Assign([Name('back', Store(), lineno=66, col_offset=12)], Subscript(Attribute(Name('self', Load(), lineno=66, col_offset=19), '_stack', Load(), lineno=66, col_offset=19), Index(Num(-1, lineno=66, col_offset=32)), Load(), lineno=66, col_offset=19), lineno=66, col_offset=12)], [Assign([Name('back', Store(), lineno=68, col_offset=12)], Name('None', Load(), lineno=68, col_offset=19), lineno=68, col_offset=12)], lineno=65, col_offset=8), Assign([Name('frame', Store(), lineno=69, col_offset=8)], Call(Name('FakeFrame', Load(), lineno=69, col_offset=16), [Name('code', Load(), lineno=69, col_offset=26), Name('back', Load(), lineno=69, col_offset=32)], [], None, None, lineno=69, col_offset=16), lineno=69, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=70, col_offset=8), '_stack', Load(), lineno=70, col_offset=8), 'append', Load(), lineno=70, col_offset=8), [Name('frame', Load(), lineno=70, col_offset=27)], [], None, None, lineno=70, col_offset=8), lineno=70, col_offset=8), Return(Name('frame', Load(), lineno=71, col_offset=15), lineno=71, col_offset=8)], [], lineno=54, col_offset=4)], [], lineno=15, col_offset=0), ClassDef('Profile', [Attribute(Name('profile', Load(), lineno=74, col_offset=14), 'Profile', Load(), lineno=74, col_offset=14)], [FunctionDef('simulate_cmd_complete', arguments([Name('self', Param(), lineno=75, col_offset=30)], None, None, []), [Pass( lineno=76, col_offset=8)], [], lineno=75, col_offset=4)], [], lineno=74, col_offset=0), ClassDef('FakeCode', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=80, col_offset=17), Name('filename', Param(), lineno=80, col_offset=23), Name('firstlineno', Param(), lineno=80, col_offset=33), Name('funcname', Param(), lineno=80, col_offset=46)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=81, col_offset=8), 'co_filename', Store(), lineno=81, col_offset=8)], Name('filename', Load(), lineno=81, col_offset=27), lineno=81, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=82, col_offset=8), 'co_firstlineno', Store(), lineno=82, col_offset=8)], Name('firstlineno', Load(), lineno=82, col_offset=30), lineno=82, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=83, col_offset=8), 'co_name', Store(), lineno=83, col_offset=8), Attribute(Name('self', Load(), lineno=83, col_offset=23), '__name__', Store(), lineno=83, col_offset=23)], Name('funcname', Load(), lineno=83, col_offset=39), lineno=83, col_offset=8)], [], lineno=80, col_offset=4)], [], lineno=79, col_offset=0), ClassDef('FakeFrame', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=87, col_offset=17), Name('code', Param(), lineno=87, col_offset=23), Name('back', Param(), lineno=87, col_offset=29)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=88, col_offset=8), 'f_back', Store(), lineno=88, col_offset=8)], Name('back', Load(), lineno=88, col_offset=22), lineno=88, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=89, col_offset=8), 'f_code', Store(), lineno=89, col_offset=8)], Name('code', Load(), lineno=89, col_offset=22), lineno=89, col_offset=8)], [], lineno=87, col_offset=4)], [], lineno=86, col_offset=0), FunctionDef('_brokentimer', arguments([], None, None, []), [Raise(Name('RuntimeError', Load(), lineno=93, col_offset=10), Str('this timer should not be called', lineno=93, col_offset=24), None, lineno=93, col_offset=4)], [], lineno=92, col_offset=0)])
