Module([Import([alias('thread', None)], lineno=271, col_offset=0), ClassDef('condition', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=274, col_offset=17), Name('lock', Param(), lineno=274, col_offset=23)], None, None, [Name('None', Load(), lineno=274, col_offset=28)]), [If(Compare(Name('lock', Load(), lineno=276, col_offset=11), [Is()], [Name('None', Load(), lineno=276, col_offset=19)], lineno=276, col_offset=11), [Assign([Attribute(Name('self', Load(), lineno=277, col_offset=12), 'mutex', Store(), lineno=277, col_offset=12)], Call(Attribute(Name('thread', Load(), lineno=277, col_offset=25), 'allocate_lock', Load(), lineno=277, col_offset=25), [], [], None, None, lineno=277, col_offset=25), lineno=277, col_offset=12)], [If(BoolOp(And(), [Call(Name('hasattr', Load(), lineno=279, col_offset=15), [Name('lock', Load(), lineno=279, col_offset=23), Str('acquire', lineno=279, col_offset=29)], [], None, None, lineno=279, col_offset=15), Call(Name('hasattr', Load(), lineno=280, col_offset=15), [Name('lock', Load(), lineno=280, col_offset=23), Str('release', lineno=280, col_offset=29)], [], None, None, lineno=280, col_offset=15)], lineno=279, col_offset=15), [Assign([Attribute(Name('self', Load(), lineno=281, col_offset=16), 'mutex', Store(), lineno=281, col_offset=16)], Name('lock', Load(), lineno=281, col_offset=29), lineno=281, col_offset=16)], [Raise(Name('TypeError', Load(), lineno=283, col_offset=22), Str('condition constructor requires a lock argument', lineno=283, col_offset=33), None, lineno=283, col_offset=16)], lineno=279, col_offset=12)], lineno=276, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=287, col_offset=8), 'checkout', Store(), lineno=287, col_offset=8)], Call(Attribute(Name('thread', Load(), lineno=287, col_offset=24), 'allocate_lock', Load(), lineno=287, col_offset=24), [], [], None, None, lineno=287, col_offset=24), lineno=287, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=288, col_offset=8), 'checkout', Load(), lineno=288, col_offset=8), 'acquire', Load(), lineno=288, col_offset=8), [], [], None, None, lineno=288, col_offset=8), lineno=288, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=291, col_offset=8), 'idlock', Store(), lineno=291, col_offset=8)], Call(Attribute(Name('thread', Load(), lineno=291, col_offset=22), 'allocate_lock', Load(), lineno=291, col_offset=22), [], [], None, None, lineno=291, col_offset=22), lineno=291, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=292, col_offset=8), 'id', Store(), lineno=292, col_offset=8)], Num(0, lineno=292, col_offset=18), lineno=292, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=293, col_offset=8), 'waiting', Store(), lineno=293, col_offset=8)], Num(0, lineno=293, col_offset=23), lineno=293, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=294, col_offset=8), 'pending', Store(), lineno=294, col_offset=8)], Num(0, lineno=294, col_offset=23), lineno=294, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=295, col_offset=8), 'torelease', Store(), lineno=295, col_offset=8)], Num(0, lineno=295, col_offset=25), lineno=295, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=296, col_offset=8), 'releasing', Store(), lineno=296, col_offset=8)], Num(0, lineno=296, col_offset=25), lineno=296, col_offset=8)], [], lineno=274, col_offset=4), FunctionDef('acquire', arguments([Name('self', Param(), lineno=298, col_offset=16)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=299, col_offset=8), 'mutex', Load(), lineno=299, col_offset=8), 'acquire', Load(), lineno=299, col_offset=8), [], [], None, None, lineno=299, col_offset=8), lineno=299, col_offset=8)], [], lineno=298, col_offset=4), FunctionDef('release', arguments([Name('self', Param(), lineno=301, col_offset=16)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=302, col_offset=8), 'mutex', Load(), lineno=302, col_offset=8), 'release', Load(), lineno=302, col_offset=8), [], [], None, None, lineno=302, col_offset=8), lineno=302, col_offset=8)], [], lineno=301, col_offset=4), FunctionDef('wait', arguments([Name('self', Param(), lineno=304, col_offset=13)], None, None, []), [Assign([Tuple([Name('mutex', Store(), lineno=305, col_offset=8), Name('checkout', Store(), lineno=305, col_offset=15), Name('idlock', Store(), lineno=305, col_offset=25)], Store(), lineno=305, col_offset=8)], Tuple([Attribute(Name('self', Load(), lineno=305, col_offset=34), 'mutex', Load(), lineno=305, col_offset=34), Attribute(Name('self', Load(), lineno=305, col_offset=46), 'checkout', Load(), lineno=305, col_offset=46), Attribute(Name('self', Load(), lineno=305, col_offset=61), 'idlock', Load(), lineno=305, col_offset=61)], Load(), lineno=305, col_offset=34), lineno=305, col_offset=8), If(UnaryOp(Not(), Call(Attribute(Name('mutex', Load(), lineno=306, col_offset=15), 'locked', Load(), lineno=306, col_offset=15), [], [], None, None, lineno=306, col_offset=15), lineno=306, col_offset=11), [Raise(Name('ValueError', Load(), lineno=307, col_offset=18), Str("condition must be .acquire'd when .wait() invoked", lineno=308, col_offset=18), None, lineno=307, col_offset=12)], [], lineno=306, col_offset=8), Expr(Call(Attribute(Name('idlock', Load(), lineno=310, col_offset=8), 'acquire', Load(), lineno=310, col_offset=8), [], [], None, None, lineno=310, col_offset=8), lineno=310, col_offset=8), Assign([Name('myid', Store(), lineno=311, col_offset=8)], Attribute(Name('self', Load(), lineno=311, col_offset=15), 'id', Load(), lineno=311, col_offset=15), lineno=311, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=312, col_offset=8), 'pending', Store(), lineno=312, col_offset=8)], BinOp(Attribute(Name('self', Load(), lineno=312, col_offset=23), 'pending', Load(), lineno=312, col_offset=23), Add(), Num(1, lineno=312, col_offset=38), lineno=312, col_offset=23), lineno=312, col_offset=8), Expr(Call(Attribute(Name('idlock', Load(), lineno=313, col_offset=8), 'release', Load(), lineno=313, col_offset=8), [], [], None, None, lineno=313, col_offset=8), lineno=313, col_offset=8), Expr(Call(Attribute(Name('mutex', Load(), lineno=315, col_offset=8), 'release', Load(), lineno=315, col_offset=8), [], [], None, None, lineno=315, col_offset=8), lineno=315, col_offset=8), While(Num(1, lineno=317, col_offset=14), [Expr(Call(Attribute(Name('checkout', Load(), lineno=318, col_offset=12), 'acquire', Load(), lineno=318, col_offset=12), [], [], None, None, lineno=318, col_offset=12), lineno=318, col_offset=12), Expr(Call(Attribute(Name('idlock', Load(), lineno=318, col_offset=32), 'acquire', Load(), lineno=318, col_offset=32), [], [], None, None, lineno=318, col_offset=32), lineno=318, col_offset=32), If(Compare(Name('myid', Load(), lineno=319, col_offset=15), [Lt()], [Attribute(Name('self', Load(), lineno=319, col_offset=22), 'id', Load(), lineno=319, col_offset=22)], lineno=319, col_offset=15), [Break( lineno=320, col_offset=16)], [], lineno=319, col_offset=12), Expr(Call(Attribute(Name('checkout', Load(), lineno=321, col_offset=12), 'release', Load(), lineno=321, col_offset=12), [], [], None, None, lineno=321, col_offset=12), lineno=321, col_offset=12), Expr(Call(Attribute(Name('idlock', Load(), lineno=321, col_offset=32), 'release', Load(), lineno=321, col_offset=32), [], [], None, None, lineno=321, col_offset=32), lineno=321, col_offset=32)], [], lineno=317, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=323, col_offset=8), 'waiting', Store(), lineno=323, col_offset=8)], BinOp(Attribute(Name('self', Load(), lineno=323, col_offset=23), 'waiting', Load(), lineno=323, col_offset=23), Sub(), Num(1, lineno=323, col_offset=38), lineno=323, col_offset=23), lineno=323, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=324, col_offset=8), 'torelease', Store(), lineno=324, col_offset=8)], BinOp(Attribute(Name('self', Load(), lineno=324, col_offset=25), 'torelease', Load(), lineno=324, col_offset=25), Sub(), Num(1, lineno=324, col_offset=42), lineno=324, col_offset=25), lineno=324, col_offset=8), If(Attribute(Name('self', Load(), lineno=325, col_offset=11), 'torelease', Load(), lineno=325, col_offset=11), [Expr(Call(Attribute(Name('checkout', Load(), lineno=326, col_offset=12), 'release', Load(), lineno=326, col_offset=12), [], [], None, None, lineno=326, col_offset=12), lineno=326, col_offset=12)], [Assign([Attribute(Name('self', Load(), lineno=328, col_offset=12), 'releasing', Store(), lineno=328, col_offset=12)], Num(0, lineno=328, col_offset=29), lineno=328, col_offset=12), If(Compare(Attribute(Name('self', Load(), lineno=329, col_offset=15), 'waiting', Load(), lineno=329, col_offset=15), [Eq(), Eq()], [Attribute(Name('self', Load(), lineno=329, col_offset=31), 'pending', Load(), lineno=329, col_offset=31), Num(0, lineno=329, col_offset=47)], lineno=329, col_offset=15), [Assign([Attribute(Name('self', Load(), lineno=330, col_offset=16), 'id', Store(), lineno=330, col_offset=16)], Num(0, lineno=330, col_offset=26), lineno=330, col_offset=16)], [], lineno=329, col_offset=12)], lineno=325, col_offset=8), Expr(Call(Attribute(Name('idlock', Load(), lineno=331, col_offset=8), 'release', Load(), lineno=331, col_offset=8), [], [], None, None, lineno=331, col_offset=8), lineno=331, col_offset=8), Expr(Call(Attribute(Name('mutex', Load(), lineno=332, col_offset=8), 'acquire', Load(), lineno=332, col_offset=8), [], [], None, None, lineno=332, col_offset=8), lineno=332, col_offset=8)], [], lineno=304, col_offset=4), FunctionDef('signal', arguments([Name('self', Param(), lineno=334, col_offset=15)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=335, col_offset=8), 'broadcast', Load(), lineno=335, col_offset=8), [Num(1, lineno=335, col_offset=23)], [], None, None, lineno=335, col_offset=8), lineno=335, col_offset=8)], [], lineno=334, col_offset=4), FunctionDef('broadcast', arguments([Name('self', Param(), lineno=337, col_offset=18), Name('num', Param(), lineno=337, col_offset=24)], None, None, [Num(-1, lineno=337, col_offset=31)]), [If(Compare(Name('num', Load(), lineno=338, col_offset=11), [Lt()], [Num(-1, lineno=338, col_offset=18)], lineno=338, col_offset=11), [Raise(Name('ValueError', Load(), lineno=339, col_offset=18), BinOp(Str('.broadcast called with num %r', lineno=339, col_offset=30), Mod(), Tuple([Name('num', Load(), lineno=339, col_offset=65)], Load(), lineno=339, col_offset=65), lineno=339, col_offset=30), None, lineno=339, col_offset=12)], [], lineno=338, col_offset=8), If(Compare(Name('num', Load(), lineno=340, col_offset=11), [Eq()], [Num(0, lineno=340, col_offset=18)], lineno=340, col_offset=11), [Return(None, lineno=341, col_offset=12)], [], lineno=340, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=342, col_offset=8), 'idlock', Load(), lineno=342, col_offset=8), 'acquire', Load(), lineno=342, col_offset=8), [], [], None, None, lineno=342, col_offset=8), lineno=342, col_offset=8), If(Attribute(Name('self', Load(), lineno=343, col_offset=11), 'pending', Load(), lineno=343, col_offset=11), [Assign([Attribute(Name('self', Load(), lineno=344, col_offset=12), 'waiting', Store(), lineno=344, col_offset=12)], BinOp(Attribute(Name('self', Load(), lineno=344, col_offset=27), 'waiting', Load(), lineno=344, col_offset=27), Add(), Attribute(Name('self', Load(), lineno=344, col_offset=42), 'pending', Load(), lineno=344, col_offset=42), lineno=344, col_offset=27), lineno=344, col_offset=12), Assign([Attribute(Name('self', Load(), lineno=345, col_offset=12), 'pending', Store(), lineno=345, col_offset=12)], Num(0, lineno=345, col_offset=27), lineno=345, col_offset=12), Assign([Attribute(Name('self', Load(), lineno=346, col_offset=12), 'id', Store(), lineno=346, col_offset=12)], BinOp(Attribute(Name('self', Load(), lineno=346, col_offset=22), 'id', Load(), lineno=346, col_offset=22), Add(), Num(1, lineno=346, col_offset=32), lineno=346, col_offset=22), lineno=346, col_offset=12)], [], lineno=343, col_offset=8), If(Compare(Name('num', Load(), lineno=347, col_offset=11), [Eq()], [Num(-1, lineno=347, col_offset=19)], lineno=347, col_offset=11), [Assign([Attribute(Name('self', Load(), lineno=348, col_offset=12), 'torelease', Store(), lineno=348, col_offset=12)], Attribute(Name('self', Load(), lineno=348, col_offset=29), 'waiting', Load(), lineno=348, col_offset=29), lineno=348, col_offset=12)], [Assign([Attribute(Name('self', Load(), lineno=350, col_offset=12), 'torelease', Store(), lineno=350, col_offset=12)], Call(Name('min', Load(), lineno=350, col_offset=29), [Attribute(Name('self', Load(), lineno=350, col_offset=34), 'waiting', Load(), lineno=350, col_offset=34), BinOp(Attribute(Name('self', Load(), lineno=351, col_offset=34), 'torelease', Load(), lineno=351, col_offset=34), Add(), Name('num', Load(), lineno=351, col_offset=51), lineno=351, col_offset=34)], [], None, None, lineno=350, col_offset=29), lineno=350, col_offset=12)], lineno=347, col_offset=8), If(BoolOp(And(), [Attribute(Name('self', Load(), lineno=352, col_offset=11), 'torelease', Load(), lineno=352, col_offset=11), UnaryOp(Not(), Attribute(Name('self', Load(), lineno=352, col_offset=34), 'releasing', Load(), lineno=352, col_offset=34), lineno=352, col_offset=30)], lineno=352, col_offset=11), [Assign([Attribute(Name('self', Load(), lineno=353, col_offset=12), 'releasing', Store(), lineno=353, col_offset=12)], Num(1, lineno=353, col_offset=29), lineno=353, col_offset=12), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=354, col_offset=12), 'checkout', Load(), lineno=354, col_offset=12), 'release', Load(), lineno=354, col_offset=12), [], [], None, None, lineno=354, col_offset=12), lineno=354, col_offset=12)], [], lineno=352, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=355, col_offset=8), 'idlock', Load(), lineno=355, col_offset=8), 'release', Load(), lineno=355, col_offset=8), [], [], None, None, lineno=355, col_offset=8), lineno=355, col_offset=8)], [], lineno=337, col_offset=4)], [], lineno=273, col_offset=0), ClassDef('barrier', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=358, col_offset=17), Name('n', Param(), lineno=358, col_offset=23)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=359, col_offset=8), 'n', Store(), lineno=359, col_offset=8)], Name('n', Load(), lineno=359, col_offset=17), lineno=359, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=360, col_offset=8), 'togo', Store(), lineno=360, col_offset=8)], Name('n', Load(), lineno=360, col_offset=20), lineno=360, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=361, col_offset=8), 'full', Store(), lineno=361, col_offset=8)], Call(Name('condition', Load(), lineno=361, col_offset=20), [], [], None, None, lineno=361, col_offset=20), lineno=361, col_offset=8)], [], lineno=358, col_offset=4), FunctionDef('enter', arguments([Name('self', Param(), lineno=363, col_offset=14)], None, None, []), [Assign([Name('full', Store(), lineno=364, col_offset=8)], Attribute(Name('self', Load(), lineno=364, col_offset=15), 'full', Load(), lineno=364, col_offset=15), lineno=364, col_offset=8), Expr(Call(Attribute(Name('full', Load(), lineno=365, col_offset=8), 'acquire', Load(), lineno=365, col_offset=8), [], [], None, None, lineno=365, col_offset=8), lineno=365, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=366, col_offset=8), 'togo', Store(), lineno=366, col_offset=8)], BinOp(Attribute(Name('self', Load(), lineno=366, col_offset=20), 'togo', Load(), lineno=366, col_offset=20), Sub(), Num(1, lineno=366, col_offset=32), lineno=366, col_offset=20), lineno=366, col_offset=8), If(Attribute(Name('self', Load(), lineno=367, col_offset=11), 'togo', Load(), lineno=367, col_offset=11), [Expr(Call(Attribute(Name('full', Load(), lineno=368, col_offset=12), 'wait', Load(), lineno=368, col_offset=12), [], [], None, None, lineno=368, col_offset=12), lineno=368, col_offset=12)], [Assign([Attribute(Name('self', Load(), lineno=370, col_offset=12), 'togo', Store(), lineno=370, col_offset=12)], Attribute(Name('self', Load(), lineno=370, col_offset=24), 'n', Load(), lineno=370, col_offset=24), lineno=370, col_offset=12), Expr(Call(Attribute(Name('full', Load(), lineno=371, col_offset=12), 'broadcast', Load(), lineno=371, col_offset=12), [], [], None, None, lineno=371, col_offset=12), lineno=371, col_offset=12)], lineno=367, col_offset=8), Expr(Call(Attribute(Name('full', Load(), lineno=372, col_offset=8), 'release', Load(), lineno=372, col_offset=8), [], [], None, None, lineno=372, col_offset=8), lineno=372, col_offset=8)], [], lineno=363, col_offset=4)], [], lineno=357, col_offset=0), ClassDef('event', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=375, col_offset=17)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=376, col_offset=8), 'state', Store(), lineno=376, col_offset=8)], Num(0, lineno=376, col_offset=22), lineno=376, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=377, col_offset=8), 'posted', Store(), lineno=377, col_offset=8)], Call(Name('condition', Load(), lineno=377, col_offset=22), [], [], None, None, lineno=377, col_offset=22), lineno=377, col_offset=8)], [], lineno=375, col_offset=4), FunctionDef('post', arguments([Name('self', Param(), lineno=379, col_offset=13)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=380, col_offset=8), 'posted', Load(), lineno=380, col_offset=8), 'acquire', Load(), lineno=380, col_offset=8), [], [], None, None, lineno=380, col_offset=8), lineno=380, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=381, col_offset=8), 'state', Store(), lineno=381, col_offset=8)], Num(1, lineno=381, col_offset=21), lineno=381, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=382, col_offset=8), 'posted', Load(), lineno=382, col_offset=8), 'broadcast', Load(), lineno=382, col_offset=8), [], [], None, None, lineno=382, col_offset=8), lineno=382, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=383, col_offset=8), 'posted', Load(), lineno=383, col_offset=8), 'release', Load(), lineno=383, col_offset=8), [], [], None, None, lineno=383, col_offset=8), lineno=383, col_offset=8)], [], lineno=379, col_offset=4), FunctionDef('clear', arguments([Name('self', Param(), lineno=385, col_offset=14)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=386, col_offset=8), 'posted', Load(), lineno=386, col_offset=8), 'acquire', Load(), lineno=386, col_offset=8), [], [], None, None, lineno=386, col_offset=8), lineno=386, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=387, col_offset=8), 'state', Store(), lineno=387, col_offset=8)], Num(0, lineno=387, col_offset=21), lineno=387, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=388, col_offset=8), 'posted', Load(), lineno=388, col_offset=8), 'release', Load(), lineno=388, col_offset=8), [], [], None, None, lineno=388, col_offset=8), lineno=388, col_offset=8)], [], lineno=385, col_offset=4), FunctionDef('is_posted', arguments([Name('self', Param(), lineno=390, col_offset=18)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=391, col_offset=8), 'posted', Load(), lineno=391, col_offset=8), 'acquire', Load(), lineno=391, col_offset=8), [], [], None, None, lineno=391, col_offset=8), lineno=391, col_offset=8), Assign([Name('answer', Store(), lineno=392, col_offset=8)], Attribute(Name('self', Load(), lineno=392, col_offset=17), 'state', Load(), lineno=392, col_offset=17), lineno=392, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=393, col_offset=8), 'posted', Load(), lineno=393, col_offset=8), 'release', Load(), lineno=393, col_offset=8), [], [], None, None, lineno=393, col_offset=8), lineno=393, col_offset=8), Return(Name('answer', Load(), lineno=394, col_offset=15), lineno=394, col_offset=8)], [], lineno=390, col_offset=4), FunctionDef('wait', arguments([Name('self', Param(), lineno=396, col_offset=13)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=397, col_offset=8), 'posted', Load(), lineno=397, col_offset=8), 'acquire', Load(), lineno=397, col_offset=8), [], [], None, None, lineno=397, col_offset=8), lineno=397, col_offset=8), If(UnaryOp(Not(), Attribute(Name('self', Load(), lineno=398, col_offset=15), 'state', Load(), lineno=398, col_offset=15), lineno=398, col_offset=11), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=399, col_offset=12), 'posted', Load(), lineno=399, col_offset=12), 'wait', Load(), lineno=399, col_offset=12), [], [], None, None, lineno=399, col_offset=12), lineno=399, col_offset=12)], [], lineno=398, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=400, col_offset=8), 'posted', Load(), lineno=400, col_offset=8), 'release', Load(), lineno=400, col_offset=8), [], [], None, None, lineno=400, col_offset=8), lineno=400, col_offset=8)], [], lineno=396, col_offset=4)], [], lineno=374, col_offset=0), ClassDef('semaphore', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=403, col_offset=17), Name('count', Param(), lineno=403, col_offset=23)], None, None, [Num(1, lineno=403, col_offset=29)]), [If(Compare(Name('count', Load(), lineno=404, col_offset=11), [LtE()], [Num(0, lineno=404, col_offset=20)], lineno=404, col_offset=11), [Raise(Name('ValueError', Load(), lineno=405, col_offset=18), BinOp(Str('semaphore count %d; must be >= 1', lineno=405, col_offset=30), Mod(), Name('count', Load(), lineno=405, col_offset=67), lineno=405, col_offset=30), None, lineno=405, col_offset=12)], [], lineno=404, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=406, col_offset=8), 'count', Store(), lineno=406, col_offset=8)], Name('count', Load(), lineno=406, col_offset=21), lineno=406, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=407, col_offset=8), 'maxcount', Store(), lineno=407, col_offset=8)], Name('count', Load(), lineno=407, col_offset=24), lineno=407, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=408, col_offset=8), 'nonzero', Store(), lineno=408, col_offset=8)], Call(Name('condition', Load(), lineno=408, col_offset=23), [], [], None, None, lineno=408, col_offset=23), lineno=408, col_offset=8)], [], lineno=403, col_offset=4), FunctionDef('p', arguments([Name('self', Param(), lineno=410, col_offset=10)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=411, col_offset=8), 'nonzero', Load(), lineno=411, col_offset=8), 'acquire', Load(), lineno=411, col_offset=8), [], [], None, None, lineno=411, col_offset=8), lineno=411, col_offset=8), While(Compare(Attribute(Name('self', Load(), lineno=412, col_offset=14), 'count', Load(), lineno=412, col_offset=14), [Eq()], [Num(0, lineno=412, col_offset=28)], lineno=412, col_offset=14), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=413, col_offset=12), 'nonzero', Load(), lineno=413, col_offset=12), 'wait', Load(), lineno=413, col_offset=12), [], [], None, None, lineno=413, col_offset=12), lineno=413, col_offset=12)], [], lineno=412, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=414, col_offset=8), 'count', Store(), lineno=414, col_offset=8)], BinOp(Attribute(Name('self', Load(), lineno=414, col_offset=21), 'count', Load(), lineno=414, col_offset=21), Sub(), Num(1, lineno=414, col_offset=34), lineno=414, col_offset=21), lineno=414, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=415, col_offset=8), 'nonzero', Load(), lineno=415, col_offset=8), 'release', Load(), lineno=415, col_offset=8), [], [], None, None, lineno=415, col_offset=8), lineno=415, col_offset=8)], [], lineno=410, col_offset=4), FunctionDef('v', arguments([Name('self', Param(), lineno=417, col_offset=10)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=418, col_offset=8), 'nonzero', Load(), lineno=418, col_offset=8), 'acquire', Load(), lineno=418, col_offset=8), [], [], None, None, lineno=418, col_offset=8), lineno=418, col_offset=8), If(Compare(Attribute(Name('self', Load(), lineno=419, col_offset=11), 'count', Load(), lineno=419, col_offset=11), [Eq()], [Attribute(Name('self', Load(), lineno=419, col_offset=25), 'maxcount', Load(), lineno=419, col_offset=25)], lineno=419, col_offset=11), [Raise(Name('ValueError', Load(), lineno=420, col_offset=18), BinOp(Str('.v() tried to raise semaphore count above initial value %r', lineno=420, col_offset=30), Mod(), Attribute(Name('self', Load(), lineno=421, col_offset=39), 'maxcount', Load(), lineno=421, col_offset=39), lineno=420, col_offset=30), None, lineno=420, col_offset=12)], [], lineno=419, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=422, col_offset=8), 'count', Store(), lineno=422, col_offset=8)], BinOp(Attribute(Name('self', Load(), lineno=422, col_offset=21), 'count', Load(), lineno=422, col_offset=21), Add(), Num(1, lineno=422, col_offset=34), lineno=422, col_offset=21), lineno=422, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=423, col_offset=8), 'nonzero', Load(), lineno=423, col_offset=8), 'signal', Load(), lineno=423, col_offset=8), [], [], None, None, lineno=423, col_offset=8), lineno=423, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=424, col_offset=8), 'nonzero', Load(), lineno=424, col_offset=8), 'release', Load(), lineno=424, col_offset=8), [], [], None, None, lineno=424, col_offset=8), lineno=424, col_offset=8)], [], lineno=417, col_offset=4)], [], lineno=402, col_offset=0), ClassDef('mrsw', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=427, col_offset=17)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=429, col_offset=8), 'rwOK', Store(), lineno=429, col_offset=8)], Call(Attribute(Name('thread', Load(), lineno=429, col_offset=20), 'allocate_lock', Load(), lineno=429, col_offset=20), [], [], None, None, lineno=429, col_offset=20), lineno=429, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=430, col_offset=8), 'nr', Store(), lineno=430, col_offset=8)], Num(0, lineno=430, col_offset=18), lineno=430, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=431, col_offset=8), 'nw', Store(), lineno=431, col_offset=8)], Num(0, lineno=431, col_offset=18), lineno=431, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=432, col_offset=8), 'writing', Store(), lineno=432, col_offset=8)], Num(0, lineno=432, col_offset=23), lineno=432, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=435, col_offset=8), 'readOK', Store(), lineno=435, col_offset=8)], Call(Name('condition', Load(), lineno=435, col_offset=23), [Attribute(Name('self', Load(), lineno=435, col_offset=33), 'rwOK', Load(), lineno=435, col_offset=33)], [], None, None, lineno=435, col_offset=23), lineno=435, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=436, col_offset=8), 'writeOK', Store(), lineno=436, col_offset=8)], Call(Name('condition', Load(), lineno=436, col_offset=23), [Attribute(Name('self', Load(), lineno=436, col_offset=33), 'rwOK', Load(), lineno=436, col_offset=33)], [], None, None, lineno=436, col_offset=23), lineno=436, col_offset=8)], [], lineno=427, col_offset=4), FunctionDef('read_in', arguments([Name('self', Param(), lineno=438, col_offset=16)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=439, col_offset=8), 'rwOK', Load(), lineno=439, col_offset=8), 'acquire', Load(), lineno=439, col_offset=8), [], [], None, None, lineno=439, col_offset=8), lineno=439, col_offset=8), While(Attribute(Name('self', Load(), lineno=440, col_offset=14), 'nw', Load(), lineno=440, col_offset=14), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=441, col_offset=12), 'readOK', Load(), lineno=441, col_offset=12), 'wait', Load(), lineno=441, col_offset=12), [], [], None, None, lineno=441, col_offset=12), lineno=441, col_offset=12)], [], lineno=440, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=442, col_offset=8), 'nr', Store(), lineno=442, col_offset=8)], BinOp(Attribute(Name('self', Load(), lineno=442, col_offset=18), 'nr', Load(), lineno=442, col_offset=18), Add(), Num(1, lineno=442, col_offset=28), lineno=442, col_offset=18), lineno=442, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=443, col_offset=8), 'rwOK', Load(), lineno=443, col_offset=8), 'release', Load(), lineno=443, col_offset=8), [], [], None, None, lineno=443, col_offset=8), lineno=443, col_offset=8)], [], lineno=438, col_offset=4), FunctionDef('read_out', arguments([Name('self', Param(), lineno=445, col_offset=17)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=446, col_offset=8), 'rwOK', Load(), lineno=446, col_offset=8), 'acquire', Load(), lineno=446, col_offset=8), [], [], None, None, lineno=446, col_offset=8), lineno=446, col_offset=8), If(Compare(Attribute(Name('self', Load(), lineno=447, col_offset=11), 'nr', Load(), lineno=447, col_offset=11), [LtE()], [Num(0, lineno=447, col_offset=22)], lineno=447, col_offset=11), [Raise(Name('ValueError', Load(), lineno=448, col_offset=18), Str('.read_out() invoked without an active reader', lineno=449, col_offset=18), None, lineno=448, col_offset=12)], [], lineno=447, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=450, col_offset=8), 'nr', Store(), lineno=450, col_offset=8)], BinOp(Attribute(Name('self', Load(), lineno=450, col_offset=18), 'nr', Load(), lineno=450, col_offset=18), Sub(), Num(1, lineno=450, col_offset=28), lineno=450, col_offset=18), lineno=450, col_offset=8), If(Compare(Attribute(Name('self', Load(), lineno=451, col_offset=11), 'nr', Load(), lineno=451, col_offset=11), [Eq()], [Num(0, lineno=451, col_offset=22)], lineno=451, col_offset=11), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=452, col_offset=12), 'writeOK', Load(), lineno=452, col_offset=12), 'signal', Load(), lineno=452, col_offset=12), [], [], None, None, lineno=452, col_offset=12), lineno=452, col_offset=12)], [], lineno=451, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=453, col_offset=8), 'rwOK', Load(), lineno=453, col_offset=8), 'release', Load(), lineno=453, col_offset=8), [], [], None, None, lineno=453, col_offset=8), lineno=453, col_offset=8)], [], lineno=445, col_offset=4), FunctionDef('write_in', arguments([Name('self', Param(), lineno=455, col_offset=17)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=456, col_offset=8), 'rwOK', Load(), lineno=456, col_offset=8), 'acquire', Load(), lineno=456, col_offset=8), [], [], None, None, lineno=456, col_offset=8), lineno=456, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=457, col_offset=8), 'nw', Store(), lineno=457, col_offset=8)], BinOp(Attribute(Name('self', Load(), lineno=457, col_offset=18), 'nw', Load(), lineno=457, col_offset=18), Add(), Num(1, lineno=457, col_offset=28), lineno=457, col_offset=18), lineno=457, col_offset=8), While(BoolOp(Or(), [Attribute(Name('self', Load(), lineno=458, col_offset=14), 'writing', Load(), lineno=458, col_offset=14), Attribute(Name('self', Load(), lineno=458, col_offset=30), 'nr', Load(), lineno=458, col_offset=30)], lineno=458, col_offset=14), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=459, col_offset=12), 'writeOK', Load(), lineno=459, col_offset=12), 'wait', Load(), lineno=459, col_offset=12), [], [], None, None, lineno=459, col_offset=12), lineno=459, col_offset=12)], [], lineno=458, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=460, col_offset=8), 'writing', Store(), lineno=460, col_offset=8)], Num(1, lineno=460, col_offset=23), lineno=460, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=461, col_offset=8), 'rwOK', Load(), lineno=461, col_offset=8), 'release', Load(), lineno=461, col_offset=8), [], [], None, None, lineno=461, col_offset=8), lineno=461, col_offset=8)], [], lineno=455, col_offset=4), FunctionDef('write_out', arguments([Name('self', Param(), lineno=463, col_offset=18)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=464, col_offset=8), 'rwOK', Load(), lineno=464, col_offset=8), 'acquire', Load(), lineno=464, col_offset=8), [], [], None, None, lineno=464, col_offset=8), lineno=464, col_offset=8), If(UnaryOp(Not(), Attribute(Name('self', Load(), lineno=465, col_offset=15), 'writing', Load(), lineno=465, col_offset=15), lineno=465, col_offset=11), [Raise(Name('ValueError', Load(), lineno=466, col_offset=18), Str('.write_out() invoked without an active writer', lineno=467, col_offset=18), None, lineno=466, col_offset=12)], [], lineno=465, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=468, col_offset=8), 'writing', Store(), lineno=468, col_offset=8)], Num(0, lineno=468, col_offset=23), lineno=468, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=469, col_offset=8), 'nw', Store(), lineno=469, col_offset=8)], BinOp(Attribute(Name('self', Load(), lineno=469, col_offset=18), 'nw', Load(), lineno=469, col_offset=18), Sub(), Num(1, lineno=469, col_offset=28), lineno=469, col_offset=18), lineno=469, col_offset=8), If(Attribute(Name('self', Load(), lineno=470, col_offset=11), 'nw', Load(), lineno=470, col_offset=11), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=471, col_offset=12), 'writeOK', Load(), lineno=471, col_offset=12), 'signal', Load(), lineno=471, col_offset=12), [], [], None, None, lineno=471, col_offset=12), lineno=471, col_offset=12)], [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=473, col_offset=12), 'readOK', Load(), lineno=473, col_offset=12), 'broadcast', Load(), lineno=473, col_offset=12), [], [], None, None, lineno=473, col_offset=12), lineno=473, col_offset=12)], lineno=470, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=474, col_offset=8), 'rwOK', Load(), lineno=474, col_offset=8), 'release', Load(), lineno=474, col_offset=8), [], [], None, None, lineno=474, col_offset=8), lineno=474, col_offset=8)], [], lineno=463, col_offset=4), FunctionDef('write_to_read', arguments([Name('self', Param(), lineno=476, col_offset=22)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=477, col_offset=8), 'rwOK', Load(), lineno=477, col_offset=8), 'acquire', Load(), lineno=477, col_offset=8), [], [], None, None, lineno=477, col_offset=8), lineno=477, col_offset=8), If(UnaryOp(Not(), Attribute(Name('self', Load(), lineno=478, col_offset=15), 'writing', Load(), lineno=478, col_offset=15), lineno=478, col_offset=11), [Raise(Name('ValueError', Load(), lineno=479, col_offset=18), Str('.write_to_read() invoked without an active writer', lineno=480, col_offset=18), None, lineno=479, col_offset=12)], [], lineno=478, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=481, col_offset=8), 'writing', Store(), lineno=481, col_offset=8)], Num(0, lineno=481, col_offset=23), lineno=481, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=482, col_offset=8), 'nw', Store(), lineno=482, col_offset=8)], BinOp(Attribute(Name('self', Load(), lineno=482, col_offset=18), 'nw', Load(), lineno=482, col_offset=18), Sub(), Num(1, lineno=482, col_offset=28), lineno=482, col_offset=18), lineno=482, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=483, col_offset=8), 'nr', Store(), lineno=483, col_offset=8)], BinOp(Attribute(Name('self', Load(), lineno=483, col_offset=18), 'nr', Load(), lineno=483, col_offset=18), Add(), Num(1, lineno=483, col_offset=28), lineno=483, col_offset=18), lineno=483, col_offset=8), If(UnaryOp(Not(), Attribute(Name('self', Load(), lineno=484, col_offset=15), 'nw', Load(), lineno=484, col_offset=15), lineno=484, col_offset=11), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=485, col_offset=12), 'readOK', Load(), lineno=485, col_offset=12), 'broadcast', Load(), lineno=485, col_offset=12), [], [], None, None, lineno=485, col_offset=12), lineno=485, col_offset=12)], [], lineno=484, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=486, col_offset=8), 'rwOK', Load(), lineno=486, col_offset=8), 'release', Load(), lineno=486, col_offset=8), [], [], None, None, lineno=486, col_offset=8), lineno=486, col_offset=8)], [], lineno=476, col_offset=4)], [], lineno=426, col_offset=0), FunctionDef('_new_thread', arguments([Name('func', Param(), lineno=495, col_offset=16)], 'args', None, []), [Global(['TID'], lineno=496, col_offset=4), Expr(Call(Attribute(Name('tid', Load(), lineno=497, col_offset=4), 'acquire', Load(), lineno=497, col_offset=4), [], [], None, None, lineno=497, col_offset=4), lineno=497, col_offset=4), Assign([Name('id', Store(), lineno=497, col_offset=19), Name('TID', Store(), lineno=497, col_offset=24)], BinOp(Name('TID', Load(), lineno=497, col_offset=30), Add(), Num(1, lineno=497, col_offset=34), lineno=497, col_offset=30), lineno=497, col_offset=19), Expr(Call(Attribute(Name('tid', Load(), lineno=497, col_offset=37), 'release', Load(), lineno=497, col_offset=37), [], [], None, None, lineno=497, col_offset=37), lineno=497, col_offset=37), Expr(Call(Attribute(Name('io', Load(), lineno=498, col_offset=4), 'acquire', Load(), lineno=498, col_offset=4), [], [], None, None, lineno=498, col_offset=4), lineno=498, col_offset=4), Expr(Call(Attribute(Name('alive', Load(), lineno=498, col_offset=18), 'append', Load(), lineno=498, col_offset=18), [Name('id', Load(), lineno=498, col_offset=31)], [], None, None, lineno=498, col_offset=18), lineno=498, col_offset=18), Print(None, [Str('starting thread', lineno=499, col_offset=24), Name('id', Load(), lineno=499, col_offset=43), Str('--', lineno=499, col_offset=47), Call(Name('len', Load(), lineno=499, col_offset=53), [Name('alive', Load(), lineno=499, col_offset=57)], [], None, None, lineno=499, col_offset=53), Str('alive', lineno=499, col_offset=65)], True, lineno=499, col_offset=18), Expr(Call(Attribute(Name('io', Load(), lineno=500, col_offset=18), 'release', Load(), lineno=500, col_offset=18), [], [], None, None, lineno=500, col_offset=18), lineno=500, col_offset=18), Expr(Call(Attribute(Name('thread', Load(), lineno=501, col_offset=4), 'start_new_thread', Load(), lineno=501, col_offset=4), [Name('func', Load(), lineno=501, col_offset=29), BinOp(Tuple([Name('id', Load(), lineno=501, col_offset=36)], Load(), lineno=501, col_offset=36), Add(), Name('args', Load(), lineno=501, col_offset=43), lineno=501, col_offset=35)], [], None, None, lineno=501, col_offset=4), lineno=501, col_offset=4)], [], lineno=495, col_offset=0), FunctionDef('_qsort', arguments([Name('tid', Param(), lineno=503, col_offset=11), Name('a', Param(), lineno=503, col_offset=16), Name('l', Param(), lineno=503, col_offset=19), Name('r', Param(), lineno=503, col_offset=22), Name('finished', Param(), lineno=503, col_offset=25)], None, None, []), [Expr(Call(Attribute(Name('io', Load(), lineno=505, col_offset=4), 'acquire', Load(), lineno=505, col_offset=4), [], [], None, None, lineno=505, col_offset=4), lineno=505, col_offset=4), Print(None, [Str('thread', lineno=505, col_offset=24), Name('tid', Load(), lineno=505, col_offset=34), Str('qsort', lineno=505, col_offset=39), Name('l', Load(), lineno=505, col_offset=48), Name('r', Load(), lineno=505, col_offset=51)], True, lineno=505, col_offset=18), Expr(Call(Attribute(Name('io', Load(), lineno=505, col_offset=54), 'release', Load(), lineno=505, col_offset=54), [], [], None, None, lineno=505, col_offset=54), lineno=505, col_offset=54), If(Compare(BinOp(Name('r', Load(), lineno=506, col_offset=7), Sub(), Name('l', Load(), lineno=506, col_offset=9), lineno=506, col_offset=7), [Gt()], [Num(1, lineno=506, col_offset=13)], lineno=506, col_offset=7), [Assign([Name('pivot', Store(), lineno=507, col_offset=8)], Subscript(Name('a', Load(), lineno=507, col_offset=16), Index(Name('l', Load(), lineno=507, col_offset=18)), Load(), lineno=507, col_offset=16), lineno=507, col_offset=8), Assign([Name('j', Store(), lineno=508, col_offset=8)], BinOp(Name('l', Load(), lineno=508, col_offset=12), Add(), Num(1, lineno=508, col_offset=14), lineno=508, col_offset=12), lineno=508, col_offset=8), For(Name('i', Store(), lineno=509, col_offset=12), Call(Name('range', Load(), lineno=509, col_offset=17), [Name('j', Load(), lineno=509, col_offset=23), Name('r', Load(), lineno=509, col_offset=26)], [], None, None, lineno=509, col_offset=17), [If(Compare(Subscript(Name('a', Load(), lineno=510, col_offset=15), Index(Name('i', Load(), lineno=510, col_offset=17)), Load(), lineno=510, col_offset=15), [LtE()], [Name('pivot', Load(), lineno=510, col_offset=23)], lineno=510, col_offset=15), [Assign([Tuple([Subscript(Name('a', Load(), lineno=511, col_offset=16), Index(Name('j', Load(), lineno=511, col_offset=18)), Store(), lineno=511, col_offset=16), Subscript(Name('a', Load(), lineno=511, col_offset=22), Index(Name('i', Load(), lineno=511, col_offset=24)), Store(), lineno=511, col_offset=22)], Store(), lineno=511, col_offset=16)], Tuple([Subscript(Name('a', Load(), lineno=511, col_offset=29), Index(Name('i', Load(), lineno=511, col_offset=31)), Load(), lineno=511, col_offset=29), Subscript(Name('a', Load(), lineno=511, col_offset=35), Index(Name('j', Load(), lineno=511, col_offset=37)), Load(), lineno=511, col_offset=35)], Load(), lineno=511, col_offset=29), lineno=511, col_offset=16), Assign([Name('j', Store(), lineno=512, col_offset=16)], BinOp(Name('j', Load(), lineno=512, col_offset=20), Add(), Num(1, lineno=512, col_offset=24), lineno=512, col_offset=20), lineno=512, col_offset=16)], [], lineno=510, col_offset=12)], [], lineno=509, col_offset=8), Assign([Tuple([Subscript(Name('a', Load(), lineno=513, col_offset=8), Index(Name('l', Load(), lineno=513, col_offset=10)), Store(), lineno=513, col_offset=8), Subscript(Name('a', Load(), lineno=513, col_offset=14), Index(BinOp(Name('j', Load(), lineno=513, col_offset=16), Sub(), Num(1, lineno=513, col_offset=18), lineno=513, col_offset=16)), Store(), lineno=513, col_offset=14)], Store(), lineno=513, col_offset=8)], Tuple([Subscript(Name('a', Load(), lineno=513, col_offset=23), Index(BinOp(Name('j', Load(), lineno=513, col_offset=25), Sub(), Num(1, lineno=513, col_offset=27), lineno=513, col_offset=25)), Load(), lineno=513, col_offset=23), Name('pivot', Load(), lineno=513, col_offset=31)], Load(), lineno=513, col_offset=23), lineno=513, col_offset=8), Assign([Name('l_subarray_sorted', Store(), lineno=515, col_offset=8)], Call(Name('event', Load(), lineno=515, col_offset=28), [], [], None, None, lineno=515, col_offset=28), lineno=515, col_offset=8), Assign([Name('r_subarray_sorted', Store(), lineno=516, col_offset=8)], Call(Name('event', Load(), lineno=516, col_offset=28), [], [], None, None, lineno=516, col_offset=28), lineno=516, col_offset=8), Expr(Call(Name('_new_thread', Load(), lineno=517, col_offset=8), [Name('_qsort', Load(), lineno=517, col_offset=20), Name('a', Load(), lineno=517, col_offset=28), Name('l', Load(), lineno=517, col_offset=31), BinOp(Name('j', Load(), lineno=517, col_offset=34), Sub(), Num(1, lineno=517, col_offset=36), lineno=517, col_offset=34), Name('l_subarray_sorted', Load(), lineno=517, col_offset=39)], [], None, None, lineno=517, col_offset=8), lineno=517, col_offset=8), Expr(Call(Name('_new_thread', Load(), lineno=518, col_offset=8), [Name('_qsort', Load(), lineno=518, col_offset=20), Name('a', Load(), lineno=518, col_offset=28), Name('j', Load(), lineno=518, col_offset=31), Name('r', Load(), lineno=518, col_offset=34), Name('r_subarray_sorted', Load(), lineno=518, col_offset=39)], [], None, None, lineno=518, col_offset=8), lineno=518, col_offset=8), Expr(Call(Attribute(Name('l_subarray_sorted', Load(), lineno=519, col_offset=8), 'wait', Load(), lineno=519, col_offset=8), [], [], None, None, lineno=519, col_offset=8), lineno=519, col_offset=8), Expr(Call(Attribute(Name('r_subarray_sorted', Load(), lineno=520, col_offset=8), 'wait', Load(), lineno=520, col_offset=8), [], [], None, None, lineno=520, col_offset=8), lineno=520, col_offset=8)], [], lineno=506, col_offset=4), Expr(Call(Attribute(Name('io', Load(), lineno=522, col_offset=4), 'acquire', Load(), lineno=522, col_offset=4), [], [], None, None, lineno=522, col_offset=4), lineno=522, col_offset=4), Print(None, [Str('thread', lineno=522, col_offset=24), Name('tid', Load(), lineno=522, col_offset=34), Str('qsort done', lineno=522, col_offset=39)], True, lineno=522, col_offset=18), Expr(Call(Attribute(Name('alive', Load(), lineno=523, col_offset=18), 'remove', Load(), lineno=523, col_offset=18), [Name('tid', Load(), lineno=523, col_offset=31)], [], None, None, lineno=523, col_offset=18), lineno=523, col_offset=18), Expr(Call(Attribute(Name('io', Load(), lineno=523, col_offset=37), 'release', Load(), lineno=523, col_offset=37), [], [], None, None, lineno=523, col_offset=37), lineno=523, col_offset=37), Expr(Call(Attribute(Name('finished', Load(), lineno=524, col_offset=4), 'post', Load(), lineno=524, col_offset=4), [], [], None, None, lineno=524, col_offset=4), lineno=524, col_offset=4)], [], lineno=503, col_offset=0), FunctionDef('_randarray', arguments([Name('tid', Param(), lineno=526, col_offset=15), Name('a', Param(), lineno=526, col_offset=20), Name('finished', Param(), lineno=526, col_offset=23)], None, None, []), [Expr(Call(Attribute(Name('io', Load(), lineno=527, col_offset=4), 'acquire', Load(), lineno=527, col_offset=4), [], [], None, None, lineno=527, col_offset=4), lineno=527, col_offset=4), Print(None, [Str('thread', lineno=527, col_offset=24), Name('tid', Load(), lineno=527, col_offset=34), Str('randomizing array', lineno=527, col_offset=39)], True, lineno=527, col_offset=18), Expr(Call(Attribute(Name('io', Load(), lineno=528, col_offset=18), 'release', Load(), lineno=528, col_offset=18), [], [], None, None, lineno=528, col_offset=18), lineno=528, col_offset=18), For(Name('i', Store(), lineno=529, col_offset=8), Call(Name('range', Load(), lineno=529, col_offset=13), [Num(1, lineno=529, col_offset=19), Call(Name('len', Load(), lineno=529, col_offset=22), [Name('a', Load(), lineno=529, col_offset=26)], [], None, None, lineno=529, col_offset=22)], [], None, None, lineno=529, col_offset=13), [Expr(Call(Attribute(Name('wh', Load(), lineno=530, col_offset=8), 'acquire', Load(), lineno=530, col_offset=8), [], [], None, None, lineno=530, col_offset=8), lineno=530, col_offset=8), Assign([Name('j', Store(), lineno=530, col_offset=22)], Call(Name('randint', Load(), lineno=530, col_offset=26), [Num(0, lineno=530, col_offset=34), Name('i', Load(), lineno=530, col_offset=36)], [], None, None, lineno=530, col_offset=26), lineno=530, col_offset=22), Expr(Call(Attribute(Name('wh', Load(), lineno=530, col_offset=40), 'release', Load(), lineno=530, col_offset=40), [], [], None, None, lineno=530, col_offset=40), lineno=530, col_offset=40), Assign([Tuple([Subscript(Name('a', Load(), lineno=531, col_offset=8), Index(Name('i', Load(), lineno=531, col_offset=10)), Store(), lineno=531, col_offset=8), Subscript(Name('a', Load(), lineno=531, col_offset=14), Index(Name('j', Load(), lineno=531, col_offset=16)), Store(), lineno=531, col_offset=14)], Store(), lineno=531, col_offset=8)], Tuple([Subscript(Name('a', Load(), lineno=531, col_offset=21), Index(Name('j', Load(), lineno=531, col_offset=23)), Load(), lineno=531, col_offset=21), Subscript(Name('a', Load(), lineno=531, col_offset=27), Index(Name('i', Load(), lineno=531, col_offset=29)), Load(), lineno=531, col_offset=27)], Load(), lineno=531, col_offset=21), lineno=531, col_offset=8)], [], lineno=529, col_offset=4), Expr(Call(Attribute(Name('io', Load(), lineno=532, col_offset=4), 'acquire', Load(), lineno=532, col_offset=4), [], [], None, None, lineno=532, col_offset=4), lineno=532, col_offset=4), Print(None, [Str('thread', lineno=532, col_offset=24), Name('tid', Load(), lineno=532, col_offset=34), Str('randomizing done', lineno=532, col_offset=39)], True, lineno=532, col_offset=18), Expr(Call(Attribute(Name('alive', Load(), lineno=533, col_offset=18), 'remove', Load(), lineno=533, col_offset=18), [Name('tid', Load(), lineno=533, col_offset=31)], [], None, None, lineno=533, col_offset=18), lineno=533, col_offset=18), Expr(Call(Attribute(Name('io', Load(), lineno=533, col_offset=37), 'release', Load(), lineno=533, col_offset=37), [], [], None, None, lineno=533, col_offset=37), lineno=533, col_offset=37), Expr(Call(Attribute(Name('finished', Load(), lineno=534, col_offset=4), 'post', Load(), lineno=534, col_offset=4), [], [], None, None, lineno=534, col_offset=4), lineno=534, col_offset=4)], [], lineno=526, col_offset=0), FunctionDef('_check_sort', arguments([Name('a', Param(), lineno=536, col_offset=16)], None, None, []), [If(Compare(Name('a', Load(), lineno=537, col_offset=7), [NotEq()], [Call(Name('range', Load(), lineno=537, col_offset=12), [Call(Name('len', Load(), lineno=537, col_offset=18), [Name('a', Load(), lineno=537, col_offset=22)], [], None, None, lineno=537, col_offset=18)], [], None, None, lineno=537, col_offset=12)], lineno=537, col_offset=7), [Raise(Name('ValueError', Load(), lineno=538, col_offset=14), Tuple([Str('a not sorted', lineno=538, col_offset=27), Name('a', Load(), lineno=538, col_offset=43)], Load(), lineno=538, col_offset=27), None, lineno=538, col_offset=8)], [], lineno=537, col_offset=4)], [], lineno=536, col_offset=0), FunctionDef('_run_one_sort', arguments([Name('tid', Param(), lineno=540, col_offset=18), Name('a', Param(), lineno=540, col_offset=23), Name('bar', Param(), lineno=540, col_offset=26), Name('done', Param(), lineno=540, col_offset=31)], None, None, []), [Expr(Call(Attribute(Name('io', Load(), lineno=544, col_offset=4), 'acquire', Load(), lineno=544, col_offset=4), [], [], None, None, lineno=544, col_offset=4), lineno=544, col_offset=4), Print(None, [Str('thread', lineno=544, col_offset=24), Name('tid', Load(), lineno=544, col_offset=34), Str('randomizing', lineno=544, col_offset=39), Name('a', Load(), lineno=544, col_offset=54)], True, lineno=544, col_offset=18), Expr(Call(Attribute(Name('io', Load(), lineno=545, col_offset=18), 'release', Load(), lineno=545, col_offset=18), [], [], None, None, lineno=545, col_offset=18), lineno=545, col_offset=18), Assign([Name('finished', Store(), lineno=546, col_offset=4)], Call(Name('event', Load(), lineno=546, col_offset=15), [], [], None, None, lineno=546, col_offset=15), lineno=546, col_offset=4), Expr(Call(Name('_new_thread', Load(), lineno=547, col_offset=4), [Name('_randarray', Load(), lineno=547, col_offset=16), Name('a', Load(), lineno=547, col_offset=28), Name('finished', Load(), lineno=547, col_offset=31)], [], None, None, lineno=547, col_offset=4), lineno=547, col_offset=4), Expr(Call(Attribute(Name('finished', Load(), lineno=548, col_offset=4), 'wait', Load(), lineno=548, col_offset=4), [], [], None, None, lineno=548, col_offset=4), lineno=548, col_offset=4), Expr(Call(Attribute(Name('io', Load(), lineno=550, col_offset=4), 'acquire', Load(), lineno=550, col_offset=4), [], [], None, None, lineno=550, col_offset=4), lineno=550, col_offset=4), Print(None, [Str('thread', lineno=550, col_offset=24), Name('tid', Load(), lineno=550, col_offset=34), Str('sorting', lineno=550, col_offset=39), Name('a', Load(), lineno=550, col_offset=50)], True, lineno=550, col_offset=18), Expr(Call(Attribute(Name('io', Load(), lineno=550, col_offset=53), 'release', Load(), lineno=550, col_offset=53), [], [], None, None, lineno=550, col_offset=53), lineno=550, col_offset=53), Expr(Call(Attribute(Name('finished', Load(), lineno=551, col_offset=4), 'clear', Load(), lineno=551, col_offset=4), [], [], None, None, lineno=551, col_offset=4), lineno=551, col_offset=4), Expr(Call(Name('_new_thread', Load(), lineno=552, col_offset=4), [Name('_qsort', Load(), lineno=552, col_offset=16), Name('a', Load(), lineno=552, col_offset=24), Num(0, lineno=552, col_offset=27), Call(Name('len', Load(), lineno=552, col_offset=30), [Name('a', Load(), lineno=552, col_offset=34)], [], None, None, lineno=552, col_offset=30), Name('finished', Load(), lineno=552, col_offset=38)], [], None, None, lineno=552, col_offset=4), lineno=552, col_offset=4), Expr(Call(Attribute(Name('finished', Load(), lineno=553, col_offset=4), 'wait', Load(), lineno=553, col_offset=4), [], [], None, None, lineno=553, col_offset=4), lineno=553, col_offset=4), Expr(Call(Name('_check_sort', Load(), lineno=554, col_offset=4), [Name('a', Load(), lineno=554, col_offset=16)], [], None, None, lineno=554, col_offset=4), lineno=554, col_offset=4), Expr(Call(Attribute(Name('io', Load(), lineno=556, col_offset=4), 'acquire', Load(), lineno=556, col_offset=4), [], [], None, None, lineno=556, col_offset=4), lineno=556, col_offset=4), Print(None, [Str('thread', lineno=556, col_offset=24), Name('tid', Load(), lineno=556, col_offset=34), Str('entering barrier', lineno=556, col_offset=39)], True, lineno=556, col_offset=18), Expr(Call(Attribute(Name('io', Load(), lineno=557, col_offset=18), 'release', Load(), lineno=557, col_offset=18), [], [], None, None, lineno=557, col_offset=18), lineno=557, col_offset=18), Expr(Call(Attribute(Name('bar', Load(), lineno=558, col_offset=4), 'enter', Load(), lineno=558, col_offset=4), [], [], None, None, lineno=558, col_offset=4), lineno=558, col_offset=4), Expr(Call(Attribute(Name('io', Load(), lineno=559, col_offset=4), 'acquire', Load(), lineno=559, col_offset=4), [], [], None, None, lineno=559, col_offset=4), lineno=559, col_offset=4), Print(None, [Str('thread', lineno=559, col_offset=24), Name('tid', Load(), lineno=559, col_offset=34), Str('leaving barrier', lineno=559, col_offset=39)], True, lineno=559, col_offset=18), Expr(Call(Attribute(Name('io', Load(), lineno=560, col_offset=18), 'release', Load(), lineno=560, col_offset=18), [], [], None, None, lineno=560, col_offset=18), lineno=560, col_offset=18), Expr(Call(Attribute(Name('io', Load(), lineno=561, col_offset=4), 'acquire', Load(), lineno=561, col_offset=4), [], [], None, None, lineno=561, col_offset=4), lineno=561, col_offset=4), Expr(Call(Attribute(Name('alive', Load(), lineno=561, col_offset=18), 'remove', Load(), lineno=561, col_offset=18), [Name('tid', Load(), lineno=561, col_offset=31)], [], None, None, lineno=561, col_offset=18), lineno=561, col_offset=18), Expr(Call(Attribute(Name('io', Load(), lineno=561, col_offset=37), 'release', Load(), lineno=561, col_offset=37), [], [], None, None, lineno=561, col_offset=37), lineno=561, col_offset=37), Expr(Call(Attribute(Name('bar', Load(), lineno=562, col_offset=4), 'enter', Load(), lineno=562, col_offset=4), [], [], None, None, lineno=562, col_offset=4), lineno=562, col_offset=4), Expr(Call(Attribute(Name('bar', Load(), lineno=564, col_offset=4), 'enter', Load(), lineno=564, col_offset=4), [], [], None, None, lineno=564, col_offset=4), lineno=564, col_offset=4), Expr(Call(Attribute(Name('done', Load(), lineno=565, col_offset=4), 'post', Load(), lineno=565, col_offset=4), [], [], None, None, lineno=565, col_offset=4), lineno=565, col_offset=4)], [], lineno=540, col_offset=0), FunctionDef('test', arguments([], None, None, []), [Global(['TID', 'tid', 'io', 'wh', 'randint', 'alive'], lineno=568, col_offset=4), Import([alias('random', None)], lineno=569, col_offset=4), Assign([Name('randint', Store(), lineno=570, col_offset=4)], Attribute(Name('random', Load(), lineno=570, col_offset=14), 'randint', Load(), lineno=570, col_offset=14), lineno=570, col_offset=4), Assign([Name('TID', Store(), lineno=572, col_offset=4)], Num(0, lineno=572, col_offset=10), lineno=572, col_offset=4), Assign([Name('tid', Store(), lineno=573, col_offset=4)], Call(Attribute(Name('thread', Load(), lineno=573, col_offset=10), 'allocate_lock', Load(), lineno=573, col_offset=10), [], [], None, None, lineno=573, col_offset=10), lineno=573, col_offset=4), Assign([Name('io', Store(), lineno=574, col_offset=4)], Call(Attribute(Name('thread', Load(), lineno=574, col_offset=10), 'allocate_lock', Load(), lineno=574, col_offset=10), [], [], None, None, lineno=574, col_offset=10), lineno=574, col_offset=4), Assign([Name('wh', Store(), lineno=575, col_offset=4)], Call(Attribute(Name('thread', Load(), lineno=575, col_offset=10), 'allocate_lock', Load(), lineno=575, col_offset=10), [], [], None, None, lineno=575, col_offset=10), lineno=575, col_offset=4), Assign([Name('alive', Store(), lineno=576, col_offset=4)], List([], Load(), lineno=576, col_offset=12), lineno=576, col_offset=4), Assign([Name('NSORTS', Store(), lineno=578, col_offset=4)], Num(5, lineno=578, col_offset=13), lineno=578, col_offset=4), Assign([Name('arrays', Store(), lineno=579, col_offset=4)], List([], Load(), lineno=579, col_offset=13), lineno=579, col_offset=4), For(Name('i', Store(), lineno=580, col_offset=8), Call(Name('range', Load(), lineno=580, col_offset=13), [Name('NSORTS', Load(), lineno=580, col_offset=19)], [], None, None, lineno=580, col_offset=13), [Expr(Call(Attribute(Name('arrays', Load(), lineno=581, col_offset=8), 'append', Load(), lineno=581, col_offset=8), [Call(Name('range', Load(), lineno=581, col_offset=23), [BinOp(BinOp(Name('i', Load(), lineno=581, col_offset=31), Add(), Num(1, lineno=581, col_offset=33), lineno=581, col_offset=31), Mult(), Num(10, lineno=581, col_offset=36), lineno=581, col_offset=30)], [], None, None, lineno=581, col_offset=23)], [], None, None, lineno=581, col_offset=8), lineno=581, col_offset=8)], [], lineno=580, col_offset=4), Assign([Name('bar', Store(), lineno=583, col_offset=4)], Call(Name('barrier', Load(), lineno=583, col_offset=10), [Name('NSORTS', Load(), lineno=583, col_offset=18)], [], None, None, lineno=583, col_offset=10), lineno=583, col_offset=4), Assign([Name('finished', Store(), lineno=584, col_offset=4)], Call(Name('event', Load(), lineno=584, col_offset=15), [], [], None, None, lineno=584, col_offset=15), lineno=584, col_offset=4), For(Name('i', Store(), lineno=585, col_offset=8), Call(Name('range', Load(), lineno=585, col_offset=13), [Name('NSORTS', Load(), lineno=585, col_offset=19)], [], None, None, lineno=585, col_offset=13), [Expr(Call(Name('_new_thread', Load(), lineno=586, col_offset=8), [Name('_run_one_sort', Load(), lineno=586, col_offset=20), Subscript(Name('arrays', Load(), lineno=586, col_offset=35), Index(Name('i', Load(), lineno=586, col_offset=42)), Load(), lineno=586, col_offset=35), Name('bar', Load(), lineno=586, col_offset=46), Name('finished', Load(), lineno=586, col_offset=51)], [], None, None, lineno=586, col_offset=8), lineno=586, col_offset=8)], [], lineno=585, col_offset=4), Expr(Call(Attribute(Name('finished', Load(), lineno=587, col_offset=4), 'wait', Load(), lineno=587, col_offset=4), [], [], None, None, lineno=587, col_offset=4), lineno=587, col_offset=4), Print(None, [Str('all threads done, and checking results ...', lineno=589, col_offset=10)], True, lineno=589, col_offset=4), If(Name('alive', Load(), lineno=590, col_offset=7), [Raise(Name('ValueError', Load(), lineno=591, col_offset=14), Tuple([Str('threads still alive at end', lineno=591, col_offset=27), Name('alive', Load(), lineno=591, col_offset=57)], Load(), lineno=591, col_offset=27), None, lineno=591, col_offset=8)], [], lineno=590, col_offset=4), For(Name('i', Store(), lineno=592, col_offset=8), Call(Name('range', Load(), lineno=592, col_offset=13), [Name('NSORTS', Load(), lineno=592, col_offset=19)], [], None, None, lineno=592, col_offset=13), [Assign([Name('a', Store(), lineno=593, col_offset=8)], Subscript(Name('arrays', Load(), lineno=593, col_offset=12), Index(Name('i', Load(), lineno=593, col_offset=19)), Load(), lineno=593, col_offset=12), lineno=593, col_offset=8), If(Compare(Call(Name('len', Load(), lineno=594, col_offset=11), [Name('a', Load(), lineno=594, col_offset=15)], [], None, None, lineno=594, col_offset=11), [NotEq()], [BinOp(BinOp(Name('i', Load(), lineno=594, col_offset=22), Add(), Num(1, lineno=594, col_offset=24), lineno=594, col_offset=22), Mult(), Num(10, lineno=594, col_offset=27), lineno=594, col_offset=21)], lineno=594, col_offset=11), [Raise(Name('ValueError', Load(), lineno=595, col_offset=18), Tuple([Str('length of array', lineno=595, col_offset=31), Name('i', Load(), lineno=595, col_offset=50), Str('screwed up', lineno=595, col_offset=53)], Load(), lineno=595, col_offset=31), None, lineno=595, col_offset=12)], [], lineno=594, col_offset=8), Expr(Call(Name('_check_sort', Load(), lineno=596, col_offset=8), [Name('a', Load(), lineno=596, col_offset=20)], [], None, None, lineno=596, col_offset=8), lineno=596, col_offset=8)], [], lineno=592, col_offset=4), Print(None, [Str('test passed!', lineno=598, col_offset=10), Name('TID', Load(), lineno=598, col_offset=26), Str('threads created in all', lineno=598, col_offset=31)], True, lineno=598, col_offset=4)], [], lineno=567, col_offset=0), If(Compare(Name('__name__', Load(), lineno=600, col_offset=3), [Eq()], [Str('__main__', lineno=600, col_offset=15)], lineno=600, col_offset=3), [Expr(Call(Name('test', Load(), lineno=601, col_offset=4), [], [], None, None, lineno=601, col_offset=4), lineno=601, col_offset=4)], [], lineno=600, col_offset=0)])
