Module([ImportFrom('Tkinter', [alias('*', None)], 0, lineno=1, col_offset=0), ClassDef('WidgetRedirector', [], [Expr(Str("Support for redirecting arbitrary widget subcommands.\n\n    Some Tk operations don't normally pass through Tkinter.  For example, if a\n    character is inserted into a Text widget by pressing a key, a default Tk\n    binding to the widget's 'insert' operation is activated, and the Tk library\n    processes the insert without calling back into Tkinter.\n\n    Although a binding to <Key> could be made via Tkinter, what we really want\n    to do is to hook the Tk 'insert' operation itself.\n\n    When a widget is instantiated, a Tcl command is created whose name is the\n    same as the pathname widget._w.  This command is used to invoke the various\n    widget operations, e.g. insert (for a Text widget). We are going to hook\n    this command and provide a facility ('register') to intercept the widget\n    operation.\n\n    In IDLE, the function being registered provides access to the top of a\n    Percolator chain.  At the bottom of the chain is a call to the original\n    Tk widget operation.\n\n    ", lineno=25, col_offset=-1), lineno=25, col_offset=-1), FunctionDef('__init__', arguments([Name('self', Param(), lineno=26, col_offset=17), Name('widget', Param(), lineno=26, col_offset=23)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=27, col_offset=8), '_operations', Store(), lineno=27, col_offset=8)], Dict([], [], lineno=27, col_offset=27), lineno=27, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=28, col_offset=8), 'widget', Store(), lineno=28, col_offset=8)], Name('widget', Load(), lineno=28, col_offset=22), lineno=28, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=29, col_offset=8), 'tk', Store(), lineno=29, col_offset=8), Name('tk', Store(), lineno=29, col_offset=18)], Attribute(Name('widget', Load(), lineno=29, col_offset=23), 'tk', Load(), lineno=29, col_offset=23), lineno=29, col_offset=8), Assign([Name('w', Store(), lineno=30, col_offset=8)], Attribute(Name('widget', Load(), lineno=30, col_offset=12), '_w', Load(), lineno=30, col_offset=12), lineno=30, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=31, col_offset=8), 'orig', Store(), lineno=31, col_offset=8)], BinOp(Name('w', Load(), lineno=31, col_offset=20), Add(), Str('_orig', lineno=31, col_offset=24), lineno=31, col_offset=20), lineno=31, col_offset=8), Expr(Call(Attribute(Name('tk', Load(), lineno=33, col_offset=8), 'call', Load(), lineno=33, col_offset=8), [Str('rename', lineno=33, col_offset=16), Name('w', Load(), lineno=33, col_offset=26), Attribute(Name('self', Load(), lineno=33, col_offset=29), 'orig', Load(), lineno=33, col_offset=29)], [], None, None, lineno=33, col_offset=8), lineno=33, col_offset=8), Expr(Call(Attribute(Name('tk', Load(), lineno=36, col_offset=8), 'createcommand', Load(), lineno=36, col_offset=8), [Name('w', Load(), lineno=36, col_offset=25), Attribute(Name('self', Load(), lineno=36, col_offset=28), 'dispatch', Load(), lineno=36, col_offset=28)], [], None, None, lineno=36, col_offset=8), lineno=36, col_offset=8)], [], lineno=26, col_offset=4), FunctionDef('__repr__', arguments([Name('self', Param(), lineno=38, col_offset=17)], None, None, []), [Return(BinOp(Str('WidgetRedirector(%s<%s>)', lineno=39, col_offset=15), Mod(), Tuple([Attribute(Attribute(Attribute(Name('self', Load(), lineno=39, col_offset=45), 'widget', Load(), lineno=39, col_offset=45), '__class__', Load(), lineno=39, col_offset=45), '__name__', Load(), lineno=39, col_offset=45), Attribute(Attribute(Name('self', Load(), lineno=40, col_offset=45), 'widget', Load(), lineno=40, col_offset=45), '_w', Load(), lineno=40, col_offset=45)], Load(), lineno=39, col_offset=45), lineno=39, col_offset=15), lineno=39, col_offset=8)], [], lineno=38, col_offset=4), FunctionDef('close', arguments([Name('self', Param(), lineno=42, col_offset=14)], None, None, []), [For(Name('operation', Store(), lineno=43, col_offset=12), Call(Name('list', Load(), lineno=43, col_offset=25), [Attribute(Name('self', Load(), lineno=43, col_offset=30), '_operations', Load(), lineno=43, col_offset=30)], [], None, None, lineno=43, col_offset=25), [Expr(Call(Attribute(Name('self', Load(), lineno=44, col_offset=12), 'unregister', Load(), lineno=44, col_offset=12), [Name('operation', Load(), lineno=44, col_offset=28)], [], None, None, lineno=44, col_offset=12), lineno=44, col_offset=12)], [], lineno=43, col_offset=8), Assign([Name('widget', Store(), lineno=45, col_offset=8)], Attribute(Name('self', Load(), lineno=45, col_offset=17), 'widget', Load(), lineno=45, col_offset=17), lineno=45, col_offset=8), Delete([Attribute(Name('self', Load(), lineno=45, col_offset=34), 'widget', Del(), lineno=45, col_offset=34)], lineno=45, col_offset=30), Assign([Name('orig', Store(), lineno=46, col_offset=8)], Attribute(Name('self', Load(), lineno=46, col_offset=15), 'orig', Load(), lineno=46, col_offset=15), lineno=46, col_offset=8), Delete([Attribute(Name('self', Load(), lineno=46, col_offset=30), 'orig', Del(), lineno=46, col_offset=30)], lineno=46, col_offset=26), Assign([Name('tk', Store(), lineno=47, col_offset=8)], Attribute(Name('widget', Load(), lineno=47, col_offset=13), 'tk', Load(), lineno=47, col_offset=13), lineno=47, col_offset=8), Assign([Name('w', Store(), lineno=48, col_offset=8)], Attribute(Name('widget', Load(), lineno=48, col_offset=12), '_w', Load(), lineno=48, col_offset=12), lineno=48, col_offset=8), Expr(Call(Attribute(Name('tk', Load(), lineno=49, col_offset=8), 'deletecommand', Load(), lineno=49, col_offset=8), [Name('w', Load(), lineno=49, col_offset=25)], [], None, None, lineno=49, col_offset=8), lineno=49, col_offset=8), Expr(Call(Attribute(Name('tk', Load(), lineno=51, col_offset=8), 'call', Load(), lineno=51, col_offset=8), [Str('rename', lineno=51, col_offset=16), Name('orig', Load(), lineno=51, col_offset=26), Name('w', Load(), lineno=51, col_offset=32)], [], None, None, lineno=51, col_offset=8), lineno=51, col_offset=8)], [], lineno=42, col_offset=4), FunctionDef('register', arguments([Name('self', Param(), lineno=53, col_offset=17), Name('operation', Param(), lineno=53, col_offset=23), Name('function', Param(), lineno=53, col_offset=34)], None, None, []), [Assign([Subscript(Attribute(Name('self', Load(), lineno=54, col_offset=8), '_operations', Load(), lineno=54, col_offset=8), Index(Name('operation', Load(), lineno=54, col_offset=25)), Store(), lineno=54, col_offset=8)], Name('function', Load(), lineno=54, col_offset=38), lineno=54, col_offset=8), Expr(Call(Name('setattr', Load(), lineno=55, col_offset=8), [Attribute(Name('self', Load(), lineno=55, col_offset=16), 'widget', Load(), lineno=55, col_offset=16), Name('operation', Load(), lineno=55, col_offset=29), Name('function', Load(), lineno=55, col_offset=40)], [], None, None, lineno=55, col_offset=8), lineno=55, col_offset=8), Return(Call(Name('OriginalCommand', Load(), lineno=56, col_offset=15), [Name('self', Load(), lineno=56, col_offset=31), Name('operation', Load(), lineno=56, col_offset=37)], [], None, None, lineno=56, col_offset=15), lineno=56, col_offset=8)], [], lineno=53, col_offset=4), FunctionDef('unregister', arguments([Name('self', Param(), lineno=58, col_offset=19), Name('operation', Param(), lineno=58, col_offset=25)], None, None, []), [If(Compare(Name('operation', Load(), lineno=59, col_offset=11), [In()], [Attribute(Name('self', Load(), lineno=59, col_offset=24), '_operations', Load(), lineno=59, col_offset=24)], lineno=59, col_offset=11), [Assign([Name('function', Store(), lineno=60, col_offset=12)], Subscript(Attribute(Name('self', Load(), lineno=60, col_offset=23), '_operations', Load(), lineno=60, col_offset=23), Index(Name('operation', Load(), lineno=60, col_offset=40)), Load(), lineno=60, col_offset=23), lineno=60, col_offset=12), Delete([Subscript(Attribute(Name('self', Load(), lineno=61, col_offset=16), '_operations', Load(), lineno=61, col_offset=16), Index(Name('operation', Load(), lineno=61, col_offset=33)), Del(), lineno=61, col_offset=16)], lineno=61, col_offset=12), If(Call(Name('hasattr', Load(), lineno=62, col_offset=15), [Attribute(Name('self', Load(), lineno=62, col_offset=23), 'widget', Load(), lineno=62, col_offset=23), Name('operation', Load(), lineno=62, col_offset=36)], [], None, None, lineno=62, col_offset=15), [Expr(Call(Name('delattr', Load(), lineno=63, col_offset=16), [Attribute(Name('self', Load(), lineno=63, col_offset=24), 'widget', Load(), lineno=63, col_offset=24), Name('operation', Load(), lineno=63, col_offset=37)], [], None, None, lineno=63, col_offset=16), lineno=63, col_offset=16)], [], lineno=62, col_offset=12), Return(Name('function', Load(), lineno=64, col_offset=19), lineno=64, col_offset=12)], [Return(Name('None', Load(), lineno=66, col_offset=19), lineno=66, col_offset=12)], lineno=59, col_offset=8)], [], lineno=58, col_offset=4), FunctionDef('dispatch', arguments([Name('self', Param(), lineno=68, col_offset=17), Name('operation', Param(), lineno=68, col_offset=23)], 'args', None, []), [Expr(Str('Callback from Tcl which runs when the widget is referenced.\n\n        If an operation has been registered in self._operations, apply the\n        associated function to the args passed into Tcl. Otherwise, pass the\n        operation through to Tk via the original Tcl function.\n\n        Note that if a registered function is called, the operation is not\n        passed through to Tk.  Apply the function returned by self.register()\n        to *args to accomplish that.  For an example, see ColorDelegator.py.\n\n        ', lineno=79, col_offset=-1), lineno=79, col_offset=-1), Assign([Name('m', Store(), lineno=80, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=80, col_offset=12), '_operations', Load(), lineno=80, col_offset=12), 'get', Load(), lineno=80, col_offset=12), [Name('operation', Load(), lineno=80, col_offset=33)], [], None, None, lineno=80, col_offset=12), lineno=80, col_offset=8), TryExcept([If(Name('m', Load(), lineno=82, col_offset=15), [Return(Call(Name('m', Load(), lineno=83, col_offset=23), [], [], Name('args', Load(), lineno=83, col_offset=26), None, lineno=83, col_offset=23), lineno=83, col_offset=16)], [Return(Call(Attribute(Attribute(Name('self', Load(), lineno=85, col_offset=23), 'tk', Load(), lineno=85, col_offset=23), 'call', Load(), lineno=85, col_offset=23), [BinOp(Tuple([Attribute(Name('self', Load(), lineno=85, col_offset=37), 'orig', Load(), lineno=85, col_offset=37), Name('operation', Load(), lineno=85, col_offset=48)], Load(), lineno=85, col_offset=37), Add(), Name('args', Load(), lineno=85, col_offset=61), lineno=85, col_offset=36)], [], None, None, lineno=85, col_offset=23), lineno=85, col_offset=16)], lineno=82, col_offset=12)], [ExceptHandler(Name('TclError', Load(), lineno=86, col_offset=15), None, [Return(Str('', lineno=87, col_offset=19), lineno=87, col_offset=12)], lineno=86, col_offset=8)], [], lineno=81, col_offset=8)], [], lineno=68, col_offset=4)], [], lineno=3, col_offset=0), ClassDef('OriginalCommand', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=92, col_offset=17), Name('redir', Param(), lineno=92, col_offset=23), Name('operation', Param(), lineno=92, col_offset=30)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=93, col_offset=8), 'redir', Store(), lineno=93, col_offset=8)], Name('redir', Load(), lineno=93, col_offset=21), lineno=93, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=94, col_offset=8), 'operation', Store(), lineno=94, col_offset=8)], Name('operation', Load(), lineno=94, col_offset=25), lineno=94, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=95, col_offset=8), 'tk', Store(), lineno=95, col_offset=8)], Attribute(Name('redir', Load(), lineno=95, col_offset=18), 'tk', Load(), lineno=95, col_offset=18), lineno=95, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=96, col_offset=8), 'orig', Store(), lineno=96, col_offset=8)], Attribute(Name('redir', Load(), lineno=96, col_offset=20), 'orig', Load(), lineno=96, col_offset=20), lineno=96, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=97, col_offset=8), 'tk_call', Store(), lineno=97, col_offset=8)], Attribute(Attribute(Name('self', Load(), lineno=97, col_offset=23), 'tk', Load(), lineno=97, col_offset=23), 'call', Load(), lineno=97, col_offset=23), lineno=97, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=98, col_offset=8), 'orig_and_operation', Store(), lineno=98, col_offset=8)], Tuple([Attribute(Name('self', Load(), lineno=98, col_offset=35), 'orig', Load(), lineno=98, col_offset=35), Attribute(Name('self', Load(), lineno=98, col_offset=46), 'operation', Load(), lineno=98, col_offset=46)], Load(), lineno=98, col_offset=35), lineno=98, col_offset=8)], [], lineno=92, col_offset=4), FunctionDef('__repr__', arguments([Name('self', Param(), lineno=100, col_offset=17)], None, None, []), [Return(BinOp(Str('OriginalCommand(%r, %r)', lineno=101, col_offset=15), Mod(), Tuple([Attribute(Name('self', Load(), lineno=101, col_offset=44), 'redir', Load(), lineno=101, col_offset=44), Attribute(Name('self', Load(), lineno=101, col_offset=56), 'operation', Load(), lineno=101, col_offset=56)], Load(), lineno=101, col_offset=44), lineno=101, col_offset=15), lineno=101, col_offset=8)], [], lineno=100, col_offset=4), FunctionDef('__call__', arguments([Name('self', Param(), lineno=103, col_offset=17)], 'args', None, []), [Return(Call(Attribute(Name('self', Load(), lineno=104, col_offset=15), 'tk_call', Load(), lineno=104, col_offset=15), [BinOp(Attribute(Name('self', Load(), lineno=104, col_offset=28), 'orig_and_operation', Load(), lineno=104, col_offset=28), Add(), Name('args', Load(), lineno=104, col_offset=54), lineno=104, col_offset=28)], [], None, None, lineno=104, col_offset=15), lineno=104, col_offset=8)], [], lineno=103, col_offset=4)], [], lineno=90, col_offset=0), FunctionDef('main', arguments([], None, None, []), [Assign([Name('root', Store(), lineno=108, col_offset=4)], Call(Name('Tk', Load(), lineno=108, col_offset=11), [], [], None, None, lineno=108, col_offset=11), lineno=108, col_offset=4), Expr(Call(Attribute(Name('root', Load(), lineno=109, col_offset=4), 'wm_protocol', Load(), lineno=109, col_offset=4), [Str('WM_DELETE_WINDOW', lineno=109, col_offset=21), Attribute(Name('root', Load(), lineno=109, col_offset=41), 'quit', Load(), lineno=109, col_offset=41)], [], None, None, lineno=109, col_offset=4), lineno=109, col_offset=4), Assign([Name('text', Store(), lineno=110, col_offset=4)], Call(Name('Text', Load(), lineno=110, col_offset=11), [], [], None, None, lineno=110, col_offset=11), lineno=110, col_offset=4), Expr(Call(Attribute(Name('text', Load(), lineno=111, col_offset=4), 'pack', Load(), lineno=111, col_offset=4), [], [], None, None, lineno=111, col_offset=4), lineno=111, col_offset=4), Expr(Call(Attribute(Name('text', Load(), lineno=112, col_offset=4), 'focus_set', Load(), lineno=112, col_offset=4), [], [], None, None, lineno=112, col_offset=4), lineno=112, col_offset=4), Assign([Name('redir', Store(), lineno=113, col_offset=4)], Call(Name('WidgetRedirector', Load(), lineno=113, col_offset=12), [Name('text', Load(), lineno=113, col_offset=29)], [], None, None, lineno=113, col_offset=12), lineno=113, col_offset=4), Global(['previous_tcl_fcn'], lineno=114, col_offset=4), FunctionDef('my_insert', arguments([], 'args', None, []), [Print(None, [Str('insert', lineno=116, col_offset=14), Name('args', Load(), lineno=116, col_offset=24)], True, lineno=116, col_offset=8), Expr(Call(Name('previous_tcl_fcn', Load(), lineno=117, col_offset=8), [], [], Name('args', Load(), lineno=117, col_offset=26), None, lineno=117, col_offset=8), lineno=117, col_offset=8)], [], lineno=115, col_offset=4), Assign([Name('previous_tcl_fcn', Store(), lineno=118, col_offset=4)], Call(Attribute(Name('redir', Load(), lineno=118, col_offset=23), 'register', Load(), lineno=118, col_offset=23), [Str('insert', lineno=118, col_offset=38), Name('my_insert', Load(), lineno=118, col_offset=48)], [], None, None, lineno=118, col_offset=23), lineno=118, col_offset=4), Expr(Call(Attribute(Name('root', Load(), lineno=119, col_offset=4), 'mainloop', Load(), lineno=119, col_offset=4), [], [], None, None, lineno=119, col_offset=4), lineno=119, col_offset=4), Expr(Call(Attribute(Name('redir', Load(), lineno=120, col_offset=4), 'unregister', Load(), lineno=120, col_offset=4), [Str('insert', lineno=120, col_offset=21)], [], None, None, lineno=120, col_offset=4), lineno=120, col_offset=4), Expr(Call(Attribute(Name('redir', Load(), lineno=121, col_offset=4), 'close', Load(), lineno=121, col_offset=4), [], [], None, None, lineno=121, col_offset=4), lineno=121, col_offset=4), Expr(Call(Attribute(Name('root', Load(), lineno=122, col_offset=4), 'mainloop', Load(), lineno=122, col_offset=4), [], [], None, None, lineno=122, col_offset=4), lineno=122, col_offset=4), Expr(Call(Attribute(Name('root', Load(), lineno=123, col_offset=4), 'destroy', Load(), lineno=123, col_offset=4), [], [], None, None, lineno=123, col_offset=4), lineno=123, col_offset=4)], [], lineno=107, col_offset=0), If(Compare(Name('__name__', Load(), lineno=125, col_offset=3), [Eq()], [Str('__main__', lineno=125, col_offset=15)], lineno=125, col_offset=3), [Expr(Call(Name('main', Load(), lineno=126, col_offset=4), [], [], None, None, lineno=126, col_offset=4), lineno=126, col_offset=4)], [], lineno=125, col_offset=0)])
