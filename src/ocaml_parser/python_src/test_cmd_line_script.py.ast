Module([Import([alias('unittest', None)], lineno=3, col_offset=0), Import([alias('os', None)], lineno=4, col_offset=0), Import([alias('os.path', None)], lineno=5, col_offset=0), Import([alias('test.test_support', None)], lineno=6, col_offset=0), ImportFrom('test.script_helper', [alias('run_python', None), alias('temp_dir', None), alias('make_script', None), alias('compile_script', None), alias('make_pkg', None), alias('make_zip_script', None), alias('make_zip_pkg', None)], 0, lineno=7, col_offset=0), Assign([Name('verbose', Store(), lineno=11, col_offset=0)], Attribute(Attribute(Name('test', Load(), lineno=11, col_offset=10), 'test_support', Load(), lineno=11, col_offset=10), 'verbose', Load(), lineno=11, col_offset=10), lineno=11, col_offset=0), Assign([Name('test_source', Store(), lineno=14, col_offset=0)], Str("# Script may be run with optimisation enabled, so don't rely on assert\n# statements being executed\ndef assertEqual(lhs, rhs):\n    if lhs != rhs:\n        raise AssertionError('%r != %r' % (lhs, rhs))\ndef assertIdentical(lhs, rhs):\n    if lhs is not rhs:\n        raise AssertionError('%r is not %r' % (lhs, rhs))\n# Check basic code execution\nresult = ['Top level assignment']\ndef f():\n    result.append('Lower level reference')\nf()\nassertEqual(result, ['Top level assignment', 'Lower level reference'])\n# Check population of magic variables\nassertEqual(__name__, '__main__')\nprint '__file__==%r' % __file__\nprint '__package__==%r' % __package__\n# Check the sys module\nimport sys\nassertIdentical(globals(), sys.modules[__name__].__dict__)\nprint 'sys.argv[0]==%r' % sys.argv[0]\n", lineno=37, col_offset=-1), lineno=14, col_offset=0), FunctionDef('_make_test_script', arguments([Name('script_dir', Param(), lineno=39, col_offset=22), Name('script_basename', Param(), lineno=39, col_offset=34), Name('source', Param(), lineno=39, col_offset=51)], None, None, [Name('test_source', Load(), lineno=39, col_offset=58)]), [Return(Call(Name('make_script', Load(), lineno=40, col_offset=11), [Name('script_dir', Load(), lineno=40, col_offset=23), Name('script_basename', Load(), lineno=40, col_offset=35), Name('source', Load(), lineno=40, col_offset=52)], [], None, None, lineno=40, col_offset=11), lineno=40, col_offset=4)], [], lineno=39, col_offset=0), FunctionDef('_make_test_zip_pkg', arguments([Name('zip_dir', Param(), lineno=42, col_offset=23), Name('zip_basename', Param(), lineno=42, col_offset=32), Name('pkg_name', Param(), lineno=42, col_offset=46), Name('script_basename', Param(), lineno=42, col_offset=56), Name('source', Param(), lineno=43, col_offset=23), Name('depth', Param(), lineno=43, col_offset=43)], None, None, [Name('test_source', Load(), lineno=43, col_offset=30), Num(1, lineno=43, col_offset=49)]), [Return(Call(Name('make_zip_pkg', Load(), lineno=44, col_offset=11), [Name('zip_dir', Load(), lineno=44, col_offset=24), Name('zip_basename', Load(), lineno=44, col_offset=33), Name('pkg_name', Load(), lineno=44, col_offset=47), Name('script_basename', Load(), lineno=44, col_offset=57), Name('source', Load(), lineno=45, col_offset=24), Name('depth', Load(), lineno=45, col_offset=32)], [], None, None, lineno=44, col_offset=11), lineno=44, col_offset=4)], [], lineno=42, col_offset=0), Assign([Name('launch_source', Store(), lineno=51, col_offset=0)], Str('import sys, os.path, runpy\nsys.path.insert(0, %s)\nrunpy._run_module_as_main(%r)\n', lineno=55, col_offset=-1), lineno=51, col_offset=0), FunctionDef('_make_launch_script', arguments([Name('script_dir', Param(), lineno=57, col_offset=24), Name('script_basename', Param(), lineno=57, col_offset=36), Name('module_name', Param(), lineno=57, col_offset=53), Name('path', Param(), lineno=57, col_offset=66)], None, None, [Name('None', Load(), lineno=57, col_offset=71)]), [If(Compare(Name('path', Load(), lineno=58, col_offset=7), [Is()], [Name('None', Load(), lineno=58, col_offset=15)], lineno=58, col_offset=7), [Assign([Name('path', Store(), lineno=59, col_offset=8)], Str('os.path.dirname(__file__)', lineno=59, col_offset=15), lineno=59, col_offset=8)], [Assign([Name('path', Store(), lineno=61, col_offset=8)], Call(Name('repr', Load(), lineno=61, col_offset=15), [Name('path', Load(), lineno=61, col_offset=20)], [], None, None, lineno=61, col_offset=15), lineno=61, col_offset=8)], lineno=58, col_offset=4), Assign([Name('source', Store(), lineno=62, col_offset=4)], BinOp(Name('launch_source', Load(), lineno=62, col_offset=13), Mod(), Tuple([Name('path', Load(), lineno=62, col_offset=30), Name('module_name', Load(), lineno=62, col_offset=36)], Load(), lineno=62, col_offset=30), lineno=62, col_offset=13), lineno=62, col_offset=4), Return(Call(Name('make_script', Load(), lineno=63, col_offset=11), [Name('script_dir', Load(), lineno=63, col_offset=23), Name('script_basename', Load(), lineno=63, col_offset=35), Name('source', Load(), lineno=63, col_offset=52)], [], None, None, lineno=63, col_offset=11), lineno=63, col_offset=4)], [], lineno=57, col_offset=0), ClassDef('CmdLineTest', [Attribute(Name('unittest', Load(), lineno=65, col_offset=18), 'TestCase', Load(), lineno=65, col_offset=18)], [FunctionDef('_check_script', arguments([Name('self', Param(), lineno=66, col_offset=22), Name('script_name', Param(), lineno=66, col_offset=28), Name('expected_file', Param(), lineno=66, col_offset=41), Name('expected_argv0', Param(), lineno=67, col_offset=28), Name('expected_package', Param(), lineno=67, col_offset=44)], 'cmd_line_switches', None, []), [Assign([Name('run_args', Store(), lineno=69, col_offset=8)], BinOp(Name('cmd_line_switches', Load(), lineno=69, col_offset=19), Add(), Tuple([Name('script_name', Load(), lineno=69, col_offset=40)], Load(), lineno=69, col_offset=40), lineno=69, col_offset=19), lineno=69, col_offset=8), Assign([Tuple([Name('exit_code', Store(), lineno=70, col_offset=8), Name('data', Store(), lineno=70, col_offset=19)], Store(), lineno=70, col_offset=8)], Call(Name('run_python', Load(), lineno=70, col_offset=26), [], [], Name('run_args', Load(), lineno=70, col_offset=38), None, lineno=70, col_offset=26), lineno=70, col_offset=8), If(Name('verbose', Load(), lineno=71, col_offset=11), [Print(None, [BinOp(Str('Output from test script %r:', lineno=72, col_offset=18), Mod(), Name('script_name', Load(), lineno=72, col_offset=50), lineno=72, col_offset=18)], True, lineno=72, col_offset=12), Print(None, [Name('data', Load(), lineno=73, col_offset=18)], True, lineno=73, col_offset=12)], [], lineno=71, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=74, col_offset=8), 'assertEqual', Load(), lineno=74, col_offset=8), [Name('exit_code', Load(), lineno=74, col_offset=25), Num(0, lineno=74, col_offset=36)], [], None, None, lineno=74, col_offset=8), lineno=74, col_offset=8), Assign([Name('printed_file', Store(), lineno=75, col_offset=8)], BinOp(Str('__file__==%r', lineno=75, col_offset=23), Mod(), Name('expected_file', Load(), lineno=75, col_offset=40), lineno=75, col_offset=23), lineno=75, col_offset=8), Assign([Name('printed_argv0', Store(), lineno=76, col_offset=8)], BinOp(Str('sys.argv[0]==%r', lineno=76, col_offset=24), Mod(), Name('expected_argv0', Load(), lineno=76, col_offset=44), lineno=76, col_offset=24), lineno=76, col_offset=8), Assign([Name('printed_package', Store(), lineno=77, col_offset=8)], BinOp(Str('__package__==%r', lineno=77, col_offset=26), Mod(), Name('expected_package', Load(), lineno=77, col_offset=46), lineno=77, col_offset=26), lineno=77, col_offset=8), If(Name('verbose', Load(), lineno=78, col_offset=11), [Print(None, [Str('Expected output:', lineno=79, col_offset=18)], True, lineno=79, col_offset=12), Print(None, [Name('printed_file', Load(), lineno=80, col_offset=18)], True, lineno=80, col_offset=12), Print(None, [Name('printed_package', Load(), lineno=81, col_offset=18)], True, lineno=81, col_offset=12), Print(None, [Name('printed_argv0', Load(), lineno=82, col_offset=18)], True, lineno=82, col_offset=12)], [], lineno=78, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=83, col_offset=8), 'assertIn', Load(), lineno=83, col_offset=8), [Name('printed_file', Load(), lineno=83, col_offset=22), Name('data', Load(), lineno=83, col_offset=36)], [], None, None, lineno=83, col_offset=8), lineno=83, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=84, col_offset=8), 'assertIn', Load(), lineno=84, col_offset=8), [Name('printed_package', Load(), lineno=84, col_offset=22), Name('data', Load(), lineno=84, col_offset=39)], [], None, None, lineno=84, col_offset=8), lineno=84, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=85, col_offset=8), 'assertIn', Load(), lineno=85, col_offset=8), [Name('printed_argv0', Load(), lineno=85, col_offset=22), Name('data', Load(), lineno=85, col_offset=37)], [], None, None, lineno=85, col_offset=8), lineno=85, col_offset=8)], [], lineno=66, col_offset=4), FunctionDef('_check_import_error', arguments([Name('self', Param(), lineno=87, col_offset=28), Name('script_name', Param(), lineno=87, col_offset=34), Name('expected_msg', Param(), lineno=87, col_offset=47)], 'cmd_line_switches', None, []), [Assign([Name('run_args', Store(), lineno=89, col_offset=8)], BinOp(Name('cmd_line_switches', Load(), lineno=89, col_offset=19), Add(), Tuple([Name('script_name', Load(), lineno=89, col_offset=40)], Load(), lineno=89, col_offset=40), lineno=89, col_offset=19), lineno=89, col_offset=8), Assign([Tuple([Name('exit_code', Store(), lineno=90, col_offset=8), Name('data', Store(), lineno=90, col_offset=19)], Store(), lineno=90, col_offset=8)], Call(Name('run_python', Load(), lineno=90, col_offset=26), [], [], Name('run_args', Load(), lineno=90, col_offset=38), None, lineno=90, col_offset=26), lineno=90, col_offset=8), If(Name('verbose', Load(), lineno=91, col_offset=11), [Print(None, [BinOp(Str('Output from test script %r:', lineno=92, col_offset=18), Mod(), Name('script_name', Load(), lineno=92, col_offset=50), lineno=92, col_offset=18)], True, lineno=92, col_offset=12), Print(None, [Name('data', Load(), lineno=93, col_offset=18)], True, lineno=93, col_offset=12), Print(None, [BinOp(Str('Expected output: %r', lineno=94, col_offset=18), Mod(), Name('expected_msg', Load(), lineno=94, col_offset=42), lineno=94, col_offset=18)], True, lineno=94, col_offset=12)], [], lineno=91, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=95, col_offset=8), 'assertIn', Load(), lineno=95, col_offset=8), [Name('expected_msg', Load(), lineno=95, col_offset=22), Name('data', Load(), lineno=95, col_offset=36)], [], None, None, lineno=95, col_offset=8), lineno=95, col_offset=8)], [], lineno=87, col_offset=4), FunctionDef('test_basic_script', arguments([Name('self', Param(), lineno=97, col_offset=26)], None, None, []), [With(Call(Name('temp_dir', Load(), lineno=98, col_offset=13), [], [], None, None, lineno=98, col_offset=13), Name('script_dir', Store(), lineno=98, col_offset=27), [Assign([Name('script_name', Store(), lineno=99, col_offset=12)], Call(Name('_make_test_script', Load(), lineno=99, col_offset=26), [Name('script_dir', Load(), lineno=99, col_offset=44), Str('script', lineno=99, col_offset=56)], [], None, None, lineno=99, col_offset=26), lineno=99, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=100, col_offset=12), '_check_script', Load(), lineno=100, col_offset=12), [Name('script_name', Load(), lineno=100, col_offset=31), Name('script_name', Load(), lineno=100, col_offset=44), Name('script_name', Load(), lineno=100, col_offset=57), Name('None', Load(), lineno=100, col_offset=70)], [], None, None, lineno=100, col_offset=12), lineno=100, col_offset=12)], lineno=98, col_offset=13)], [], lineno=97, col_offset=4), FunctionDef('test_script_compiled', arguments([Name('self', Param(), lineno=102, col_offset=29)], None, None, []), [With(Call(Name('temp_dir', Load(), lineno=103, col_offset=13), [], [], None, None, lineno=103, col_offset=13), Name('script_dir', Store(), lineno=103, col_offset=27), [Assign([Name('script_name', Store(), lineno=104, col_offset=12)], Call(Name('_make_test_script', Load(), lineno=104, col_offset=26), [Name('script_dir', Load(), lineno=104, col_offset=44), Str('script', lineno=104, col_offset=56)], [], None, None, lineno=104, col_offset=26), lineno=104, col_offset=12), Assign([Name('compiled_name', Store(), lineno=105, col_offset=12)], Call(Name('compile_script', Load(), lineno=105, col_offset=28), [Name('script_name', Load(), lineno=105, col_offset=43)], [], None, None, lineno=105, col_offset=28), lineno=105, col_offset=12), Expr(Call(Attribute(Name('os', Load(), lineno=106, col_offset=12), 'remove', Load(), lineno=106, col_offset=12), [Name('script_name', Load(), lineno=106, col_offset=22)], [], None, None, lineno=106, col_offset=12), lineno=106, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=107, col_offset=12), '_check_script', Load(), lineno=107, col_offset=12), [Name('compiled_name', Load(), lineno=107, col_offset=31), Name('compiled_name', Load(), lineno=107, col_offset=46), Name('compiled_name', Load(), lineno=107, col_offset=61), Name('None', Load(), lineno=107, col_offset=76)], [], None, None, lineno=107, col_offset=12), lineno=107, col_offset=12)], lineno=103, col_offset=13)], [], lineno=102, col_offset=4), FunctionDef('test_directory', arguments([Name('self', Param(), lineno=109, col_offset=23)], None, None, []), [With(Call(Name('temp_dir', Load(), lineno=110, col_offset=13), [], [], None, None, lineno=110, col_offset=13), Name('script_dir', Store(), lineno=110, col_offset=27), [Assign([Name('script_name', Store(), lineno=111, col_offset=12)], Call(Name('_make_test_script', Load(), lineno=111, col_offset=26), [Name('script_dir', Load(), lineno=111, col_offset=44), Str('__main__', lineno=111, col_offset=56)], [], None, None, lineno=111, col_offset=26), lineno=111, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=112, col_offset=12), '_check_script', Load(), lineno=112, col_offset=12), [Name('script_dir', Load(), lineno=112, col_offset=31), Name('script_name', Load(), lineno=112, col_offset=43), Name('script_dir', Load(), lineno=112, col_offset=56), Str('', lineno=112, col_offset=68)], [], None, None, lineno=112, col_offset=12), lineno=112, col_offset=12)], lineno=110, col_offset=13)], [], lineno=109, col_offset=4), FunctionDef('test_directory_compiled', arguments([Name('self', Param(), lineno=114, col_offset=32)], None, None, []), [With(Call(Name('temp_dir', Load(), lineno=115, col_offset=13), [], [], None, None, lineno=115, col_offset=13), Name('script_dir', Store(), lineno=115, col_offset=27), [Assign([Name('script_name', Store(), lineno=116, col_offset=12)], Call(Name('_make_test_script', Load(), lineno=116, col_offset=26), [Name('script_dir', Load(), lineno=116, col_offset=44), Str('__main__', lineno=116, col_offset=56)], [], None, None, lineno=116, col_offset=26), lineno=116, col_offset=12), Assign([Name('compiled_name', Store(), lineno=117, col_offset=12)], Call(Name('compile_script', Load(), lineno=117, col_offset=28), [Name('script_name', Load(), lineno=117, col_offset=43)], [], None, None, lineno=117, col_offset=28), lineno=117, col_offset=12), Expr(Call(Attribute(Name('os', Load(), lineno=118, col_offset=12), 'remove', Load(), lineno=118, col_offset=12), [Name('script_name', Load(), lineno=118, col_offset=22)], [], None, None, lineno=118, col_offset=12), lineno=118, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=119, col_offset=12), '_check_script', Load(), lineno=119, col_offset=12), [Name('script_dir', Load(), lineno=119, col_offset=31), Name('compiled_name', Load(), lineno=119, col_offset=43), Name('script_dir', Load(), lineno=119, col_offset=58), Str('', lineno=119, col_offset=70)], [], None, None, lineno=119, col_offset=12), lineno=119, col_offset=12)], lineno=115, col_offset=13)], [], lineno=114, col_offset=4), FunctionDef('test_directory_error', arguments([Name('self', Param(), lineno=121, col_offset=29)], None, None, []), [With(Call(Name('temp_dir', Load(), lineno=122, col_offset=13), [], [], None, None, lineno=122, col_offset=13), Name('script_dir', Store(), lineno=122, col_offset=27), [Assign([Name('msg', Store(), lineno=123, col_offset=12)], BinOp(Str("can't find '__main__' module in %r", lineno=123, col_offset=18), Mod(), Name('script_dir', Load(), lineno=123, col_offset=57), lineno=123, col_offset=18), lineno=123, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=124, col_offset=12), '_check_import_error', Load(), lineno=124, col_offset=12), [Name('script_dir', Load(), lineno=124, col_offset=37), Name('msg', Load(), lineno=124, col_offset=49)], [], None, None, lineno=124, col_offset=12), lineno=124, col_offset=12)], lineno=122, col_offset=13)], [], lineno=121, col_offset=4), FunctionDef('test_zipfile', arguments([Name('self', Param(), lineno=126, col_offset=21)], None, None, []), [With(Call(Name('temp_dir', Load(), lineno=127, col_offset=13), [], [], None, None, lineno=127, col_offset=13), Name('script_dir', Store(), lineno=127, col_offset=27), [Assign([Name('script_name', Store(), lineno=128, col_offset=12)], Call(Name('_make_test_script', Load(), lineno=128, col_offset=26), [Name('script_dir', Load(), lineno=128, col_offset=44), Str('__main__', lineno=128, col_offset=56)], [], None, None, lineno=128, col_offset=26), lineno=128, col_offset=12), Assign([Tuple([Name('zip_name', Store(), lineno=129, col_offset=12), Name('run_name', Store(), lineno=129, col_offset=22)], Store(), lineno=129, col_offset=12)], Call(Name('make_zip_script', Load(), lineno=129, col_offset=33), [Name('script_dir', Load(), lineno=129, col_offset=49), Str('test_zip', lineno=129, col_offset=61), Name('script_name', Load(), lineno=129, col_offset=73)], [], None, None, lineno=129, col_offset=33), lineno=129, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=130, col_offset=12), '_check_script', Load(), lineno=130, col_offset=12), [Name('zip_name', Load(), lineno=130, col_offset=31), Name('run_name', Load(), lineno=130, col_offset=41), Name('zip_name', Load(), lineno=130, col_offset=51), Str('', lineno=130, col_offset=61)], [], None, None, lineno=130, col_offset=12), lineno=130, col_offset=12)], lineno=127, col_offset=13)], [], lineno=126, col_offset=4), FunctionDef('test_zipfile_compiled', arguments([Name('self', Param(), lineno=132, col_offset=30)], None, None, []), [With(Call(Name('temp_dir', Load(), lineno=133, col_offset=13), [], [], None, None, lineno=133, col_offset=13), Name('script_dir', Store(), lineno=133, col_offset=27), [Assign([Name('script_name', Store(), lineno=134, col_offset=12)], Call(Name('_make_test_script', Load(), lineno=134, col_offset=26), [Name('script_dir', Load(), lineno=134, col_offset=44), Str('__main__', lineno=134, col_offset=56)], [], None, None, lineno=134, col_offset=26), lineno=134, col_offset=12), Assign([Name('compiled_name', Store(), lineno=135, col_offset=12)], Call(Name('compile_script', Load(), lineno=135, col_offset=28), [Name('script_name', Load(), lineno=135, col_offset=43)], [], None, None, lineno=135, col_offset=28), lineno=135, col_offset=12), Assign([Tuple([Name('zip_name', Store(), lineno=136, col_offset=12), Name('run_name', Store(), lineno=136, col_offset=22)], Store(), lineno=136, col_offset=12)], Call(Name('make_zip_script', Load(), lineno=136, col_offset=33), [Name('script_dir', Load(), lineno=136, col_offset=49), Str('test_zip', lineno=136, col_offset=61), Name('compiled_name', Load(), lineno=136, col_offset=73)], [], None, None, lineno=136, col_offset=33), lineno=136, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=137, col_offset=12), '_check_script', Load(), lineno=137, col_offset=12), [Name('zip_name', Load(), lineno=137, col_offset=31), Name('run_name', Load(), lineno=137, col_offset=41), Name('zip_name', Load(), lineno=137, col_offset=51), Str('', lineno=137, col_offset=61)], [], None, None, lineno=137, col_offset=12), lineno=137, col_offset=12)], lineno=133, col_offset=13)], [], lineno=132, col_offset=4), FunctionDef('test_zipfile_error', arguments([Name('self', Param(), lineno=139, col_offset=27)], None, None, []), [With(Call(Name('temp_dir', Load(), lineno=140, col_offset=13), [], [], None, None, lineno=140, col_offset=13), Name('script_dir', Store(), lineno=140, col_offset=27), [Assign([Name('script_name', Store(), lineno=141, col_offset=12)], Call(Name('_make_test_script', Load(), lineno=141, col_offset=26), [Name('script_dir', Load(), lineno=141, col_offset=44), Str('not_main', lineno=141, col_offset=56)], [], None, None, lineno=141, col_offset=26), lineno=141, col_offset=12), Assign([Tuple([Name('zip_name', Store(), lineno=142, col_offset=12), Name('run_name', Store(), lineno=142, col_offset=22)], Store(), lineno=142, col_offset=12)], Call(Name('make_zip_script', Load(), lineno=142, col_offset=33), [Name('script_dir', Load(), lineno=142, col_offset=49), Str('test_zip', lineno=142, col_offset=61), Name('script_name', Load(), lineno=142, col_offset=73)], [], None, None, lineno=142, col_offset=33), lineno=142, col_offset=12), Assign([Name('msg', Store(), lineno=143, col_offset=12)], BinOp(Str("can't find '__main__' module in %r", lineno=143, col_offset=18), Mod(), Name('zip_name', Load(), lineno=143, col_offset=57), lineno=143, col_offset=18), lineno=143, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=144, col_offset=12), '_check_import_error', Load(), lineno=144, col_offset=12), [Name('zip_name', Load(), lineno=144, col_offset=37), Name('msg', Load(), lineno=144, col_offset=47)], [], None, None, lineno=144, col_offset=12), lineno=144, col_offset=12)], lineno=140, col_offset=13)], [], lineno=139, col_offset=4), FunctionDef('test_module_in_package', arguments([Name('self', Param(), lineno=146, col_offset=31)], None, None, []), [With(Call(Name('temp_dir', Load(), lineno=147, col_offset=13), [], [], None, None, lineno=147, col_offset=13), Name('script_dir', Store(), lineno=147, col_offset=27), [Assign([Name('pkg_dir', Store(), lineno=148, col_offset=12)], Call(Attribute(Attribute(Name('os', Load(), lineno=148, col_offset=22), 'path', Load(), lineno=148, col_offset=22), 'join', Load(), lineno=148, col_offset=22), [Name('script_dir', Load(), lineno=148, col_offset=35), Str('test_pkg', lineno=148, col_offset=47)], [], None, None, lineno=148, col_offset=22), lineno=148, col_offset=12), Expr(Call(Name('make_pkg', Load(), lineno=149, col_offset=12), [Name('pkg_dir', Load(), lineno=149, col_offset=21)], [], None, None, lineno=149, col_offset=12), lineno=149, col_offset=12), Assign([Name('script_name', Store(), lineno=150, col_offset=12)], Call(Name('_make_test_script', Load(), lineno=150, col_offset=26), [Name('pkg_dir', Load(), lineno=150, col_offset=44), Str('script', lineno=150, col_offset=53)], [], None, None, lineno=150, col_offset=26), lineno=150, col_offset=12), Assign([Name('launch_name', Store(), lineno=151, col_offset=12)], Call(Name('_make_launch_script', Load(), lineno=151, col_offset=26), [Name('script_dir', Load(), lineno=151, col_offset=46), Str('launch', lineno=151, col_offset=58), Str('test_pkg.script', lineno=151, col_offset=68)], [], None, None, lineno=151, col_offset=26), lineno=151, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=152, col_offset=12), '_check_script', Load(), lineno=152, col_offset=12), [Name('launch_name', Load(), lineno=152, col_offset=31), Name('script_name', Load(), lineno=152, col_offset=44), Name('script_name', Load(), lineno=152, col_offset=57), Str('test_pkg', lineno=152, col_offset=70)], [], None, None, lineno=152, col_offset=12), lineno=152, col_offset=12)], lineno=147, col_offset=13)], [], lineno=146, col_offset=4), FunctionDef('test_module_in_package_in_zipfile', arguments([Name('self', Param(), lineno=154, col_offset=42)], None, None, []), [With(Call(Name('temp_dir', Load(), lineno=155, col_offset=13), [], [], None, None, lineno=155, col_offset=13), Name('script_dir', Store(), lineno=155, col_offset=27), [Assign([Tuple([Name('zip_name', Store(), lineno=156, col_offset=12), Name('run_name', Store(), lineno=156, col_offset=22)], Store(), lineno=156, col_offset=12)], Call(Name('_make_test_zip_pkg', Load(), lineno=156, col_offset=33), [Name('script_dir', Load(), lineno=156, col_offset=52), Str('test_zip', lineno=156, col_offset=64), Str('test_pkg', lineno=156, col_offset=76), Str('script', lineno=156, col_offset=88)], [], None, None, lineno=156, col_offset=33), lineno=156, col_offset=12), Assign([Name('launch_name', Store(), lineno=157, col_offset=12)], Call(Name('_make_launch_script', Load(), lineno=157, col_offset=26), [Name('script_dir', Load(), lineno=157, col_offset=46), Str('launch', lineno=157, col_offset=58), Str('test_pkg.script', lineno=157, col_offset=68), Name('zip_name', Load(), lineno=157, col_offset=87)], [], None, None, lineno=157, col_offset=26), lineno=157, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=158, col_offset=12), '_check_script', Load(), lineno=158, col_offset=12), [Name('launch_name', Load(), lineno=158, col_offset=31), Name('run_name', Load(), lineno=158, col_offset=44), Name('run_name', Load(), lineno=158, col_offset=54), Str('test_pkg', lineno=158, col_offset=64)], [], None, None, lineno=158, col_offset=12), lineno=158, col_offset=12)], lineno=155, col_offset=13)], [], lineno=154, col_offset=4), FunctionDef('test_module_in_subpackage_in_zipfile', arguments([Name('self', Param(), lineno=160, col_offset=45)], None, None, []), [With(Call(Name('temp_dir', Load(), lineno=161, col_offset=13), [], [], None, None, lineno=161, col_offset=13), Name('script_dir', Store(), lineno=161, col_offset=27), [Assign([Tuple([Name('zip_name', Store(), lineno=162, col_offset=12), Name('run_name', Store(), lineno=162, col_offset=22)], Store(), lineno=162, col_offset=12)], Call(Name('_make_test_zip_pkg', Load(), lineno=162, col_offset=33), [Name('script_dir', Load(), lineno=162, col_offset=52), Str('test_zip', lineno=162, col_offset=64), Str('test_pkg', lineno=162, col_offset=76), Str('script', lineno=162, col_offset=88)], [keyword('depth', Num(2, lineno=162, col_offset=104))], None, None, lineno=162, col_offset=33), lineno=162, col_offset=12), Assign([Name('launch_name', Store(), lineno=163, col_offset=12)], Call(Name('_make_launch_script', Load(), lineno=163, col_offset=26), [Name('script_dir', Load(), lineno=163, col_offset=46), Str('launch', lineno=163, col_offset=58), Str('test_pkg.test_pkg.script', lineno=163, col_offset=68), Name('zip_name', Load(), lineno=163, col_offset=96)], [], None, None, lineno=163, col_offset=26), lineno=163, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=164, col_offset=12), '_check_script', Load(), lineno=164, col_offset=12), [Name('launch_name', Load(), lineno=164, col_offset=31), Name('run_name', Load(), lineno=164, col_offset=44), Name('run_name', Load(), lineno=164, col_offset=54), Str('test_pkg.test_pkg', lineno=164, col_offset=64)], [], None, None, lineno=164, col_offset=12), lineno=164, col_offset=12)], lineno=161, col_offset=13)], [], lineno=160, col_offset=4), FunctionDef('test_package', arguments([Name('self', Param(), lineno=166, col_offset=21)], None, None, []), [With(Call(Name('temp_dir', Load(), lineno=167, col_offset=13), [], [], None, None, lineno=167, col_offset=13), Name('script_dir', Store(), lineno=167, col_offset=27), [Assign([Name('pkg_dir', Store(), lineno=168, col_offset=12)], Call(Attribute(Attribute(Name('os', Load(), lineno=168, col_offset=22), 'path', Load(), lineno=168, col_offset=22), 'join', Load(), lineno=168, col_offset=22), [Name('script_dir', Load(), lineno=168, col_offset=35), Str('test_pkg', lineno=168, col_offset=47)], [], None, None, lineno=168, col_offset=22), lineno=168, col_offset=12), Expr(Call(Name('make_pkg', Load(), lineno=169, col_offset=12), [Name('pkg_dir', Load(), lineno=169, col_offset=21)], [], None, None, lineno=169, col_offset=12), lineno=169, col_offset=12), Assign([Name('script_name', Store(), lineno=170, col_offset=12)], Call(Name('_make_test_script', Load(), lineno=170, col_offset=26), [Name('pkg_dir', Load(), lineno=170, col_offset=44), Str('__main__', lineno=170, col_offset=53)], [], None, None, lineno=170, col_offset=26), lineno=170, col_offset=12), Assign([Name('launch_name', Store(), lineno=171, col_offset=12)], Call(Name('_make_launch_script', Load(), lineno=171, col_offset=26), [Name('script_dir', Load(), lineno=171, col_offset=46), Str('launch', lineno=171, col_offset=58), Str('test_pkg', lineno=171, col_offset=68)], [], None, None, lineno=171, col_offset=26), lineno=171, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=172, col_offset=12), '_check_script', Load(), lineno=172, col_offset=12), [Name('launch_name', Load(), lineno=172, col_offset=31), Name('script_name', Load(), lineno=172, col_offset=44), Name('script_name', Load(), lineno=173, col_offset=31), Str('test_pkg', lineno=173, col_offset=44)], [], None, None, lineno=172, col_offset=12), lineno=172, col_offset=12)], lineno=167, col_offset=13)], [], lineno=166, col_offset=4), FunctionDef('test_package_compiled', arguments([Name('self', Param(), lineno=175, col_offset=30)], None, None, []), [With(Call(Name('temp_dir', Load(), lineno=176, col_offset=13), [], [], None, None, lineno=176, col_offset=13), Name('script_dir', Store(), lineno=176, col_offset=27), [Assign([Name('pkg_dir', Store(), lineno=177, col_offset=12)], Call(Attribute(Attribute(Name('os', Load(), lineno=177, col_offset=22), 'path', Load(), lineno=177, col_offset=22), 'join', Load(), lineno=177, col_offset=22), [Name('script_dir', Load(), lineno=177, col_offset=35), Str('test_pkg', lineno=177, col_offset=47)], [], None, None, lineno=177, col_offset=22), lineno=177, col_offset=12), Expr(Call(Name('make_pkg', Load(), lineno=178, col_offset=12), [Name('pkg_dir', Load(), lineno=178, col_offset=21)], [], None, None, lineno=178, col_offset=12), lineno=178, col_offset=12), Assign([Name('script_name', Store(), lineno=179, col_offset=12)], Call(Name('_make_test_script', Load(), lineno=179, col_offset=26), [Name('pkg_dir', Load(), lineno=179, col_offset=44), Str('__main__', lineno=179, col_offset=53)], [], None, None, lineno=179, col_offset=26), lineno=179, col_offset=12), Assign([Name('compiled_name', Store(), lineno=180, col_offset=12)], Call(Name('compile_script', Load(), lineno=180, col_offset=28), [Name('script_name', Load(), lineno=180, col_offset=43)], [], None, None, lineno=180, col_offset=28), lineno=180, col_offset=12), Expr(Call(Attribute(Name('os', Load(), lineno=181, col_offset=12), 'remove', Load(), lineno=181, col_offset=12), [Name('script_name', Load(), lineno=181, col_offset=22)], [], None, None, lineno=181, col_offset=12), lineno=181, col_offset=12), Assign([Name('launch_name', Store(), lineno=182, col_offset=12)], Call(Name('_make_launch_script', Load(), lineno=182, col_offset=26), [Name('script_dir', Load(), lineno=182, col_offset=46), Str('launch', lineno=182, col_offset=58), Str('test_pkg', lineno=182, col_offset=68)], [], None, None, lineno=182, col_offset=26), lineno=182, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=183, col_offset=12), '_check_script', Load(), lineno=183, col_offset=12), [Name('launch_name', Load(), lineno=183, col_offset=31), Name('compiled_name', Load(), lineno=183, col_offset=44), Name('compiled_name', Load(), lineno=184, col_offset=31), Str('test_pkg', lineno=184, col_offset=46)], [], None, None, lineno=183, col_offset=12), lineno=183, col_offset=12)], lineno=176, col_offset=13)], [], lineno=175, col_offset=4), FunctionDef('test_package_error', arguments([Name('self', Param(), lineno=186, col_offset=27)], None, None, []), [With(Call(Name('temp_dir', Load(), lineno=187, col_offset=13), [], [], None, None, lineno=187, col_offset=13), Name('script_dir', Store(), lineno=187, col_offset=27), [Assign([Name('pkg_dir', Store(), lineno=188, col_offset=12)], Call(Attribute(Attribute(Name('os', Load(), lineno=188, col_offset=22), 'path', Load(), lineno=188, col_offset=22), 'join', Load(), lineno=188, col_offset=22), [Name('script_dir', Load(), lineno=188, col_offset=35), Str('test_pkg', lineno=188, col_offset=47)], [], None, None, lineno=188, col_offset=22), lineno=188, col_offset=12), Expr(Call(Name('make_pkg', Load(), lineno=189, col_offset=12), [Name('pkg_dir', Load(), lineno=189, col_offset=21)], [], None, None, lineno=189, col_offset=12), lineno=189, col_offset=12), Assign([Name('msg', Store(), lineno=190, col_offset=12)], Str("'test_pkg' is a package and cannot be directly executed", lineno=190, col_offset=19), lineno=190, col_offset=12), Assign([Name('launch_name', Store(), lineno=192, col_offset=12)], Call(Name('_make_launch_script', Load(), lineno=192, col_offset=26), [Name('script_dir', Load(), lineno=192, col_offset=46), Str('launch', lineno=192, col_offset=58), Str('test_pkg', lineno=192, col_offset=68)], [], None, None, lineno=192, col_offset=26), lineno=192, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=193, col_offset=12), '_check_import_error', Load(), lineno=193, col_offset=12), [Name('launch_name', Load(), lineno=193, col_offset=37), Name('msg', Load(), lineno=193, col_offset=50)], [], None, None, lineno=193, col_offset=12), lineno=193, col_offset=12)], lineno=187, col_offset=13)], [], lineno=186, col_offset=4), FunctionDef('test_package_recursion', arguments([Name('self', Param(), lineno=195, col_offset=31)], None, None, []), [With(Call(Name('temp_dir', Load(), lineno=196, col_offset=13), [], [], None, None, lineno=196, col_offset=13), Name('script_dir', Store(), lineno=196, col_offset=27), [Assign([Name('pkg_dir', Store(), lineno=197, col_offset=12)], Call(Attribute(Attribute(Name('os', Load(), lineno=197, col_offset=22), 'path', Load(), lineno=197, col_offset=22), 'join', Load(), lineno=197, col_offset=22), [Name('script_dir', Load(), lineno=197, col_offset=35), Str('test_pkg', lineno=197, col_offset=47)], [], None, None, lineno=197, col_offset=22), lineno=197, col_offset=12), Expr(Call(Name('make_pkg', Load(), lineno=198, col_offset=12), [Name('pkg_dir', Load(), lineno=198, col_offset=21)], [], None, None, lineno=198, col_offset=12), lineno=198, col_offset=12), Assign([Name('main_dir', Store(), lineno=199, col_offset=12)], Call(Attribute(Attribute(Name('os', Load(), lineno=199, col_offset=23), 'path', Load(), lineno=199, col_offset=23), 'join', Load(), lineno=199, col_offset=23), [Name('pkg_dir', Load(), lineno=199, col_offset=36), Str('__main__', lineno=199, col_offset=45)], [], None, None, lineno=199, col_offset=23), lineno=199, col_offset=12), Expr(Call(Name('make_pkg', Load(), lineno=200, col_offset=12), [Name('main_dir', Load(), lineno=200, col_offset=21)], [], None, None, lineno=200, col_offset=12), lineno=200, col_offset=12), Assign([Name('msg', Store(), lineno=201, col_offset=12)], Str("Cannot use package as __main__ module; 'test_pkg' is a package and cannot be directly executed", lineno=201, col_offset=19), lineno=201, col_offset=12), Assign([Name('launch_name', Store(), lineno=204, col_offset=12)], Call(Name('_make_launch_script', Load(), lineno=204, col_offset=26), [Name('script_dir', Load(), lineno=204, col_offset=46), Str('launch', lineno=204, col_offset=58), Str('test_pkg', lineno=204, col_offset=68)], [], None, None, lineno=204, col_offset=26), lineno=204, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=205, col_offset=12), '_check_import_error', Load(), lineno=205, col_offset=12), [Name('launch_name', Load(), lineno=205, col_offset=37), Name('msg', Load(), lineno=205, col_offset=50)], [], None, None, lineno=205, col_offset=12), lineno=205, col_offset=12)], lineno=196, col_offset=13)], [], lineno=195, col_offset=4)], [], lineno=65, col_offset=0), FunctionDef('test_main', arguments([], None, None, []), [Expr(Call(Attribute(Attribute(Name('test', Load(), lineno=209, col_offset=4), 'test_support', Load(), lineno=209, col_offset=4), 'run_unittest', Load(), lineno=209, col_offset=4), [Name('CmdLineTest', Load(), lineno=209, col_offset=35)], [], None, None, lineno=209, col_offset=4), lineno=209, col_offset=4), Expr(Call(Attribute(Attribute(Name('test', Load(), lineno=210, col_offset=4), 'test_support', Load(), lineno=210, col_offset=4), 'reap_children', Load(), lineno=210, col_offset=4), [], [], None, None, lineno=210, col_offset=4), lineno=210, col_offset=4)], [], lineno=208, col_offset=0), If(Compare(Name('__name__', Load(), lineno=212, col_offset=3), [Eq()], [Str('__main__', lineno=212, col_offset=15)], lineno=212, col_offset=3), [Expr(Call(Name('test_main', Load(), lineno=213, col_offset=4), [], [], None, None, lineno=213, col_offset=4), lineno=213, col_offset=4)], [], lineno=212, col_offset=0)])
