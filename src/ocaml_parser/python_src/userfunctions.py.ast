Module([Import([alias('unittest', None)], lineno=25, col_offset=0), Import([alias('sqlite3', 'sqlite')], lineno=26, col_offset=0), FunctionDef('func_returntext', arguments([], None, None, []), [Return(Str('foo', lineno=29, col_offset=11), lineno=29, col_offset=4)], [], lineno=28, col_offset=0), FunctionDef('func_returnunicode', arguments([], None, None, []), [Return(Str(u'bar', lineno=31, col_offset=11), lineno=31, col_offset=4)], [], lineno=30, col_offset=0), FunctionDef('func_returnint', arguments([], None, None, []), [Return(Num(42, lineno=33, col_offset=11), lineno=33, col_offset=4)], [], lineno=32, col_offset=0), FunctionDef('func_returnfloat', arguments([], None, None, []), [Return(Num(3.14, lineno=35, col_offset=11), lineno=35, col_offset=4)], [], lineno=34, col_offset=0), FunctionDef('func_returnnull', arguments([], None, None, []), [Return(Name('None', Load(), lineno=37, col_offset=11), lineno=37, col_offset=4)], [], lineno=36, col_offset=0), FunctionDef('func_returnblob', arguments([], None, None, []), [Return(Call(Name('buffer', Load(), lineno=39, col_offset=11), [Str('blob', lineno=39, col_offset=18)], [], None, None, lineno=39, col_offset=11), lineno=39, col_offset=4)], [], lineno=38, col_offset=0), FunctionDef('func_raiseexception', arguments([], None, None, []), [Expr(BinOp(Num(5, lineno=41, col_offset=4), FloorDiv(), Num(0, lineno=41, col_offset=9), lineno=41, col_offset=4), lineno=41, col_offset=4)], [], lineno=40, col_offset=0), FunctionDef('func_isstring', arguments([Name('v', Param(), lineno=43, col_offset=18)], None, None, []), [Return(Compare(Call(Name('type', Load(), lineno=44, col_offset=11), [Name('v', Load(), lineno=44, col_offset=16)], [], None, None, lineno=44, col_offset=11), [Is()], [Name('unicode', Load(), lineno=44, col_offset=22)], lineno=44, col_offset=11), lineno=44, col_offset=4)], [], lineno=43, col_offset=0), FunctionDef('func_isint', arguments([Name('v', Param(), lineno=45, col_offset=15)], None, None, []), [Return(Compare(Call(Name('type', Load(), lineno=46, col_offset=11), [Name('v', Load(), lineno=46, col_offset=16)], [], None, None, lineno=46, col_offset=11), [Is()], [Name('int', Load(), lineno=46, col_offset=22)], lineno=46, col_offset=11), lineno=46, col_offset=4)], [], lineno=45, col_offset=0), FunctionDef('func_isfloat', arguments([Name('v', Param(), lineno=47, col_offset=17)], None, None, []), [Return(Compare(Call(Name('type', Load(), lineno=48, col_offset=11), [Name('v', Load(), lineno=48, col_offset=16)], [], None, None, lineno=48, col_offset=11), [Is()], [Name('float', Load(), lineno=48, col_offset=22)], lineno=48, col_offset=11), lineno=48, col_offset=4)], [], lineno=47, col_offset=0), FunctionDef('func_isnone', arguments([Name('v', Param(), lineno=49, col_offset=16)], None, None, []), [Return(Compare(Call(Name('type', Load(), lineno=50, col_offset=11), [Name('v', Load(), lineno=50, col_offset=16)], [], None, None, lineno=50, col_offset=11), [Is()], [Call(Name('type', Load(), lineno=50, col_offset=22), [Name('None', Load(), lineno=50, col_offset=27)], [], None, None, lineno=50, col_offset=22)], lineno=50, col_offset=11), lineno=50, col_offset=4)], [], lineno=49, col_offset=0), FunctionDef('func_isblob', arguments([Name('v', Param(), lineno=51, col_offset=16)], None, None, []), [Return(Compare(Call(Name('type', Load(), lineno=52, col_offset=11), [Name('v', Load(), lineno=52, col_offset=16)], [], None, None, lineno=52, col_offset=11), [Is()], [Name('buffer', Load(), lineno=52, col_offset=22)], lineno=52, col_offset=11), lineno=52, col_offset=4)], [], lineno=51, col_offset=0), ClassDef('AggrNoStep', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=55, col_offset=17)], None, None, []), [Pass( lineno=56, col_offset=8)], [], lineno=55, col_offset=4), FunctionDef('finalize', arguments([Name('self', Param(), lineno=58, col_offset=17)], None, None, []), [Return(Num(1, lineno=59, col_offset=15), lineno=59, col_offset=8)], [], lineno=58, col_offset=4)], [], lineno=54, col_offset=0), ClassDef('AggrNoFinalize', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=62, col_offset=17)], None, None, []), [Pass( lineno=63, col_offset=8)], [], lineno=62, col_offset=4), FunctionDef('step', arguments([Name('self', Param(), lineno=65, col_offset=13), Name('x', Param(), lineno=65, col_offset=19)], None, None, []), [Pass( lineno=66, col_offset=8)], [], lineno=65, col_offset=4)], [], lineno=61, col_offset=0), ClassDef('AggrExceptionInInit', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=69, col_offset=17)], None, None, []), [Expr(BinOp(Num(5, lineno=70, col_offset=8), FloorDiv(), Num(0, lineno=70, col_offset=13), lineno=70, col_offset=8), lineno=70, col_offset=8)], [], lineno=69, col_offset=4), FunctionDef('step', arguments([Name('self', Param(), lineno=72, col_offset=13), Name('x', Param(), lineno=72, col_offset=19)], None, None, []), [Pass( lineno=73, col_offset=8)], [], lineno=72, col_offset=4), FunctionDef('finalize', arguments([Name('self', Param(), lineno=75, col_offset=17)], None, None, []), [Pass( lineno=76, col_offset=8)], [], lineno=75, col_offset=4)], [], lineno=68, col_offset=0), ClassDef('AggrExceptionInStep', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=79, col_offset=17)], None, None, []), [Pass( lineno=80, col_offset=8)], [], lineno=79, col_offset=4), FunctionDef('step', arguments([Name('self', Param(), lineno=82, col_offset=13), Name('x', Param(), lineno=82, col_offset=19)], None, None, []), [Expr(BinOp(Num(5, lineno=83, col_offset=8), FloorDiv(), Num(0, lineno=83, col_offset=13), lineno=83, col_offset=8), lineno=83, col_offset=8)], [], lineno=82, col_offset=4), FunctionDef('finalize', arguments([Name('self', Param(), lineno=85, col_offset=17)], None, None, []), [Return(Num(42, lineno=86, col_offset=15), lineno=86, col_offset=8)], [], lineno=85, col_offset=4)], [], lineno=78, col_offset=0), ClassDef('AggrExceptionInFinalize', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=89, col_offset=17)], None, None, []), [Pass( lineno=90, col_offset=8)], [], lineno=89, col_offset=4), FunctionDef('step', arguments([Name('self', Param(), lineno=92, col_offset=13), Name('x', Param(), lineno=92, col_offset=19)], None, None, []), [Pass( lineno=93, col_offset=8)], [], lineno=92, col_offset=4), FunctionDef('finalize', arguments([Name('self', Param(), lineno=95, col_offset=17)], None, None, []), [Expr(BinOp(Num(5, lineno=96, col_offset=8), FloorDiv(), Num(0, lineno=96, col_offset=13), lineno=96, col_offset=8), lineno=96, col_offset=8)], [], lineno=95, col_offset=4)], [], lineno=88, col_offset=0), ClassDef('AggrCheckType', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=99, col_offset=17)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=100, col_offset=8), 'val', Store(), lineno=100, col_offset=8)], Name('None', Load(), lineno=100, col_offset=19), lineno=100, col_offset=8)], [], lineno=99, col_offset=4), FunctionDef('step', arguments([Name('self', Param(), lineno=102, col_offset=13), Name('whichType', Param(), lineno=102, col_offset=19), Name('val', Param(), lineno=102, col_offset=30)], None, None, []), [Assign([Name('theType', Store(), lineno=103, col_offset=8)], Dict([Str('str', lineno=103, col_offset=19), Str('int', lineno=103, col_offset=35), Str('float', lineno=103, col_offset=47), Str('None', lineno=103, col_offset=63), Str('blob', lineno=103, col_offset=83)], [Name('unicode', Load(), lineno=103, col_offset=26), Name('int', Load(), lineno=103, col_offset=42), Name('float', Load(), lineno=103, col_offset=56), Call(Name('type', Load(), lineno=103, col_offset=71), [Name('None', Load(), lineno=103, col_offset=76)], [], None, None, lineno=103, col_offset=71), Name('buffer', Load(), lineno=103, col_offset=91)], lineno=103, col_offset=18), lineno=103, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=104, col_offset=8), 'val', Store(), lineno=104, col_offset=8)], Call(Name('int', Load(), lineno=104, col_offset=19), [Compare(Subscript(Name('theType', Load(), lineno=104, col_offset=23), Index(Name('whichType', Load(), lineno=104, col_offset=31)), Load(), lineno=104, col_offset=23), [Is()], [Call(Name('type', Load(), lineno=104, col_offset=45), [Name('val', Load(), lineno=104, col_offset=50)], [], None, None, lineno=104, col_offset=45)], lineno=104, col_offset=23)], [], None, None, lineno=104, col_offset=19), lineno=104, col_offset=8)], [], lineno=102, col_offset=4), FunctionDef('finalize', arguments([Name('self', Param(), lineno=106, col_offset=17)], None, None, []), [Return(Attribute(Name('self', Load(), lineno=107, col_offset=15), 'val', Load(), lineno=107, col_offset=15), lineno=107, col_offset=8)], [], lineno=106, col_offset=4)], [], lineno=98, col_offset=0), ClassDef('AggrSum', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=110, col_offset=17)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=111, col_offset=8), 'val', Store(), lineno=111, col_offset=8)], Num(0.0, lineno=111, col_offset=19), lineno=111, col_offset=8)], [], lineno=110, col_offset=4), FunctionDef('step', arguments([Name('self', Param(), lineno=113, col_offset=13), Name('val', Param(), lineno=113, col_offset=19)], None, None, []), [AugAssign(Attribute(Name('self', Load(), lineno=114, col_offset=8), 'val', Store(), lineno=114, col_offset=8), Add(), Name('val', Load(), lineno=114, col_offset=20), lineno=114, col_offset=8)], [], lineno=113, col_offset=4), FunctionDef('finalize', arguments([Name('self', Param(), lineno=116, col_offset=17)], None, None, []), [Return(Attribute(Name('self', Load(), lineno=117, col_offset=15), 'val', Load(), lineno=117, col_offset=15), lineno=117, col_offset=8)], [], lineno=116, col_offset=4)], [], lineno=109, col_offset=0), ClassDef('FunctionTests', [Attribute(Name('unittest', Load(), lineno=119, col_offset=20), 'TestCase', Load(), lineno=119, col_offset=20)], [FunctionDef('setUp', arguments([Name('self', Param(), lineno=120, col_offset=14)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=121, col_offset=8), 'con', Store(), lineno=121, col_offset=8)], Call(Attribute(Name('sqlite', Load(), lineno=121, col_offset=19), 'connect', Load(), lineno=121, col_offset=19), [Str(':memory:', lineno=121, col_offset=34)], [], None, None, lineno=121, col_offset=19), lineno=121, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=123, col_offset=8), 'con', Load(), lineno=123, col_offset=8), 'create_function', Load(), lineno=123, col_offset=8), [Str('returntext', lineno=123, col_offset=33), Num(0, lineno=123, col_offset=47), Name('func_returntext', Load(), lineno=123, col_offset=50)], [], None, None, lineno=123, col_offset=8), lineno=123, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=124, col_offset=8), 'con', Load(), lineno=124, col_offset=8), 'create_function', Load(), lineno=124, col_offset=8), [Str('returnunicode', lineno=124, col_offset=33), Num(0, lineno=124, col_offset=50), Name('func_returnunicode', Load(), lineno=124, col_offset=53)], [], None, None, lineno=124, col_offset=8), lineno=124, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=125, col_offset=8), 'con', Load(), lineno=125, col_offset=8), 'create_function', Load(), lineno=125, col_offset=8), [Str('returnint', lineno=125, col_offset=33), Num(0, lineno=125, col_offset=46), Name('func_returnint', Load(), lineno=125, col_offset=49)], [], None, None, lineno=125, col_offset=8), lineno=125, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=126, col_offset=8), 'con', Load(), lineno=126, col_offset=8), 'create_function', Load(), lineno=126, col_offset=8), [Str('returnfloat', lineno=126, col_offset=33), Num(0, lineno=126, col_offset=48), Name('func_returnfloat', Load(), lineno=126, col_offset=51)], [], None, None, lineno=126, col_offset=8), lineno=126, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=127, col_offset=8), 'con', Load(), lineno=127, col_offset=8), 'create_function', Load(), lineno=127, col_offset=8), [Str('returnnull', lineno=127, col_offset=33), Num(0, lineno=127, col_offset=47), Name('func_returnnull', Load(), lineno=127, col_offset=50)], [], None, None, lineno=127, col_offset=8), lineno=127, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=128, col_offset=8), 'con', Load(), lineno=128, col_offset=8), 'create_function', Load(), lineno=128, col_offset=8), [Str('returnblob', lineno=128, col_offset=33), Num(0, lineno=128, col_offset=47), Name('func_returnblob', Load(), lineno=128, col_offset=50)], [], None, None, lineno=128, col_offset=8), lineno=128, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=129, col_offset=8), 'con', Load(), lineno=129, col_offset=8), 'create_function', Load(), lineno=129, col_offset=8), [Str('raiseexception', lineno=129, col_offset=33), Num(0, lineno=129, col_offset=51), Name('func_raiseexception', Load(), lineno=129, col_offset=54)], [], None, None, lineno=129, col_offset=8), lineno=129, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=131, col_offset=8), 'con', Load(), lineno=131, col_offset=8), 'create_function', Load(), lineno=131, col_offset=8), [Str('isstring', lineno=131, col_offset=33), Num(1, lineno=131, col_offset=45), Name('func_isstring', Load(), lineno=131, col_offset=48)], [], None, None, lineno=131, col_offset=8), lineno=131, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=132, col_offset=8), 'con', Load(), lineno=132, col_offset=8), 'create_function', Load(), lineno=132, col_offset=8), [Str('isint', lineno=132, col_offset=33), Num(1, lineno=132, col_offset=42), Name('func_isint', Load(), lineno=132, col_offset=45)], [], None, None, lineno=132, col_offset=8), lineno=132, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=133, col_offset=8), 'con', Load(), lineno=133, col_offset=8), 'create_function', Load(), lineno=133, col_offset=8), [Str('isfloat', lineno=133, col_offset=33), Num(1, lineno=133, col_offset=44), Name('func_isfloat', Load(), lineno=133, col_offset=47)], [], None, None, lineno=133, col_offset=8), lineno=133, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=134, col_offset=8), 'con', Load(), lineno=134, col_offset=8), 'create_function', Load(), lineno=134, col_offset=8), [Str('isnone', lineno=134, col_offset=33), Num(1, lineno=134, col_offset=43), Name('func_isnone', Load(), lineno=134, col_offset=46)], [], None, None, lineno=134, col_offset=8), lineno=134, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=135, col_offset=8), 'con', Load(), lineno=135, col_offset=8), 'create_function', Load(), lineno=135, col_offset=8), [Str('isblob', lineno=135, col_offset=33), Num(1, lineno=135, col_offset=43), Name('func_isblob', Load(), lineno=135, col_offset=46)], [], None, None, lineno=135, col_offset=8), lineno=135, col_offset=8)], [], lineno=120, col_offset=4), FunctionDef('tearDown', arguments([Name('self', Param(), lineno=137, col_offset=17)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=138, col_offset=8), 'con', Load(), lineno=138, col_offset=8), 'close', Load(), lineno=138, col_offset=8), [], [], None, None, lineno=138, col_offset=8), lineno=138, col_offset=8)], [], lineno=137, col_offset=4), FunctionDef('CheckFuncErrorOnCreate', arguments([Name('self', Param(), lineno=140, col_offset=31)], None, None, []), [TryExcept([Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=142, col_offset=12), 'con', Load(), lineno=142, col_offset=12), 'create_function', Load(), lineno=142, col_offset=12), [Str('bla', lineno=142, col_offset=37), Num(-100, lineno=142, col_offset=45), Lambda(arguments([Name('x', Param(), lineno=142, col_offset=57)], None, None, []), BinOp(Num(2, lineno=142, col_offset=60), Mult(), Name('x', Load(), lineno=142, col_offset=62), lineno=142, col_offset=60), lineno=142, col_offset=50)], [], None, None, lineno=142, col_offset=12), lineno=142, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=143, col_offset=12), 'fail', Load(), lineno=143, col_offset=12), [Str('should have raised an OperationalError', lineno=143, col_offset=22)], [], None, None, lineno=143, col_offset=12), lineno=143, col_offset=12)], [ExceptHandler(Attribute(Name('sqlite', Load(), lineno=144, col_offset=15), 'OperationalError', Load(), lineno=144, col_offset=15), None, [Pass( lineno=145, col_offset=12)], lineno=144, col_offset=8)], [], lineno=141, col_offset=8)], [], lineno=140, col_offset=4), FunctionDef('CheckFuncRefCount', arguments([Name('self', Param(), lineno=147, col_offset=26)], None, None, []), [FunctionDef('getfunc', arguments([], None, None, []), [FunctionDef('f', arguments([], None, None, []), [Return(Num(1, lineno=150, col_offset=23), lineno=150, col_offset=16)], [], lineno=149, col_offset=12), Return(Name('f', Load(), lineno=151, col_offset=19), lineno=151, col_offset=12)], [], lineno=148, col_offset=8), Assign([Name('f', Store(), lineno=152, col_offset=8)], Call(Name('getfunc', Load(), lineno=152, col_offset=12), [], [], None, None, lineno=152, col_offset=12), lineno=152, col_offset=8), Assign([Subscript(Call(Name('globals', Load(), lineno=153, col_offset=8), [], [], None, None, lineno=153, col_offset=8), Index(Str('foo', lineno=153, col_offset=18)), Store(), lineno=153, col_offset=8)], Name('f', Load(), lineno=153, col_offset=27), lineno=153, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=155, col_offset=8), 'con', Load(), lineno=155, col_offset=8), 'create_function', Load(), lineno=155, col_offset=8), [Str('reftest', lineno=155, col_offset=33), Num(0, lineno=155, col_offset=44), Name('f', Load(), lineno=155, col_offset=47)], [], None, None, lineno=155, col_offset=8), lineno=155, col_offset=8), Assign([Name('cur', Store(), lineno=156, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=156, col_offset=14), 'con', Load(), lineno=156, col_offset=14), 'cursor', Load(), lineno=156, col_offset=14), [], [], None, None, lineno=156, col_offset=14), lineno=156, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=157, col_offset=8), 'execute', Load(), lineno=157, col_offset=8), [Str('select reftest()', lineno=157, col_offset=20)], [], None, None, lineno=157, col_offset=8), lineno=157, col_offset=8)], [], lineno=147, col_offset=4), FunctionDef('CheckFuncReturnText', arguments([Name('self', Param(), lineno=159, col_offset=28)], None, None, []), [Assign([Name('cur', Store(), lineno=160, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=160, col_offset=14), 'con', Load(), lineno=160, col_offset=14), 'cursor', Load(), lineno=160, col_offset=14), [], [], None, None, lineno=160, col_offset=14), lineno=160, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=161, col_offset=8), 'execute', Load(), lineno=161, col_offset=8), [Str('select returntext()', lineno=161, col_offset=20)], [], None, None, lineno=161, col_offset=8), lineno=161, col_offset=8), Assign([Name('val', Store(), lineno=162, col_offset=8)], Subscript(Call(Attribute(Name('cur', Load(), lineno=162, col_offset=14), 'fetchone', Load(), lineno=162, col_offset=14), [], [], None, None, lineno=162, col_offset=14), Index(Num(0, lineno=162, col_offset=29)), Load(), lineno=162, col_offset=14), lineno=162, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=163, col_offset=8), 'assertEqual', Load(), lineno=163, col_offset=8), [Call(Name('type', Load(), lineno=163, col_offset=25), [Name('val', Load(), lineno=163, col_offset=30)], [], None, None, lineno=163, col_offset=25), Name('unicode', Load(), lineno=163, col_offset=36)], [], None, None, lineno=163, col_offset=8), lineno=163, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=164, col_offset=8), 'assertEqual', Load(), lineno=164, col_offset=8), [Name('val', Load(), lineno=164, col_offset=25), Str('foo', lineno=164, col_offset=30)], [], None, None, lineno=164, col_offset=8), lineno=164, col_offset=8)], [], lineno=159, col_offset=4), FunctionDef('CheckFuncReturnUnicode', arguments([Name('self', Param(), lineno=166, col_offset=31)], None, None, []), [Assign([Name('cur', Store(), lineno=167, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=167, col_offset=14), 'con', Load(), lineno=167, col_offset=14), 'cursor', Load(), lineno=167, col_offset=14), [], [], None, None, lineno=167, col_offset=14), lineno=167, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=168, col_offset=8), 'execute', Load(), lineno=168, col_offset=8), [Str('select returnunicode()', lineno=168, col_offset=20)], [], None, None, lineno=168, col_offset=8), lineno=168, col_offset=8), Assign([Name('val', Store(), lineno=169, col_offset=8)], Subscript(Call(Attribute(Name('cur', Load(), lineno=169, col_offset=14), 'fetchone', Load(), lineno=169, col_offset=14), [], [], None, None, lineno=169, col_offset=14), Index(Num(0, lineno=169, col_offset=29)), Load(), lineno=169, col_offset=14), lineno=169, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=170, col_offset=8), 'assertEqual', Load(), lineno=170, col_offset=8), [Call(Name('type', Load(), lineno=170, col_offset=25), [Name('val', Load(), lineno=170, col_offset=30)], [], None, None, lineno=170, col_offset=25), Name('unicode', Load(), lineno=170, col_offset=36)], [], None, None, lineno=170, col_offset=8), lineno=170, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=171, col_offset=8), 'assertEqual', Load(), lineno=171, col_offset=8), [Name('val', Load(), lineno=171, col_offset=25), Str(u'bar', lineno=171, col_offset=30)], [], None, None, lineno=171, col_offset=8), lineno=171, col_offset=8)], [], lineno=166, col_offset=4), FunctionDef('CheckFuncReturnInt', arguments([Name('self', Param(), lineno=173, col_offset=27)], None, None, []), [Assign([Name('cur', Store(), lineno=174, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=174, col_offset=14), 'con', Load(), lineno=174, col_offset=14), 'cursor', Load(), lineno=174, col_offset=14), [], [], None, None, lineno=174, col_offset=14), lineno=174, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=175, col_offset=8), 'execute', Load(), lineno=175, col_offset=8), [Str('select returnint()', lineno=175, col_offset=20)], [], None, None, lineno=175, col_offset=8), lineno=175, col_offset=8), Assign([Name('val', Store(), lineno=176, col_offset=8)], Subscript(Call(Attribute(Name('cur', Load(), lineno=176, col_offset=14), 'fetchone', Load(), lineno=176, col_offset=14), [], [], None, None, lineno=176, col_offset=14), Index(Num(0, lineno=176, col_offset=29)), Load(), lineno=176, col_offset=14), lineno=176, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=177, col_offset=8), 'assertEqual', Load(), lineno=177, col_offset=8), [Call(Name('type', Load(), lineno=177, col_offset=25), [Name('val', Load(), lineno=177, col_offset=30)], [], None, None, lineno=177, col_offset=25), Name('int', Load(), lineno=177, col_offset=36)], [], None, None, lineno=177, col_offset=8), lineno=177, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=178, col_offset=8), 'assertEqual', Load(), lineno=178, col_offset=8), [Name('val', Load(), lineno=178, col_offset=25), Num(42, lineno=178, col_offset=30)], [], None, None, lineno=178, col_offset=8), lineno=178, col_offset=8)], [], lineno=173, col_offset=4), FunctionDef('CheckFuncReturnFloat', arguments([Name('self', Param(), lineno=180, col_offset=29)], None, None, []), [Assign([Name('cur', Store(), lineno=181, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=181, col_offset=14), 'con', Load(), lineno=181, col_offset=14), 'cursor', Load(), lineno=181, col_offset=14), [], [], None, None, lineno=181, col_offset=14), lineno=181, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=182, col_offset=8), 'execute', Load(), lineno=182, col_offset=8), [Str('select returnfloat()', lineno=182, col_offset=20)], [], None, None, lineno=182, col_offset=8), lineno=182, col_offset=8), Assign([Name('val', Store(), lineno=183, col_offset=8)], Subscript(Call(Attribute(Name('cur', Load(), lineno=183, col_offset=14), 'fetchone', Load(), lineno=183, col_offset=14), [], [], None, None, lineno=183, col_offset=14), Index(Num(0, lineno=183, col_offset=29)), Load(), lineno=183, col_offset=14), lineno=183, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=184, col_offset=8), 'assertEqual', Load(), lineno=184, col_offset=8), [Call(Name('type', Load(), lineno=184, col_offset=25), [Name('val', Load(), lineno=184, col_offset=30)], [], None, None, lineno=184, col_offset=25), Name('float', Load(), lineno=184, col_offset=36)], [], None, None, lineno=184, col_offset=8), lineno=184, col_offset=8), If(BoolOp(Or(), [Compare(Name('val', Load(), lineno=185, col_offset=11), [Lt()], [Num(3.139, lineno=185, col_offset=17)], lineno=185, col_offset=11), Compare(Name('val', Load(), lineno=185, col_offset=26), [Gt()], [Num(3.141, lineno=185, col_offset=32)], lineno=185, col_offset=26)], lineno=185, col_offset=11), [Expr(Call(Attribute(Name('self', Load(), lineno=186, col_offset=12), 'fail', Load(), lineno=186, col_offset=12), [Str('wrong value', lineno=186, col_offset=22)], [], None, None, lineno=186, col_offset=12), lineno=186, col_offset=12)], [], lineno=185, col_offset=8)], [], lineno=180, col_offset=4), FunctionDef('CheckFuncReturnNull', arguments([Name('self', Param(), lineno=188, col_offset=28)], None, None, []), [Assign([Name('cur', Store(), lineno=189, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=189, col_offset=14), 'con', Load(), lineno=189, col_offset=14), 'cursor', Load(), lineno=189, col_offset=14), [], [], None, None, lineno=189, col_offset=14), lineno=189, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=190, col_offset=8), 'execute', Load(), lineno=190, col_offset=8), [Str('select returnnull()', lineno=190, col_offset=20)], [], None, None, lineno=190, col_offset=8), lineno=190, col_offset=8), Assign([Name('val', Store(), lineno=191, col_offset=8)], Subscript(Call(Attribute(Name('cur', Load(), lineno=191, col_offset=14), 'fetchone', Load(), lineno=191, col_offset=14), [], [], None, None, lineno=191, col_offset=14), Index(Num(0, lineno=191, col_offset=29)), Load(), lineno=191, col_offset=14), lineno=191, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=192, col_offset=8), 'assertEqual', Load(), lineno=192, col_offset=8), [Call(Name('type', Load(), lineno=192, col_offset=25), [Name('val', Load(), lineno=192, col_offset=30)], [], None, None, lineno=192, col_offset=25), Call(Name('type', Load(), lineno=192, col_offset=36), [Name('None', Load(), lineno=192, col_offset=41)], [], None, None, lineno=192, col_offset=36)], [], None, None, lineno=192, col_offset=8), lineno=192, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=193, col_offset=8), 'assertEqual', Load(), lineno=193, col_offset=8), [Name('val', Load(), lineno=193, col_offset=25), Name('None', Load(), lineno=193, col_offset=30)], [], None, None, lineno=193, col_offset=8), lineno=193, col_offset=8)], [], lineno=188, col_offset=4), FunctionDef('CheckFuncReturnBlob', arguments([Name('self', Param(), lineno=195, col_offset=28)], None, None, []), [Assign([Name('cur', Store(), lineno=196, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=196, col_offset=14), 'con', Load(), lineno=196, col_offset=14), 'cursor', Load(), lineno=196, col_offset=14), [], [], None, None, lineno=196, col_offset=14), lineno=196, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=197, col_offset=8), 'execute', Load(), lineno=197, col_offset=8), [Str('select returnblob()', lineno=197, col_offset=20)], [], None, None, lineno=197, col_offset=8), lineno=197, col_offset=8), Assign([Name('val', Store(), lineno=198, col_offset=8)], Subscript(Call(Attribute(Name('cur', Load(), lineno=198, col_offset=14), 'fetchone', Load(), lineno=198, col_offset=14), [], [], None, None, lineno=198, col_offset=14), Index(Num(0, lineno=198, col_offset=29)), Load(), lineno=198, col_offset=14), lineno=198, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=199, col_offset=8), 'assertEqual', Load(), lineno=199, col_offset=8), [Call(Name('type', Load(), lineno=199, col_offset=25), [Name('val', Load(), lineno=199, col_offset=30)], [], None, None, lineno=199, col_offset=25), Name('buffer', Load(), lineno=199, col_offset=36)], [], None, None, lineno=199, col_offset=8), lineno=199, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=200, col_offset=8), 'assertEqual', Load(), lineno=200, col_offset=8), [Name('val', Load(), lineno=200, col_offset=25), Call(Name('buffer', Load(), lineno=200, col_offset=30), [Str('blob', lineno=200, col_offset=37)], [], None, None, lineno=200, col_offset=30)], [], None, None, lineno=200, col_offset=8), lineno=200, col_offset=8)], [], lineno=195, col_offset=4), FunctionDef('CheckFuncException', arguments([Name('self', Param(), lineno=202, col_offset=27)], None, None, []), [Assign([Name('cur', Store(), lineno=203, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=203, col_offset=14), 'con', Load(), lineno=203, col_offset=14), 'cursor', Load(), lineno=203, col_offset=14), [], [], None, None, lineno=203, col_offset=14), lineno=203, col_offset=8), TryExcept([Expr(Call(Attribute(Name('cur', Load(), lineno=205, col_offset=12), 'execute', Load(), lineno=205, col_offset=12), [Str('select raiseexception()', lineno=205, col_offset=24)], [], None, None, lineno=205, col_offset=12), lineno=205, col_offset=12), Expr(Call(Attribute(Name('cur', Load(), lineno=206, col_offset=12), 'fetchone', Load(), lineno=206, col_offset=12), [], [], None, None, lineno=206, col_offset=12), lineno=206, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=207, col_offset=12), 'fail', Load(), lineno=207, col_offset=12), [Str('should have raised OperationalError', lineno=207, col_offset=22)], [], None, None, lineno=207, col_offset=12), lineno=207, col_offset=12)], [ExceptHandler(Attribute(Name('sqlite', Load(), lineno=208, col_offset=15), 'OperationalError', Load(), lineno=208, col_offset=15), Name('e', Store(), lineno=208, col_offset=40), [Expr(Call(Attribute(Name('self', Load(), lineno=209, col_offset=12), 'assertEqual', Load(), lineno=209, col_offset=12), [Subscript(Attribute(Name('e', Load(), lineno=209, col_offset=29), 'args', Load(), lineno=209, col_offset=29), Index(Num(0, lineno=209, col_offset=36)), Load(), lineno=209, col_offset=29), Str('user-defined function raised exception', lineno=209, col_offset=40)], [], None, None, lineno=209, col_offset=12), lineno=209, col_offset=12)], lineno=208, col_offset=8)], [], lineno=204, col_offset=8)], [], lineno=202, col_offset=4), FunctionDef('CheckParamString', arguments([Name('self', Param(), lineno=211, col_offset=25)], None, None, []), [Assign([Name('cur', Store(), lineno=212, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=212, col_offset=14), 'con', Load(), lineno=212, col_offset=14), 'cursor', Load(), lineno=212, col_offset=14), [], [], None, None, lineno=212, col_offset=14), lineno=212, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=213, col_offset=8), 'execute', Load(), lineno=213, col_offset=8), [Str('select isstring(?)', lineno=213, col_offset=20), Tuple([Str('foo', lineno=213, col_offset=43)], Load(), lineno=213, col_offset=43)], [], None, None, lineno=213, col_offset=8), lineno=213, col_offset=8), Assign([Name('val', Store(), lineno=214, col_offset=8)], Subscript(Call(Attribute(Name('cur', Load(), lineno=214, col_offset=14), 'fetchone', Load(), lineno=214, col_offset=14), [], [], None, None, lineno=214, col_offset=14), Index(Num(0, lineno=214, col_offset=29)), Load(), lineno=214, col_offset=14), lineno=214, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=215, col_offset=8), 'assertEqual', Load(), lineno=215, col_offset=8), [Name('val', Load(), lineno=215, col_offset=25), Num(1, lineno=215, col_offset=30)], [], None, None, lineno=215, col_offset=8), lineno=215, col_offset=8)], [], lineno=211, col_offset=4), FunctionDef('CheckParamInt', arguments([Name('self', Param(), lineno=217, col_offset=22)], None, None, []), [Assign([Name('cur', Store(), lineno=218, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=218, col_offset=14), 'con', Load(), lineno=218, col_offset=14), 'cursor', Load(), lineno=218, col_offset=14), [], [], None, None, lineno=218, col_offset=14), lineno=218, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=219, col_offset=8), 'execute', Load(), lineno=219, col_offset=8), [Str('select isint(?)', lineno=219, col_offset=20), Tuple([Num(42, lineno=219, col_offset=40)], Load(), lineno=219, col_offset=40)], [], None, None, lineno=219, col_offset=8), lineno=219, col_offset=8), Assign([Name('val', Store(), lineno=220, col_offset=8)], Subscript(Call(Attribute(Name('cur', Load(), lineno=220, col_offset=14), 'fetchone', Load(), lineno=220, col_offset=14), [], [], None, None, lineno=220, col_offset=14), Index(Num(0, lineno=220, col_offset=29)), Load(), lineno=220, col_offset=14), lineno=220, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=221, col_offset=8), 'assertEqual', Load(), lineno=221, col_offset=8), [Name('val', Load(), lineno=221, col_offset=25), Num(1, lineno=221, col_offset=30)], [], None, None, lineno=221, col_offset=8), lineno=221, col_offset=8)], [], lineno=217, col_offset=4), FunctionDef('CheckParamFloat', arguments([Name('self', Param(), lineno=223, col_offset=24)], None, None, []), [Assign([Name('cur', Store(), lineno=224, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=224, col_offset=14), 'con', Load(), lineno=224, col_offset=14), 'cursor', Load(), lineno=224, col_offset=14), [], [], None, None, lineno=224, col_offset=14), lineno=224, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=225, col_offset=8), 'execute', Load(), lineno=225, col_offset=8), [Str('select isfloat(?)', lineno=225, col_offset=20), Tuple([Num(3.14, lineno=225, col_offset=42)], Load(), lineno=225, col_offset=42)], [], None, None, lineno=225, col_offset=8), lineno=225, col_offset=8), Assign([Name('val', Store(), lineno=226, col_offset=8)], Subscript(Call(Attribute(Name('cur', Load(), lineno=226, col_offset=14), 'fetchone', Load(), lineno=226, col_offset=14), [], [], None, None, lineno=226, col_offset=14), Index(Num(0, lineno=226, col_offset=29)), Load(), lineno=226, col_offset=14), lineno=226, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=227, col_offset=8), 'assertEqual', Load(), lineno=227, col_offset=8), [Name('val', Load(), lineno=227, col_offset=25), Num(1, lineno=227, col_offset=30)], [], None, None, lineno=227, col_offset=8), lineno=227, col_offset=8)], [], lineno=223, col_offset=4), FunctionDef('CheckParamNone', arguments([Name('self', Param(), lineno=229, col_offset=23)], None, None, []), [Assign([Name('cur', Store(), lineno=230, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=230, col_offset=14), 'con', Load(), lineno=230, col_offset=14), 'cursor', Load(), lineno=230, col_offset=14), [], [], None, None, lineno=230, col_offset=14), lineno=230, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=231, col_offset=8), 'execute', Load(), lineno=231, col_offset=8), [Str('select isnone(?)', lineno=231, col_offset=20), Tuple([Name('None', Load(), lineno=231, col_offset=41)], Load(), lineno=231, col_offset=41)], [], None, None, lineno=231, col_offset=8), lineno=231, col_offset=8), Assign([Name('val', Store(), lineno=232, col_offset=8)], Subscript(Call(Attribute(Name('cur', Load(), lineno=232, col_offset=14), 'fetchone', Load(), lineno=232, col_offset=14), [], [], None, None, lineno=232, col_offset=14), Index(Num(0, lineno=232, col_offset=29)), Load(), lineno=232, col_offset=14), lineno=232, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=233, col_offset=8), 'assertEqual', Load(), lineno=233, col_offset=8), [Name('val', Load(), lineno=233, col_offset=25), Num(1, lineno=233, col_offset=30)], [], None, None, lineno=233, col_offset=8), lineno=233, col_offset=8)], [], lineno=229, col_offset=4), FunctionDef('CheckParamBlob', arguments([Name('self', Param(), lineno=235, col_offset=23)], None, None, []), [Assign([Name('cur', Store(), lineno=236, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=236, col_offset=14), 'con', Load(), lineno=236, col_offset=14), 'cursor', Load(), lineno=236, col_offset=14), [], [], None, None, lineno=236, col_offset=14), lineno=236, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=237, col_offset=8), 'execute', Load(), lineno=237, col_offset=8), [Str('select isblob(?)', lineno=237, col_offset=20), Tuple([Call(Name('buffer', Load(), lineno=237, col_offset=41), [Str('blob', lineno=237, col_offset=48)], [], None, None, lineno=237, col_offset=41)], Load(), lineno=237, col_offset=41)], [], None, None, lineno=237, col_offset=8), lineno=237, col_offset=8), Assign([Name('val', Store(), lineno=238, col_offset=8)], Subscript(Call(Attribute(Name('cur', Load(), lineno=238, col_offset=14), 'fetchone', Load(), lineno=238, col_offset=14), [], [], None, None, lineno=238, col_offset=14), Index(Num(0, lineno=238, col_offset=29)), Load(), lineno=238, col_offset=14), lineno=238, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=239, col_offset=8), 'assertEqual', Load(), lineno=239, col_offset=8), [Name('val', Load(), lineno=239, col_offset=25), Num(1, lineno=239, col_offset=30)], [], None, None, lineno=239, col_offset=8), lineno=239, col_offset=8)], [], lineno=235, col_offset=4)], [], lineno=119, col_offset=0), ClassDef('AggregateTests', [Attribute(Name('unittest', Load(), lineno=241, col_offset=21), 'TestCase', Load(), lineno=241, col_offset=21)], [FunctionDef('setUp', arguments([Name('self', Param(), lineno=242, col_offset=14)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=243, col_offset=8), 'con', Store(), lineno=243, col_offset=8)], Call(Attribute(Name('sqlite', Load(), lineno=243, col_offset=19), 'connect', Load(), lineno=243, col_offset=19), [Str(':memory:', lineno=243, col_offset=34)], [], None, None, lineno=243, col_offset=19), lineno=243, col_offset=8), Assign([Name('cur', Store(), lineno=244, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=244, col_offset=14), 'con', Load(), lineno=244, col_offset=14), 'cursor', Load(), lineno=244, col_offset=14), [], [], None, None, lineno=244, col_offset=14), lineno=244, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=245, col_offset=8), 'execute', Load(), lineno=245, col_offset=8), [Str('\n            create table test(\n                t text,\n                i integer,\n                f float,\n                n,\n                b blob\n                )\n            ', lineno=253, col_offset=-1)], [], None, None, lineno=245, col_offset=8), lineno=245, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=254, col_offset=8), 'execute', Load(), lineno=254, col_offset=8), [Str('insert into test(t, i, f, n, b) values (?, ?, ?, ?, ?)', lineno=254, col_offset=20), Tuple([Str('foo', lineno=255, col_offset=13), Num(5, lineno=255, col_offset=20), Num(3.14, lineno=255, col_offset=23), Name('None', Load(), lineno=255, col_offset=29), Call(Name('buffer', Load(), lineno=255, col_offset=35), [Str('blob', lineno=255, col_offset=42)], [], None, None, lineno=255, col_offset=35)], Load(), lineno=255, col_offset=13)], [], None, None, lineno=254, col_offset=8), lineno=254, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=257, col_offset=8), 'con', Load(), lineno=257, col_offset=8), 'create_aggregate', Load(), lineno=257, col_offset=8), [Str('nostep', lineno=257, col_offset=34), Num(1, lineno=257, col_offset=44), Name('AggrNoStep', Load(), lineno=257, col_offset=47)], [], None, None, lineno=257, col_offset=8), lineno=257, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=258, col_offset=8), 'con', Load(), lineno=258, col_offset=8), 'create_aggregate', Load(), lineno=258, col_offset=8), [Str('nofinalize', lineno=258, col_offset=34), Num(1, lineno=258, col_offset=48), Name('AggrNoFinalize', Load(), lineno=258, col_offset=51)], [], None, None, lineno=258, col_offset=8), lineno=258, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=259, col_offset=8), 'con', Load(), lineno=259, col_offset=8), 'create_aggregate', Load(), lineno=259, col_offset=8), [Str('excInit', lineno=259, col_offset=34), Num(1, lineno=259, col_offset=45), Name('AggrExceptionInInit', Load(), lineno=259, col_offset=48)], [], None, None, lineno=259, col_offset=8), lineno=259, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=260, col_offset=8), 'con', Load(), lineno=260, col_offset=8), 'create_aggregate', Load(), lineno=260, col_offset=8), [Str('excStep', lineno=260, col_offset=34), Num(1, lineno=260, col_offset=45), Name('AggrExceptionInStep', Load(), lineno=260, col_offset=48)], [], None, None, lineno=260, col_offset=8), lineno=260, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=261, col_offset=8), 'con', Load(), lineno=261, col_offset=8), 'create_aggregate', Load(), lineno=261, col_offset=8), [Str('excFinalize', lineno=261, col_offset=34), Num(1, lineno=261, col_offset=49), Name('AggrExceptionInFinalize', Load(), lineno=261, col_offset=52)], [], None, None, lineno=261, col_offset=8), lineno=261, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=262, col_offset=8), 'con', Load(), lineno=262, col_offset=8), 'create_aggregate', Load(), lineno=262, col_offset=8), [Str('checkType', lineno=262, col_offset=34), Num(2, lineno=262, col_offset=47), Name('AggrCheckType', Load(), lineno=262, col_offset=50)], [], None, None, lineno=262, col_offset=8), lineno=262, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=263, col_offset=8), 'con', Load(), lineno=263, col_offset=8), 'create_aggregate', Load(), lineno=263, col_offset=8), [Str('mysum', lineno=263, col_offset=34), Num(1, lineno=263, col_offset=43), Name('AggrSum', Load(), lineno=263, col_offset=46)], [], None, None, lineno=263, col_offset=8), lineno=263, col_offset=8)], [], lineno=242, col_offset=4), FunctionDef('tearDown', arguments([Name('self', Param(), lineno=265, col_offset=17)], None, None, []), [Pass( lineno=268, col_offset=8)], [], lineno=265, col_offset=4), FunctionDef('CheckAggrErrorOnCreate', arguments([Name('self', Param(), lineno=270, col_offset=31)], None, None, []), [TryExcept([Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=272, col_offset=12), 'con', Load(), lineno=272, col_offset=12), 'create_function', Load(), lineno=272, col_offset=12), [Str('bla', lineno=272, col_offset=37), Num(-100, lineno=272, col_offset=45), Name('AggrSum', Load(), lineno=272, col_offset=50)], [], None, None, lineno=272, col_offset=12), lineno=272, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=273, col_offset=12), 'fail', Load(), lineno=273, col_offset=12), [Str('should have raised an OperationalError', lineno=273, col_offset=22)], [], None, None, lineno=273, col_offset=12), lineno=273, col_offset=12)], [ExceptHandler(Attribute(Name('sqlite', Load(), lineno=274, col_offset=15), 'OperationalError', Load(), lineno=274, col_offset=15), None, [Pass( lineno=275, col_offset=12)], lineno=274, col_offset=8)], [], lineno=271, col_offset=8)], [], lineno=270, col_offset=4), FunctionDef('CheckAggrNoStep', arguments([Name('self', Param(), lineno=277, col_offset=24)], None, None, []), [Assign([Name('cur', Store(), lineno=278, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=278, col_offset=14), 'con', Load(), lineno=278, col_offset=14), 'cursor', Load(), lineno=278, col_offset=14), [], [], None, None, lineno=278, col_offset=14), lineno=278, col_offset=8), TryExcept([Expr(Call(Attribute(Name('cur', Load(), lineno=280, col_offset=12), 'execute', Load(), lineno=280, col_offset=12), [Str('select nostep(t) from test', lineno=280, col_offset=24)], [], None, None, lineno=280, col_offset=12), lineno=280, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=281, col_offset=12), 'fail', Load(), lineno=281, col_offset=12), [Str('should have raised an AttributeError', lineno=281, col_offset=22)], [], None, None, lineno=281, col_offset=12), lineno=281, col_offset=12)], [ExceptHandler(Name('AttributeError', Load(), lineno=282, col_offset=15), Name('e', Store(), lineno=282, col_offset=31), [Expr(Call(Attribute(Name('self', Load(), lineno=283, col_offset=12), 'assertEqual', Load(), lineno=283, col_offset=12), [Subscript(Attribute(Name('e', Load(), lineno=283, col_offset=29), 'args', Load(), lineno=283, col_offset=29), Index(Num(0, lineno=283, col_offset=36)), Load(), lineno=283, col_offset=29), Str("AggrNoStep instance has no attribute 'step'", lineno=283, col_offset=40)], [], None, None, lineno=283, col_offset=12), lineno=283, col_offset=12)], lineno=282, col_offset=8)], [], lineno=279, col_offset=8)], [], lineno=277, col_offset=4), FunctionDef('CheckAggrNoFinalize', arguments([Name('self', Param(), lineno=285, col_offset=28)], None, None, []), [Assign([Name('cur', Store(), lineno=286, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=286, col_offset=14), 'con', Load(), lineno=286, col_offset=14), 'cursor', Load(), lineno=286, col_offset=14), [], [], None, None, lineno=286, col_offset=14), lineno=286, col_offset=8), TryExcept([Expr(Call(Attribute(Name('cur', Load(), lineno=288, col_offset=12), 'execute', Load(), lineno=288, col_offset=12), [Str('select nofinalize(t) from test', lineno=288, col_offset=24)], [], None, None, lineno=288, col_offset=12), lineno=288, col_offset=12), Assign([Name('val', Store(), lineno=289, col_offset=12)], Subscript(Call(Attribute(Name('cur', Load(), lineno=289, col_offset=18), 'fetchone', Load(), lineno=289, col_offset=18), [], [], None, None, lineno=289, col_offset=18), Index(Num(0, lineno=289, col_offset=33)), Load(), lineno=289, col_offset=18), lineno=289, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=290, col_offset=12), 'fail', Load(), lineno=290, col_offset=12), [Str('should have raised an OperationalError', lineno=290, col_offset=22)], [], None, None, lineno=290, col_offset=12), lineno=290, col_offset=12)], [ExceptHandler(Attribute(Name('sqlite', Load(), lineno=291, col_offset=15), 'OperationalError', Load(), lineno=291, col_offset=15), Name('e', Store(), lineno=291, col_offset=40), [Expr(Call(Attribute(Name('self', Load(), lineno=292, col_offset=12), 'assertEqual', Load(), lineno=292, col_offset=12), [Subscript(Attribute(Name('e', Load(), lineno=292, col_offset=29), 'args', Load(), lineno=292, col_offset=29), Index(Num(0, lineno=292, col_offset=36)), Load(), lineno=292, col_offset=29), Str("user-defined aggregate's 'finalize' method raised error", lineno=292, col_offset=40)], [], None, None, lineno=292, col_offset=12), lineno=292, col_offset=12)], lineno=291, col_offset=8)], [], lineno=287, col_offset=8)], [], lineno=285, col_offset=4), FunctionDef('CheckAggrExceptionInInit', arguments([Name('self', Param(), lineno=294, col_offset=33)], None, None, []), [Assign([Name('cur', Store(), lineno=295, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=295, col_offset=14), 'con', Load(), lineno=295, col_offset=14), 'cursor', Load(), lineno=295, col_offset=14), [], [], None, None, lineno=295, col_offset=14), lineno=295, col_offset=8), TryExcept([Expr(Call(Attribute(Name('cur', Load(), lineno=297, col_offset=12), 'execute', Load(), lineno=297, col_offset=12), [Str('select excInit(t) from test', lineno=297, col_offset=24)], [], None, None, lineno=297, col_offset=12), lineno=297, col_offset=12), Assign([Name('val', Store(), lineno=298, col_offset=12)], Subscript(Call(Attribute(Name('cur', Load(), lineno=298, col_offset=18), 'fetchone', Load(), lineno=298, col_offset=18), [], [], None, None, lineno=298, col_offset=18), Index(Num(0, lineno=298, col_offset=33)), Load(), lineno=298, col_offset=18), lineno=298, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=299, col_offset=12), 'fail', Load(), lineno=299, col_offset=12), [Str('should have raised an OperationalError', lineno=299, col_offset=22)], [], None, None, lineno=299, col_offset=12), lineno=299, col_offset=12)], [ExceptHandler(Attribute(Name('sqlite', Load(), lineno=300, col_offset=15), 'OperationalError', Load(), lineno=300, col_offset=15), Name('e', Store(), lineno=300, col_offset=40), [Expr(Call(Attribute(Name('self', Load(), lineno=301, col_offset=12), 'assertEqual', Load(), lineno=301, col_offset=12), [Subscript(Attribute(Name('e', Load(), lineno=301, col_offset=29), 'args', Load(), lineno=301, col_offset=29), Index(Num(0, lineno=301, col_offset=36)), Load(), lineno=301, col_offset=29), Str("user-defined aggregate's '__init__' method raised error", lineno=301, col_offset=40)], [], None, None, lineno=301, col_offset=12), lineno=301, col_offset=12)], lineno=300, col_offset=8)], [], lineno=296, col_offset=8)], [], lineno=294, col_offset=4), FunctionDef('CheckAggrExceptionInStep', arguments([Name('self', Param(), lineno=303, col_offset=33)], None, None, []), [Assign([Name('cur', Store(), lineno=304, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=304, col_offset=14), 'con', Load(), lineno=304, col_offset=14), 'cursor', Load(), lineno=304, col_offset=14), [], [], None, None, lineno=304, col_offset=14), lineno=304, col_offset=8), TryExcept([Expr(Call(Attribute(Name('cur', Load(), lineno=306, col_offset=12), 'execute', Load(), lineno=306, col_offset=12), [Str('select excStep(t) from test', lineno=306, col_offset=24)], [], None, None, lineno=306, col_offset=12), lineno=306, col_offset=12), Assign([Name('val', Store(), lineno=307, col_offset=12)], Subscript(Call(Attribute(Name('cur', Load(), lineno=307, col_offset=18), 'fetchone', Load(), lineno=307, col_offset=18), [], [], None, None, lineno=307, col_offset=18), Index(Num(0, lineno=307, col_offset=33)), Load(), lineno=307, col_offset=18), lineno=307, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=308, col_offset=12), 'fail', Load(), lineno=308, col_offset=12), [Str('should have raised an OperationalError', lineno=308, col_offset=22)], [], None, None, lineno=308, col_offset=12), lineno=308, col_offset=12)], [ExceptHandler(Attribute(Name('sqlite', Load(), lineno=309, col_offset=15), 'OperationalError', Load(), lineno=309, col_offset=15), Name('e', Store(), lineno=309, col_offset=40), [Expr(Call(Attribute(Name('self', Load(), lineno=310, col_offset=12), 'assertEqual', Load(), lineno=310, col_offset=12), [Subscript(Attribute(Name('e', Load(), lineno=310, col_offset=29), 'args', Load(), lineno=310, col_offset=29), Index(Num(0, lineno=310, col_offset=36)), Load(), lineno=310, col_offset=29), Str("user-defined aggregate's 'step' method raised error", lineno=310, col_offset=40)], [], None, None, lineno=310, col_offset=12), lineno=310, col_offset=12)], lineno=309, col_offset=8)], [], lineno=305, col_offset=8)], [], lineno=303, col_offset=4), FunctionDef('CheckAggrExceptionInFinalize', arguments([Name('self', Param(), lineno=312, col_offset=37)], None, None, []), [Assign([Name('cur', Store(), lineno=313, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=313, col_offset=14), 'con', Load(), lineno=313, col_offset=14), 'cursor', Load(), lineno=313, col_offset=14), [], [], None, None, lineno=313, col_offset=14), lineno=313, col_offset=8), TryExcept([Expr(Call(Attribute(Name('cur', Load(), lineno=315, col_offset=12), 'execute', Load(), lineno=315, col_offset=12), [Str('select excFinalize(t) from test', lineno=315, col_offset=24)], [], None, None, lineno=315, col_offset=12), lineno=315, col_offset=12), Assign([Name('val', Store(), lineno=316, col_offset=12)], Subscript(Call(Attribute(Name('cur', Load(), lineno=316, col_offset=18), 'fetchone', Load(), lineno=316, col_offset=18), [], [], None, None, lineno=316, col_offset=18), Index(Num(0, lineno=316, col_offset=33)), Load(), lineno=316, col_offset=18), lineno=316, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=317, col_offset=12), 'fail', Load(), lineno=317, col_offset=12), [Str('should have raised an OperationalError', lineno=317, col_offset=22)], [], None, None, lineno=317, col_offset=12), lineno=317, col_offset=12)], [ExceptHandler(Attribute(Name('sqlite', Load(), lineno=318, col_offset=15), 'OperationalError', Load(), lineno=318, col_offset=15), Name('e', Store(), lineno=318, col_offset=40), [Expr(Call(Attribute(Name('self', Load(), lineno=319, col_offset=12), 'assertEqual', Load(), lineno=319, col_offset=12), [Subscript(Attribute(Name('e', Load(), lineno=319, col_offset=29), 'args', Load(), lineno=319, col_offset=29), Index(Num(0, lineno=319, col_offset=36)), Load(), lineno=319, col_offset=29), Str("user-defined aggregate's 'finalize' method raised error", lineno=319, col_offset=40)], [], None, None, lineno=319, col_offset=12), lineno=319, col_offset=12)], lineno=318, col_offset=8)], [], lineno=314, col_offset=8)], [], lineno=312, col_offset=4), FunctionDef('CheckAggrCheckParamStr', arguments([Name('self', Param(), lineno=321, col_offset=31)], None, None, []), [Assign([Name('cur', Store(), lineno=322, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=322, col_offset=14), 'con', Load(), lineno=322, col_offset=14), 'cursor', Load(), lineno=322, col_offset=14), [], [], None, None, lineno=322, col_offset=14), lineno=322, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=323, col_offset=8), 'execute', Load(), lineno=323, col_offset=8), [Str("select checkType('str', ?)", lineno=323, col_offset=20), Tuple([Str('foo', lineno=323, col_offset=51)], Load(), lineno=323, col_offset=51)], [], None, None, lineno=323, col_offset=8), lineno=323, col_offset=8), Assign([Name('val', Store(), lineno=324, col_offset=8)], Subscript(Call(Attribute(Name('cur', Load(), lineno=324, col_offset=14), 'fetchone', Load(), lineno=324, col_offset=14), [], [], None, None, lineno=324, col_offset=14), Index(Num(0, lineno=324, col_offset=29)), Load(), lineno=324, col_offset=14), lineno=324, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=325, col_offset=8), 'assertEqual', Load(), lineno=325, col_offset=8), [Name('val', Load(), lineno=325, col_offset=25), Num(1, lineno=325, col_offset=30)], [], None, None, lineno=325, col_offset=8), lineno=325, col_offset=8)], [], lineno=321, col_offset=4), FunctionDef('CheckAggrCheckParamInt', arguments([Name('self', Param(), lineno=327, col_offset=31)], None, None, []), [Assign([Name('cur', Store(), lineno=328, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=328, col_offset=14), 'con', Load(), lineno=328, col_offset=14), 'cursor', Load(), lineno=328, col_offset=14), [], [], None, None, lineno=328, col_offset=14), lineno=328, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=329, col_offset=8), 'execute', Load(), lineno=329, col_offset=8), [Str("select checkType('int', ?)", lineno=329, col_offset=20), Tuple([Num(42, lineno=329, col_offset=51)], Load(), lineno=329, col_offset=51)], [], None, None, lineno=329, col_offset=8), lineno=329, col_offset=8), Assign([Name('val', Store(), lineno=330, col_offset=8)], Subscript(Call(Attribute(Name('cur', Load(), lineno=330, col_offset=14), 'fetchone', Load(), lineno=330, col_offset=14), [], [], None, None, lineno=330, col_offset=14), Index(Num(0, lineno=330, col_offset=29)), Load(), lineno=330, col_offset=14), lineno=330, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=331, col_offset=8), 'assertEqual', Load(), lineno=331, col_offset=8), [Name('val', Load(), lineno=331, col_offset=25), Num(1, lineno=331, col_offset=30)], [], None, None, lineno=331, col_offset=8), lineno=331, col_offset=8)], [], lineno=327, col_offset=4), FunctionDef('CheckAggrCheckParamFloat', arguments([Name('self', Param(), lineno=333, col_offset=33)], None, None, []), [Assign([Name('cur', Store(), lineno=334, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=334, col_offset=14), 'con', Load(), lineno=334, col_offset=14), 'cursor', Load(), lineno=334, col_offset=14), [], [], None, None, lineno=334, col_offset=14), lineno=334, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=335, col_offset=8), 'execute', Load(), lineno=335, col_offset=8), [Str("select checkType('float', ?)", lineno=335, col_offset=20), Tuple([Num(3.14, lineno=335, col_offset=53)], Load(), lineno=335, col_offset=53)], [], None, None, lineno=335, col_offset=8), lineno=335, col_offset=8), Assign([Name('val', Store(), lineno=336, col_offset=8)], Subscript(Call(Attribute(Name('cur', Load(), lineno=336, col_offset=14), 'fetchone', Load(), lineno=336, col_offset=14), [], [], None, None, lineno=336, col_offset=14), Index(Num(0, lineno=336, col_offset=29)), Load(), lineno=336, col_offset=14), lineno=336, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=337, col_offset=8), 'assertEqual', Load(), lineno=337, col_offset=8), [Name('val', Load(), lineno=337, col_offset=25), Num(1, lineno=337, col_offset=30)], [], None, None, lineno=337, col_offset=8), lineno=337, col_offset=8)], [], lineno=333, col_offset=4), FunctionDef('CheckAggrCheckParamNone', arguments([Name('self', Param(), lineno=339, col_offset=32)], None, None, []), [Assign([Name('cur', Store(), lineno=340, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=340, col_offset=14), 'con', Load(), lineno=340, col_offset=14), 'cursor', Load(), lineno=340, col_offset=14), [], [], None, None, lineno=340, col_offset=14), lineno=340, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=341, col_offset=8), 'execute', Load(), lineno=341, col_offset=8), [Str("select checkType('None', ?)", lineno=341, col_offset=20), Tuple([Name('None', Load(), lineno=341, col_offset=52)], Load(), lineno=341, col_offset=52)], [], None, None, lineno=341, col_offset=8), lineno=341, col_offset=8), Assign([Name('val', Store(), lineno=342, col_offset=8)], Subscript(Call(Attribute(Name('cur', Load(), lineno=342, col_offset=14), 'fetchone', Load(), lineno=342, col_offset=14), [], [], None, None, lineno=342, col_offset=14), Index(Num(0, lineno=342, col_offset=29)), Load(), lineno=342, col_offset=14), lineno=342, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=343, col_offset=8), 'assertEqual', Load(), lineno=343, col_offset=8), [Name('val', Load(), lineno=343, col_offset=25), Num(1, lineno=343, col_offset=30)], [], None, None, lineno=343, col_offset=8), lineno=343, col_offset=8)], [], lineno=339, col_offset=4), FunctionDef('CheckAggrCheckParamBlob', arguments([Name('self', Param(), lineno=345, col_offset=32)], None, None, []), [Assign([Name('cur', Store(), lineno=346, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=346, col_offset=14), 'con', Load(), lineno=346, col_offset=14), 'cursor', Load(), lineno=346, col_offset=14), [], [], None, None, lineno=346, col_offset=14), lineno=346, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=347, col_offset=8), 'execute', Load(), lineno=347, col_offset=8), [Str("select checkType('blob', ?)", lineno=347, col_offset=20), Tuple([Call(Name('buffer', Load(), lineno=347, col_offset=52), [Str('blob', lineno=347, col_offset=59)], [], None, None, lineno=347, col_offset=52)], Load(), lineno=347, col_offset=52)], [], None, None, lineno=347, col_offset=8), lineno=347, col_offset=8), Assign([Name('val', Store(), lineno=348, col_offset=8)], Subscript(Call(Attribute(Name('cur', Load(), lineno=348, col_offset=14), 'fetchone', Load(), lineno=348, col_offset=14), [], [], None, None, lineno=348, col_offset=14), Index(Num(0, lineno=348, col_offset=29)), Load(), lineno=348, col_offset=14), lineno=348, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=349, col_offset=8), 'assertEqual', Load(), lineno=349, col_offset=8), [Name('val', Load(), lineno=349, col_offset=25), Num(1, lineno=349, col_offset=30)], [], None, None, lineno=349, col_offset=8), lineno=349, col_offset=8)], [], lineno=345, col_offset=4), FunctionDef('CheckAggrCheckAggrSum', arguments([Name('self', Param(), lineno=351, col_offset=30)], None, None, []), [Assign([Name('cur', Store(), lineno=352, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=352, col_offset=14), 'con', Load(), lineno=352, col_offset=14), 'cursor', Load(), lineno=352, col_offset=14), [], [], None, None, lineno=352, col_offset=14), lineno=352, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=353, col_offset=8), 'execute', Load(), lineno=353, col_offset=8), [Str('delete from test', lineno=353, col_offset=20)], [], None, None, lineno=353, col_offset=8), lineno=353, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=354, col_offset=8), 'executemany', Load(), lineno=354, col_offset=8), [Str('insert into test(i) values (?)', lineno=354, col_offset=24), List([Tuple([Num(10, lineno=354, col_offset=60)], Load(), lineno=354, col_offset=60), Tuple([Num(20, lineno=354, col_offset=67)], Load(), lineno=354, col_offset=67), Tuple([Num(30, lineno=354, col_offset=74)], Load(), lineno=354, col_offset=74)], Load(), lineno=354, col_offset=58)], [], None, None, lineno=354, col_offset=8), lineno=354, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=355, col_offset=8), 'execute', Load(), lineno=355, col_offset=8), [Str('select mysum(i) from test', lineno=355, col_offset=20)], [], None, None, lineno=355, col_offset=8), lineno=355, col_offset=8), Assign([Name('val', Store(), lineno=356, col_offset=8)], Subscript(Call(Attribute(Name('cur', Load(), lineno=356, col_offset=14), 'fetchone', Load(), lineno=356, col_offset=14), [], [], None, None, lineno=356, col_offset=14), Index(Num(0, lineno=356, col_offset=29)), Load(), lineno=356, col_offset=14), lineno=356, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=357, col_offset=8), 'assertEqual', Load(), lineno=357, col_offset=8), [Name('val', Load(), lineno=357, col_offset=25), Num(60, lineno=357, col_offset=30)], [], None, None, lineno=357, col_offset=8), lineno=357, col_offset=8)], [], lineno=351, col_offset=4)], [], lineno=241, col_offset=0), FunctionDef('authorizer_cb', arguments([Name('action', Param(), lineno=359, col_offset=18), Name('arg1', Param(), lineno=359, col_offset=26), Name('arg2', Param(), lineno=359, col_offset=32), Name('dbname', Param(), lineno=359, col_offset=38), Name('source', Param(), lineno=359, col_offset=46)], None, None, []), [If(Compare(Name('action', Load(), lineno=360, col_offset=7), [NotEq()], [Attribute(Name('sqlite', Load(), lineno=360, col_offset=17), 'SQLITE_SELECT', Load(), lineno=360, col_offset=17)], lineno=360, col_offset=7), [Return(Attribute(Name('sqlite', Load(), lineno=361, col_offset=15), 'SQLITE_DENY', Load(), lineno=361, col_offset=15), lineno=361, col_offset=8)], [], lineno=360, col_offset=4), If(BoolOp(Or(), [Compare(Name('arg2', Load(), lineno=362, col_offset=7), [Eq()], [Str('c2', lineno=362, col_offset=15)], lineno=362, col_offset=7), Compare(Name('arg1', Load(), lineno=362, col_offset=23), [Eq()], [Str('t2', lineno=362, col_offset=31)], lineno=362, col_offset=23)], lineno=362, col_offset=7), [Return(Attribute(Name('sqlite', Load(), lineno=363, col_offset=15), 'SQLITE_DENY', Load(), lineno=363, col_offset=15), lineno=363, col_offset=8)], [], lineno=362, col_offset=4), Return(Attribute(Name('sqlite', Load(), lineno=364, col_offset=11), 'SQLITE_OK', Load(), lineno=364, col_offset=11), lineno=364, col_offset=4)], [], lineno=359, col_offset=0), ClassDef('AuthorizerTests', [Attribute(Name('unittest', Load(), lineno=366, col_offset=22), 'TestCase', Load(), lineno=366, col_offset=22)], [FunctionDef('setUp', arguments([Name('self', Param(), lineno=367, col_offset=14)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=368, col_offset=8), 'con', Store(), lineno=368, col_offset=8)], Call(Attribute(Name('sqlite', Load(), lineno=368, col_offset=19), 'connect', Load(), lineno=368, col_offset=19), [Str(':memory:', lineno=368, col_offset=34)], [], None, None, lineno=368, col_offset=19), lineno=368, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=369, col_offset=8), 'con', Load(), lineno=369, col_offset=8), 'executescript', Load(), lineno=369, col_offset=8), [Str('\n            create table t1 (c1, c2);\n            create table t2 (c1, c2);\n            insert into t1 (c1, c2) values (1, 2);\n            insert into t2 (c1, c2) values (4, 5);\n            ', lineno=374, col_offset=-1)], [], None, None, lineno=369, col_offset=8), lineno=369, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=377, col_offset=8), 'con', Load(), lineno=377, col_offset=8), 'execute', Load(), lineno=377, col_offset=8), [Str('select c2 from t2', lineno=377, col_offset=25)], [], None, None, lineno=377, col_offset=8), lineno=377, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=379, col_offset=8), 'con', Load(), lineno=379, col_offset=8), 'set_authorizer', Load(), lineno=379, col_offset=8), [Name('authorizer_cb', Load(), lineno=379, col_offset=32)], [], None, None, lineno=379, col_offset=8), lineno=379, col_offset=8)], [], lineno=367, col_offset=4), FunctionDef('tearDown', arguments([Name('self', Param(), lineno=381, col_offset=17)], None, None, []), [Pass( lineno=382, col_offset=8)], [], lineno=381, col_offset=4), FunctionDef('CheckTableAccess', arguments([Name('self', Param(), lineno=384, col_offset=25)], None, None, []), [TryExcept([Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=386, col_offset=12), 'con', Load(), lineno=386, col_offset=12), 'execute', Load(), lineno=386, col_offset=12), [Str('select * from t2', lineno=386, col_offset=29)], [], None, None, lineno=386, col_offset=12), lineno=386, col_offset=12)], [ExceptHandler(Attribute(Name('sqlite', Load(), lineno=387, col_offset=15), 'DatabaseError', Load(), lineno=387, col_offset=15), Name('e', Store(), lineno=387, col_offset=37), [If(UnaryOp(Not(), Call(Attribute(Subscript(Attribute(Name('e', Load(), lineno=388, col_offset=19), 'args', Load(), lineno=388, col_offset=19), Index(Num(0, lineno=388, col_offset=26)), Load(), lineno=388, col_offset=19), 'endswith', Load(), lineno=388, col_offset=19), [Str('prohibited', lineno=388, col_offset=38)], [], None, None, lineno=388, col_offset=19), lineno=388, col_offset=15), [Expr(Call(Attribute(Name('self', Load(), lineno=389, col_offset=16), 'fail', Load(), lineno=389, col_offset=16), [BinOp(Str('wrong exception text: %s', lineno=389, col_offset=26), Mod(), Subscript(Attribute(Name('e', Load(), lineno=389, col_offset=55), 'args', Load(), lineno=389, col_offset=55), Index(Num(0, lineno=389, col_offset=62)), Load(), lineno=389, col_offset=55), lineno=389, col_offset=26)], [], None, None, lineno=389, col_offset=16), lineno=389, col_offset=16)], [], lineno=388, col_offset=12), Return(None, lineno=390, col_offset=12)], lineno=387, col_offset=8)], [], lineno=385, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=391, col_offset=8), 'fail', Load(), lineno=391, col_offset=8), [Str('should have raised an exception due to missing privileges', lineno=391, col_offset=18)], [], None, None, lineno=391, col_offset=8), lineno=391, col_offset=8)], [], lineno=384, col_offset=4), FunctionDef('CheckColumnAccess', arguments([Name('self', Param(), lineno=393, col_offset=26)], None, None, []), [TryExcept([Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=395, col_offset=12), 'con', Load(), lineno=395, col_offset=12), 'execute', Load(), lineno=395, col_offset=12), [Str('select c2 from t1', lineno=395, col_offset=29)], [], None, None, lineno=395, col_offset=12), lineno=395, col_offset=12)], [ExceptHandler(Attribute(Name('sqlite', Load(), lineno=396, col_offset=15), 'DatabaseError', Load(), lineno=396, col_offset=15), Name('e', Store(), lineno=396, col_offset=37), [If(UnaryOp(Not(), Call(Attribute(Subscript(Attribute(Name('e', Load(), lineno=397, col_offset=19), 'args', Load(), lineno=397, col_offset=19), Index(Num(0, lineno=397, col_offset=26)), Load(), lineno=397, col_offset=19), 'endswith', Load(), lineno=397, col_offset=19), [Str('prohibited', lineno=397, col_offset=38)], [], None, None, lineno=397, col_offset=19), lineno=397, col_offset=15), [Expr(Call(Attribute(Name('self', Load(), lineno=398, col_offset=16), 'fail', Load(), lineno=398, col_offset=16), [BinOp(Str('wrong exception text: %s', lineno=398, col_offset=26), Mod(), Subscript(Attribute(Name('e', Load(), lineno=398, col_offset=55), 'args', Load(), lineno=398, col_offset=55), Index(Num(0, lineno=398, col_offset=62)), Load(), lineno=398, col_offset=55), lineno=398, col_offset=26)], [], None, None, lineno=398, col_offset=16), lineno=398, col_offset=16)], [], lineno=397, col_offset=12), Return(None, lineno=399, col_offset=12)], lineno=396, col_offset=8)], [], lineno=394, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=400, col_offset=8), 'fail', Load(), lineno=400, col_offset=8), [Str('should have raised an exception due to missing privileges', lineno=400, col_offset=18)], [], None, None, lineno=400, col_offset=8), lineno=400, col_offset=8)], [], lineno=393, col_offset=4)], [], lineno=366, col_offset=0), FunctionDef('suite', arguments([], None, None, []), [Assign([Name('function_suite', Store(), lineno=403, col_offset=4)], Call(Attribute(Name('unittest', Load(), lineno=403, col_offset=21), 'makeSuite', Load(), lineno=403, col_offset=21), [Name('FunctionTests', Load(), lineno=403, col_offset=40), Str('Check', lineno=403, col_offset=55)], [], None, None, lineno=403, col_offset=21), lineno=403, col_offset=4), Assign([Name('aggregate_suite', Store(), lineno=404, col_offset=4)], Call(Attribute(Name('unittest', Load(), lineno=404, col_offset=22), 'makeSuite', Load(), lineno=404, col_offset=22), [Name('AggregateTests', Load(), lineno=404, col_offset=41), Str('Check', lineno=404, col_offset=57)], [], None, None, lineno=404, col_offset=22), lineno=404, col_offset=4), Assign([Name('authorizer_suite', Store(), lineno=405, col_offset=4)], Call(Attribute(Name('unittest', Load(), lineno=405, col_offset=23), 'makeSuite', Load(), lineno=405, col_offset=23), [Name('AuthorizerTests', Load(), lineno=405, col_offset=42), Str('Check', lineno=405, col_offset=59)], [], None, None, lineno=405, col_offset=23), lineno=405, col_offset=4), Return(Call(Attribute(Name('unittest', Load(), lineno=406, col_offset=11), 'TestSuite', Load(), lineno=406, col_offset=11), [Tuple([Name('function_suite', Load(), lineno=406, col_offset=31), Name('aggregate_suite', Load(), lineno=406, col_offset=47), Name('authorizer_suite', Load(), lineno=406, col_offset=64)], Load(), lineno=406, col_offset=31)], [], None, None, lineno=406, col_offset=11), lineno=406, col_offset=4)], [], lineno=402, col_offset=0), FunctionDef('test', arguments([], None, None, []), [Assign([Name('runner', Store(), lineno=409, col_offset=4)], Call(Attribute(Name('unittest', Load(), lineno=409, col_offset=13), 'TextTestRunner', Load(), lineno=409, col_offset=13), [], [], None, None, lineno=409, col_offset=13), lineno=409, col_offset=4), Expr(Call(Attribute(Name('runner', Load(), lineno=410, col_offset=4), 'run', Load(), lineno=410, col_offset=4), [Call(Name('suite', Load(), lineno=410, col_offset=15), [], [], None, None, lineno=410, col_offset=15)], [], None, None, lineno=410, col_offset=4), lineno=410, col_offset=4)], [], lineno=408, col_offset=0), If(Compare(Name('__name__', Load(), lineno=412, col_offset=3), [Eq()], [Str('__main__', lineno=412, col_offset=15)], lineno=412, col_offset=3), [Expr(Call(Name('test', Load(), lineno=413, col_offset=4), [], [], None, None, lineno=413, col_offset=4), lineno=413, col_offset=4)], [], lineno=412, col_offset=0)])
