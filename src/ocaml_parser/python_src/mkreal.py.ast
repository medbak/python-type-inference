Module([Import([alias('sys', None)], lineno=7, col_offset=0), Import([alias('os', None)], lineno=8, col_offset=0), ImportFrom('stat', [alias('*', None)], 0, lineno=9, col_offset=0), Assign([Name('join', Store(), lineno=11, col_offset=0)], Attribute(Attribute(Name('os', Load(), lineno=11, col_offset=7), 'path', Load(), lineno=11, col_offset=7), 'join', Load(), lineno=11, col_offset=7), lineno=11, col_offset=0), Assign([Name('error', Store(), lineno=13, col_offset=0)], Str('mkreal error', lineno=13, col_offset=8), lineno=13, col_offset=0), Assign([Name('BUFSIZE', Store(), lineno=15, col_offset=0)], BinOp(Num(32, lineno=15, col_offset=10), Mult(), Num(1024, lineno=15, col_offset=13), lineno=15, col_offset=10), lineno=15, col_offset=0), FunctionDef('mkrealfile', arguments([Name('name', Param(), lineno=17, col_offset=15)], None, None, []), [Assign([Name('st', Store(), lineno=18, col_offset=4)], Call(Attribute(Name('os', Load(), lineno=18, col_offset=9), 'stat', Load(), lineno=18, col_offset=9), [Name('name', Load(), lineno=18, col_offset=17)], [], None, None, lineno=18, col_offset=9), lineno=18, col_offset=4), Assign([Name('mode', Store(), lineno=19, col_offset=4)], Call(Name('S_IMODE', Load(), lineno=19, col_offset=11), [Subscript(Name('st', Load(), lineno=19, col_offset=19), Index(Name('ST_MODE', Load(), lineno=19, col_offset=22)), Load(), lineno=19, col_offset=19)], [], None, None, lineno=19, col_offset=11), lineno=19, col_offset=4), Assign([Name('linkto', Store(), lineno=20, col_offset=4)], Call(Attribute(Name('os', Load(), lineno=20, col_offset=13), 'readlink', Load(), lineno=20, col_offset=13), [Name('name', Load(), lineno=20, col_offset=25)], [], None, None, lineno=20, col_offset=13), lineno=20, col_offset=4), Assign([Name('f_in', Store(), lineno=21, col_offset=4)], Call(Name('open', Load(), lineno=21, col_offset=11), [Name('name', Load(), lineno=21, col_offset=16), Str('r', lineno=21, col_offset=22)], [], None, None, lineno=21, col_offset=11), lineno=21, col_offset=4), Expr(Call(Attribute(Name('os', Load(), lineno=22, col_offset=4), 'unlink', Load(), lineno=22, col_offset=4), [Name('name', Load(), lineno=22, col_offset=14)], [], None, None, lineno=22, col_offset=4), lineno=22, col_offset=4), Assign([Name('f_out', Store(), lineno=23, col_offset=4)], Call(Name('open', Load(), lineno=23, col_offset=12), [Name('name', Load(), lineno=23, col_offset=17), Str('w', lineno=23, col_offset=23)], [], None, None, lineno=23, col_offset=12), lineno=23, col_offset=4), While(Num(1, lineno=24, col_offset=10), [Assign([Name('buf', Store(), lineno=25, col_offset=8)], Call(Attribute(Name('f_in', Load(), lineno=25, col_offset=14), 'read', Load(), lineno=25, col_offset=14), [Name('BUFSIZE', Load(), lineno=25, col_offset=24)], [], None, None, lineno=25, col_offset=14), lineno=25, col_offset=8), If(UnaryOp(Not(), Name('buf', Load(), lineno=26, col_offset=15), lineno=26, col_offset=11), [Break( lineno=26, col_offset=20)], [], lineno=26, col_offset=8), Expr(Call(Attribute(Name('f_out', Load(), lineno=27, col_offset=8), 'write', Load(), lineno=27, col_offset=8), [Name('buf', Load(), lineno=27, col_offset=20)], [], None, None, lineno=27, col_offset=8), lineno=27, col_offset=8)], [], lineno=24, col_offset=4), Delete([Name('f_out', Del(), lineno=28, col_offset=8)], lineno=28, col_offset=4), Expr(Call(Attribute(Name('os', Load(), lineno=29, col_offset=4), 'chmod', Load(), lineno=29, col_offset=4), [Name('name', Load(), lineno=29, col_offset=13), Name('mode', Load(), lineno=29, col_offset=19)], [], None, None, lineno=29, col_offset=4), lineno=29, col_offset=4)], [], lineno=17, col_offset=0), FunctionDef('mkrealdir', arguments([Name('name', Param(), lineno=31, col_offset=14)], None, None, []), [Assign([Name('st', Store(), lineno=32, col_offset=4)], Call(Attribute(Name('os', Load(), lineno=32, col_offset=9), 'stat', Load(), lineno=32, col_offset=9), [Name('name', Load(), lineno=32, col_offset=17)], [], None, None, lineno=32, col_offset=9), lineno=32, col_offset=4), Assign([Name('mode', Store(), lineno=33, col_offset=4)], Call(Name('S_IMODE', Load(), lineno=33, col_offset=11), [Subscript(Name('st', Load(), lineno=33, col_offset=19), Index(Name('ST_MODE', Load(), lineno=33, col_offset=22)), Load(), lineno=33, col_offset=19)], [], None, None, lineno=33, col_offset=11), lineno=33, col_offset=4), Assign([Name('linkto', Store(), lineno=34, col_offset=4)], Call(Attribute(Name('os', Load(), lineno=34, col_offset=13), 'readlink', Load(), lineno=34, col_offset=13), [Name('name', Load(), lineno=34, col_offset=25)], [], None, None, lineno=34, col_offset=13), lineno=34, col_offset=4), Assign([Name('files', Store(), lineno=35, col_offset=4)], Call(Attribute(Name('os', Load(), lineno=35, col_offset=12), 'listdir', Load(), lineno=35, col_offset=12), [Name('name', Load(), lineno=35, col_offset=23)], [], None, None, lineno=35, col_offset=12), lineno=35, col_offset=4), Expr(Call(Attribute(Name('os', Load(), lineno=36, col_offset=4), 'unlink', Load(), lineno=36, col_offset=4), [Name('name', Load(), lineno=36, col_offset=14)], [], None, None, lineno=36, col_offset=4), lineno=36, col_offset=4), Expr(Call(Attribute(Name('os', Load(), lineno=37, col_offset=4), 'mkdir', Load(), lineno=37, col_offset=4), [Name('name', Load(), lineno=37, col_offset=13), Name('mode', Load(), lineno=37, col_offset=19)], [], None, None, lineno=37, col_offset=4), lineno=37, col_offset=4), Expr(Call(Attribute(Name('os', Load(), lineno=38, col_offset=4), 'chmod', Load(), lineno=38, col_offset=4), [Name('name', Load(), lineno=38, col_offset=13), Name('mode', Load(), lineno=38, col_offset=19)], [], None, None, lineno=38, col_offset=4), lineno=38, col_offset=4), Assign([Name('linkto', Store(), lineno=39, col_offset=4)], Call(Name('join', Load(), lineno=39, col_offset=13), [Attribute(Name('os', Load(), lineno=39, col_offset=18), 'pardir', Load(), lineno=39, col_offset=18), Name('linkto', Load(), lineno=39, col_offset=29)], [], None, None, lineno=39, col_offset=13), lineno=39, col_offset=4), For(Name('filename', Store(), lineno=41, col_offset=8), Name('files', Load(), lineno=41, col_offset=20), [If(Compare(Name('filename', Load(), lineno=42, col_offset=11), [NotIn()], [Tuple([Attribute(Name('os', Load(), lineno=42, col_offset=28), 'curdir', Load(), lineno=42, col_offset=28), Attribute(Name('os', Load(), lineno=42, col_offset=39), 'pardir', Load(), lineno=42, col_offset=39)], Load(), lineno=42, col_offset=28)], lineno=42, col_offset=11), [Expr(Call(Attribute(Name('os', Load(), lineno=43, col_offset=12), 'symlink', Load(), lineno=43, col_offset=12), [Call(Name('join', Load(), lineno=43, col_offset=23), [Name('linkto', Load(), lineno=43, col_offset=28), Name('filename', Load(), lineno=43, col_offset=36)], [], None, None, lineno=43, col_offset=23), Call(Name('join', Load(), lineno=43, col_offset=47), [Name('name', Load(), lineno=43, col_offset=52), Name('filename', Load(), lineno=43, col_offset=58)], [], None, None, lineno=43, col_offset=47)], [], None, None, lineno=43, col_offset=12), lineno=43, col_offset=12)], [], lineno=42, col_offset=8)], [], lineno=41, col_offset=4)], [], lineno=31, col_offset=0), FunctionDef('main', arguments([], None, None, []), [Assign([Attribute(Name('sys', Load(), lineno=46, col_offset=4), 'stdout', Store(), lineno=46, col_offset=4)], Attribute(Name('sys', Load(), lineno=46, col_offset=17), 'stderr', Load(), lineno=46, col_offset=17), lineno=46, col_offset=4), Assign([Name('progname', Store(), lineno=47, col_offset=4)], Call(Attribute(Attribute(Name('os', Load(), lineno=47, col_offset=15), 'path', Load(), lineno=47, col_offset=15), 'basename', Load(), lineno=47, col_offset=15), [Subscript(Attribute(Name('sys', Load(), lineno=47, col_offset=32), 'argv', Load(), lineno=47, col_offset=32), Index(Num(0, lineno=47, col_offset=41)), Load(), lineno=47, col_offset=32)], [], None, None, lineno=47, col_offset=15), lineno=47, col_offset=4), If(Compare(Name('progname', Load(), lineno=48, col_offset=7), [Eq()], [Str('-c', lineno=48, col_offset=19)], lineno=48, col_offset=7), [Assign([Name('progname', Store(), lineno=48, col_offset=25)], Str('mkreal', lineno=48, col_offset=36), lineno=48, col_offset=25)], [], lineno=48, col_offset=4), Assign([Name('args', Store(), lineno=49, col_offset=4)], Subscript(Attribute(Name('sys', Load(), lineno=49, col_offset=11), 'argv', Load(), lineno=49, col_offset=11), Slice(Num(1, lineno=49, col_offset=20), None, None), Load(), lineno=49, col_offset=11), lineno=49, col_offset=4), If(UnaryOp(Not(), Name('args', Load(), lineno=50, col_offset=11), lineno=50, col_offset=7), [Print(None, [Str('usage:', lineno=51, col_offset=14), Name('progname', Load(), lineno=51, col_offset=24), Str('path ...', lineno=51, col_offset=34)], True, lineno=51, col_offset=8), Expr(Call(Attribute(Name('sys', Load(), lineno=52, col_offset=8), 'exit', Load(), lineno=52, col_offset=8), [Num(2, lineno=52, col_offset=17)], [], None, None, lineno=52, col_offset=8), lineno=52, col_offset=8)], [], lineno=50, col_offset=4), Assign([Name('status', Store(), lineno=53, col_offset=4)], Num(0, lineno=53, col_offset=13), lineno=53, col_offset=4), For(Name('name', Store(), lineno=54, col_offset=8), Name('args', Load(), lineno=54, col_offset=16), [If(UnaryOp(Not(), Call(Attribute(Attribute(Name('os', Load(), lineno=55, col_offset=15), 'path', Load(), lineno=55, col_offset=15), 'islink', Load(), lineno=55, col_offset=15), [Name('name', Load(), lineno=55, col_offset=30)], [], None, None, lineno=55, col_offset=15), lineno=55, col_offset=11), [Print(None, [BinOp(Name('progname', Load(), lineno=56, col_offset=18), Add(), Str(':', lineno=56, col_offset=27), lineno=56, col_offset=18), BinOp(Name('name', Load(), lineno=56, col_offset=32), Add(), Str(':', lineno=56, col_offset=37), lineno=56, col_offset=32), Str('not a symlink', lineno=56, col_offset=42)], True, lineno=56, col_offset=12), Assign([Name('status', Store(), lineno=57, col_offset=12)], Num(1, lineno=57, col_offset=21), lineno=57, col_offset=12)], [If(Call(Attribute(Attribute(Name('os', Load(), lineno=59, col_offset=15), 'path', Load(), lineno=59, col_offset=15), 'isdir', Load(), lineno=59, col_offset=15), [Name('name', Load(), lineno=59, col_offset=29)], [], None, None, lineno=59, col_offset=15), [Expr(Call(Name('mkrealdir', Load(), lineno=60, col_offset=16), [Name('name', Load(), lineno=60, col_offset=26)], [], None, None, lineno=60, col_offset=16), lineno=60, col_offset=16)], [Expr(Call(Name('mkrealfile', Load(), lineno=62, col_offset=16), [Name('name', Load(), lineno=62, col_offset=27)], [], None, None, lineno=62, col_offset=16), lineno=62, col_offset=16)], lineno=59, col_offset=12)], lineno=55, col_offset=8)], [], lineno=54, col_offset=4), Expr(Call(Attribute(Name('sys', Load(), lineno=63, col_offset=4), 'exit', Load(), lineno=63, col_offset=4), [Name('status', Load(), lineno=63, col_offset=13)], [], None, None, lineno=63, col_offset=4), lineno=63, col_offset=4)], [], lineno=45, col_offset=0), If(Compare(Name('__name__', Load(), lineno=65, col_offset=3), [Eq()], [Str('__main__', lineno=65, col_offset=15)], lineno=65, col_offset=3), [Expr(Call(Name('main', Load(), lineno=66, col_offset=4), [], [], None, None, lineno=66, col_offset=4), lineno=66, col_offset=4)], [], lineno=65, col_offset=0)])
