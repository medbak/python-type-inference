Module([Expr(Str('\natexit.py - allow programmer to define multiple exit functions to be executed\nupon normal program termination.\n\nOne public function, register, is defined.\n', lineno=6, col_offset=-1), lineno=6, col_offset=-1), Assign([Name('__all__', Store(), lineno=8, col_offset=0)], List([Str('register', lineno=8, col_offset=11)], Load(), lineno=8, col_offset=10), lineno=8, col_offset=0), Import([alias('sys', None)], lineno=10, col_offset=0), Assign([Name('_exithandlers', Store(), lineno=12, col_offset=0)], List([], Load(), lineno=12, col_offset=16), lineno=12, col_offset=0), FunctionDef('_run_exitfuncs', arguments([], None, None, []), [Expr(Str('run any registered exit functions\n\n    _exithandlers is traversed in reverse order so functions are executed\n    last in, first out.\n    ', lineno=18, col_offset=-1), lineno=18, col_offset=-1), Assign([Name('exc_info', Store(), lineno=20, col_offset=4)], Name('None', Load(), lineno=20, col_offset=15), lineno=20, col_offset=4), While(Name('_exithandlers', Load(), lineno=21, col_offset=10), [Assign([Tuple([Name('func', Store(), lineno=22, col_offset=8), Name('targs', Store(), lineno=22, col_offset=14), Name('kargs', Store(), lineno=22, col_offset=21)], Store(), lineno=22, col_offset=8)], Call(Attribute(Name('_exithandlers', Load(), lineno=22, col_offset=29), 'pop', Load(), lineno=22, col_offset=29), [], [], None, None, lineno=22, col_offset=29), lineno=22, col_offset=8), TryExcept([Expr(Call(Name('func', Load(), lineno=24, col_offset=12), [], [], Name('targs', Load(), lineno=24, col_offset=18), Name('kargs', Load(), lineno=24, col_offset=27), lineno=24, col_offset=12), lineno=24, col_offset=12)], [ExceptHandler(Name('SystemExit', Load(), lineno=25, col_offset=15), None, [Assign([Name('exc_info', Store(), lineno=26, col_offset=12)], Call(Attribute(Name('sys', Load(), lineno=26, col_offset=23), 'exc_info', Load(), lineno=26, col_offset=23), [], [], None, None, lineno=26, col_offset=23), lineno=26, col_offset=12)], lineno=25, col_offset=8), ExceptHandler(None, None, [Import([alias('traceback', None)], lineno=28, col_offset=12), Print(Attribute(Name('sys', Load(), lineno=29, col_offset=21), 'stderr', Load(), lineno=29, col_offset=21), [Str('Error in atexit._run_exitfuncs:', lineno=29, col_offset=33)], True, lineno=29, col_offset=12), Expr(Call(Attribute(Name('traceback', Load(), lineno=30, col_offset=12), 'print_exc', Load(), lineno=30, col_offset=12), [], [], None, None, lineno=30, col_offset=12), lineno=30, col_offset=12), Assign([Name('exc_info', Store(), lineno=31, col_offset=12)], Call(Attribute(Name('sys', Load(), lineno=31, col_offset=23), 'exc_info', Load(), lineno=31, col_offset=23), [], [], None, None, lineno=31, col_offset=23), lineno=31, col_offset=12)], lineno=27, col_offset=8)], [], lineno=23, col_offset=8)], [], lineno=21, col_offset=4), If(Compare(Name('exc_info', Load(), lineno=33, col_offset=7), [IsNot()], [Name('None', Load(), lineno=33, col_offset=23)], lineno=33, col_offset=7), [Raise(Subscript(Name('exc_info', Load(), lineno=34, col_offset=14), Index(Num(0, lineno=34, col_offset=23)), Load(), lineno=34, col_offset=14), Subscript(Name('exc_info', Load(), lineno=34, col_offset=27), Index(Num(1, lineno=34, col_offset=36)), Load(), lineno=34, col_offset=27), Subscript(Name('exc_info', Load(), lineno=34, col_offset=40), Index(Num(2, lineno=34, col_offset=49)), Load(), lineno=34, col_offset=40), lineno=34, col_offset=8)], [], lineno=33, col_offset=4)], [], lineno=13, col_offset=0), FunctionDef('register', arguments([Name('func', Param(), lineno=37, col_offset=13)], 'targs', 'kargs', []), [Expr(Str('register a function to be executed upon normal program termination\n\n    func - function to be called at exit\n    targs - optional arguments to pass to func\n    kargs - optional keyword arguments to pass to func\n\n    func is returned to facilitate usage as a decorator.\n    ', lineno=45, col_offset=-1), lineno=45, col_offset=-1), Expr(Call(Attribute(Name('_exithandlers', Load(), lineno=46, col_offset=4), 'append', Load(), lineno=46, col_offset=4), [Tuple([Name('func', Load(), lineno=46, col_offset=26), Name('targs', Load(), lineno=46, col_offset=32), Name('kargs', Load(), lineno=46, col_offset=39)], Load(), lineno=46, col_offset=26)], [], None, None, lineno=46, col_offset=4), lineno=46, col_offset=4), Return(Name('func', Load(), lineno=47, col_offset=11), lineno=47, col_offset=4)], [], lineno=37, col_offset=0), If(Call(Name('hasattr', Load(), lineno=49, col_offset=3), [Name('sys', Load(), lineno=49, col_offset=11), Str('exitfunc', lineno=49, col_offset=16)], [], None, None, lineno=49, col_offset=3), [Expr(Call(Name('register', Load(), lineno=51, col_offset=4), [Attribute(Name('sys', Load(), lineno=51, col_offset=13), 'exitfunc', Load(), lineno=51, col_offset=13)], [], None, None, lineno=51, col_offset=4), lineno=51, col_offset=4)], [], lineno=49, col_offset=0), Assign([Attribute(Name('sys', Load(), lineno=52, col_offset=0), 'exitfunc', Store(), lineno=52, col_offset=0)], Name('_run_exitfuncs', Load(), lineno=52, col_offset=15), lineno=52, col_offset=0), If(Compare(Name('__name__', Load(), lineno=54, col_offset=3), [Eq()], [Str('__main__', lineno=54, col_offset=15)], lineno=54, col_offset=3), [FunctionDef('x1', arguments([], None, None, []), [Print(None, [Str('running x1', lineno=56, col_offset=14)], True, lineno=56, col_offset=8)], [], lineno=55, col_offset=4), FunctionDef('x2', arguments([Name('n', Param(), lineno=57, col_offset=11)], None, None, []), [Print(None, [BinOp(Str('running x2(%r)', lineno=58, col_offset=14), Mod(), Tuple([Name('n', Load(), lineno=58, col_offset=34)], Load(), lineno=58, col_offset=34), lineno=58, col_offset=14)], True, lineno=58, col_offset=8)], [], lineno=57, col_offset=4), FunctionDef('x3', arguments([Name('n', Param(), lineno=59, col_offset=11), Name('kwd', Param(), lineno=59, col_offset=14)], None, None, [Name('None', Load(), lineno=59, col_offset=18)]), [Print(None, [BinOp(Str('running x3(%r, kwd=%r)', lineno=60, col_offset=14), Mod(), Tuple([Name('n', Load(), lineno=60, col_offset=42), Name('kwd', Load(), lineno=60, col_offset=45)], Load(), lineno=60, col_offset=42), lineno=60, col_offset=14)], True, lineno=60, col_offset=8)], [], lineno=59, col_offset=4), Expr(Call(Name('register', Load(), lineno=62, col_offset=4), [Name('x1', Load(), lineno=62, col_offset=13)], [], None, None, lineno=62, col_offset=4), lineno=62, col_offset=4), Expr(Call(Name('register', Load(), lineno=63, col_offset=4), [Name('x2', Load(), lineno=63, col_offset=13), Num(12, lineno=63, col_offset=17)], [], None, None, lineno=63, col_offset=4), lineno=63, col_offset=4), Expr(Call(Name('register', Load(), lineno=64, col_offset=4), [Name('x3', Load(), lineno=64, col_offset=13), Num(5, lineno=64, col_offset=17), Str('bar', lineno=64, col_offset=20)], [], None, None, lineno=64, col_offset=4), lineno=64, col_offset=4), Expr(Call(Name('register', Load(), lineno=65, col_offset=4), [Name('x3', Load(), lineno=65, col_offset=13), Str('no kwd args', lineno=65, col_offset=17)], [], None, None, lineno=65, col_offset=4), lineno=65, col_offset=4)], [], lineno=54, col_offset=0)])
