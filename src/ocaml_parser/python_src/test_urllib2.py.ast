Module([Import([alias('unittest', None)], lineno=1, col_offset=0), ImportFrom('test', [alias('test_support', None)], 0, lineno=2, col_offset=0), Import([alias('os', None)], lineno=4, col_offset=0), Import([alias('socket', None)], lineno=5, col_offset=0), Import([alias('StringIO', None)], lineno=6, col_offset=0), Import([alias('urllib2', None)], lineno=8, col_offset=0), ImportFrom('urllib2', [alias('Request', None), alias('OpenerDirector', None)], 0, lineno=9, col_offset=0), ClassDef('TrivialTests', [Attribute(Name('unittest', Load(), lineno=16, col_offset=19), 'TestCase', Load(), lineno=16, col_offset=19)], [FunctionDef('test_trivial', arguments([Name('self', Param(), lineno=17, col_offset=21)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=20, col_offset=8), 'assertRaises', Load(), lineno=20, col_offset=8), [Name('ValueError', Load(), lineno=20, col_offset=26), Attribute(Name('urllib2', Load(), lineno=20, col_offset=38), 'urlopen', Load(), lineno=20, col_offset=38), Str('bogus url', lineno=20, col_offset=55)], [], None, None, lineno=20, col_offset=8), lineno=20, col_offset=8), Assign([Name('fname', Store(), lineno=23, col_offset=8)], Call(Attribute(Call(Attribute(Attribute(Name('os', Load(), lineno=23, col_offset=16), 'path', Load(), lineno=23, col_offset=16), 'abspath', Load(), lineno=23, col_offset=16), [Attribute(Name('urllib2', Load(), lineno=23, col_offset=32), '__file__', Load(), lineno=23, col_offset=32)], [], None, None, lineno=23, col_offset=16), 'replace', Load(), lineno=23, col_offset=16), [Str('\\', lineno=23, col_offset=58), Str('/', lineno=23, col_offset=64)], [], None, None, lineno=23, col_offset=16), lineno=23, col_offset=8), If(Compare(Attribute(Name('os', Load(), lineno=27, col_offset=11), 'name', Load(), lineno=27, col_offset=11), [Eq()], [Str('riscos', lineno=27, col_offset=22)], lineno=27, col_offset=11), [Import([alias('string', None)], lineno=28, col_offset=12), Assign([Name('fname', Store(), lineno=29, col_offset=12)], Call(Attribute(Name('os', Load(), lineno=29, col_offset=20), 'expand', Load(), lineno=29, col_offset=20), [Name('fname', Load(), lineno=29, col_offset=30)], [], None, None, lineno=29, col_offset=20), lineno=29, col_offset=12), Assign([Name('fname', Store(), lineno=30, col_offset=12)], Call(Attribute(Name('fname', Load(), lineno=30, col_offset=20), 'translate', Load(), lineno=30, col_offset=20), [Call(Attribute(Name('string', Load(), lineno=30, col_offset=36), 'maketrans', Load(), lineno=30, col_offset=36), [Str('/.', lineno=30, col_offset=53), Str('./', lineno=30, col_offset=59)], [], None, None, lineno=30, col_offset=36)], [], None, None, lineno=30, col_offset=20), lineno=30, col_offset=12)], [], lineno=27, col_offset=8), If(Compare(Attribute(Name('os', Load(), lineno=32, col_offset=11), 'name', Load(), lineno=32, col_offset=11), [Eq()], [Str('nt', lineno=32, col_offset=22)], lineno=32, col_offset=11), [Assign([Name('file_url', Store(), lineno=33, col_offset=12)], BinOp(Str('file:///%s', lineno=33, col_offset=23), Mod(), Name('fname', Load(), lineno=33, col_offset=38), lineno=33, col_offset=23), lineno=33, col_offset=12)], [Assign([Name('file_url', Store(), lineno=35, col_offset=12)], BinOp(Str('file://%s', lineno=35, col_offset=23), Mod(), Name('fname', Load(), lineno=35, col_offset=37), lineno=35, col_offset=23), lineno=35, col_offset=12)], lineno=32, col_offset=8), Assign([Name('f', Store(), lineno=37, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=37, col_offset=12), 'urlopen', Load(), lineno=37, col_offset=12), [Name('file_url', Load(), lineno=37, col_offset=28)], [], None, None, lineno=37, col_offset=12), lineno=37, col_offset=8), Assign([Name('buf', Store(), lineno=39, col_offset=8)], Call(Attribute(Name('f', Load(), lineno=39, col_offset=14), 'read', Load(), lineno=39, col_offset=14), [], [], None, None, lineno=39, col_offset=14), lineno=39, col_offset=8), Expr(Call(Attribute(Name('f', Load(), lineno=40, col_offset=8), 'close', Load(), lineno=40, col_offset=8), [], [], None, None, lineno=40, col_offset=8), lineno=40, col_offset=8)], [], lineno=17, col_offset=4), FunctionDef('test_parse_http_list', arguments([Name('self', Param(), lineno=42, col_offset=29)], None, None, []), [Assign([Name('tests', Store(), lineno=43, col_offset=8)], List([Tuple([Str('a,b,c', lineno=43, col_offset=18), List([Str('a', lineno=43, col_offset=28), Str('b', lineno=43, col_offset=33), Str('c', lineno=43, col_offset=38)], Load(), lineno=43, col_offset=27)], Load(), lineno=43, col_offset=18), Tuple([Str('path"o,l"og"i"cal, example', lineno=44, col_offset=18), List([Str('path"o,l"og"i"cal', lineno=44, col_offset=49), Str('example', lineno=44, col_offset=70)], Load(), lineno=44, col_offset=48)], Load(), lineno=44, col_offset=18), Tuple([Str('a, b, "c", "d", "e,f", g, h', lineno=45, col_offset=18), List([Str('a', lineno=45, col_offset=50), Str('b', lineno=45, col_offset=55), Str('"c"', lineno=45, col_offset=60), Str('"d"', lineno=45, col_offset=67), Str('"e,f"', lineno=45, col_offset=74), Str('g', lineno=45, col_offset=83), Str('h', lineno=45, col_offset=88)], Load(), lineno=45, col_offset=49)], Load(), lineno=45, col_offset=18), Tuple([Str('a="b\\"c", d="e\\,f", g="h\\\\i"', lineno=46, col_offset=18), List([Str('a="b"c"', lineno=46, col_offset=55), Str('d="e,f"', lineno=46, col_offset=66), Str('g="h\\i"', lineno=46, col_offset=77)], Load(), lineno=46, col_offset=54)], Load(), lineno=46, col_offset=18)], Load(), lineno=43, col_offset=16), lineno=43, col_offset=8), For(Tuple([Name('string', Store(), lineno=47, col_offset=12), Name('list', Store(), lineno=47, col_offset=20)], Store(), lineno=47, col_offset=12), Name('tests', Load(), lineno=47, col_offset=28), [Expr(Call(Attribute(Name('self', Load(), lineno=48, col_offset=12), 'assertEqual', Load(), lineno=48, col_offset=12), [Call(Attribute(Name('urllib2', Load(), lineno=48, col_offset=29), 'parse_http_list', Load(), lineno=48, col_offset=29), [Name('string', Load(), lineno=48, col_offset=53)], [], None, None, lineno=48, col_offset=29), Name('list', Load(), lineno=48, col_offset=62)], [], None, None, lineno=48, col_offset=12), lineno=48, col_offset=12)], [], lineno=47, col_offset=8)], [], lineno=42, col_offset=4)], [], lineno=16, col_offset=0), FunctionDef('test_request_headers_dict', arguments([], None, None, []), [Expr(Str('\n    The Request.headers dictionary is not a documented interface.  It should\n    stay that way, because the complete set of headers are only accessible\n    through the .get_header(), .has_header(), .header_items() interface.\n    However, .headers pre-dates those methods, and so real code will be using\n    the dictionary.\n\n    The introduction in 2.4 of those methods was a mistake for the same reason:\n    code that previously saw all (urllib2 user)-provided headers in .headers\n    now sees only a subset (and the function interface is ugly and incomplete).\n    A better change would have been to replace .headers dict with a dict\n    subclass (or UserDict.DictMixin instance?)  that preserved the .headers\n    interface and also provided access to the "unredirected" headers.  It\'s\n    probably too late to fix that, though.\n\n\n    Check .capitalize() case normalization:\n\n    >>> url = "http://example.com"\n    >>> Request(url, headers={"Spam-eggs": "blah"}).headers["Spam-eggs"]\n    \'blah\'\n    >>> Request(url, headers={"spam-EggS": "blah"}).headers["Spam-eggs"]\n    \'blah\'\n\n    Currently, Request(url, "Spam-eggs").headers["Spam-Eggs"] raises KeyError,\n    but that could be changed in future.\n\n    ', lineno=79, col_offset=-1), lineno=79, col_offset=-1)], [], lineno=51, col_offset=0), FunctionDef('test_request_headers_methods', arguments([], None, None, []), [Expr(Str('\n    Note the case normalization of header names here, to .capitalize()-case.\n    This should be preserved for backwards-compatibility.  (In the HTTP case,\n    normalization to .title()-case is done by urllib2 before sending headers to\n    httplib).\n\n    >>> url = "http://example.com"\n    >>> r = Request(url, headers={"Spam-eggs": "blah"})\n    >>> r.has_header("Spam-eggs")\n    True\n    >>> r.header_items()\n    [(\'Spam-eggs\', \'blah\')]\n    >>> r.add_header("Foo-Bar", "baz")\n    >>> items = r.header_items()\n    >>> items.sort()\n    >>> items\n    [(\'Foo-bar\', \'baz\'), (\'Spam-eggs\', \'blah\')]\n\n    Note that e.g. r.has_header("spam-EggS") is currently False, and\n    r.get_header("spam-EggS") returns None, but that could be changed in\n    future.\n\n    >>> r.has_header("Not-there")\n    False\n    >>> print r.get_header("Not-there")\n    None\n    >>> r.get_header("Not-there", "default")\n    \'default\'\n\n    ', lineno=111, col_offset=-1), lineno=111, col_offset=-1)], [], lineno=81, col_offset=0), FunctionDef('test_password_manager', arguments([Name('self', Param(), lineno=114, col_offset=26)], None, None, []), [Expr(Str('\n    >>> mgr = urllib2.HTTPPasswordMgr()\n    >>> add = mgr.add_password\n    >>> add("Some Realm", "http://example.com/", "joe", "password")\n    >>> add("Some Realm", "http://example.com/ni", "ni", "ni")\n    >>> add("c", "http://example.com/foo", "foo", "ni")\n    >>> add("c", "http://example.com/bar", "bar", "nini")\n    >>> add("b", "http://example.com/", "first", "blah")\n    >>> add("b", "http://example.com/", "second", "spam")\n    >>> add("a", "http://example.com", "1", "a")\n    >>> add("Some Realm", "http://c.example.com:3128", "3", "c")\n    >>> add("Some Realm", "d.example.com", "4", "d")\n    >>> add("Some Realm", "e.example.com:3128", "5", "e")\n\n    >>> mgr.find_user_password("Some Realm", "example.com")\n    (\'joe\', \'password\')\n    >>> mgr.find_user_password("Some Realm", "http://example.com")\n    (\'joe\', \'password\')\n    >>> mgr.find_user_password("Some Realm", "http://example.com/")\n    (\'joe\', \'password\')\n    >>> mgr.find_user_password("Some Realm", "http://example.com/spam")\n    (\'joe\', \'password\')\n    >>> mgr.find_user_password("Some Realm", "http://example.com/spam/spam")\n    (\'joe\', \'password\')\n    >>> mgr.find_user_password("c", "http://example.com/foo")\n    (\'foo\', \'ni\')\n    >>> mgr.find_user_password("c", "http://example.com/bar")\n    (\'bar\', \'nini\')\n\n    Actually, this is really undefined ATM\n##     Currently, we use the highest-level path where more than one match:\n\n##     >>> mgr.find_user_password("Some Realm", "http://example.com/ni")\n##     (\'joe\', \'password\')\n\n    Use latest add_password() in case of conflict:\n\n    >>> mgr.find_user_password("b", "http://example.com/")\n    (\'second\', \'spam\')\n\n    No special relationship between a.example.com and example.com:\n\n    >>> mgr.find_user_password("a", "http://example.com/")\n    (\'1\', \'a\')\n    >>> mgr.find_user_password("a", "http://a.example.com/")\n    (None, None)\n\n    Ports:\n\n    >>> mgr.find_user_password("Some Realm", "c.example.com")\n    (None, None)\n    >>> mgr.find_user_password("Some Realm", "c.example.com:3128")\n    (\'3\', \'c\')\n    >>> mgr.find_user_password("Some Realm", "http://c.example.com:3128")\n    (\'3\', \'c\')\n    >>> mgr.find_user_password("Some Realm", "d.example.com")\n    (\'4\', \'d\')\n    >>> mgr.find_user_password("Some Realm", "e.example.com:3128")\n    (\'5\', \'e\')\n\n    ', lineno=175, col_offset=-1), lineno=175, col_offset=-1), Pass( lineno=176, col_offset=4)], [], lineno=114, col_offset=0), FunctionDef('test_password_manager_default_port', arguments([Name('self', Param(), lineno=179, col_offset=39)], None, None, []), [Expr(Str('\n    >>> mgr = urllib2.HTTPPasswordMgr()\n    >>> add = mgr.add_password\n\n    The point to note here is that we can\'t guess the default port if there\'s\n    no scheme.  This applies to both add_password and find_user_password.\n\n    >>> add("f", "http://g.example.com:80", "10", "j")\n    >>> add("g", "http://h.example.com", "11", "k")\n    >>> add("h", "i.example.com:80", "12", "l")\n    >>> add("i", "j.example.com", "13", "m")\n    >>> mgr.find_user_password("f", "g.example.com:100")\n    (None, None)\n    >>> mgr.find_user_password("f", "g.example.com:80")\n    (\'10\', \'j\')\n    >>> mgr.find_user_password("f", "g.example.com")\n    (None, None)\n    >>> mgr.find_user_password("f", "http://g.example.com:100")\n    (None, None)\n    >>> mgr.find_user_password("f", "http://g.example.com:80")\n    (\'10\', \'j\')\n    >>> mgr.find_user_password("f", "http://g.example.com")\n    (\'10\', \'j\')\n    >>> mgr.find_user_password("g", "h.example.com")\n    (\'11\', \'k\')\n    >>> mgr.find_user_password("g", "h.example.com:80")\n    (\'11\', \'k\')\n    >>> mgr.find_user_password("g", "http://h.example.com:80")\n    (\'11\', \'k\')\n    >>> mgr.find_user_password("h", "i.example.com")\n    (None, None)\n    >>> mgr.find_user_password("h", "i.example.com:80")\n    (\'12\', \'l\')\n    >>> mgr.find_user_password("h", "http://i.example.com:80")\n    (\'12\', \'l\')\n    >>> mgr.find_user_password("i", "j.example.com")\n    (\'13\', \'m\')\n    >>> mgr.find_user_password("i", "j.example.com:80")\n    (None, None)\n    >>> mgr.find_user_password("i", "http://j.example.com")\n    (\'13\', \'m\')\n    >>> mgr.find_user_password("i", "http://j.example.com:80")\n    (None, None)\n\n    ', lineno=224, col_offset=-1), lineno=224, col_offset=-1)], [], lineno=179, col_offset=0), ClassDef('MockOpener', [], [Assign([Name('addheaders', Store(), lineno=227, col_offset=4)], List([], Load(), lineno=227, col_offset=17), lineno=227, col_offset=4), FunctionDef('open', arguments([Name('self', Param(), lineno=228, col_offset=13), Name('req', Param(), lineno=228, col_offset=19), Name('data', Param(), lineno=228, col_offset=24), Name('timeout', Param(), lineno=228, col_offset=34)], None, None, [Name('None', Load(), lineno=228, col_offset=29), Attribute(Name('socket', Load(), lineno=228, col_offset=42), '_GLOBAL_DEFAULT_TIMEOUT', Load(), lineno=228, col_offset=42)]), [Assign([Tuple([Attribute(Name('self', Load(), lineno=229, col_offset=8), 'req', Store(), lineno=229, col_offset=8), Attribute(Name('self', Load(), lineno=229, col_offset=18), 'data', Store(), lineno=229, col_offset=18), Attribute(Name('self', Load(), lineno=229, col_offset=29), 'timeout', Store(), lineno=229, col_offset=29)], Store(), lineno=229, col_offset=8)], Tuple([Name('req', Load(), lineno=229, col_offset=45), Name('data', Load(), lineno=229, col_offset=50), Name('timeout', Load(), lineno=229, col_offset=56)], Load(), lineno=229, col_offset=45), lineno=229, col_offset=8)], [], lineno=228, col_offset=4), FunctionDef('error', arguments([Name('self', Param(), lineno=230, col_offset=14), Name('proto', Param(), lineno=230, col_offset=20)], 'args', None, []), [Assign([Tuple([Attribute(Name('self', Load(), lineno=231, col_offset=8), 'proto', Store(), lineno=231, col_offset=8), Attribute(Name('self', Load(), lineno=231, col_offset=20), 'args', Store(), lineno=231, col_offset=20)], Store(), lineno=231, col_offset=8)], Tuple([Name('proto', Load(), lineno=231, col_offset=32), Name('args', Load(), lineno=231, col_offset=39)], Load(), lineno=231, col_offset=32), lineno=231, col_offset=8)], [], lineno=230, col_offset=4)], [], lineno=226, col_offset=0), ClassDef('MockFile', [], [FunctionDef('read', arguments([Name('self', Param(), lineno=234, col_offset=13), Name('count', Param(), lineno=234, col_offset=19)], None, None, [Name('None', Load(), lineno=234, col_offset=25)]), [Pass( lineno=234, col_offset=32)], [], lineno=234, col_offset=4), FunctionDef('readline', arguments([Name('self', Param(), lineno=235, col_offset=17), Name('count', Param(), lineno=235, col_offset=23)], None, None, [Name('None', Load(), lineno=235, col_offset=29)]), [Pass( lineno=235, col_offset=36)], [], lineno=235, col_offset=4), FunctionDef('close', arguments([Name('self', Param(), lineno=236, col_offset=14)], None, None, []), [Pass( lineno=236, col_offset=21)], [], lineno=236, col_offset=4)], [], lineno=233, col_offset=0), ClassDef('MockHeaders', [Name('dict', Load(), lineno=238, col_offset=18)], [FunctionDef('getheaders', arguments([Name('self', Param(), lineno=239, col_offset=19), Name('name', Param(), lineno=239, col_offset=25)], None, None, []), [Return(Call(Attribute(Name('self', Load(), lineno=240, col_offset=15), 'values', Load(), lineno=240, col_offset=15), [], [], None, None, lineno=240, col_offset=15), lineno=240, col_offset=8)], [], lineno=239, col_offset=4)], [], lineno=238, col_offset=0), ClassDef('MockResponse', [Attribute(Name('StringIO', Load(), lineno=242, col_offset=19), 'StringIO', Load(), lineno=242, col_offset=19)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=243, col_offset=17), Name('code', Param(), lineno=243, col_offset=23), Name('msg', Param(), lineno=243, col_offset=29), Name('headers', Param(), lineno=243, col_offset=34), Name('data', Param(), lineno=243, col_offset=43), Name('url', Param(), lineno=243, col_offset=49)], None, None, [Name('None', Load(), lineno=243, col_offset=53)]), [Expr(Call(Attribute(Attribute(Name('StringIO', Load(), lineno=244, col_offset=8), 'StringIO', Load(), lineno=244, col_offset=8), '__init__', Load(), lineno=244, col_offset=8), [Name('self', Load(), lineno=244, col_offset=35), Name('data', Load(), lineno=244, col_offset=41)], [], None, None, lineno=244, col_offset=8), lineno=244, col_offset=8), Assign([Tuple([Attribute(Name('self', Load(), lineno=245, col_offset=8), 'code', Store(), lineno=245, col_offset=8), Attribute(Name('self', Load(), lineno=245, col_offset=19), 'msg', Store(), lineno=245, col_offset=19), Attribute(Name('self', Load(), lineno=245, col_offset=29), 'headers', Store(), lineno=245, col_offset=29), Attribute(Name('self', Load(), lineno=245, col_offset=43), 'url', Store(), lineno=245, col_offset=43)], Store(), lineno=245, col_offset=8)], Tuple([Name('code', Load(), lineno=245, col_offset=54), Name('msg', Load(), lineno=245, col_offset=60), Name('headers', Load(), lineno=245, col_offset=65), Name('url', Load(), lineno=245, col_offset=74)], Load(), lineno=245, col_offset=54), lineno=245, col_offset=8)], [], lineno=243, col_offset=4), FunctionDef('info', arguments([Name('self', Param(), lineno=246, col_offset=13)], None, None, []), [Return(Attribute(Name('self', Load(), lineno=247, col_offset=15), 'headers', Load(), lineno=247, col_offset=15), lineno=247, col_offset=8)], [], lineno=246, col_offset=4), FunctionDef('geturl', arguments([Name('self', Param(), lineno=248, col_offset=15)], None, None, []), [Return(Attribute(Name('self', Load(), lineno=249, col_offset=15), 'url', Load(), lineno=249, col_offset=15), lineno=249, col_offset=8)], [], lineno=248, col_offset=4)], [], lineno=242, col_offset=0), ClassDef('MockCookieJar', [], [FunctionDef('add_cookie_header', arguments([Name('self', Param(), lineno=252, col_offset=26), Name('request', Param(), lineno=252, col_offset=32)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=253, col_offset=8), 'ach_req', Store(), lineno=253, col_offset=8)], Name('request', Load(), lineno=253, col_offset=23), lineno=253, col_offset=8)], [], lineno=252, col_offset=4), FunctionDef('extract_cookies', arguments([Name('self', Param(), lineno=254, col_offset=24), Name('response', Param(), lineno=254, col_offset=30), Name('request', Param(), lineno=254, col_offset=40)], None, None, []), [Assign([Tuple([Attribute(Name('self', Load(), lineno=255, col_offset=8), 'ec_req', Store(), lineno=255, col_offset=8), Attribute(Name('self', Load(), lineno=255, col_offset=21), 'ec_r', Store(), lineno=255, col_offset=21)], Store(), lineno=255, col_offset=8)], Tuple([Name('request', Load(), lineno=255, col_offset=33), Name('response', Load(), lineno=255, col_offset=42)], Load(), lineno=255, col_offset=33), lineno=255, col_offset=8)], [], lineno=254, col_offset=4)], [], lineno=251, col_offset=0), ClassDef('FakeMethod', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=258, col_offset=17), Name('meth_name', Param(), lineno=258, col_offset=23), Name('action', Param(), lineno=258, col_offset=34), Name('handle', Param(), lineno=258, col_offset=42)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=259, col_offset=8), 'meth_name', Store(), lineno=259, col_offset=8)], Name('meth_name', Load(), lineno=259, col_offset=25), lineno=259, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=260, col_offset=8), 'handle', Store(), lineno=260, col_offset=8)], Name('handle', Load(), lineno=260, col_offset=22), lineno=260, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=261, col_offset=8), 'action', Store(), lineno=261, col_offset=8)], Name('action', Load(), lineno=261, col_offset=22), lineno=261, col_offset=8)], [], lineno=258, col_offset=4), FunctionDef('__call__', arguments([Name('self', Param(), lineno=262, col_offset=17)], 'args', None, []), [Return(Call(Attribute(Name('self', Load(), lineno=263, col_offset=15), 'handle', Load(), lineno=263, col_offset=15), [Attribute(Name('self', Load(), lineno=263, col_offset=27), 'meth_name', Load(), lineno=263, col_offset=27), Attribute(Name('self', Load(), lineno=263, col_offset=43), 'action', Load(), lineno=263, col_offset=43)], [], Name('args', Load(), lineno=263, col_offset=57), None, lineno=263, col_offset=15), lineno=263, col_offset=8)], [], lineno=262, col_offset=4)], [], lineno=257, col_offset=0), ClassDef('MockHTTPResponse', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=266, col_offset=17), Name('fp', Param(), lineno=266, col_offset=23), Name('msg', Param(), lineno=266, col_offset=27), Name('status', Param(), lineno=266, col_offset=32), Name('reason', Param(), lineno=266, col_offset=40)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=267, col_offset=8), 'fp', Store(), lineno=267, col_offset=8)], Name('fp', Load(), lineno=267, col_offset=18), lineno=267, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=268, col_offset=8), 'msg', Store(), lineno=268, col_offset=8)], Name('msg', Load(), lineno=268, col_offset=19), lineno=268, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=269, col_offset=8), 'status', Store(), lineno=269, col_offset=8)], Name('status', Load(), lineno=269, col_offset=22), lineno=269, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=270, col_offset=8), 'reason', Store(), lineno=270, col_offset=8)], Name('reason', Load(), lineno=270, col_offset=22), lineno=270, col_offset=8)], [], lineno=266, col_offset=4), FunctionDef('read', arguments([Name('self', Param(), lineno=271, col_offset=13)], None, None, []), [Return(Str('', lineno=272, col_offset=15), lineno=272, col_offset=8)], [], lineno=271, col_offset=4)], [], lineno=265, col_offset=0), ClassDef('MockHTTPClass', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=275, col_offset=17)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=276, col_offset=8), 'req_headers', Store(), lineno=276, col_offset=8)], List([], Load(), lineno=276, col_offset=27), lineno=276, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=277, col_offset=8), 'data', Store(), lineno=277, col_offset=8)], Name('None', Load(), lineno=277, col_offset=20), lineno=277, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=278, col_offset=8), 'raise_on_endheaders', Store(), lineno=278, col_offset=8)], Name('False', Load(), lineno=278, col_offset=35), lineno=278, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=279, col_offset=8), '_tunnel_headers', Store(), lineno=279, col_offset=8)], Dict([], [], lineno=279, col_offset=31), lineno=279, col_offset=8)], [], lineno=275, col_offset=4), FunctionDef('__call__', arguments([Name('self', Param(), lineno=281, col_offset=17), Name('host', Param(), lineno=281, col_offset=23), Name('timeout', Param(), lineno=281, col_offset=29)], None, None, [Attribute(Name('socket', Load(), lineno=281, col_offset=37), '_GLOBAL_DEFAULT_TIMEOUT', Load(), lineno=281, col_offset=37)]), [Assign([Attribute(Name('self', Load(), lineno=282, col_offset=8), 'host', Store(), lineno=282, col_offset=8)], Name('host', Load(), lineno=282, col_offset=20), lineno=282, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=283, col_offset=8), 'timeout', Store(), lineno=283, col_offset=8)], Name('timeout', Load(), lineno=283, col_offset=23), lineno=283, col_offset=8), Return(Name('self', Load(), lineno=284, col_offset=15), lineno=284, col_offset=8)], [], lineno=281, col_offset=4), FunctionDef('set_debuglevel', arguments([Name('self', Param(), lineno=286, col_offset=23), Name('level', Param(), lineno=286, col_offset=29)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=287, col_offset=8), 'level', Store(), lineno=287, col_offset=8)], Name('level', Load(), lineno=287, col_offset=21), lineno=287, col_offset=8)], [], lineno=286, col_offset=4), FunctionDef('set_tunnel', arguments([Name('self', Param(), lineno=289, col_offset=19), Name('host', Param(), lineno=289, col_offset=25), Name('port', Param(), lineno=289, col_offset=31), Name('headers', Param(), lineno=289, col_offset=42)], None, None, [Name('None', Load(), lineno=289, col_offset=36), Name('None', Load(), lineno=289, col_offset=50)]), [Assign([Attribute(Name('self', Load(), lineno=290, col_offset=8), '_tunnel_host', Store(), lineno=290, col_offset=8)], Name('host', Load(), lineno=290, col_offset=28), lineno=290, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=291, col_offset=8), '_tunnel_port', Store(), lineno=291, col_offset=8)], Name('port', Load(), lineno=291, col_offset=28), lineno=291, col_offset=8), If(Name('headers', Load(), lineno=292, col_offset=11), [Assign([Attribute(Name('self', Load(), lineno=293, col_offset=12), '_tunnel_headers', Store(), lineno=293, col_offset=12)], Name('headers', Load(), lineno=293, col_offset=35), lineno=293, col_offset=12)], [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=295, col_offset=12), '_tunnel_headers', Load(), lineno=295, col_offset=12), 'clear', Load(), lineno=295, col_offset=12), [], [], None, None, lineno=295, col_offset=12), lineno=295, col_offset=12)], lineno=292, col_offset=8)], [], lineno=289, col_offset=4), FunctionDef('request', arguments([Name('self', Param(), lineno=296, col_offset=16), Name('method', Param(), lineno=296, col_offset=22), Name('url', Param(), lineno=296, col_offset=30), Name('body', Param(), lineno=296, col_offset=35), Name('headers', Param(), lineno=296, col_offset=46)], None, None, [Name('None', Load(), lineno=296, col_offset=40), Name('None', Load(), lineno=296, col_offset=54)]), [Assign([Attribute(Name('self', Load(), lineno=297, col_offset=8), 'method', Store(), lineno=297, col_offset=8)], Name('method', Load(), lineno=297, col_offset=22), lineno=297, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=298, col_offset=8), 'selector', Store(), lineno=298, col_offset=8)], Name('url', Load(), lineno=298, col_offset=24), lineno=298, col_offset=8), If(Compare(Name('headers', Load(), lineno=299, col_offset=11), [IsNot()], [Name('None', Load(), lineno=299, col_offset=26)], lineno=299, col_offset=11), [AugAssign(Attribute(Name('self', Load(), lineno=300, col_offset=12), 'req_headers', Store(), lineno=300, col_offset=12), Add(), Call(Attribute(Name('headers', Load(), lineno=300, col_offset=32), 'items', Load(), lineno=300, col_offset=32), [], [], None, None, lineno=300, col_offset=32), lineno=300, col_offset=12)], [], lineno=299, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=301, col_offset=8), 'req_headers', Load(), lineno=301, col_offset=8), 'sort', Load(), lineno=301, col_offset=8), [], [], None, None, lineno=301, col_offset=8), lineno=301, col_offset=8), If(Name('body', Load(), lineno=302, col_offset=11), [Assign([Attribute(Name('self', Load(), lineno=303, col_offset=12), 'data', Store(), lineno=303, col_offset=12)], Name('body', Load(), lineno=303, col_offset=24), lineno=303, col_offset=12)], [], lineno=302, col_offset=8), If(Attribute(Name('self', Load(), lineno=304, col_offset=11), 'raise_on_endheaders', Load(), lineno=304, col_offset=11), [Import([alias('socket', None)], lineno=305, col_offset=12), Raise(Call(Attribute(Name('socket', Load(), lineno=306, col_offset=18), 'error', Load(), lineno=306, col_offset=18), [], [], None, None, lineno=306, col_offset=18), None, None, lineno=306, col_offset=12)], [], lineno=304, col_offset=8)], [], lineno=296, col_offset=4), FunctionDef('getresponse', arguments([Name('self', Param(), lineno=307, col_offset=20)], None, None, []), [Return(Call(Name('MockHTTPResponse', Load(), lineno=308, col_offset=15), [Call(Name('MockFile', Load(), lineno=308, col_offset=32), [], [], None, None, lineno=308, col_offset=32), Dict([], [], lineno=308, col_offset=44), Num(200, lineno=308, col_offset=48), Str('OK', lineno=308, col_offset=53)], [], None, None, lineno=308, col_offset=15), lineno=308, col_offset=8)], [], lineno=307, col_offset=4)], [], lineno=274, col_offset=0), ClassDef('MockHandler', [], [Assign([Name('handler_order', Store(), lineno=313, col_offset=4)], Num(500, lineno=313, col_offset=20), lineno=313, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=314, col_offset=17), Name('methods', Param(), lineno=314, col_offset=23)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=315, col_offset=8), '_define_methods', Load(), lineno=315, col_offset=8), [Name('methods', Load(), lineno=315, col_offset=29)], [], None, None, lineno=315, col_offset=8), lineno=315, col_offset=8)], [], lineno=314, col_offset=4), FunctionDef('_define_methods', arguments([Name('self', Param(), lineno=316, col_offset=24), Name('methods', Param(), lineno=316, col_offset=30)], None, None, []), [For(Name('spec', Store(), lineno=317, col_offset=12), Name('methods', Load(), lineno=317, col_offset=20), [If(Compare(Call(Name('len', Load(), lineno=318, col_offset=15), [Name('spec', Load(), lineno=318, col_offset=19)], [], None, None, lineno=318, col_offset=15), [Eq()], [Num(2, lineno=318, col_offset=28)], lineno=318, col_offset=15), [Assign([Tuple([Name('name', Store(), lineno=318, col_offset=31), Name('action', Store(), lineno=318, col_offset=37)], Store(), lineno=318, col_offset=31)], Name('spec', Load(), lineno=318, col_offset=46), lineno=318, col_offset=31)], [Assign([Tuple([Name('name', Store(), lineno=319, col_offset=18), Name('action', Store(), lineno=319, col_offset=24)], Store(), lineno=319, col_offset=18)], Tuple([Name('spec', Load(), lineno=319, col_offset=33), Name('None', Load(), lineno=319, col_offset=39)], Load(), lineno=319, col_offset=33), lineno=319, col_offset=18)], lineno=318, col_offset=12), Assign([Name('meth', Store(), lineno=320, col_offset=12)], Call(Name('FakeMethod', Load(), lineno=320, col_offset=19), [Name('name', Load(), lineno=320, col_offset=30), Name('action', Load(), lineno=320, col_offset=36), Attribute(Name('self', Load(), lineno=320, col_offset=44), 'handle', Load(), lineno=320, col_offset=44)], [], None, None, lineno=320, col_offset=19), lineno=320, col_offset=12), Expr(Call(Name('setattr', Load(), lineno=321, col_offset=12), [Attribute(Name('self', Load(), lineno=321, col_offset=20), '__class__', Load(), lineno=321, col_offset=20), Name('name', Load(), lineno=321, col_offset=36), Name('meth', Load(), lineno=321, col_offset=42)], [], None, None, lineno=321, col_offset=12), lineno=321, col_offset=12)], [], lineno=317, col_offset=8)], [], lineno=316, col_offset=4), FunctionDef('handle', arguments([Name('self', Param(), lineno=322, col_offset=15), Name('fn_name', Param(), lineno=322, col_offset=21), Name('action', Param(), lineno=322, col_offset=30)], 'args', 'kwds', []), [Expr(Call(Attribute(Attribute(Attribute(Name('self', Load(), lineno=323, col_offset=8), 'parent', Load(), lineno=323, col_offset=8), 'calls', Load(), lineno=323, col_offset=8), 'append', Load(), lineno=323, col_offset=8), [Tuple([Name('self', Load(), lineno=323, col_offset=34), Name('fn_name', Load(), lineno=323, col_offset=40), Name('args', Load(), lineno=323, col_offset=49), Name('kwds', Load(), lineno=323, col_offset=55)], Load(), lineno=323, col_offset=34)], [], None, None, lineno=323, col_offset=8), lineno=323, col_offset=8), If(Compare(Name('action', Load(), lineno=324, col_offset=11), [Is()], [Name('None', Load(), lineno=324, col_offset=21)], lineno=324, col_offset=11), [Return(Name('None', Load(), lineno=325, col_offset=19), lineno=325, col_offset=12)], [If(Compare(Name('action', Load(), lineno=326, col_offset=13), [Eq()], [Str('return self', lineno=326, col_offset=23)], lineno=326, col_offset=13), [Return(Name('self', Load(), lineno=327, col_offset=19), lineno=327, col_offset=12)], [If(Compare(Name('action', Load(), lineno=328, col_offset=13), [Eq()], [Str('return response', lineno=328, col_offset=23)], lineno=328, col_offset=13), [Assign([Name('res', Store(), lineno=329, col_offset=12)], Call(Name('MockResponse', Load(), lineno=329, col_offset=18), [Num(200, lineno=329, col_offset=31), Str('OK', lineno=329, col_offset=36), Dict([], [], lineno=329, col_offset=42), Str('', lineno=329, col_offset=46)], [], None, None, lineno=329, col_offset=18), lineno=329, col_offset=12), Return(Name('res', Load(), lineno=330, col_offset=19), lineno=330, col_offset=12)], [If(Compare(Name('action', Load(), lineno=331, col_offset=13), [Eq()], [Str('return request', lineno=331, col_offset=23)], lineno=331, col_offset=13), [Return(Call(Name('Request', Load(), lineno=332, col_offset=19), [Str('http://blah/', lineno=332, col_offset=27)], [], None, None, lineno=332, col_offset=19), lineno=332, col_offset=12)], [If(Call(Attribute(Name('action', Load(), lineno=333, col_offset=13), 'startswith', Load(), lineno=333, col_offset=13), [Str('error', lineno=333, col_offset=31)], [], None, None, lineno=333, col_offset=13), [Assign([Name('code', Store(), lineno=334, col_offset=12)], Subscript(Name('action', Load(), lineno=334, col_offset=19), Slice(BinOp(Call(Attribute(Name('action', Load(), lineno=334, col_offset=26), 'rfind', Load(), lineno=334, col_offset=26), [Str(' ', lineno=334, col_offset=39)], [], None, None, lineno=334, col_offset=26), Add(), Num(1, lineno=334, col_offset=44), lineno=334, col_offset=26), None, None), Load(), lineno=334, col_offset=19), lineno=334, col_offset=12), TryExcept([Assign([Name('code', Store(), lineno=336, col_offset=16)], Call(Name('int', Load(), lineno=336, col_offset=23), [Name('code', Load(), lineno=336, col_offset=27)], [], None, None, lineno=336, col_offset=23), lineno=336, col_offset=16)], [ExceptHandler(Name('ValueError', Load(), lineno=337, col_offset=19), None, [Pass( lineno=338, col_offset=16)], lineno=337, col_offset=12)], [], lineno=335, col_offset=12), Assign([Name('res', Store(), lineno=339, col_offset=12)], Call(Name('MockResponse', Load(), lineno=339, col_offset=18), [Num(200, lineno=339, col_offset=31), Str('OK', lineno=339, col_offset=36), Dict([], [], lineno=339, col_offset=42), Str('', lineno=339, col_offset=46)], [], None, None, lineno=339, col_offset=18), lineno=339, col_offset=12), Return(Call(Attribute(Attribute(Name('self', Load(), lineno=340, col_offset=19), 'parent', Load(), lineno=340, col_offset=19), 'error', Load(), lineno=340, col_offset=19), [Str('http', lineno=340, col_offset=37), Subscript(Name('args', Load(), lineno=340, col_offset=45), Index(Num(0, lineno=340, col_offset=50)), Load(), lineno=340, col_offset=45), Name('res', Load(), lineno=340, col_offset=54), Name('code', Load(), lineno=340, col_offset=59), Str('', lineno=340, col_offset=65), Dict([], [], lineno=340, col_offset=69)], [], None, None, lineno=340, col_offset=19), lineno=340, col_offset=12)], [If(Compare(Name('action', Load(), lineno=341, col_offset=13), [Eq()], [Str('raise', lineno=341, col_offset=23)], lineno=341, col_offset=13), [Raise(Call(Attribute(Name('urllib2', Load(), lineno=342, col_offset=18), 'URLError', Load(), lineno=342, col_offset=18), [Str('blah', lineno=342, col_offset=35)], [], None, None, lineno=342, col_offset=18), None, None, lineno=342, col_offset=12)], [], lineno=341, col_offset=13)], lineno=333, col_offset=13)], lineno=331, col_offset=13)], lineno=328, col_offset=13)], lineno=326, col_offset=13)], lineno=324, col_offset=8), Assert(Name('False', Load(), lineno=343, col_offset=15), None, lineno=343, col_offset=8)], [], lineno=322, col_offset=4), FunctionDef('close', arguments([Name('self', Param(), lineno=344, col_offset=14)], None, None, []), [Pass( lineno=344, col_offset=21)], [], lineno=344, col_offset=4), FunctionDef('add_parent', arguments([Name('self', Param(), lineno=345, col_offset=19), Name('parent', Param(), lineno=345, col_offset=25)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=346, col_offset=8), 'parent', Store(), lineno=346, col_offset=8)], Name('parent', Load(), lineno=346, col_offset=22), lineno=346, col_offset=8), Assign([Attribute(Attribute(Name('self', Load(), lineno=347, col_offset=8), 'parent', Load(), lineno=347, col_offset=8), 'calls', Store(), lineno=347, col_offset=8)], List([], Load(), lineno=347, col_offset=28), lineno=347, col_offset=8)], [], lineno=345, col_offset=4), FunctionDef('__lt__', arguments([Name('self', Param(), lineno=348, col_offset=15), Name('other', Param(), lineno=348, col_offset=21)], None, None, []), [If(UnaryOp(Not(), Call(Name('hasattr', Load(), lineno=349, col_offset=15), [Name('other', Load(), lineno=349, col_offset=23), Str('handler_order', lineno=349, col_offset=30)], [], None, None, lineno=349, col_offset=15), lineno=349, col_offset=11), [Return(Name('True', Load(), lineno=351, col_offset=19), lineno=351, col_offset=12)], [], lineno=349, col_offset=8), Return(Compare(Attribute(Name('self', Load(), lineno=352, col_offset=15), 'handler_order', Load(), lineno=352, col_offset=15), [Lt()], [Attribute(Name('other', Load(), lineno=352, col_offset=36), 'handler_order', Load(), lineno=352, col_offset=36)], lineno=352, col_offset=15), lineno=352, col_offset=8)], [], lineno=348, col_offset=4)], [], lineno=310, col_offset=0), FunctionDef('add_ordered_mock_handlers', arguments([Name('opener', Param(), lineno=354, col_offset=30), Name('meth_spec', Param(), lineno=354, col_offset=38)], None, None, []), [Expr(Str('Create MockHandlers and add them to an OpenerDirector.\n\n    meth_spec: list of lists of tuples and strings defining methods to define\n    on handlers.  eg:\n\n    [["http_error", "ftp_open"], ["http_open"]]\n\n    defines methods .http_error() and .ftp_open() on one handler, and\n    .http_open() on another.  These methods just record their arguments and\n    return None.  Using a tuple instead of a string causes the method to\n    perform some action (see MockHandler.handle()), eg:\n\n    [["http_error"], [("http_open", "return request")]]\n\n    defines .http_error() on one handler (which simply returns None), and\n    .http_open() on another handler, which returns a Request object.\n\n    ', lineno=372, col_offset=-1), lineno=372, col_offset=-1), Assign([Name('handlers', Store(), lineno=373, col_offset=4)], List([], Load(), lineno=373, col_offset=15), lineno=373, col_offset=4), Assign([Name('count', Store(), lineno=374, col_offset=4)], Num(0, lineno=374, col_offset=12), lineno=374, col_offset=4), For(Name('meths', Store(), lineno=375, col_offset=8), Name('meth_spec', Load(), lineno=375, col_offset=17), [ClassDef('MockHandlerSubclass', [Name('MockHandler', Load(), lineno=376, col_offset=34)], [Pass( lineno=376, col_offset=48)], [], lineno=376, col_offset=8), Assign([Name('h', Store(), lineno=377, col_offset=8)], Call(Name('MockHandlerSubclass', Load(), lineno=377, col_offset=12), [Name('meths', Load(), lineno=377, col_offset=32)], [], None, None, lineno=377, col_offset=12), lineno=377, col_offset=8), AugAssign(Attribute(Name('h', Load(), lineno=378, col_offset=8), 'handler_order', Store(), lineno=378, col_offset=8), Add(), Name('count', Load(), lineno=378, col_offset=27), lineno=378, col_offset=8), Expr(Call(Attribute(Name('h', Load(), lineno=379, col_offset=8), 'add_parent', Load(), lineno=379, col_offset=8), [Name('opener', Load(), lineno=379, col_offset=21)], [], None, None, lineno=379, col_offset=8), lineno=379, col_offset=8), Assign([Name('count', Store(), lineno=380, col_offset=8)], BinOp(Name('count', Load(), lineno=380, col_offset=16), Add(), Num(1, lineno=380, col_offset=24), lineno=380, col_offset=16), lineno=380, col_offset=8), Expr(Call(Attribute(Name('handlers', Load(), lineno=381, col_offset=8), 'append', Load(), lineno=381, col_offset=8), [Name('h', Load(), lineno=381, col_offset=24)], [], None, None, lineno=381, col_offset=8), lineno=381, col_offset=8), Expr(Call(Attribute(Name('opener', Load(), lineno=382, col_offset=8), 'add_handler', Load(), lineno=382, col_offset=8), [Name('h', Load(), lineno=382, col_offset=27)], [], None, None, lineno=382, col_offset=8), lineno=382, col_offset=8)], [], lineno=375, col_offset=4), Return(Name('handlers', Load(), lineno=383, col_offset=11), lineno=383, col_offset=4)], [], lineno=354, col_offset=0), FunctionDef('build_test_opener', arguments([], 'handler_instances', None, []), [Assign([Name('opener', Store(), lineno=386, col_offset=4)], Call(Name('OpenerDirector', Load(), lineno=386, col_offset=13), [], [], None, None, lineno=386, col_offset=13), lineno=386, col_offset=4), For(Name('h', Store(), lineno=387, col_offset=8), Name('handler_instances', Load(), lineno=387, col_offset=13), [Expr(Call(Attribute(Name('opener', Load(), lineno=388, col_offset=8), 'add_handler', Load(), lineno=388, col_offset=8), [Name('h', Load(), lineno=388, col_offset=27)], [], None, None, lineno=388, col_offset=8), lineno=388, col_offset=8)], [], lineno=387, col_offset=4), Return(Name('opener', Load(), lineno=389, col_offset=11), lineno=389, col_offset=4)], [], lineno=385, col_offset=0), ClassDef('MockHTTPHandler', [Attribute(Name('urllib2', Load(), lineno=391, col_offset=22), 'BaseHandler', Load(), lineno=391, col_offset=22)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=395, col_offset=17), Name('code', Param(), lineno=395, col_offset=23), Name('headers', Param(), lineno=395, col_offset=29)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=396, col_offset=8), 'code', Store(), lineno=396, col_offset=8)], Name('code', Load(), lineno=396, col_offset=20), lineno=396, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=397, col_offset=8), 'headers', Store(), lineno=397, col_offset=8)], Name('headers', Load(), lineno=397, col_offset=23), lineno=397, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=398, col_offset=8), 'reset', Load(), lineno=398, col_offset=8), [], [], None, None, lineno=398, col_offset=8), lineno=398, col_offset=8)], [], lineno=395, col_offset=4), FunctionDef('reset', arguments([Name('self', Param(), lineno=399, col_offset=14)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=400, col_offset=8), '_count', Store(), lineno=400, col_offset=8)], Num(0, lineno=400, col_offset=22), lineno=400, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=401, col_offset=8), 'requests', Store(), lineno=401, col_offset=8)], List([], Load(), lineno=401, col_offset=24), lineno=401, col_offset=8)], [], lineno=399, col_offset=4), FunctionDef('http_open', arguments([Name('self', Param(), lineno=402, col_offset=18), Name('req', Param(), lineno=402, col_offset=24)], None, None, []), [Import([alias('mimetools', None), alias('httplib', None), alias('copy', None)], lineno=403, col_offset=8), ImportFrom('StringIO', [alias('StringIO', None)], 0, lineno=404, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=405, col_offset=8), 'requests', Load(), lineno=405, col_offset=8), 'append', Load(), lineno=405, col_offset=8), [Call(Attribute(Name('copy', Load(), lineno=405, col_offset=29), 'deepcopy', Load(), lineno=405, col_offset=29), [Name('req', Load(), lineno=405, col_offset=43)], [], None, None, lineno=405, col_offset=29)], [], None, None, lineno=405, col_offset=8), lineno=405, col_offset=8), If(Compare(Attribute(Name('self', Load(), lineno=406, col_offset=11), '_count', Load(), lineno=406, col_offset=11), [Eq()], [Num(0, lineno=406, col_offset=26)], lineno=406, col_offset=11), [Assign([Attribute(Name('self', Load(), lineno=407, col_offset=12), '_count', Store(), lineno=407, col_offset=12)], BinOp(Attribute(Name('self', Load(), lineno=407, col_offset=26), '_count', Load(), lineno=407, col_offset=26), Add(), Num(1, lineno=407, col_offset=40), lineno=407, col_offset=26), lineno=407, col_offset=12), Assign([Name('name', Store(), lineno=408, col_offset=12)], Subscript(Attribute(Name('httplib', Load(), lineno=408, col_offset=19), 'responses', Load(), lineno=408, col_offset=19), Index(Attribute(Name('self', Load(), lineno=408, col_offset=37), 'code', Load(), lineno=408, col_offset=37)), Load(), lineno=408, col_offset=19), lineno=408, col_offset=12), Assign([Name('msg', Store(), lineno=409, col_offset=12)], Call(Attribute(Name('mimetools', Load(), lineno=409, col_offset=18), 'Message', Load(), lineno=409, col_offset=18), [Call(Name('StringIO', Load(), lineno=409, col_offset=36), [Attribute(Name('self', Load(), lineno=409, col_offset=45), 'headers', Load(), lineno=409, col_offset=45)], [], None, None, lineno=409, col_offset=36)], [], None, None, lineno=409, col_offset=18), lineno=409, col_offset=12), Return(Call(Attribute(Attribute(Name('self', Load(), lineno=410, col_offset=19), 'parent', Load(), lineno=410, col_offset=19), 'error', Load(), lineno=410, col_offset=19), [Str('http', lineno=411, col_offset=16), Name('req', Load(), lineno=411, col_offset=24), Call(Name('MockFile', Load(), lineno=411, col_offset=29), [], [], None, None, lineno=411, col_offset=29), Attribute(Name('self', Load(), lineno=411, col_offset=41), 'code', Load(), lineno=411, col_offset=41), Name('name', Load(), lineno=411, col_offset=52), Name('msg', Load(), lineno=411, col_offset=58)], [], None, None, lineno=410, col_offset=19), lineno=410, col_offset=12)], [Assign([Attribute(Name('self', Load(), lineno=413, col_offset=12), 'req', Store(), lineno=413, col_offset=12)], Name('req', Load(), lineno=413, col_offset=23), lineno=413, col_offset=12), Assign([Name('msg', Store(), lineno=414, col_offset=12)], Call(Attribute(Name('mimetools', Load(), lineno=414, col_offset=18), 'Message', Load(), lineno=414, col_offset=18), [Call(Name('StringIO', Load(), lineno=414, col_offset=36), [Str('\r\n\r\n', lineno=414, col_offset=45)], [], None, None, lineno=414, col_offset=36)], [], None, None, lineno=414, col_offset=18), lineno=414, col_offset=12), Return(Call(Name('MockResponse', Load(), lineno=415, col_offset=19), [Num(200, lineno=415, col_offset=32), Str('OK', lineno=415, col_offset=37), Name('msg', Load(), lineno=415, col_offset=43), Str('', lineno=415, col_offset=48), Call(Attribute(Name('req', Load(), lineno=415, col_offset=52), 'get_full_url', Load(), lineno=415, col_offset=52), [], [], None, None, lineno=415, col_offset=52)], [], None, None, lineno=415, col_offset=19), lineno=415, col_offset=12)], lineno=406, col_offset=8)], [], lineno=402, col_offset=4)], [], lineno=391, col_offset=0), ClassDef('MockHTTPSHandler', [Attribute(Name('urllib2', Load(), lineno=417, col_offset=23), 'AbstractHTTPHandler', Load(), lineno=417, col_offset=23)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=421, col_offset=17)], None, None, []), [Expr(Call(Attribute(Attribute(Name('urllib2', Load(), lineno=422, col_offset=8), 'AbstractHTTPHandler', Load(), lineno=422, col_offset=8), '__init__', Load(), lineno=422, col_offset=8), [Name('self', Load(), lineno=422, col_offset=45)], [], None, None, lineno=422, col_offset=8), lineno=422, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=423, col_offset=8), 'httpconn', Store(), lineno=423, col_offset=8)], Call(Name('MockHTTPClass', Load(), lineno=423, col_offset=24), [], [], None, None, lineno=423, col_offset=24), lineno=423, col_offset=8)], [], lineno=421, col_offset=4), FunctionDef('https_open', arguments([Name('self', Param(), lineno=425, col_offset=19), Name('req', Param(), lineno=425, col_offset=25)], None, None, []), [Return(Call(Attribute(Name('self', Load(), lineno=426, col_offset=15), 'do_open', Load(), lineno=426, col_offset=15), [Attribute(Name('self', Load(), lineno=426, col_offset=28), 'httpconn', Load(), lineno=426, col_offset=28), Name('req', Load(), lineno=426, col_offset=43)], [], None, None, lineno=426, col_offset=15), lineno=426, col_offset=8)], [], lineno=425, col_offset=4)], [], lineno=417, col_offset=0), ClassDef('MockPasswordManager', [], [FunctionDef('add_password', arguments([Name('self', Param(), lineno=429, col_offset=21), Name('realm', Param(), lineno=429, col_offset=27), Name('uri', Param(), lineno=429, col_offset=34), Name('user', Param(), lineno=429, col_offset=39), Name('password', Param(), lineno=429, col_offset=45)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=430, col_offset=8), 'realm', Store(), lineno=430, col_offset=8)], Name('realm', Load(), lineno=430, col_offset=21), lineno=430, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=431, col_offset=8), 'url', Store(), lineno=431, col_offset=8)], Name('uri', Load(), lineno=431, col_offset=19), lineno=431, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=432, col_offset=8), 'user', Store(), lineno=432, col_offset=8)], Name('user', Load(), lineno=432, col_offset=20), lineno=432, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=433, col_offset=8), 'password', Store(), lineno=433, col_offset=8)], Name('password', Load(), lineno=433, col_offset=24), lineno=433, col_offset=8)], [], lineno=429, col_offset=4), FunctionDef('find_user_password', arguments([Name('self', Param(), lineno=434, col_offset=27), Name('realm', Param(), lineno=434, col_offset=33), Name('authuri', Param(), lineno=434, col_offset=40)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=435, col_offset=8), 'target_realm', Store(), lineno=435, col_offset=8)], Name('realm', Load(), lineno=435, col_offset=28), lineno=435, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=436, col_offset=8), 'target_url', Store(), lineno=436, col_offset=8)], Name('authuri', Load(), lineno=436, col_offset=26), lineno=436, col_offset=8), Return(Tuple([Attribute(Name('self', Load(), lineno=437, col_offset=15), 'user', Load(), lineno=437, col_offset=15), Attribute(Name('self', Load(), lineno=437, col_offset=26), 'password', Load(), lineno=437, col_offset=26)], Load(), lineno=437, col_offset=15), lineno=437, col_offset=8)], [], lineno=434, col_offset=4)], [], lineno=428, col_offset=0), ClassDef('OpenerDirectorTests', [Attribute(Name('unittest', Load(), lineno=440, col_offset=26), 'TestCase', Load(), lineno=440, col_offset=26)], [FunctionDef('test_add_non_handler', arguments([Name('self', Param(), lineno=442, col_offset=29)], None, None, []), [ClassDef('NonHandler', [Name('object', Load(), lineno=443, col_offset=25)], [Pass( lineno=444, col_offset=12)], [], lineno=443, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=445, col_offset=8), 'assertRaises', Load(), lineno=445, col_offset=8), [Name('TypeError', Load(), lineno=445, col_offset=26), Attribute(Call(Name('OpenerDirector', Load(), lineno=446, col_offset=26), [], [], None, None, lineno=446, col_offset=26), 'add_handler', Load(), lineno=446, col_offset=26), Call(Name('NonHandler', Load(), lineno=446, col_offset=56), [], [], None, None, lineno=446, col_offset=56)], [], None, None, lineno=445, col_offset=8), lineno=445, col_offset=8)], [], lineno=442, col_offset=4), FunctionDef('test_badly_named_methods', arguments([Name('self', Param(), lineno=448, col_offset=33)], None, None, []), [ImportFrom('urllib2', [alias('URLError', None)], 0, lineno=457, col_offset=8), Assign([Name('o', Store(), lineno=459, col_offset=8)], Call(Name('OpenerDirector', Load(), lineno=459, col_offset=12), [], [], None, None, lineno=459, col_offset=12), lineno=459, col_offset=8), Assign([Name('meth_spec', Store(), lineno=460, col_offset=8)], List([List([Tuple([Str('do_open', lineno=461, col_offset=14), Str('return self', lineno=461, col_offset=25)], Load(), lineno=461, col_offset=14), Tuple([Str('proxy_open', lineno=461, col_offset=42), Str('return self', lineno=461, col_offset=56)], Load(), lineno=461, col_offset=42)], Load(), lineno=461, col_offset=12), List([Tuple([Str('redirect_request', lineno=462, col_offset=14), Str('return self', lineno=462, col_offset=34)], Load(), lineno=462, col_offset=14)], Load(), lineno=462, col_offset=12)], Load(), lineno=460, col_offset=20), lineno=460, col_offset=8), Assign([Name('handlers', Store(), lineno=464, col_offset=8)], Call(Name('add_ordered_mock_handlers', Load(), lineno=464, col_offset=19), [Name('o', Load(), lineno=464, col_offset=45), Name('meth_spec', Load(), lineno=464, col_offset=48)], [], None, None, lineno=464, col_offset=19), lineno=464, col_offset=8), Expr(Call(Attribute(Name('o', Load(), lineno=465, col_offset=8), 'add_handler', Load(), lineno=465, col_offset=8), [Call(Attribute(Name('urllib2', Load(), lineno=465, col_offset=22), 'UnknownHandler', Load(), lineno=465, col_offset=22), [], [], None, None, lineno=465, col_offset=22)], [], None, None, lineno=465, col_offset=8), lineno=465, col_offset=8), For(Name('scheme', Store(), lineno=466, col_offset=12), Tuple([Str('do', lineno=466, col_offset=22), Str('proxy', lineno=466, col_offset=28), Str('redirect', lineno=466, col_offset=37)], Load(), lineno=466, col_offset=22), [Expr(Call(Attribute(Name('self', Load(), lineno=467, col_offset=12), 'assertRaises', Load(), lineno=467, col_offset=12), [Name('URLError', Load(), lineno=467, col_offset=30), Attribute(Name('o', Load(), lineno=467, col_offset=40), 'open', Load(), lineno=467, col_offset=40), BinOp(Name('scheme', Load(), lineno=467, col_offset=48), Add(), Str('://example.com/', lineno=467, col_offset=55), lineno=467, col_offset=48)], [], None, None, lineno=467, col_offset=12), lineno=467, col_offset=12)], [], lineno=466, col_offset=8)], [], lineno=448, col_offset=4), FunctionDef('test_handled', arguments([Name('self', Param(), lineno=469, col_offset=21)], None, None, []), [Assign([Name('o', Store(), lineno=471, col_offset=8)], Call(Name('OpenerDirector', Load(), lineno=471, col_offset=12), [], [], None, None, lineno=471, col_offset=12), lineno=471, col_offset=8), Assign([Name('meth_spec', Store(), lineno=472, col_offset=8)], List([List([Str('http_open', lineno=473, col_offset=13), Str('ftp_open', lineno=473, col_offset=26), Str('http_error_302', lineno=473, col_offset=38)], Load(), lineno=473, col_offset=12), List([Str('ftp_open', lineno=474, col_offset=13)], Load(), lineno=474, col_offset=12), List([Tuple([Str('http_open', lineno=475, col_offset=14), Str('return self', lineno=475, col_offset=27)], Load(), lineno=475, col_offset=14)], Load(), lineno=475, col_offset=12), List([Tuple([Str('http_open', lineno=476, col_offset=14), Str('return self', lineno=476, col_offset=27)], Load(), lineno=476, col_offset=14)], Load(), lineno=476, col_offset=12)], Load(), lineno=472, col_offset=20), lineno=472, col_offset=8), Assign([Name('handlers', Store(), lineno=478, col_offset=8)], Call(Name('add_ordered_mock_handlers', Load(), lineno=478, col_offset=19), [Name('o', Load(), lineno=478, col_offset=45), Name('meth_spec', Load(), lineno=478, col_offset=48)], [], None, None, lineno=478, col_offset=19), lineno=478, col_offset=8), Assign([Name('req', Store(), lineno=480, col_offset=8)], Call(Name('Request', Load(), lineno=480, col_offset=14), [Str('http://example.com/', lineno=480, col_offset=22)], [], None, None, lineno=480, col_offset=14), lineno=480, col_offset=8), Assign([Name('r', Store(), lineno=481, col_offset=8)], Call(Attribute(Name('o', Load(), lineno=481, col_offset=12), 'open', Load(), lineno=481, col_offset=12), [Name('req', Load(), lineno=481, col_offset=19)], [], None, None, lineno=481, col_offset=12), lineno=481, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=488, col_offset=8), 'assertEqual', Load(), lineno=488, col_offset=8), [Name('r', Load(), lineno=488, col_offset=25), Subscript(Name('handlers', Load(), lineno=488, col_offset=28), Index(Num(2, lineno=488, col_offset=37)), Load(), lineno=488, col_offset=28)], [], None, None, lineno=488, col_offset=8), lineno=488, col_offset=8), Assign([Name('calls', Store(), lineno=489, col_offset=8)], List([Tuple([Subscript(Name('handlers', Load(), lineno=489, col_offset=18), Index(Num(0, lineno=489, col_offset=27)), Load(), lineno=489, col_offset=18), Str('http_open', lineno=489, col_offset=31)], Load(), lineno=489, col_offset=18), Tuple([Subscript(Name('handlers', Load(), lineno=489, col_offset=46), Index(Num(2, lineno=489, col_offset=55)), Load(), lineno=489, col_offset=46), Str('http_open', lineno=489, col_offset=59)], Load(), lineno=489, col_offset=46)], Load(), lineno=489, col_offset=16), lineno=489, col_offset=8), For(Tuple([Name('expected', Store(), lineno=490, col_offset=12), Name('got', Store(), lineno=490, col_offset=22)], Store(), lineno=490, col_offset=12), Call(Name('zip', Load(), lineno=490, col_offset=29), [Name('calls', Load(), lineno=490, col_offset=33), Attribute(Name('o', Load(), lineno=490, col_offset=40), 'calls', Load(), lineno=490, col_offset=40)], [], None, None, lineno=490, col_offset=29), [Assign([Tuple([Name('handler', Store(), lineno=491, col_offset=12), Name('name', Store(), lineno=491, col_offset=21), Name('args', Store(), lineno=491, col_offset=27), Name('kwds', Store(), lineno=491, col_offset=33)], Store(), lineno=491, col_offset=12)], Name('got', Load(), lineno=491, col_offset=40), lineno=491, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=492, col_offset=12), 'assertEqual', Load(), lineno=492, col_offset=12), [Tuple([Name('handler', Load(), lineno=492, col_offset=30), Name('name', Load(), lineno=492, col_offset=39)], Load(), lineno=492, col_offset=30), Name('expected', Load(), lineno=492, col_offset=46)], [], None, None, lineno=492, col_offset=12), lineno=492, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=493, col_offset=12), 'assertEqual', Load(), lineno=493, col_offset=12), [Name('args', Load(), lineno=493, col_offset=29), Tuple([Name('req', Load(), lineno=493, col_offset=36)], Load(), lineno=493, col_offset=36)], [], None, None, lineno=493, col_offset=12), lineno=493, col_offset=12)], [], lineno=490, col_offset=8)], [], lineno=469, col_offset=4), FunctionDef('test_handler_order', arguments([Name('self', Param(), lineno=495, col_offset=27)], None, None, []), [Assign([Name('o', Store(), lineno=496, col_offset=8)], Call(Name('OpenerDirector', Load(), lineno=496, col_offset=12), [], [], None, None, lineno=496, col_offset=12), lineno=496, col_offset=8), Assign([Name('handlers', Store(), lineno=497, col_offset=8)], List([], Load(), lineno=497, col_offset=19), lineno=497, col_offset=8), For(Tuple([Name('meths', Store(), lineno=498, col_offset=12), Name('handler_order', Store(), lineno=498, col_offset=19)], Store(), lineno=498, col_offset=12), List([Tuple([List([Tuple([Str('http_open', lineno=499, col_offset=15), Str('return self', lineno=499, col_offset=28)], Load(), lineno=499, col_offset=15)], Load(), lineno=499, col_offset=13), Num(500, lineno=499, col_offset=45)], Load(), lineno=499, col_offset=13), Tuple([List([Str('http_open', lineno=500, col_offset=14)], Load(), lineno=500, col_offset=13), Num(0, lineno=500, col_offset=28)], Load(), lineno=500, col_offset=13)], Load(), lineno=498, col_offset=36), [ClassDef('MockHandlerSubclass', [Name('MockHandler', Load(), lineno=502, col_offset=38)], [Pass( lineno=502, col_offset=52)], [], lineno=502, col_offset=12), Assign([Name('h', Store(), lineno=503, col_offset=12)], Call(Name('MockHandlerSubclass', Load(), lineno=503, col_offset=16), [Name('meths', Load(), lineno=503, col_offset=36)], [], None, None, lineno=503, col_offset=16), lineno=503, col_offset=12), Assign([Attribute(Name('h', Load(), lineno=504, col_offset=12), 'handler_order', Store(), lineno=504, col_offset=12)], Name('handler_order', Load(), lineno=504, col_offset=30), lineno=504, col_offset=12), Expr(Call(Attribute(Name('handlers', Load(), lineno=505, col_offset=12), 'append', Load(), lineno=505, col_offset=12), [Name('h', Load(), lineno=505, col_offset=28)], [], None, None, lineno=505, col_offset=12), lineno=505, col_offset=12), Expr(Call(Attribute(Name('o', Load(), lineno=506, col_offset=12), 'add_handler', Load(), lineno=506, col_offset=12), [Name('h', Load(), lineno=506, col_offset=26)], [], None, None, lineno=506, col_offset=12), lineno=506, col_offset=12)], [], lineno=498, col_offset=8), Assign([Name('r', Store(), lineno=508, col_offset=8)], Call(Attribute(Name('o', Load(), lineno=508, col_offset=12), 'open', Load(), lineno=508, col_offset=12), [Str('http://example.com/', lineno=508, col_offset=19)], [], None, None, lineno=508, col_offset=12), lineno=508, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=510, col_offset=8), 'assertEqual', Load(), lineno=510, col_offset=8), [Subscript(Subscript(Attribute(Name('o', Load(), lineno=510, col_offset=25), 'calls', Load(), lineno=510, col_offset=25), Index(Num(0, lineno=510, col_offset=33)), Load(), lineno=510, col_offset=25), Index(Num(0, lineno=510, col_offset=36)), Load(), lineno=510, col_offset=25), Subscript(Name('handlers', Load(), lineno=510, col_offset=40), Index(Num(1, lineno=510, col_offset=49)), Load(), lineno=510, col_offset=40)], [], None, None, lineno=510, col_offset=8), lineno=510, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=511, col_offset=8), 'assertEqual', Load(), lineno=511, col_offset=8), [Subscript(Subscript(Attribute(Name('o', Load(), lineno=511, col_offset=25), 'calls', Load(), lineno=511, col_offset=25), Index(Num(1, lineno=511, col_offset=33)), Load(), lineno=511, col_offset=25), Index(Num(0, lineno=511, col_offset=36)), Load(), lineno=511, col_offset=25), Subscript(Name('handlers', Load(), lineno=511, col_offset=40), Index(Num(0, lineno=511, col_offset=49)), Load(), lineno=511, col_offset=40)], [], None, None, lineno=511, col_offset=8), lineno=511, col_offset=8)], [], lineno=495, col_offset=4), FunctionDef('test_raise', arguments([Name('self', Param(), lineno=513, col_offset=19)], None, None, []), [Assign([Name('o', Store(), lineno=515, col_offset=8)], Call(Name('OpenerDirector', Load(), lineno=515, col_offset=12), [], [], None, None, lineno=515, col_offset=12), lineno=515, col_offset=8), Assign([Name('meth_spec', Store(), lineno=516, col_offset=8)], List([List([Tuple([Str('http_open', lineno=517, col_offset=14), Str('raise', lineno=517, col_offset=27)], Load(), lineno=517, col_offset=14)], Load(), lineno=517, col_offset=12), List([Tuple([Str('http_open', lineno=518, col_offset=14), Str('return self', lineno=518, col_offset=27)], Load(), lineno=518, col_offset=14)], Load(), lineno=518, col_offset=12)], Load(), lineno=516, col_offset=20), lineno=516, col_offset=8), Assign([Name('handlers', Store(), lineno=520, col_offset=8)], Call(Name('add_ordered_mock_handlers', Load(), lineno=520, col_offset=19), [Name('o', Load(), lineno=520, col_offset=45), Name('meth_spec', Load(), lineno=520, col_offset=48)], [], None, None, lineno=520, col_offset=19), lineno=520, col_offset=8), Assign([Name('req', Store(), lineno=522, col_offset=8)], Call(Name('Request', Load(), lineno=522, col_offset=14), [Str('http://example.com/', lineno=522, col_offset=22)], [], None, None, lineno=522, col_offset=14), lineno=522, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=523, col_offset=8), 'assertRaises', Load(), lineno=523, col_offset=8), [Attribute(Name('urllib2', Load(), lineno=523, col_offset=26), 'URLError', Load(), lineno=523, col_offset=26), Attribute(Name('o', Load(), lineno=523, col_offset=44), 'open', Load(), lineno=523, col_offset=44), Name('req', Load(), lineno=523, col_offset=52)], [], None, None, lineno=523, col_offset=8), lineno=523, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=524, col_offset=8), 'assertEqual', Load(), lineno=524, col_offset=8), [Attribute(Name('o', Load(), lineno=524, col_offset=25), 'calls', Load(), lineno=524, col_offset=25), List([Tuple([Subscript(Name('handlers', Load(), lineno=524, col_offset=36), Index(Num(0, lineno=524, col_offset=45)), Load(), lineno=524, col_offset=36), Str('http_open', lineno=524, col_offset=49), Tuple([Name('req', Load(), lineno=524, col_offset=63)], Load(), lineno=524, col_offset=63), Dict([], [], lineno=524, col_offset=70)], Load(), lineno=524, col_offset=36)], Load(), lineno=524, col_offset=34)], [], None, None, lineno=524, col_offset=8), lineno=524, col_offset=8)], [], lineno=513, col_offset=4), FunctionDef('test_http_error', arguments([Name('self', Param(), lineno=530, col_offset=24)], None, None, []), [Assign([Name('o', Store(), lineno=533, col_offset=8)], Call(Name('OpenerDirector', Load(), lineno=533, col_offset=12), [], [], None, None, lineno=533, col_offset=12), lineno=533, col_offset=8), Assign([Name('meth_spec', Store(), lineno=534, col_offset=8)], List([List([Tuple([Str('http_open', lineno=535, col_offset=14), Str('error 302', lineno=535, col_offset=27)], Load(), lineno=535, col_offset=14)], Load(), lineno=535, col_offset=12), List([Tuple([Str('http_error_400', lineno=536, col_offset=14), Str('raise', lineno=536, col_offset=32)], Load(), lineno=536, col_offset=14), Str('http_open', lineno=536, col_offset=42)], Load(), lineno=536, col_offset=12), List([Tuple([Str('http_error_302', lineno=537, col_offset=14), Str('return response', lineno=537, col_offset=32)], Load(), lineno=537, col_offset=14), Str('http_error_303', lineno=537, col_offset=52), Str('http_error', lineno=538, col_offset=13)], Load(), lineno=537, col_offset=12), List([Str('http_error_302', lineno=539, col_offset=14)], Load(), lineno=539, col_offset=12)], Load(), lineno=534, col_offset=20), lineno=534, col_offset=8), Assign([Name('handlers', Store(), lineno=541, col_offset=8)], Call(Name('add_ordered_mock_handlers', Load(), lineno=541, col_offset=19), [Name('o', Load(), lineno=541, col_offset=45), Name('meth_spec', Load(), lineno=541, col_offset=48)], [], None, None, lineno=541, col_offset=19), lineno=541, col_offset=8), ClassDef('Unknown', [], [FunctionDef('__eq__', arguments([Name('self', Param(), lineno=544, col_offset=23), Name('other', Param(), lineno=544, col_offset=29)], None, None, []), [Return(Name('True', Load(), lineno=544, col_offset=44), lineno=544, col_offset=37)], [], lineno=544, col_offset=12)], [], lineno=543, col_offset=8), Assign([Name('req', Store(), lineno=546, col_offset=8)], Call(Name('Request', Load(), lineno=546, col_offset=14), [Str('http://example.com/', lineno=546, col_offset=22)], [], None, None, lineno=546, col_offset=14), lineno=546, col_offset=8), Assign([Name('r', Store(), lineno=547, col_offset=8)], Call(Attribute(Name('o', Load(), lineno=547, col_offset=12), 'open', Load(), lineno=547, col_offset=12), [Name('req', Load(), lineno=547, col_offset=19)], [], None, None, lineno=547, col_offset=12), lineno=547, col_offset=8), Assert(Compare(Call(Name('len', Load(), lineno=548, col_offset=15), [Attribute(Name('o', Load(), lineno=548, col_offset=19), 'calls', Load(), lineno=548, col_offset=19)], [], None, None, lineno=548, col_offset=15), [Eq()], [Num(2, lineno=548, col_offset=31)], lineno=548, col_offset=15), None, lineno=548, col_offset=8), Assign([Name('calls', Store(), lineno=549, col_offset=8)], List([Tuple([Subscript(Name('handlers', Load(), lineno=549, col_offset=18), Index(Num(0, lineno=549, col_offset=27)), Load(), lineno=549, col_offset=18), Str('http_open', lineno=549, col_offset=31), Tuple([Name('req', Load(), lineno=549, col_offset=45)], Load(), lineno=549, col_offset=45)], Load(), lineno=549, col_offset=18), Tuple([Subscript(Name('handlers', Load(), lineno=550, col_offset=18), Index(Num(2, lineno=550, col_offset=27)), Load(), lineno=550, col_offset=18), Str('http_error_302', lineno=550, col_offset=31), Tuple([Name('req', Load(), lineno=551, col_offset=19), Call(Name('Unknown', Load(), lineno=551, col_offset=24), [], [], None, None, lineno=551, col_offset=24), Num(302, lineno=551, col_offset=35), Str('', lineno=551, col_offset=40), Dict([], [], lineno=551, col_offset=44)], Load(), lineno=551, col_offset=19)], Load(), lineno=550, col_offset=18)], Load(), lineno=549, col_offset=16), lineno=549, col_offset=8), For(Tuple([Name('expected', Store(), lineno=552, col_offset=12), Name('got', Store(), lineno=552, col_offset=22)], Store(), lineno=552, col_offset=12), Call(Name('zip', Load(), lineno=552, col_offset=29), [Name('calls', Load(), lineno=552, col_offset=33), Attribute(Name('o', Load(), lineno=552, col_offset=40), 'calls', Load(), lineno=552, col_offset=40)], [], None, None, lineno=552, col_offset=29), [Assign([Tuple([Name('handler', Store(), lineno=553, col_offset=12), Name('method_name', Store(), lineno=553, col_offset=21), Name('args', Store(), lineno=553, col_offset=34)], Store(), lineno=553, col_offset=12)], Name('expected', Load(), lineno=553, col_offset=41), lineno=553, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=554, col_offset=12), 'assertEqual', Load(), lineno=554, col_offset=12), [Tuple([Name('handler', Load(), lineno=554, col_offset=30), Name('method_name', Load(), lineno=554, col_offset=39)], Load(), lineno=554, col_offset=30), Subscript(Name('got', Load(), lineno=554, col_offset=53), Slice(None, Num(2, lineno=554, col_offset=58), None), Load(), lineno=554, col_offset=53)], [], None, None, lineno=554, col_offset=12), lineno=554, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=555, col_offset=12), 'assertEqual', Load(), lineno=555, col_offset=12), [Name('args', Load(), lineno=555, col_offset=29), Subscript(Name('got', Load(), lineno=555, col_offset=35), Index(Num(2, lineno=555, col_offset=39)), Load(), lineno=555, col_offset=35)], [], None, None, lineno=555, col_offset=12), lineno=555, col_offset=12)], [], lineno=552, col_offset=8)], [], lineno=530, col_offset=4), FunctionDef('test_processors', arguments([Name('self', Param(), lineno=557, col_offset=24)], None, None, []), [Assign([Name('o', Store(), lineno=559, col_offset=8)], Call(Name('OpenerDirector', Load(), lineno=559, col_offset=12), [], [], None, None, lineno=559, col_offset=12), lineno=559, col_offset=8), Assign([Name('meth_spec', Store(), lineno=560, col_offset=8)], List([List([Tuple([Str('http_request', lineno=561, col_offset=14), Str('return request', lineno=561, col_offset=30)], Load(), lineno=561, col_offset=14), Tuple([Str('http_response', lineno=562, col_offset=14), Str('return response', lineno=562, col_offset=31)], Load(), lineno=562, col_offset=14)], Load(), lineno=561, col_offset=12), List([Tuple([Str('http_request', lineno=563, col_offset=14), Str('return request', lineno=563, col_offset=30)], Load(), lineno=563, col_offset=14), Tuple([Str('http_response', lineno=564, col_offset=14), Str('return response', lineno=564, col_offset=31)], Load(), lineno=564, col_offset=14)], Load(), lineno=563, col_offset=12)], Load(), lineno=560, col_offset=20), lineno=560, col_offset=8), Assign([Name('handlers', Store(), lineno=566, col_offset=8)], Call(Name('add_ordered_mock_handlers', Load(), lineno=566, col_offset=19), [Name('o', Load(), lineno=566, col_offset=45), Name('meth_spec', Load(), lineno=566, col_offset=48)], [], None, None, lineno=566, col_offset=19), lineno=566, col_offset=8), Assign([Name('req', Store(), lineno=568, col_offset=8)], Call(Name('Request', Load(), lineno=568, col_offset=14), [Str('http://example.com/', lineno=568, col_offset=22)], [], None, None, lineno=568, col_offset=14), lineno=568, col_offset=8), Assign([Name('r', Store(), lineno=569, col_offset=8)], Call(Attribute(Name('o', Load(), lineno=569, col_offset=12), 'open', Load(), lineno=569, col_offset=12), [Name('req', Load(), lineno=569, col_offset=19)], [], None, None, lineno=569, col_offset=12), lineno=569, col_offset=8), Assign([Name('calls', Store(), lineno=572, col_offset=8)], List([Tuple([Subscript(Name('handlers', Load(), lineno=573, col_offset=13), Index(Num(0, lineno=573, col_offset=22)), Load(), lineno=573, col_offset=13), Str('http_request', lineno=573, col_offset=26)], Load(), lineno=573, col_offset=13), Tuple([Subscript(Name('handlers', Load(), lineno=573, col_offset=44), Index(Num(1, lineno=573, col_offset=53)), Load(), lineno=573, col_offset=44), Str('http_request', lineno=573, col_offset=57)], Load(), lineno=573, col_offset=44), Tuple([Subscript(Name('handlers', Load(), lineno=574, col_offset=13), Index(Num(0, lineno=574, col_offset=22)), Load(), lineno=574, col_offset=13), Str('http_response', lineno=574, col_offset=26)], Load(), lineno=574, col_offset=13), Tuple([Subscript(Name('handlers', Load(), lineno=574, col_offset=45), Index(Num(1, lineno=574, col_offset=54)), Load(), lineno=574, col_offset=45), Str('http_response', lineno=574, col_offset=58)], Load(), lineno=574, col_offset=45)], Load(), lineno=572, col_offset=16), lineno=572, col_offset=8), For(Tuple([Name('i', Store(), lineno=576, col_offset=12), Tuple([Name('handler', Store(), lineno=576, col_offset=16), Name('name', Store(), lineno=576, col_offset=25), Name('args', Store(), lineno=576, col_offset=31), Name('kwds', Store(), lineno=576, col_offset=37)], Store(), lineno=576, col_offset=16)], Store(), lineno=576, col_offset=12), Call(Name('enumerate', Load(), lineno=576, col_offset=46), [Attribute(Name('o', Load(), lineno=576, col_offset=56), 'calls', Load(), lineno=576, col_offset=56)], [], None, None, lineno=576, col_offset=46), [If(Compare(Name('i', Load(), lineno=577, col_offset=15), [Lt()], [Num(2, lineno=577, col_offset=19)], lineno=577, col_offset=15), [Expr(Call(Attribute(Name('self', Load(), lineno=579, col_offset=16), 'assertEqual', Load(), lineno=579, col_offset=16), [Tuple([Name('handler', Load(), lineno=579, col_offset=34), Name('name', Load(), lineno=579, col_offset=43)], Load(), lineno=579, col_offset=34), Subscript(Name('calls', Load(), lineno=579, col_offset=50), Index(Name('i', Load(), lineno=579, col_offset=56)), Load(), lineno=579, col_offset=50)], [], None, None, lineno=579, col_offset=16), lineno=579, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=580, col_offset=16), 'assertEqual', Load(), lineno=580, col_offset=16), [Call(Name('len', Load(), lineno=580, col_offset=33), [Name('args', Load(), lineno=580, col_offset=37)], [], None, None, lineno=580, col_offset=33), Num(1, lineno=580, col_offset=44)], [], None, None, lineno=580, col_offset=16), lineno=580, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=581, col_offset=16), 'assertIsInstance', Load(), lineno=581, col_offset=16), [Subscript(Name('args', Load(), lineno=581, col_offset=38), Index(Num(0, lineno=581, col_offset=43)), Load(), lineno=581, col_offset=38), Name('Request', Load(), lineno=581, col_offset=47)], [], None, None, lineno=581, col_offset=16), lineno=581, col_offset=16)], [Expr(Call(Attribute(Name('self', Load(), lineno=584, col_offset=16), 'assertEqual', Load(), lineno=584, col_offset=16), [Tuple([Name('handler', Load(), lineno=584, col_offset=34), Name('name', Load(), lineno=584, col_offset=43)], Load(), lineno=584, col_offset=34), Subscript(Name('calls', Load(), lineno=584, col_offset=50), Index(Name('i', Load(), lineno=584, col_offset=56)), Load(), lineno=584, col_offset=50)], [], None, None, lineno=584, col_offset=16), lineno=584, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=585, col_offset=16), 'assertEqual', Load(), lineno=585, col_offset=16), [Call(Name('len', Load(), lineno=585, col_offset=33), [Name('args', Load(), lineno=585, col_offset=37)], [], None, None, lineno=585, col_offset=33), Num(2, lineno=585, col_offset=44)], [], None, None, lineno=585, col_offset=16), lineno=585, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=586, col_offset=16), 'assertIsInstance', Load(), lineno=586, col_offset=16), [Subscript(Name('args', Load(), lineno=586, col_offset=38), Index(Num(0, lineno=586, col_offset=43)), Load(), lineno=586, col_offset=38), Name('Request', Load(), lineno=586, col_offset=47)], [], None, None, lineno=586, col_offset=16), lineno=586, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=589, col_offset=16), 'assertTrue', Load(), lineno=589, col_offset=16), [BoolOp(Or(), [Compare(Subscript(Name('args', Load(), lineno=589, col_offset=32), Index(Num(1, lineno=589, col_offset=37)), Load(), lineno=589, col_offset=32), [Is()], [Name('None', Load(), lineno=589, col_offset=43)], lineno=589, col_offset=32), Call(Name('isinstance', Load(), lineno=590, col_offset=29), [Subscript(Name('args', Load(), lineno=590, col_offset=40), Index(Num(1, lineno=590, col_offset=45)), Load(), lineno=590, col_offset=40), Name('MockResponse', Load(), lineno=590, col_offset=49)], [], None, None, lineno=590, col_offset=29)], lineno=589, col_offset=32)], [], None, None, lineno=589, col_offset=16), lineno=589, col_offset=16)], lineno=577, col_offset=12)], [], lineno=576, col_offset=8)], [], lineno=557, col_offset=4)], [], lineno=440, col_offset=0), FunctionDef('sanepathname2url', arguments([Name('path', Param(), lineno=593, col_offset=21)], None, None, []), [Import([alias('urllib', None)], lineno=594, col_offset=4), Assign([Name('urlpath', Store(), lineno=595, col_offset=4)], Call(Attribute(Name('urllib', Load(), lineno=595, col_offset=14), 'pathname2url', Load(), lineno=595, col_offset=14), [Name('path', Load(), lineno=595, col_offset=34)], [], None, None, lineno=595, col_offset=14), lineno=595, col_offset=4), If(BoolOp(And(), [Compare(Attribute(Name('os', Load(), lineno=596, col_offset=7), 'name', Load(), lineno=596, col_offset=7), [Eq()], [Str('nt', lineno=596, col_offset=18)], lineno=596, col_offset=7), Call(Attribute(Name('urlpath', Load(), lineno=596, col_offset=27), 'startswith', Load(), lineno=596, col_offset=27), [Str('///', lineno=596, col_offset=46)], [], None, None, lineno=596, col_offset=27)], lineno=596, col_offset=7), [Assign([Name('urlpath', Store(), lineno=597, col_offset=8)], Subscript(Name('urlpath', Load(), lineno=597, col_offset=18), Slice(Num(2, lineno=597, col_offset=26), None, None), Load(), lineno=597, col_offset=18), lineno=597, col_offset=8)], [], lineno=596, col_offset=4), Return(Name('urlpath', Load(), lineno=599, col_offset=11), lineno=599, col_offset=4)], [], lineno=593, col_offset=0), ClassDef('HandlerTests', [Attribute(Name('unittest', Load(), lineno=601, col_offset=19), 'TestCase', Load(), lineno=601, col_offset=19)], [FunctionDef('test_ftp', arguments([Name('self', Param(), lineno=603, col_offset=17)], None, None, []), [ClassDef('MockFTPWrapper', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=605, col_offset=25), Name('data', Param(), lineno=605, col_offset=31)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=605, col_offset=38), 'data', Store(), lineno=605, col_offset=38)], Name('data', Load(), lineno=605, col_offset=50), lineno=605, col_offset=38)], [], lineno=605, col_offset=12), FunctionDef('retrfile', arguments([Name('self', Param(), lineno=606, col_offset=25), Name('filename', Param(), lineno=606, col_offset=31), Name('filetype', Param(), lineno=606, col_offset=41)], None, None, []), [Assign([Tuple([Attribute(Name('self', Load(), lineno=607, col_offset=16), 'filename', Store(), lineno=607, col_offset=16), Attribute(Name('self', Load(), lineno=607, col_offset=31), 'filetype', Store(), lineno=607, col_offset=31)], Store(), lineno=607, col_offset=16)], Tuple([Name('filename', Load(), lineno=607, col_offset=47), Name('filetype', Load(), lineno=607, col_offset=57)], Load(), lineno=607, col_offset=47), lineno=607, col_offset=16), Return(Tuple([Call(Attribute(Name('StringIO', Load(), lineno=608, col_offset=23), 'StringIO', Load(), lineno=608, col_offset=23), [Attribute(Name('self', Load(), lineno=608, col_offset=41), 'data', Load(), lineno=608, col_offset=41)], [], None, None, lineno=608, col_offset=23), Call(Name('len', Load(), lineno=608, col_offset=53), [Attribute(Name('self', Load(), lineno=608, col_offset=57), 'data', Load(), lineno=608, col_offset=57)], [], None, None, lineno=608, col_offset=53)], Load(), lineno=608, col_offset=23), lineno=608, col_offset=16)], [], lineno=606, col_offset=12)], [], lineno=604, col_offset=8), ClassDef('NullFTPHandler', [Attribute(Name('urllib2', Load(), lineno=610, col_offset=29), 'FTPHandler', Load(), lineno=610, col_offset=29)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=611, col_offset=25), Name('data', Param(), lineno=611, col_offset=31)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=611, col_offset=38), 'data', Store(), lineno=611, col_offset=38)], Name('data', Load(), lineno=611, col_offset=50), lineno=611, col_offset=38)], [], lineno=611, col_offset=12), FunctionDef('connect_ftp', arguments([Name('self', Param(), lineno=612, col_offset=28), Name('user', Param(), lineno=612, col_offset=34), Name('passwd', Param(), lineno=612, col_offset=40), Name('host', Param(), lineno=612, col_offset=48), Name('port', Param(), lineno=612, col_offset=54), Name('dirs', Param(), lineno=612, col_offset=60), Name('timeout', Param(), lineno=613, col_offset=28)], None, None, [Attribute(Name('socket', Load(), lineno=613, col_offset=36), '_GLOBAL_DEFAULT_TIMEOUT', Load(), lineno=613, col_offset=36)]), [Assign([Tuple([Attribute(Name('self', Load(), lineno=614, col_offset=16), 'user', Store(), lineno=614, col_offset=16), Attribute(Name('self', Load(), lineno=614, col_offset=27), 'passwd', Store(), lineno=614, col_offset=27)], Store(), lineno=614, col_offset=16)], Tuple([Name('user', Load(), lineno=614, col_offset=41), Name('passwd', Load(), lineno=614, col_offset=47)], Load(), lineno=614, col_offset=41), lineno=614, col_offset=16), Assign([Tuple([Attribute(Name('self', Load(), lineno=615, col_offset=16), 'host', Store(), lineno=615, col_offset=16), Attribute(Name('self', Load(), lineno=615, col_offset=27), 'port', Store(), lineno=615, col_offset=27)], Store(), lineno=615, col_offset=16)], Tuple([Name('host', Load(), lineno=615, col_offset=39), Name('port', Load(), lineno=615, col_offset=45)], Load(), lineno=615, col_offset=39), lineno=615, col_offset=16), Assign([Attribute(Name('self', Load(), lineno=616, col_offset=16), 'dirs', Store(), lineno=616, col_offset=16)], Name('dirs', Load(), lineno=616, col_offset=28), lineno=616, col_offset=16), Assign([Attribute(Name('self', Load(), lineno=617, col_offset=16), 'ftpwrapper', Store(), lineno=617, col_offset=16)], Call(Name('MockFTPWrapper', Load(), lineno=617, col_offset=34), [Attribute(Name('self', Load(), lineno=617, col_offset=49), 'data', Load(), lineno=617, col_offset=49)], [], None, None, lineno=617, col_offset=34), lineno=617, col_offset=16), Return(Attribute(Name('self', Load(), lineno=618, col_offset=23), 'ftpwrapper', Load(), lineno=618, col_offset=23), lineno=618, col_offset=16)], [], lineno=612, col_offset=12)], [], lineno=610, col_offset=8), Import([alias('ftplib', None)], lineno=620, col_offset=8), Assign([Name('data', Store(), lineno=621, col_offset=8)], Str('rheum rhaponicum', lineno=621, col_offset=15), lineno=621, col_offset=8), Assign([Name('h', Store(), lineno=622, col_offset=8)], Call(Name('NullFTPHandler', Load(), lineno=622, col_offset=12), [Name('data', Load(), lineno=622, col_offset=27)], [], None, None, lineno=622, col_offset=12), lineno=622, col_offset=8), Assign([Name('o', Store(), lineno=623, col_offset=8), Attribute(Name('h', Load(), lineno=623, col_offset=12), 'parent', Store(), lineno=623, col_offset=12)], Call(Name('MockOpener', Load(), lineno=623, col_offset=23), [], [], None, None, lineno=623, col_offset=23), lineno=623, col_offset=8), For(Tuple([Name('url', Store(), lineno=625, col_offset=12), Name('host', Store(), lineno=625, col_offset=17), Name('port', Store(), lineno=625, col_offset=23), Name('user', Store(), lineno=625, col_offset=29), Name('passwd', Store(), lineno=625, col_offset=35), Name('type_', Store(), lineno=625, col_offset=43), Name('dirs', Store(), lineno=625, col_offset=50), Name('filename', Store(), lineno=625, col_offset=56), Name('mimetype', Store(), lineno=625, col_offset=66)], Store(), lineno=625, col_offset=12), List([Tuple([Str('ftp://localhost/foo/bar/baz.html', lineno=626, col_offset=13), Str('localhost', lineno=627, col_offset=13), Attribute(Name('ftplib', Load(), lineno=627, col_offset=26), 'FTP_PORT', Load(), lineno=627, col_offset=26), Str('', lineno=627, col_offset=43), Str('', lineno=627, col_offset=47), Str('I', lineno=627, col_offset=51), List([Str('foo', lineno=628, col_offset=14), Str('bar', lineno=628, col_offset=21)], Load(), lineno=628, col_offset=13), Str('baz.html', lineno=628, col_offset=29), Str('text/html', lineno=628, col_offset=41)], Load(), lineno=626, col_offset=13), Tuple([Str('ftp://parrot@localhost/foo/bar/baz.html', lineno=629, col_offset=13), Str('localhost', lineno=630, col_offset=13), Attribute(Name('ftplib', Load(), lineno=630, col_offset=26), 'FTP_PORT', Load(), lineno=630, col_offset=26), Str('parrot', lineno=630, col_offset=43), Str('', lineno=630, col_offset=53), Str('I', lineno=630, col_offset=57), List([Str('foo', lineno=631, col_offset=14), Str('bar', lineno=631, col_offset=21)], Load(), lineno=631, col_offset=13), Str('baz.html', lineno=631, col_offset=29), Str('text/html', lineno=631, col_offset=41)], Load(), lineno=629, col_offset=13), Tuple([Str('ftp://%25parrot@localhost/foo/bar/baz.html', lineno=632, col_offset=13), Str('localhost', lineno=633, col_offset=13), Attribute(Name('ftplib', Load(), lineno=633, col_offset=26), 'FTP_PORT', Load(), lineno=633, col_offset=26), Str('%parrot', lineno=633, col_offset=43), Str('', lineno=633, col_offset=54), Str('I', lineno=633, col_offset=58), List([Str('foo', lineno=634, col_offset=14), Str('bar', lineno=634, col_offset=21)], Load(), lineno=634, col_offset=13), Str('baz.html', lineno=634, col_offset=29), Str('text/html', lineno=634, col_offset=41)], Load(), lineno=632, col_offset=13), Tuple([Str('ftp://%2542parrot@localhost/foo/bar/baz.html', lineno=635, col_offset=13), Str('localhost', lineno=636, col_offset=13), Attribute(Name('ftplib', Load(), lineno=636, col_offset=26), 'FTP_PORT', Load(), lineno=636, col_offset=26), Str('%42parrot', lineno=636, col_offset=43), Str('', lineno=636, col_offset=56), Str('I', lineno=636, col_offset=60), List([Str('foo', lineno=637, col_offset=14), Str('bar', lineno=637, col_offset=21)], Load(), lineno=637, col_offset=13), Str('baz.html', lineno=637, col_offset=29), Str('text/html', lineno=637, col_offset=41)], Load(), lineno=635, col_offset=13), Tuple([Str('ftp://localhost:80/foo/bar/', lineno=638, col_offset=13), Str('localhost', lineno=639, col_offset=13), Num(80, lineno=639, col_offset=26), Str('', lineno=639, col_offset=30), Str('', lineno=639, col_offset=34), Str('D', lineno=639, col_offset=38), List([Str('foo', lineno=640, col_offset=14), Str('bar', lineno=640, col_offset=21)], Load(), lineno=640, col_offset=13), Str('', lineno=640, col_offset=29), Name('None', Load(), lineno=640, col_offset=33)], Load(), lineno=638, col_offset=13), Tuple([Str('ftp://localhost/baz.gif;type=a', lineno=641, col_offset=13), Str('localhost', lineno=642, col_offset=13), Attribute(Name('ftplib', Load(), lineno=642, col_offset=26), 'FTP_PORT', Load(), lineno=642, col_offset=26), Str('', lineno=642, col_offset=43), Str('', lineno=642, col_offset=47), Str('A', lineno=642, col_offset=51), List([], Load(), lineno=643, col_offset=13), Str('baz.gif', lineno=643, col_offset=17), Name('None', Load(), lineno=643, col_offset=28)], Load(), lineno=641, col_offset=13)], Load(), lineno=625, col_offset=78), [Assign([Name('req', Store(), lineno=645, col_offset=12)], Call(Name('Request', Load(), lineno=645, col_offset=18), [Name('url', Load(), lineno=645, col_offset=26)], [], None, None, lineno=645, col_offset=18), lineno=645, col_offset=12), Assign([Attribute(Name('req', Load(), lineno=646, col_offset=12), 'timeout', Store(), lineno=646, col_offset=12)], Name('None', Load(), lineno=646, col_offset=26), lineno=646, col_offset=12), Assign([Name('r', Store(), lineno=647, col_offset=12)], Call(Attribute(Name('h', Load(), lineno=647, col_offset=16), 'ftp_open', Load(), lineno=647, col_offset=16), [Name('req', Load(), lineno=647, col_offset=27)], [], None, None, lineno=647, col_offset=16), lineno=647, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=649, col_offset=12), 'assertEqual', Load(), lineno=649, col_offset=12), [Attribute(Name('h', Load(), lineno=649, col_offset=29), 'user', Load(), lineno=649, col_offset=29), Name('user', Load(), lineno=649, col_offset=37)], [], None, None, lineno=649, col_offset=12), lineno=649, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=650, col_offset=12), 'assertEqual', Load(), lineno=650, col_offset=12), [Attribute(Name('h', Load(), lineno=650, col_offset=29), 'passwd', Load(), lineno=650, col_offset=29), Name('passwd', Load(), lineno=650, col_offset=39)], [], None, None, lineno=650, col_offset=12), lineno=650, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=651, col_offset=12), 'assertEqual', Load(), lineno=651, col_offset=12), [Attribute(Name('h', Load(), lineno=651, col_offset=29), 'host', Load(), lineno=651, col_offset=29), Call(Attribute(Name('socket', Load(), lineno=651, col_offset=37), 'gethostbyname', Load(), lineno=651, col_offset=37), [Name('host', Load(), lineno=651, col_offset=58)], [], None, None, lineno=651, col_offset=37)], [], None, None, lineno=651, col_offset=12), lineno=651, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=652, col_offset=12), 'assertEqual', Load(), lineno=652, col_offset=12), [Attribute(Name('h', Load(), lineno=652, col_offset=29), 'port', Load(), lineno=652, col_offset=29), Name('port', Load(), lineno=652, col_offset=37)], [], None, None, lineno=652, col_offset=12), lineno=652, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=653, col_offset=12), 'assertEqual', Load(), lineno=653, col_offset=12), [Attribute(Name('h', Load(), lineno=653, col_offset=29), 'dirs', Load(), lineno=653, col_offset=29), Name('dirs', Load(), lineno=653, col_offset=37)], [], None, None, lineno=653, col_offset=12), lineno=653, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=654, col_offset=12), 'assertEqual', Load(), lineno=654, col_offset=12), [Attribute(Attribute(Name('h', Load(), lineno=654, col_offset=29), 'ftpwrapper', Load(), lineno=654, col_offset=29), 'filename', Load(), lineno=654, col_offset=29), Name('filename', Load(), lineno=654, col_offset=52)], [], None, None, lineno=654, col_offset=12), lineno=654, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=655, col_offset=12), 'assertEqual', Load(), lineno=655, col_offset=12), [Attribute(Attribute(Name('h', Load(), lineno=655, col_offset=29), 'ftpwrapper', Load(), lineno=655, col_offset=29), 'filetype', Load(), lineno=655, col_offset=29), Name('type_', Load(), lineno=655, col_offset=52)], [], None, None, lineno=655, col_offset=12), lineno=655, col_offset=12), Assign([Name('headers', Store(), lineno=656, col_offset=12)], Call(Attribute(Name('r', Load(), lineno=656, col_offset=22), 'info', Load(), lineno=656, col_offset=22), [], [], None, None, lineno=656, col_offset=22), lineno=656, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=657, col_offset=12), 'assertEqual', Load(), lineno=657, col_offset=12), [Call(Attribute(Name('headers', Load(), lineno=657, col_offset=29), 'get', Load(), lineno=657, col_offset=29), [Str('Content-type', lineno=657, col_offset=41)], [], None, None, lineno=657, col_offset=29), Name('mimetype', Load(), lineno=657, col_offset=58)], [], None, None, lineno=657, col_offset=12), lineno=657, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=658, col_offset=12), 'assertEqual', Load(), lineno=658, col_offset=12), [Call(Name('int', Load(), lineno=658, col_offset=29), [Subscript(Name('headers', Load(), lineno=658, col_offset=33), Index(Str('Content-length', lineno=658, col_offset=41)), Load(), lineno=658, col_offset=33)], [], None, None, lineno=658, col_offset=29), Call(Name('len', Load(), lineno=658, col_offset=61), [Name('data', Load(), lineno=658, col_offset=65)], [], None, None, lineno=658, col_offset=61)], [], None, None, lineno=658, col_offset=12), lineno=658, col_offset=12)], [], lineno=625, col_offset=8)], [], lineno=603, col_offset=4), FunctionDef('test_file', arguments([Name('self', Param(), lineno=660, col_offset=18)], None, None, []), [Import([alias('rfc822', None), alias('socket', None)], lineno=661, col_offset=8), Assign([Name('h', Store(), lineno=662, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=662, col_offset=12), 'FileHandler', Load(), lineno=662, col_offset=12), [], [], None, None, lineno=662, col_offset=12), lineno=662, col_offset=8), Assign([Name('o', Store(), lineno=663, col_offset=8), Attribute(Name('h', Load(), lineno=663, col_offset=12), 'parent', Store(), lineno=663, col_offset=12)], Call(Name('MockOpener', Load(), lineno=663, col_offset=23), [], [], None, None, lineno=663, col_offset=23), lineno=663, col_offset=8), Assign([Name('TESTFN', Store(), lineno=665, col_offset=8)], Attribute(Name('test_support', Load(), lineno=665, col_offset=17), 'TESTFN', Load(), lineno=665, col_offset=17), lineno=665, col_offset=8), Assign([Name('urlpath', Store(), lineno=666, col_offset=8)], Call(Name('sanepathname2url', Load(), lineno=666, col_offset=18), [Call(Attribute(Attribute(Name('os', Load(), lineno=666, col_offset=35), 'path', Load(), lineno=666, col_offset=35), 'abspath', Load(), lineno=666, col_offset=35), [Name('TESTFN', Load(), lineno=666, col_offset=51)], [], None, None, lineno=666, col_offset=35)], [], None, None, lineno=666, col_offset=18), lineno=666, col_offset=8), Assign([Name('towrite', Store(), lineno=667, col_offset=8)], Str('hello, world\n', lineno=667, col_offset=18), lineno=667, col_offset=8), Assign([Name('urls', Store(), lineno=668, col_offset=8)], List([BinOp(Str('file://localhost%s', lineno=669, col_offset=12), Mod(), Name('urlpath', Load(), lineno=669, col_offset=35), lineno=669, col_offset=12), BinOp(Str('file://%s', lineno=670, col_offset=12), Mod(), Name('urlpath', Load(), lineno=670, col_offset=26), lineno=670, col_offset=12), BinOp(Str('file://%s%s', lineno=671, col_offset=12), Mod(), Tuple([Call(Attribute(Name('socket', Load(), lineno=671, col_offset=29), 'gethostbyname', Load(), lineno=671, col_offset=29), [Str('localhost', lineno=671, col_offset=50)], [], None, None, lineno=671, col_offset=29), Name('urlpath', Load(), lineno=671, col_offset=64)], Load(), lineno=671, col_offset=29), lineno=671, col_offset=12)], Load(), lineno=668, col_offset=15), lineno=668, col_offset=8), TryExcept([Assign([Name('localaddr', Store(), lineno=674, col_offset=12)], Call(Attribute(Name('socket', Load(), lineno=674, col_offset=24), 'gethostbyname', Load(), lineno=674, col_offset=24), [Call(Attribute(Name('socket', Load(), lineno=674, col_offset=45), 'gethostname', Load(), lineno=674, col_offset=45), [], [], None, None, lineno=674, col_offset=45)], [], None, None, lineno=674, col_offset=24), lineno=674, col_offset=12)], [ExceptHandler(Attribute(Name('socket', Load(), lineno=675, col_offset=15), 'gaierror', Load(), lineno=675, col_offset=15), None, [Assign([Name('localaddr', Store(), lineno=676, col_offset=12)], Str('', lineno=676, col_offset=24), lineno=676, col_offset=12)], lineno=675, col_offset=8)], [], lineno=673, col_offset=8), If(Name('localaddr', Load(), lineno=677, col_offset=11), [Expr(Call(Attribute(Name('urls', Load(), lineno=678, col_offset=12), 'append', Load(), lineno=678, col_offset=12), [BinOp(Str('file://%s%s', lineno=678, col_offset=24), Mod(), Tuple([Name('localaddr', Load(), lineno=678, col_offset=41), Name('urlpath', Load(), lineno=678, col_offset=52)], Load(), lineno=678, col_offset=41), lineno=678, col_offset=24)], [], None, None, lineno=678, col_offset=12), lineno=678, col_offset=12)], [], lineno=677, col_offset=8), For(Name('url', Store(), lineno=680, col_offset=12), Name('urls', Load(), lineno=680, col_offset=19), [Assign([Name('f', Store(), lineno=681, col_offset=12)], Call(Name('open', Load(), lineno=681, col_offset=16), [Name('TESTFN', Load(), lineno=681, col_offset=21), Str('wb', lineno=681, col_offset=29)], [], None, None, lineno=681, col_offset=16), lineno=681, col_offset=12), TryFinally([TryFinally([Expr(Call(Attribute(Name('f', Load(), lineno=684, col_offset=20), 'write', Load(), lineno=684, col_offset=20), [Name('towrite', Load(), lineno=684, col_offset=28)], [], None, None, lineno=684, col_offset=20), lineno=684, col_offset=20)], [Expr(Call(Attribute(Name('f', Load(), lineno=686, col_offset=20), 'close', Load(), lineno=686, col_offset=20), [], [], None, None, lineno=686, col_offset=20), lineno=686, col_offset=20)], lineno=683, col_offset=16), Assign([Name('r', Store(), lineno=688, col_offset=16)], Call(Attribute(Name('h', Load(), lineno=688, col_offset=20), 'file_open', Load(), lineno=688, col_offset=20), [Call(Name('Request', Load(), lineno=688, col_offset=32), [Name('url', Load(), lineno=688, col_offset=40)], [], None, None, lineno=688, col_offset=32)], [], None, None, lineno=688, col_offset=20), lineno=688, col_offset=16), TryFinally([Assign([Name('data', Store(), lineno=690, col_offset=20)], Call(Attribute(Name('r', Load(), lineno=690, col_offset=27), 'read', Load(), lineno=690, col_offset=27), [], [], None, None, lineno=690, col_offset=27), lineno=690, col_offset=20), Assign([Name('headers', Store(), lineno=691, col_offset=20)], Call(Attribute(Name('r', Load(), lineno=691, col_offset=30), 'info', Load(), lineno=691, col_offset=30), [], [], None, None, lineno=691, col_offset=30), lineno=691, col_offset=20), Assign([Name('respurl', Store(), lineno=692, col_offset=20)], Call(Attribute(Name('r', Load(), lineno=692, col_offset=30), 'geturl', Load(), lineno=692, col_offset=30), [], [], None, None, lineno=692, col_offset=30), lineno=692, col_offset=20)], [Expr(Call(Attribute(Name('r', Load(), lineno=694, col_offset=20), 'close', Load(), lineno=694, col_offset=20), [], [], None, None, lineno=694, col_offset=20), lineno=694, col_offset=20)], lineno=689, col_offset=16), Assign([Name('stats', Store(), lineno=695, col_offset=16)], Call(Attribute(Name('os', Load(), lineno=695, col_offset=24), 'stat', Load(), lineno=695, col_offset=24), [Name('TESTFN', Load(), lineno=695, col_offset=32)], [], None, None, lineno=695, col_offset=24), lineno=695, col_offset=16), Assign([Name('modified', Store(), lineno=696, col_offset=16)], Call(Attribute(Name('rfc822', Load(), lineno=696, col_offset=27), 'formatdate', Load(), lineno=696, col_offset=27), [Attribute(Name('stats', Load(), lineno=696, col_offset=45), 'st_mtime', Load(), lineno=696, col_offset=45)], [], None, None, lineno=696, col_offset=27), lineno=696, col_offset=16)], [Expr(Call(Attribute(Name('os', Load(), lineno=698, col_offset=16), 'remove', Load(), lineno=698, col_offset=16), [Name('TESTFN', Load(), lineno=698, col_offset=26)], [], None, None, lineno=698, col_offset=16), lineno=698, col_offset=16)], lineno=682, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=699, col_offset=12), 'assertEqual', Load(), lineno=699, col_offset=12), [Name('data', Load(), lineno=699, col_offset=29), Name('towrite', Load(), lineno=699, col_offset=35)], [], None, None, lineno=699, col_offset=12), lineno=699, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=700, col_offset=12), 'assertEqual', Load(), lineno=700, col_offset=12), [Subscript(Name('headers', Load(), lineno=700, col_offset=29), Index(Str('Content-type', lineno=700, col_offset=37)), Load(), lineno=700, col_offset=29), Str('text/plain', lineno=700, col_offset=54)], [], None, None, lineno=700, col_offset=12), lineno=700, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=701, col_offset=12), 'assertEqual', Load(), lineno=701, col_offset=12), [Subscript(Name('headers', Load(), lineno=701, col_offset=29), Index(Str('Content-length', lineno=701, col_offset=37)), Load(), lineno=701, col_offset=29), Str('13', lineno=701, col_offset=56)], [], None, None, lineno=701, col_offset=12), lineno=701, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=702, col_offset=12), 'assertEqual', Load(), lineno=702, col_offset=12), [Subscript(Name('headers', Load(), lineno=702, col_offset=29), Index(Str('Last-modified', lineno=702, col_offset=37)), Load(), lineno=702, col_offset=29), Name('modified', Load(), lineno=702, col_offset=55)], [], None, None, lineno=702, col_offset=12), lineno=702, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=703, col_offset=12), 'assertEqual', Load(), lineno=703, col_offset=12), [Name('respurl', Load(), lineno=703, col_offset=29), Name('url', Load(), lineno=703, col_offset=38)], [], None, None, lineno=703, col_offset=12), lineno=703, col_offset=12)], [], lineno=680, col_offset=8), For(Name('url', Store(), lineno=705, col_offset=12), List([BinOp(Str('file://localhost:80%s', lineno=706, col_offset=12), Mod(), Name('urlpath', Load(), lineno=706, col_offset=38), lineno=706, col_offset=12), Str('file:///file_does_not_exist.txt', lineno=707, col_offset=12), BinOp(Str('file://%s:80%s/%s', lineno=708, col_offset=12), Mod(), Tuple([Call(Attribute(Name('socket', Load(), lineno=708, col_offset=35), 'gethostbyname', Load(), lineno=708, col_offset=35), [Str('localhost', lineno=708, col_offset=56)], [], None, None, lineno=708, col_offset=35), Call(Attribute(Name('os', Load(), lineno=709, col_offset=35), 'getcwd', Load(), lineno=709, col_offset=35), [], [], None, None, lineno=709, col_offset=35), Name('TESTFN', Load(), lineno=709, col_offset=48)], Load(), lineno=708, col_offset=35), lineno=708, col_offset=12), BinOp(Str('file://somerandomhost.ontheinternet.com%s/%s', lineno=710, col_offset=12), Mod(), Tuple([Call(Attribute(Name('os', Load(), lineno=711, col_offset=13), 'getcwd', Load(), lineno=711, col_offset=13), [], [], None, None, lineno=711, col_offset=13), Name('TESTFN', Load(), lineno=711, col_offset=26)], Load(), lineno=711, col_offset=13), lineno=710, col_offset=12)], Load(), lineno=705, col_offset=19), [TryFinally([Assign([Name('f', Store(), lineno=714, col_offset=16)], Call(Name('open', Load(), lineno=714, col_offset=20), [Name('TESTFN', Load(), lineno=714, col_offset=25), Str('wb', lineno=714, col_offset=33)], [], None, None, lineno=714, col_offset=20), lineno=714, col_offset=16), TryFinally([Expr(Call(Attribute(Name('f', Load(), lineno=716, col_offset=20), 'write', Load(), lineno=716, col_offset=20), [Name('towrite', Load(), lineno=716, col_offset=28)], [], None, None, lineno=716, col_offset=20), lineno=716, col_offset=20)], [Expr(Call(Attribute(Name('f', Load(), lineno=718, col_offset=20), 'close', Load(), lineno=718, col_offset=20), [], [], None, None, lineno=718, col_offset=20), lineno=718, col_offset=20)], lineno=715, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=720, col_offset=16), 'assertRaises', Load(), lineno=720, col_offset=16), [Attribute(Name('urllib2', Load(), lineno=720, col_offset=34), 'URLError', Load(), lineno=720, col_offset=34), Attribute(Name('h', Load(), lineno=721, col_offset=34), 'file_open', Load(), lineno=721, col_offset=34), Call(Name('Request', Load(), lineno=721, col_offset=47), [Name('url', Load(), lineno=721, col_offset=55)], [], None, None, lineno=721, col_offset=47)], [], None, None, lineno=720, col_offset=16), lineno=720, col_offset=16)], [Expr(Call(Attribute(Name('os', Load(), lineno=723, col_offset=16), 'remove', Load(), lineno=723, col_offset=16), [Name('TESTFN', Load(), lineno=723, col_offset=26)], [], None, None, lineno=723, col_offset=16), lineno=723, col_offset=16)], lineno=713, col_offset=12)], [], lineno=705, col_offset=8), Assign([Name('h', Store(), lineno=725, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=725, col_offset=12), 'FileHandler', Load(), lineno=725, col_offset=12), [], [], None, None, lineno=725, col_offset=12), lineno=725, col_offset=8), Assign([Name('o', Store(), lineno=726, col_offset=8), Attribute(Name('h', Load(), lineno=726, col_offset=12), 'parent', Store(), lineno=726, col_offset=12)], Call(Name('MockOpener', Load(), lineno=726, col_offset=23), [], [], None, None, lineno=726, col_offset=23), lineno=726, col_offset=8), For(Tuple([Name('url', Store(), lineno=734, col_offset=12), Name('ftp', Store(), lineno=734, col_offset=17)], Store(), lineno=734, col_offset=12), List([Tuple([Str('file://ftp.example.com//foo.txt', lineno=735, col_offset=13), Name('True', Load(), lineno=735, col_offset=48)], Load(), lineno=735, col_offset=13), Tuple([Str('file://ftp.example.com///foo.txt', lineno=736, col_offset=13), Name('False', Load(), lineno=736, col_offset=49)], Load(), lineno=736, col_offset=13), Tuple([Str('file://ftp.example.com/foo.txt', lineno=738, col_offset=13), Name('False', Load(), lineno=738, col_offset=47)], Load(), lineno=738, col_offset=13), Tuple([Str('file://somehost//foo/something.txt', lineno=739, col_offset=13), Name('True', Load(), lineno=739, col_offset=51)], Load(), lineno=739, col_offset=13), Tuple([Str('file://localhost//foo/something.txt', lineno=740, col_offset=13), Name('False', Load(), lineno=740, col_offset=52)], Load(), lineno=740, col_offset=13)], Load(), lineno=734, col_offset=24), [Assign([Name('req', Store(), lineno=742, col_offset=12)], Call(Name('Request', Load(), lineno=742, col_offset=18), [Name('url', Load(), lineno=742, col_offset=26)], [], None, None, lineno=742, col_offset=18), lineno=742, col_offset=12), TryExcept([Expr(Call(Attribute(Name('h', Load(), lineno=744, col_offset=16), 'file_open', Load(), lineno=744, col_offset=16), [Name('req', Load(), lineno=744, col_offset=28)], [], None, None, lineno=744, col_offset=16), lineno=744, col_offset=16)], [ExceptHandler(Tuple([Attribute(Name('urllib2', Load(), lineno=746, col_offset=20), 'URLError', Load(), lineno=746, col_offset=20), Name('OSError', Load(), lineno=746, col_offset=38)], Load(), lineno=746, col_offset=20), None, [Expr(Call(Attribute(Name('self', Load(), lineno=747, col_offset=16), 'assertTrue', Load(), lineno=747, col_offset=16), [UnaryOp(Not(), Name('ftp', Load(), lineno=747, col_offset=36), lineno=747, col_offset=32)], [], None, None, lineno=747, col_offset=16), lineno=747, col_offset=16)], lineno=746, col_offset=12)], [Expr(Call(Attribute(Name('self', Load(), lineno=749, col_offset=16), 'assertTrue', Load(), lineno=749, col_offset=16), [Compare(Attribute(Name('o', Load(), lineno=749, col_offset=32), 'req', Load(), lineno=749, col_offset=32), [Is()], [Name('req', Load(), lineno=749, col_offset=41)], lineno=749, col_offset=32)], [], None, None, lineno=749, col_offset=16), lineno=749, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=750, col_offset=16), 'assertEqual', Load(), lineno=750, col_offset=16), [Attribute(Name('req', Load(), lineno=750, col_offset=33), 'type', Load(), lineno=750, col_offset=33), Str('ftp', lineno=750, col_offset=43)], [], None, None, lineno=750, col_offset=16), lineno=750, col_offset=16)], lineno=743, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=751, col_offset=12), 'assertEqual', Load(), lineno=751, col_offset=12), [Compare(Attribute(Name('req', Load(), lineno=751, col_offset=29), 'type', Load(), lineno=751, col_offset=29), [Is()], [Str('ftp', lineno=751, col_offset=41)], lineno=751, col_offset=29), Name('ftp', Load(), lineno=751, col_offset=48)], [], None, None, lineno=751, col_offset=12), lineno=751, col_offset=12)], [], lineno=734, col_offset=8)], [], lineno=660, col_offset=4), FunctionDef('test_http', arguments([Name('self', Param(), lineno=753, col_offset=18)], None, None, []), [Assign([Name('h', Store(), lineno=755, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=755, col_offset=12), 'AbstractHTTPHandler', Load(), lineno=755, col_offset=12), [], [], None, None, lineno=755, col_offset=12), lineno=755, col_offset=8), Assign([Name('o', Store(), lineno=756, col_offset=8), Attribute(Name('h', Load(), lineno=756, col_offset=12), 'parent', Store(), lineno=756, col_offset=12)], Call(Name('MockOpener', Load(), lineno=756, col_offset=23), [], [], None, None, lineno=756, col_offset=23), lineno=756, col_offset=8), Assign([Name('url', Store(), lineno=758, col_offset=8)], Str('http://example.com/', lineno=758, col_offset=14), lineno=758, col_offset=8), For(Tuple([Name('method', Store(), lineno=759, col_offset=12), Name('data', Store(), lineno=759, col_offset=20)], Store(), lineno=759, col_offset=12), List([Tuple([Str('GET', lineno=759, col_offset=30), Name('None', Load(), lineno=759, col_offset=37)], Load(), lineno=759, col_offset=30), Tuple([Str('POST', lineno=759, col_offset=45), Str('blah', lineno=759, col_offset=53)], Load(), lineno=759, col_offset=45)], Load(), lineno=759, col_offset=28), [Assign([Name('req', Store(), lineno=760, col_offset=12)], Call(Name('Request', Load(), lineno=760, col_offset=18), [Name('url', Load(), lineno=760, col_offset=26), Name('data', Load(), lineno=760, col_offset=31), Dict([Str('Foo', lineno=760, col_offset=38)], [Str('bar', lineno=760, col_offset=45)], lineno=760, col_offset=37)], [], None, None, lineno=760, col_offset=18), lineno=760, col_offset=12), Assign([Attribute(Name('req', Load(), lineno=761, col_offset=12), 'timeout', Store(), lineno=761, col_offset=12)], Name('None', Load(), lineno=761, col_offset=26), lineno=761, col_offset=12), Expr(Call(Attribute(Name('req', Load(), lineno=762, col_offset=12), 'add_unredirected_header', Load(), lineno=762, col_offset=12), [Str('Spam', lineno=762, col_offset=40), Str('eggs', lineno=762, col_offset=48)], [], None, None, lineno=762, col_offset=12), lineno=762, col_offset=12), Assign([Name('http', Store(), lineno=763, col_offset=12)], Call(Name('MockHTTPClass', Load(), lineno=763, col_offset=19), [], [], None, None, lineno=763, col_offset=19), lineno=763, col_offset=12), Assign([Name('r', Store(), lineno=764, col_offset=12)], Call(Attribute(Name('h', Load(), lineno=764, col_offset=16), 'do_open', Load(), lineno=764, col_offset=16), [Name('http', Load(), lineno=764, col_offset=26), Name('req', Load(), lineno=764, col_offset=32)], [], None, None, lineno=764, col_offset=16), lineno=764, col_offset=12), Expr(Attribute(Name('r', Load(), lineno=767, col_offset=12), 'read', Load(), lineno=767, col_offset=12), lineno=767, col_offset=12), Expr(Attribute(Name('r', Load(), lineno=767, col_offset=20), 'readline', Load(), lineno=767, col_offset=20), lineno=767, col_offset=20), Expr(Attribute(Name('r', Load(), lineno=768, col_offset=12), 'info', Load(), lineno=768, col_offset=12), lineno=768, col_offset=12), Expr(Attribute(Name('r', Load(), lineno=768, col_offset=20), 'geturl', Load(), lineno=768, col_offset=20), lineno=768, col_offset=20), Expr(Tuple([Attribute(Name('r', Load(), lineno=769, col_offset=12), 'code', Load(), lineno=769, col_offset=12), Compare(Attribute(Name('r', Load(), lineno=769, col_offset=20), 'msg', Load(), lineno=769, col_offset=20), [Eq()], [Num(200, lineno=769, col_offset=29)], lineno=769, col_offset=20), Str('OK', lineno=769, col_offset=34)], Load(), lineno=769, col_offset=12), lineno=769, col_offset=12), Assign([Name('hdrs', Store(), lineno=770, col_offset=12)], Call(Attribute(Name('r', Load(), lineno=770, col_offset=19), 'info', Load(), lineno=770, col_offset=19), [], [], None, None, lineno=770, col_offset=19), lineno=770, col_offset=12), Expr(Attribute(Name('hdrs', Load(), lineno=771, col_offset=12), 'get', Load(), lineno=771, col_offset=12), lineno=771, col_offset=12), Expr(Attribute(Name('hdrs', Load(), lineno=771, col_offset=22), 'has_key', Load(), lineno=771, col_offset=22), lineno=771, col_offset=22), Expr(Call(Attribute(Name('self', Load(), lineno=772, col_offset=12), 'assertEqual', Load(), lineno=772, col_offset=12), [Call(Attribute(Name('r', Load(), lineno=772, col_offset=29), 'geturl', Load(), lineno=772, col_offset=29), [], [], None, None, lineno=772, col_offset=29), Name('url', Load(), lineno=772, col_offset=41)], [], None, None, lineno=772, col_offset=12), lineno=772, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=774, col_offset=12), 'assertEqual', Load(), lineno=774, col_offset=12), [Attribute(Name('http', Load(), lineno=774, col_offset=29), 'host', Load(), lineno=774, col_offset=29), Str('example.com', lineno=774, col_offset=40)], [], None, None, lineno=774, col_offset=12), lineno=774, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=775, col_offset=12), 'assertEqual', Load(), lineno=775, col_offset=12), [Attribute(Name('http', Load(), lineno=775, col_offset=29), 'level', Load(), lineno=775, col_offset=29), Num(0, lineno=775, col_offset=41)], [], None, None, lineno=775, col_offset=12), lineno=775, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=776, col_offset=12), 'assertEqual', Load(), lineno=776, col_offset=12), [Attribute(Name('http', Load(), lineno=776, col_offset=29), 'method', Load(), lineno=776, col_offset=29), Name('method', Load(), lineno=776, col_offset=42)], [], None, None, lineno=776, col_offset=12), lineno=776, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=777, col_offset=12), 'assertEqual', Load(), lineno=777, col_offset=12), [Attribute(Name('http', Load(), lineno=777, col_offset=29), 'selector', Load(), lineno=777, col_offset=29), Str('/', lineno=777, col_offset=44)], [], None, None, lineno=777, col_offset=12), lineno=777, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=778, col_offset=12), 'assertEqual', Load(), lineno=778, col_offset=12), [Attribute(Name('http', Load(), lineno=778, col_offset=29), 'req_headers', Load(), lineno=778, col_offset=29), List([Tuple([Str('Connection', lineno=779, col_offset=31), Str('close', lineno=779, col_offset=45)], Load(), lineno=779, col_offset=31), Tuple([Str('Foo', lineno=780, col_offset=31), Str('bar', lineno=780, col_offset=38)], Load(), lineno=780, col_offset=31), Tuple([Str('Spam', lineno=780, col_offset=47), Str('eggs', lineno=780, col_offset=55)], Load(), lineno=780, col_offset=47)], Load(), lineno=779, col_offset=29)], [], None, None, lineno=778, col_offset=12), lineno=778, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=781, col_offset=12), 'assertEqual', Load(), lineno=781, col_offset=12), [Attribute(Name('http', Load(), lineno=781, col_offset=29), 'data', Load(), lineno=781, col_offset=29), Name('data', Load(), lineno=781, col_offset=40)], [], None, None, lineno=781, col_offset=12), lineno=781, col_offset=12)], [], lineno=759, col_offset=8), Assign([Attribute(Name('http', Load(), lineno=784, col_offset=8), 'raise_on_endheaders', Store(), lineno=784, col_offset=8)], Name('True', Load(), lineno=784, col_offset=35), lineno=784, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=785, col_offset=8), 'assertRaises', Load(), lineno=785, col_offset=8), [Attribute(Name('urllib2', Load(), lineno=785, col_offset=26), 'URLError', Load(), lineno=785, col_offset=26), Attribute(Name('h', Load(), lineno=785, col_offset=44), 'do_open', Load(), lineno=785, col_offset=44), Name('http', Load(), lineno=785, col_offset=55), Name('req', Load(), lineno=785, col_offset=61)], [], None, None, lineno=785, col_offset=8), lineno=785, col_offset=8), Assign([Attribute(Name('o', Load(), lineno=788, col_offset=8), 'addheaders', Store(), lineno=788, col_offset=8)], List([Tuple([Str('Spam', lineno=788, col_offset=25), Str('eggs', lineno=788, col_offset=33)], Load(), lineno=788, col_offset=25)], Load(), lineno=788, col_offset=23), lineno=788, col_offset=8), For(Name('data', Store(), lineno=789, col_offset=12), Tuple([Str('', lineno=789, col_offset=20), Name('None', Load(), lineno=789, col_offset=24)], Load(), lineno=789, col_offset=20), [Assign([Name('req', Store(), lineno=790, col_offset=12)], Call(Name('Request', Load(), lineno=790, col_offset=18), [Str('http://example.com/', lineno=790, col_offset=26), Name('data', Load(), lineno=790, col_offset=49)], [], None, None, lineno=790, col_offset=18), lineno=790, col_offset=12), Assign([Name('r', Store(), lineno=791, col_offset=12)], Call(Name('MockResponse', Load(), lineno=791, col_offset=16), [Num(200, lineno=791, col_offset=29), Str('OK', lineno=791, col_offset=34), Dict([], [], lineno=791, col_offset=40), Str('', lineno=791, col_offset=44)], [], None, None, lineno=791, col_offset=16), lineno=791, col_offset=12), Assign([Name('newreq', Store(), lineno=792, col_offset=12)], Call(Attribute(Name('h', Load(), lineno=792, col_offset=21), 'do_request_', Load(), lineno=792, col_offset=21), [Name('req', Load(), lineno=792, col_offset=35)], [], None, None, lineno=792, col_offset=21), lineno=792, col_offset=12), If(Compare(Name('data', Load(), lineno=793, col_offset=15), [Is()], [Name('None', Load(), lineno=793, col_offset=23)], lineno=793, col_offset=15), [Expr(Call(Attribute(Name('self', Load(), lineno=794, col_offset=16), 'assertNotIn', Load(), lineno=794, col_offset=16), [Str('Content-length', lineno=794, col_offset=33), Attribute(Name('req', Load(), lineno=794, col_offset=51), 'unredirected_hdrs', Load(), lineno=794, col_offset=51)], [], None, None, lineno=794, col_offset=16), lineno=794, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=795, col_offset=16), 'assertNotIn', Load(), lineno=795, col_offset=16), [Str('Content-type', lineno=795, col_offset=33), Attribute(Name('req', Load(), lineno=795, col_offset=49), 'unredirected_hdrs', Load(), lineno=795, col_offset=49)], [], None, None, lineno=795, col_offset=16), lineno=795, col_offset=16)], [Expr(Call(Attribute(Name('self', Load(), lineno=797, col_offset=16), 'assertEqual', Load(), lineno=797, col_offset=16), [Subscript(Attribute(Name('req', Load(), lineno=797, col_offset=33), 'unredirected_hdrs', Load(), lineno=797, col_offset=33), Index(Str('Content-length', lineno=797, col_offset=55)), Load(), lineno=797, col_offset=33), Str('0', lineno=797, col_offset=74)], [], None, None, lineno=797, col_offset=16), lineno=797, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=798, col_offset=16), 'assertEqual', Load(), lineno=798, col_offset=16), [Subscript(Attribute(Name('req', Load(), lineno=798, col_offset=33), 'unredirected_hdrs', Load(), lineno=798, col_offset=33), Index(Str('Content-type', lineno=798, col_offset=55)), Load(), lineno=798, col_offset=33), Str('application/x-www-form-urlencoded', lineno=799, col_offset=29)], [], None, None, lineno=798, col_offset=16), lineno=798, col_offset=16)], lineno=793, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=801, col_offset=12), 'assertEqual', Load(), lineno=801, col_offset=12), [Subscript(Attribute(Name('req', Load(), lineno=801, col_offset=29), 'unredirected_hdrs', Load(), lineno=801, col_offset=29), Index(Str('Host', lineno=801, col_offset=51)), Load(), lineno=801, col_offset=29), Str('example.com', lineno=801, col_offset=60)], [], None, None, lineno=801, col_offset=12), lineno=801, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=802, col_offset=12), 'assertEqual', Load(), lineno=802, col_offset=12), [Subscript(Attribute(Name('req', Load(), lineno=802, col_offset=29), 'unredirected_hdrs', Load(), lineno=802, col_offset=29), Index(Str('Spam', lineno=802, col_offset=51)), Load(), lineno=802, col_offset=29), Str('eggs', lineno=802, col_offset=60)], [], None, None, lineno=802, col_offset=12), lineno=802, col_offset=12), Expr(Call(Attribute(Name('req', Load(), lineno=805, col_offset=12), 'add_unredirected_header', Load(), lineno=805, col_offset=12), [Str('Content-length', lineno=805, col_offset=40), Str('foo', lineno=805, col_offset=58)], [], None, None, lineno=805, col_offset=12), lineno=805, col_offset=12), Expr(Call(Attribute(Name('req', Load(), lineno=806, col_offset=12), 'add_unredirected_header', Load(), lineno=806, col_offset=12), [Str('Content-type', lineno=806, col_offset=40), Str('bar', lineno=806, col_offset=56)], [], None, None, lineno=806, col_offset=12), lineno=806, col_offset=12), Expr(Call(Attribute(Name('req', Load(), lineno=807, col_offset=12), 'add_unredirected_header', Load(), lineno=807, col_offset=12), [Str('Host', lineno=807, col_offset=40), Str('baz', lineno=807, col_offset=48)], [], None, None, lineno=807, col_offset=12), lineno=807, col_offset=12), Expr(Call(Attribute(Name('req', Load(), lineno=808, col_offset=12), 'add_unredirected_header', Load(), lineno=808, col_offset=12), [Str('Spam', lineno=808, col_offset=40), Str('foo', lineno=808, col_offset=48)], [], None, None, lineno=808, col_offset=12), lineno=808, col_offset=12), Assign([Name('newreq', Store(), lineno=809, col_offset=12)], Call(Attribute(Name('h', Load(), lineno=809, col_offset=21), 'do_request_', Load(), lineno=809, col_offset=21), [Name('req', Load(), lineno=809, col_offset=35)], [], None, None, lineno=809, col_offset=21), lineno=809, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=810, col_offset=12), 'assertEqual', Load(), lineno=810, col_offset=12), [Subscript(Attribute(Name('req', Load(), lineno=810, col_offset=29), 'unredirected_hdrs', Load(), lineno=810, col_offset=29), Index(Str('Content-length', lineno=810, col_offset=51)), Load(), lineno=810, col_offset=29), Str('foo', lineno=810, col_offset=70)], [], None, None, lineno=810, col_offset=12), lineno=810, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=811, col_offset=12), 'assertEqual', Load(), lineno=811, col_offset=12), [Subscript(Attribute(Name('req', Load(), lineno=811, col_offset=29), 'unredirected_hdrs', Load(), lineno=811, col_offset=29), Index(Str('Content-type', lineno=811, col_offset=51)), Load(), lineno=811, col_offset=29), Str('bar', lineno=811, col_offset=68)], [], None, None, lineno=811, col_offset=12), lineno=811, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=812, col_offset=12), 'assertEqual', Load(), lineno=812, col_offset=12), [Subscript(Attribute(Name('req', Load(), lineno=812, col_offset=29), 'unredirected_hdrs', Load(), lineno=812, col_offset=29), Index(Str('Host', lineno=812, col_offset=51)), Load(), lineno=812, col_offset=29), Str('baz', lineno=812, col_offset=60)], [], None, None, lineno=812, col_offset=12), lineno=812, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=813, col_offset=12), 'assertEqual', Load(), lineno=813, col_offset=12), [Subscript(Attribute(Name('req', Load(), lineno=813, col_offset=29), 'unredirected_hdrs', Load(), lineno=813, col_offset=29), Index(Str('Spam', lineno=813, col_offset=51)), Load(), lineno=813, col_offset=29), Str('foo', lineno=813, col_offset=60)], [], None, None, lineno=813, col_offset=12), lineno=813, col_offset=12)], [], lineno=789, col_offset=8)], [], lineno=753, col_offset=4), FunctionDef('test_http_doubleslash', arguments([Name('self', Param(), lineno=815, col_offset=30)], None, None, []), [Assign([Name('h', Store(), lineno=818, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=818, col_offset=12), 'AbstractHTTPHandler', Load(), lineno=818, col_offset=12), [], [], None, None, lineno=818, col_offset=12), lineno=818, col_offset=8), Assign([Name('o', Store(), lineno=819, col_offset=8), Attribute(Name('h', Load(), lineno=819, col_offset=12), 'parent', Store(), lineno=819, col_offset=12)], Call(Name('MockOpener', Load(), lineno=819, col_offset=23), [], [], None, None, lineno=819, col_offset=23), lineno=819, col_offset=8), Assign([Name('data', Store(), lineno=821, col_offset=8)], Str('', lineno=821, col_offset=15), lineno=821, col_offset=8), Assign([Name('ds_urls', Store(), lineno=822, col_offset=8)], List([Str('http://example.com/foo/bar/baz.html', lineno=823, col_offset=12), Str('http://example.com//foo/bar/baz.html', lineno=824, col_offset=12), Str('http://example.com/foo//bar/baz.html', lineno=825, col_offset=12), Str('http://example.com/foo/bar//baz.html', lineno=826, col_offset=12)], Load(), lineno=822, col_offset=18), lineno=822, col_offset=8), For(Name('ds_url', Store(), lineno=829, col_offset=12), Name('ds_urls', Load(), lineno=829, col_offset=22), [Assign([Name('ds_req', Store(), lineno=830, col_offset=12)], Call(Name('Request', Load(), lineno=830, col_offset=21), [Name('ds_url', Load(), lineno=830, col_offset=29), Name('data', Load(), lineno=830, col_offset=37)], [], None, None, lineno=830, col_offset=21), lineno=830, col_offset=12), Assign([Name('np_ds_req', Store(), lineno=833, col_offset=12)], Call(Attribute(Name('h', Load(), lineno=833, col_offset=24), 'do_request_', Load(), lineno=833, col_offset=24), [Name('ds_req', Load(), lineno=833, col_offset=38)], [], None, None, lineno=833, col_offset=24), lineno=833, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=834, col_offset=12), 'assertEqual', Load(), lineno=834, col_offset=12), [Subscript(Attribute(Name('np_ds_req', Load(), lineno=834, col_offset=29), 'unredirected_hdrs', Load(), lineno=834, col_offset=29), Index(Str('Host', lineno=834, col_offset=57)), Load(), lineno=834, col_offset=29), Str('example.com', lineno=834, col_offset=65)], [], None, None, lineno=834, col_offset=12), lineno=834, col_offset=12), Expr(Call(Attribute(Name('ds_req', Load(), lineno=837, col_offset=12), 'set_proxy', Load(), lineno=837, col_offset=12), [Str('someproxy:3128', lineno=837, col_offset=29), Name('None', Load(), lineno=837, col_offset=46)], [], None, None, lineno=837, col_offset=12), lineno=837, col_offset=12), Assign([Name('p_ds_req', Store(), lineno=838, col_offset=12)], Call(Attribute(Name('h', Load(), lineno=838, col_offset=23), 'do_request_', Load(), lineno=838, col_offset=23), [Name('ds_req', Load(), lineno=838, col_offset=37)], [], None, None, lineno=838, col_offset=23), lineno=838, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=839, col_offset=12), 'assertEqual', Load(), lineno=839, col_offset=12), [Subscript(Attribute(Name('p_ds_req', Load(), lineno=839, col_offset=29), 'unredirected_hdrs', Load(), lineno=839, col_offset=29), Index(Str('Host', lineno=839, col_offset=56)), Load(), lineno=839, col_offset=29), Str('example.com', lineno=839, col_offset=64)], [], None, None, lineno=839, col_offset=12), lineno=839, col_offset=12)], [], lineno=829, col_offset=8)], [], lineno=815, col_offset=4), FunctionDef('test_fixpath_in_weirdurls', arguments([Name('self', Param(), lineno=841, col_offset=34)], None, None, []), [Assign([Name('h', Store(), lineno=845, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=845, col_offset=12), 'AbstractHTTPHandler', Load(), lineno=845, col_offset=12), [], [], None, None, lineno=845, col_offset=12), lineno=845, col_offset=8), Assign([Name('o', Store(), lineno=846, col_offset=8), Attribute(Name('h', Load(), lineno=846, col_offset=12), 'parent', Store(), lineno=846, col_offset=12)], Call(Name('MockOpener', Load(), lineno=846, col_offset=23), [], [], None, None, lineno=846, col_offset=23), lineno=846, col_offset=8), Assign([Name('weird_url', Store(), lineno=848, col_offset=8)], Str('http://www.python.org?getspam', lineno=848, col_offset=20), lineno=848, col_offset=8), Assign([Name('req', Store(), lineno=849, col_offset=8)], Call(Name('Request', Load(), lineno=849, col_offset=14), [Name('weird_url', Load(), lineno=849, col_offset=22)], [], None, None, lineno=849, col_offset=14), lineno=849, col_offset=8), Assign([Name('newreq', Store(), lineno=850, col_offset=8)], Call(Attribute(Name('h', Load(), lineno=850, col_offset=17), 'do_request_', Load(), lineno=850, col_offset=17), [Name('req', Load(), lineno=850, col_offset=31)], [], None, None, lineno=850, col_offset=17), lineno=850, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=851, col_offset=8), 'assertEqual', Load(), lineno=851, col_offset=8), [Call(Attribute(Name('newreq', Load(), lineno=851, col_offset=25), 'get_host', Load(), lineno=851, col_offset=25), [], [], None, None, lineno=851, col_offset=25), Str('www.python.org', lineno=851, col_offset=43)], [], None, None, lineno=851, col_offset=8), lineno=851, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=852, col_offset=8), 'assertEqual', Load(), lineno=852, col_offset=8), [Call(Attribute(Name('newreq', Load(), lineno=852, col_offset=25), 'get_selector', Load(), lineno=852, col_offset=25), [], [], None, None, lineno=852, col_offset=25), Str('/?getspam', lineno=852, col_offset=47)], [], None, None, lineno=852, col_offset=8), lineno=852, col_offset=8), Assign([Name('url_without_path', Store(), lineno=854, col_offset=8)], Str('http://www.python.org', lineno=854, col_offset=27), lineno=854, col_offset=8), Assign([Name('req', Store(), lineno=855, col_offset=8)], Call(Name('Request', Load(), lineno=855, col_offset=14), [Name('url_without_path', Load(), lineno=855, col_offset=22)], [], None, None, lineno=855, col_offset=14), lineno=855, col_offset=8), Assign([Name('newreq', Store(), lineno=856, col_offset=8)], Call(Attribute(Name('h', Load(), lineno=856, col_offset=17), 'do_request_', Load(), lineno=856, col_offset=17), [Name('req', Load(), lineno=856, col_offset=31)], [], None, None, lineno=856, col_offset=17), lineno=856, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=857, col_offset=8), 'assertEqual', Load(), lineno=857, col_offset=8), [Call(Attribute(Name('newreq', Load(), lineno=857, col_offset=25), 'get_host', Load(), lineno=857, col_offset=25), [], [], None, None, lineno=857, col_offset=25), Str('www.python.org', lineno=857, col_offset=43)], [], None, None, lineno=857, col_offset=8), lineno=857, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=858, col_offset=8), 'assertEqual', Load(), lineno=858, col_offset=8), [Call(Attribute(Name('newreq', Load(), lineno=858, col_offset=25), 'get_selector', Load(), lineno=858, col_offset=25), [], [], None, None, lineno=858, col_offset=25), Str('', lineno=858, col_offset=47)], [], None, None, lineno=858, col_offset=8), lineno=858, col_offset=8)], [], lineno=841, col_offset=4), FunctionDef('test_errors', arguments([Name('self', Param(), lineno=860, col_offset=20)], None, None, []), [Assign([Name('h', Store(), lineno=861, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=861, col_offset=12), 'HTTPErrorProcessor', Load(), lineno=861, col_offset=12), [], [], None, None, lineno=861, col_offset=12), lineno=861, col_offset=8), Assign([Name('o', Store(), lineno=862, col_offset=8), Attribute(Name('h', Load(), lineno=862, col_offset=12), 'parent', Store(), lineno=862, col_offset=12)], Call(Name('MockOpener', Load(), lineno=862, col_offset=23), [], [], None, None, lineno=862, col_offset=23), lineno=862, col_offset=8), Assign([Name('url', Store(), lineno=864, col_offset=8)], Str('http://example.com/', lineno=864, col_offset=14), lineno=864, col_offset=8), Assign([Name('req', Store(), lineno=865, col_offset=8)], Call(Name('Request', Load(), lineno=865, col_offset=14), [Name('url', Load(), lineno=865, col_offset=22)], [], None, None, lineno=865, col_offset=14), lineno=865, col_offset=8), Assign([Name('r', Store(), lineno=867, col_offset=8)], Call(Name('MockResponse', Load(), lineno=867, col_offset=12), [Num(200, lineno=867, col_offset=25), Str('OK', lineno=867, col_offset=30), Dict([], [], lineno=867, col_offset=36), Str('', lineno=867, col_offset=40), Name('url', Load(), lineno=867, col_offset=44)], [], None, None, lineno=867, col_offset=12), lineno=867, col_offset=8), Assign([Name('newr', Store(), lineno=868, col_offset=8)], Call(Attribute(Name('h', Load(), lineno=868, col_offset=15), 'http_response', Load(), lineno=868, col_offset=15), [Name('req', Load(), lineno=868, col_offset=31), Name('r', Load(), lineno=868, col_offset=36)], [], None, None, lineno=868, col_offset=15), lineno=868, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=869, col_offset=8), 'assertTrue', Load(), lineno=869, col_offset=8), [Compare(Name('r', Load(), lineno=869, col_offset=24), [Is()], [Name('newr', Load(), lineno=869, col_offset=29)], lineno=869, col_offset=24)], [], None, None, lineno=869, col_offset=8), lineno=869, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=870, col_offset=8), 'assertTrue', Load(), lineno=870, col_offset=8), [UnaryOp(Not(), Call(Name('hasattr', Load(), lineno=870, col_offset=28), [Name('o', Load(), lineno=870, col_offset=36), Str('proto', lineno=870, col_offset=39)], [], None, None, lineno=870, col_offset=28), lineno=870, col_offset=24)], [], None, None, lineno=870, col_offset=8), lineno=870, col_offset=8), Assign([Name('r', Store(), lineno=871, col_offset=8)], Call(Name('MockResponse', Load(), lineno=871, col_offset=12), [Num(202, lineno=871, col_offset=25), Str('Accepted', lineno=871, col_offset=30), Dict([], [], lineno=871, col_offset=42), Str('', lineno=871, col_offset=46), Name('url', Load(), lineno=871, col_offset=50)], [], None, None, lineno=871, col_offset=12), lineno=871, col_offset=8), Assign([Name('newr', Store(), lineno=872, col_offset=8)], Call(Attribute(Name('h', Load(), lineno=872, col_offset=15), 'http_response', Load(), lineno=872, col_offset=15), [Name('req', Load(), lineno=872, col_offset=31), Name('r', Load(), lineno=872, col_offset=36)], [], None, None, lineno=872, col_offset=15), lineno=872, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=873, col_offset=8), 'assertTrue', Load(), lineno=873, col_offset=8), [Compare(Name('r', Load(), lineno=873, col_offset=24), [Is()], [Name('newr', Load(), lineno=873, col_offset=29)], lineno=873, col_offset=24)], [], None, None, lineno=873, col_offset=8), lineno=873, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=874, col_offset=8), 'assertTrue', Load(), lineno=874, col_offset=8), [UnaryOp(Not(), Call(Name('hasattr', Load(), lineno=874, col_offset=28), [Name('o', Load(), lineno=874, col_offset=36), Str('proto', lineno=874, col_offset=39)], [], None, None, lineno=874, col_offset=28), lineno=874, col_offset=24)], [], None, None, lineno=874, col_offset=8), lineno=874, col_offset=8), Assign([Name('r', Store(), lineno=875, col_offset=8)], Call(Name('MockResponse', Load(), lineno=875, col_offset=12), [Num(206, lineno=875, col_offset=25), Str('Partial content', lineno=875, col_offset=30), Dict([], [], lineno=875, col_offset=49), Str('', lineno=875, col_offset=53), Name('url', Load(), lineno=875, col_offset=57)], [], None, None, lineno=875, col_offset=12), lineno=875, col_offset=8), Assign([Name('newr', Store(), lineno=876, col_offset=8)], Call(Attribute(Name('h', Load(), lineno=876, col_offset=15), 'http_response', Load(), lineno=876, col_offset=15), [Name('req', Load(), lineno=876, col_offset=31), Name('r', Load(), lineno=876, col_offset=36)], [], None, None, lineno=876, col_offset=15), lineno=876, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=877, col_offset=8), 'assertTrue', Load(), lineno=877, col_offset=8), [Compare(Name('r', Load(), lineno=877, col_offset=24), [Is()], [Name('newr', Load(), lineno=877, col_offset=29)], lineno=877, col_offset=24)], [], None, None, lineno=877, col_offset=8), lineno=877, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=878, col_offset=8), 'assertTrue', Load(), lineno=878, col_offset=8), [UnaryOp(Not(), Call(Name('hasattr', Load(), lineno=878, col_offset=28), [Name('o', Load(), lineno=878, col_offset=36), Str('proto', lineno=878, col_offset=39)], [], None, None, lineno=878, col_offset=28), lineno=878, col_offset=24)], [], None, None, lineno=878, col_offset=8), lineno=878, col_offset=8), Assign([Name('r', Store(), lineno=880, col_offset=8)], Call(Name('MockResponse', Load(), lineno=880, col_offset=12), [Num(502, lineno=880, col_offset=25), Str('Bad gateway', lineno=880, col_offset=30), Dict([], [], lineno=880, col_offset=45), Str('', lineno=880, col_offset=49), Name('url', Load(), lineno=880, col_offset=53)], [], None, None, lineno=880, col_offset=12), lineno=880, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=881, col_offset=8), 'assertTrue', Load(), lineno=881, col_offset=8), [Compare(Call(Attribute(Name('h', Load(), lineno=881, col_offset=24), 'http_response', Load(), lineno=881, col_offset=24), [Name('req', Load(), lineno=881, col_offset=40), Name('r', Load(), lineno=881, col_offset=45)], [], None, None, lineno=881, col_offset=24), [Is()], [Name('None', Load(), lineno=881, col_offset=51)], lineno=881, col_offset=24)], [], None, None, lineno=881, col_offset=8), lineno=881, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=882, col_offset=8), 'assertEqual', Load(), lineno=882, col_offset=8), [Attribute(Name('o', Load(), lineno=882, col_offset=25), 'proto', Load(), lineno=882, col_offset=25), Str('http', lineno=882, col_offset=34)], [], None, None, lineno=882, col_offset=8), lineno=882, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=883, col_offset=8), 'assertEqual', Load(), lineno=883, col_offset=8), [Attribute(Name('o', Load(), lineno=883, col_offset=25), 'args', Load(), lineno=883, col_offset=25), Tuple([Name('req', Load(), lineno=883, col_offset=34), Name('r', Load(), lineno=883, col_offset=39), Num(502, lineno=883, col_offset=42), Str('Bad gateway', lineno=883, col_offset=47), Dict([], [], lineno=883, col_offset=62)], Load(), lineno=883, col_offset=34)], [], None, None, lineno=883, col_offset=8), lineno=883, col_offset=8)], [], lineno=860, col_offset=4), FunctionDef('test_cookies', arguments([Name('self', Param(), lineno=885, col_offset=21)], None, None, []), [Assign([Name('cj', Store(), lineno=886, col_offset=8)], Call(Name('MockCookieJar', Load(), lineno=886, col_offset=13), [], [], None, None, lineno=886, col_offset=13), lineno=886, col_offset=8), Assign([Name('h', Store(), lineno=887, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=887, col_offset=12), 'HTTPCookieProcessor', Load(), lineno=887, col_offset=12), [Name('cj', Load(), lineno=887, col_offset=40)], [], None, None, lineno=887, col_offset=12), lineno=887, col_offset=8), Assign([Name('o', Store(), lineno=888, col_offset=8), Attribute(Name('h', Load(), lineno=888, col_offset=12), 'parent', Store(), lineno=888, col_offset=12)], Call(Name('MockOpener', Load(), lineno=888, col_offset=23), [], [], None, None, lineno=888, col_offset=23), lineno=888, col_offset=8), Assign([Name('req', Store(), lineno=890, col_offset=8)], Call(Name('Request', Load(), lineno=890, col_offset=14), [Str('http://example.com/', lineno=890, col_offset=22)], [], None, None, lineno=890, col_offset=14), lineno=890, col_offset=8), Assign([Name('r', Store(), lineno=891, col_offset=8)], Call(Name('MockResponse', Load(), lineno=891, col_offset=12), [Num(200, lineno=891, col_offset=25), Str('OK', lineno=891, col_offset=30), Dict([], [], lineno=891, col_offset=36), Str('', lineno=891, col_offset=40)], [], None, None, lineno=891, col_offset=12), lineno=891, col_offset=8), Assign([Name('newreq', Store(), lineno=892, col_offset=8)], Call(Attribute(Name('h', Load(), lineno=892, col_offset=17), 'http_request', Load(), lineno=892, col_offset=17), [Name('req', Load(), lineno=892, col_offset=32)], [], None, None, lineno=892, col_offset=17), lineno=892, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=893, col_offset=8), 'assertTrue', Load(), lineno=893, col_offset=8), [Compare(Attribute(Name('cj', Load(), lineno=893, col_offset=24), 'ach_req', Load(), lineno=893, col_offset=24), [Is(), Is()], [Name('req', Load(), lineno=893, col_offset=38), Name('newreq', Load(), lineno=893, col_offset=45)], lineno=893, col_offset=24)], [], None, None, lineno=893, col_offset=8), lineno=893, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=894, col_offset=8), 'assertEqual', Load(), lineno=894, col_offset=8), [Call(Attribute(Name('req', Load(), lineno=894, col_offset=25), 'get_origin_req_host', Load(), lineno=894, col_offset=25), [], [], None, None, lineno=894, col_offset=25), Str('example.com', lineno=894, col_offset=52)], [], None, None, lineno=894, col_offset=8), lineno=894, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=895, col_offset=8), 'assertTrue', Load(), lineno=895, col_offset=8), [UnaryOp(Not(), Call(Attribute(Name('req', Load(), lineno=895, col_offset=28), 'is_unverifiable', Load(), lineno=895, col_offset=28), [], [], None, None, lineno=895, col_offset=28), lineno=895, col_offset=24)], [], None, None, lineno=895, col_offset=8), lineno=895, col_offset=8), Assign([Name('newr', Store(), lineno=896, col_offset=8)], Call(Attribute(Name('h', Load(), lineno=896, col_offset=15), 'http_response', Load(), lineno=896, col_offset=15), [Name('req', Load(), lineno=896, col_offset=31), Name('r', Load(), lineno=896, col_offset=36)], [], None, None, lineno=896, col_offset=15), lineno=896, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=897, col_offset=8), 'assertTrue', Load(), lineno=897, col_offset=8), [Compare(Attribute(Name('cj', Load(), lineno=897, col_offset=24), 'ec_req', Load(), lineno=897, col_offset=24), [Is()], [Name('req', Load(), lineno=897, col_offset=37)], lineno=897, col_offset=24)], [], None, None, lineno=897, col_offset=8), lineno=897, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=898, col_offset=8), 'assertTrue', Load(), lineno=898, col_offset=8), [Compare(Attribute(Name('cj', Load(), lineno=898, col_offset=24), 'ec_r', Load(), lineno=898, col_offset=24), [Is(), Is()], [Name('r', Load(), lineno=898, col_offset=35), Name('newr', Load(), lineno=898, col_offset=40)], lineno=898, col_offset=24)], [], None, None, lineno=898, col_offset=8), lineno=898, col_offset=8)], [], lineno=885, col_offset=4), FunctionDef('test_redirect', arguments([Name('self', Param(), lineno=900, col_offset=22)], None, None, []), [Assign([Name('from_url', Store(), lineno=901, col_offset=8)], Str('http://example.com/a.html', lineno=901, col_offset=19), lineno=901, col_offset=8), Assign([Name('to_url', Store(), lineno=902, col_offset=8)], Str('http://example.com/b.html', lineno=902, col_offset=17), lineno=902, col_offset=8), Assign([Name('h', Store(), lineno=903, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=903, col_offset=12), 'HTTPRedirectHandler', Load(), lineno=903, col_offset=12), [], [], None, None, lineno=903, col_offset=12), lineno=903, col_offset=8), Assign([Name('o', Store(), lineno=904, col_offset=8), Attribute(Name('h', Load(), lineno=904, col_offset=12), 'parent', Store(), lineno=904, col_offset=12)], Call(Name('MockOpener', Load(), lineno=904, col_offset=23), [], [], None, None, lineno=904, col_offset=23), lineno=904, col_offset=8), For(Name('code', Store(), lineno=907, col_offset=12), Tuple([Num(301, lineno=907, col_offset=20), Num(302, lineno=907, col_offset=25), Num(303, lineno=907, col_offset=30), Num(307, lineno=907, col_offset=35)], Load(), lineno=907, col_offset=20), [For(Name('data', Store(), lineno=908, col_offset=16), Tuple([Name('None', Load(), lineno=908, col_offset=24), Str('blah\nblah\n', lineno=908, col_offset=30)], Load(), lineno=908, col_offset=24), [Assign([Name('method', Store(), lineno=909, col_offset=16)], Call(Name('getattr', Load(), lineno=909, col_offset=25), [Name('h', Load(), lineno=909, col_offset=33), BinOp(Str('http_error_%s', lineno=909, col_offset=36), Mod(), Name('code', Load(), lineno=909, col_offset=54), lineno=909, col_offset=36)], [], None, None, lineno=909, col_offset=25), lineno=909, col_offset=16), Assign([Name('req', Store(), lineno=910, col_offset=16)], Call(Name('Request', Load(), lineno=910, col_offset=22), [Name('from_url', Load(), lineno=910, col_offset=30), Name('data', Load(), lineno=910, col_offset=40)], [], None, None, lineno=910, col_offset=22), lineno=910, col_offset=16), Expr(Call(Attribute(Name('req', Load(), lineno=911, col_offset=16), 'add_header', Load(), lineno=911, col_offset=16), [Str('Nonsense', lineno=911, col_offset=31), Str('viking=withhold', lineno=911, col_offset=43)], [], None, None, lineno=911, col_offset=16), lineno=911, col_offset=16), Assign([Attribute(Name('req', Load(), lineno=912, col_offset=16), 'timeout', Store(), lineno=912, col_offset=16)], Attribute(Name('socket', Load(), lineno=912, col_offset=30), '_GLOBAL_DEFAULT_TIMEOUT', Load(), lineno=912, col_offset=30), lineno=912, col_offset=16), If(Compare(Name('data', Load(), lineno=913, col_offset=19), [IsNot()], [Name('None', Load(), lineno=913, col_offset=31)], lineno=913, col_offset=19), [Expr(Call(Attribute(Name('req', Load(), lineno=914, col_offset=20), 'add_header', Load(), lineno=914, col_offset=20), [Str('Content-Length', lineno=914, col_offset=35), Call(Name('str', Load(), lineno=914, col_offset=53), [Call(Name('len', Load(), lineno=914, col_offset=57), [Name('data', Load(), lineno=914, col_offset=61)], [], None, None, lineno=914, col_offset=57)], [], None, None, lineno=914, col_offset=53)], [], None, None, lineno=914, col_offset=20), lineno=914, col_offset=20)], [], lineno=913, col_offset=16), Expr(Call(Attribute(Name('req', Load(), lineno=915, col_offset=16), 'add_unredirected_header', Load(), lineno=915, col_offset=16), [Str('Spam', lineno=915, col_offset=44), Str('spam', lineno=915, col_offset=52)], [], None, None, lineno=915, col_offset=16), lineno=915, col_offset=16), TryExcept([Expr(Call(Name('method', Load(), lineno=917, col_offset=20), [Name('req', Load(), lineno=917, col_offset=27), Call(Name('MockFile', Load(), lineno=917, col_offset=32), [], [], None, None, lineno=917, col_offset=32), Name('code', Load(), lineno=917, col_offset=44), Str('Blah', lineno=917, col_offset=50), Call(Name('MockHeaders', Load(), lineno=918, col_offset=27), [Dict([Str('location', lineno=918, col_offset=40)], [Name('to_url', Load(), lineno=918, col_offset=52)], lineno=918, col_offset=39)], [], None, None, lineno=918, col_offset=27)], [], None, None, lineno=917, col_offset=20), lineno=917, col_offset=20)], [ExceptHandler(Attribute(Name('urllib2', Load(), lineno=919, col_offset=23), 'HTTPError', Load(), lineno=919, col_offset=23), None, [Expr(Call(Attribute(Name('self', Load(), lineno=921, col_offset=20), 'assertTrue', Load(), lineno=921, col_offset=20), [BoolOp(And(), [Compare(Name('code', Load(), lineno=921, col_offset=36), [Eq()], [Num(307, lineno=921, col_offset=44)], lineno=921, col_offset=36), Compare(Name('data', Load(), lineno=921, col_offset=52), [IsNot()], [Name('None', Load(), lineno=921, col_offset=64)], lineno=921, col_offset=52)], lineno=921, col_offset=36)], [], None, None, lineno=921, col_offset=20), lineno=921, col_offset=20)], lineno=919, col_offset=16)], [], lineno=916, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=922, col_offset=16), 'assertEqual', Load(), lineno=922, col_offset=16), [Call(Attribute(Attribute(Name('o', Load(), lineno=922, col_offset=33), 'req', Load(), lineno=922, col_offset=33), 'get_full_url', Load(), lineno=922, col_offset=33), [], [], None, None, lineno=922, col_offset=33), Name('to_url', Load(), lineno=922, col_offset=55)], [], None, None, lineno=922, col_offset=16), lineno=922, col_offset=16), TryExcept([Expr(Call(Attribute(Name('self', Load(), lineno=924, col_offset=20), 'assertEqual', Load(), lineno=924, col_offset=20), [Call(Attribute(Attribute(Name('o', Load(), lineno=924, col_offset=37), 'req', Load(), lineno=924, col_offset=37), 'get_method', Load(), lineno=924, col_offset=37), [], [], None, None, lineno=924, col_offset=37), Str('GET', lineno=924, col_offset=57)], [], None, None, lineno=924, col_offset=20), lineno=924, col_offset=20)], [ExceptHandler(Name('AttributeError', Load(), lineno=925, col_offset=23), None, [Expr(Call(Attribute(Name('self', Load(), lineno=926, col_offset=20), 'assertTrue', Load(), lineno=926, col_offset=20), [UnaryOp(Not(), Call(Attribute(Attribute(Name('o', Load(), lineno=926, col_offset=40), 'req', Load(), lineno=926, col_offset=40), 'has_data', Load(), lineno=926, col_offset=40), [], [], None, None, lineno=926, col_offset=40), lineno=926, col_offset=36)], [], None, None, lineno=926, col_offset=20), lineno=926, col_offset=20)], lineno=925, col_offset=16)], [], lineno=923, col_offset=16), Assign([Name('headers', Store(), lineno=930, col_offset=16)], ListComp(Call(Attribute(Name('x', Load(), lineno=930, col_offset=27), 'lower', Load(), lineno=930, col_offset=27), [], [], None, None, lineno=930, col_offset=27), [comprehension(Name('x', Store(), lineno=930, col_offset=41), Attribute(Attribute(Name('o', Load(), lineno=930, col_offset=46), 'req', Load(), lineno=930, col_offset=46), 'headers', Load(), lineno=930, col_offset=46), [])], lineno=930, col_offset=27), lineno=930, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=931, col_offset=16), 'assertNotIn', Load(), lineno=931, col_offset=16), [Str('content-length', lineno=931, col_offset=33), Name('headers', Load(), lineno=931, col_offset=51)], [], None, None, lineno=931, col_offset=16), lineno=931, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=932, col_offset=16), 'assertNotIn', Load(), lineno=932, col_offset=16), [Str('content-type', lineno=932, col_offset=33), Name('headers', Load(), lineno=932, col_offset=49)], [], None, None, lineno=932, col_offset=16), lineno=932, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=934, col_offset=16), 'assertEqual', Load(), lineno=934, col_offset=16), [Subscript(Attribute(Attribute(Name('o', Load(), lineno=934, col_offset=33), 'req', Load(), lineno=934, col_offset=33), 'headers', Load(), lineno=934, col_offset=33), Index(Str('Nonsense', lineno=934, col_offset=47)), Load(), lineno=934, col_offset=33), Str('viking=withhold', lineno=935, col_offset=33)], [], None, None, lineno=934, col_offset=16), lineno=934, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=936, col_offset=16), 'assertNotIn', Load(), lineno=936, col_offset=16), [Str('Spam', lineno=936, col_offset=33), Attribute(Attribute(Name('o', Load(), lineno=936, col_offset=41), 'req', Load(), lineno=936, col_offset=41), 'headers', Load(), lineno=936, col_offset=41)], [], None, None, lineno=936, col_offset=16), lineno=936, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=937, col_offset=16), 'assertNotIn', Load(), lineno=937, col_offset=16), [Str('Spam', lineno=937, col_offset=33), Attribute(Attribute(Name('o', Load(), lineno=937, col_offset=41), 'req', Load(), lineno=937, col_offset=41), 'unredirected_hdrs', Load(), lineno=937, col_offset=41)], [], None, None, lineno=937, col_offset=16), lineno=937, col_offset=16)], [], lineno=908, col_offset=12)], [], lineno=907, col_offset=8), Assign([Name('req', Store(), lineno=940, col_offset=8)], Call(Name('Request', Load(), lineno=940, col_offset=14), [Name('from_url', Load(), lineno=940, col_offset=22)], [], None, None, lineno=940, col_offset=14), lineno=940, col_offset=8), Assign([Attribute(Name('req', Load(), lineno=941, col_offset=8), 'timeout', Store(), lineno=941, col_offset=8)], Attribute(Name('socket', Load(), lineno=941, col_offset=22), '_GLOBAL_DEFAULT_TIMEOUT', Load(), lineno=941, col_offset=22), lineno=941, col_offset=8), FunctionDef('redirect', arguments([Name('h', Param(), lineno=942, col_offset=21), Name('req', Param(), lineno=942, col_offset=24), Name('url', Param(), lineno=942, col_offset=29)], None, None, [Name('to_url', Load(), lineno=942, col_offset=33)]), [Expr(Call(Attribute(Name('h', Load(), lineno=943, col_offset=12), 'http_error_302', Load(), lineno=943, col_offset=12), [Name('req', Load(), lineno=943, col_offset=29), Call(Name('MockFile', Load(), lineno=943, col_offset=34), [], [], None, None, lineno=943, col_offset=34), Num(302, lineno=943, col_offset=46), Str('Blah', lineno=943, col_offset=51), Call(Name('MockHeaders', Load(), lineno=944, col_offset=29), [Dict([Str('location', lineno=944, col_offset=42)], [Name('url', Load(), lineno=944, col_offset=54)], lineno=944, col_offset=41)], [], None, None, lineno=944, col_offset=29)], [], None, None, lineno=943, col_offset=12), lineno=943, col_offset=12)], [], lineno=942, col_offset=8), Assign([Name('req', Store(), lineno=949, col_offset=8)], Call(Name('Request', Load(), lineno=949, col_offset=14), [Name('from_url', Load(), lineno=949, col_offset=22)], [keyword('origin_req_host', Str('example.com', lineno=949, col_offset=48))], None, None, lineno=949, col_offset=14), lineno=949, col_offset=8), Assign([Name('count', Store(), lineno=950, col_offset=8)], Num(0, lineno=950, col_offset=16), lineno=950, col_offset=8), Assign([Attribute(Name('req', Load(), lineno=951, col_offset=8), 'timeout', Store(), lineno=951, col_offset=8)], Attribute(Name('socket', Load(), lineno=951, col_offset=22), '_GLOBAL_DEFAULT_TIMEOUT', Load(), lineno=951, col_offset=22), lineno=951, col_offset=8), TryExcept([While(Num(1, lineno=953, col_offset=18), [Expr(Call(Name('redirect', Load(), lineno=954, col_offset=16), [Name('h', Load(), lineno=954, col_offset=25), Name('req', Load(), lineno=954, col_offset=28), Str('http://example.com/', lineno=954, col_offset=33)], [], None, None, lineno=954, col_offset=16), lineno=954, col_offset=16), Assign([Name('count', Store(), lineno=955, col_offset=16)], BinOp(Name('count', Load(), lineno=955, col_offset=24), Add(), Num(1, lineno=955, col_offset=32), lineno=955, col_offset=24), lineno=955, col_offset=16)], [], lineno=953, col_offset=12)], [ExceptHandler(Attribute(Name('urllib2', Load(), lineno=956, col_offset=15), 'HTTPError', Load(), lineno=956, col_offset=15), None, [Expr(Call(Attribute(Name('self', Load(), lineno=958, col_offset=12), 'assertEqual', Load(), lineno=958, col_offset=12), [Name('count', Load(), lineno=958, col_offset=29), Attribute(Attribute(Name('urllib2', Load(), lineno=958, col_offset=36), 'HTTPRedirectHandler', Load(), lineno=958, col_offset=36), 'max_repeats', Load(), lineno=958, col_offset=36)], [], None, None, lineno=958, col_offset=12), lineno=958, col_offset=12)], lineno=956, col_offset=8)], [], lineno=952, col_offset=8), Assign([Name('req', Store(), lineno=961, col_offset=8)], Call(Name('Request', Load(), lineno=961, col_offset=14), [Name('from_url', Load(), lineno=961, col_offset=22)], [keyword('origin_req_host', Str('example.com', lineno=961, col_offset=48))], None, None, lineno=961, col_offset=14), lineno=961, col_offset=8), Assign([Name('count', Store(), lineno=962, col_offset=8)], Num(0, lineno=962, col_offset=16), lineno=962, col_offset=8), Assign([Attribute(Name('req', Load(), lineno=963, col_offset=8), 'timeout', Store(), lineno=963, col_offset=8)], Attribute(Name('socket', Load(), lineno=963, col_offset=22), '_GLOBAL_DEFAULT_TIMEOUT', Load(), lineno=963, col_offset=22), lineno=963, col_offset=8), TryExcept([While(Num(1, lineno=965, col_offset=18), [Expr(Call(Name('redirect', Load(), lineno=966, col_offset=16), [Name('h', Load(), lineno=966, col_offset=25), Name('req', Load(), lineno=966, col_offset=28), BinOp(Str('http://example.com/%d', lineno=966, col_offset=33), Mod(), Name('count', Load(), lineno=966, col_offset=59), lineno=966, col_offset=33)], [], None, None, lineno=966, col_offset=16), lineno=966, col_offset=16), Assign([Name('count', Store(), lineno=967, col_offset=16)], BinOp(Name('count', Load(), lineno=967, col_offset=24), Add(), Num(1, lineno=967, col_offset=32), lineno=967, col_offset=24), lineno=967, col_offset=16)], [], lineno=965, col_offset=12)], [ExceptHandler(Attribute(Name('urllib2', Load(), lineno=968, col_offset=15), 'HTTPError', Load(), lineno=968, col_offset=15), None, [Expr(Call(Attribute(Name('self', Load(), lineno=969, col_offset=12), 'assertEqual', Load(), lineno=969, col_offset=12), [Name('count', Load(), lineno=969, col_offset=29), Attribute(Attribute(Name('urllib2', Load(), lineno=970, col_offset=29), 'HTTPRedirectHandler', Load(), lineno=970, col_offset=29), 'max_redirections', Load(), lineno=970, col_offset=29)], [], None, None, lineno=969, col_offset=12), lineno=969, col_offset=12)], lineno=968, col_offset=8)], [], lineno=964, col_offset=8)], [], lineno=900, col_offset=4), FunctionDef('test_cookie_redirect', arguments([Name('self', Param(), lineno=972, col_offset=29)], None, None, []), [ImportFrom('cookielib', [alias('CookieJar', None)], 0, lineno=974, col_offset=8), ImportFrom('test.test_cookielib', [alias('interact_netscape', None)], 0, lineno=976, col_offset=8), Assign([Name('cj', Store(), lineno=978, col_offset=8)], Call(Name('CookieJar', Load(), lineno=978, col_offset=13), [], [], None, None, lineno=978, col_offset=13), lineno=978, col_offset=8), Expr(Call(Name('interact_netscape', Load(), lineno=979, col_offset=8), [Name('cj', Load(), lineno=979, col_offset=26), Str('http://www.example.com/', lineno=979, col_offset=30), Str('spam=eggs', lineno=979, col_offset=57)], [], None, None, lineno=979, col_offset=8), lineno=979, col_offset=8), Assign([Name('hh', Store(), lineno=980, col_offset=8)], Call(Name('MockHTTPHandler', Load(), lineno=980, col_offset=13), [Num(302, lineno=980, col_offset=29), Str('Location: http://www.cracker.com/\r\n\r\n', lineno=980, col_offset=34)], [], None, None, lineno=980, col_offset=13), lineno=980, col_offset=8), Assign([Name('hdeh', Store(), lineno=981, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=981, col_offset=15), 'HTTPDefaultErrorHandler', Load(), lineno=981, col_offset=15), [], [], None, None, lineno=981, col_offset=15), lineno=981, col_offset=8), Assign([Name('hrh', Store(), lineno=982, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=982, col_offset=14), 'HTTPRedirectHandler', Load(), lineno=982, col_offset=14), [], [], None, None, lineno=982, col_offset=14), lineno=982, col_offset=8), Assign([Name('cp', Store(), lineno=983, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=983, col_offset=13), 'HTTPCookieProcessor', Load(), lineno=983, col_offset=13), [Name('cj', Load(), lineno=983, col_offset=41)], [], None, None, lineno=983, col_offset=13), lineno=983, col_offset=8), Assign([Name('o', Store(), lineno=984, col_offset=8)], Call(Name('build_test_opener', Load(), lineno=984, col_offset=12), [Name('hh', Load(), lineno=984, col_offset=30), Name('hdeh', Load(), lineno=984, col_offset=34), Name('hrh', Load(), lineno=984, col_offset=40), Name('cp', Load(), lineno=984, col_offset=45)], [], None, None, lineno=984, col_offset=12), lineno=984, col_offset=8), Expr(Call(Attribute(Name('o', Load(), lineno=985, col_offset=8), 'open', Load(), lineno=985, col_offset=8), [Str('http://www.example.com/', lineno=985, col_offset=15)], [], None, None, lineno=985, col_offset=8), lineno=985, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=986, col_offset=8), 'assertTrue', Load(), lineno=986, col_offset=8), [UnaryOp(Not(), Call(Attribute(Attribute(Name('hh', Load(), lineno=986, col_offset=28), 'req', Load(), lineno=986, col_offset=28), 'has_header', Load(), lineno=986, col_offset=28), [Str('Cookie', lineno=986, col_offset=46)], [], None, None, lineno=986, col_offset=28), lineno=986, col_offset=24)], [], None, None, lineno=986, col_offset=8), lineno=986, col_offset=8)], [], lineno=972, col_offset=4), FunctionDef('test_proxy', arguments([Name('self', Param(), lineno=988, col_offset=19)], None, None, []), [Assign([Name('o', Store(), lineno=989, col_offset=8)], Call(Name('OpenerDirector', Load(), lineno=989, col_offset=12), [], [], None, None, lineno=989, col_offset=12), lineno=989, col_offset=8), Assign([Name('ph', Store(), lineno=990, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=990, col_offset=13), 'ProxyHandler', Load(), lineno=990, col_offset=13), [Call(Name('dict', Load(), lineno=990, col_offset=34), [], [keyword('http', Str('proxy.example.com:3128', lineno=990, col_offset=44))], None, None, lineno=990, col_offset=34)], [], None, None, lineno=990, col_offset=13), lineno=990, col_offset=8), Expr(Call(Attribute(Name('o', Load(), lineno=991, col_offset=8), 'add_handler', Load(), lineno=991, col_offset=8), [Name('ph', Load(), lineno=991, col_offset=22)], [], None, None, lineno=991, col_offset=8), lineno=991, col_offset=8), Assign([Name('meth_spec', Store(), lineno=992, col_offset=8)], List([List([Tuple([Str('http_open', lineno=993, col_offset=14), Str('return response', lineno=993, col_offset=27)], Load(), lineno=993, col_offset=14)], Load(), lineno=993, col_offset=12)], Load(), lineno=992, col_offset=20), lineno=992, col_offset=8), Assign([Name('handlers', Store(), lineno=995, col_offset=8)], Call(Name('add_ordered_mock_handlers', Load(), lineno=995, col_offset=19), [Name('o', Load(), lineno=995, col_offset=45), Name('meth_spec', Load(), lineno=995, col_offset=48)], [], None, None, lineno=995, col_offset=19), lineno=995, col_offset=8), Assign([Name('req', Store(), lineno=997, col_offset=8)], Call(Name('Request', Load(), lineno=997, col_offset=14), [Str('http://acme.example.com/', lineno=997, col_offset=22)], [], None, None, lineno=997, col_offset=14), lineno=997, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=998, col_offset=8), 'assertEqual', Load(), lineno=998, col_offset=8), [Call(Attribute(Name('req', Load(), lineno=998, col_offset=25), 'get_host', Load(), lineno=998, col_offset=25), [], [], None, None, lineno=998, col_offset=25), Str('acme.example.com', lineno=998, col_offset=41)], [], None, None, lineno=998, col_offset=8), lineno=998, col_offset=8), Assign([Name('r', Store(), lineno=999, col_offset=8)], Call(Attribute(Name('o', Load(), lineno=999, col_offset=12), 'open', Load(), lineno=999, col_offset=12), [Name('req', Load(), lineno=999, col_offset=19)], [], None, None, lineno=999, col_offset=12), lineno=999, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1000, col_offset=8), 'assertEqual', Load(), lineno=1000, col_offset=8), [Call(Attribute(Name('req', Load(), lineno=1000, col_offset=25), 'get_host', Load(), lineno=1000, col_offset=25), [], [], None, None, lineno=1000, col_offset=25), Str('proxy.example.com:3128', lineno=1000, col_offset=41)], [], None, None, lineno=1000, col_offset=8), lineno=1000, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1002, col_offset=8), 'assertEqual', Load(), lineno=1002, col_offset=8), [List([Tuple([Subscript(Name('handlers', Load(), lineno=1002, col_offset=27), Index(Num(0, lineno=1002, col_offset=36)), Load(), lineno=1002, col_offset=27), Str('http_open', lineno=1002, col_offset=40)], Load(), lineno=1002, col_offset=27)], Load(), lineno=1002, col_offset=25), ListComp(Subscript(Name('tup', Load(), lineno=1003, col_offset=26), Slice(Num(0, lineno=1003, col_offset=30), Num(2, lineno=1003, col_offset=32), None), Load(), lineno=1003, col_offset=26), [comprehension(Name('tup', Store(), lineno=1003, col_offset=39), Attribute(Name('o', Load(), lineno=1003, col_offset=46), 'calls', Load(), lineno=1003, col_offset=46), [])], lineno=1003, col_offset=26)], [], None, None, lineno=1002, col_offset=8), lineno=1002, col_offset=8)], [], lineno=988, col_offset=4), FunctionDef('test_proxy_no_proxy', arguments([Name('self', Param(), lineno=1005, col_offset=28)], None, None, []), [Assign([Subscript(Attribute(Name('os', Load(), lineno=1006, col_offset=8), 'environ', Load(), lineno=1006, col_offset=8), Index(Str('no_proxy', lineno=1006, col_offset=19)), Store(), lineno=1006, col_offset=8)], Str('python.org', lineno=1006, col_offset=33), lineno=1006, col_offset=8), Assign([Name('o', Store(), lineno=1007, col_offset=8)], Call(Name('OpenerDirector', Load(), lineno=1007, col_offset=12), [], [], None, None, lineno=1007, col_offset=12), lineno=1007, col_offset=8), Assign([Name('ph', Store(), lineno=1008, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=1008, col_offset=13), 'ProxyHandler', Load(), lineno=1008, col_offset=13), [Call(Name('dict', Load(), lineno=1008, col_offset=34), [], [keyword('http', Str('proxy.example.com', lineno=1008, col_offset=44))], None, None, lineno=1008, col_offset=34)], [], None, None, lineno=1008, col_offset=13), lineno=1008, col_offset=8), Expr(Call(Attribute(Name('o', Load(), lineno=1009, col_offset=8), 'add_handler', Load(), lineno=1009, col_offset=8), [Name('ph', Load(), lineno=1009, col_offset=22)], [], None, None, lineno=1009, col_offset=8), lineno=1009, col_offset=8), Assign([Name('req', Store(), lineno=1010, col_offset=8)], Call(Name('Request', Load(), lineno=1010, col_offset=14), [Str('http://www.perl.org/', lineno=1010, col_offset=22)], [], None, None, lineno=1010, col_offset=14), lineno=1010, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1011, col_offset=8), 'assertEqual', Load(), lineno=1011, col_offset=8), [Call(Attribute(Name('req', Load(), lineno=1011, col_offset=25), 'get_host', Load(), lineno=1011, col_offset=25), [], [], None, None, lineno=1011, col_offset=25), Str('www.perl.org', lineno=1011, col_offset=41)], [], None, None, lineno=1011, col_offset=8), lineno=1011, col_offset=8), Assign([Name('r', Store(), lineno=1012, col_offset=8)], Call(Attribute(Name('o', Load(), lineno=1012, col_offset=12), 'open', Load(), lineno=1012, col_offset=12), [Name('req', Load(), lineno=1012, col_offset=19)], [], None, None, lineno=1012, col_offset=12), lineno=1012, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1013, col_offset=8), 'assertEqual', Load(), lineno=1013, col_offset=8), [Call(Attribute(Name('req', Load(), lineno=1013, col_offset=25), 'get_host', Load(), lineno=1013, col_offset=25), [], [], None, None, lineno=1013, col_offset=25), Str('proxy.example.com', lineno=1013, col_offset=41)], [], None, None, lineno=1013, col_offset=8), lineno=1013, col_offset=8), Assign([Name('req', Store(), lineno=1014, col_offset=8)], Call(Name('Request', Load(), lineno=1014, col_offset=14), [Str('http://www.python.org', lineno=1014, col_offset=22)], [], None, None, lineno=1014, col_offset=14), lineno=1014, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1015, col_offset=8), 'assertEqual', Load(), lineno=1015, col_offset=8), [Call(Attribute(Name('req', Load(), lineno=1015, col_offset=25), 'get_host', Load(), lineno=1015, col_offset=25), [], [], None, None, lineno=1015, col_offset=25), Str('www.python.org', lineno=1015, col_offset=41)], [], None, None, lineno=1015, col_offset=8), lineno=1015, col_offset=8), Assign([Name('r', Store(), lineno=1016, col_offset=8)], Call(Attribute(Name('o', Load(), lineno=1016, col_offset=12), 'open', Load(), lineno=1016, col_offset=12), [Name('req', Load(), lineno=1016, col_offset=19)], [], None, None, lineno=1016, col_offset=12), lineno=1016, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1017, col_offset=8), 'assertEqual', Load(), lineno=1017, col_offset=8), [Call(Attribute(Name('req', Load(), lineno=1017, col_offset=25), 'get_host', Load(), lineno=1017, col_offset=25), [], [], None, None, lineno=1017, col_offset=25), Str('www.python.org', lineno=1017, col_offset=41)], [], None, None, lineno=1017, col_offset=8), lineno=1017, col_offset=8), Delete([Subscript(Attribute(Name('os', Load(), lineno=1018, col_offset=12), 'environ', Load(), lineno=1018, col_offset=12), Index(Str('no_proxy', lineno=1018, col_offset=23)), Del(), lineno=1018, col_offset=12)], lineno=1018, col_offset=8)], [], lineno=1005, col_offset=4), FunctionDef('test_proxy_https', arguments([Name('self', Param(), lineno=1021, col_offset=25)], None, None, []), [Assign([Name('o', Store(), lineno=1022, col_offset=8)], Call(Name('OpenerDirector', Load(), lineno=1022, col_offset=12), [], [], None, None, lineno=1022, col_offset=12), lineno=1022, col_offset=8), Assign([Name('ph', Store(), lineno=1023, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=1023, col_offset=13), 'ProxyHandler', Load(), lineno=1023, col_offset=13), [Call(Name('dict', Load(), lineno=1023, col_offset=34), [], [keyword('https', Str('proxy.example.com:3128', lineno=1023, col_offset=45))], None, None, lineno=1023, col_offset=34)], [], None, None, lineno=1023, col_offset=13), lineno=1023, col_offset=8), Expr(Call(Attribute(Name('o', Load(), lineno=1024, col_offset=8), 'add_handler', Load(), lineno=1024, col_offset=8), [Name('ph', Load(), lineno=1024, col_offset=22)], [], None, None, lineno=1024, col_offset=8), lineno=1024, col_offset=8), Assign([Name('meth_spec', Store(), lineno=1025, col_offset=8)], List([List([Tuple([Str('https_open', lineno=1026, col_offset=14), Str('return response', lineno=1026, col_offset=27)], Load(), lineno=1026, col_offset=14)], Load(), lineno=1026, col_offset=12)], Load(), lineno=1025, col_offset=20), lineno=1025, col_offset=8), Assign([Name('handlers', Store(), lineno=1028, col_offset=8)], Call(Name('add_ordered_mock_handlers', Load(), lineno=1028, col_offset=19), [Name('o', Load(), lineno=1028, col_offset=45), Name('meth_spec', Load(), lineno=1028, col_offset=48)], [], None, None, lineno=1028, col_offset=19), lineno=1028, col_offset=8), Assign([Name('req', Store(), lineno=1029, col_offset=8)], Call(Name('Request', Load(), lineno=1029, col_offset=14), [Str('https://www.example.com/', lineno=1029, col_offset=22)], [], None, None, lineno=1029, col_offset=14), lineno=1029, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1030, col_offset=8), 'assertEqual', Load(), lineno=1030, col_offset=8), [Call(Attribute(Name('req', Load(), lineno=1030, col_offset=25), 'get_host', Load(), lineno=1030, col_offset=25), [], [], None, None, lineno=1030, col_offset=25), Str('www.example.com', lineno=1030, col_offset=41)], [], None, None, lineno=1030, col_offset=8), lineno=1030, col_offset=8), Assign([Name('r', Store(), lineno=1031, col_offset=8)], Call(Attribute(Name('o', Load(), lineno=1031, col_offset=12), 'open', Load(), lineno=1031, col_offset=12), [Name('req', Load(), lineno=1031, col_offset=19)], [], None, None, lineno=1031, col_offset=12), lineno=1031, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1032, col_offset=8), 'assertEqual', Load(), lineno=1032, col_offset=8), [Call(Attribute(Name('req', Load(), lineno=1032, col_offset=25), 'get_host', Load(), lineno=1032, col_offset=25), [], [], None, None, lineno=1032, col_offset=25), Str('proxy.example.com:3128', lineno=1032, col_offset=41)], [], None, None, lineno=1032, col_offset=8), lineno=1032, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1033, col_offset=8), 'assertEqual', Load(), lineno=1033, col_offset=8), [List([Tuple([Subscript(Name('handlers', Load(), lineno=1033, col_offset=27), Index(Num(0, lineno=1033, col_offset=36)), Load(), lineno=1033, col_offset=27), Str('https_open', lineno=1033, col_offset=40)], Load(), lineno=1033, col_offset=27)], Load(), lineno=1033, col_offset=25), ListComp(Subscript(Name('tup', Load(), lineno=1034, col_offset=26), Slice(Num(0, lineno=1034, col_offset=30), Num(2, lineno=1034, col_offset=32), None), Load(), lineno=1034, col_offset=26), [comprehension(Name('tup', Store(), lineno=1034, col_offset=39), Attribute(Name('o', Load(), lineno=1034, col_offset=46), 'calls', Load(), lineno=1034, col_offset=46), [])], lineno=1034, col_offset=26)], [], None, None, lineno=1033, col_offset=8), lineno=1033, col_offset=8)], [], lineno=1021, col_offset=4), FunctionDef('test_proxy_https_proxy_authorization', arguments([Name('self', Param(), lineno=1036, col_offset=45)], None, None, []), [Assign([Name('o', Store(), lineno=1037, col_offset=8)], Call(Name('OpenerDirector', Load(), lineno=1037, col_offset=12), [], [], None, None, lineno=1037, col_offset=12), lineno=1037, col_offset=8), Assign([Name('ph', Store(), lineno=1038, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=1038, col_offset=13), 'ProxyHandler', Load(), lineno=1038, col_offset=13), [Call(Name('dict', Load(), lineno=1038, col_offset=34), [], [keyword('https', Str('proxy.example.com:3128', lineno=1038, col_offset=45))], None, None, lineno=1038, col_offset=34)], [], None, None, lineno=1038, col_offset=13), lineno=1038, col_offset=8), Expr(Call(Attribute(Name('o', Load(), lineno=1039, col_offset=8), 'add_handler', Load(), lineno=1039, col_offset=8), [Name('ph', Load(), lineno=1039, col_offset=22)], [], None, None, lineno=1039, col_offset=8), lineno=1039, col_offset=8), Assign([Name('https_handler', Store(), lineno=1040, col_offset=8)], Call(Name('MockHTTPSHandler', Load(), lineno=1040, col_offset=24), [], [], None, None, lineno=1040, col_offset=24), lineno=1040, col_offset=8), Expr(Call(Attribute(Name('o', Load(), lineno=1041, col_offset=8), 'add_handler', Load(), lineno=1041, col_offset=8), [Name('https_handler', Load(), lineno=1041, col_offset=22)], [], None, None, lineno=1041, col_offset=8), lineno=1041, col_offset=8), Assign([Name('req', Store(), lineno=1042, col_offset=8)], Call(Name('Request', Load(), lineno=1042, col_offset=14), [Str('https://www.example.com/', lineno=1042, col_offset=22)], [], None, None, lineno=1042, col_offset=14), lineno=1042, col_offset=8), Expr(Call(Attribute(Name('req', Load(), lineno=1043, col_offset=8), 'add_header', Load(), lineno=1043, col_offset=8), [Str('Proxy-Authorization', lineno=1043, col_offset=23), Str('FooBar', lineno=1043, col_offset=45)], [], None, None, lineno=1043, col_offset=8), lineno=1043, col_offset=8), Expr(Call(Attribute(Name('req', Load(), lineno=1044, col_offset=8), 'add_header', Load(), lineno=1044, col_offset=8), [Str('User-Agent', lineno=1044, col_offset=23), Str('Grail', lineno=1044, col_offset=36)], [], None, None, lineno=1044, col_offset=8), lineno=1044, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1045, col_offset=8), 'assertEqual', Load(), lineno=1045, col_offset=8), [Call(Attribute(Name('req', Load(), lineno=1045, col_offset=25), 'get_host', Load(), lineno=1045, col_offset=25), [], [], None, None, lineno=1045, col_offset=25), Str('www.example.com', lineno=1045, col_offset=41)], [], None, None, lineno=1045, col_offset=8), lineno=1045, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1046, col_offset=8), 'assertIsNone', Load(), lineno=1046, col_offset=8), [Attribute(Name('req', Load(), lineno=1046, col_offset=26), '_tunnel_host', Load(), lineno=1046, col_offset=26)], [], None, None, lineno=1046, col_offset=8), lineno=1046, col_offset=8), Assign([Name('r', Store(), lineno=1047, col_offset=8)], Call(Attribute(Name('o', Load(), lineno=1047, col_offset=12), 'open', Load(), lineno=1047, col_offset=12), [Name('req', Load(), lineno=1047, col_offset=19)], [], None, None, lineno=1047, col_offset=12), lineno=1047, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1051, col_offset=8), 'assertNotIn', Load(), lineno=1051, col_offset=8), [Tuple([Str('Proxy-Authorization', lineno=1051, col_offset=26), Str('FooBar', lineno=1051, col_offset=48)], Load(), lineno=1051, col_offset=26), Attribute(Attribute(Name('https_handler', Load(), lineno=1052, col_offset=25), 'httpconn', Load(), lineno=1052, col_offset=25), 'req_headers', Load(), lineno=1052, col_offset=25)], [], None, None, lineno=1051, col_offset=8), lineno=1051, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1053, col_offset=8), 'assertIn', Load(), lineno=1053, col_offset=8), [Tuple([Str('User-Agent', lineno=1053, col_offset=23), Str('Grail', lineno=1053, col_offset=36)], Load(), lineno=1053, col_offset=23), Attribute(Attribute(Name('https_handler', Load(), lineno=1054, col_offset=22), 'httpconn', Load(), lineno=1054, col_offset=22), 'req_headers', Load(), lineno=1054, col_offset=22)], [], None, None, lineno=1053, col_offset=8), lineno=1053, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1055, col_offset=8), 'assertIsNotNone', Load(), lineno=1055, col_offset=8), [Attribute(Name('req', Load(), lineno=1055, col_offset=29), '_tunnel_host', Load(), lineno=1055, col_offset=29)], [], None, None, lineno=1055, col_offset=8), lineno=1055, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1056, col_offset=8), 'assertEqual', Load(), lineno=1056, col_offset=8), [Call(Attribute(Name('req', Load(), lineno=1056, col_offset=25), 'get_host', Load(), lineno=1056, col_offset=25), [], [], None, None, lineno=1056, col_offset=25), Str('proxy.example.com:3128', lineno=1056, col_offset=41)], [], None, None, lineno=1056, col_offset=8), lineno=1056, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1057, col_offset=8), 'assertEqual', Load(), lineno=1057, col_offset=8), [Call(Attribute(Name('req', Load(), lineno=1057, col_offset=25), 'get_header', Load(), lineno=1057, col_offset=25), [Str('Proxy-authorization', lineno=1057, col_offset=40)], [], None, None, lineno=1057, col_offset=25), Str('FooBar', lineno=1057, col_offset=63)], [], None, None, lineno=1057, col_offset=8), lineno=1057, col_offset=8)], [], lineno=1036, col_offset=4), FunctionDef('test_basic_auth', arguments([Name('self', Param(), lineno=1059, col_offset=24), Name('quote_char', Param(), lineno=1059, col_offset=30)], None, None, [Str('"', lineno=1059, col_offset=41)]), [Assign([Name('opener', Store(), lineno=1060, col_offset=8)], Call(Name('OpenerDirector', Load(), lineno=1060, col_offset=17), [], [], None, None, lineno=1060, col_offset=17), lineno=1060, col_offset=8), Assign([Name('password_manager', Store(), lineno=1061, col_offset=8)], Call(Name('MockPasswordManager', Load(), lineno=1061, col_offset=27), [], [], None, None, lineno=1061, col_offset=27), lineno=1061, col_offset=8), Assign([Name('auth_handler', Store(), lineno=1062, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=1062, col_offset=23), 'HTTPBasicAuthHandler', Load(), lineno=1062, col_offset=23), [Name('password_manager', Load(), lineno=1062, col_offset=52)], [], None, None, lineno=1062, col_offset=23), lineno=1062, col_offset=8), Assign([Name('realm', Store(), lineno=1063, col_offset=8)], Str('ACME Widget Store', lineno=1063, col_offset=16), lineno=1063, col_offset=8), Assign([Name('http_handler', Store(), lineno=1064, col_offset=8)], Call(Name('MockHTTPHandler', Load(), lineno=1064, col_offset=23), [Num(401, lineno=1065, col_offset=12), BinOp(Str('WWW-Authenticate: Basic realm=%s%s%s\r\n\r\n', lineno=1065, col_offset=17), Mod(), Tuple([Name('quote_char', Load(), lineno=1066, col_offset=13), Name('realm', Load(), lineno=1066, col_offset=25), Name('quote_char', Load(), lineno=1066, col_offset=32)], Load(), lineno=1066, col_offset=13), lineno=1065, col_offset=17)], [], None, None, lineno=1064, col_offset=23), lineno=1064, col_offset=8), Expr(Call(Attribute(Name('opener', Load(), lineno=1067, col_offset=8), 'add_handler', Load(), lineno=1067, col_offset=8), [Name('auth_handler', Load(), lineno=1067, col_offset=27)], [], None, None, lineno=1067, col_offset=8), lineno=1067, col_offset=8), Expr(Call(Attribute(Name('opener', Load(), lineno=1068, col_offset=8), 'add_handler', Load(), lineno=1068, col_offset=8), [Name('http_handler', Load(), lineno=1068, col_offset=27)], [], None, None, lineno=1068, col_offset=8), lineno=1068, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1069, col_offset=8), '_test_basic_auth', Load(), lineno=1069, col_offset=8), [Name('opener', Load(), lineno=1069, col_offset=30), Name('auth_handler', Load(), lineno=1069, col_offset=38), Str('Authorization', lineno=1069, col_offset=52), Name('realm', Load(), lineno=1070, col_offset=30), Name('http_handler', Load(), lineno=1070, col_offset=37), Name('password_manager', Load(), lineno=1070, col_offset=51), Str('http://acme.example.com/protected', lineno=1071, col_offset=30), Str('http://acme.example.com/protected', lineno=1072, col_offset=30)], [], None, None, lineno=1069, col_offset=8), lineno=1069, col_offset=8)], [], lineno=1059, col_offset=4), FunctionDef('test_basic_auth_with_single_quoted_realm', arguments([Name('self', Param(), lineno=1075, col_offset=49)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=1076, col_offset=8), 'test_basic_auth', Load(), lineno=1076, col_offset=8), [], [keyword('quote_char', Str("'", lineno=1076, col_offset=40))], None, None, lineno=1076, col_offset=8), lineno=1076, col_offset=8)], [], lineno=1075, col_offset=4), FunctionDef('test_proxy_basic_auth', arguments([Name('self', Param(), lineno=1078, col_offset=30)], None, None, []), [Assign([Name('opener', Store(), lineno=1079, col_offset=8)], Call(Name('OpenerDirector', Load(), lineno=1079, col_offset=17), [], [], None, None, lineno=1079, col_offset=17), lineno=1079, col_offset=8), Assign([Name('ph', Store(), lineno=1080, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=1080, col_offset=13), 'ProxyHandler', Load(), lineno=1080, col_offset=13), [Call(Name('dict', Load(), lineno=1080, col_offset=34), [], [keyword('http', Str('proxy.example.com:3128', lineno=1080, col_offset=44))], None, None, lineno=1080, col_offset=34)], [], None, None, lineno=1080, col_offset=13), lineno=1080, col_offset=8), Expr(Call(Attribute(Name('opener', Load(), lineno=1081, col_offset=8), 'add_handler', Load(), lineno=1081, col_offset=8), [Name('ph', Load(), lineno=1081, col_offset=27)], [], None, None, lineno=1081, col_offset=8), lineno=1081, col_offset=8), Assign([Name('password_manager', Store(), lineno=1082, col_offset=8)], Call(Name('MockPasswordManager', Load(), lineno=1082, col_offset=27), [], [], None, None, lineno=1082, col_offset=27), lineno=1082, col_offset=8), Assign([Name('auth_handler', Store(), lineno=1083, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=1083, col_offset=23), 'ProxyBasicAuthHandler', Load(), lineno=1083, col_offset=23), [Name('password_manager', Load(), lineno=1083, col_offset=53)], [], None, None, lineno=1083, col_offset=23), lineno=1083, col_offset=8), Assign([Name('realm', Store(), lineno=1084, col_offset=8)], Str('ACME Networks', lineno=1084, col_offset=16), lineno=1084, col_offset=8), Assign([Name('http_handler', Store(), lineno=1085, col_offset=8)], Call(Name('MockHTTPHandler', Load(), lineno=1085, col_offset=23), [Num(407, lineno=1086, col_offset=12), BinOp(Str('Proxy-Authenticate: Basic realm="%s"\r\n\r\n', lineno=1086, col_offset=17), Mod(), Name('realm', Load(), lineno=1086, col_offset=66), lineno=1086, col_offset=17)], [], None, None, lineno=1085, col_offset=23), lineno=1085, col_offset=8), Expr(Call(Attribute(Name('opener', Load(), lineno=1087, col_offset=8), 'add_handler', Load(), lineno=1087, col_offset=8), [Name('auth_handler', Load(), lineno=1087, col_offset=27)], [], None, None, lineno=1087, col_offset=8), lineno=1087, col_offset=8), Expr(Call(Attribute(Name('opener', Load(), lineno=1088, col_offset=8), 'add_handler', Load(), lineno=1088, col_offset=8), [Name('http_handler', Load(), lineno=1088, col_offset=27)], [], None, None, lineno=1088, col_offset=8), lineno=1088, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1089, col_offset=8), '_test_basic_auth', Load(), lineno=1089, col_offset=8), [Name('opener', Load(), lineno=1089, col_offset=30), Name('auth_handler', Load(), lineno=1089, col_offset=38), Str('Proxy-authorization', lineno=1089, col_offset=52), Name('realm', Load(), lineno=1090, col_offset=30), Name('http_handler', Load(), lineno=1090, col_offset=37), Name('password_manager', Load(), lineno=1090, col_offset=51), Str('http://acme.example.com:3128/protected', lineno=1091, col_offset=30), Str('proxy.example.com:3128', lineno=1092, col_offset=30)], [], None, None, lineno=1089, col_offset=8), lineno=1089, col_offset=8)], [], lineno=1078, col_offset=4), FunctionDef('test_basic_and_digest_auth_handlers', arguments([Name('self', Param(), lineno=1095, col_offset=44)], None, None, []), [ClassDef('RecordingOpenerDirector', [Name('OpenerDirector', Load(), lineno=1104, col_offset=38)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=1105, col_offset=25)], None, None, []), [Expr(Call(Attribute(Name('OpenerDirector', Load(), lineno=1106, col_offset=16), '__init__', Load(), lineno=1106, col_offset=16), [Name('self', Load(), lineno=1106, col_offset=40)], [], None, None, lineno=1106, col_offset=16), lineno=1106, col_offset=16), Assign([Attribute(Name('self', Load(), lineno=1107, col_offset=16), 'recorded', Store(), lineno=1107, col_offset=16)], List([], Load(), lineno=1107, col_offset=32), lineno=1107, col_offset=16)], [], lineno=1105, col_offset=12), FunctionDef('record', arguments([Name('self', Param(), lineno=1108, col_offset=23), Name('info', Param(), lineno=1108, col_offset=29)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1109, col_offset=16), 'recorded', Load(), lineno=1109, col_offset=16), 'append', Load(), lineno=1109, col_offset=16), [Name('info', Load(), lineno=1109, col_offset=37)], [], None, None, lineno=1109, col_offset=16), lineno=1109, col_offset=16)], [], lineno=1108, col_offset=12)], [], lineno=1104, col_offset=8), ClassDef('TestDigestAuthHandler', [Attribute(Name('urllib2', Load(), lineno=1110, col_offset=36), 'HTTPDigestAuthHandler', Load(), lineno=1110, col_offset=36)], [FunctionDef('http_error_401', arguments([Name('self', Param(), lineno=1111, col_offset=31)], 'args', 'kwds', []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1112, col_offset=16), 'parent', Load(), lineno=1112, col_offset=16), 'record', Load(), lineno=1112, col_offset=16), [Str('digest', lineno=1112, col_offset=35)], [], None, None, lineno=1112, col_offset=16), lineno=1112, col_offset=16), Expr(Call(Attribute(Attribute(Name('urllib2', Load(), lineno=1113, col_offset=16), 'HTTPDigestAuthHandler', Load(), lineno=1113, col_offset=16), 'http_error_401', Load(), lineno=1113, col_offset=16), [Name('self', Load(), lineno=1113, col_offset=61)], [], Name('args', Load(), lineno=1114, col_offset=62), Name('kwds', Load(), lineno=1114, col_offset=70), lineno=1113, col_offset=16), lineno=1113, col_offset=16)], [], lineno=1111, col_offset=12)], [], lineno=1110, col_offset=8), ClassDef('TestBasicAuthHandler', [Attribute(Name('urllib2', Load(), lineno=1115, col_offset=35), 'HTTPBasicAuthHandler', Load(), lineno=1115, col_offset=35)], [FunctionDef('http_error_401', arguments([Name('self', Param(), lineno=1116, col_offset=31)], 'args', 'kwds', []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1117, col_offset=16), 'parent', Load(), lineno=1117, col_offset=16), 'record', Load(), lineno=1117, col_offset=16), [Str('basic', lineno=1117, col_offset=35)], [], None, None, lineno=1117, col_offset=16), lineno=1117, col_offset=16), Expr(Call(Attribute(Attribute(Name('urllib2', Load(), lineno=1118, col_offset=16), 'HTTPBasicAuthHandler', Load(), lineno=1118, col_offset=16), 'http_error_401', Load(), lineno=1118, col_offset=16), [Name('self', Load(), lineno=1118, col_offset=60)], [], Name('args', Load(), lineno=1119, col_offset=61), Name('kwds', Load(), lineno=1119, col_offset=69), lineno=1118, col_offset=16), lineno=1118, col_offset=16)], [], lineno=1116, col_offset=12)], [], lineno=1115, col_offset=8), Assign([Name('opener', Store(), lineno=1121, col_offset=8)], Call(Name('RecordingOpenerDirector', Load(), lineno=1121, col_offset=17), [], [], None, None, lineno=1121, col_offset=17), lineno=1121, col_offset=8), Assign([Name('password_manager', Store(), lineno=1122, col_offset=8)], Call(Name('MockPasswordManager', Load(), lineno=1122, col_offset=27), [], [], None, None, lineno=1122, col_offset=27), lineno=1122, col_offset=8), Assign([Name('digest_handler', Store(), lineno=1123, col_offset=8)], Call(Name('TestDigestAuthHandler', Load(), lineno=1123, col_offset=25), [Name('password_manager', Load(), lineno=1123, col_offset=47)], [], None, None, lineno=1123, col_offset=25), lineno=1123, col_offset=8), Assign([Name('basic_handler', Store(), lineno=1124, col_offset=8)], Call(Name('TestBasicAuthHandler', Load(), lineno=1124, col_offset=24), [Name('password_manager', Load(), lineno=1124, col_offset=45)], [], None, None, lineno=1124, col_offset=24), lineno=1124, col_offset=8), Assign([Name('realm', Store(), lineno=1125, col_offset=8)], Str('ACME Networks', lineno=1125, col_offset=16), lineno=1125, col_offset=8), Assign([Name('http_handler', Store(), lineno=1126, col_offset=8)], Call(Name('MockHTTPHandler', Load(), lineno=1126, col_offset=23), [Num(401, lineno=1127, col_offset=12), BinOp(Str('WWW-Authenticate: Basic realm="%s"\r\n\r\n', lineno=1127, col_offset=17), Mod(), Name('realm', Load(), lineno=1127, col_offset=64), lineno=1127, col_offset=17)], [], None, None, lineno=1126, col_offset=23), lineno=1126, col_offset=8), Expr(Call(Attribute(Name('opener', Load(), lineno=1128, col_offset=8), 'add_handler', Load(), lineno=1128, col_offset=8), [Name('basic_handler', Load(), lineno=1128, col_offset=27)], [], None, None, lineno=1128, col_offset=8), lineno=1128, col_offset=8), Expr(Call(Attribute(Name('opener', Load(), lineno=1129, col_offset=8), 'add_handler', Load(), lineno=1129, col_offset=8), [Name('digest_handler', Load(), lineno=1129, col_offset=27)], [], None, None, lineno=1129, col_offset=8), lineno=1129, col_offset=8), Expr(Call(Attribute(Name('opener', Load(), lineno=1130, col_offset=8), 'add_handler', Load(), lineno=1130, col_offset=8), [Name('http_handler', Load(), lineno=1130, col_offset=27)], [], None, None, lineno=1130, col_offset=8), lineno=1130, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1133, col_offset=8), '_test_basic_auth', Load(), lineno=1133, col_offset=8), [Name('opener', Load(), lineno=1133, col_offset=30), Name('basic_handler', Load(), lineno=1133, col_offset=38), Str('Authorization', lineno=1133, col_offset=53), Name('realm', Load(), lineno=1134, col_offset=30), Name('http_handler', Load(), lineno=1134, col_offset=37), Name('password_manager', Load(), lineno=1134, col_offset=51), Str('http://acme.example.com/protected', lineno=1135, col_offset=30), Str('http://acme.example.com/protected', lineno=1136, col_offset=30)], [], None, None, lineno=1133, col_offset=8), lineno=1133, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1140, col_offset=8), 'assertEqual', Load(), lineno=1140, col_offset=8), [Attribute(Name('opener', Load(), lineno=1140, col_offset=25), 'recorded', Load(), lineno=1140, col_offset=25), BinOp(List([Str('digest', lineno=1140, col_offset=43), Str('basic', lineno=1140, col_offset=53)], Load(), lineno=1140, col_offset=42), Mult(), Num(2, lineno=1140, col_offset=62), lineno=1140, col_offset=42)], [], None, None, lineno=1140, col_offset=8), lineno=1140, col_offset=8)], [], lineno=1095, col_offset=4), FunctionDef('_test_basic_auth', arguments([Name('self', Param(), lineno=1142, col_offset=25), Name('opener', Param(), lineno=1142, col_offset=31), Name('auth_handler', Param(), lineno=1142, col_offset=39), Name('auth_header', Param(), lineno=1142, col_offset=53), Name('realm', Param(), lineno=1143, col_offset=25), Name('http_handler', Param(), lineno=1143, col_offset=32), Name('password_manager', Param(), lineno=1143, col_offset=46), Name('request_url', Param(), lineno=1144, col_offset=25), Name('protected_url', Param(), lineno=1144, col_offset=38)], None, None, []), [Import([alias('base64', None)], lineno=1145, col_offset=8), Assign([Tuple([Name('user', Store(), lineno=1146, col_offset=8), Name('password', Store(), lineno=1146, col_offset=14)], Store(), lineno=1146, col_offset=8)], Tuple([Str('wile', lineno=1146, col_offset=25), Str('coyote', lineno=1146, col_offset=33)], Load(), lineno=1146, col_offset=25), lineno=1146, col_offset=8), Expr(Call(Attribute(Name('auth_handler', Load(), lineno=1149, col_offset=8), 'add_password', Load(), lineno=1149, col_offset=8), [Name('realm', Load(), lineno=1149, col_offset=34), Name('request_url', Load(), lineno=1149, col_offset=41), Name('user', Load(), lineno=1149, col_offset=54), Name('password', Load(), lineno=1149, col_offset=60)], [], None, None, lineno=1149, col_offset=8), lineno=1149, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1150, col_offset=8), 'assertEqual', Load(), lineno=1150, col_offset=8), [Name('realm', Load(), lineno=1150, col_offset=25), Attribute(Name('password_manager', Load(), lineno=1150, col_offset=32), 'realm', Load(), lineno=1150, col_offset=32)], [], None, None, lineno=1150, col_offset=8), lineno=1150, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1151, col_offset=8), 'assertEqual', Load(), lineno=1151, col_offset=8), [Name('request_url', Load(), lineno=1151, col_offset=25), Attribute(Name('password_manager', Load(), lineno=1151, col_offset=38), 'url', Load(), lineno=1151, col_offset=38)], [], None, None, lineno=1151, col_offset=8), lineno=1151, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1152, col_offset=8), 'assertEqual', Load(), lineno=1152, col_offset=8), [Name('user', Load(), lineno=1152, col_offset=25), Attribute(Name('password_manager', Load(), lineno=1152, col_offset=31), 'user', Load(), lineno=1152, col_offset=31)], [], None, None, lineno=1152, col_offset=8), lineno=1152, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1153, col_offset=8), 'assertEqual', Load(), lineno=1153, col_offset=8), [Name('password', Load(), lineno=1153, col_offset=25), Attribute(Name('password_manager', Load(), lineno=1153, col_offset=35), 'password', Load(), lineno=1153, col_offset=35)], [], None, None, lineno=1153, col_offset=8), lineno=1153, col_offset=8), Assign([Name('r', Store(), lineno=1155, col_offset=8)], Call(Attribute(Name('opener', Load(), lineno=1155, col_offset=12), 'open', Load(), lineno=1155, col_offset=12), [Name('request_url', Load(), lineno=1155, col_offset=24)], [], None, None, lineno=1155, col_offset=12), lineno=1155, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1158, col_offset=8), 'assertEqual', Load(), lineno=1158, col_offset=8), [Attribute(Name('password_manager', Load(), lineno=1158, col_offset=25), 'target_realm', Load(), lineno=1158, col_offset=25), Name('realm', Load(), lineno=1158, col_offset=56)], [], None, None, lineno=1158, col_offset=8), lineno=1158, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1159, col_offset=8), 'assertEqual', Load(), lineno=1159, col_offset=8), [Attribute(Name('password_manager', Load(), lineno=1159, col_offset=25), 'target_url', Load(), lineno=1159, col_offset=25), Name('protected_url', Load(), lineno=1159, col_offset=54)], [], None, None, lineno=1159, col_offset=8), lineno=1159, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1162, col_offset=8), 'assertEqual', Load(), lineno=1162, col_offset=8), [Call(Name('len', Load(), lineno=1162, col_offset=25), [Attribute(Name('http_handler', Load(), lineno=1162, col_offset=29), 'requests', Load(), lineno=1162, col_offset=29)], [], None, None, lineno=1162, col_offset=25), Num(2, lineno=1162, col_offset=53)], [], None, None, lineno=1162, col_offset=8), lineno=1162, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1163, col_offset=8), 'assertFalse', Load(), lineno=1163, col_offset=8), [Call(Attribute(Subscript(Attribute(Name('http_handler', Load(), lineno=1163, col_offset=25), 'requests', Load(), lineno=1163, col_offset=25), Index(Num(0, lineno=1163, col_offset=47)), Load(), lineno=1163, col_offset=25), 'has_header', Load(), lineno=1163, col_offset=25), [Name('auth_header', Load(), lineno=1163, col_offset=61)], [], None, None, lineno=1163, col_offset=25)], [], None, None, lineno=1163, col_offset=8), lineno=1163, col_offset=8), Assign([Name('userpass', Store(), lineno=1164, col_offset=8)], BinOp(Str('%s:%s', lineno=1164, col_offset=19), Mod(), Tuple([Name('user', Load(), lineno=1164, col_offset=30), Name('password', Load(), lineno=1164, col_offset=36)], Load(), lineno=1164, col_offset=30), lineno=1164, col_offset=19), lineno=1164, col_offset=8), Assign([Name('auth_hdr_value', Store(), lineno=1165, col_offset=8)], BinOp(Str('Basic ', lineno=1165, col_offset=25), Add(), Call(Attribute(Call(Attribute(Name('base64', Load(), lineno=1165, col_offset=34), 'encodestring', Load(), lineno=1165, col_offset=34), [Name('userpass', Load(), lineno=1165, col_offset=54)], [], None, None, lineno=1165, col_offset=34), 'strip', Load(), lineno=1165, col_offset=34), [], [], None, None, lineno=1165, col_offset=34), lineno=1165, col_offset=25), lineno=1165, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1166, col_offset=8), 'assertEqual', Load(), lineno=1166, col_offset=8), [Call(Attribute(Subscript(Attribute(Name('http_handler', Load(), lineno=1166, col_offset=25), 'requests', Load(), lineno=1166, col_offset=25), Index(Num(1, lineno=1166, col_offset=47)), Load(), lineno=1166, col_offset=25), 'get_header', Load(), lineno=1166, col_offset=25), [Name('auth_header', Load(), lineno=1166, col_offset=61)], [], None, None, lineno=1166, col_offset=25), Name('auth_hdr_value', Load(), lineno=1167, col_offset=25)], [], None, None, lineno=1166, col_offset=8), lineno=1166, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1168, col_offset=8), 'assertEqual', Load(), lineno=1168, col_offset=8), [Subscript(Attribute(Subscript(Attribute(Name('http_handler', Load(), lineno=1168, col_offset=25), 'requests', Load(), lineno=1168, col_offset=25), Index(Num(1, lineno=1168, col_offset=47)), Load(), lineno=1168, col_offset=25), 'unredirected_hdrs', Load(), lineno=1168, col_offset=25), Index(Name('auth_header', Load(), lineno=1168, col_offset=68)), Load(), lineno=1168, col_offset=25), Name('auth_hdr_value', Load(), lineno=1169, col_offset=25)], [], None, None, lineno=1168, col_offset=8), lineno=1168, col_offset=8), Assign([Attribute(Name('password_manager', Load(), lineno=1172, col_offset=8), 'user', Store(), lineno=1172, col_offset=8), Attribute(Name('password_manager', Load(), lineno=1172, col_offset=32), 'password', Store(), lineno=1172, col_offset=32)], Name('None', Load(), lineno=1172, col_offset=60), lineno=1172, col_offset=8), Expr(Call(Attribute(Name('http_handler', Load(), lineno=1173, col_offset=8), 'reset', Load(), lineno=1173, col_offset=8), [], [], None, None, lineno=1173, col_offset=8), lineno=1173, col_offset=8), Assign([Name('r', Store(), lineno=1174, col_offset=8)], Call(Attribute(Name('opener', Load(), lineno=1174, col_offset=12), 'open', Load(), lineno=1174, col_offset=12), [Name('request_url', Load(), lineno=1174, col_offset=24)], [], None, None, lineno=1174, col_offset=12), lineno=1174, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1175, col_offset=8), 'assertEqual', Load(), lineno=1175, col_offset=8), [Call(Name('len', Load(), lineno=1175, col_offset=25), [Attribute(Name('http_handler', Load(), lineno=1175, col_offset=29), 'requests', Load(), lineno=1175, col_offset=29)], [], None, None, lineno=1175, col_offset=25), Num(1, lineno=1175, col_offset=53)], [], None, None, lineno=1175, col_offset=8), lineno=1175, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1176, col_offset=8), 'assertFalse', Load(), lineno=1176, col_offset=8), [Call(Attribute(Subscript(Attribute(Name('http_handler', Load(), lineno=1176, col_offset=25), 'requests', Load(), lineno=1176, col_offset=25), Index(Num(0, lineno=1176, col_offset=47)), Load(), lineno=1176, col_offset=25), 'has_header', Load(), lineno=1176, col_offset=25), [Name('auth_header', Load(), lineno=1176, col_offset=61)], [], None, None, lineno=1176, col_offset=25)], [], None, None, lineno=1176, col_offset=8), lineno=1176, col_offset=8)], [], lineno=1142, col_offset=4)], [], lineno=601, col_offset=0), ClassDef('MiscTests', [Attribute(Name('unittest', Load(), lineno=1178, col_offset=16), 'TestCase', Load(), lineno=1178, col_offset=16)], [FunctionDef('test_build_opener', arguments([Name('self', Param(), lineno=1180, col_offset=26)], None, None, []), [ClassDef('MyHTTPHandler', [Attribute(Name('urllib2', Load(), lineno=1181, col_offset=28), 'HTTPHandler', Load(), lineno=1181, col_offset=28)], [Pass( lineno=1181, col_offset=50)], [], lineno=1181, col_offset=8), ClassDef('FooHandler', [Attribute(Name('urllib2', Load(), lineno=1182, col_offset=25), 'BaseHandler', Load(), lineno=1182, col_offset=25)], [FunctionDef('foo_open', arguments([Name('self', Param(), lineno=1183, col_offset=25)], None, None, []), [Pass( lineno=1183, col_offset=32)], [], lineno=1183, col_offset=12)], [], lineno=1182, col_offset=8), ClassDef('BarHandler', [Attribute(Name('urllib2', Load(), lineno=1184, col_offset=25), 'BaseHandler', Load(), lineno=1184, col_offset=25)], [FunctionDef('bar_open', arguments([Name('self', Param(), lineno=1185, col_offset=25)], None, None, []), [Pass( lineno=1185, col_offset=32)], [], lineno=1185, col_offset=12)], [], lineno=1184, col_offset=8), Assign([Name('build_opener', Store(), lineno=1187, col_offset=8)], Attribute(Name('urllib2', Load(), lineno=1187, col_offset=23), 'build_opener', Load(), lineno=1187, col_offset=23), lineno=1187, col_offset=8), Assign([Name('o', Store(), lineno=1189, col_offset=8)], Call(Name('build_opener', Load(), lineno=1189, col_offset=12), [Name('FooHandler', Load(), lineno=1189, col_offset=25), Name('BarHandler', Load(), lineno=1189, col_offset=37)], [], None, None, lineno=1189, col_offset=12), lineno=1189, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1190, col_offset=8), 'opener_has_handler', Load(), lineno=1190, col_offset=8), [Name('o', Load(), lineno=1190, col_offset=32), Name('FooHandler', Load(), lineno=1190, col_offset=35)], [], None, None, lineno=1190, col_offset=8), lineno=1190, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1191, col_offset=8), 'opener_has_handler', Load(), lineno=1191, col_offset=8), [Name('o', Load(), lineno=1191, col_offset=32), Name('BarHandler', Load(), lineno=1191, col_offset=35)], [], None, None, lineno=1191, col_offset=8), lineno=1191, col_offset=8), Assign([Name('o', Store(), lineno=1194, col_offset=8)], Call(Name('build_opener', Load(), lineno=1194, col_offset=12), [Name('FooHandler', Load(), lineno=1194, col_offset=25), Call(Name('BarHandler', Load(), lineno=1194, col_offset=37), [], [], None, None, lineno=1194, col_offset=37)], [], None, None, lineno=1194, col_offset=12), lineno=1194, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1195, col_offset=8), 'opener_has_handler', Load(), lineno=1195, col_offset=8), [Name('o', Load(), lineno=1195, col_offset=32), Name('FooHandler', Load(), lineno=1195, col_offset=35)], [], None, None, lineno=1195, col_offset=8), lineno=1195, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1196, col_offset=8), 'opener_has_handler', Load(), lineno=1196, col_offset=8), [Name('o', Load(), lineno=1196, col_offset=32), Name('BarHandler', Load(), lineno=1196, col_offset=35)], [], None, None, lineno=1196, col_offset=8), lineno=1196, col_offset=8), Assign([Name('o', Store(), lineno=1199, col_offset=8)], Call(Name('build_opener', Load(), lineno=1199, col_offset=12), [Name('MyHTTPHandler', Load(), lineno=1199, col_offset=25)], [], None, None, lineno=1199, col_offset=12), lineno=1199, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1200, col_offset=8), 'opener_has_handler', Load(), lineno=1200, col_offset=8), [Name('o', Load(), lineno=1200, col_offset=32), Name('MyHTTPHandler', Load(), lineno=1200, col_offset=35)], [], None, None, lineno=1200, col_offset=8), lineno=1200, col_offset=8), Assign([Name('o', Store(), lineno=1204, col_offset=8)], Call(Name('build_opener', Load(), lineno=1204, col_offset=12), [], [], None, None, lineno=1204, col_offset=12), lineno=1204, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1205, col_offset=8), 'opener_has_handler', Load(), lineno=1205, col_offset=8), [Name('o', Load(), lineno=1205, col_offset=32), Attribute(Name('urllib2', Load(), lineno=1205, col_offset=35), 'HTTPHandler', Load(), lineno=1205, col_offset=35)], [], None, None, lineno=1205, col_offset=8), lineno=1205, col_offset=8), Assign([Name('o', Store(), lineno=1206, col_offset=8)], Call(Name('build_opener', Load(), lineno=1206, col_offset=12), [Attribute(Name('urllib2', Load(), lineno=1206, col_offset=25), 'HTTPHandler', Load(), lineno=1206, col_offset=25)], [], None, None, lineno=1206, col_offset=12), lineno=1206, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1207, col_offset=8), 'opener_has_handler', Load(), lineno=1207, col_offset=8), [Name('o', Load(), lineno=1207, col_offset=32), Attribute(Name('urllib2', Load(), lineno=1207, col_offset=35), 'HTTPHandler', Load(), lineno=1207, col_offset=35)], [], None, None, lineno=1207, col_offset=8), lineno=1207, col_offset=8), Assign([Name('o', Store(), lineno=1208, col_offset=8)], Call(Name('build_opener', Load(), lineno=1208, col_offset=12), [Call(Attribute(Name('urllib2', Load(), lineno=1208, col_offset=25), 'HTTPHandler', Load(), lineno=1208, col_offset=25), [], [], None, None, lineno=1208, col_offset=25)], [], None, None, lineno=1208, col_offset=12), lineno=1208, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1209, col_offset=8), 'opener_has_handler', Load(), lineno=1209, col_offset=8), [Name('o', Load(), lineno=1209, col_offset=32), Attribute(Name('urllib2', Load(), lineno=1209, col_offset=35), 'HTTPHandler', Load(), lineno=1209, col_offset=35)], [], None, None, lineno=1209, col_offset=8), lineno=1209, col_offset=8), ClassDef('MyOtherHTTPHandler', [Attribute(Name('urllib2', Load(), lineno=1212, col_offset=33), 'HTTPHandler', Load(), lineno=1212, col_offset=33)], [Pass( lineno=1212, col_offset=55)], [], lineno=1212, col_offset=8), Assign([Name('o', Store(), lineno=1213, col_offset=8)], Call(Name('build_opener', Load(), lineno=1213, col_offset=12), [Name('MyHTTPHandler', Load(), lineno=1213, col_offset=25), Name('MyOtherHTTPHandler', Load(), lineno=1213, col_offset=40)], [], None, None, lineno=1213, col_offset=12), lineno=1213, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1214, col_offset=8), 'opener_has_handler', Load(), lineno=1214, col_offset=8), [Name('o', Load(), lineno=1214, col_offset=32), Name('MyHTTPHandler', Load(), lineno=1214, col_offset=35)], [], None, None, lineno=1214, col_offset=8), lineno=1214, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1215, col_offset=8), 'opener_has_handler', Load(), lineno=1215, col_offset=8), [Name('o', Load(), lineno=1215, col_offset=32), Name('MyOtherHTTPHandler', Load(), lineno=1215, col_offset=35)], [], None, None, lineno=1215, col_offset=8), lineno=1215, col_offset=8)], [], lineno=1180, col_offset=4), FunctionDef('opener_has_handler', arguments([Name('self', Param(), lineno=1217, col_offset=27), Name('opener', Param(), lineno=1217, col_offset=33), Name('handler_class', Param(), lineno=1217, col_offset=41)], None, None, []), [For(Name('h', Store(), lineno=1218, col_offset=12), Attribute(Name('opener', Load(), lineno=1218, col_offset=17), 'handlers', Load(), lineno=1218, col_offset=17), [If(Compare(Attribute(Name('h', Load(), lineno=1219, col_offset=15), '__class__', Load(), lineno=1219, col_offset=15), [Eq()], [Name('handler_class', Load(), lineno=1219, col_offset=30)], lineno=1219, col_offset=15), [Break( lineno=1220, col_offset=16)], [], lineno=1219, col_offset=12)], [Expr(Call(Attribute(Name('self', Load(), lineno=1222, col_offset=12), 'assertTrue', Load(), lineno=1222, col_offset=12), [Name('False', Load(), lineno=1222, col_offset=28)], [], None, None, lineno=1222, col_offset=12), lineno=1222, col_offset=12)], lineno=1218, col_offset=8)], [], lineno=1217, col_offset=4)], [], lineno=1178, col_offset=0), ClassDef('RequestTests', [Attribute(Name('unittest', Load(), lineno=1224, col_offset=19), 'TestCase', Load(), lineno=1224, col_offset=19)], [FunctionDef('setUp', arguments([Name('self', Param(), lineno=1226, col_offset=14)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=1227, col_offset=8), 'get', Store(), lineno=1227, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=1227, col_offset=19), 'Request', Load(), lineno=1227, col_offset=19), [Str('http://www.python.org/~jeremy/', lineno=1227, col_offset=35)], [], None, None, lineno=1227, col_offset=19), lineno=1227, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1228, col_offset=8), 'post', Store(), lineno=1228, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=1228, col_offset=20), 'Request', Load(), lineno=1228, col_offset=20), [Str('http://www.python.org/~jeremy/', lineno=1228, col_offset=36), Str('data', lineno=1229, col_offset=36)], [keyword('headers', Dict([Str('X-Test', lineno=1230, col_offset=45)], [Str('test', lineno=1230, col_offset=55)], lineno=1230, col_offset=44))], None, None, lineno=1228, col_offset=20), lineno=1228, col_offset=8)], [], lineno=1226, col_offset=4), FunctionDef('test_method', arguments([Name('self', Param(), lineno=1232, col_offset=20)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=1233, col_offset=8), 'assertEqual', Load(), lineno=1233, col_offset=8), [Str('POST', lineno=1233, col_offset=25), Call(Attribute(Attribute(Name('self', Load(), lineno=1233, col_offset=33), 'post', Load(), lineno=1233, col_offset=33), 'get_method', Load(), lineno=1233, col_offset=33), [], [], None, None, lineno=1233, col_offset=33)], [], None, None, lineno=1233, col_offset=8), lineno=1233, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1234, col_offset=8), 'assertEqual', Load(), lineno=1234, col_offset=8), [Str('GET', lineno=1234, col_offset=25), Call(Attribute(Attribute(Name('self', Load(), lineno=1234, col_offset=32), 'get', Load(), lineno=1234, col_offset=32), 'get_method', Load(), lineno=1234, col_offset=32), [], [], None, None, lineno=1234, col_offset=32)], [], None, None, lineno=1234, col_offset=8), lineno=1234, col_offset=8)], [], lineno=1232, col_offset=4), FunctionDef('test_add_data', arguments([Name('self', Param(), lineno=1236, col_offset=22)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=1237, col_offset=8), 'assertTrue', Load(), lineno=1237, col_offset=8), [UnaryOp(Not(), Call(Attribute(Attribute(Name('self', Load(), lineno=1237, col_offset=28), 'get', Load(), lineno=1237, col_offset=28), 'has_data', Load(), lineno=1237, col_offset=28), [], [], None, None, lineno=1237, col_offset=28), lineno=1237, col_offset=24)], [], None, None, lineno=1237, col_offset=8), lineno=1237, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1238, col_offset=8), 'assertEqual', Load(), lineno=1238, col_offset=8), [Str('GET', lineno=1238, col_offset=25), Call(Attribute(Attribute(Name('self', Load(), lineno=1238, col_offset=32), 'get', Load(), lineno=1238, col_offset=32), 'get_method', Load(), lineno=1238, col_offset=32), [], [], None, None, lineno=1238, col_offset=32)], [], None, None, lineno=1238, col_offset=8), lineno=1238, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1239, col_offset=8), 'get', Load(), lineno=1239, col_offset=8), 'add_data', Load(), lineno=1239, col_offset=8), [Str('spam', lineno=1239, col_offset=26)], [], None, None, lineno=1239, col_offset=8), lineno=1239, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1240, col_offset=8), 'assertTrue', Load(), lineno=1240, col_offset=8), [Call(Attribute(Attribute(Name('self', Load(), lineno=1240, col_offset=24), 'get', Load(), lineno=1240, col_offset=24), 'has_data', Load(), lineno=1240, col_offset=24), [], [], None, None, lineno=1240, col_offset=24)], [], None, None, lineno=1240, col_offset=8), lineno=1240, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1241, col_offset=8), 'assertEqual', Load(), lineno=1241, col_offset=8), [Str('POST', lineno=1241, col_offset=25), Call(Attribute(Attribute(Name('self', Load(), lineno=1241, col_offset=33), 'get', Load(), lineno=1241, col_offset=33), 'get_method', Load(), lineno=1241, col_offset=33), [], [], None, None, lineno=1241, col_offset=33)], [], None, None, lineno=1241, col_offset=8), lineno=1241, col_offset=8)], [], lineno=1236, col_offset=4), FunctionDef('test_get_full_url', arguments([Name('self', Param(), lineno=1243, col_offset=26)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=1244, col_offset=8), 'assertEqual', Load(), lineno=1244, col_offset=8), [Str('http://www.python.org/~jeremy/', lineno=1244, col_offset=25), Call(Attribute(Attribute(Name('self', Load(), lineno=1245, col_offset=25), 'get', Load(), lineno=1245, col_offset=25), 'get_full_url', Load(), lineno=1245, col_offset=25), [], [], None, None, lineno=1245, col_offset=25)], [], None, None, lineno=1244, col_offset=8), lineno=1244, col_offset=8)], [], lineno=1243, col_offset=4), FunctionDef('test_selector', arguments([Name('self', Param(), lineno=1247, col_offset=22)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=1248, col_offset=8), 'assertEqual', Load(), lineno=1248, col_offset=8), [Str('/~jeremy/', lineno=1248, col_offset=25), Call(Attribute(Attribute(Name('self', Load(), lineno=1248, col_offset=38), 'get', Load(), lineno=1248, col_offset=38), 'get_selector', Load(), lineno=1248, col_offset=38), [], [], None, None, lineno=1248, col_offset=38)], [], None, None, lineno=1248, col_offset=8), lineno=1248, col_offset=8), Assign([Name('req', Store(), lineno=1249, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=1249, col_offset=14), 'Request', Load(), lineno=1249, col_offset=14), [Str('http://www.python.org/', lineno=1249, col_offset=30)], [], None, None, lineno=1249, col_offset=14), lineno=1249, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1250, col_offset=8), 'assertEqual', Load(), lineno=1250, col_offset=8), [Str('/', lineno=1250, col_offset=25), Call(Attribute(Name('req', Load(), lineno=1250, col_offset=30), 'get_selector', Load(), lineno=1250, col_offset=30), [], [], None, None, lineno=1250, col_offset=30)], [], None, None, lineno=1250, col_offset=8), lineno=1250, col_offset=8)], [], lineno=1247, col_offset=4), FunctionDef('test_get_type', arguments([Name('self', Param(), lineno=1252, col_offset=22)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=1253, col_offset=8), 'assertEqual', Load(), lineno=1253, col_offset=8), [Str('http', lineno=1253, col_offset=25), Call(Attribute(Attribute(Name('self', Load(), lineno=1253, col_offset=33), 'get', Load(), lineno=1253, col_offset=33), 'get_type', Load(), lineno=1253, col_offset=33), [], [], None, None, lineno=1253, col_offset=33)], [], None, None, lineno=1253, col_offset=8), lineno=1253, col_offset=8)], [], lineno=1252, col_offset=4), FunctionDef('test_get_host', arguments([Name('self', Param(), lineno=1255, col_offset=22)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=1256, col_offset=8), 'assertEqual', Load(), lineno=1256, col_offset=8), [Str('www.python.org', lineno=1256, col_offset=25), Call(Attribute(Attribute(Name('self', Load(), lineno=1256, col_offset=43), 'get', Load(), lineno=1256, col_offset=43), 'get_host', Load(), lineno=1256, col_offset=43), [], [], None, None, lineno=1256, col_offset=43)], [], None, None, lineno=1256, col_offset=8), lineno=1256, col_offset=8)], [], lineno=1255, col_offset=4), FunctionDef('test_get_host_unquote', arguments([Name('self', Param(), lineno=1258, col_offset=30)], None, None, []), [Assign([Name('req', Store(), lineno=1259, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=1259, col_offset=14), 'Request', Load(), lineno=1259, col_offset=14), [Str('http://www.%70ython.org/', lineno=1259, col_offset=30)], [], None, None, lineno=1259, col_offset=14), lineno=1259, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1260, col_offset=8), 'assertEqual', Load(), lineno=1260, col_offset=8), [Str('www.python.org', lineno=1260, col_offset=25), Call(Attribute(Name('req', Load(), lineno=1260, col_offset=43), 'get_host', Load(), lineno=1260, col_offset=43), [], [], None, None, lineno=1260, col_offset=43)], [], None, None, lineno=1260, col_offset=8), lineno=1260, col_offset=8)], [], lineno=1258, col_offset=4), FunctionDef('test_proxy', arguments([Name('self', Param(), lineno=1262, col_offset=19)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=1263, col_offset=8), 'assertTrue', Load(), lineno=1263, col_offset=8), [UnaryOp(Not(), Call(Attribute(Attribute(Name('self', Load(), lineno=1263, col_offset=28), 'get', Load(), lineno=1263, col_offset=28), 'has_proxy', Load(), lineno=1263, col_offset=28), [], [], None, None, lineno=1263, col_offset=28), lineno=1263, col_offset=24)], [], None, None, lineno=1263, col_offset=8), lineno=1263, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1264, col_offset=8), 'get', Load(), lineno=1264, col_offset=8), 'set_proxy', Load(), lineno=1264, col_offset=8), [Str('www.perl.org', lineno=1264, col_offset=27), Str('http', lineno=1264, col_offset=43)], [], None, None, lineno=1264, col_offset=8), lineno=1264, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1265, col_offset=8), 'assertTrue', Load(), lineno=1265, col_offset=8), [Call(Attribute(Attribute(Name('self', Load(), lineno=1265, col_offset=24), 'get', Load(), lineno=1265, col_offset=24), 'has_proxy', Load(), lineno=1265, col_offset=24), [], [], None, None, lineno=1265, col_offset=24)], [], None, None, lineno=1265, col_offset=8), lineno=1265, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1266, col_offset=8), 'assertEqual', Load(), lineno=1266, col_offset=8), [Str('www.python.org', lineno=1266, col_offset=25), Call(Attribute(Attribute(Name('self', Load(), lineno=1266, col_offset=43), 'get', Load(), lineno=1266, col_offset=43), 'get_origin_req_host', Load(), lineno=1266, col_offset=43), [], [], None, None, lineno=1266, col_offset=43)], [], None, None, lineno=1266, col_offset=8), lineno=1266, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1267, col_offset=8), 'assertEqual', Load(), lineno=1267, col_offset=8), [Str('www.perl.org', lineno=1267, col_offset=25), Call(Attribute(Attribute(Name('self', Load(), lineno=1267, col_offset=41), 'get', Load(), lineno=1267, col_offset=41), 'get_host', Load(), lineno=1267, col_offset=41), [], [], None, None, lineno=1267, col_offset=41)], [], None, None, lineno=1267, col_offset=8), lineno=1267, col_offset=8)], [], lineno=1262, col_offset=4), FunctionDef('test_wrapped_url', arguments([Name('self', Param(), lineno=1269, col_offset=25)], None, None, []), [Assign([Name('req', Store(), lineno=1270, col_offset=8)], Call(Name('Request', Load(), lineno=1270, col_offset=14), [Str('<URL:http://www.python.org>', lineno=1270, col_offset=22)], [], None, None, lineno=1270, col_offset=14), lineno=1270, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1271, col_offset=8), 'assertEqual', Load(), lineno=1271, col_offset=8), [Str('www.python.org', lineno=1271, col_offset=25), Call(Attribute(Name('req', Load(), lineno=1271, col_offset=43), 'get_host', Load(), lineno=1271, col_offset=43), [], [], None, None, lineno=1271, col_offset=43)], [], None, None, lineno=1271, col_offset=8), lineno=1271, col_offset=8)], [], lineno=1269, col_offset=4), FunctionDef('test_urlwith_fragment', arguments([Name('self', Param(), lineno=1273, col_offset=30)], None, None, []), [Assign([Name('req', Store(), lineno=1274, col_offset=8)], Call(Name('Request', Load(), lineno=1274, col_offset=14), [Str('http://www.python.org/?qs=query#fragment=true', lineno=1274, col_offset=22)], [], None, None, lineno=1274, col_offset=14), lineno=1274, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1275, col_offset=8), 'assertEqual', Load(), lineno=1275, col_offset=8), [Str('/?qs=query', lineno=1275, col_offset=25), Call(Attribute(Name('req', Load(), lineno=1275, col_offset=39), 'get_selector', Load(), lineno=1275, col_offset=39), [], [], None, None, lineno=1275, col_offset=39)], [], None, None, lineno=1275, col_offset=8), lineno=1275, col_offset=8), Assign([Name('req', Store(), lineno=1276, col_offset=8)], Call(Name('Request', Load(), lineno=1276, col_offset=14), [Str('http://www.python.org/#fun=true', lineno=1276, col_offset=22)], [], None, None, lineno=1276, col_offset=14), lineno=1276, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1277, col_offset=8), 'assertEqual', Load(), lineno=1277, col_offset=8), [Str('/', lineno=1277, col_offset=25), Call(Attribute(Name('req', Load(), lineno=1277, col_offset=30), 'get_selector', Load(), lineno=1277, col_offset=30), [], [], None, None, lineno=1277, col_offset=30)], [], None, None, lineno=1277, col_offset=8), lineno=1277, col_offset=8)], [], lineno=1273, col_offset=4)], [], lineno=1224, col_offset=0), FunctionDef('test_main', arguments([Name('verbose', Param(), lineno=1280, col_offset=14)], None, None, [Name('None', Load(), lineno=1280, col_offset=22)]), [ImportFrom('test', [alias('test_urllib2', None)], 0, lineno=1281, col_offset=4), Expr(Call(Attribute(Name('test_support', Load(), lineno=1282, col_offset=4), 'run_doctest', Load(), lineno=1282, col_offset=4), [Name('test_urllib2', Load(), lineno=1282, col_offset=29), Name('verbose', Load(), lineno=1282, col_offset=43)], [], None, None, lineno=1282, col_offset=4), lineno=1282, col_offset=4), Expr(Call(Attribute(Name('test_support', Load(), lineno=1283, col_offset=4), 'run_doctest', Load(), lineno=1283, col_offset=4), [Name('urllib2', Load(), lineno=1283, col_offset=29), Name('verbose', Load(), lineno=1283, col_offset=38)], [], None, None, lineno=1283, col_offset=4), lineno=1283, col_offset=4), Assign([Name('tests', Store(), lineno=1284, col_offset=4)], Tuple([Name('TrivialTests', Load(), lineno=1284, col_offset=13), Name('OpenerDirectorTests', Load(), lineno=1285, col_offset=13), Name('HandlerTests', Load(), lineno=1286, col_offset=13), Name('MiscTests', Load(), lineno=1287, col_offset=13), Name('RequestTests', Load(), lineno=1288, col_offset=13)], Load(), lineno=1284, col_offset=13), lineno=1284, col_offset=4), Expr(Call(Attribute(Name('test_support', Load(), lineno=1289, col_offset=4), 'run_unittest', Load(), lineno=1289, col_offset=4), [], [], Name('tests', Load(), lineno=1289, col_offset=31), None, lineno=1289, col_offset=4), lineno=1289, col_offset=4)], [], lineno=1280, col_offset=0), If(Compare(Name('__name__', Load(), lineno=1291, col_offset=3), [Eq()], [Str('__main__', lineno=1291, col_offset=15)], lineno=1291, col_offset=3), [Expr(Call(Name('test_main', Load(), lineno=1292, col_offset=4), [], [keyword('verbose', Name('True', Load(), lineno=1292, col_offset=22))], None, None, lineno=1292, col_offset=4), lineno=1292, col_offset=4)], [], lineno=1291, col_offset=0)])
