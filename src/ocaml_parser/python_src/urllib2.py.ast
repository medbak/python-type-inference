Module([Expr(Str('An extensible library for opening URLs using a variety of protocols\n\nThe simplest way to use this module is to call the urlopen function,\nwhich accepts a string containing a URL or a Request object (described\nbelow).  It opens the URL and returns the results as file-like\nobject; the returned object has some extra methods described below.\n\nThe OpenerDirector manages a collection of Handler objects that do\nall the actual work.  Each Handler implements a particular protocol or\noption.  The OpenerDirector is a composite object that invokes the\nHandlers needed to open the requested URL.  For example, the\nHTTPHandler performs HTTP GET and POST requests and deals with\nnon-error returns.  The HTTPRedirectHandler automatically deals with\nHTTP 301, 302, 303 and 307 redirect errors, and the HTTPDigestAuthHandler\ndeals with digest authentication.\n\nurlopen(url, data=None) -- Basic usage is the same as original\nurllib.  pass the url and optionally data to post to an HTTP URL, and\nget a file-like object back.  One difference is that you can also pass\na Request instance instead of URL.  Raises a URLError (subclass of\nIOError); for HTTP errors, raises an HTTPError, which can also be\ntreated as a valid response.\n\nbuild_opener -- Function that creates a new OpenerDirector instance.\nWill install the default handlers.  Accepts one or more Handlers as\narguments, either instances or Handler classes that it will\ninstantiate.  If one of the argument is a subclass of the default\nhandler, the argument will be installed instead of the default.\n\ninstall_opener -- Installs a new opener as the default opener.\n\nobjects of interest:\n\nOpenerDirector -- Sets up the User Agent as the Python-urllib client and manages\nthe Handler classes, while dealing with requests and responses.\n\nRequest -- An object that encapsulates the state of a request.  The\nstate can be as simple as the URL.  It can also include extra HTTP\nheaders, e.g. a User-Agent.\n\nBaseHandler --\n\nexceptions:\nURLError -- A subclass of IOError, individual protocols have their own\nspecific subclass.\n\nHTTPError -- Also a valid HTTP response, so you can treat an HTTP error\nas an exceptional event or valid response.\n\ninternals:\nBaseHandler and parent\n_call_chain conventions\n\nExample usage:\n\nimport urllib2\n\n# set up authentication info\nauthinfo = urllib2.HTTPBasicAuthHandler()\nauthinfo.add_password(realm=\'PDQ Application\',\n                      uri=\'https://mahler:8092/site-updates.py\',\n                      user=\'klem\',\n                      passwd=\'geheim$parole\')\n\nproxy_support = urllib2.ProxyHandler({"http" : "http://ahad-haam:3128"})\n\n# build a new opener that adds authentication and caching FTP handlers\nopener = urllib2.build_opener(proxy_support, authinfo, urllib2.CacheFTPHandler)\n\n# install it\nurllib2.install_opener(opener)\n\nf = urllib2.urlopen(\'http://www.python.org/\')\n\n\n', lineno=76, col_offset=-1), lineno=76, col_offset=-1), Import([alias('base64', None)], lineno=92, col_offset=0), Import([alias('hashlib', None)], lineno=93, col_offset=0), Import([alias('httplib', None)], lineno=94, col_offset=0), Import([alias('mimetools', None)], lineno=95, col_offset=0), Import([alias('os', None)], lineno=96, col_offset=0), Import([alias('posixpath', None)], lineno=97, col_offset=0), Import([alias('random', None)], lineno=98, col_offset=0), Import([alias('re', None)], lineno=99, col_offset=0), Import([alias('socket', None)], lineno=100, col_offset=0), Import([alias('sys', None)], lineno=101, col_offset=0), Import([alias('time', None)], lineno=102, col_offset=0), Import([alias('urlparse', None)], lineno=103, col_offset=0), Import([alias('bisect', None)], lineno=104, col_offset=0), TryExcept([ImportFrom('cStringIO', [alias('StringIO', None)], 0, lineno=107, col_offset=4)], [ExceptHandler(Name('ImportError', Load(), lineno=108, col_offset=7), None, [ImportFrom('StringIO', [alias('StringIO', None)], 0, lineno=109, col_offset=4)], lineno=108, col_offset=0)], [], lineno=106, col_offset=0), ImportFrom('urllib', [alias('unwrap', None), alias('unquote', None), alias('splittype', None), alias('splithost', None), alias('quote', None), alias('addinfourl', None), alias('splitport', None), alias('splittag', None), alias('splitattr', None), alias('ftpwrapper', None), alias('splituser', None), alias('splitpasswd', None), alias('splitvalue', None)], 0, lineno=111, col_offset=0), ImportFrom('urllib', [alias('localhost', None), alias('url2pathname', None), alias('getproxies', None), alias('proxy_bypass', None)], 0, lineno=116, col_offset=0), Assign([Name('__version__', Store(), lineno=119, col_offset=0)], Subscript(Attribute(Name('sys', Load(), lineno=119, col_offset=14), 'version', Load(), lineno=119, col_offset=14), Slice(None, Num(3, lineno=119, col_offset=27), None), Load(), lineno=119, col_offset=14), lineno=119, col_offset=0), Assign([Name('_opener', Store(), lineno=121, col_offset=0)], Name('None', Load(), lineno=121, col_offset=10), lineno=121, col_offset=0), FunctionDef('urlopen', arguments([Name('url', Param(), lineno=122, col_offset=12), Name('data', Param(), lineno=122, col_offset=17), Name('timeout', Param(), lineno=122, col_offset=28)], None, None, [Name('None', Load(), lineno=122, col_offset=22), Attribute(Name('socket', Load(), lineno=122, col_offset=36), '_GLOBAL_DEFAULT_TIMEOUT', Load(), lineno=122, col_offset=36)]), [Global(['_opener'], lineno=123, col_offset=4), If(Compare(Name('_opener', Load(), lineno=124, col_offset=7), [Is()], [Name('None', Load(), lineno=124, col_offset=18)], lineno=124, col_offset=7), [Assign([Name('_opener', Store(), lineno=125, col_offset=8)], Call(Name('build_opener', Load(), lineno=125, col_offset=18), [], [], None, None, lineno=125, col_offset=18), lineno=125, col_offset=8)], [], lineno=124, col_offset=4), Return(Call(Attribute(Name('_opener', Load(), lineno=126, col_offset=11), 'open', Load(), lineno=126, col_offset=11), [Name('url', Load(), lineno=126, col_offset=24), Name('data', Load(), lineno=126, col_offset=29), Name('timeout', Load(), lineno=126, col_offset=35)], [], None, None, lineno=126, col_offset=11), lineno=126, col_offset=4)], [], lineno=122, col_offset=0), FunctionDef('install_opener', arguments([Name('opener', Param(), lineno=128, col_offset=19)], None, None, []), [Global(['_opener'], lineno=129, col_offset=4), Assign([Name('_opener', Store(), lineno=130, col_offset=4)], Name('opener', Load(), lineno=130, col_offset=14), lineno=130, col_offset=4)], [], lineno=128, col_offset=0), ClassDef('URLError', [Name('IOError', Load(), lineno=136, col_offset=15)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=142, col_offset=17), Name('reason', Param(), lineno=142, col_offset=23)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=143, col_offset=8), 'args', Store(), lineno=143, col_offset=8)], Tuple([Name('reason', Load(), lineno=143, col_offset=20)], Load(), lineno=143, col_offset=20), lineno=143, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=144, col_offset=8), 'reason', Store(), lineno=144, col_offset=8)], Name('reason', Load(), lineno=144, col_offset=22), lineno=144, col_offset=8)], [], lineno=142, col_offset=4), FunctionDef('__str__', arguments([Name('self', Param(), lineno=146, col_offset=16)], None, None, []), [Return(BinOp(Str('<urlopen error %s>', lineno=147, col_offset=15), Mod(), Attribute(Name('self', Load(), lineno=147, col_offset=38), 'reason', Load(), lineno=147, col_offset=38), lineno=147, col_offset=15), lineno=147, col_offset=8)], [], lineno=146, col_offset=4)], [], lineno=136, col_offset=0), ClassDef('HTTPError', [Name('URLError', Load(), lineno=149, col_offset=16), Name('addinfourl', Load(), lineno=149, col_offset=26)], [Expr(Str('Raised when HTTP error occurs, but also acts like non-error return', lineno=150, col_offset=4), lineno=150, col_offset=4), Assign([Name('__super_init', Store(), lineno=151, col_offset=4)], Attribute(Name('addinfourl', Load(), lineno=151, col_offset=19), '__init__', Load(), lineno=151, col_offset=19), lineno=151, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=153, col_offset=17), Name('url', Param(), lineno=153, col_offset=23), Name('code', Param(), lineno=153, col_offset=28), Name('msg', Param(), lineno=153, col_offset=34), Name('hdrs', Param(), lineno=153, col_offset=39), Name('fp', Param(), lineno=153, col_offset=45)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=154, col_offset=8), 'code', Store(), lineno=154, col_offset=8)], Name('code', Load(), lineno=154, col_offset=20), lineno=154, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=155, col_offset=8), 'msg', Store(), lineno=155, col_offset=8)], Name('msg', Load(), lineno=155, col_offset=19), lineno=155, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=156, col_offset=8), 'hdrs', Store(), lineno=156, col_offset=8)], Name('hdrs', Load(), lineno=156, col_offset=20), lineno=156, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=157, col_offset=8), 'fp', Store(), lineno=157, col_offset=8)], Name('fp', Load(), lineno=157, col_offset=18), lineno=157, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=158, col_offset=8), 'filename', Store(), lineno=158, col_offset=8)], Name('url', Load(), lineno=158, col_offset=24), lineno=158, col_offset=8), If(Compare(Name('fp', Load(), lineno=163, col_offset=11), [IsNot()], [Name('None', Load(), lineno=163, col_offset=21)], lineno=163, col_offset=11), [Expr(Call(Attribute(Name('self', Load(), lineno=164, col_offset=12), '__super_init', Load(), lineno=164, col_offset=12), [Name('fp', Load(), lineno=164, col_offset=30), Name('hdrs', Load(), lineno=164, col_offset=34), Name('url', Load(), lineno=164, col_offset=40), Name('code', Load(), lineno=164, col_offset=45)], [], None, None, lineno=164, col_offset=12), lineno=164, col_offset=12)], [], lineno=163, col_offset=8)], [], lineno=153, col_offset=4), FunctionDef('__str__', arguments([Name('self', Param(), lineno=166, col_offset=16)], None, None, []), [Return(BinOp(Str('HTTP Error %s: %s', lineno=167, col_offset=15), Mod(), Tuple([Attribute(Name('self', Load(), lineno=167, col_offset=38), 'code', Load(), lineno=167, col_offset=38), Attribute(Name('self', Load(), lineno=167, col_offset=49), 'msg', Load(), lineno=167, col_offset=49)], Load(), lineno=167, col_offset=38), lineno=167, col_offset=15), lineno=167, col_offset=8)], [], lineno=166, col_offset=4)], [], lineno=149, col_offset=0), Assign([Name('_cut_port_re', Store(), lineno=170, col_offset=0)], Call(Attribute(Name('re', Load(), lineno=170, col_offset=15), 'compile', Load(), lineno=170, col_offset=15), [Str(':\\d+$', lineno=170, col_offset=26)], [], None, None, lineno=170, col_offset=15), lineno=170, col_offset=0), FunctionDef('request_host', arguments([Name('request', Param(), lineno=171, col_offset=17)], None, None, []), [Expr(Str('Return request-host, as defined by RFC 2965.\n\n    Variation from RFC: returned value is lowercased, for convenient\n    comparison.\n\n    ', lineno=177, col_offset=-1), lineno=177, col_offset=-1), Assign([Name('url', Store(), lineno=178, col_offset=4)], Call(Attribute(Name('request', Load(), lineno=178, col_offset=10), 'get_full_url', Load(), lineno=178, col_offset=10), [], [], None, None, lineno=178, col_offset=10), lineno=178, col_offset=4), Assign([Name('host', Store(), lineno=179, col_offset=4)], Subscript(Call(Attribute(Name('urlparse', Load(), lineno=179, col_offset=11), 'urlparse', Load(), lineno=179, col_offset=11), [Name('url', Load(), lineno=179, col_offset=29)], [], None, None, lineno=179, col_offset=11), Index(Num(1, lineno=179, col_offset=34)), Load(), lineno=179, col_offset=11), lineno=179, col_offset=4), If(Compare(Name('host', Load(), lineno=180, col_offset=7), [Eq()], [Str('', lineno=180, col_offset=15)], lineno=180, col_offset=7), [Assign([Name('host', Store(), lineno=181, col_offset=8)], Call(Attribute(Name('request', Load(), lineno=181, col_offset=15), 'get_header', Load(), lineno=181, col_offset=15), [Str('Host', lineno=181, col_offset=34), Str('', lineno=181, col_offset=42)], [], None, None, lineno=181, col_offset=15), lineno=181, col_offset=8)], [], lineno=180, col_offset=4), Assign([Name('host', Store(), lineno=184, col_offset=4)], Call(Attribute(Name('_cut_port_re', Load(), lineno=184, col_offset=11), 'sub', Load(), lineno=184, col_offset=11), [Str('', lineno=184, col_offset=28), Name('host', Load(), lineno=184, col_offset=32), Num(1, lineno=184, col_offset=38)], [], None, None, lineno=184, col_offset=11), lineno=184, col_offset=4), Return(Call(Attribute(Name('host', Load(), lineno=185, col_offset=11), 'lower', Load(), lineno=185, col_offset=11), [], [], None, None, lineno=185, col_offset=11), lineno=185, col_offset=4)], [], lineno=171, col_offset=0), ClassDef('Request', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=189, col_offset=17), Name('url', Param(), lineno=189, col_offset=23), Name('data', Param(), lineno=189, col_offset=28), Name('headers', Param(), lineno=189, col_offset=39), Name('origin_req_host', Param(), lineno=190, col_offset=17), Name('unverifiable', Param(), lineno=190, col_offset=39)], None, None, [Name('None', Load(), lineno=189, col_offset=33), Dict([], [], lineno=189, col_offset=47), Name('None', Load(), lineno=190, col_offset=33), Name('False', Load(), lineno=190, col_offset=52)]), [Assign([Attribute(Name('self', Load(), lineno=192, col_offset=8), '__original', Store(), lineno=192, col_offset=8)], Call(Name('unwrap', Load(), lineno=192, col_offset=26), [Name('url', Load(), lineno=192, col_offset=33)], [], None, None, lineno=192, col_offset=26), lineno=192, col_offset=8), Assign([Tuple([Attribute(Name('self', Load(), lineno=193, col_offset=8), '__original', Store(), lineno=193, col_offset=8), Name('fragment', Store(), lineno=193, col_offset=25)], Store(), lineno=193, col_offset=8)], Call(Name('splittag', Load(), lineno=193, col_offset=36), [Attribute(Name('self', Load(), lineno=193, col_offset=45), '__original', Load(), lineno=193, col_offset=45)], [], None, None, lineno=193, col_offset=36), lineno=193, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=194, col_offset=8), 'type', Store(), lineno=194, col_offset=8)], Name('None', Load(), lineno=194, col_offset=20), lineno=194, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=196, col_offset=8), 'host', Store(), lineno=196, col_offset=8)], Name('None', Load(), lineno=196, col_offset=20), lineno=196, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=197, col_offset=8), 'port', Store(), lineno=197, col_offset=8)], Name('None', Load(), lineno=197, col_offset=20), lineno=197, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=198, col_offset=8), '_tunnel_host', Store(), lineno=198, col_offset=8)], Name('None', Load(), lineno=198, col_offset=28), lineno=198, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=199, col_offset=8), 'data', Store(), lineno=199, col_offset=8)], Name('data', Load(), lineno=199, col_offset=20), lineno=199, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=200, col_offset=8), 'headers', Store(), lineno=200, col_offset=8)], Dict([], [], lineno=200, col_offset=23), lineno=200, col_offset=8), For(Tuple([Name('key', Store(), lineno=201, col_offset=12), Name('value', Store(), lineno=201, col_offset=17)], Store(), lineno=201, col_offset=12), Call(Attribute(Name('headers', Load(), lineno=201, col_offset=26), 'items', Load(), lineno=201, col_offset=26), [], [], None, None, lineno=201, col_offset=26), [Expr(Call(Attribute(Name('self', Load(), lineno=202, col_offset=12), 'add_header', Load(), lineno=202, col_offset=12), [Name('key', Load(), lineno=202, col_offset=28), Name('value', Load(), lineno=202, col_offset=33)], [], None, None, lineno=202, col_offset=12), lineno=202, col_offset=12)], [], lineno=201, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=203, col_offset=8), 'unredirected_hdrs', Store(), lineno=203, col_offset=8)], Dict([], [], lineno=203, col_offset=33), lineno=203, col_offset=8), If(Compare(Name('origin_req_host', Load(), lineno=204, col_offset=11), [Is()], [Name('None', Load(), lineno=204, col_offset=30)], lineno=204, col_offset=11), [Assign([Name('origin_req_host', Store(), lineno=205, col_offset=12)], Call(Name('request_host', Load(), lineno=205, col_offset=30), [Name('self', Load(), lineno=205, col_offset=43)], [], None, None, lineno=205, col_offset=30), lineno=205, col_offset=12)], [], lineno=204, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=206, col_offset=8), 'origin_req_host', Store(), lineno=206, col_offset=8)], Name('origin_req_host', Load(), lineno=206, col_offset=31), lineno=206, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=207, col_offset=8), 'unverifiable', Store(), lineno=207, col_offset=8)], Name('unverifiable', Load(), lineno=207, col_offset=28), lineno=207, col_offset=8)], [], lineno=189, col_offset=4), FunctionDef('__getattr__', arguments([Name('self', Param(), lineno=209, col_offset=20), Name('attr', Param(), lineno=209, col_offset=26)], None, None, []), [If(Compare(Subscript(Name('attr', Load(), lineno=214, col_offset=11), Slice(None, Num(12, lineno=214, col_offset=17), None), Load(), lineno=214, col_offset=11), [Eq()], [Str('_Request__r_', lineno=214, col_offset=24)], lineno=214, col_offset=11), [Assign([Name('name', Store(), lineno=215, col_offset=12)], Subscript(Name('attr', Load(), lineno=215, col_offset=19), Slice(Num(12, lineno=215, col_offset=24), None, None), Load(), lineno=215, col_offset=19), lineno=215, col_offset=12), If(Call(Name('hasattr', Load(), lineno=216, col_offset=15), [Name('Request', Load(), lineno=216, col_offset=23), BinOp(Str('get_', lineno=216, col_offset=32), Add(), Name('name', Load(), lineno=216, col_offset=41), lineno=216, col_offset=32)], [], None, None, lineno=216, col_offset=15), [Expr(Call(Call(Name('getattr', Load(), lineno=217, col_offset=16), [Name('self', Load(), lineno=217, col_offset=24), BinOp(Str('get_', lineno=217, col_offset=30), Add(), Name('name', Load(), lineno=217, col_offset=39), lineno=217, col_offset=30)], [], None, None, lineno=217, col_offset=16), [], [], None, None, lineno=217, col_offset=16), lineno=217, col_offset=16), Return(Call(Name('getattr', Load(), lineno=218, col_offset=23), [Name('self', Load(), lineno=218, col_offset=31), Name('attr', Load(), lineno=218, col_offset=37)], [], None, None, lineno=218, col_offset=23), lineno=218, col_offset=16)], [], lineno=216, col_offset=12)], [], lineno=214, col_offset=8), Raise(Name('AttributeError', Load(), lineno=219, col_offset=14), Name('attr', Load(), lineno=219, col_offset=30), None, lineno=219, col_offset=8)], [], lineno=209, col_offset=4), FunctionDef('get_method', arguments([Name('self', Param(), lineno=221, col_offset=19)], None, None, []), [If(Call(Attribute(Name('self', Load(), lineno=222, col_offset=11), 'has_data', Load(), lineno=222, col_offset=11), [], [], None, None, lineno=222, col_offset=11), [Return(Str('POST', lineno=223, col_offset=19), lineno=223, col_offset=12)], [Return(Str('GET', lineno=225, col_offset=19), lineno=225, col_offset=12)], lineno=222, col_offset=8)], [], lineno=221, col_offset=4), FunctionDef('add_data', arguments([Name('self', Param(), lineno=229, col_offset=17), Name('data', Param(), lineno=229, col_offset=23)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=230, col_offset=8), 'data', Store(), lineno=230, col_offset=8)], Name('data', Load(), lineno=230, col_offset=20), lineno=230, col_offset=8)], [], lineno=229, col_offset=4), FunctionDef('has_data', arguments([Name('self', Param(), lineno=232, col_offset=17)], None, None, []), [Return(Compare(Attribute(Name('self', Load(), lineno=233, col_offset=15), 'data', Load(), lineno=233, col_offset=15), [IsNot()], [Name('None', Load(), lineno=233, col_offset=32)], lineno=233, col_offset=15), lineno=233, col_offset=8)], [], lineno=232, col_offset=4), FunctionDef('get_data', arguments([Name('self', Param(), lineno=235, col_offset=17)], None, None, []), [Return(Attribute(Name('self', Load(), lineno=236, col_offset=15), 'data', Load(), lineno=236, col_offset=15), lineno=236, col_offset=8)], [], lineno=235, col_offset=4), FunctionDef('get_full_url', arguments([Name('self', Param(), lineno=238, col_offset=21)], None, None, []), [Return(Attribute(Name('self', Load(), lineno=239, col_offset=15), '__original', Load(), lineno=239, col_offset=15), lineno=239, col_offset=8)], [], lineno=238, col_offset=4), FunctionDef('get_type', arguments([Name('self', Param(), lineno=241, col_offset=17)], None, None, []), [If(Compare(Attribute(Name('self', Load(), lineno=242, col_offset=11), 'type', Load(), lineno=242, col_offset=11), [Is()], [Name('None', Load(), lineno=242, col_offset=24)], lineno=242, col_offset=11), [Assign([Tuple([Attribute(Name('self', Load(), lineno=243, col_offset=12), 'type', Store(), lineno=243, col_offset=12), Attribute(Name('self', Load(), lineno=243, col_offset=23), '__r_type', Store(), lineno=243, col_offset=23)], Store(), lineno=243, col_offset=12)], Call(Name('splittype', Load(), lineno=243, col_offset=39), [Attribute(Name('self', Load(), lineno=243, col_offset=49), '__original', Load(), lineno=243, col_offset=49)], [], None, None, lineno=243, col_offset=39), lineno=243, col_offset=12), If(Compare(Attribute(Name('self', Load(), lineno=244, col_offset=15), 'type', Load(), lineno=244, col_offset=15), [Is()], [Name('None', Load(), lineno=244, col_offset=28)], lineno=244, col_offset=15), [Raise(Name('ValueError', Load(), lineno=245, col_offset=22), BinOp(Str('unknown url type: %s', lineno=245, col_offset=34), Mod(), Attribute(Name('self', Load(), lineno=245, col_offset=59), '__original', Load(), lineno=245, col_offset=59), lineno=245, col_offset=34), None, lineno=245, col_offset=16)], [], lineno=244, col_offset=12)], [], lineno=242, col_offset=8), Return(Attribute(Name('self', Load(), lineno=246, col_offset=15), 'type', Load(), lineno=246, col_offset=15), lineno=246, col_offset=8)], [], lineno=241, col_offset=4), FunctionDef('get_host', arguments([Name('self', Param(), lineno=248, col_offset=17)], None, None, []), [If(Compare(Attribute(Name('self', Load(), lineno=249, col_offset=11), 'host', Load(), lineno=249, col_offset=11), [Is()], [Name('None', Load(), lineno=249, col_offset=24)], lineno=249, col_offset=11), [Assign([Tuple([Attribute(Name('self', Load(), lineno=250, col_offset=12), 'host', Store(), lineno=250, col_offset=12), Attribute(Name('self', Load(), lineno=250, col_offset=23), '__r_host', Store(), lineno=250, col_offset=23)], Store(), lineno=250, col_offset=12)], Call(Name('splithost', Load(), lineno=250, col_offset=39), [Attribute(Name('self', Load(), lineno=250, col_offset=49), '__r_type', Load(), lineno=250, col_offset=49)], [], None, None, lineno=250, col_offset=39), lineno=250, col_offset=12), If(Attribute(Name('self', Load(), lineno=251, col_offset=15), 'host', Load(), lineno=251, col_offset=15), [Assign([Attribute(Name('self', Load(), lineno=252, col_offset=16), 'host', Store(), lineno=252, col_offset=16)], Call(Name('unquote', Load(), lineno=252, col_offset=28), [Attribute(Name('self', Load(), lineno=252, col_offset=36), 'host', Load(), lineno=252, col_offset=36)], [], None, None, lineno=252, col_offset=28), lineno=252, col_offset=16)], [], lineno=251, col_offset=12)], [], lineno=249, col_offset=8), Return(Attribute(Name('self', Load(), lineno=253, col_offset=15), 'host', Load(), lineno=253, col_offset=15), lineno=253, col_offset=8)], [], lineno=248, col_offset=4), FunctionDef('get_selector', arguments([Name('self', Param(), lineno=255, col_offset=21)], None, None, []), [Return(Attribute(Name('self', Load(), lineno=256, col_offset=15), '__r_host', Load(), lineno=256, col_offset=15), lineno=256, col_offset=8)], [], lineno=255, col_offset=4), FunctionDef('set_proxy', arguments([Name('self', Param(), lineno=258, col_offset=18), Name('host', Param(), lineno=258, col_offset=24), Name('type', Param(), lineno=258, col_offset=30)], None, None, []), [If(BoolOp(And(), [Compare(Attribute(Name('self', Load(), lineno=259, col_offset=11), 'type', Load(), lineno=259, col_offset=11), [Eq()], [Str('https', lineno=259, col_offset=24)], lineno=259, col_offset=11), UnaryOp(Not(), Attribute(Name('self', Load(), lineno=259, col_offset=40), '_tunnel_host', Load(), lineno=259, col_offset=40), lineno=259, col_offset=36)], lineno=259, col_offset=11), [Assign([Attribute(Name('self', Load(), lineno=260, col_offset=12), '_tunnel_host', Store(), lineno=260, col_offset=12)], Attribute(Name('self', Load(), lineno=260, col_offset=32), 'host', Load(), lineno=260, col_offset=32), lineno=260, col_offset=12)], [Assign([Attribute(Name('self', Load(), lineno=262, col_offset=12), 'type', Store(), lineno=262, col_offset=12)], Name('type', Load(), lineno=262, col_offset=24), lineno=262, col_offset=12), Assign([Attribute(Name('self', Load(), lineno=263, col_offset=12), '__r_host', Store(), lineno=263, col_offset=12)], Attribute(Name('self', Load(), lineno=263, col_offset=28), '__original', Load(), lineno=263, col_offset=28), lineno=263, col_offset=12)], lineno=259, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=265, col_offset=8), 'host', Store(), lineno=265, col_offset=8)], Name('host', Load(), lineno=265, col_offset=20), lineno=265, col_offset=8)], [], lineno=258, col_offset=4), FunctionDef('has_proxy', arguments([Name('self', Param(), lineno=267, col_offset=18)], None, None, []), [Return(Compare(Attribute(Name('self', Load(), lineno=268, col_offset=15), '__r_host', Load(), lineno=268, col_offset=15), [Eq()], [Attribute(Name('self', Load(), lineno=268, col_offset=32), '__original', Load(), lineno=268, col_offset=32)], lineno=268, col_offset=15), lineno=268, col_offset=8)], [], lineno=267, col_offset=4), FunctionDef('get_origin_req_host', arguments([Name('self', Param(), lineno=270, col_offset=28)], None, None, []), [Return(Attribute(Name('self', Load(), lineno=271, col_offset=15), 'origin_req_host', Load(), lineno=271, col_offset=15), lineno=271, col_offset=8)], [], lineno=270, col_offset=4), FunctionDef('is_unverifiable', arguments([Name('self', Param(), lineno=273, col_offset=24)], None, None, []), [Return(Attribute(Name('self', Load(), lineno=274, col_offset=15), 'unverifiable', Load(), lineno=274, col_offset=15), lineno=274, col_offset=8)], [], lineno=273, col_offset=4), FunctionDef('add_header', arguments([Name('self', Param(), lineno=276, col_offset=19), Name('key', Param(), lineno=276, col_offset=25), Name('val', Param(), lineno=276, col_offset=30)], None, None, []), [Assign([Subscript(Attribute(Name('self', Load(), lineno=278, col_offset=8), 'headers', Load(), lineno=278, col_offset=8), Index(Call(Attribute(Name('key', Load(), lineno=278, col_offset=21), 'capitalize', Load(), lineno=278, col_offset=21), [], [], None, None, lineno=278, col_offset=21)), Store(), lineno=278, col_offset=8)], Name('val', Load(), lineno=278, col_offset=41), lineno=278, col_offset=8)], [], lineno=276, col_offset=4), FunctionDef('add_unredirected_header', arguments([Name('self', Param(), lineno=280, col_offset=32), Name('key', Param(), lineno=280, col_offset=38), Name('val', Param(), lineno=280, col_offset=43)], None, None, []), [Assign([Subscript(Attribute(Name('self', Load(), lineno=282, col_offset=8), 'unredirected_hdrs', Load(), lineno=282, col_offset=8), Index(Call(Attribute(Name('key', Load(), lineno=282, col_offset=31), 'capitalize', Load(), lineno=282, col_offset=31), [], [], None, None, lineno=282, col_offset=31)), Store(), lineno=282, col_offset=8)], Name('val', Load(), lineno=282, col_offset=51), lineno=282, col_offset=8)], [], lineno=280, col_offset=4), FunctionDef('has_header', arguments([Name('self', Param(), lineno=284, col_offset=19), Name('header_name', Param(), lineno=284, col_offset=25)], None, None, []), [Return(BoolOp(Or(), [Compare(Name('header_name', Load(), lineno=285, col_offset=16), [In()], [Attribute(Name('self', Load(), lineno=285, col_offset=31), 'headers', Load(), lineno=285, col_offset=31)], lineno=285, col_offset=16), Compare(Name('header_name', Load(), lineno=286, col_offset=16), [In()], [Attribute(Name('self', Load(), lineno=286, col_offset=31), 'unredirected_hdrs', Load(), lineno=286, col_offset=31)], lineno=286, col_offset=16)], lineno=285, col_offset=16), lineno=285, col_offset=8)], [], lineno=284, col_offset=4), FunctionDef('get_header', arguments([Name('self', Param(), lineno=288, col_offset=19), Name('header_name', Param(), lineno=288, col_offset=25), Name('default', Param(), lineno=288, col_offset=38)], None, None, [Name('None', Load(), lineno=288, col_offset=46)]), [Return(Call(Attribute(Attribute(Name('self', Load(), lineno=289, col_offset=15), 'headers', Load(), lineno=289, col_offset=15), 'get', Load(), lineno=289, col_offset=15), [Name('header_name', Load(), lineno=290, col_offset=12), Call(Attribute(Attribute(Name('self', Load(), lineno=291, col_offset=12), 'unredirected_hdrs', Load(), lineno=291, col_offset=12), 'get', Load(), lineno=291, col_offset=12), [Name('header_name', Load(), lineno=291, col_offset=39), Name('default', Load(), lineno=291, col_offset=52)], [], None, None, lineno=291, col_offset=12)], [], None, None, lineno=289, col_offset=15), lineno=289, col_offset=8)], [], lineno=288, col_offset=4), FunctionDef('header_items', arguments([Name('self', Param(), lineno=293, col_offset=21)], None, None, []), [Assign([Name('hdrs', Store(), lineno=294, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=294, col_offset=15), 'unredirected_hdrs', Load(), lineno=294, col_offset=15), 'copy', Load(), lineno=294, col_offset=15), [], [], None, None, lineno=294, col_offset=15), lineno=294, col_offset=8), Expr(Call(Attribute(Name('hdrs', Load(), lineno=295, col_offset=8), 'update', Load(), lineno=295, col_offset=8), [Attribute(Name('self', Load(), lineno=295, col_offset=20), 'headers', Load(), lineno=295, col_offset=20)], [], None, None, lineno=295, col_offset=8), lineno=295, col_offset=8), Return(Call(Attribute(Name('hdrs', Load(), lineno=296, col_offset=15), 'items', Load(), lineno=296, col_offset=15), [], [], None, None, lineno=296, col_offset=15), lineno=296, col_offset=8)], [], lineno=293, col_offset=4)], [], lineno=187, col_offset=0), ClassDef('OpenerDirector', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=299, col_offset=17)], None, None, []), [Assign([Name('client_version', Store(), lineno=300, col_offset=8)], BinOp(Str('Python-urllib/%s', lineno=300, col_offset=25), Mod(), Name('__version__', Load(), lineno=300, col_offset=46), lineno=300, col_offset=25), lineno=300, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=301, col_offset=8), 'addheaders', Store(), lineno=301, col_offset=8)], List([Tuple([Str('User-agent', lineno=301, col_offset=28), Name('client_version', Load(), lineno=301, col_offset=42)], Load(), lineno=301, col_offset=28)], Load(), lineno=301, col_offset=26), lineno=301, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=303, col_offset=8), 'handlers', Store(), lineno=303, col_offset=8)], List([], Load(), lineno=303, col_offset=24), lineno=303, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=304, col_offset=8), 'handle_open', Store(), lineno=304, col_offset=8)], Dict([], [], lineno=304, col_offset=27), lineno=304, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=305, col_offset=8), 'handle_error', Store(), lineno=305, col_offset=8)], Dict([], [], lineno=305, col_offset=28), lineno=305, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=306, col_offset=8), 'process_response', Store(), lineno=306, col_offset=8)], Dict([], [], lineno=306, col_offset=32), lineno=306, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=307, col_offset=8), 'process_request', Store(), lineno=307, col_offset=8)], Dict([], [], lineno=307, col_offset=31), lineno=307, col_offset=8)], [], lineno=299, col_offset=4), FunctionDef('add_handler', arguments([Name('self', Param(), lineno=309, col_offset=20), Name('handler', Param(), lineno=309, col_offset=26)], None, None, []), [If(UnaryOp(Not(), Call(Name('hasattr', Load(), lineno=310, col_offset=15), [Name('handler', Load(), lineno=310, col_offset=23), Str('add_parent', lineno=310, col_offset=32)], [], None, None, lineno=310, col_offset=15), lineno=310, col_offset=11), [Raise(Call(Name('TypeError', Load(), lineno=311, col_offset=18), [BinOp(Str('expected BaseHandler instance, got %r', lineno=311, col_offset=28), Mod(), Call(Name('type', Load(), lineno=312, col_offset=28), [Name('handler', Load(), lineno=312, col_offset=33)], [], None, None, lineno=312, col_offset=28), lineno=311, col_offset=28)], [], None, None, lineno=311, col_offset=18), None, None, lineno=311, col_offset=12)], [], lineno=310, col_offset=8), Assign([Name('added', Store(), lineno=314, col_offset=8)], Name('False', Load(), lineno=314, col_offset=16), lineno=314, col_offset=8), For(Name('meth', Store(), lineno=315, col_offset=12), Call(Name('dir', Load(), lineno=315, col_offset=20), [Name('handler', Load(), lineno=315, col_offset=24)], [], None, None, lineno=315, col_offset=20), [If(Compare(Name('meth', Load(), lineno=316, col_offset=15), [In()], [List([Str('redirect_request', lineno=316, col_offset=24), Str('do_open', lineno=316, col_offset=44), Str('proxy_open', lineno=316, col_offset=55)], Load(), lineno=316, col_offset=23)], lineno=316, col_offset=15), [Continue( lineno=318, col_offset=16)], [], lineno=316, col_offset=12), Assign([Name('i', Store(), lineno=320, col_offset=12)], Call(Attribute(Name('meth', Load(), lineno=320, col_offset=16), 'find', Load(), lineno=320, col_offset=16), [Str('_', lineno=320, col_offset=26)], [], None, None, lineno=320, col_offset=16), lineno=320, col_offset=12), Assign([Name('protocol', Store(), lineno=321, col_offset=12)], Subscript(Name('meth', Load(), lineno=321, col_offset=23), Slice(None, Name('i', Load(), lineno=321, col_offset=29), None), Load(), lineno=321, col_offset=23), lineno=321, col_offset=12), Assign([Name('condition', Store(), lineno=322, col_offset=12)], Subscript(Name('meth', Load(), lineno=322, col_offset=24), Slice(BinOp(Name('i', Load(), lineno=322, col_offset=29), Add(), Num(1, lineno=322, col_offset=31), lineno=322, col_offset=29), None, None), Load(), lineno=322, col_offset=24), lineno=322, col_offset=12), If(Call(Attribute(Name('condition', Load(), lineno=324, col_offset=15), 'startswith', Load(), lineno=324, col_offset=15), [Str('error', lineno=324, col_offset=36)], [], None, None, lineno=324, col_offset=15), [Assign([Name('j', Store(), lineno=325, col_offset=16)], BinOp(BinOp(Call(Attribute(Name('condition', Load(), lineno=325, col_offset=20), 'find', Load(), lineno=325, col_offset=20), [Str('_', lineno=325, col_offset=35)], [], None, None, lineno=325, col_offset=20), Add(), Name('i', Load(), lineno=325, col_offset=42), lineno=325, col_offset=20), Add(), Num(1, lineno=325, col_offset=46), lineno=325, col_offset=44), lineno=325, col_offset=16), Assign([Name('kind', Store(), lineno=326, col_offset=16)], Subscript(Name('meth', Load(), lineno=326, col_offset=23), Slice(BinOp(Name('j', Load(), lineno=326, col_offset=28), Add(), Num(1, lineno=326, col_offset=30), lineno=326, col_offset=28), None, None), Load(), lineno=326, col_offset=23), lineno=326, col_offset=16), TryExcept([Assign([Name('kind', Store(), lineno=328, col_offset=20)], Call(Name('int', Load(), lineno=328, col_offset=27), [Name('kind', Load(), lineno=328, col_offset=31)], [], None, None, lineno=328, col_offset=27), lineno=328, col_offset=20)], [ExceptHandler(Name('ValueError', Load(), lineno=329, col_offset=23), None, [Pass( lineno=330, col_offset=20)], lineno=329, col_offset=16)], [], lineno=327, col_offset=16), Assign([Name('lookup', Store(), lineno=331, col_offset=16)], Call(Attribute(Attribute(Name('self', Load(), lineno=331, col_offset=25), 'handle_error', Load(), lineno=331, col_offset=25), 'get', Load(), lineno=331, col_offset=25), [Name('protocol', Load(), lineno=331, col_offset=47), Dict([], [], lineno=331, col_offset=57)], [], None, None, lineno=331, col_offset=25), lineno=331, col_offset=16), Assign([Subscript(Attribute(Name('self', Load(), lineno=332, col_offset=16), 'handle_error', Load(), lineno=332, col_offset=16), Index(Name('protocol', Load(), lineno=332, col_offset=34)), Store(), lineno=332, col_offset=16)], Name('lookup', Load(), lineno=332, col_offset=46), lineno=332, col_offset=16)], [If(Compare(Name('condition', Load(), lineno=333, col_offset=17), [Eq()], [Str('open', lineno=333, col_offset=30)], lineno=333, col_offset=17), [Assign([Name('kind', Store(), lineno=334, col_offset=16)], Name('protocol', Load(), lineno=334, col_offset=23), lineno=334, col_offset=16), Assign([Name('lookup', Store(), lineno=335, col_offset=16)], Attribute(Name('self', Load(), lineno=335, col_offset=25), 'handle_open', Load(), lineno=335, col_offset=25), lineno=335, col_offset=16)], [If(Compare(Name('condition', Load(), lineno=336, col_offset=17), [Eq()], [Str('response', lineno=336, col_offset=30)], lineno=336, col_offset=17), [Assign([Name('kind', Store(), lineno=337, col_offset=16)], Name('protocol', Load(), lineno=337, col_offset=23), lineno=337, col_offset=16), Assign([Name('lookup', Store(), lineno=338, col_offset=16)], Attribute(Name('self', Load(), lineno=338, col_offset=25), 'process_response', Load(), lineno=338, col_offset=25), lineno=338, col_offset=16)], [If(Compare(Name('condition', Load(), lineno=339, col_offset=17), [Eq()], [Str('request', lineno=339, col_offset=30)], lineno=339, col_offset=17), [Assign([Name('kind', Store(), lineno=340, col_offset=16)], Name('protocol', Load(), lineno=340, col_offset=23), lineno=340, col_offset=16), Assign([Name('lookup', Store(), lineno=341, col_offset=16)], Attribute(Name('self', Load(), lineno=341, col_offset=25), 'process_request', Load(), lineno=341, col_offset=25), lineno=341, col_offset=16)], [Continue( lineno=343, col_offset=16)], lineno=339, col_offset=17)], lineno=336, col_offset=17)], lineno=333, col_offset=17)], lineno=324, col_offset=12), Assign([Name('handlers', Store(), lineno=345, col_offset=12)], Call(Attribute(Name('lookup', Load(), lineno=345, col_offset=23), 'setdefault', Load(), lineno=345, col_offset=23), [Name('kind', Load(), lineno=345, col_offset=41), List([], Load(), lineno=345, col_offset=47)], [], None, None, lineno=345, col_offset=23), lineno=345, col_offset=12), If(Name('handlers', Load(), lineno=346, col_offset=15), [Expr(Call(Attribute(Name('bisect', Load(), lineno=347, col_offset=16), 'insort', Load(), lineno=347, col_offset=16), [Name('handlers', Load(), lineno=347, col_offset=30), Name('handler', Load(), lineno=347, col_offset=40)], [], None, None, lineno=347, col_offset=16), lineno=347, col_offset=16)], [Expr(Call(Attribute(Name('handlers', Load(), lineno=349, col_offset=16), 'append', Load(), lineno=349, col_offset=16), [Name('handler', Load(), lineno=349, col_offset=32)], [], None, None, lineno=349, col_offset=16), lineno=349, col_offset=16)], lineno=346, col_offset=12), Assign([Name('added', Store(), lineno=350, col_offset=12)], Name('True', Load(), lineno=350, col_offset=20), lineno=350, col_offset=12)], [], lineno=315, col_offset=8), If(Name('added', Load(), lineno=352, col_offset=11), [Expr(Call(Attribute(Name('bisect', Load(), lineno=355, col_offset=12), 'insort', Load(), lineno=355, col_offset=12), [Attribute(Name('self', Load(), lineno=355, col_offset=26), 'handlers', Load(), lineno=355, col_offset=26), Name('handler', Load(), lineno=355, col_offset=41)], [], None, None, lineno=355, col_offset=12), lineno=355, col_offset=12), Expr(Call(Attribute(Name('handler', Load(), lineno=356, col_offset=12), 'add_parent', Load(), lineno=356, col_offset=12), [Name('self', Load(), lineno=356, col_offset=31)], [], None, None, lineno=356, col_offset=12), lineno=356, col_offset=12)], [], lineno=352, col_offset=8)], [], lineno=309, col_offset=4), FunctionDef('close', arguments([Name('self', Param(), lineno=358, col_offset=14)], None, None, []), [Pass( lineno=360, col_offset=8)], [], lineno=358, col_offset=4), FunctionDef('_call_chain', arguments([Name('self', Param(), lineno=362, col_offset=20), Name('chain', Param(), lineno=362, col_offset=26), Name('kind', Param(), lineno=362, col_offset=33), Name('meth_name', Param(), lineno=362, col_offset=39)], 'args', None, []), [Assign([Name('handlers', Store(), lineno=366, col_offset=8)], Call(Attribute(Name('chain', Load(), lineno=366, col_offset=19), 'get', Load(), lineno=366, col_offset=19), [Name('kind', Load(), lineno=366, col_offset=29), Tuple([], Load(), lineno=366, col_offset=35)], [], None, None, lineno=366, col_offset=19), lineno=366, col_offset=8), For(Name('handler', Store(), lineno=367, col_offset=12), Name('handlers', Load(), lineno=367, col_offset=23), [Assign([Name('func', Store(), lineno=368, col_offset=12)], Call(Name('getattr', Load(), lineno=368, col_offset=19), [Name('handler', Load(), lineno=368, col_offset=27), Name('meth_name', Load(), lineno=368, col_offset=36)], [], None, None, lineno=368, col_offset=19), lineno=368, col_offset=12), Assign([Name('result', Store(), lineno=370, col_offset=12)], Call(Name('func', Load(), lineno=370, col_offset=21), [], [], Name('args', Load(), lineno=370, col_offset=27), None, lineno=370, col_offset=21), lineno=370, col_offset=12), If(Compare(Name('result', Load(), lineno=371, col_offset=15), [IsNot()], [Name('None', Load(), lineno=371, col_offset=29)], lineno=371, col_offset=15), [Return(Name('result', Load(), lineno=372, col_offset=23), lineno=372, col_offset=16)], [], lineno=371, col_offset=12)], [], lineno=367, col_offset=8)], [], lineno=362, col_offset=4), FunctionDef('open', arguments([Name('self', Param(), lineno=374, col_offset=13), Name('fullurl', Param(), lineno=374, col_offset=19), Name('data', Param(), lineno=374, col_offset=28), Name('timeout', Param(), lineno=374, col_offset=39)], None, None, [Name('None', Load(), lineno=374, col_offset=33), Attribute(Name('socket', Load(), lineno=374, col_offset=47), '_GLOBAL_DEFAULT_TIMEOUT', Load(), lineno=374, col_offset=47)]), [If(Call(Name('isinstance', Load(), lineno=376, col_offset=11), [Name('fullurl', Load(), lineno=376, col_offset=22), Name('basestring', Load(), lineno=376, col_offset=31)], [], None, None, lineno=376, col_offset=11), [Assign([Name('req', Store(), lineno=377, col_offset=12)], Call(Name('Request', Load(), lineno=377, col_offset=18), [Name('fullurl', Load(), lineno=377, col_offset=26), Name('data', Load(), lineno=377, col_offset=35)], [], None, None, lineno=377, col_offset=18), lineno=377, col_offset=12)], [Assign([Name('req', Store(), lineno=379, col_offset=12)], Name('fullurl', Load(), lineno=379, col_offset=18), lineno=379, col_offset=12), If(Compare(Name('data', Load(), lineno=380, col_offset=15), [IsNot()], [Name('None', Load(), lineno=380, col_offset=27)], lineno=380, col_offset=15), [Expr(Call(Attribute(Name('req', Load(), lineno=381, col_offset=16), 'add_data', Load(), lineno=381, col_offset=16), [Name('data', Load(), lineno=381, col_offset=29)], [], None, None, lineno=381, col_offset=16), lineno=381, col_offset=16)], [], lineno=380, col_offset=12)], lineno=376, col_offset=8), Assign([Attribute(Name('req', Load(), lineno=383, col_offset=8), 'timeout', Store(), lineno=383, col_offset=8)], Name('timeout', Load(), lineno=383, col_offset=22), lineno=383, col_offset=8), Assign([Name('protocol', Store(), lineno=384, col_offset=8)], Call(Attribute(Name('req', Load(), lineno=384, col_offset=19), 'get_type', Load(), lineno=384, col_offset=19), [], [], None, None, lineno=384, col_offset=19), lineno=384, col_offset=8), Assign([Name('meth_name', Store(), lineno=387, col_offset=8)], BinOp(Name('protocol', Load(), lineno=387, col_offset=20), Add(), Str('_request', lineno=387, col_offset=29), lineno=387, col_offset=20), lineno=387, col_offset=8), For(Name('processor', Store(), lineno=388, col_offset=12), Call(Attribute(Attribute(Name('self', Load(), lineno=388, col_offset=25), 'process_request', Load(), lineno=388, col_offset=25), 'get', Load(), lineno=388, col_offset=25), [Name('protocol', Load(), lineno=388, col_offset=50), List([], Load(), lineno=388, col_offset=60)], [], None, None, lineno=388, col_offset=25), [Assign([Name('meth', Store(), lineno=389, col_offset=12)], Call(Name('getattr', Load(), lineno=389, col_offset=19), [Name('processor', Load(), lineno=389, col_offset=27), Name('meth_name', Load(), lineno=389, col_offset=38)], [], None, None, lineno=389, col_offset=19), lineno=389, col_offset=12), Assign([Name('req', Store(), lineno=390, col_offset=12)], Call(Name('meth', Load(), lineno=390, col_offset=18), [Name('req', Load(), lineno=390, col_offset=23)], [], None, None, lineno=390, col_offset=18), lineno=390, col_offset=12)], [], lineno=388, col_offset=8), Assign([Name('response', Store(), lineno=392, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=392, col_offset=19), '_open', Load(), lineno=392, col_offset=19), [Name('req', Load(), lineno=392, col_offset=30), Name('data', Load(), lineno=392, col_offset=35)], [], None, None, lineno=392, col_offset=19), lineno=392, col_offset=8), Assign([Name('meth_name', Store(), lineno=395, col_offset=8)], BinOp(Name('protocol', Load(), lineno=395, col_offset=20), Add(), Str('_response', lineno=395, col_offset=29), lineno=395, col_offset=20), lineno=395, col_offset=8), For(Name('processor', Store(), lineno=396, col_offset=12), Call(Attribute(Attribute(Name('self', Load(), lineno=396, col_offset=25), 'process_response', Load(), lineno=396, col_offset=25), 'get', Load(), lineno=396, col_offset=25), [Name('protocol', Load(), lineno=396, col_offset=51), List([], Load(), lineno=396, col_offset=61)], [], None, None, lineno=396, col_offset=25), [Assign([Name('meth', Store(), lineno=397, col_offset=12)], Call(Name('getattr', Load(), lineno=397, col_offset=19), [Name('processor', Load(), lineno=397, col_offset=27), Name('meth_name', Load(), lineno=397, col_offset=38)], [], None, None, lineno=397, col_offset=19), lineno=397, col_offset=12), Assign([Name('response', Store(), lineno=398, col_offset=12)], Call(Name('meth', Load(), lineno=398, col_offset=23), [Name('req', Load(), lineno=398, col_offset=28), Name('response', Load(), lineno=398, col_offset=33)], [], None, None, lineno=398, col_offset=23), lineno=398, col_offset=12)], [], lineno=396, col_offset=8), Return(Name('response', Load(), lineno=400, col_offset=15), lineno=400, col_offset=8)], [], lineno=374, col_offset=4), FunctionDef('_open', arguments([Name('self', Param(), lineno=402, col_offset=14), Name('req', Param(), lineno=402, col_offset=20), Name('data', Param(), lineno=402, col_offset=25)], None, None, [Name('None', Load(), lineno=402, col_offset=30)]), [Assign([Name('result', Store(), lineno=403, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=403, col_offset=17), '_call_chain', Load(), lineno=403, col_offset=17), [Attribute(Name('self', Load(), lineno=403, col_offset=34), 'handle_open', Load(), lineno=403, col_offset=34), Str('default', lineno=403, col_offset=52), Str('default_open', lineno=404, col_offset=34), Name('req', Load(), lineno=404, col_offset=50)], [], None, None, lineno=403, col_offset=17), lineno=403, col_offset=8), If(Name('result', Load(), lineno=405, col_offset=11), [Return(Name('result', Load(), lineno=406, col_offset=19), lineno=406, col_offset=12)], [], lineno=405, col_offset=8), Assign([Name('protocol', Store(), lineno=408, col_offset=8)], Call(Attribute(Name('req', Load(), lineno=408, col_offset=19), 'get_type', Load(), lineno=408, col_offset=19), [], [], None, None, lineno=408, col_offset=19), lineno=408, col_offset=8), Assign([Name('result', Store(), lineno=409, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=409, col_offset=17), '_call_chain', Load(), lineno=409, col_offset=17), [Attribute(Name('self', Load(), lineno=409, col_offset=34), 'handle_open', Load(), lineno=409, col_offset=34), Name('protocol', Load(), lineno=409, col_offset=52), BinOp(Name('protocol', Load(), lineno=409, col_offset=62), Add(), Str('_open', lineno=410, col_offset=34), lineno=409, col_offset=62), Name('req', Load(), lineno=410, col_offset=43)], [], None, None, lineno=409, col_offset=17), lineno=409, col_offset=8), If(Name('result', Load(), lineno=411, col_offset=11), [Return(Name('result', Load(), lineno=412, col_offset=19), lineno=412, col_offset=12)], [], lineno=411, col_offset=8), Return(Call(Attribute(Name('self', Load(), lineno=414, col_offset=15), '_call_chain', Load(), lineno=414, col_offset=15), [Attribute(Name('self', Load(), lineno=414, col_offset=32), 'handle_open', Load(), lineno=414, col_offset=32), Str('unknown', lineno=414, col_offset=50), Str('unknown_open', lineno=415, col_offset=32), Name('req', Load(), lineno=415, col_offset=48)], [], None, None, lineno=414, col_offset=15), lineno=414, col_offset=8)], [], lineno=402, col_offset=4), FunctionDef('error', arguments([Name('self', Param(), lineno=417, col_offset=14), Name('proto', Param(), lineno=417, col_offset=20)], 'args', None, []), [If(Compare(Name('proto', Load(), lineno=418, col_offset=11), [In()], [Tuple([Str('http', lineno=418, col_offset=21), Str('https', lineno=418, col_offset=29)], Load(), lineno=418, col_offset=21)], lineno=418, col_offset=11), [Assign([Name('dict', Store(), lineno=420, col_offset=12)], Subscript(Attribute(Name('self', Load(), lineno=420, col_offset=19), 'handle_error', Load(), lineno=420, col_offset=19), Index(Str('http', lineno=420, col_offset=37)), Load(), lineno=420, col_offset=19), lineno=420, col_offset=12), Assign([Name('proto', Store(), lineno=421, col_offset=12)], Subscript(Name('args', Load(), lineno=421, col_offset=20), Index(Num(2, lineno=421, col_offset=25)), Load(), lineno=421, col_offset=20), lineno=421, col_offset=12), Assign([Name('meth_name', Store(), lineno=422, col_offset=12)], BinOp(Str('http_error_%s', lineno=422, col_offset=24), Mod(), Name('proto', Load(), lineno=422, col_offset=42), lineno=422, col_offset=24), lineno=422, col_offset=12), Assign([Name('http_err', Store(), lineno=423, col_offset=12)], Num(1, lineno=423, col_offset=23), lineno=423, col_offset=12), Assign([Name('orig_args', Store(), lineno=424, col_offset=12)], Name('args', Load(), lineno=424, col_offset=24), lineno=424, col_offset=12)], [Assign([Name('dict', Store(), lineno=426, col_offset=12)], Attribute(Name('self', Load(), lineno=426, col_offset=19), 'handle_error', Load(), lineno=426, col_offset=19), lineno=426, col_offset=12), Assign([Name('meth_name', Store(), lineno=427, col_offset=12)], BinOp(Name('proto', Load(), lineno=427, col_offset=24), Add(), Str('_error', lineno=427, col_offset=32), lineno=427, col_offset=24), lineno=427, col_offset=12), Assign([Name('http_err', Store(), lineno=428, col_offset=12)], Num(0, lineno=428, col_offset=23), lineno=428, col_offset=12)], lineno=418, col_offset=8), Assign([Name('args', Store(), lineno=429, col_offset=8)], BinOp(Tuple([Name('dict', Load(), lineno=429, col_offset=16), Name('proto', Load(), lineno=429, col_offset=22), Name('meth_name', Load(), lineno=429, col_offset=29)], Load(), lineno=429, col_offset=16), Add(), Name('args', Load(), lineno=429, col_offset=42), lineno=429, col_offset=15), lineno=429, col_offset=8), Assign([Name('result', Store(), lineno=430, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=430, col_offset=17), '_call_chain', Load(), lineno=430, col_offset=17), [], [], Name('args', Load(), lineno=430, col_offset=35), None, lineno=430, col_offset=17), lineno=430, col_offset=8), If(Name('result', Load(), lineno=431, col_offset=11), [Return(Name('result', Load(), lineno=432, col_offset=19), lineno=432, col_offset=12)], [], lineno=431, col_offset=8), If(Name('http_err', Load(), lineno=434, col_offset=11), [Assign([Name('args', Store(), lineno=435, col_offset=12)], BinOp(Tuple([Name('dict', Load(), lineno=435, col_offset=20), Str('default', lineno=435, col_offset=26), Str('http_error_default', lineno=435, col_offset=37)], Load(), lineno=435, col_offset=20), Add(), Name('orig_args', Load(), lineno=435, col_offset=61), lineno=435, col_offset=19), lineno=435, col_offset=12), Return(Call(Attribute(Name('self', Load(), lineno=436, col_offset=19), '_call_chain', Load(), lineno=436, col_offset=19), [], [], Name('args', Load(), lineno=436, col_offset=37), None, lineno=436, col_offset=19), lineno=436, col_offset=12)], [], lineno=434, col_offset=8)], [], lineno=417, col_offset=4)], [], lineno=298, col_offset=0), FunctionDef('build_opener', arguments([], 'handlers', None, []), [Expr(Str('Create an opener object from a list of handlers.\n\n    The opener will use several default handlers, including support\n    for HTTP, FTP and when applicable, HTTPS.\n\n    If any of the handlers passed as arguments are subclasses of the\n    default handlers, the default handlers will not be used.\n    ', lineno=450, col_offset=-1), lineno=450, col_offset=-1), Import([alias('types', None)], lineno=451, col_offset=4), FunctionDef('isclass', arguments([Name('obj', Param(), lineno=452, col_offset=16)], None, None, []), [Return(Call(Name('isinstance', Load(), lineno=453, col_offset=15), [Name('obj', Load(), lineno=453, col_offset=26), Tuple([Attribute(Name('types', Load(), lineno=453, col_offset=32), 'ClassType', Load(), lineno=453, col_offset=32), Name('type', Load(), lineno=453, col_offset=49)], Load(), lineno=453, col_offset=32)], [], None, None, lineno=453, col_offset=15), lineno=453, col_offset=8)], [], lineno=452, col_offset=4), Assign([Name('opener', Store(), lineno=455, col_offset=4)], Call(Name('OpenerDirector', Load(), lineno=455, col_offset=13), [], [], None, None, lineno=455, col_offset=13), lineno=455, col_offset=4), Assign([Name('default_classes', Store(), lineno=456, col_offset=4)], List([Name('ProxyHandler', Load(), lineno=456, col_offset=23), Name('UnknownHandler', Load(), lineno=456, col_offset=37), Name('HTTPHandler', Load(), lineno=456, col_offset=53), Name('HTTPDefaultErrorHandler', Load(), lineno=457, col_offset=23), Name('HTTPRedirectHandler', Load(), lineno=457, col_offset=48), Name('FTPHandler', Load(), lineno=458, col_offset=23), Name('FileHandler', Load(), lineno=458, col_offset=35), Name('HTTPErrorProcessor', Load(), lineno=458, col_offset=48)], Load(), lineno=456, col_offset=22), lineno=456, col_offset=4), If(Call(Name('hasattr', Load(), lineno=459, col_offset=7), [Name('httplib', Load(), lineno=459, col_offset=15), Str('HTTPS', lineno=459, col_offset=24)], [], None, None, lineno=459, col_offset=7), [Expr(Call(Attribute(Name('default_classes', Load(), lineno=460, col_offset=8), 'append', Load(), lineno=460, col_offset=8), [Name('HTTPSHandler', Load(), lineno=460, col_offset=31)], [], None, None, lineno=460, col_offset=8), lineno=460, col_offset=8)], [], lineno=459, col_offset=4), Assign([Name('skip', Store(), lineno=461, col_offset=4)], Call(Name('set', Load(), lineno=461, col_offset=11), [], [], None, None, lineno=461, col_offset=11), lineno=461, col_offset=4), For(Name('klass', Store(), lineno=462, col_offset=8), Name('default_classes', Load(), lineno=462, col_offset=17), [For(Name('check', Store(), lineno=463, col_offset=12), Name('handlers', Load(), lineno=463, col_offset=21), [If(Call(Name('isclass', Load(), lineno=464, col_offset=15), [Name('check', Load(), lineno=464, col_offset=23)], [], None, None, lineno=464, col_offset=15), [If(Call(Name('issubclass', Load(), lineno=465, col_offset=19), [Name('check', Load(), lineno=465, col_offset=30), Name('klass', Load(), lineno=465, col_offset=37)], [], None, None, lineno=465, col_offset=19), [Expr(Call(Attribute(Name('skip', Load(), lineno=466, col_offset=20), 'add', Load(), lineno=466, col_offset=20), [Name('klass', Load(), lineno=466, col_offset=29)], [], None, None, lineno=466, col_offset=20), lineno=466, col_offset=20)], [], lineno=465, col_offset=16)], [If(Call(Name('isinstance', Load(), lineno=467, col_offset=17), [Name('check', Load(), lineno=467, col_offset=28), Name('klass', Load(), lineno=467, col_offset=35)], [], None, None, lineno=467, col_offset=17), [Expr(Call(Attribute(Name('skip', Load(), lineno=468, col_offset=16), 'add', Load(), lineno=468, col_offset=16), [Name('klass', Load(), lineno=468, col_offset=25)], [], None, None, lineno=468, col_offset=16), lineno=468, col_offset=16)], [], lineno=467, col_offset=17)], lineno=464, col_offset=12)], [], lineno=463, col_offset=8)], [], lineno=462, col_offset=4), For(Name('klass', Store(), lineno=469, col_offset=8), Name('skip', Load(), lineno=469, col_offset=17), [Expr(Call(Attribute(Name('default_classes', Load(), lineno=470, col_offset=8), 'remove', Load(), lineno=470, col_offset=8), [Name('klass', Load(), lineno=470, col_offset=31)], [], None, None, lineno=470, col_offset=8), lineno=470, col_offset=8)], [], lineno=469, col_offset=4), For(Name('klass', Store(), lineno=472, col_offset=8), Name('default_classes', Load(), lineno=472, col_offset=17), [Expr(Call(Attribute(Name('opener', Load(), lineno=473, col_offset=8), 'add_handler', Load(), lineno=473, col_offset=8), [Call(Name('klass', Load(), lineno=473, col_offset=27), [], [], None, None, lineno=473, col_offset=27)], [], None, None, lineno=473, col_offset=8), lineno=473, col_offset=8)], [], lineno=472, col_offset=4), For(Name('h', Store(), lineno=475, col_offset=8), Name('handlers', Load(), lineno=475, col_offset=13), [If(Call(Name('isclass', Load(), lineno=476, col_offset=11), [Name('h', Load(), lineno=476, col_offset=19)], [], None, None, lineno=476, col_offset=11), [Assign([Name('h', Store(), lineno=477, col_offset=12)], Call(Name('h', Load(), lineno=477, col_offset=16), [], [], None, None, lineno=477, col_offset=16), lineno=477, col_offset=12)], [], lineno=476, col_offset=8), Expr(Call(Attribute(Name('opener', Load(), lineno=478, col_offset=8), 'add_handler', Load(), lineno=478, col_offset=8), [Name('h', Load(), lineno=478, col_offset=27)], [], None, None, lineno=478, col_offset=8), lineno=478, col_offset=8)], [], lineno=475, col_offset=4), Return(Name('opener', Load(), lineno=479, col_offset=11), lineno=479, col_offset=4)], [], lineno=442, col_offset=0), ClassDef('BaseHandler', [], [Assign([Name('handler_order', Store(), lineno=482, col_offset=4)], Num(500, lineno=482, col_offset=20), lineno=482, col_offset=4), FunctionDef('add_parent', arguments([Name('self', Param(), lineno=484, col_offset=19), Name('parent', Param(), lineno=484, col_offset=25)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=485, col_offset=8), 'parent', Store(), lineno=485, col_offset=8)], Name('parent', Load(), lineno=485, col_offset=22), lineno=485, col_offset=8)], [], lineno=484, col_offset=4), FunctionDef('close', arguments([Name('self', Param(), lineno=487, col_offset=14)], None, None, []), [Pass( lineno=489, col_offset=8)], [], lineno=487, col_offset=4), FunctionDef('__lt__', arguments([Name('self', Param(), lineno=491, col_offset=15), Name('other', Param(), lineno=491, col_offset=21)], None, None, []), [If(UnaryOp(Not(), Call(Name('hasattr', Load(), lineno=492, col_offset=15), [Name('other', Load(), lineno=492, col_offset=23), Str('handler_order', lineno=492, col_offset=30)], [], None, None, lineno=492, col_offset=15), lineno=492, col_offset=11), [Return(Name('True', Load(), lineno=496, col_offset=19), lineno=496, col_offset=12)], [], lineno=492, col_offset=8), Return(Compare(Attribute(Name('self', Load(), lineno=497, col_offset=15), 'handler_order', Load(), lineno=497, col_offset=15), [Lt()], [Attribute(Name('other', Load(), lineno=497, col_offset=36), 'handler_order', Load(), lineno=497, col_offset=36)], lineno=497, col_offset=15), lineno=497, col_offset=8)], [], lineno=491, col_offset=4)], [], lineno=481, col_offset=0), ClassDef('HTTPErrorProcessor', [Name('BaseHandler', Load(), lineno=500, col_offset=25)], [Expr(Str('Process HTTP error responses.', lineno=501, col_offset=4), lineno=501, col_offset=4), Assign([Name('handler_order', Store(), lineno=502, col_offset=4)], Num(1000, lineno=502, col_offset=20), lineno=502, col_offset=4), FunctionDef('http_response', arguments([Name('self', Param(), lineno=504, col_offset=22), Name('request', Param(), lineno=504, col_offset=28), Name('response', Param(), lineno=504, col_offset=37)], None, None, []), [Assign([Tuple([Name('code', Store(), lineno=505, col_offset=8), Name('msg', Store(), lineno=505, col_offset=14), Name('hdrs', Store(), lineno=505, col_offset=19)], Store(), lineno=505, col_offset=8)], Tuple([Attribute(Name('response', Load(), lineno=505, col_offset=26), 'code', Load(), lineno=505, col_offset=26), Attribute(Name('response', Load(), lineno=505, col_offset=41), 'msg', Load(), lineno=505, col_offset=41), Call(Attribute(Name('response', Load(), lineno=505, col_offset=55), 'info', Load(), lineno=505, col_offset=55), [], [], None, None, lineno=505, col_offset=55)], Load(), lineno=505, col_offset=26), lineno=505, col_offset=8), If(UnaryOp(Not(), Compare(Num(200, lineno=509, col_offset=16), [LtE(), Lt()], [Name('code', Load(), lineno=509, col_offset=23), Num(300, lineno=509, col_offset=30)], lineno=509, col_offset=16), lineno=509, col_offset=11), [Assign([Name('response', Store(), lineno=510, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=510, col_offset=23), 'parent', Load(), lineno=510, col_offset=23), 'error', Load(), lineno=510, col_offset=23), [Str('http', lineno=511, col_offset=16), Name('request', Load(), lineno=511, col_offset=24), Name('response', Load(), lineno=511, col_offset=33), Name('code', Load(), lineno=511, col_offset=43), Name('msg', Load(), lineno=511, col_offset=49), Name('hdrs', Load(), lineno=511, col_offset=54)], [], None, None, lineno=510, col_offset=23), lineno=510, col_offset=12)], [], lineno=509, col_offset=8), Return(Name('response', Load(), lineno=513, col_offset=15), lineno=513, col_offset=8)], [], lineno=504, col_offset=4), Assign([Name('https_response', Store(), lineno=515, col_offset=4)], Name('http_response', Load(), lineno=515, col_offset=21), lineno=515, col_offset=4)], [], lineno=500, col_offset=0), ClassDef('HTTPDefaultErrorHandler', [Name('BaseHandler', Load(), lineno=517, col_offset=30)], [FunctionDef('http_error_default', arguments([Name('self', Param(), lineno=518, col_offset=27), Name('req', Param(), lineno=518, col_offset=33), Name('fp', Param(), lineno=518, col_offset=38), Name('code', Param(), lineno=518, col_offset=42), Name('msg', Param(), lineno=518, col_offset=48), Name('hdrs', Param(), lineno=518, col_offset=53)], None, None, []), [Raise(Call(Name('HTTPError', Load(), lineno=519, col_offset=14), [Call(Attribute(Name('req', Load(), lineno=519, col_offset=24), 'get_full_url', Load(), lineno=519, col_offset=24), [], [], None, None, lineno=519, col_offset=24), Name('code', Load(), lineno=519, col_offset=44), Name('msg', Load(), lineno=519, col_offset=50), Name('hdrs', Load(), lineno=519, col_offset=55), Name('fp', Load(), lineno=519, col_offset=61)], [], None, None, lineno=519, col_offset=14), None, None, lineno=519, col_offset=8)], [], lineno=518, col_offset=4)], [], lineno=517, col_offset=0), ClassDef('HTTPRedirectHandler', [Name('BaseHandler', Load(), lineno=521, col_offset=26)], [Assign([Name('max_repeats', Store(), lineno=524, col_offset=4)], Num(4, lineno=524, col_offset=18), lineno=524, col_offset=4), Assign([Name('max_redirections', Store(), lineno=527, col_offset=4)], Num(10, lineno=527, col_offset=23), lineno=527, col_offset=4), FunctionDef('redirect_request', arguments([Name('self', Param(), lineno=529, col_offset=25), Name('req', Param(), lineno=529, col_offset=31), Name('fp', Param(), lineno=529, col_offset=36), Name('code', Param(), lineno=529, col_offset=40), Name('msg', Param(), lineno=529, col_offset=46), Name('headers', Param(), lineno=529, col_offset=51), Name('newurl', Param(), lineno=529, col_offset=60)], None, None, []), [Expr(Str("Return a Request or None in response to a redirect.\n\n        This is called by the http_error_30x methods when a\n        redirection response is received.  If a redirection should\n        take place, return a new Request to allow http_error_30x to\n        perform the redirect.  Otherwise, raise HTTPError if no-one\n        else should try to handle this url.  Return None if you can't\n        but another Handler might.\n        ", lineno=538, col_offset=-1), lineno=538, col_offset=-1), Assign([Name('m', Store(), lineno=539, col_offset=8)], Call(Attribute(Name('req', Load(), lineno=539, col_offset=12), 'get_method', Load(), lineno=539, col_offset=12), [], [], None, None, lineno=539, col_offset=12), lineno=539, col_offset=8), If(BoolOp(Or(), [BoolOp(And(), [Compare(Name('code', Load(), lineno=540, col_offset=12), [In()], [Tuple([Num(301, lineno=540, col_offset=21), Num(302, lineno=540, col_offset=26), Num(303, lineno=540, col_offset=31), Num(307, lineno=540, col_offset=36)], Load(), lineno=540, col_offset=21)], lineno=540, col_offset=12), Compare(Name('m', Load(), lineno=540, col_offset=45), [In()], [Tuple([Str('GET', lineno=540, col_offset=51), Str('HEAD', lineno=540, col_offset=58)], Load(), lineno=540, col_offset=51)], lineno=540, col_offset=45)], lineno=540, col_offset=12), BoolOp(And(), [Compare(Name('code', Load(), lineno=541, col_offset=15), [In()], [Tuple([Num(301, lineno=541, col_offset=24), Num(302, lineno=541, col_offset=29), Num(303, lineno=541, col_offset=34)], Load(), lineno=541, col_offset=24)], lineno=541, col_offset=15), Compare(Name('m', Load(), lineno=541, col_offset=43), [Eq()], [Str('POST', lineno=541, col_offset=48)], lineno=541, col_offset=43)], lineno=541, col_offset=15)], lineno=540, col_offset=12), [Assign([Name('newurl', Store(), lineno=548, col_offset=12)], Call(Attribute(Name('newurl', Load(), lineno=548, col_offset=21), 'replace', Load(), lineno=548, col_offset=21), [Str(' ', lineno=548, col_offset=36), Str('%20', lineno=548, col_offset=41)], [], None, None, lineno=548, col_offset=21), lineno=548, col_offset=12), Assign([Name('newheaders', Store(), lineno=549, col_offset=12)], Call(Name('dict', Load(), lineno=549, col_offset=25), [GeneratorExp(Tuple([Name('k', Load(), lineno=549, col_offset=31), Name('v', Load(), lineno=549, col_offset=33)], Load(), lineno=549, col_offset=31), [comprehension(Tuple([Name('k', Store(), lineno=549, col_offset=40), Name('v', Store(), lineno=549, col_offset=42)], Store(), lineno=549, col_offset=40), Call(Attribute(Attribute(Name('req', Load(), lineno=549, col_offset=47), 'headers', Load(), lineno=549, col_offset=47), 'items', Load(), lineno=549, col_offset=47), [], [], None, None, lineno=549, col_offset=47), [Compare(Call(Attribute(Name('k', Load(), lineno=550, col_offset=33), 'lower', Load(), lineno=550, col_offset=33), [], [], None, None, lineno=550, col_offset=33), [NotIn()], [Tuple([Str('content-length', lineno=550, col_offset=51), Str('content-type', lineno=550, col_offset=69)], Load(), lineno=550, col_offset=51)], lineno=550, col_offset=33)])], lineno=549, col_offset=30)], [], None, None, lineno=549, col_offset=25), lineno=549, col_offset=12), Return(Call(Name('Request', Load(), lineno=552, col_offset=19), [Name('newurl', Load(), lineno=552, col_offset=27)], [keyword('headers', Name('newheaders', Load(), lineno=553, col_offset=35)), keyword('origin_req_host', Call(Attribute(Name('req', Load(), lineno=554, col_offset=43), 'get_origin_req_host', Load(), lineno=554, col_offset=43), [], [], None, None, lineno=554, col_offset=43)), keyword('unverifiable', Name('True', Load(), lineno=555, col_offset=40))], None, None, lineno=552, col_offset=19), lineno=552, col_offset=12)], [Raise(Call(Name('HTTPError', Load(), lineno=557, col_offset=18), [Call(Attribute(Name('req', Load(), lineno=557, col_offset=28), 'get_full_url', Load(), lineno=557, col_offset=28), [], [], None, None, lineno=557, col_offset=28), Name('code', Load(), lineno=557, col_offset=48), Name('msg', Load(), lineno=557, col_offset=54), Name('headers', Load(), lineno=557, col_offset=59), Name('fp', Load(), lineno=557, col_offset=68)], [], None, None, lineno=557, col_offset=18), None, None, lineno=557, col_offset=12)], lineno=540, col_offset=8)], [], lineno=529, col_offset=4), FunctionDef('http_error_302', arguments([Name('self', Param(), lineno=563, col_offset=23), Name('req', Param(), lineno=563, col_offset=29), Name('fp', Param(), lineno=563, col_offset=34), Name('code', Param(), lineno=563, col_offset=38), Name('msg', Param(), lineno=563, col_offset=44), Name('headers', Param(), lineno=563, col_offset=49)], None, None, []), [If(Compare(Str('location', lineno=566, col_offset=11), [In()], [Name('headers', Load(), lineno=566, col_offset=25)], lineno=566, col_offset=11), [Assign([Name('newurl', Store(), lineno=567, col_offset=12)], Subscript(Call(Attribute(Name('headers', Load(), lineno=567, col_offset=21), 'getheaders', Load(), lineno=567, col_offset=21), [Str('location', lineno=567, col_offset=40)], [], None, None, lineno=567, col_offset=21), Index(Num(0, lineno=567, col_offset=52)), Load(), lineno=567, col_offset=21), lineno=567, col_offset=12)], [If(Compare(Str('uri', lineno=568, col_offset=13), [In()], [Name('headers', Load(), lineno=568, col_offset=22)], lineno=568, col_offset=13), [Assign([Name('newurl', Store(), lineno=569, col_offset=12)], Subscript(Call(Attribute(Name('headers', Load(), lineno=569, col_offset=21), 'getheaders', Load(), lineno=569, col_offset=21), [Str('uri', lineno=569, col_offset=40)], [], None, None, lineno=569, col_offset=21), Index(Num(0, lineno=569, col_offset=47)), Load(), lineno=569, col_offset=21), lineno=569, col_offset=12)], [Return(None, lineno=571, col_offset=12)], lineno=568, col_offset=13)], lineno=566, col_offset=8), Assign([Name('urlparts', Store(), lineno=574, col_offset=8)], Call(Attribute(Name('urlparse', Load(), lineno=574, col_offset=19), 'urlparse', Load(), lineno=574, col_offset=19), [Name('newurl', Load(), lineno=574, col_offset=37)], [], None, None, lineno=574, col_offset=19), lineno=574, col_offset=8), If(UnaryOp(Not(), Attribute(Name('urlparts', Load(), lineno=575, col_offset=15), 'path', Load(), lineno=575, col_offset=15), lineno=575, col_offset=11), [Assign([Name('urlparts', Store(), lineno=576, col_offset=12)], Call(Name('list', Load(), lineno=576, col_offset=23), [Name('urlparts', Load(), lineno=576, col_offset=28)], [], None, None, lineno=576, col_offset=23), lineno=576, col_offset=12), Assign([Subscript(Name('urlparts', Load(), lineno=577, col_offset=12), Index(Num(2, lineno=577, col_offset=21)), Store(), lineno=577, col_offset=12)], Str('/', lineno=577, col_offset=26), lineno=577, col_offset=12)], [], lineno=575, col_offset=8), Assign([Name('newurl', Store(), lineno=578, col_offset=8)], Call(Attribute(Name('urlparse', Load(), lineno=578, col_offset=17), 'urlunparse', Load(), lineno=578, col_offset=17), [Name('urlparts', Load(), lineno=578, col_offset=37)], [], None, None, lineno=578, col_offset=17), lineno=578, col_offset=8), Assign([Name('newurl', Store(), lineno=580, col_offset=8)], Call(Attribute(Name('urlparse', Load(), lineno=580, col_offset=17), 'urljoin', Load(), lineno=580, col_offset=17), [Call(Attribute(Name('req', Load(), lineno=580, col_offset=34), 'get_full_url', Load(), lineno=580, col_offset=34), [], [], None, None, lineno=580, col_offset=34), Name('newurl', Load(), lineno=580, col_offset=54)], [], None, None, lineno=580, col_offset=17), lineno=580, col_offset=8), Assign([Name('new', Store(), lineno=585, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=585, col_offset=14), 'redirect_request', Load(), lineno=585, col_offset=14), [Name('req', Load(), lineno=585, col_offset=36), Name('fp', Load(), lineno=585, col_offset=41), Name('code', Load(), lineno=585, col_offset=45), Name('msg', Load(), lineno=585, col_offset=51), Name('headers', Load(), lineno=585, col_offset=56), Name('newurl', Load(), lineno=585, col_offset=65)], [], None, None, lineno=585, col_offset=14), lineno=585, col_offset=8), If(Compare(Name('new', Load(), lineno=586, col_offset=11), [Is()], [Name('None', Load(), lineno=586, col_offset=18)], lineno=586, col_offset=11), [Return(None, lineno=587, col_offset=12)], [], lineno=586, col_offset=8), If(Call(Name('hasattr', Load(), lineno=591, col_offset=11), [Name('req', Load(), lineno=591, col_offset=19), Str('redirect_dict', lineno=591, col_offset=24)], [], None, None, lineno=591, col_offset=11), [Assign([Name('visited', Store(), lineno=592, col_offset=12), Attribute(Name('new', Load(), lineno=592, col_offset=22), 'redirect_dict', Store(), lineno=592, col_offset=22)], Attribute(Name('req', Load(), lineno=592, col_offset=42), 'redirect_dict', Load(), lineno=592, col_offset=42), lineno=592, col_offset=12), If(BoolOp(Or(), [Compare(Call(Attribute(Name('visited', Load(), lineno=593, col_offset=16), 'get', Load(), lineno=593, col_offset=16), [Name('newurl', Load(), lineno=593, col_offset=28), Num(0, lineno=593, col_offset=36)], [], None, None, lineno=593, col_offset=16), [GtE()], [Attribute(Name('self', Load(), lineno=593, col_offset=42), 'max_repeats', Load(), lineno=593, col_offset=42)], lineno=593, col_offset=16), Compare(Call(Name('len', Load(), lineno=594, col_offset=16), [Name('visited', Load(), lineno=594, col_offset=20)], [], None, None, lineno=594, col_offset=16), [GtE()], [Attribute(Name('self', Load(), lineno=594, col_offset=32), 'max_redirections', Load(), lineno=594, col_offset=32)], lineno=594, col_offset=16)], lineno=593, col_offset=16), [Raise(Call(Name('HTTPError', Load(), lineno=595, col_offset=22), [Call(Attribute(Name('req', Load(), lineno=595, col_offset=32), 'get_full_url', Load(), lineno=595, col_offset=32), [], [], None, None, lineno=595, col_offset=32), Name('code', Load(), lineno=595, col_offset=52), BinOp(Attribute(Name('self', Load(), lineno=596, col_offset=32), 'inf_msg', Load(), lineno=596, col_offset=32), Add(), Name('msg', Load(), lineno=596, col_offset=47), lineno=596, col_offset=32), Name('headers', Load(), lineno=596, col_offset=52), Name('fp', Load(), lineno=596, col_offset=61)], [], None, None, lineno=595, col_offset=22), None, None, lineno=595, col_offset=16)], [], lineno=593, col_offset=12)], [Assign([Name('visited', Store(), lineno=598, col_offset=12), Attribute(Name('new', Load(), lineno=598, col_offset=22), 'redirect_dict', Store(), lineno=598, col_offset=22), Attribute(Name('req', Load(), lineno=598, col_offset=42), 'redirect_dict', Store(), lineno=598, col_offset=42)], Dict([], [], lineno=598, col_offset=62), lineno=598, col_offset=12)], lineno=591, col_offset=8), Assign([Subscript(Name('visited', Load(), lineno=599, col_offset=8), Index(Name('newurl', Load(), lineno=599, col_offset=16)), Store(), lineno=599, col_offset=8)], BinOp(Call(Attribute(Name('visited', Load(), lineno=599, col_offset=26), 'get', Load(), lineno=599, col_offset=26), [Name('newurl', Load(), lineno=599, col_offset=38), Num(0, lineno=599, col_offset=46)], [], None, None, lineno=599, col_offset=26), Add(), Num(1, lineno=599, col_offset=51), lineno=599, col_offset=26), lineno=599, col_offset=8), Expr(Call(Attribute(Name('fp', Load(), lineno=603, col_offset=8), 'read', Load(), lineno=603, col_offset=8), [], [], None, None, lineno=603, col_offset=8), lineno=603, col_offset=8), Expr(Call(Attribute(Name('fp', Load(), lineno=604, col_offset=8), 'close', Load(), lineno=604, col_offset=8), [], [], None, None, lineno=604, col_offset=8), lineno=604, col_offset=8), Return(Call(Attribute(Attribute(Name('self', Load(), lineno=606, col_offset=15), 'parent', Load(), lineno=606, col_offset=15), 'open', Load(), lineno=606, col_offset=15), [Name('new', Load(), lineno=606, col_offset=32)], [keyword('timeout', Attribute(Name('req', Load(), lineno=606, col_offset=45), 'timeout', Load(), lineno=606, col_offset=45))], None, None, lineno=606, col_offset=15), lineno=606, col_offset=8)], [], lineno=563, col_offset=4), Assign([Name('http_error_301', Store(), lineno=608, col_offset=4), Name('http_error_303', Store(), lineno=608, col_offset=21), Name('http_error_307', Store(), lineno=608, col_offset=38)], Name('http_error_302', Load(), lineno=608, col_offset=55), lineno=608, col_offset=4), Assign([Name('inf_msg', Store(), lineno=610, col_offset=4)], Str('The HTTP server returned a redirect error that would lead to an infinite loop.\nThe last 30x error message was:\n', lineno=610, col_offset=14), lineno=610, col_offset=4)], [], lineno=521, col_offset=0), FunctionDef('_parse_proxy', arguments([Name('proxy', Param(), lineno=615, col_offset=17)], None, None, []), [Expr(Str("Return (scheme, user, password, host/port) given a URL or an authority.\n\n    If a URL is supplied, it must have an authority (host:port) component.\n    According to RFC 3986, having an authority component means the URL must\n    have two slashes after the scheme:\n\n    >>> _parse_proxy('file:/ftp.example.com/')\n    Traceback (most recent call last):\n    ValueError: proxy URL with no authority: 'file:/ftp.example.com/'\n\n    The first three items of the returned tuple may be None.\n\n    Examples of authority parsing:\n\n    >>> _parse_proxy('proxy.example.com')\n    (None, None, None, 'proxy.example.com')\n    >>> _parse_proxy('proxy.example.com:3128')\n    (None, None, None, 'proxy.example.com:3128')\n\n    The authority component may optionally include userinfo (assumed to be\n    username:password):\n\n    >>> _parse_proxy('joe:password@proxy.example.com')\n    (None, 'joe', 'password', 'proxy.example.com')\n    >>> _parse_proxy('joe:password@proxy.example.com:3128')\n    (None, 'joe', 'password', 'proxy.example.com:3128')\n\n    Same examples, but with URLs instead:\n\n    >>> _parse_proxy('http://proxy.example.com/')\n    ('http', None, None, 'proxy.example.com')\n    >>> _parse_proxy('http://proxy.example.com:3128/')\n    ('http', None, None, 'proxy.example.com:3128')\n    >>> _parse_proxy('http://joe:password@proxy.example.com/')\n    ('http', 'joe', 'password', 'proxy.example.com')\n    >>> _parse_proxy('http://joe:password@proxy.example.com:3128')\n    ('http', 'joe', 'password', 'proxy.example.com:3128')\n\n    Everything after the authority is ignored:\n\n    >>> _parse_proxy('ftp://joe:password@proxy.example.com/rubbish:3128')\n    ('ftp', 'joe', 'password', 'proxy.example.com')\n\n    Test for no trailing '/' case:\n\n    >>> _parse_proxy('http://joe:password@proxy.example.com')\n    ('http', 'joe', 'password', 'proxy.example.com')\n\n    ", lineno=664, col_offset=-1), lineno=664, col_offset=-1), Assign([Tuple([Name('scheme', Store(), lineno=665, col_offset=4), Name('r_scheme', Store(), lineno=665, col_offset=12)], Store(), lineno=665, col_offset=4)], Call(Name('splittype', Load(), lineno=665, col_offset=23), [Name('proxy', Load(), lineno=665, col_offset=33)], [], None, None, lineno=665, col_offset=23), lineno=665, col_offset=4), If(UnaryOp(Not(), Call(Attribute(Name('r_scheme', Load(), lineno=666, col_offset=11), 'startswith', Load(), lineno=666, col_offset=11), [Str('/', lineno=666, col_offset=31)], [], None, None, lineno=666, col_offset=11), lineno=666, col_offset=7), [Assign([Name('scheme', Store(), lineno=668, col_offset=8)], Name('None', Load(), lineno=668, col_offset=17), lineno=668, col_offset=8), Assign([Name('authority', Store(), lineno=669, col_offset=8)], Name('proxy', Load(), lineno=669, col_offset=20), lineno=669, col_offset=8)], [If(UnaryOp(Not(), Call(Attribute(Name('r_scheme', Load(), lineno=672, col_offset=15), 'startswith', Load(), lineno=672, col_offset=15), [Str('//', lineno=672, col_offset=35)], [], None, None, lineno=672, col_offset=15), lineno=672, col_offset=11), [Raise(Call(Name('ValueError', Load(), lineno=673, col_offset=18), [BinOp(Str('proxy URL with no authority: %r', lineno=673, col_offset=29), Mod(), Name('proxy', Load(), lineno=673, col_offset=65), lineno=673, col_offset=29)], [], None, None, lineno=673, col_offset=18), None, None, lineno=673, col_offset=12)], [], lineno=672, col_offset=8), Assign([Name('end', Store(), lineno=676, col_offset=8)], Call(Attribute(Name('r_scheme', Load(), lineno=676, col_offset=14), 'find', Load(), lineno=676, col_offset=14), [Str('/', lineno=676, col_offset=28), Num(2, lineno=676, col_offset=33)], [], None, None, lineno=676, col_offset=14), lineno=676, col_offset=8), If(Compare(Name('end', Load(), lineno=677, col_offset=11), [Eq()], [Num(-1, lineno=677, col_offset=19)], lineno=677, col_offset=11), [Assign([Name('end', Store(), lineno=678, col_offset=12)], Name('None', Load(), lineno=678, col_offset=18), lineno=678, col_offset=12)], [], lineno=677, col_offset=8), Assign([Name('authority', Store(), lineno=679, col_offset=8)], Subscript(Name('r_scheme', Load(), lineno=679, col_offset=20), Slice(Num(2, lineno=679, col_offset=29), Name('end', Load(), lineno=679, col_offset=31), None), Load(), lineno=679, col_offset=20), lineno=679, col_offset=8)], lineno=666, col_offset=4), Assign([Tuple([Name('userinfo', Store(), lineno=680, col_offset=4), Name('hostport', Store(), lineno=680, col_offset=14)], Store(), lineno=680, col_offset=4)], Call(Name('splituser', Load(), lineno=680, col_offset=25), [Name('authority', Load(), lineno=680, col_offset=35)], [], None, None, lineno=680, col_offset=25), lineno=680, col_offset=4), If(Compare(Name('userinfo', Load(), lineno=681, col_offset=7), [IsNot()], [Name('None', Load(), lineno=681, col_offset=23)], lineno=681, col_offset=7), [Assign([Tuple([Name('user', Store(), lineno=682, col_offset=8), Name('password', Store(), lineno=682, col_offset=14)], Store(), lineno=682, col_offset=8)], Call(Name('splitpasswd', Load(), lineno=682, col_offset=25), [Name('userinfo', Load(), lineno=682, col_offset=37)], [], None, None, lineno=682, col_offset=25), lineno=682, col_offset=8)], [Assign([Name('user', Store(), lineno=684, col_offset=8), Name('password', Store(), lineno=684, col_offset=15)], Name('None', Load(), lineno=684, col_offset=26), lineno=684, col_offset=8)], lineno=681, col_offset=4), Return(Tuple([Name('scheme', Load(), lineno=685, col_offset=11), Name('user', Load(), lineno=685, col_offset=19), Name('password', Load(), lineno=685, col_offset=25), Name('hostport', Load(), lineno=685, col_offset=35)], Load(), lineno=685, col_offset=11), lineno=685, col_offset=4)], [], lineno=615, col_offset=0), ClassDef('ProxyHandler', [Name('BaseHandler', Load(), lineno=687, col_offset=19)], [Assign([Name('handler_order', Store(), lineno=689, col_offset=4)], Num(100, lineno=689, col_offset=20), lineno=689, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=691, col_offset=17), Name('proxies', Param(), lineno=691, col_offset=23)], None, None, [Name('None', Load(), lineno=691, col_offset=31)]), [If(Compare(Name('proxies', Load(), lineno=692, col_offset=11), [Is()], [Name('None', Load(), lineno=692, col_offset=22)], lineno=692, col_offset=11), [Assign([Name('proxies', Store(), lineno=693, col_offset=12)], Call(Name('getproxies', Load(), lineno=693, col_offset=22), [], [], None, None, lineno=693, col_offset=22), lineno=693, col_offset=12)], [], lineno=692, col_offset=8), Assert(Call(Name('hasattr', Load(), lineno=694, col_offset=15), [Name('proxies', Load(), lineno=694, col_offset=23), Str('has_key', lineno=694, col_offset=32)], [], None, None, lineno=694, col_offset=15), Str('proxies must be a mapping', lineno=694, col_offset=44), lineno=694, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=695, col_offset=8), 'proxies', Store(), lineno=695, col_offset=8)], Name('proxies', Load(), lineno=695, col_offset=23), lineno=695, col_offset=8), For(Tuple([Name('type', Store(), lineno=696, col_offset=12), Name('url', Store(), lineno=696, col_offset=18)], Store(), lineno=696, col_offset=12), Call(Attribute(Name('proxies', Load(), lineno=696, col_offset=25), 'items', Load(), lineno=696, col_offset=25), [], [], None, None, lineno=696, col_offset=25), [Expr(Call(Name('setattr', Load(), lineno=697, col_offset=12), [Name('self', Load(), lineno=697, col_offset=20), BinOp(Str('%s_open', lineno=697, col_offset=26), Mod(), Name('type', Load(), lineno=697, col_offset=38), lineno=697, col_offset=26), Lambda(arguments([Name('r', Param(), lineno=698, col_offset=27), Name('proxy', Param(), lineno=698, col_offset=30), Name('type', Param(), lineno=698, col_offset=41), Name('meth', Param(), lineno=698, col_offset=52)], None, None, [Name('url', Load(), lineno=698, col_offset=36), Name('type', Load(), lineno=698, col_offset=46), Attribute(Name('self', Load(), lineno=698, col_offset=57), 'proxy_open', Load(), lineno=698, col_offset=57)]), Call(Name('meth', Load(), lineno=699, col_offset=20), [Name('r', Load(), lineno=699, col_offset=25), Name('proxy', Load(), lineno=699, col_offset=28), Name('type', Load(), lineno=699, col_offset=35)], [], None, None, lineno=699, col_offset=20), lineno=698, col_offset=20)], [], None, None, lineno=697, col_offset=12), lineno=697, col_offset=12)], [], lineno=696, col_offset=8)], [], lineno=691, col_offset=4), FunctionDef('proxy_open', arguments([Name('self', Param(), lineno=701, col_offset=19), Name('req', Param(), lineno=701, col_offset=25), Name('proxy', Param(), lineno=701, col_offset=30), Name('type', Param(), lineno=701, col_offset=37)], None, None, []), [Assign([Name('orig_type', Store(), lineno=702, col_offset=8)], Call(Attribute(Name('req', Load(), lineno=702, col_offset=20), 'get_type', Load(), lineno=702, col_offset=20), [], [], None, None, lineno=702, col_offset=20), lineno=702, col_offset=8), Assign([Tuple([Name('proxy_type', Store(), lineno=703, col_offset=8), Name('user', Store(), lineno=703, col_offset=20), Name('password', Store(), lineno=703, col_offset=26), Name('hostport', Store(), lineno=703, col_offset=36)], Store(), lineno=703, col_offset=8)], Call(Name('_parse_proxy', Load(), lineno=703, col_offset=47), [Name('proxy', Load(), lineno=703, col_offset=60)], [], None, None, lineno=703, col_offset=47), lineno=703, col_offset=8), If(Compare(Name('proxy_type', Load(), lineno=705, col_offset=11), [Is()], [Name('None', Load(), lineno=705, col_offset=25)], lineno=705, col_offset=11), [Assign([Name('proxy_type', Store(), lineno=706, col_offset=12)], Name('orig_type', Load(), lineno=706, col_offset=25), lineno=706, col_offset=12)], [], lineno=705, col_offset=8), If(BoolOp(And(), [Attribute(Name('req', Load(), lineno=708, col_offset=11), 'host', Load(), lineno=708, col_offset=11), Call(Name('proxy_bypass', Load(), lineno=708, col_offset=24), [Attribute(Name('req', Load(), lineno=708, col_offset=37), 'host', Load(), lineno=708, col_offset=37)], [], None, None, lineno=708, col_offset=24)], lineno=708, col_offset=11), [Return(Name('None', Load(), lineno=709, col_offset=19), lineno=709, col_offset=12)], [], lineno=708, col_offset=8), If(BoolOp(And(), [Name('user', Load(), lineno=711, col_offset=11), Name('password', Load(), lineno=711, col_offset=20)], lineno=711, col_offset=11), [Assign([Name('user_pass', Store(), lineno=712, col_offset=12)], BinOp(Str('%s:%s', lineno=712, col_offset=24), Mod(), Tuple([Call(Name('unquote', Load(), lineno=712, col_offset=35), [Name('user', Load(), lineno=712, col_offset=43)], [], None, None, lineno=712, col_offset=35), Call(Name('unquote', Load(), lineno=712, col_offset=50), [Name('password', Load(), lineno=712, col_offset=58)], [], None, None, lineno=712, col_offset=50)], Load(), lineno=712, col_offset=35), lineno=712, col_offset=24), lineno=712, col_offset=12), Assign([Name('creds', Store(), lineno=713, col_offset=12)], Call(Attribute(Call(Attribute(Name('base64', Load(), lineno=713, col_offset=20), 'b64encode', Load(), lineno=713, col_offset=20), [Name('user_pass', Load(), lineno=713, col_offset=37)], [], None, None, lineno=713, col_offset=20), 'strip', Load(), lineno=713, col_offset=20), [], [], None, None, lineno=713, col_offset=20), lineno=713, col_offset=12), Expr(Call(Attribute(Name('req', Load(), lineno=714, col_offset=12), 'add_header', Load(), lineno=714, col_offset=12), [Str('Proxy-authorization', lineno=714, col_offset=27), BinOp(Str('Basic ', lineno=714, col_offset=50), Add(), Name('creds', Load(), lineno=714, col_offset=61), lineno=714, col_offset=50)], [], None, None, lineno=714, col_offset=12), lineno=714, col_offset=12)], [], lineno=711, col_offset=8), Assign([Name('hostport', Store(), lineno=715, col_offset=8)], Call(Name('unquote', Load(), lineno=715, col_offset=19), [Name('hostport', Load(), lineno=715, col_offset=27)], [], None, None, lineno=715, col_offset=19), lineno=715, col_offset=8), Expr(Call(Attribute(Name('req', Load(), lineno=716, col_offset=8), 'set_proxy', Load(), lineno=716, col_offset=8), [Name('hostport', Load(), lineno=716, col_offset=22), Name('proxy_type', Load(), lineno=716, col_offset=32)], [], None, None, lineno=716, col_offset=8), lineno=716, col_offset=8), If(BoolOp(Or(), [Compare(Name('orig_type', Load(), lineno=718, col_offset=11), [Eq()], [Name('proxy_type', Load(), lineno=718, col_offset=24)], lineno=718, col_offset=11), Compare(Name('orig_type', Load(), lineno=718, col_offset=38), [Eq()], [Str('https', lineno=718, col_offset=51)], lineno=718, col_offset=38)], lineno=718, col_offset=11), [Return(Name('None', Load(), lineno=720, col_offset=19), lineno=720, col_offset=12)], [Return(Call(Attribute(Attribute(Name('self', Load(), lineno=728, col_offset=19), 'parent', Load(), lineno=728, col_offset=19), 'open', Load(), lineno=728, col_offset=19), [Name('req', Load(), lineno=728, col_offset=36)], [keyword('timeout', Attribute(Name('req', Load(), lineno=728, col_offset=49), 'timeout', Load(), lineno=728, col_offset=49))], None, None, lineno=728, col_offset=19), lineno=728, col_offset=12)], lineno=718, col_offset=8)], [], lineno=701, col_offset=4)], [], lineno=687, col_offset=0), ClassDef('HTTPPasswordMgr', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=732, col_offset=17)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=733, col_offset=8), 'passwd', Store(), lineno=733, col_offset=8)], Dict([], [], lineno=733, col_offset=22), lineno=733, col_offset=8)], [], lineno=732, col_offset=4), FunctionDef('add_password', arguments([Name('self', Param(), lineno=735, col_offset=21), Name('realm', Param(), lineno=735, col_offset=27), Name('uri', Param(), lineno=735, col_offset=34), Name('user', Param(), lineno=735, col_offset=39), Name('passwd', Param(), lineno=735, col_offset=45)], None, None, []), [If(Call(Name('isinstance', Load(), lineno=737, col_offset=11), [Name('uri', Load(), lineno=737, col_offset=22), Name('basestring', Load(), lineno=737, col_offset=27)], [], None, None, lineno=737, col_offset=11), [Assign([Name('uri', Store(), lineno=738, col_offset=12)], List([Name('uri', Load(), lineno=738, col_offset=19)], Load(), lineno=738, col_offset=18), lineno=738, col_offset=12)], [], lineno=737, col_offset=8), If(UnaryOp(Not(), Compare(Name('realm', Load(), lineno=739, col_offset=15), [In()], [Attribute(Name('self', Load(), lineno=739, col_offset=24), 'passwd', Load(), lineno=739, col_offset=24)], lineno=739, col_offset=15), lineno=739, col_offset=11), [Assign([Subscript(Attribute(Name('self', Load(), lineno=740, col_offset=12), 'passwd', Load(), lineno=740, col_offset=12), Index(Name('realm', Load(), lineno=740, col_offset=24)), Store(), lineno=740, col_offset=12)], Dict([], [], lineno=740, col_offset=33), lineno=740, col_offset=12)], [], lineno=739, col_offset=8), For(Name('default_port', Store(), lineno=741, col_offset=12), Tuple([Name('True', Load(), lineno=741, col_offset=28), Name('False', Load(), lineno=741, col_offset=34)], Load(), lineno=741, col_offset=28), [Assign([Name('reduced_uri', Store(), lineno=742, col_offset=12)], Call(Name('tuple', Load(), lineno=742, col_offset=26), [ListComp(Call(Attribute(Name('self', Load(), lineno=743, col_offset=17), 'reduce_uri', Load(), lineno=743, col_offset=17), [Name('u', Load(), lineno=743, col_offset=33), Name('default_port', Load(), lineno=743, col_offset=36)], [], None, None, lineno=743, col_offset=17), [comprehension(Name('u', Store(), lineno=743, col_offset=54), Name('uri', Load(), lineno=743, col_offset=59), [])], lineno=743, col_offset=17)], [], None, None, lineno=742, col_offset=26), lineno=742, col_offset=12), Assign([Subscript(Subscript(Attribute(Name('self', Load(), lineno=744, col_offset=12), 'passwd', Load(), lineno=744, col_offset=12), Index(Name('realm', Load(), lineno=744, col_offset=24)), Load(), lineno=744, col_offset=12), Index(Name('reduced_uri', Load(), lineno=744, col_offset=31)), Store(), lineno=744, col_offset=12)], Tuple([Name('user', Load(), lineno=744, col_offset=47), Name('passwd', Load(), lineno=744, col_offset=53)], Load(), lineno=744, col_offset=47), lineno=744, col_offset=12)], [], lineno=741, col_offset=8)], [], lineno=735, col_offset=4), FunctionDef('find_user_password', arguments([Name('self', Param(), lineno=746, col_offset=27), Name('realm', Param(), lineno=746, col_offset=33), Name('authuri', Param(), lineno=746, col_offset=40)], None, None, []), [Assign([Name('domains', Store(), lineno=747, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=747, col_offset=18), 'passwd', Load(), lineno=747, col_offset=18), 'get', Load(), lineno=747, col_offset=18), [Name('realm', Load(), lineno=747, col_offset=34), Dict([], [], lineno=747, col_offset=41)], [], None, None, lineno=747, col_offset=18), lineno=747, col_offset=8), For(Name('default_port', Store(), lineno=748, col_offset=12), Tuple([Name('True', Load(), lineno=748, col_offset=28), Name('False', Load(), lineno=748, col_offset=34)], Load(), lineno=748, col_offset=28), [Assign([Name('reduced_authuri', Store(), lineno=749, col_offset=12)], Call(Attribute(Name('self', Load(), lineno=749, col_offset=30), 'reduce_uri', Load(), lineno=749, col_offset=30), [Name('authuri', Load(), lineno=749, col_offset=46), Name('default_port', Load(), lineno=749, col_offset=55)], [], None, None, lineno=749, col_offset=30), lineno=749, col_offset=12), For(Tuple([Name('uris', Store(), lineno=750, col_offset=16), Name('authinfo', Store(), lineno=750, col_offset=22)], Store(), lineno=750, col_offset=16), Call(Attribute(Name('domains', Load(), lineno=750, col_offset=34), 'iteritems', Load(), lineno=750, col_offset=34), [], [], None, None, lineno=750, col_offset=34), [For(Name('uri', Store(), lineno=751, col_offset=20), Name('uris', Load(), lineno=751, col_offset=27), [If(Call(Attribute(Name('self', Load(), lineno=752, col_offset=23), 'is_suburi', Load(), lineno=752, col_offset=23), [Name('uri', Load(), lineno=752, col_offset=38), Name('reduced_authuri', Load(), lineno=752, col_offset=43)], [], None, None, lineno=752, col_offset=23), [Return(Name('authinfo', Load(), lineno=753, col_offset=31), lineno=753, col_offset=24)], [], lineno=752, col_offset=20)], [], lineno=751, col_offset=16)], [], lineno=750, col_offset=12)], [], lineno=748, col_offset=8), Return(Tuple([Name('None', Load(), lineno=754, col_offset=15), Name('None', Load(), lineno=754, col_offset=21)], Load(), lineno=754, col_offset=15), lineno=754, col_offset=8)], [], lineno=746, col_offset=4), FunctionDef('reduce_uri', arguments([Name('self', Param(), lineno=756, col_offset=19), Name('uri', Param(), lineno=756, col_offset=25), Name('default_port', Param(), lineno=756, col_offset=30)], None, None, [Name('True', Load(), lineno=756, col_offset=43)]), [Expr(Str('Accept authority or URI and extract only the authority and path.', lineno=757, col_offset=8), lineno=757, col_offset=8), Assign([Name('parts', Store(), lineno=759, col_offset=8)], Call(Attribute(Name('urlparse', Load(), lineno=759, col_offset=16), 'urlsplit', Load(), lineno=759, col_offset=16), [Name('uri', Load(), lineno=759, col_offset=34)], [], None, None, lineno=759, col_offset=16), lineno=759, col_offset=8), If(Subscript(Name('parts', Load(), lineno=760, col_offset=11), Index(Num(1, lineno=760, col_offset=17)), Load(), lineno=760, col_offset=11), [Assign([Name('scheme', Store(), lineno=762, col_offset=12)], Subscript(Name('parts', Load(), lineno=762, col_offset=21), Index(Num(0, lineno=762, col_offset=27)), Load(), lineno=762, col_offset=21), lineno=762, col_offset=12), Assign([Name('authority', Store(), lineno=763, col_offset=12)], Subscript(Name('parts', Load(), lineno=763, col_offset=24), Index(Num(1, lineno=763, col_offset=30)), Load(), lineno=763, col_offset=24), lineno=763, col_offset=12), Assign([Name('path', Store(), lineno=764, col_offset=12)], BoolOp(Or(), [Subscript(Name('parts', Load(), lineno=764, col_offset=19), Index(Num(2, lineno=764, col_offset=25)), Load(), lineno=764, col_offset=19), Str('/', lineno=764, col_offset=31)], lineno=764, col_offset=19), lineno=764, col_offset=12)], [Assign([Name('scheme', Store(), lineno=767, col_offset=12)], Name('None', Load(), lineno=767, col_offset=21), lineno=767, col_offset=12), Assign([Name('authority', Store(), lineno=768, col_offset=12)], Name('uri', Load(), lineno=768, col_offset=24), lineno=768, col_offset=12), Assign([Name('path', Store(), lineno=769, col_offset=12)], Str('/', lineno=769, col_offset=19), lineno=769, col_offset=12)], lineno=760, col_offset=8), Assign([Tuple([Name('host', Store(), lineno=770, col_offset=8), Name('port', Store(), lineno=770, col_offset=14)], Store(), lineno=770, col_offset=8)], Call(Name('splitport', Load(), lineno=770, col_offset=21), [Name('authority', Load(), lineno=770, col_offset=31)], [], None, None, lineno=770, col_offset=21), lineno=770, col_offset=8), If(BoolOp(And(), [Name('default_port', Load(), lineno=771, col_offset=11), Compare(Name('port', Load(), lineno=771, col_offset=28), [Is()], [Name('None', Load(), lineno=771, col_offset=36)], lineno=771, col_offset=28), Compare(Name('scheme', Load(), lineno=771, col_offset=45), [IsNot()], [Name('None', Load(), lineno=771, col_offset=59)], lineno=771, col_offset=45)], lineno=771, col_offset=11), [Assign([Name('dport', Store(), lineno=772, col_offset=12)], Call(Attribute(Dict([Str('http', lineno=772, col_offset=21), Str('https', lineno=773, col_offset=21)], [Num(80, lineno=772, col_offset=29), Num(443, lineno=773, col_offset=30)], lineno=772, col_offset=20), 'get', Load(), lineno=772, col_offset=20), [Name('scheme', Load(), lineno=774, col_offset=27)], [], None, None, lineno=772, col_offset=20), lineno=772, col_offset=12), If(Compare(Name('dport', Load(), lineno=775, col_offset=15), [IsNot()], [Name('None', Load(), lineno=775, col_offset=28)], lineno=775, col_offset=15), [Assign([Name('authority', Store(), lineno=776, col_offset=16)], BinOp(Str('%s:%d', lineno=776, col_offset=28), Mod(), Tuple([Name('host', Load(), lineno=776, col_offset=39), Name('dport', Load(), lineno=776, col_offset=45)], Load(), lineno=776, col_offset=39), lineno=776, col_offset=28), lineno=776, col_offset=16)], [], lineno=775, col_offset=12)], [], lineno=771, col_offset=8), Return(Tuple([Name('authority', Load(), lineno=777, col_offset=15), Name('path', Load(), lineno=777, col_offset=26)], Load(), lineno=777, col_offset=15), lineno=777, col_offset=8)], [], lineno=756, col_offset=4), FunctionDef('is_suburi', arguments([Name('self', Param(), lineno=779, col_offset=18), Name('base', Param(), lineno=779, col_offset=24), Name('test', Param(), lineno=779, col_offset=30)], None, None, []), [Expr(Str('Check if test is below base in a URI tree\n\n        Both args must be URIs in reduced form.\n        ', lineno=783, col_offset=-1), lineno=783, col_offset=-1), If(Compare(Name('base', Load(), lineno=784, col_offset=11), [Eq()], [Name('test', Load(), lineno=784, col_offset=19)], lineno=784, col_offset=11), [Return(Name('True', Load(), lineno=785, col_offset=19), lineno=785, col_offset=12)], [], lineno=784, col_offset=8), If(Compare(Subscript(Name('base', Load(), lineno=786, col_offset=11), Index(Num(0, lineno=786, col_offset=16)), Load(), lineno=786, col_offset=11), [NotEq()], [Subscript(Name('test', Load(), lineno=786, col_offset=22), Index(Num(0, lineno=786, col_offset=27)), Load(), lineno=786, col_offset=22)], lineno=786, col_offset=11), [Return(Name('False', Load(), lineno=787, col_offset=19), lineno=787, col_offset=12)], [], lineno=786, col_offset=8), Assign([Name('common', Store(), lineno=788, col_offset=8)], Call(Attribute(Name('posixpath', Load(), lineno=788, col_offset=17), 'commonprefix', Load(), lineno=788, col_offset=17), [Tuple([Subscript(Name('base', Load(), lineno=788, col_offset=41), Index(Num(1, lineno=788, col_offset=46)), Load(), lineno=788, col_offset=41), Subscript(Name('test', Load(), lineno=788, col_offset=50), Index(Num(1, lineno=788, col_offset=55)), Load(), lineno=788, col_offset=50)], Load(), lineno=788, col_offset=41)], [], None, None, lineno=788, col_offset=17), lineno=788, col_offset=8), If(Compare(Call(Name('len', Load(), lineno=789, col_offset=11), [Name('common', Load(), lineno=789, col_offset=15)], [], None, None, lineno=789, col_offset=11), [Eq()], [Call(Name('len', Load(), lineno=789, col_offset=26), [Subscript(Name('base', Load(), lineno=789, col_offset=30), Index(Num(1, lineno=789, col_offset=35)), Load(), lineno=789, col_offset=30)], [], None, None, lineno=789, col_offset=26)], lineno=789, col_offset=11), [Return(Name('True', Load(), lineno=790, col_offset=19), lineno=790, col_offset=12)], [], lineno=789, col_offset=8), Return(Name('False', Load(), lineno=791, col_offset=15), lineno=791, col_offset=8)], [], lineno=779, col_offset=4)], [], lineno=730, col_offset=0), ClassDef('HTTPPasswordMgrWithDefaultRealm', [Name('HTTPPasswordMgr', Load(), lineno=794, col_offset=38)], [FunctionDef('find_user_password', arguments([Name('self', Param(), lineno=796, col_offset=27), Name('realm', Param(), lineno=796, col_offset=33), Name('authuri', Param(), lineno=796, col_offset=40)], None, None, []), [Assign([Tuple([Name('user', Store(), lineno=797, col_offset=8), Name('password', Store(), lineno=797, col_offset=14)], Store(), lineno=797, col_offset=8)], Call(Attribute(Name('HTTPPasswordMgr', Load(), lineno=797, col_offset=25), 'find_user_password', Load(), lineno=797, col_offset=25), [Name('self', Load(), lineno=797, col_offset=60), Name('realm', Load(), lineno=797, col_offset=66), Name('authuri', Load(), lineno=798, col_offset=60)], [], None, None, lineno=797, col_offset=25), lineno=797, col_offset=8), If(Compare(Name('user', Load(), lineno=799, col_offset=11), [IsNot()], [Name('None', Load(), lineno=799, col_offset=23)], lineno=799, col_offset=11), [Return(Tuple([Name('user', Load(), lineno=800, col_offset=19), Name('password', Load(), lineno=800, col_offset=25)], Load(), lineno=800, col_offset=19), lineno=800, col_offset=12)], [], lineno=799, col_offset=8), Return(Call(Attribute(Name('HTTPPasswordMgr', Load(), lineno=801, col_offset=15), 'find_user_password', Load(), lineno=801, col_offset=15), [Name('self', Load(), lineno=801, col_offset=50), Name('None', Load(), lineno=801, col_offset=56), Name('authuri', Load(), lineno=801, col_offset=62)], [], None, None, lineno=801, col_offset=15), lineno=801, col_offset=8)], [], lineno=796, col_offset=4)], [], lineno=794, col_offset=0), ClassDef('AbstractBasicAuthHandler', [], [Assign([Name('rx', Store(), lineno=811, col_offset=4)], Call(Attribute(Name('re', Load(), lineno=811, col_offset=9), 'compile', Load(), lineno=811, col_offset=9), [Str('(?:.*,)*[ \t]*([^ \t]+)[ \t]+realm=(["\'])(.*?)\\2', lineno=811, col_offset=20), Attribute(Name('re', Load(), lineno=812, col_offset=45), 'I', Load(), lineno=812, col_offset=45)], [], None, None, lineno=811, col_offset=9), lineno=811, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=818, col_offset=17), Name('password_mgr', Param(), lineno=818, col_offset=23)], None, None, [Name('None', Load(), lineno=818, col_offset=36)]), [If(Compare(Name('password_mgr', Load(), lineno=819, col_offset=11), [Is()], [Name('None', Load(), lineno=819, col_offset=27)], lineno=819, col_offset=11), [Assign([Name('password_mgr', Store(), lineno=820, col_offset=12)], Call(Name('HTTPPasswordMgr', Load(), lineno=820, col_offset=27), [], [], None, None, lineno=820, col_offset=27), lineno=820, col_offset=12)], [], lineno=819, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=821, col_offset=8), 'passwd', Store(), lineno=821, col_offset=8)], Name('password_mgr', Load(), lineno=821, col_offset=22), lineno=821, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=822, col_offset=8), 'add_password', Store(), lineno=822, col_offset=8)], Attribute(Attribute(Name('self', Load(), lineno=822, col_offset=28), 'passwd', Load(), lineno=822, col_offset=28), 'add_password', Load(), lineno=822, col_offset=28), lineno=822, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=823, col_offset=8), 'retried', Store(), lineno=823, col_offset=8)], Num(0, lineno=823, col_offset=23), lineno=823, col_offset=8)], [], lineno=818, col_offset=4), FunctionDef('reset_retry_count', arguments([Name('self', Param(), lineno=825, col_offset=26)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=826, col_offset=8), 'retried', Store(), lineno=826, col_offset=8)], Num(0, lineno=826, col_offset=23), lineno=826, col_offset=8)], [], lineno=825, col_offset=4), FunctionDef('http_error_auth_reqed', arguments([Name('self', Param(), lineno=828, col_offset=30), Name('authreq', Param(), lineno=828, col_offset=36), Name('host', Param(), lineno=828, col_offset=45), Name('req', Param(), lineno=828, col_offset=51), Name('headers', Param(), lineno=828, col_offset=56)], None, None, []), [Assign([Name('authreq', Store(), lineno=832, col_offset=8)], Call(Attribute(Name('headers', Load(), lineno=832, col_offset=18), 'get', Load(), lineno=832, col_offset=18), [Name('authreq', Load(), lineno=832, col_offset=30), Name('None', Load(), lineno=832, col_offset=39)], [], None, None, lineno=832, col_offset=18), lineno=832, col_offset=8), If(Compare(Attribute(Name('self', Load(), lineno=834, col_offset=11), 'retried', Load(), lineno=834, col_offset=11), [Gt()], [Num(5, lineno=834, col_offset=26)], lineno=834, col_offset=11), [Raise(Call(Name('HTTPError', Load(), lineno=836, col_offset=18), [Call(Attribute(Name('req', Load(), lineno=836, col_offset=28), 'get_full_url', Load(), lineno=836, col_offset=28), [], [], None, None, lineno=836, col_offset=28), Num(401, lineno=836, col_offset=48), Str('basic auth failed', lineno=836, col_offset=53), Name('headers', Load(), lineno=837, col_offset=28), Name('None', Load(), lineno=837, col_offset=37)], [], None, None, lineno=836, col_offset=18), None, None, lineno=836, col_offset=12)], [AugAssign(Attribute(Name('self', Load(), lineno=839, col_offset=12), 'retried', Store(), lineno=839, col_offset=12), Add(), Num(1, lineno=839, col_offset=28), lineno=839, col_offset=12)], lineno=834, col_offset=8), If(Name('authreq', Load(), lineno=841, col_offset=11), [Assign([Name('mo', Store(), lineno=842, col_offset=12)], Call(Attribute(Attribute(Name('AbstractBasicAuthHandler', Load(), lineno=842, col_offset=17), 'rx', Load(), lineno=842, col_offset=17), 'search', Load(), lineno=842, col_offset=17), [Name('authreq', Load(), lineno=842, col_offset=52)], [], None, None, lineno=842, col_offset=17), lineno=842, col_offset=12), If(Name('mo', Load(), lineno=843, col_offset=15), [Assign([Tuple([Name('scheme', Store(), lineno=844, col_offset=16), Name('quote', Store(), lineno=844, col_offset=24), Name('realm', Store(), lineno=844, col_offset=31)], Store(), lineno=844, col_offset=16)], Call(Attribute(Name('mo', Load(), lineno=844, col_offset=39), 'groups', Load(), lineno=844, col_offset=39), [], [], None, None, lineno=844, col_offset=39), lineno=844, col_offset=16), If(Compare(Call(Attribute(Name('scheme', Load(), lineno=845, col_offset=19), 'lower', Load(), lineno=845, col_offset=19), [], [], None, None, lineno=845, col_offset=19), [Eq()], [Str('basic', lineno=845, col_offset=37)], lineno=845, col_offset=19), [Assign([Name('response', Store(), lineno=846, col_offset=20)], Call(Attribute(Name('self', Load(), lineno=846, col_offset=31), 'retry_http_basic_auth', Load(), lineno=846, col_offset=31), [Name('host', Load(), lineno=846, col_offset=58), Name('req', Load(), lineno=846, col_offset=64), Name('realm', Load(), lineno=846, col_offset=69)], [], None, None, lineno=846, col_offset=31), lineno=846, col_offset=20), If(BoolOp(And(), [Name('response', Load(), lineno=847, col_offset=23), Compare(Attribute(Name('response', Load(), lineno=847, col_offset=36), 'code', Load(), lineno=847, col_offset=36), [NotEq()], [Num(401, lineno=847, col_offset=53)], lineno=847, col_offset=36)], lineno=847, col_offset=23), [Assign([Attribute(Name('self', Load(), lineno=848, col_offset=24), 'retried', Store(), lineno=848, col_offset=24)], Num(0, lineno=848, col_offset=39), lineno=848, col_offset=24)], [], lineno=847, col_offset=20), Return(Name('response', Load(), lineno=849, col_offset=27), lineno=849, col_offset=20)], [], lineno=845, col_offset=16)], [], lineno=843, col_offset=12)], [], lineno=841, col_offset=8)], [], lineno=828, col_offset=4), FunctionDef('retry_http_basic_auth', arguments([Name('self', Param(), lineno=851, col_offset=30), Name('host', Param(), lineno=851, col_offset=36), Name('req', Param(), lineno=851, col_offset=42), Name('realm', Param(), lineno=851, col_offset=47)], None, None, []), [Assign([Tuple([Name('user', Store(), lineno=852, col_offset=8), Name('pw', Store(), lineno=852, col_offset=14)], Store(), lineno=852, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=852, col_offset=19), 'passwd', Load(), lineno=852, col_offset=19), 'find_user_password', Load(), lineno=852, col_offset=19), [Name('realm', Load(), lineno=852, col_offset=50), Name('host', Load(), lineno=852, col_offset=57)], [], None, None, lineno=852, col_offset=19), lineno=852, col_offset=8), If(Compare(Name('pw', Load(), lineno=853, col_offset=11), [IsNot()], [Name('None', Load(), lineno=853, col_offset=21)], lineno=853, col_offset=11), [Assign([Name('raw', Store(), lineno=854, col_offset=12)], BinOp(Str('%s:%s', lineno=854, col_offset=18), Mod(), Tuple([Name('user', Load(), lineno=854, col_offset=29), Name('pw', Load(), lineno=854, col_offset=35)], Load(), lineno=854, col_offset=29), lineno=854, col_offset=18), lineno=854, col_offset=12), Assign([Name('auth', Store(), lineno=855, col_offset=12)], BinOp(Str('Basic %s', lineno=855, col_offset=19), Mod(), Call(Attribute(Call(Attribute(Name('base64', Load(), lineno=855, col_offset=32), 'b64encode', Load(), lineno=855, col_offset=32), [Name('raw', Load(), lineno=855, col_offset=49)], [], None, None, lineno=855, col_offset=32), 'strip', Load(), lineno=855, col_offset=32), [], [], None, None, lineno=855, col_offset=32), lineno=855, col_offset=19), lineno=855, col_offset=12), If(Compare(Call(Attribute(Attribute(Name('req', Load(), lineno=856, col_offset=15), 'headers', Load(), lineno=856, col_offset=15), 'get', Load(), lineno=856, col_offset=15), [Attribute(Name('self', Load(), lineno=856, col_offset=31), 'auth_header', Load(), lineno=856, col_offset=31), Name('None', Load(), lineno=856, col_offset=49)], [], None, None, lineno=856, col_offset=15), [Eq()], [Name('auth', Load(), lineno=856, col_offset=58)], lineno=856, col_offset=15), [Return(Name('None', Load(), lineno=857, col_offset=23), lineno=857, col_offset=16)], [], lineno=856, col_offset=12), Expr(Call(Attribute(Name('req', Load(), lineno=858, col_offset=12), 'add_unredirected_header', Load(), lineno=858, col_offset=12), [Attribute(Name('self', Load(), lineno=858, col_offset=40), 'auth_header', Load(), lineno=858, col_offset=40), Name('auth', Load(), lineno=858, col_offset=58)], [], None, None, lineno=858, col_offset=12), lineno=858, col_offset=12), Return(Call(Attribute(Attribute(Name('self', Load(), lineno=859, col_offset=19), 'parent', Load(), lineno=859, col_offset=19), 'open', Load(), lineno=859, col_offset=19), [Name('req', Load(), lineno=859, col_offset=36)], [keyword('timeout', Attribute(Name('req', Load(), lineno=859, col_offset=49), 'timeout', Load(), lineno=859, col_offset=49))], None, None, lineno=859, col_offset=19), lineno=859, col_offset=12)], [Return(Name('None', Load(), lineno=861, col_offset=19), lineno=861, col_offset=12)], lineno=853, col_offset=8)], [], lineno=851, col_offset=4)], [], lineno=804, col_offset=0), ClassDef('HTTPBasicAuthHandler', [Name('AbstractBasicAuthHandler', Load(), lineno=864, col_offset=27), Name('BaseHandler', Load(), lineno=864, col_offset=53)], [Assign([Name('auth_header', Store(), lineno=866, col_offset=4)], Str('Authorization', lineno=866, col_offset=18), lineno=866, col_offset=4), FunctionDef('http_error_401', arguments([Name('self', Param(), lineno=868, col_offset=23), Name('req', Param(), lineno=868, col_offset=29), Name('fp', Param(), lineno=868, col_offset=34), Name('code', Param(), lineno=868, col_offset=38), Name('msg', Param(), lineno=868, col_offset=44), Name('headers', Param(), lineno=868, col_offset=49)], None, None, []), [Assign([Name('url', Store(), lineno=869, col_offset=8)], Call(Attribute(Name('req', Load(), lineno=869, col_offset=14), 'get_full_url', Load(), lineno=869, col_offset=14), [], [], None, None, lineno=869, col_offset=14), lineno=869, col_offset=8), Assign([Name('response', Store(), lineno=870, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=870, col_offset=19), 'http_error_auth_reqed', Load(), lineno=870, col_offset=19), [Str('www-authenticate', lineno=870, col_offset=46), Name('url', Load(), lineno=871, col_offset=46), Name('req', Load(), lineno=871, col_offset=51), Name('headers', Load(), lineno=871, col_offset=56)], [], None, None, lineno=870, col_offset=19), lineno=870, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=872, col_offset=8), 'reset_retry_count', Load(), lineno=872, col_offset=8), [], [], None, None, lineno=872, col_offset=8), lineno=872, col_offset=8), Return(Name('response', Load(), lineno=873, col_offset=15), lineno=873, col_offset=8)], [], lineno=868, col_offset=4)], [], lineno=864, col_offset=0), ClassDef('ProxyBasicAuthHandler', [Name('AbstractBasicAuthHandler', Load(), lineno=876, col_offset=28), Name('BaseHandler', Load(), lineno=876, col_offset=54)], [Assign([Name('auth_header', Store(), lineno=878, col_offset=4)], Str('Proxy-authorization', lineno=878, col_offset=18), lineno=878, col_offset=4), FunctionDef('http_error_407', arguments([Name('self', Param(), lineno=880, col_offset=23), Name('req', Param(), lineno=880, col_offset=29), Name('fp', Param(), lineno=880, col_offset=34), Name('code', Param(), lineno=880, col_offset=38), Name('msg', Param(), lineno=880, col_offset=44), Name('headers', Param(), lineno=880, col_offset=49)], None, None, []), [Assign([Name('authority', Store(), lineno=885, col_offset=8)], Call(Attribute(Name('req', Load(), lineno=885, col_offset=20), 'get_host', Load(), lineno=885, col_offset=20), [], [], None, None, lineno=885, col_offset=20), lineno=885, col_offset=8), Assign([Name('response', Store(), lineno=886, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=886, col_offset=19), 'http_error_auth_reqed', Load(), lineno=886, col_offset=19), [Str('proxy-authenticate', lineno=886, col_offset=46), Name('authority', Load(), lineno=887, col_offset=42), Name('req', Load(), lineno=887, col_offset=53), Name('headers', Load(), lineno=887, col_offset=58)], [], None, None, lineno=886, col_offset=19), lineno=886, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=888, col_offset=8), 'reset_retry_count', Load(), lineno=888, col_offset=8), [], [], None, None, lineno=888, col_offset=8), lineno=888, col_offset=8), Return(Name('response', Load(), lineno=889, col_offset=15), lineno=889, col_offset=8)], [], lineno=880, col_offset=4)], [], lineno=876, col_offset=0), FunctionDef('randombytes', arguments([Name('n', Param(), lineno=892, col_offset=16)], None, None, []), [Expr(Str('Return n random bytes.', lineno=893, col_offset=4), lineno=893, col_offset=4), If(Call(Attribute(Attribute(Name('os', Load(), lineno=897, col_offset=7), 'path', Load(), lineno=897, col_offset=7), 'exists', Load(), lineno=897, col_offset=7), [Str('/dev/urandom', lineno=897, col_offset=22)], [], None, None, lineno=897, col_offset=7), [Assign([Name('f', Store(), lineno=898, col_offset=8)], Call(Name('open', Load(), lineno=898, col_offset=12), [Str('/dev/urandom', lineno=898, col_offset=17)], [], None, None, lineno=898, col_offset=12), lineno=898, col_offset=8), Assign([Name('s', Store(), lineno=899, col_offset=8)], Call(Attribute(Name('f', Load(), lineno=899, col_offset=12), 'read', Load(), lineno=899, col_offset=12), [Name('n', Load(), lineno=899, col_offset=19)], [], None, None, lineno=899, col_offset=12), lineno=899, col_offset=8), Expr(Call(Attribute(Name('f', Load(), lineno=900, col_offset=8), 'close', Load(), lineno=900, col_offset=8), [], [], None, None, lineno=900, col_offset=8), lineno=900, col_offset=8), Return(Name('s', Load(), lineno=901, col_offset=15), lineno=901, col_offset=8)], [Assign([Name('L', Store(), lineno=903, col_offset=8)], ListComp(Call(Name('chr', Load(), lineno=903, col_offset=13), [Call(Attribute(Name('random', Load(), lineno=903, col_offset=17), 'randrange', Load(), lineno=903, col_offset=17), [Num(0, lineno=903, col_offset=34), Num(256, lineno=903, col_offset=37)], [], None, None, lineno=903, col_offset=17)], [], None, None, lineno=903, col_offset=13), [comprehension(Name('i', Store(), lineno=903, col_offset=47), Call(Name('range', Load(), lineno=903, col_offset=52), [Name('n', Load(), lineno=903, col_offset=58)], [], None, None, lineno=903, col_offset=52), [])], lineno=903, col_offset=13), lineno=903, col_offset=8), Return(Call(Attribute(Str('', lineno=904, col_offset=15), 'join', Load(), lineno=904, col_offset=15), [Name('L', Load(), lineno=904, col_offset=23)], [], None, None, lineno=904, col_offset=15), lineno=904, col_offset=8)], lineno=897, col_offset=4)], [], lineno=892, col_offset=0), ClassDef('AbstractDigestAuthHandler', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=917, col_offset=17), Name('passwd', Param(), lineno=917, col_offset=23)], None, None, [Name('None', Load(), lineno=917, col_offset=30)]), [If(Compare(Name('passwd', Load(), lineno=918, col_offset=11), [Is()], [Name('None', Load(), lineno=918, col_offset=21)], lineno=918, col_offset=11), [Assign([Name('passwd', Store(), lineno=919, col_offset=12)], Call(Name('HTTPPasswordMgr', Load(), lineno=919, col_offset=21), [], [], None, None, lineno=919, col_offset=21), lineno=919, col_offset=12)], [], lineno=918, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=920, col_offset=8), 'passwd', Store(), lineno=920, col_offset=8)], Name('passwd', Load(), lineno=920, col_offset=22), lineno=920, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=921, col_offset=8), 'add_password', Store(), lineno=921, col_offset=8)], Attribute(Attribute(Name('self', Load(), lineno=921, col_offset=28), 'passwd', Load(), lineno=921, col_offset=28), 'add_password', Load(), lineno=921, col_offset=28), lineno=921, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=922, col_offset=8), 'retried', Store(), lineno=922, col_offset=8)], Num(0, lineno=922, col_offset=23), lineno=922, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=923, col_offset=8), 'nonce_count', Store(), lineno=923, col_offset=8)], Num(0, lineno=923, col_offset=27), lineno=923, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=924, col_offset=8), 'last_nonce', Store(), lineno=924, col_offset=8)], Name('None', Load(), lineno=924, col_offset=26), lineno=924, col_offset=8)], [], lineno=917, col_offset=4), FunctionDef('reset_retry_count', arguments([Name('self', Param(), lineno=926, col_offset=26)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=927, col_offset=8), 'retried', Store(), lineno=927, col_offset=8)], Num(0, lineno=927, col_offset=23), lineno=927, col_offset=8)], [], lineno=926, col_offset=4), FunctionDef('http_error_auth_reqed', arguments([Name('self', Param(), lineno=929, col_offset=30), Name('auth_header', Param(), lineno=929, col_offset=36), Name('host', Param(), lineno=929, col_offset=49), Name('req', Param(), lineno=929, col_offset=55), Name('headers', Param(), lineno=929, col_offset=60)], None, None, []), [Assign([Name('authreq', Store(), lineno=930, col_offset=8)], Call(Attribute(Name('headers', Load(), lineno=930, col_offset=18), 'get', Load(), lineno=930, col_offset=18), [Name('auth_header', Load(), lineno=930, col_offset=30), Name('None', Load(), lineno=930, col_offset=43)], [], None, None, lineno=930, col_offset=18), lineno=930, col_offset=8), If(Compare(Attribute(Name('self', Load(), lineno=931, col_offset=11), 'retried', Load(), lineno=931, col_offset=11), [Gt()], [Num(5, lineno=931, col_offset=26)], lineno=931, col_offset=11), [Raise(Call(Name('HTTPError', Load(), lineno=937, col_offset=18), [Call(Attribute(Name('req', Load(), lineno=937, col_offset=28), 'get_full_url', Load(), lineno=937, col_offset=28), [], [], None, None, lineno=937, col_offset=28), Num(401, lineno=937, col_offset=48), Str('digest auth failed', lineno=937, col_offset=53), Name('headers', Load(), lineno=938, col_offset=28), Name('None', Load(), lineno=938, col_offset=37)], [], None, None, lineno=937, col_offset=18), None, None, lineno=937, col_offset=12)], [AugAssign(Attribute(Name('self', Load(), lineno=940, col_offset=12), 'retried', Store(), lineno=940, col_offset=12), Add(), Num(1, lineno=940, col_offset=28), lineno=940, col_offset=12)], lineno=931, col_offset=8), If(Name('authreq', Load(), lineno=941, col_offset=11), [Assign([Name('scheme', Store(), lineno=942, col_offset=12)], Subscript(Call(Attribute(Name('authreq', Load(), lineno=942, col_offset=21), 'split', Load(), lineno=942, col_offset=21), [], [], None, None, lineno=942, col_offset=21), Index(Num(0, lineno=942, col_offset=37)), Load(), lineno=942, col_offset=21), lineno=942, col_offset=12), If(Compare(Call(Attribute(Name('scheme', Load(), lineno=943, col_offset=15), 'lower', Load(), lineno=943, col_offset=15), [], [], None, None, lineno=943, col_offset=15), [Eq()], [Str('digest', lineno=943, col_offset=33)], lineno=943, col_offset=15), [Return(Call(Attribute(Name('self', Load(), lineno=944, col_offset=23), 'retry_http_digest_auth', Load(), lineno=944, col_offset=23), [Name('req', Load(), lineno=944, col_offset=51), Name('authreq', Load(), lineno=944, col_offset=56)], [], None, None, lineno=944, col_offset=23), lineno=944, col_offset=16)], [], lineno=943, col_offset=12)], [], lineno=941, col_offset=8)], [], lineno=929, col_offset=4), FunctionDef('retry_http_digest_auth', arguments([Name('self', Param(), lineno=946, col_offset=31), Name('req', Param(), lineno=946, col_offset=37), Name('auth', Param(), lineno=946, col_offset=42)], None, None, []), [Assign([Tuple([Name('token', Store(), lineno=947, col_offset=8), Name('challenge', Store(), lineno=947, col_offset=15)], Store(), lineno=947, col_offset=8)], Call(Attribute(Name('auth', Load(), lineno=947, col_offset=27), 'split', Load(), lineno=947, col_offset=27), [Str(' ', lineno=947, col_offset=38), Num(1, lineno=947, col_offset=43)], [], None, None, lineno=947, col_offset=27), lineno=947, col_offset=8), Assign([Name('chal', Store(), lineno=948, col_offset=8)], Call(Name('parse_keqv_list', Load(), lineno=948, col_offset=15), [Call(Name('parse_http_list', Load(), lineno=948, col_offset=31), [Name('challenge', Load(), lineno=948, col_offset=47)], [], None, None, lineno=948, col_offset=31)], [], None, None, lineno=948, col_offset=15), lineno=948, col_offset=8), Assign([Name('auth', Store(), lineno=949, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=949, col_offset=15), 'get_authorization', Load(), lineno=949, col_offset=15), [Name('req', Load(), lineno=949, col_offset=38), Name('chal', Load(), lineno=949, col_offset=43)], [], None, None, lineno=949, col_offset=15), lineno=949, col_offset=8), If(Name('auth', Load(), lineno=950, col_offset=11), [Assign([Name('auth_val', Store(), lineno=951, col_offset=12)], BinOp(Str('Digest %s', lineno=951, col_offset=23), Mod(), Name('auth', Load(), lineno=951, col_offset=37), lineno=951, col_offset=23), lineno=951, col_offset=12), If(Compare(Call(Attribute(Attribute(Name('req', Load(), lineno=952, col_offset=15), 'headers', Load(), lineno=952, col_offset=15), 'get', Load(), lineno=952, col_offset=15), [Attribute(Name('self', Load(), lineno=952, col_offset=31), 'auth_header', Load(), lineno=952, col_offset=31), Name('None', Load(), lineno=952, col_offset=49)], [], None, None, lineno=952, col_offset=15), [Eq()], [Name('auth_val', Load(), lineno=952, col_offset=58)], lineno=952, col_offset=15), [Return(Name('None', Load(), lineno=953, col_offset=23), lineno=953, col_offset=16)], [], lineno=952, col_offset=12), Expr(Call(Attribute(Name('req', Load(), lineno=954, col_offset=12), 'add_unredirected_header', Load(), lineno=954, col_offset=12), [Attribute(Name('self', Load(), lineno=954, col_offset=40), 'auth_header', Load(), lineno=954, col_offset=40), Name('auth_val', Load(), lineno=954, col_offset=58)], [], None, None, lineno=954, col_offset=12), lineno=954, col_offset=12), Assign([Name('resp', Store(), lineno=955, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=955, col_offset=19), 'parent', Load(), lineno=955, col_offset=19), 'open', Load(), lineno=955, col_offset=19), [Name('req', Load(), lineno=955, col_offset=36)], [keyword('timeout', Attribute(Name('req', Load(), lineno=955, col_offset=49), 'timeout', Load(), lineno=955, col_offset=49))], None, None, lineno=955, col_offset=19), lineno=955, col_offset=12), Return(Name('resp', Load(), lineno=956, col_offset=19), lineno=956, col_offset=12)], [], lineno=950, col_offset=8)], [], lineno=946, col_offset=4), FunctionDef('get_cnonce', arguments([Name('self', Param(), lineno=958, col_offset=19), Name('nonce', Param(), lineno=958, col_offset=25)], None, None, []), [Assign([Name('dig', Store(), lineno=964, col_offset=8)], Call(Attribute(Call(Attribute(Name('hashlib', Load(), lineno=964, col_offset=14), 'sha1', Load(), lineno=964, col_offset=14), [BinOp(Str('%s:%s:%s:%s', lineno=964, col_offset=27), Mod(), Tuple([Attribute(Name('self', Load(), lineno=964, col_offset=44), 'nonce_count', Load(), lineno=964, col_offset=44), Name('nonce', Load(), lineno=964, col_offset=62), Call(Attribute(Name('time', Load(), lineno=964, col_offset=69), 'ctime', Load(), lineno=964, col_offset=69), [], [], None, None, lineno=964, col_offset=69), Call(Name('randombytes', Load(), lineno=965, col_offset=44), [Num(8, lineno=965, col_offset=56)], [], None, None, lineno=965, col_offset=44)], Load(), lineno=964, col_offset=44), lineno=964, col_offset=27)], [], None, None, lineno=964, col_offset=14), 'hexdigest', Load(), lineno=964, col_offset=14), [], [], None, None, lineno=964, col_offset=14), lineno=964, col_offset=8), Return(Subscript(Name('dig', Load(), lineno=966, col_offset=15), Slice(None, Num(16, lineno=966, col_offset=20), None), Load(), lineno=966, col_offset=15), lineno=966, col_offset=8)], [], lineno=958, col_offset=4), FunctionDef('get_authorization', arguments([Name('self', Param(), lineno=968, col_offset=26), Name('req', Param(), lineno=968, col_offset=32), Name('chal', Param(), lineno=968, col_offset=37)], None, None, []), [TryExcept([Assign([Name('realm', Store(), lineno=970, col_offset=12)], Subscript(Name('chal', Load(), lineno=970, col_offset=20), Index(Str('realm', lineno=970, col_offset=25)), Load(), lineno=970, col_offset=20), lineno=970, col_offset=12), Assign([Name('nonce', Store(), lineno=971, col_offset=12)], Subscript(Name('chal', Load(), lineno=971, col_offset=20), Index(Str('nonce', lineno=971, col_offset=25)), Load(), lineno=971, col_offset=20), lineno=971, col_offset=12), Assign([Name('qop', Store(), lineno=972, col_offset=12)], Call(Attribute(Name('chal', Load(), lineno=972, col_offset=18), 'get', Load(), lineno=972, col_offset=18), [Str('qop', lineno=972, col_offset=27)], [], None, None, lineno=972, col_offset=18), lineno=972, col_offset=12), Assign([Name('algorithm', Store(), lineno=973, col_offset=12)], Call(Attribute(Name('chal', Load(), lineno=973, col_offset=24), 'get', Load(), lineno=973, col_offset=24), [Str('algorithm', lineno=973, col_offset=33), Str('MD5', lineno=973, col_offset=46)], [], None, None, lineno=973, col_offset=24), lineno=973, col_offset=12), Assign([Name('opaque', Store(), lineno=976, col_offset=12)], Call(Attribute(Name('chal', Load(), lineno=976, col_offset=21), 'get', Load(), lineno=976, col_offset=21), [Str('opaque', lineno=976, col_offset=30), Name('None', Load(), lineno=976, col_offset=40)], [], None, None, lineno=976, col_offset=21), lineno=976, col_offset=12)], [ExceptHandler(Name('KeyError', Load(), lineno=977, col_offset=15), None, [Return(Name('None', Load(), lineno=978, col_offset=19), lineno=978, col_offset=12)], lineno=977, col_offset=8)], [], lineno=969, col_offset=8), Assign([Tuple([Name('H', Store(), lineno=980, col_offset=8), Name('KD', Store(), lineno=980, col_offset=11)], Store(), lineno=980, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=980, col_offset=16), 'get_algorithm_impls', Load(), lineno=980, col_offset=16), [Name('algorithm', Load(), lineno=980, col_offset=41)], [], None, None, lineno=980, col_offset=16), lineno=980, col_offset=8), If(Compare(Name('H', Load(), lineno=981, col_offset=11), [Is()], [Name('None', Load(), lineno=981, col_offset=16)], lineno=981, col_offset=11), [Return(Name('None', Load(), lineno=982, col_offset=19), lineno=982, col_offset=12)], [], lineno=981, col_offset=8), Assign([Tuple([Name('user', Store(), lineno=984, col_offset=8), Name('pw', Store(), lineno=984, col_offset=14)], Store(), lineno=984, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=984, col_offset=19), 'passwd', Load(), lineno=984, col_offset=19), 'find_user_password', Load(), lineno=984, col_offset=19), [Name('realm', Load(), lineno=984, col_offset=50), Call(Attribute(Name('req', Load(), lineno=984, col_offset=57), 'get_full_url', Load(), lineno=984, col_offset=57), [], [], None, None, lineno=984, col_offset=57)], [], None, None, lineno=984, col_offset=19), lineno=984, col_offset=8), If(Compare(Name('user', Load(), lineno=985, col_offset=11), [Is()], [Name('None', Load(), lineno=985, col_offset=19)], lineno=985, col_offset=11), [Return(Name('None', Load(), lineno=986, col_offset=19), lineno=986, col_offset=12)], [], lineno=985, col_offset=8), If(Call(Attribute(Name('req', Load(), lineno=989, col_offset=11), 'has_data', Load(), lineno=989, col_offset=11), [], [], None, None, lineno=989, col_offset=11), [Assign([Name('entdig', Store(), lineno=990, col_offset=12)], Call(Attribute(Name('self', Load(), lineno=990, col_offset=21), 'get_entity_digest', Load(), lineno=990, col_offset=21), [Call(Attribute(Name('req', Load(), lineno=990, col_offset=44), 'get_data', Load(), lineno=990, col_offset=44), [], [], None, None, lineno=990, col_offset=44), Name('chal', Load(), lineno=990, col_offset=60)], [], None, None, lineno=990, col_offset=21), lineno=990, col_offset=12)], [Assign([Name('entdig', Store(), lineno=992, col_offset=12)], Name('None', Load(), lineno=992, col_offset=21), lineno=992, col_offset=12)], lineno=989, col_offset=8), Assign([Name('A1', Store(), lineno=994, col_offset=8)], BinOp(Str('%s:%s:%s', lineno=994, col_offset=13), Mod(), Tuple([Name('user', Load(), lineno=994, col_offset=27), Name('realm', Load(), lineno=994, col_offset=33), Name('pw', Load(), lineno=994, col_offset=40)], Load(), lineno=994, col_offset=27), lineno=994, col_offset=13), lineno=994, col_offset=8), Assign([Name('A2', Store(), lineno=995, col_offset=8)], BinOp(Str('%s:%s', lineno=995, col_offset=13), Mod(), Tuple([Call(Attribute(Name('req', Load(), lineno=995, col_offset=24), 'get_method', Load(), lineno=995, col_offset=24), [], [], None, None, lineno=995, col_offset=24), Call(Attribute(Name('req', Load(), lineno=997, col_offset=24), 'get_selector', Load(), lineno=997, col_offset=24), [], [], None, None, lineno=997, col_offset=24)], Load(), lineno=995, col_offset=24), lineno=995, col_offset=13), lineno=995, col_offset=8), If(Compare(Name('qop', Load(), lineno=998, col_offset=11), [Eq()], [Str('auth', lineno=998, col_offset=18)], lineno=998, col_offset=11), [If(Compare(Name('nonce', Load(), lineno=999, col_offset=15), [Eq()], [Attribute(Name('self', Load(), lineno=999, col_offset=24), 'last_nonce', Load(), lineno=999, col_offset=24)], lineno=999, col_offset=15), [AugAssign(Attribute(Name('self', Load(), lineno=1000, col_offset=16), 'nonce_count', Store(), lineno=1000, col_offset=16), Add(), Num(1, lineno=1000, col_offset=36), lineno=1000, col_offset=16)], [Assign([Attribute(Name('self', Load(), lineno=1002, col_offset=16), 'nonce_count', Store(), lineno=1002, col_offset=16)], Num(1, lineno=1002, col_offset=35), lineno=1002, col_offset=16), Assign([Attribute(Name('self', Load(), lineno=1003, col_offset=16), 'last_nonce', Store(), lineno=1003, col_offset=16)], Name('nonce', Load(), lineno=1003, col_offset=34), lineno=1003, col_offset=16)], lineno=999, col_offset=12), Assign([Name('ncvalue', Store(), lineno=1005, col_offset=12)], BinOp(Str('%08x', lineno=1005, col_offset=22), Mod(), Attribute(Name('self', Load(), lineno=1005, col_offset=31), 'nonce_count', Load(), lineno=1005, col_offset=31), lineno=1005, col_offset=22), lineno=1005, col_offset=12), Assign([Name('cnonce', Store(), lineno=1006, col_offset=12)], Call(Attribute(Name('self', Load(), lineno=1006, col_offset=21), 'get_cnonce', Load(), lineno=1006, col_offset=21), [Name('nonce', Load(), lineno=1006, col_offset=37)], [], None, None, lineno=1006, col_offset=21), lineno=1006, col_offset=12), Assign([Name('noncebit', Store(), lineno=1007, col_offset=12)], BinOp(Str('%s:%s:%s:%s:%s', lineno=1007, col_offset=23), Mod(), Tuple([Name('nonce', Load(), lineno=1007, col_offset=43), Name('ncvalue', Load(), lineno=1007, col_offset=50), Name('cnonce', Load(), lineno=1007, col_offset=59), Name('qop', Load(), lineno=1007, col_offset=67), Call(Name('H', Load(), lineno=1007, col_offset=72), [Name('A2', Load(), lineno=1007, col_offset=74)], [], None, None, lineno=1007, col_offset=72)], Load(), lineno=1007, col_offset=43), lineno=1007, col_offset=23), lineno=1007, col_offset=12), Assign([Name('respdig', Store(), lineno=1008, col_offset=12)], Call(Name('KD', Load(), lineno=1008, col_offset=22), [Call(Name('H', Load(), lineno=1008, col_offset=25), [Name('A1', Load(), lineno=1008, col_offset=27)], [], None, None, lineno=1008, col_offset=25), Name('noncebit', Load(), lineno=1008, col_offset=32)], [], None, None, lineno=1008, col_offset=22), lineno=1008, col_offset=12)], [If(Compare(Name('qop', Load(), lineno=1009, col_offset=13), [Is()], [Name('None', Load(), lineno=1009, col_offset=20)], lineno=1009, col_offset=13), [Assign([Name('respdig', Store(), lineno=1010, col_offset=12)], Call(Name('KD', Load(), lineno=1010, col_offset=22), [Call(Name('H', Load(), lineno=1010, col_offset=25), [Name('A1', Load(), lineno=1010, col_offset=27)], [], None, None, lineno=1010, col_offset=25), BinOp(Str('%s:%s', lineno=1010, col_offset=32), Mod(), Tuple([Name('nonce', Load(), lineno=1010, col_offset=43), Call(Name('H', Load(), lineno=1010, col_offset=50), [Name('A2', Load(), lineno=1010, col_offset=52)], [], None, None, lineno=1010, col_offset=50)], Load(), lineno=1010, col_offset=43), lineno=1010, col_offset=32)], [], None, None, lineno=1010, col_offset=22), lineno=1010, col_offset=12)], [Raise(Call(Name('URLError', Load(), lineno=1013, col_offset=18), [BinOp(Str("qop '%s' is not supported.", lineno=1013, col_offset=27), Mod(), Name('qop', Load(), lineno=1013, col_offset=58), lineno=1013, col_offset=27)], [], None, None, lineno=1013, col_offset=18), None, None, lineno=1013, col_offset=12)], lineno=1009, col_offset=13)], lineno=998, col_offset=8), Assign([Name('base', Store(), lineno=1017, col_offset=8)], BinOp(Str('username="%s", realm="%s", nonce="%s", uri="%s", response="%s"', lineno=1017, col_offset=15), Mod(), Tuple([Name('user', Load(), lineno=1018, col_offset=34), Name('realm', Load(), lineno=1018, col_offset=40), Name('nonce', Load(), lineno=1018, col_offset=47), Call(Attribute(Name('req', Load(), lineno=1018, col_offset=54), 'get_selector', Load(), lineno=1018, col_offset=54), [], [], None, None, lineno=1018, col_offset=54), Name('respdig', Load(), lineno=1019, col_offset=34)], Load(), lineno=1018, col_offset=34), lineno=1017, col_offset=15), lineno=1017, col_offset=8), If(Name('opaque', Load(), lineno=1020, col_offset=11), [AugAssign(Name('base', Store(), lineno=1021, col_offset=12), Add(), BinOp(Str(', opaque="%s"', lineno=1021, col_offset=20), Mod(), Name('opaque', Load(), lineno=1021, col_offset=38), lineno=1021, col_offset=20), lineno=1021, col_offset=12)], [], lineno=1020, col_offset=8), If(Name('entdig', Load(), lineno=1022, col_offset=11), [AugAssign(Name('base', Store(), lineno=1023, col_offset=12), Add(), BinOp(Str(', digest="%s"', lineno=1023, col_offset=20), Mod(), Name('entdig', Load(), lineno=1023, col_offset=38), lineno=1023, col_offset=20), lineno=1023, col_offset=12)], [], lineno=1022, col_offset=8), AugAssign(Name('base', Store(), lineno=1024, col_offset=8), Add(), BinOp(Str(', algorithm="%s"', lineno=1024, col_offset=16), Mod(), Name('algorithm', Load(), lineno=1024, col_offset=37), lineno=1024, col_offset=16), lineno=1024, col_offset=8), If(Name('qop', Load(), lineno=1025, col_offset=11), [AugAssign(Name('base', Store(), lineno=1026, col_offset=12), Add(), BinOp(Str(', qop=auth, nc=%s, cnonce="%s"', lineno=1026, col_offset=20), Mod(), Tuple([Name('ncvalue', Load(), lineno=1026, col_offset=56), Name('cnonce', Load(), lineno=1026, col_offset=65)], Load(), lineno=1026, col_offset=56), lineno=1026, col_offset=20), lineno=1026, col_offset=12)], [], lineno=1025, col_offset=8), Return(Name('base', Load(), lineno=1027, col_offset=15), lineno=1027, col_offset=8)], [], lineno=968, col_offset=4), FunctionDef('get_algorithm_impls', arguments([Name('self', Param(), lineno=1029, col_offset=28), Name('algorithm', Param(), lineno=1029, col_offset=34)], None, None, []), [Assign([Name('algorithm', Store(), lineno=1031, col_offset=8)], Call(Attribute(Name('algorithm', Load(), lineno=1031, col_offset=20), 'upper', Load(), lineno=1031, col_offset=20), [], [], None, None, lineno=1031, col_offset=20), lineno=1031, col_offset=8), If(Compare(Name('algorithm', Load(), lineno=1033, col_offset=11), [Eq()], [Str('MD5', lineno=1033, col_offset=24)], lineno=1033, col_offset=11), [Assign([Name('H', Store(), lineno=1034, col_offset=12)], Lambda(arguments([Name('x', Param(), lineno=1034, col_offset=23)], None, None, []), Call(Attribute(Call(Attribute(Name('hashlib', Load(), lineno=1034, col_offset=26), 'md5', Load(), lineno=1034, col_offset=26), [Name('x', Load(), lineno=1034, col_offset=38)], [], None, None, lineno=1034, col_offset=26), 'hexdigest', Load(), lineno=1034, col_offset=26), [], [], None, None, lineno=1034, col_offset=26), lineno=1034, col_offset=16), lineno=1034, col_offset=12)], [If(Compare(Name('algorithm', Load(), lineno=1035, col_offset=13), [Eq()], [Str('SHA', lineno=1035, col_offset=26)], lineno=1035, col_offset=13), [Assign([Name('H', Store(), lineno=1036, col_offset=12)], Lambda(arguments([Name('x', Param(), lineno=1036, col_offset=23)], None, None, []), Call(Attribute(Call(Attribute(Name('hashlib', Load(), lineno=1036, col_offset=26), 'sha1', Load(), lineno=1036, col_offset=26), [Name('x', Load(), lineno=1036, col_offset=39)], [], None, None, lineno=1036, col_offset=26), 'hexdigest', Load(), lineno=1036, col_offset=26), [], [], None, None, lineno=1036, col_offset=26), lineno=1036, col_offset=16), lineno=1036, col_offset=12)], [], lineno=1035, col_offset=13)], lineno=1033, col_offset=8), Assign([Name('KD', Store(), lineno=1038, col_offset=8)], Lambda(arguments([Name('s', Param(), lineno=1038, col_offset=20), Name('d', Param(), lineno=1038, col_offset=23)], None, None, []), Call(Name('H', Load(), lineno=1038, col_offset=26), [BinOp(Str('%s:%s', lineno=1038, col_offset=28), Mod(), Tuple([Name('s', Load(), lineno=1038, col_offset=39), Name('d', Load(), lineno=1038, col_offset=42)], Load(), lineno=1038, col_offset=39), lineno=1038, col_offset=28)], [], None, None, lineno=1038, col_offset=26), lineno=1038, col_offset=13), lineno=1038, col_offset=8), Return(Tuple([Name('H', Load(), lineno=1039, col_offset=15), Name('KD', Load(), lineno=1039, col_offset=18)], Load(), lineno=1039, col_offset=15), lineno=1039, col_offset=8)], [], lineno=1029, col_offset=4), FunctionDef('get_entity_digest', arguments([Name('self', Param(), lineno=1041, col_offset=26), Name('data', Param(), lineno=1041, col_offset=32), Name('chal', Param(), lineno=1041, col_offset=38)], None, None, []), [Return(Name('None', Load(), lineno=1043, col_offset=15), lineno=1043, col_offset=8)], [], lineno=1041, col_offset=4)], [], lineno=906, col_offset=0), ClassDef('HTTPDigestAuthHandler', [Name('BaseHandler', Load(), lineno=1046, col_offset=28), Name('AbstractDigestAuthHandler', Load(), lineno=1046, col_offset=41)], [Expr(Str('An authentication protocol defined by RFC 2069\n\n    Digest authentication improves on basic authentication because it\n    does not transmit passwords in the clear.\n    ', lineno=1051, col_offset=-1), lineno=1051, col_offset=-1), Assign([Name('auth_header', Store(), lineno=1053, col_offset=4)], Str('Authorization', lineno=1053, col_offset=18), lineno=1053, col_offset=4), Assign([Name('handler_order', Store(), lineno=1054, col_offset=4)], Num(490, lineno=1054, col_offset=20), lineno=1054, col_offset=4), FunctionDef('http_error_401', arguments([Name('self', Param(), lineno=1056, col_offset=23), Name('req', Param(), lineno=1056, col_offset=29), Name('fp', Param(), lineno=1056, col_offset=34), Name('code', Param(), lineno=1056, col_offset=38), Name('msg', Param(), lineno=1056, col_offset=44), Name('headers', Param(), lineno=1056, col_offset=49)], None, None, []), [Assign([Name('host', Store(), lineno=1057, col_offset=8)], Subscript(Call(Attribute(Name('urlparse', Load(), lineno=1057, col_offset=15), 'urlparse', Load(), lineno=1057, col_offset=15), [Call(Attribute(Name('req', Load(), lineno=1057, col_offset=33), 'get_full_url', Load(), lineno=1057, col_offset=33), [], [], None, None, lineno=1057, col_offset=33)], [], None, None, lineno=1057, col_offset=15), Index(Num(1, lineno=1057, col_offset=53)), Load(), lineno=1057, col_offset=15), lineno=1057, col_offset=8), Assign([Name('retry', Store(), lineno=1058, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=1058, col_offset=16), 'http_error_auth_reqed', Load(), lineno=1058, col_offset=16), [Str('www-authenticate', lineno=1058, col_offset=43), Name('host', Load(), lineno=1059, col_offset=43), Name('req', Load(), lineno=1059, col_offset=49), Name('headers', Load(), lineno=1059, col_offset=54)], [], None, None, lineno=1058, col_offset=16), lineno=1058, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1060, col_offset=8), 'reset_retry_count', Load(), lineno=1060, col_offset=8), [], [], None, None, lineno=1060, col_offset=8), lineno=1060, col_offset=8), Return(Name('retry', Load(), lineno=1061, col_offset=15), lineno=1061, col_offset=8)], [], lineno=1056, col_offset=4)], [], lineno=1046, col_offset=0), ClassDef('ProxyDigestAuthHandler', [Name('BaseHandler', Load(), lineno=1064, col_offset=29), Name('AbstractDigestAuthHandler', Load(), lineno=1064, col_offset=42)], [Assign([Name('auth_header', Store(), lineno=1066, col_offset=4)], Str('Proxy-Authorization', lineno=1066, col_offset=18), lineno=1066, col_offset=4), Assign([Name('handler_order', Store(), lineno=1067, col_offset=4)], Num(490, lineno=1067, col_offset=20), lineno=1067, col_offset=4), FunctionDef('http_error_407', arguments([Name('self', Param(), lineno=1069, col_offset=23), Name('req', Param(), lineno=1069, col_offset=29), Name('fp', Param(), lineno=1069, col_offset=34), Name('code', Param(), lineno=1069, col_offset=38), Name('msg', Param(), lineno=1069, col_offset=44), Name('headers', Param(), lineno=1069, col_offset=49)], None, None, []), [Assign([Name('host', Store(), lineno=1070, col_offset=8)], Call(Attribute(Name('req', Load(), lineno=1070, col_offset=15), 'get_host', Load(), lineno=1070, col_offset=15), [], [], None, None, lineno=1070, col_offset=15), lineno=1070, col_offset=8), Assign([Name('retry', Store(), lineno=1071, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=1071, col_offset=16), 'http_error_auth_reqed', Load(), lineno=1071, col_offset=16), [Str('proxy-authenticate', lineno=1071, col_offset=43), Name('host', Load(), lineno=1072, col_offset=43), Name('req', Load(), lineno=1072, col_offset=49), Name('headers', Load(), lineno=1072, col_offset=54)], [], None, None, lineno=1071, col_offset=16), lineno=1071, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1073, col_offset=8), 'reset_retry_count', Load(), lineno=1073, col_offset=8), [], [], None, None, lineno=1073, col_offset=8), lineno=1073, col_offset=8), Return(Name('retry', Load(), lineno=1074, col_offset=15), lineno=1074, col_offset=8)], [], lineno=1069, col_offset=4)], [], lineno=1064, col_offset=0), ClassDef('AbstractHTTPHandler', [Name('BaseHandler', Load(), lineno=1076, col_offset=26)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=1078, col_offset=17), Name('debuglevel', Param(), lineno=1078, col_offset=23)], None, None, [Num(0, lineno=1078, col_offset=34)]), [Assign([Attribute(Name('self', Load(), lineno=1079, col_offset=8), '_debuglevel', Store(), lineno=1079, col_offset=8)], Name('debuglevel', Load(), lineno=1079, col_offset=27), lineno=1079, col_offset=8)], [], lineno=1078, col_offset=4), FunctionDef('set_http_debuglevel', arguments([Name('self', Param(), lineno=1081, col_offset=28), Name('level', Param(), lineno=1081, col_offset=34)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=1082, col_offset=8), '_debuglevel', Store(), lineno=1082, col_offset=8)], Name('level', Load(), lineno=1082, col_offset=27), lineno=1082, col_offset=8)], [], lineno=1081, col_offset=4), FunctionDef('do_request_', arguments([Name('self', Param(), lineno=1084, col_offset=20), Name('request', Param(), lineno=1084, col_offset=26)], None, None, []), [Assign([Name('host', Store(), lineno=1085, col_offset=8)], Call(Attribute(Name('request', Load(), lineno=1085, col_offset=15), 'get_host', Load(), lineno=1085, col_offset=15), [], [], None, None, lineno=1085, col_offset=15), lineno=1085, col_offset=8), If(UnaryOp(Not(), Name('host', Load(), lineno=1086, col_offset=15), lineno=1086, col_offset=11), [Raise(Call(Name('URLError', Load(), lineno=1087, col_offset=18), [Str('no host given', lineno=1087, col_offset=27)], [], None, None, lineno=1087, col_offset=18), None, None, lineno=1087, col_offset=12)], [], lineno=1086, col_offset=8), If(Call(Attribute(Name('request', Load(), lineno=1089, col_offset=11), 'has_data', Load(), lineno=1089, col_offset=11), [], [], None, None, lineno=1089, col_offset=11), [Assign([Name('data', Store(), lineno=1090, col_offset=12)], Call(Attribute(Name('request', Load(), lineno=1090, col_offset=19), 'get_data', Load(), lineno=1090, col_offset=19), [], [], None, None, lineno=1090, col_offset=19), lineno=1090, col_offset=12), If(UnaryOp(Not(), Call(Attribute(Name('request', Load(), lineno=1091, col_offset=19), 'has_header', Load(), lineno=1091, col_offset=19), [Str('Content-type', lineno=1091, col_offset=38)], [], None, None, lineno=1091, col_offset=19), lineno=1091, col_offset=15), [Expr(Call(Attribute(Name('request', Load(), lineno=1092, col_offset=16), 'add_unredirected_header', Load(), lineno=1092, col_offset=16), [Str('Content-type', lineno=1093, col_offset=20), Str('application/x-www-form-urlencoded', lineno=1094, col_offset=20)], [], None, None, lineno=1092, col_offset=16), lineno=1092, col_offset=16)], [], lineno=1091, col_offset=12), If(UnaryOp(Not(), Call(Attribute(Name('request', Load(), lineno=1095, col_offset=19), 'has_header', Load(), lineno=1095, col_offset=19), [Str('Content-length', lineno=1095, col_offset=38)], [], None, None, lineno=1095, col_offset=19), lineno=1095, col_offset=15), [Expr(Call(Attribute(Name('request', Load(), lineno=1096, col_offset=16), 'add_unredirected_header', Load(), lineno=1096, col_offset=16), [Str('Content-length', lineno=1097, col_offset=20), BinOp(Str('%d', lineno=1097, col_offset=38), Mod(), Call(Name('len', Load(), lineno=1097, col_offset=45), [Name('data', Load(), lineno=1097, col_offset=49)], [], None, None, lineno=1097, col_offset=45), lineno=1097, col_offset=38)], [], None, None, lineno=1096, col_offset=16), lineno=1096, col_offset=16)], [], lineno=1095, col_offset=12)], [], lineno=1089, col_offset=8), Assign([Name('sel_host', Store(), lineno=1099, col_offset=8)], Name('host', Load(), lineno=1099, col_offset=19), lineno=1099, col_offset=8), If(Call(Attribute(Name('request', Load(), lineno=1100, col_offset=11), 'has_proxy', Load(), lineno=1100, col_offset=11), [], [], None, None, lineno=1100, col_offset=11), [Assign([Tuple([Name('scheme', Store(), lineno=1101, col_offset=12), Name('sel', Store(), lineno=1101, col_offset=20)], Store(), lineno=1101, col_offset=12)], Call(Name('splittype', Load(), lineno=1101, col_offset=26), [Call(Attribute(Name('request', Load(), lineno=1101, col_offset=36), 'get_selector', Load(), lineno=1101, col_offset=36), [], [], None, None, lineno=1101, col_offset=36)], [], None, None, lineno=1101, col_offset=26), lineno=1101, col_offset=12), Assign([Tuple([Name('sel_host', Store(), lineno=1102, col_offset=12), Name('sel_path', Store(), lineno=1102, col_offset=22)], Store(), lineno=1102, col_offset=12)], Call(Name('splithost', Load(), lineno=1102, col_offset=33), [Name('sel', Load(), lineno=1102, col_offset=43)], [], None, None, lineno=1102, col_offset=33), lineno=1102, col_offset=12)], [], lineno=1100, col_offset=8), If(UnaryOp(Not(), Call(Attribute(Name('request', Load(), lineno=1104, col_offset=15), 'has_header', Load(), lineno=1104, col_offset=15), [Str('Host', lineno=1104, col_offset=34)], [], None, None, lineno=1104, col_offset=15), lineno=1104, col_offset=11), [Expr(Call(Attribute(Name('request', Load(), lineno=1105, col_offset=12), 'add_unredirected_header', Load(), lineno=1105, col_offset=12), [Str('Host', lineno=1105, col_offset=44), Name('sel_host', Load(), lineno=1105, col_offset=52)], [], None, None, lineno=1105, col_offset=12), lineno=1105, col_offset=12)], [], lineno=1104, col_offset=8), For(Tuple([Name('name', Store(), lineno=1106, col_offset=12), Name('value', Store(), lineno=1106, col_offset=18)], Store(), lineno=1106, col_offset=12), Attribute(Attribute(Name('self', Load(), lineno=1106, col_offset=27), 'parent', Load(), lineno=1106, col_offset=27), 'addheaders', Load(), lineno=1106, col_offset=27), [Assign([Name('name', Store(), lineno=1107, col_offset=12)], Call(Attribute(Name('name', Load(), lineno=1107, col_offset=19), 'capitalize', Load(), lineno=1107, col_offset=19), [], [], None, None, lineno=1107, col_offset=19), lineno=1107, col_offset=12), If(UnaryOp(Not(), Call(Attribute(Name('request', Load(), lineno=1108, col_offset=19), 'has_header', Load(), lineno=1108, col_offset=19), [Name('name', Load(), lineno=1108, col_offset=38)], [], None, None, lineno=1108, col_offset=19), lineno=1108, col_offset=15), [Expr(Call(Attribute(Name('request', Load(), lineno=1109, col_offset=16), 'add_unredirected_header', Load(), lineno=1109, col_offset=16), [Name('name', Load(), lineno=1109, col_offset=48), Name('value', Load(), lineno=1109, col_offset=54)], [], None, None, lineno=1109, col_offset=16), lineno=1109, col_offset=16)], [], lineno=1108, col_offset=12)], [], lineno=1106, col_offset=8), Return(Name('request', Load(), lineno=1111, col_offset=15), lineno=1111, col_offset=8)], [], lineno=1084, col_offset=4), FunctionDef('do_open', arguments([Name('self', Param(), lineno=1113, col_offset=16), Name('http_class', Param(), lineno=1113, col_offset=22), Name('req', Param(), lineno=1113, col_offset=34)], None, None, []), [Expr(Str('Return an addinfourl object for the request, using http_class.\n\n        http_class must implement the HTTPConnection API from httplib.\n        The addinfourl return value is a file-like object.  It also\n        has methods and attributes including:\n            - info(): return a mimetools.Message object for the headers\n            - geturl(): return the original request URL\n            - code: HTTP status code\n        ', lineno=1122, col_offset=-1), lineno=1122, col_offset=-1), Assign([Name('host', Store(), lineno=1123, col_offset=8)], Call(Attribute(Name('req', Load(), lineno=1123, col_offset=15), 'get_host', Load(), lineno=1123, col_offset=15), [], [], None, None, lineno=1123, col_offset=15), lineno=1123, col_offset=8), If(UnaryOp(Not(), Name('host', Load(), lineno=1124, col_offset=15), lineno=1124, col_offset=11), [Raise(Call(Name('URLError', Load(), lineno=1125, col_offset=18), [Str('no host given', lineno=1125, col_offset=27)], [], None, None, lineno=1125, col_offset=18), None, None, lineno=1125, col_offset=12)], [], lineno=1124, col_offset=8), Assign([Name('h', Store(), lineno=1127, col_offset=8)], Call(Name('http_class', Load(), lineno=1127, col_offset=12), [Name('host', Load(), lineno=1127, col_offset=23)], [keyword('timeout', Attribute(Name('req', Load(), lineno=1127, col_offset=37), 'timeout', Load(), lineno=1127, col_offset=37))], None, None, lineno=1127, col_offset=12), lineno=1127, col_offset=8), Expr(Call(Attribute(Name('h', Load(), lineno=1128, col_offset=8), 'set_debuglevel', Load(), lineno=1128, col_offset=8), [Attribute(Name('self', Load(), lineno=1128, col_offset=25), '_debuglevel', Load(), lineno=1128, col_offset=25)], [], None, None, lineno=1128, col_offset=8), lineno=1128, col_offset=8), Assign([Name('headers', Store(), lineno=1130, col_offset=8)], Call(Name('dict', Load(), lineno=1130, col_offset=18), [Attribute(Name('req', Load(), lineno=1130, col_offset=23), 'unredirected_hdrs', Load(), lineno=1130, col_offset=23)], [], None, None, lineno=1130, col_offset=18), lineno=1130, col_offset=8), Expr(Call(Attribute(Name('headers', Load(), lineno=1131, col_offset=8), 'update', Load(), lineno=1131, col_offset=8), [Call(Name('dict', Load(), lineno=1131, col_offset=23), [GeneratorExp(Tuple([Name('k', Load(), lineno=1131, col_offset=29), Name('v', Load(), lineno=1131, col_offset=32)], Load(), lineno=1131, col_offset=29), [comprehension(Tuple([Name('k', Store(), lineno=1131, col_offset=39), Name('v', Store(), lineno=1131, col_offset=42)], Store(), lineno=1131, col_offset=39), Call(Attribute(Attribute(Name('req', Load(), lineno=1131, col_offset=47), 'headers', Load(), lineno=1131, col_offset=47), 'items', Load(), lineno=1131, col_offset=47), [], [], None, None, lineno=1131, col_offset=47), [Compare(Name('k', Load(), lineno=1132, col_offset=31), [NotIn()], [Name('headers', Load(), lineno=1132, col_offset=40)], lineno=1132, col_offset=31)])], lineno=1131, col_offset=28)], [], None, None, lineno=1131, col_offset=23)], [], None, None, lineno=1131, col_offset=8), lineno=1131, col_offset=8), Assign([Subscript(Name('headers', Load(), lineno=1140, col_offset=8), Index(Str('Connection', lineno=1140, col_offset=16)), Store(), lineno=1140, col_offset=8)], Str('close', lineno=1140, col_offset=32), lineno=1140, col_offset=8), Assign([Name('headers', Store(), lineno=1141, col_offset=8)], Call(Name('dict', Load(), lineno=1141, col_offset=18), [GeneratorExp(Tuple([Call(Attribute(Name('name', Load(), lineno=1142, col_offset=13), 'title', Load(), lineno=1142, col_offset=13), [], [], None, None, lineno=1142, col_offset=13), Name('val', Load(), lineno=1142, col_offset=27)], Load(), lineno=1142, col_offset=13), [comprehension(Tuple([Name('name', Store(), lineno=1142, col_offset=36), Name('val', Store(), lineno=1142, col_offset=42)], Store(), lineno=1142, col_offset=36), Call(Attribute(Name('headers', Load(), lineno=1142, col_offset=49), 'items', Load(), lineno=1142, col_offset=49), [], [], None, None, lineno=1142, col_offset=49), [])], lineno=1142, col_offset=12)], [], None, None, lineno=1141, col_offset=18), lineno=1141, col_offset=8), If(Attribute(Name('req', Load(), lineno=1144, col_offset=11), '_tunnel_host', Load(), lineno=1144, col_offset=11), [Assign([Name('tunnel_headers', Store(), lineno=1145, col_offset=12)], Dict([], [], lineno=1145, col_offset=29), lineno=1145, col_offset=12), Assign([Name('proxy_auth_hdr', Store(), lineno=1146, col_offset=12)], Str('Proxy-Authorization', lineno=1146, col_offset=29), lineno=1146, col_offset=12), If(Compare(Name('proxy_auth_hdr', Load(), lineno=1147, col_offset=15), [In()], [Name('headers', Load(), lineno=1147, col_offset=33)], lineno=1147, col_offset=15), [Assign([Subscript(Name('tunnel_headers', Load(), lineno=1148, col_offset=16), Index(Name('proxy_auth_hdr', Load(), lineno=1148, col_offset=31)), Store(), lineno=1148, col_offset=16)], Subscript(Name('headers', Load(), lineno=1148, col_offset=49), Index(Name('proxy_auth_hdr', Load(), lineno=1148, col_offset=57)), Load(), lineno=1148, col_offset=49), lineno=1148, col_offset=16), Delete([Subscript(Name('headers', Load(), lineno=1151, col_offset=20), Index(Name('proxy_auth_hdr', Load(), lineno=1151, col_offset=28)), Del(), lineno=1151, col_offset=20)], lineno=1151, col_offset=16)], [], lineno=1147, col_offset=12), Expr(Call(Attribute(Name('h', Load(), lineno=1152, col_offset=12), 'set_tunnel', Load(), lineno=1152, col_offset=12), [Attribute(Name('req', Load(), lineno=1152, col_offset=25), '_tunnel_host', Load(), lineno=1152, col_offset=25)], [keyword('headers', Name('tunnel_headers', Load(), lineno=1152, col_offset=51))], None, None, lineno=1152, col_offset=12), lineno=1152, col_offset=12)], [], lineno=1144, col_offset=8), TryExcept([Expr(Call(Attribute(Name('h', Load(), lineno=1155, col_offset=12), 'request', Load(), lineno=1155, col_offset=12), [Call(Attribute(Name('req', Load(), lineno=1155, col_offset=22), 'get_method', Load(), lineno=1155, col_offset=22), [], [], None, None, lineno=1155, col_offset=22), Call(Attribute(Name('req', Load(), lineno=1155, col_offset=40), 'get_selector', Load(), lineno=1155, col_offset=40), [], [], None, None, lineno=1155, col_offset=40), Attribute(Name('req', Load(), lineno=1155, col_offset=60), 'data', Load(), lineno=1155, col_offset=60), Name('headers', Load(), lineno=1155, col_offset=70)], [], None, None, lineno=1155, col_offset=12), lineno=1155, col_offset=12), TryExcept([Assign([Name('r', Store(), lineno=1157, col_offset=16)], Call(Attribute(Name('h', Load(), lineno=1157, col_offset=20), 'getresponse', Load(), lineno=1157, col_offset=20), [], [keyword('buffering', Name('True', Load(), lineno=1157, col_offset=44))], None, None, lineno=1157, col_offset=20), lineno=1157, col_offset=16)], [ExceptHandler(Name('TypeError', Load(), lineno=1158, col_offset=19), None, [Assign([Name('r', Store(), lineno=1159, col_offset=16)], Call(Attribute(Name('h', Load(), lineno=1159, col_offset=20), 'getresponse', Load(), lineno=1159, col_offset=20), [], [], None, None, lineno=1159, col_offset=20), lineno=1159, col_offset=16)], lineno=1158, col_offset=12)], [], lineno=1156, col_offset=12)], [ExceptHandler(Attribute(Name('socket', Load(), lineno=1160, col_offset=15), 'error', Load(), lineno=1160, col_offset=15), Name('err', Store(), lineno=1160, col_offset=29), [Raise(Call(Name('URLError', Load(), lineno=1161, col_offset=18), [Name('err', Load(), lineno=1161, col_offset=27)], [], None, None, lineno=1161, col_offset=18), None, None, lineno=1161, col_offset=12)], lineno=1160, col_offset=8)], [], lineno=1154, col_offset=8), Assign([Attribute(Name('r', Load(), lineno=1174, col_offset=8), 'recv', Store(), lineno=1174, col_offset=8)], Attribute(Name('r', Load(), lineno=1174, col_offset=17), 'read', Load(), lineno=1174, col_offset=17), lineno=1174, col_offset=8), Assign([Name('fp', Store(), lineno=1175, col_offset=8)], Call(Attribute(Name('socket', Load(), lineno=1175, col_offset=13), '_fileobject', Load(), lineno=1175, col_offset=13), [Name('r', Load(), lineno=1175, col_offset=32)], [keyword('close', Name('True', Load(), lineno=1175, col_offset=41))], None, None, lineno=1175, col_offset=13), lineno=1175, col_offset=8), Assign([Name('resp', Store(), lineno=1177, col_offset=8)], Call(Name('addinfourl', Load(), lineno=1177, col_offset=15), [Name('fp', Load(), lineno=1177, col_offset=26), Attribute(Name('r', Load(), lineno=1177, col_offset=30), 'msg', Load(), lineno=1177, col_offset=30), Call(Attribute(Name('req', Load(), lineno=1177, col_offset=37), 'get_full_url', Load(), lineno=1177, col_offset=37), [], [], None, None, lineno=1177, col_offset=37)], [], None, None, lineno=1177, col_offset=15), lineno=1177, col_offset=8), Assign([Attribute(Name('resp', Load(), lineno=1178, col_offset=8), 'code', Store(), lineno=1178, col_offset=8)], Attribute(Name('r', Load(), lineno=1178, col_offset=20), 'status', Load(), lineno=1178, col_offset=20), lineno=1178, col_offset=8), Assign([Attribute(Name('resp', Load(), lineno=1179, col_offset=8), 'msg', Store(), lineno=1179, col_offset=8)], Attribute(Name('r', Load(), lineno=1179, col_offset=19), 'reason', Load(), lineno=1179, col_offset=19), lineno=1179, col_offset=8), Return(Name('resp', Load(), lineno=1180, col_offset=15), lineno=1180, col_offset=8)], [], lineno=1113, col_offset=4)], [], lineno=1076, col_offset=0), ClassDef('HTTPHandler', [Name('AbstractHTTPHandler', Load(), lineno=1183, col_offset=18)], [FunctionDef('http_open', arguments([Name('self', Param(), lineno=1185, col_offset=18), Name('req', Param(), lineno=1185, col_offset=24)], None, None, []), [Return(Call(Attribute(Name('self', Load(), lineno=1186, col_offset=15), 'do_open', Load(), lineno=1186, col_offset=15), [Attribute(Name('httplib', Load(), lineno=1186, col_offset=28), 'HTTPConnection', Load(), lineno=1186, col_offset=28), Name('req', Load(), lineno=1186, col_offset=52)], [], None, None, lineno=1186, col_offset=15), lineno=1186, col_offset=8)], [], lineno=1185, col_offset=4), Assign([Name('http_request', Store(), lineno=1188, col_offset=4)], Attribute(Name('AbstractHTTPHandler', Load(), lineno=1188, col_offset=19), 'do_request_', Load(), lineno=1188, col_offset=19), lineno=1188, col_offset=4)], [], lineno=1183, col_offset=0), If(Call(Name('hasattr', Load(), lineno=1190, col_offset=3), [Name('httplib', Load(), lineno=1190, col_offset=11), Str('HTTPS', lineno=1190, col_offset=20)], [], None, None, lineno=1190, col_offset=3), [ClassDef('HTTPSHandler', [Name('AbstractHTTPHandler', Load(), lineno=1191, col_offset=23)], [FunctionDef('https_open', arguments([Name('self', Param(), lineno=1193, col_offset=23), Name('req', Param(), lineno=1193, col_offset=29)], None, None, []), [Return(Call(Attribute(Name('self', Load(), lineno=1194, col_offset=19), 'do_open', Load(), lineno=1194, col_offset=19), [Attribute(Name('httplib', Load(), lineno=1194, col_offset=32), 'HTTPSConnection', Load(), lineno=1194, col_offset=32), Name('req', Load(), lineno=1194, col_offset=57)], [], None, None, lineno=1194, col_offset=19), lineno=1194, col_offset=12)], [], lineno=1193, col_offset=8), Assign([Name('https_request', Store(), lineno=1196, col_offset=8)], Attribute(Name('AbstractHTTPHandler', Load(), lineno=1196, col_offset=24), 'do_request_', Load(), lineno=1196, col_offset=24), lineno=1196, col_offset=8)], [], lineno=1191, col_offset=4)], [], lineno=1190, col_offset=0), ClassDef('HTTPCookieProcessor', [Name('BaseHandler', Load(), lineno=1198, col_offset=26)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=1199, col_offset=17), Name('cookiejar', Param(), lineno=1199, col_offset=23)], None, None, [Name('None', Load(), lineno=1199, col_offset=33)]), [Import([alias('cookielib', None)], lineno=1200, col_offset=8), If(Compare(Name('cookiejar', Load(), lineno=1201, col_offset=11), [Is()], [Name('None', Load(), lineno=1201, col_offset=24)], lineno=1201, col_offset=11), [Assign([Name('cookiejar', Store(), lineno=1202, col_offset=12)], Call(Attribute(Name('cookielib', Load(), lineno=1202, col_offset=24), 'CookieJar', Load(), lineno=1202, col_offset=24), [], [], None, None, lineno=1202, col_offset=24), lineno=1202, col_offset=12)], [], lineno=1201, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1203, col_offset=8), 'cookiejar', Store(), lineno=1203, col_offset=8)], Name('cookiejar', Load(), lineno=1203, col_offset=25), lineno=1203, col_offset=8)], [], lineno=1199, col_offset=4), FunctionDef('http_request', arguments([Name('self', Param(), lineno=1205, col_offset=21), Name('request', Param(), lineno=1205, col_offset=27)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1206, col_offset=8), 'cookiejar', Load(), lineno=1206, col_offset=8), 'add_cookie_header', Load(), lineno=1206, col_offset=8), [Name('request', Load(), lineno=1206, col_offset=41)], [], None, None, lineno=1206, col_offset=8), lineno=1206, col_offset=8), Return(Name('request', Load(), lineno=1207, col_offset=15), lineno=1207, col_offset=8)], [], lineno=1205, col_offset=4), FunctionDef('http_response', arguments([Name('self', Param(), lineno=1209, col_offset=22), Name('request', Param(), lineno=1209, col_offset=28), Name('response', Param(), lineno=1209, col_offset=37)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1210, col_offset=8), 'cookiejar', Load(), lineno=1210, col_offset=8), 'extract_cookies', Load(), lineno=1210, col_offset=8), [Name('response', Load(), lineno=1210, col_offset=39), Name('request', Load(), lineno=1210, col_offset=49)], [], None, None, lineno=1210, col_offset=8), lineno=1210, col_offset=8), Return(Name('response', Load(), lineno=1211, col_offset=15), lineno=1211, col_offset=8)], [], lineno=1209, col_offset=4), Assign([Name('https_request', Store(), lineno=1213, col_offset=4)], Name('http_request', Load(), lineno=1213, col_offset=20), lineno=1213, col_offset=4), Assign([Name('https_response', Store(), lineno=1214, col_offset=4)], Name('http_response', Load(), lineno=1214, col_offset=21), lineno=1214, col_offset=4)], [], lineno=1198, col_offset=0), ClassDef('UnknownHandler', [Name('BaseHandler', Load(), lineno=1216, col_offset=21)], [FunctionDef('unknown_open', arguments([Name('self', Param(), lineno=1217, col_offset=21), Name('req', Param(), lineno=1217, col_offset=27)], None, None, []), [Assign([Name('type', Store(), lineno=1218, col_offset=8)], Call(Attribute(Name('req', Load(), lineno=1218, col_offset=15), 'get_type', Load(), lineno=1218, col_offset=15), [], [], None, None, lineno=1218, col_offset=15), lineno=1218, col_offset=8), Raise(Call(Name('URLError', Load(), lineno=1219, col_offset=14), [BinOp(Str('unknown url type: %s', lineno=1219, col_offset=23), Mod(), Name('type', Load(), lineno=1219, col_offset=48), lineno=1219, col_offset=23)], [], None, None, lineno=1219, col_offset=14), None, None, lineno=1219, col_offset=8)], [], lineno=1217, col_offset=4)], [], lineno=1216, col_offset=0), FunctionDef('parse_keqv_list', arguments([Name('l', Param(), lineno=1221, col_offset=20)], None, None, []), [Expr(Str('Parse list of key=value strings where keys are not duplicated.', lineno=1222, col_offset=4), lineno=1222, col_offset=4), Assign([Name('parsed', Store(), lineno=1223, col_offset=4)], Dict([], [], lineno=1223, col_offset=13), lineno=1223, col_offset=4), For(Name('elt', Store(), lineno=1224, col_offset=8), Name('l', Load(), lineno=1224, col_offset=15), [Assign([Tuple([Name('k', Store(), lineno=1225, col_offset=8), Name('v', Store(), lineno=1225, col_offset=11)], Store(), lineno=1225, col_offset=8)], Call(Attribute(Name('elt', Load(), lineno=1225, col_offset=15), 'split', Load(), lineno=1225, col_offset=15), [Str('=', lineno=1225, col_offset=25), Num(1, lineno=1225, col_offset=30)], [], None, None, lineno=1225, col_offset=15), lineno=1225, col_offset=8), If(BoolOp(And(), [Compare(Subscript(Name('v', Load(), lineno=1226, col_offset=11), Index(Num(0, lineno=1226, col_offset=13)), Load(), lineno=1226, col_offset=11), [Eq()], [Str('"', lineno=1226, col_offset=19)], lineno=1226, col_offset=11), Compare(Subscript(Name('v', Load(), lineno=1226, col_offset=27), Index(Num(-1, lineno=1226, col_offset=30)), Load(), lineno=1226, col_offset=27), [Eq()], [Str('"', lineno=1226, col_offset=36)], lineno=1226, col_offset=27)], lineno=1226, col_offset=11), [Assign([Name('v', Store(), lineno=1227, col_offset=12)], Subscript(Name('v', Load(), lineno=1227, col_offset=16), Slice(Num(1, lineno=1227, col_offset=18), Num(-1, lineno=1227, col_offset=21), None), Load(), lineno=1227, col_offset=16), lineno=1227, col_offset=12)], [], lineno=1226, col_offset=8), Assign([Subscript(Name('parsed', Load(), lineno=1228, col_offset=8), Index(Name('k', Load(), lineno=1228, col_offset=15)), Store(), lineno=1228, col_offset=8)], Name('v', Load(), lineno=1228, col_offset=20), lineno=1228, col_offset=8)], [], lineno=1224, col_offset=4), Return(Name('parsed', Load(), lineno=1229, col_offset=11), lineno=1229, col_offset=4)], [], lineno=1221, col_offset=0), FunctionDef('parse_http_list', arguments([Name('s', Param(), lineno=1231, col_offset=20)], None, None, []), [Expr(Str('Parse lists as described by RFC 2068 Section 2.\n\n    In particular, parse comma-separated lists where the elements of\n    the list may include quoted-strings.  A quoted-string could\n    contain a comma.  A non-quoted string could have quotes in the\n    middle.  Neither commas nor quotes count if they are escaped.\n    Only double-quotes count, not single-quotes.\n    ', lineno=1239, col_offset=-1), lineno=1239, col_offset=-1), Assign([Name('res', Store(), lineno=1240, col_offset=4)], List([], Load(), lineno=1240, col_offset=10), lineno=1240, col_offset=4), Assign([Name('part', Store(), lineno=1241, col_offset=4)], Str('', lineno=1241, col_offset=11), lineno=1241, col_offset=4), Assign([Name('escape', Store(), lineno=1243, col_offset=4), Name('quote', Store(), lineno=1243, col_offset=13)], Name('False', Load(), lineno=1243, col_offset=21), lineno=1243, col_offset=4), For(Name('cur', Store(), lineno=1244, col_offset=8), Name('s', Load(), lineno=1244, col_offset=15), [If(Name('escape', Load(), lineno=1245, col_offset=11), [AugAssign(Name('part', Store(), lineno=1246, col_offset=12), Add(), Name('cur', Load(), lineno=1246, col_offset=20), lineno=1246, col_offset=12), Assign([Name('escape', Store(), lineno=1247, col_offset=12)], Name('False', Load(), lineno=1247, col_offset=21), lineno=1247, col_offset=12), Continue( lineno=1248, col_offset=12)], [], lineno=1245, col_offset=8), If(Name('quote', Load(), lineno=1249, col_offset=11), [If(Compare(Name('cur', Load(), lineno=1250, col_offset=15), [Eq()], [Str('\\', lineno=1250, col_offset=22)], lineno=1250, col_offset=15), [Assign([Name('escape', Store(), lineno=1251, col_offset=16)], Name('True', Load(), lineno=1251, col_offset=25), lineno=1251, col_offset=16), Continue( lineno=1252, col_offset=16)], [If(Compare(Name('cur', Load(), lineno=1253, col_offset=17), [Eq()], [Str('"', lineno=1253, col_offset=24)], lineno=1253, col_offset=17), [Assign([Name('quote', Store(), lineno=1254, col_offset=16)], Name('False', Load(), lineno=1254, col_offset=24), lineno=1254, col_offset=16)], [], lineno=1253, col_offset=17)], lineno=1250, col_offset=12), AugAssign(Name('part', Store(), lineno=1255, col_offset=12), Add(), Name('cur', Load(), lineno=1255, col_offset=20), lineno=1255, col_offset=12), Continue( lineno=1256, col_offset=12)], [], lineno=1249, col_offset=8), If(Compare(Name('cur', Load(), lineno=1258, col_offset=11), [Eq()], [Str(',', lineno=1258, col_offset=18)], lineno=1258, col_offset=11), [Expr(Call(Attribute(Name('res', Load(), lineno=1259, col_offset=12), 'append', Load(), lineno=1259, col_offset=12), [Name('part', Load(), lineno=1259, col_offset=23)], [], None, None, lineno=1259, col_offset=12), lineno=1259, col_offset=12), Assign([Name('part', Store(), lineno=1260, col_offset=12)], Str('', lineno=1260, col_offset=19), lineno=1260, col_offset=12), Continue( lineno=1261, col_offset=12)], [], lineno=1258, col_offset=8), If(Compare(Name('cur', Load(), lineno=1263, col_offset=11), [Eq()], [Str('"', lineno=1263, col_offset=18)], lineno=1263, col_offset=11), [Assign([Name('quote', Store(), lineno=1264, col_offset=12)], Name('True', Load(), lineno=1264, col_offset=20), lineno=1264, col_offset=12)], [], lineno=1263, col_offset=8), AugAssign(Name('part', Store(), lineno=1266, col_offset=8), Add(), Name('cur', Load(), lineno=1266, col_offset=16), lineno=1266, col_offset=8)], [], lineno=1244, col_offset=4), If(Name('part', Load(), lineno=1269, col_offset=7), [Expr(Call(Attribute(Name('res', Load(), lineno=1270, col_offset=8), 'append', Load(), lineno=1270, col_offset=8), [Name('part', Load(), lineno=1270, col_offset=19)], [], None, None, lineno=1270, col_offset=8), lineno=1270, col_offset=8)], [], lineno=1269, col_offset=4), Return(ListComp(Call(Attribute(Name('part', Load(), lineno=1272, col_offset=12), 'strip', Load(), lineno=1272, col_offset=12), [], [], None, None, lineno=1272, col_offset=12), [comprehension(Name('part', Store(), lineno=1272, col_offset=29), Name('res', Load(), lineno=1272, col_offset=37), [])], lineno=1272, col_offset=12), lineno=1272, col_offset=4)], [], lineno=1231, col_offset=0), FunctionDef('_safe_gethostbyname', arguments([Name('host', Param(), lineno=1274, col_offset=24)], None, None, []), [TryExcept([Return(Call(Attribute(Name('socket', Load(), lineno=1276, col_offset=15), 'gethostbyname', Load(), lineno=1276, col_offset=15), [Name('host', Load(), lineno=1276, col_offset=36)], [], None, None, lineno=1276, col_offset=15), lineno=1276, col_offset=8)], [ExceptHandler(Attribute(Name('socket', Load(), lineno=1277, col_offset=11), 'gaierror', Load(), lineno=1277, col_offset=11), None, [Return(Name('None', Load(), lineno=1278, col_offset=15), lineno=1278, col_offset=8)], lineno=1277, col_offset=4)], [], lineno=1275, col_offset=4)], [], lineno=1274, col_offset=0), ClassDef('FileHandler', [Name('BaseHandler', Load(), lineno=1280, col_offset=18)], [FunctionDef('file_open', arguments([Name('self', Param(), lineno=1282, col_offset=18), Name('req', Param(), lineno=1282, col_offset=24)], None, None, []), [Assign([Name('url', Store(), lineno=1283, col_offset=8)], Call(Attribute(Name('req', Load(), lineno=1283, col_offset=14), 'get_selector', Load(), lineno=1283, col_offset=14), [], [], None, None, lineno=1283, col_offset=14), lineno=1283, col_offset=8), If(BoolOp(And(), [Compare(Subscript(Name('url', Load(), lineno=1284, col_offset=11), Slice(None, Num(2, lineno=1284, col_offset=16), None), Load(), lineno=1284, col_offset=11), [Eq()], [Str('//', lineno=1284, col_offset=22)], lineno=1284, col_offset=11), Compare(Subscript(Name('url', Load(), lineno=1284, col_offset=31), Slice(Num(2, lineno=1284, col_offset=35), Num(3, lineno=1284, col_offset=37), None), Load(), lineno=1284, col_offset=31), [NotEq()], [Str('/', lineno=1284, col_offset=43)], lineno=1284, col_offset=31), BoolOp(And(), [Attribute(Name('req', Load(), lineno=1284, col_offset=52), 'host', Load(), lineno=1284, col_offset=52), Compare(Attribute(Name('req', Load(), lineno=1285, col_offset=16), 'host', Load(), lineno=1285, col_offset=16), [NotEq()], [Str('localhost', lineno=1285, col_offset=28)], lineno=1285, col_offset=16)], lineno=1284, col_offset=52)], lineno=1284, col_offset=11), [Assign([Attribute(Name('req', Load(), lineno=1286, col_offset=12), 'type', Store(), lineno=1286, col_offset=12)], Str('ftp', lineno=1286, col_offset=23), lineno=1286, col_offset=12), Return(Call(Attribute(Attribute(Name('self', Load(), lineno=1287, col_offset=19), 'parent', Load(), lineno=1287, col_offset=19), 'open', Load(), lineno=1287, col_offset=19), [Name('req', Load(), lineno=1287, col_offset=36)], [], None, None, lineno=1287, col_offset=19), lineno=1287, col_offset=12)], [Return(Call(Attribute(Name('self', Load(), lineno=1289, col_offset=19), 'open_local_file', Load(), lineno=1289, col_offset=19), [Name('req', Load(), lineno=1289, col_offset=40)], [], None, None, lineno=1289, col_offset=19), lineno=1289, col_offset=12)], lineno=1284, col_offset=8)], [], lineno=1282, col_offset=4), Assign([Name('names', Store(), lineno=1292, col_offset=4)], Name('None', Load(), lineno=1292, col_offset=12), lineno=1292, col_offset=4), FunctionDef('get_names', arguments([Name('self', Param(), lineno=1293, col_offset=18)], None, None, []), [If(Compare(Attribute(Name('FileHandler', Load(), lineno=1294, col_offset=11), 'names', Load(), lineno=1294, col_offset=11), [Is()], [Name('None', Load(), lineno=1294, col_offset=32)], lineno=1294, col_offset=11), [TryExcept([Assign([Attribute(Name('FileHandler', Load(), lineno=1296, col_offset=16), 'names', Store(), lineno=1296, col_offset=16)], Call(Name('tuple', Load(), lineno=1296, col_offset=36), [BinOp(Subscript(Call(Attribute(Name('socket', Load(), lineno=1297, col_offset=20), 'gethostbyname_ex', Load(), lineno=1297, col_offset=20), [Str('localhost', lineno=1297, col_offset=44)], [], None, None, lineno=1297, col_offset=20), Index(Num(2, lineno=1297, col_offset=57)), Load(), lineno=1297, col_offset=20), Add(), Subscript(Call(Attribute(Name('socket', Load(), lineno=1298, col_offset=20), 'gethostbyname_ex', Load(), lineno=1298, col_offset=20), [Call(Attribute(Name('socket', Load(), lineno=1298, col_offset=44), 'gethostname', Load(), lineno=1298, col_offset=44), [], [], None, None, lineno=1298, col_offset=44)], [], None, None, lineno=1298, col_offset=20), Index(Num(2, lineno=1298, col_offset=66)), Load(), lineno=1298, col_offset=20), lineno=1297, col_offset=20)], [], None, None, lineno=1296, col_offset=36), lineno=1296, col_offset=16)], [ExceptHandler(Attribute(Name('socket', Load(), lineno=1299, col_offset=19), 'gaierror', Load(), lineno=1299, col_offset=19), None, [Assign([Attribute(Name('FileHandler', Load(), lineno=1300, col_offset=16), 'names', Store(), lineno=1300, col_offset=16)], Tuple([Call(Attribute(Name('socket', Load(), lineno=1300, col_offset=37), 'gethostbyname', Load(), lineno=1300, col_offset=37), [Str('localhost', lineno=1300, col_offset=58)], [], None, None, lineno=1300, col_offset=37)], Load(), lineno=1300, col_offset=37), lineno=1300, col_offset=16)], lineno=1299, col_offset=12)], [], lineno=1295, col_offset=12)], [], lineno=1294, col_offset=8), Return(Attribute(Name('FileHandler', Load(), lineno=1301, col_offset=15), 'names', Load(), lineno=1301, col_offset=15), lineno=1301, col_offset=8)], [], lineno=1293, col_offset=4), FunctionDef('open_local_file', arguments([Name('self', Param(), lineno=1304, col_offset=24), Name('req', Param(), lineno=1304, col_offset=30)], None, None, []), [Import([alias('email.utils', None)], lineno=1305, col_offset=8), Import([alias('mimetypes', None)], lineno=1306, col_offset=8), Assign([Name('host', Store(), lineno=1307, col_offset=8)], Call(Attribute(Name('req', Load(), lineno=1307, col_offset=15), 'get_host', Load(), lineno=1307, col_offset=15), [], [], None, None, lineno=1307, col_offset=15), lineno=1307, col_offset=8), Assign([Name('filename', Store(), lineno=1308, col_offset=8)], Call(Attribute(Name('req', Load(), lineno=1308, col_offset=19), 'get_selector', Load(), lineno=1308, col_offset=19), [], [], None, None, lineno=1308, col_offset=19), lineno=1308, col_offset=8), Assign([Name('localfile', Store(), lineno=1309, col_offset=8)], Call(Name('url2pathname', Load(), lineno=1309, col_offset=20), [Name('filename', Load(), lineno=1309, col_offset=33)], [], None, None, lineno=1309, col_offset=20), lineno=1309, col_offset=8), TryExcept([Assign([Name('stats', Store(), lineno=1311, col_offset=12)], Call(Attribute(Name('os', Load(), lineno=1311, col_offset=20), 'stat', Load(), lineno=1311, col_offset=20), [Name('localfile', Load(), lineno=1311, col_offset=28)], [], None, None, lineno=1311, col_offset=20), lineno=1311, col_offset=12), Assign([Name('size', Store(), lineno=1312, col_offset=12)], Attribute(Name('stats', Load(), lineno=1312, col_offset=19), 'st_size', Load(), lineno=1312, col_offset=19), lineno=1312, col_offset=12), Assign([Name('modified', Store(), lineno=1313, col_offset=12)], Call(Attribute(Attribute(Name('email', Load(), lineno=1313, col_offset=23), 'utils', Load(), lineno=1313, col_offset=23), 'formatdate', Load(), lineno=1313, col_offset=23), [Attribute(Name('stats', Load(), lineno=1313, col_offset=46), 'st_mtime', Load(), lineno=1313, col_offset=46)], [keyword('usegmt', Name('True', Load(), lineno=1313, col_offset=69))], None, None, lineno=1313, col_offset=23), lineno=1313, col_offset=12), Assign([Name('mtype', Store(), lineno=1314, col_offset=12)], Subscript(Call(Attribute(Name('mimetypes', Load(), lineno=1314, col_offset=20), 'guess_type', Load(), lineno=1314, col_offset=20), [Name('filename', Load(), lineno=1314, col_offset=41)], [], None, None, lineno=1314, col_offset=20), Index(Num(0, lineno=1314, col_offset=51)), Load(), lineno=1314, col_offset=20), lineno=1314, col_offset=12), Assign([Name('headers', Store(), lineno=1315, col_offset=12)], Call(Attribute(Name('mimetools', Load(), lineno=1315, col_offset=22), 'Message', Load(), lineno=1315, col_offset=22), [Call(Name('StringIO', Load(), lineno=1315, col_offset=40), [BinOp(Str('Content-type: %s\nContent-length: %d\nLast-modified: %s\n', lineno=1316, col_offset=16), Mod(), Tuple([BoolOp(Or(), [Name('mtype', Load(), lineno=1317, col_offset=17), Str('text/plain', lineno=1317, col_offset=26)], lineno=1317, col_offset=17), Name('size', Load(), lineno=1317, col_offset=40), Name('modified', Load(), lineno=1317, col_offset=46)], Load(), lineno=1317, col_offset=17), lineno=1316, col_offset=16)], [], None, None, lineno=1315, col_offset=40)], [], None, None, lineno=1315, col_offset=22), lineno=1315, col_offset=12), If(Name('host', Load(), lineno=1318, col_offset=15), [Assign([Tuple([Name('host', Store(), lineno=1319, col_offset=16), Name('port', Store(), lineno=1319, col_offset=22)], Store(), lineno=1319, col_offset=16)], Call(Name('splitport', Load(), lineno=1319, col_offset=29), [Name('host', Load(), lineno=1319, col_offset=39)], [], None, None, lineno=1319, col_offset=29), lineno=1319, col_offset=16)], [], lineno=1318, col_offset=12), If(BoolOp(Or(), [UnaryOp(Not(), Name('host', Load(), lineno=1320, col_offset=19), lineno=1320, col_offset=15), BoolOp(And(), [UnaryOp(Not(), Name('port', Load(), lineno=1321, col_offset=21), lineno=1321, col_offset=17), Compare(Call(Name('_safe_gethostbyname', Load(), lineno=1321, col_offset=30), [Name('host', Load(), lineno=1321, col_offset=50)], [], None, None, lineno=1321, col_offset=30), [In()], [Call(Attribute(Name('self', Load(), lineno=1321, col_offset=59), 'get_names', Load(), lineno=1321, col_offset=59), [], [], None, None, lineno=1321, col_offset=59)], lineno=1321, col_offset=30)], lineno=1321, col_offset=17)], lineno=1320, col_offset=15), [If(Name('host', Load(), lineno=1322, col_offset=19), [Assign([Name('origurl', Store(), lineno=1323, col_offset=20)], BinOp(BinOp(Str('file://', lineno=1323, col_offset=30), Add(), Name('host', Load(), lineno=1323, col_offset=42), lineno=1323, col_offset=30), Add(), Name('filename', Load(), lineno=1323, col_offset=49), lineno=1323, col_offset=47), lineno=1323, col_offset=20)], [Assign([Name('origurl', Store(), lineno=1325, col_offset=20)], BinOp(Str('file://', lineno=1325, col_offset=30), Add(), Name('filename', Load(), lineno=1325, col_offset=42), lineno=1325, col_offset=30), lineno=1325, col_offset=20)], lineno=1322, col_offset=16), Return(Call(Name('addinfourl', Load(), lineno=1326, col_offset=23), [Call(Name('open', Load(), lineno=1326, col_offset=34), [Name('localfile', Load(), lineno=1326, col_offset=39), Str('rb', lineno=1326, col_offset=50)], [], None, None, lineno=1326, col_offset=34), Name('headers', Load(), lineno=1326, col_offset=57), Name('origurl', Load(), lineno=1326, col_offset=66)], [], None, None, lineno=1326, col_offset=23), lineno=1326, col_offset=16)], [], lineno=1320, col_offset=12)], [ExceptHandler(Name('OSError', Load(), lineno=1327, col_offset=15), Name('msg', Store(), lineno=1327, col_offset=24), [Raise(Call(Name('URLError', Load(), lineno=1329, col_offset=18), [Name('msg', Load(), lineno=1329, col_offset=27)], [], None, None, lineno=1329, col_offset=18), None, None, lineno=1329, col_offset=12)], lineno=1327, col_offset=8)], [], lineno=1310, col_offset=8), Raise(Call(Name('URLError', Load(), lineno=1330, col_offset=14), [Str('file not on local host', lineno=1330, col_offset=23)], [], None, None, lineno=1330, col_offset=14), None, None, lineno=1330, col_offset=8)], [], lineno=1304, col_offset=4)], [], lineno=1280, col_offset=0), ClassDef('FTPHandler', [Name('BaseHandler', Load(), lineno=1332, col_offset=17)], [FunctionDef('ftp_open', arguments([Name('self', Param(), lineno=1333, col_offset=17), Name('req', Param(), lineno=1333, col_offset=23)], None, None, []), [Import([alias('ftplib', None)], lineno=1334, col_offset=8), Import([alias('mimetypes', None)], lineno=1335, col_offset=8), Assign([Name('host', Store(), lineno=1336, col_offset=8)], Call(Attribute(Name('req', Load(), lineno=1336, col_offset=15), 'get_host', Load(), lineno=1336, col_offset=15), [], [], None, None, lineno=1336, col_offset=15), lineno=1336, col_offset=8), If(UnaryOp(Not(), Name('host', Load(), lineno=1337, col_offset=15), lineno=1337, col_offset=11), [Raise(Call(Name('URLError', Load(), lineno=1338, col_offset=18), [Str('ftp error: no host given', lineno=1338, col_offset=27)], [], None, None, lineno=1338, col_offset=18), None, None, lineno=1338, col_offset=12)], [], lineno=1337, col_offset=8), Assign([Tuple([Name('host', Store(), lineno=1339, col_offset=8), Name('port', Store(), lineno=1339, col_offset=14)], Store(), lineno=1339, col_offset=8)], Call(Name('splitport', Load(), lineno=1339, col_offset=21), [Name('host', Load(), lineno=1339, col_offset=31)], [], None, None, lineno=1339, col_offset=21), lineno=1339, col_offset=8), If(Compare(Name('port', Load(), lineno=1340, col_offset=11), [Is()], [Name('None', Load(), lineno=1340, col_offset=19)], lineno=1340, col_offset=11), [Assign([Name('port', Store(), lineno=1341, col_offset=12)], Attribute(Name('ftplib', Load(), lineno=1341, col_offset=19), 'FTP_PORT', Load(), lineno=1341, col_offset=19), lineno=1341, col_offset=12)], [Assign([Name('port', Store(), lineno=1343, col_offset=12)], Call(Name('int', Load(), lineno=1343, col_offset=19), [Name('port', Load(), lineno=1343, col_offset=23)], [], None, None, lineno=1343, col_offset=19), lineno=1343, col_offset=12)], lineno=1340, col_offset=8), Assign([Tuple([Name('user', Store(), lineno=1346, col_offset=8), Name('host', Store(), lineno=1346, col_offset=14)], Store(), lineno=1346, col_offset=8)], Call(Name('splituser', Load(), lineno=1346, col_offset=21), [Name('host', Load(), lineno=1346, col_offset=31)], [], None, None, lineno=1346, col_offset=21), lineno=1346, col_offset=8), If(Name('user', Load(), lineno=1347, col_offset=11), [Assign([Tuple([Name('user', Store(), lineno=1348, col_offset=12), Name('passwd', Store(), lineno=1348, col_offset=18)], Store(), lineno=1348, col_offset=12)], Call(Name('splitpasswd', Load(), lineno=1348, col_offset=27), [Name('user', Load(), lineno=1348, col_offset=39)], [], None, None, lineno=1348, col_offset=27), lineno=1348, col_offset=12)], [Assign([Name('passwd', Store(), lineno=1350, col_offset=12)], Name('None', Load(), lineno=1350, col_offset=21), lineno=1350, col_offset=12)], lineno=1347, col_offset=8), Assign([Name('host', Store(), lineno=1351, col_offset=8)], Call(Name('unquote', Load(), lineno=1351, col_offset=15), [Name('host', Load(), lineno=1351, col_offset=23)], [], None, None, lineno=1351, col_offset=15), lineno=1351, col_offset=8), Assign([Name('user', Store(), lineno=1352, col_offset=8)], BoolOp(Or(), [Name('user', Load(), lineno=1352, col_offset=15), Str('', lineno=1352, col_offset=23)], lineno=1352, col_offset=15), lineno=1352, col_offset=8), Assign([Name('passwd', Store(), lineno=1353, col_offset=8)], BoolOp(Or(), [Name('passwd', Load(), lineno=1353, col_offset=17), Str('', lineno=1353, col_offset=27)], lineno=1353, col_offset=17), lineno=1353, col_offset=8), TryExcept([Assign([Name('host', Store(), lineno=1356, col_offset=12)], Call(Attribute(Name('socket', Load(), lineno=1356, col_offset=19), 'gethostbyname', Load(), lineno=1356, col_offset=19), [Name('host', Load(), lineno=1356, col_offset=40)], [], None, None, lineno=1356, col_offset=19), lineno=1356, col_offset=12)], [ExceptHandler(Attribute(Name('socket', Load(), lineno=1357, col_offset=15), 'error', Load(), lineno=1357, col_offset=15), Name('msg', Store(), lineno=1357, col_offset=29), [Raise(Call(Name('URLError', Load(), lineno=1358, col_offset=18), [Name('msg', Load(), lineno=1358, col_offset=27)], [], None, None, lineno=1358, col_offset=18), None, None, lineno=1358, col_offset=12)], lineno=1357, col_offset=8)], [], lineno=1355, col_offset=8), Assign([Tuple([Name('path', Store(), lineno=1359, col_offset=8), Name('attrs', Store(), lineno=1359, col_offset=14)], Store(), lineno=1359, col_offset=8)], Call(Name('splitattr', Load(), lineno=1359, col_offset=22), [Call(Attribute(Name('req', Load(), lineno=1359, col_offset=32), 'get_selector', Load(), lineno=1359, col_offset=32), [], [], None, None, lineno=1359, col_offset=32)], [], None, None, lineno=1359, col_offset=22), lineno=1359, col_offset=8), Assign([Name('dirs', Store(), lineno=1360, col_offset=8)], Call(Attribute(Name('path', Load(), lineno=1360, col_offset=15), 'split', Load(), lineno=1360, col_offset=15), [Str('/', lineno=1360, col_offset=26)], [], None, None, lineno=1360, col_offset=15), lineno=1360, col_offset=8), Assign([Name('dirs', Store(), lineno=1361, col_offset=8)], Call(Name('map', Load(), lineno=1361, col_offset=15), [Name('unquote', Load(), lineno=1361, col_offset=19), Name('dirs', Load(), lineno=1361, col_offset=28)], [], None, None, lineno=1361, col_offset=15), lineno=1361, col_offset=8), Assign([Tuple([Name('dirs', Store(), lineno=1362, col_offset=8), Name('file', Store(), lineno=1362, col_offset=14)], Store(), lineno=1362, col_offset=8)], Tuple([Subscript(Name('dirs', Load(), lineno=1362, col_offset=21), Slice(None, Num(-1, lineno=1362, col_offset=28), None), Load(), lineno=1362, col_offset=21), Subscript(Name('dirs', Load(), lineno=1362, col_offset=32), Index(Num(-1, lineno=1362, col_offset=38)), Load(), lineno=1362, col_offset=32)], Load(), lineno=1362, col_offset=21), lineno=1362, col_offset=8), If(BoolOp(And(), [Name('dirs', Load(), lineno=1363, col_offset=11), UnaryOp(Not(), Subscript(Name('dirs', Load(), lineno=1363, col_offset=24), Index(Num(0, lineno=1363, col_offset=29)), Load(), lineno=1363, col_offset=24), lineno=1363, col_offset=20)], lineno=1363, col_offset=11), [Assign([Name('dirs', Store(), lineno=1364, col_offset=12)], Subscript(Name('dirs', Load(), lineno=1364, col_offset=19), Slice(Num(1, lineno=1364, col_offset=24), None, None), Load(), lineno=1364, col_offset=19), lineno=1364, col_offset=12)], [], lineno=1363, col_offset=8), TryExcept([Assign([Name('fw', Store(), lineno=1366, col_offset=12)], Call(Attribute(Name('self', Load(), lineno=1366, col_offset=17), 'connect_ftp', Load(), lineno=1366, col_offset=17), [Name('user', Load(), lineno=1366, col_offset=34), Name('passwd', Load(), lineno=1366, col_offset=40), Name('host', Load(), lineno=1366, col_offset=48), Name('port', Load(), lineno=1366, col_offset=54), Name('dirs', Load(), lineno=1366, col_offset=60), Attribute(Name('req', Load(), lineno=1366, col_offset=66), 'timeout', Load(), lineno=1366, col_offset=66)], [], None, None, lineno=1366, col_offset=17), lineno=1366, col_offset=12), Assign([Name('type', Store(), lineno=1367, col_offset=12)], BoolOp(Or(), [BoolOp(And(), [Name('file', Load(), lineno=1367, col_offset=19), Str('I', lineno=1367, col_offset=28)], lineno=1367, col_offset=19), Str('D', lineno=1367, col_offset=35)], lineno=1367, col_offset=19), lineno=1367, col_offset=12), For(Name('attr', Store(), lineno=1368, col_offset=16), Name('attrs', Load(), lineno=1368, col_offset=24), [Assign([Tuple([Name('attr', Store(), lineno=1369, col_offset=16), Name('value', Store(), lineno=1369, col_offset=22)], Store(), lineno=1369, col_offset=16)], Call(Name('splitvalue', Load(), lineno=1369, col_offset=30), [Name('attr', Load(), lineno=1369, col_offset=41)], [], None, None, lineno=1369, col_offset=30), lineno=1369, col_offset=16), If(BoolOp(And(), [Compare(Call(Attribute(Name('attr', Load(), lineno=1370, col_offset=19), 'lower', Load(), lineno=1370, col_offset=19), [], [], None, None, lineno=1370, col_offset=19), [Eq()], [Str('type', lineno=1370, col_offset=35)], lineno=1370, col_offset=19), Compare(Name('value', Load(), lineno=1371, col_offset=19), [In()], [Tuple([Str('a', lineno=1371, col_offset=29), Str('A', lineno=1371, col_offset=34), Str('i', lineno=1371, col_offset=39), Str('I', lineno=1371, col_offset=44), Str('d', lineno=1371, col_offset=49), Str('D', lineno=1371, col_offset=54)], Load(), lineno=1371, col_offset=29)], lineno=1371, col_offset=19)], lineno=1370, col_offset=19), [Assign([Name('type', Store(), lineno=1372, col_offset=20)], Call(Attribute(Name('value', Load(), lineno=1372, col_offset=27), 'upper', Load(), lineno=1372, col_offset=27), [], [], None, None, lineno=1372, col_offset=27), lineno=1372, col_offset=20)], [], lineno=1370, col_offset=16)], [], lineno=1368, col_offset=12), Assign([Tuple([Name('fp', Store(), lineno=1373, col_offset=12), Name('retrlen', Store(), lineno=1373, col_offset=16)], Store(), lineno=1373, col_offset=12)], Call(Attribute(Name('fw', Load(), lineno=1373, col_offset=26), 'retrfile', Load(), lineno=1373, col_offset=26), [Name('file', Load(), lineno=1373, col_offset=38), Name('type', Load(), lineno=1373, col_offset=44)], [], None, None, lineno=1373, col_offset=26), lineno=1373, col_offset=12), Assign([Name('headers', Store(), lineno=1374, col_offset=12)], Str('', lineno=1374, col_offset=22), lineno=1374, col_offset=12), Assign([Name('mtype', Store(), lineno=1375, col_offset=12)], Subscript(Call(Attribute(Name('mimetypes', Load(), lineno=1375, col_offset=20), 'guess_type', Load(), lineno=1375, col_offset=20), [Call(Attribute(Name('req', Load(), lineno=1375, col_offset=41), 'get_full_url', Load(), lineno=1375, col_offset=41), [], [], None, None, lineno=1375, col_offset=41)], [], None, None, lineno=1375, col_offset=20), Index(Num(0, lineno=1375, col_offset=61)), Load(), lineno=1375, col_offset=20), lineno=1375, col_offset=12), If(Name('mtype', Load(), lineno=1376, col_offset=15), [AugAssign(Name('headers', Store(), lineno=1377, col_offset=16), Add(), BinOp(Str('Content-type: %s\n', lineno=1377, col_offset=27), Mod(), Name('mtype', Load(), lineno=1377, col_offset=50), lineno=1377, col_offset=27), lineno=1377, col_offset=16)], [], lineno=1376, col_offset=12), If(BoolOp(And(), [Compare(Name('retrlen', Load(), lineno=1378, col_offset=15), [IsNot()], [Name('None', Load(), lineno=1378, col_offset=30)], lineno=1378, col_offset=15), Compare(Name('retrlen', Load(), lineno=1378, col_offset=39), [GtE()], [Num(0, lineno=1378, col_offset=50)], lineno=1378, col_offset=39)], lineno=1378, col_offset=15), [AugAssign(Name('headers', Store(), lineno=1379, col_offset=16), Add(), BinOp(Str('Content-length: %d\n', lineno=1379, col_offset=27), Mod(), Name('retrlen', Load(), lineno=1379, col_offset=52), lineno=1379, col_offset=27), lineno=1379, col_offset=16)], [], lineno=1378, col_offset=12), Assign([Name('sf', Store(), lineno=1380, col_offset=12)], Call(Name('StringIO', Load(), lineno=1380, col_offset=17), [Name('headers', Load(), lineno=1380, col_offset=26)], [], None, None, lineno=1380, col_offset=17), lineno=1380, col_offset=12), Assign([Name('headers', Store(), lineno=1381, col_offset=12)], Call(Attribute(Name('mimetools', Load(), lineno=1381, col_offset=22), 'Message', Load(), lineno=1381, col_offset=22), [Name('sf', Load(), lineno=1381, col_offset=40)], [], None, None, lineno=1381, col_offset=22), lineno=1381, col_offset=12), Return(Call(Name('addinfourl', Load(), lineno=1382, col_offset=19), [Name('fp', Load(), lineno=1382, col_offset=30), Name('headers', Load(), lineno=1382, col_offset=34), Call(Attribute(Name('req', Load(), lineno=1382, col_offset=43), 'get_full_url', Load(), lineno=1382, col_offset=43), [], [], None, None, lineno=1382, col_offset=43)], [], None, None, lineno=1382, col_offset=19), lineno=1382, col_offset=12)], [ExceptHandler(Attribute(Name('ftplib', Load(), lineno=1383, col_offset=15), 'all_errors', Load(), lineno=1383, col_offset=15), Name('msg', Store(), lineno=1383, col_offset=34), [Raise(Name('URLError', Load(), lineno=1384, col_offset=18), BinOp(Str('ftp error: %s', lineno=1384, col_offset=29), Mod(), Name('msg', Load(), lineno=1384, col_offset=47), lineno=1384, col_offset=29), Subscript(Call(Attribute(Name('sys', Load(), lineno=1384, col_offset=53), 'exc_info', Load(), lineno=1384, col_offset=53), [], [], None, None, lineno=1384, col_offset=53), Index(Num(2, lineno=1384, col_offset=68)), Load(), lineno=1384, col_offset=53), lineno=1384, col_offset=12)], lineno=1383, col_offset=8)], [], lineno=1365, col_offset=8)], [], lineno=1333, col_offset=4), FunctionDef('connect_ftp', arguments([Name('self', Param(), lineno=1386, col_offset=20), Name('user', Param(), lineno=1386, col_offset=26), Name('passwd', Param(), lineno=1386, col_offset=32), Name('host', Param(), lineno=1386, col_offset=40), Name('port', Param(), lineno=1386, col_offset=46), Name('dirs', Param(), lineno=1386, col_offset=52), Name('timeout', Param(), lineno=1386, col_offset=58)], None, None, []), [Assign([Name('fw', Store(), lineno=1387, col_offset=8)], Call(Name('ftpwrapper', Load(), lineno=1387, col_offset=13), [Name('user', Load(), lineno=1387, col_offset=24), Name('passwd', Load(), lineno=1387, col_offset=30), Name('host', Load(), lineno=1387, col_offset=38), Name('port', Load(), lineno=1387, col_offset=44), Name('dirs', Load(), lineno=1387, col_offset=50), Name('timeout', Load(), lineno=1387, col_offset=56)], [], None, None, lineno=1387, col_offset=13), lineno=1387, col_offset=8), Return(Name('fw', Load(), lineno=1389, col_offset=15), lineno=1389, col_offset=8)], [], lineno=1386, col_offset=4)], [], lineno=1332, col_offset=0), ClassDef('CacheFTPHandler', [Name('FTPHandler', Load(), lineno=1391, col_offset=22)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=1394, col_offset=17)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=1395, col_offset=8), 'cache', Store(), lineno=1395, col_offset=8)], Dict([], [], lineno=1395, col_offset=21), lineno=1395, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1396, col_offset=8), 'timeout', Store(), lineno=1396, col_offset=8)], Dict([], [], lineno=1396, col_offset=23), lineno=1396, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1397, col_offset=8), 'soonest', Store(), lineno=1397, col_offset=8)], Num(0, lineno=1397, col_offset=23), lineno=1397, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1398, col_offset=8), 'delay', Store(), lineno=1398, col_offset=8)], Num(60, lineno=1398, col_offset=21), lineno=1398, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1399, col_offset=8), 'max_conns', Store(), lineno=1399, col_offset=8)], Num(16, lineno=1399, col_offset=25), lineno=1399, col_offset=8)], [], lineno=1394, col_offset=4), FunctionDef('setTimeout', arguments([Name('self', Param(), lineno=1401, col_offset=19), Name('t', Param(), lineno=1401, col_offset=25)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=1402, col_offset=8), 'delay', Store(), lineno=1402, col_offset=8)], Name('t', Load(), lineno=1402, col_offset=21), lineno=1402, col_offset=8)], [], lineno=1401, col_offset=4), FunctionDef('setMaxConns', arguments([Name('self', Param(), lineno=1404, col_offset=20), Name('m', Param(), lineno=1404, col_offset=26)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=1405, col_offset=8), 'max_conns', Store(), lineno=1405, col_offset=8)], Name('m', Load(), lineno=1405, col_offset=25), lineno=1405, col_offset=8)], [], lineno=1404, col_offset=4), FunctionDef('connect_ftp', arguments([Name('self', Param(), lineno=1407, col_offset=20), Name('user', Param(), lineno=1407, col_offset=26), Name('passwd', Param(), lineno=1407, col_offset=32), Name('host', Param(), lineno=1407, col_offset=40), Name('port', Param(), lineno=1407, col_offset=46), Name('dirs', Param(), lineno=1407, col_offset=52), Name('timeout', Param(), lineno=1407, col_offset=58)], None, None, []), [Assign([Name('key', Store(), lineno=1408, col_offset=8)], Tuple([Name('user', Load(), lineno=1408, col_offset=14), Name('host', Load(), lineno=1408, col_offset=20), Name('port', Load(), lineno=1408, col_offset=26), Call(Attribute(Str('/', lineno=1408, col_offset=32), 'join', Load(), lineno=1408, col_offset=32), [Name('dirs', Load(), lineno=1408, col_offset=41)], [], None, None, lineno=1408, col_offset=32), Name('timeout', Load(), lineno=1408, col_offset=48)], Load(), lineno=1408, col_offset=14), lineno=1408, col_offset=8), If(Compare(Name('key', Load(), lineno=1409, col_offset=11), [In()], [Attribute(Name('self', Load(), lineno=1409, col_offset=18), 'cache', Load(), lineno=1409, col_offset=18)], lineno=1409, col_offset=11), [Assign([Subscript(Attribute(Name('self', Load(), lineno=1410, col_offset=12), 'timeout', Load(), lineno=1410, col_offset=12), Index(Name('key', Load(), lineno=1410, col_offset=25)), Store(), lineno=1410, col_offset=12)], BinOp(Call(Attribute(Name('time', Load(), lineno=1410, col_offset=32), 'time', Load(), lineno=1410, col_offset=32), [], [], None, None, lineno=1410, col_offset=32), Add(), Attribute(Name('self', Load(), lineno=1410, col_offset=46), 'delay', Load(), lineno=1410, col_offset=46), lineno=1410, col_offset=32), lineno=1410, col_offset=12)], [Assign([Subscript(Attribute(Name('self', Load(), lineno=1412, col_offset=12), 'cache', Load(), lineno=1412, col_offset=12), Index(Name('key', Load(), lineno=1412, col_offset=23)), Store(), lineno=1412, col_offset=12)], Call(Name('ftpwrapper', Load(), lineno=1412, col_offset=30), [Name('user', Load(), lineno=1412, col_offset=41), Name('passwd', Load(), lineno=1412, col_offset=47), Name('host', Load(), lineno=1412, col_offset=55), Name('port', Load(), lineno=1412, col_offset=61), Name('dirs', Load(), lineno=1412, col_offset=67), Name('timeout', Load(), lineno=1412, col_offset=73)], [], None, None, lineno=1412, col_offset=30), lineno=1412, col_offset=12), Assign([Subscript(Attribute(Name('self', Load(), lineno=1413, col_offset=12), 'timeout', Load(), lineno=1413, col_offset=12), Index(Name('key', Load(), lineno=1413, col_offset=25)), Store(), lineno=1413, col_offset=12)], BinOp(Call(Attribute(Name('time', Load(), lineno=1413, col_offset=32), 'time', Load(), lineno=1413, col_offset=32), [], [], None, None, lineno=1413, col_offset=32), Add(), Attribute(Name('self', Load(), lineno=1413, col_offset=46), 'delay', Load(), lineno=1413, col_offset=46), lineno=1413, col_offset=32), lineno=1413, col_offset=12)], lineno=1409, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1414, col_offset=8), 'check_cache', Load(), lineno=1414, col_offset=8), [], [], None, None, lineno=1414, col_offset=8), lineno=1414, col_offset=8), Return(Subscript(Attribute(Name('self', Load(), lineno=1415, col_offset=15), 'cache', Load(), lineno=1415, col_offset=15), Index(Name('key', Load(), lineno=1415, col_offset=26)), Load(), lineno=1415, col_offset=15), lineno=1415, col_offset=8)], [], lineno=1407, col_offset=4), FunctionDef('check_cache', arguments([Name('self', Param(), lineno=1417, col_offset=20)], None, None, []), [Assign([Name('t', Store(), lineno=1419, col_offset=8)], Call(Attribute(Name('time', Load(), lineno=1419, col_offset=12), 'time', Load(), lineno=1419, col_offset=12), [], [], None, None, lineno=1419, col_offset=12), lineno=1419, col_offset=8), If(Compare(Attribute(Name('self', Load(), lineno=1420, col_offset=11), 'soonest', Load(), lineno=1420, col_offset=11), [LtE()], [Name('t', Load(), lineno=1420, col_offset=27)], lineno=1420, col_offset=11), [For(Tuple([Name('k', Store(), lineno=1421, col_offset=16), Name('v', Store(), lineno=1421, col_offset=19)], Store(), lineno=1421, col_offset=16), Call(Attribute(Attribute(Name('self', Load(), lineno=1421, col_offset=24), 'timeout', Load(), lineno=1421, col_offset=24), 'items', Load(), lineno=1421, col_offset=24), [], [], None, None, lineno=1421, col_offset=24), [If(Compare(Name('v', Load(), lineno=1422, col_offset=19), [Lt()], [Name('t', Load(), lineno=1422, col_offset=23)], lineno=1422, col_offset=19), [Expr(Call(Attribute(Subscript(Attribute(Name('self', Load(), lineno=1423, col_offset=20), 'cache', Load(), lineno=1423, col_offset=20), Index(Name('k', Load(), lineno=1423, col_offset=31)), Load(), lineno=1423, col_offset=20), 'close', Load(), lineno=1423, col_offset=20), [], [], None, None, lineno=1423, col_offset=20), lineno=1423, col_offset=20), Delete([Subscript(Attribute(Name('self', Load(), lineno=1424, col_offset=24), 'cache', Load(), lineno=1424, col_offset=24), Index(Name('k', Load(), lineno=1424, col_offset=35)), Del(), lineno=1424, col_offset=24)], lineno=1424, col_offset=20), Delete([Subscript(Attribute(Name('self', Load(), lineno=1425, col_offset=24), 'timeout', Load(), lineno=1425, col_offset=24), Index(Name('k', Load(), lineno=1425, col_offset=37)), Del(), lineno=1425, col_offset=24)], lineno=1425, col_offset=20)], [], lineno=1422, col_offset=16)], [], lineno=1421, col_offset=12)], [], lineno=1420, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1426, col_offset=8), 'soonest', Store(), lineno=1426, col_offset=8)], Call(Name('min', Load(), lineno=1426, col_offset=23), [Call(Attribute(Attribute(Name('self', Load(), lineno=1426, col_offset=27), 'timeout', Load(), lineno=1426, col_offset=27), 'values', Load(), lineno=1426, col_offset=27), [], [], None, None, lineno=1426, col_offset=27)], [], None, None, lineno=1426, col_offset=23), lineno=1426, col_offset=8), If(Compare(Call(Name('len', Load(), lineno=1429, col_offset=11), [Attribute(Name('self', Load(), lineno=1429, col_offset=15), 'cache', Load(), lineno=1429, col_offset=15)], [], None, None, lineno=1429, col_offset=11), [Eq()], [Attribute(Name('self', Load(), lineno=1429, col_offset=30), 'max_conns', Load(), lineno=1429, col_offset=30)], lineno=1429, col_offset=11), [For(Tuple([Name('k', Store(), lineno=1430, col_offset=16), Name('v', Store(), lineno=1430, col_offset=19)], Store(), lineno=1430, col_offset=16), Call(Attribute(Attribute(Name('self', Load(), lineno=1430, col_offset=24), 'timeout', Load(), lineno=1430, col_offset=24), 'items', Load(), lineno=1430, col_offset=24), [], [], None, None, lineno=1430, col_offset=24), [If(Compare(Name('v', Load(), lineno=1431, col_offset=19), [Eq()], [Attribute(Name('self', Load(), lineno=1431, col_offset=24), 'soonest', Load(), lineno=1431, col_offset=24)], lineno=1431, col_offset=19), [Delete([Subscript(Attribute(Name('self', Load(), lineno=1432, col_offset=24), 'cache', Load(), lineno=1432, col_offset=24), Index(Name('k', Load(), lineno=1432, col_offset=35)), Del(), lineno=1432, col_offset=24)], lineno=1432, col_offset=20), Delete([Subscript(Attribute(Name('self', Load(), lineno=1433, col_offset=24), 'timeout', Load(), lineno=1433, col_offset=24), Index(Name('k', Load(), lineno=1433, col_offset=37)), Del(), lineno=1433, col_offset=24)], lineno=1433, col_offset=20), Break( lineno=1434, col_offset=20)], [], lineno=1431, col_offset=16)], [], lineno=1430, col_offset=12), Assign([Attribute(Name('self', Load(), lineno=1435, col_offset=12), 'soonest', Store(), lineno=1435, col_offset=12)], Call(Name('min', Load(), lineno=1435, col_offset=27), [Call(Attribute(Attribute(Name('self', Load(), lineno=1435, col_offset=31), 'timeout', Load(), lineno=1435, col_offset=31), 'values', Load(), lineno=1435, col_offset=31), [], [], None, None, lineno=1435, col_offset=31)], [], None, None, lineno=1435, col_offset=27), lineno=1435, col_offset=12)], [], lineno=1429, col_offset=8)], [], lineno=1417, col_offset=4)], [], lineno=1391, col_offset=0)])
