Module([Expr(Str('Manage shelves of pickled objects.\n\nA "shelf" is a persistent, dictionary-like object.  The difference\nwith dbm databases is that the values (not the keys!) in a shelf can\nbe essentially arbitrary Python objects -- anything that the "pickle"\nmodule can handle.  This includes most class instances, recursive data\ntypes, and objects containing lots of shared sub-objects.  The keys\nare ordinary strings.\n\nTo summarize the interface (key is a string, data is an arbitrary\nobject):\n\n        import shelve\n        d = shelve.open(filename) # open, with (g)dbm filename -- no suffix\n\n        d[key] = data   # store data at key (overwrites old data if\n                        # using an existing key)\n        data = d[key]   # retrieve a COPY of the data at key (raise\n                        # KeyError if no such key) -- NOTE that this\n                        # access returns a *copy* of the entry!\n        del d[key]      # delete data stored at key (raises KeyError\n                        # if no such key)\n        flag = d.has_key(key)   # true if the key exists; same as "key in d"\n        list = d.keys() # a list of all existing keys (slow!)\n\n        d.close()       # close it\n\nDependent on the implementation, closing a persistent dictionary may\nor may not be necessary to flush changes to disk.\n\nNormally, d[key] returns a COPY of the entry.  This needs care when\nmutable entries are mutated: for example, if d[key] is a list,\n        d[key].append(anitem)\ndoes NOT modify the entry d[key] itself, as stored in the persistent\nmapping -- it only modifies the copy, which is then immediately\ndiscarded, so that the append has NO effect whatsoever.  To append an\nitem to d[key] in a way that will affect the persistent mapping, use:\n        data = d[key]\n        data.append(anitem)\n        d[key] = data\n\nTo avoid the problem with mutable entries, you may pass the keyword\nargument writeback=True in the call to shelve.open.  When you use:\n        d = shelve.open(filename, writeback=True)\nthen d keeps a cache of all entries you access, and writes them all back\nto the persistent mapping when you call d.close().  This ensures that\nsuch usage as d[key].append(anitem) works as intended.\n\nHowever, using keyword argument writeback=True may consume vast amount\nof memory for the cache, and it may make d.close() very slow, if you\naccess many of d\'s entries after opening it in this way: d has no way to\ncheck which of the entries you access are mutable and/or which ones you\nactually mutate, so it must cache, and write back at close, all of the\nentries that you access.  You can call d.sync() to write back all the\nentries in the cache, and empty the cache (d.sync() also synchronizes\nthe persistent dictionary on disk, if feasible).\n', lineno=57, col_offset=-1), lineno=57, col_offset=-1), TryExcept([ImportFrom('cPickle', [alias('Pickler', None), alias('Unpickler', None)], 0, lineno=62, col_offset=4)], [ExceptHandler(Name('ImportError', Load(), lineno=63, col_offset=7), None, [ImportFrom('pickle', [alias('Pickler', None), alias('Unpickler', None)], 0, lineno=64, col_offset=4)], lineno=63, col_offset=0)], [], lineno=61, col_offset=0), TryExcept([ImportFrom('cStringIO', [alias('StringIO', None)], 0, lineno=67, col_offset=4)], [ExceptHandler(Name('ImportError', Load(), lineno=68, col_offset=7), None, [ImportFrom('StringIO', [alias('StringIO', None)], 0, lineno=69, col_offset=4)], lineno=68, col_offset=0)], [], lineno=66, col_offset=0), Import([alias('UserDict', None)], lineno=71, col_offset=0), Assign([Name('__all__', Store(), lineno=73, col_offset=0)], List([Str('Shelf', lineno=73, col_offset=11), Str('BsdDbShelf', lineno=73, col_offset=19), Str('DbfilenameShelf', lineno=73, col_offset=32), Str('open', lineno=73, col_offset=50)], Load(), lineno=73, col_offset=10), lineno=73, col_offset=0), ClassDef('_ClosedDict', [Attribute(Name('UserDict', Load(), lineno=75, col_offset=18), 'DictMixin', Load(), lineno=75, col_offset=18)], [Expr(Str('Marker for a closed dict.  Access attempts raise a ValueError.', lineno=76, col_offset=4), lineno=76, col_offset=4), FunctionDef('closed', arguments([Name('self', Param(), lineno=78, col_offset=15)], 'args', None, []), [Raise(Call(Name('ValueError', Load(), lineno=79, col_offset=14), [Str('invalid operation on closed shelf', lineno=79, col_offset=25)], [], None, None, lineno=79, col_offset=14), None, None, lineno=79, col_offset=8)], [], lineno=78, col_offset=4), Assign([Name('__getitem__', Store(), lineno=80, col_offset=4), Name('__setitem__', Store(), lineno=80, col_offset=18), Name('__delitem__', Store(), lineno=80, col_offset=32), Name('keys', Store(), lineno=80, col_offset=46)], Name('closed', Load(), lineno=80, col_offset=53), lineno=80, col_offset=4), FunctionDef('__repr__', arguments([Name('self', Param(), lineno=82, col_offset=17)], None, None, []), [Return(Str('<Closed Dictionary>', lineno=83, col_offset=15), lineno=83, col_offset=8)], [], lineno=82, col_offset=4)], [], lineno=75, col_offset=0), ClassDef('Shelf', [Attribute(Name('UserDict', Load(), lineno=85, col_offset=12), 'DictMixin', Load(), lineno=85, col_offset=12)], [Expr(Str("Base class for shelf implementations.\n\n    This is initialized with a dictionary-like object.\n    See the module's __doc__ string for an overview of the interface.\n    ", lineno=90, col_offset=-1), lineno=90, col_offset=-1), FunctionDef('__init__', arguments([Name('self', Param(), lineno=92, col_offset=17), Name('dict', Param(), lineno=92, col_offset=23), Name('protocol', Param(), lineno=92, col_offset=29), Name('writeback', Param(), lineno=92, col_offset=44)], None, None, [Name('None', Load(), lineno=92, col_offset=38), Name('False', Load(), lineno=92, col_offset=54)]), [Assign([Attribute(Name('self', Load(), lineno=93, col_offset=8), 'dict', Store(), lineno=93, col_offset=8)], Name('dict', Load(), lineno=93, col_offset=20), lineno=93, col_offset=8), If(Compare(Name('protocol', Load(), lineno=94, col_offset=11), [Is()], [Name('None', Load(), lineno=94, col_offset=23)], lineno=94, col_offset=11), [Assign([Name('protocol', Store(), lineno=95, col_offset=12)], Num(0, lineno=95, col_offset=23), lineno=95, col_offset=12)], [], lineno=94, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=96, col_offset=8), '_protocol', Store(), lineno=96, col_offset=8)], Name('protocol', Load(), lineno=96, col_offset=25), lineno=96, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=97, col_offset=8), 'writeback', Store(), lineno=97, col_offset=8)], Name('writeback', Load(), lineno=97, col_offset=25), lineno=97, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=98, col_offset=8), 'cache', Store(), lineno=98, col_offset=8)], Dict([], [], lineno=98, col_offset=21), lineno=98, col_offset=8)], [], lineno=92, col_offset=4), FunctionDef('keys', arguments([Name('self', Param(), lineno=100, col_offset=13)], None, None, []), [Return(Call(Attribute(Attribute(Name('self', Load(), lineno=101, col_offset=15), 'dict', Load(), lineno=101, col_offset=15), 'keys', Load(), lineno=101, col_offset=15), [], [], None, None, lineno=101, col_offset=15), lineno=101, col_offset=8)], [], lineno=100, col_offset=4), FunctionDef('__len__', arguments([Name('self', Param(), lineno=103, col_offset=16)], None, None, []), [Return(Call(Name('len', Load(), lineno=104, col_offset=15), [Attribute(Name('self', Load(), lineno=104, col_offset=19), 'dict', Load(), lineno=104, col_offset=19)], [], None, None, lineno=104, col_offset=15), lineno=104, col_offset=8)], [], lineno=103, col_offset=4), FunctionDef('has_key', arguments([Name('self', Param(), lineno=106, col_offset=16), Name('key', Param(), lineno=106, col_offset=22)], None, None, []), [Return(Compare(Name('key', Load(), lineno=107, col_offset=15), [In()], [Attribute(Name('self', Load(), lineno=107, col_offset=22), 'dict', Load(), lineno=107, col_offset=22)], lineno=107, col_offset=15), lineno=107, col_offset=8)], [], lineno=106, col_offset=4), FunctionDef('__contains__', arguments([Name('self', Param(), lineno=109, col_offset=21), Name('key', Param(), lineno=109, col_offset=27)], None, None, []), [Return(Compare(Name('key', Load(), lineno=110, col_offset=15), [In()], [Attribute(Name('self', Load(), lineno=110, col_offset=22), 'dict', Load(), lineno=110, col_offset=22)], lineno=110, col_offset=15), lineno=110, col_offset=8)], [], lineno=109, col_offset=4), FunctionDef('get', arguments([Name('self', Param(), lineno=112, col_offset=12), Name('key', Param(), lineno=112, col_offset=18), Name('default', Param(), lineno=112, col_offset=23)], None, None, [Name('None', Load(), lineno=112, col_offset=31)]), [If(Compare(Name('key', Load(), lineno=113, col_offset=11), [In()], [Attribute(Name('self', Load(), lineno=113, col_offset=18), 'dict', Load(), lineno=113, col_offset=18)], lineno=113, col_offset=11), [Return(Subscript(Name('self', Load(), lineno=114, col_offset=19), Index(Name('key', Load(), lineno=114, col_offset=24)), Load(), lineno=114, col_offset=19), lineno=114, col_offset=12)], [], lineno=113, col_offset=8), Return(Name('default', Load(), lineno=115, col_offset=15), lineno=115, col_offset=8)], [], lineno=112, col_offset=4), FunctionDef('__getitem__', arguments([Name('self', Param(), lineno=117, col_offset=20), Name('key', Param(), lineno=117, col_offset=26)], None, None, []), [TryExcept([Assign([Name('value', Store(), lineno=119, col_offset=12)], Subscript(Attribute(Name('self', Load(), lineno=119, col_offset=20), 'cache', Load(), lineno=119, col_offset=20), Index(Name('key', Load(), lineno=119, col_offset=31)), Load(), lineno=119, col_offset=20), lineno=119, col_offset=12)], [ExceptHandler(Name('KeyError', Load(), lineno=120, col_offset=15), None, [Assign([Name('f', Store(), lineno=121, col_offset=12)], Call(Name('StringIO', Load(), lineno=121, col_offset=16), [Subscript(Attribute(Name('self', Load(), lineno=121, col_offset=25), 'dict', Load(), lineno=121, col_offset=25), Index(Name('key', Load(), lineno=121, col_offset=35)), Load(), lineno=121, col_offset=25)], [], None, None, lineno=121, col_offset=16), lineno=121, col_offset=12), Assign([Name('value', Store(), lineno=122, col_offset=12)], Call(Attribute(Call(Name('Unpickler', Load(), lineno=122, col_offset=20), [Name('f', Load(), lineno=122, col_offset=30)], [], None, None, lineno=122, col_offset=20), 'load', Load(), lineno=122, col_offset=20), [], [], None, None, lineno=122, col_offset=20), lineno=122, col_offset=12), If(Attribute(Name('self', Load(), lineno=123, col_offset=15), 'writeback', Load(), lineno=123, col_offset=15), [Assign([Subscript(Attribute(Name('self', Load(), lineno=124, col_offset=16), 'cache', Load(), lineno=124, col_offset=16), Index(Name('key', Load(), lineno=124, col_offset=27)), Store(), lineno=124, col_offset=16)], Name('value', Load(), lineno=124, col_offset=34), lineno=124, col_offset=16)], [], lineno=123, col_offset=12)], lineno=120, col_offset=8)], [], lineno=118, col_offset=8), Return(Name('value', Load(), lineno=125, col_offset=15), lineno=125, col_offset=8)], [], lineno=117, col_offset=4), FunctionDef('__setitem__', arguments([Name('self', Param(), lineno=127, col_offset=20), Name('key', Param(), lineno=127, col_offset=26), Name('value', Param(), lineno=127, col_offset=31)], None, None, []), [If(Attribute(Name('self', Load(), lineno=128, col_offset=11), 'writeback', Load(), lineno=128, col_offset=11), [Assign([Subscript(Attribute(Name('self', Load(), lineno=129, col_offset=12), 'cache', Load(), lineno=129, col_offset=12), Index(Name('key', Load(), lineno=129, col_offset=23)), Store(), lineno=129, col_offset=12)], Name('value', Load(), lineno=129, col_offset=30), lineno=129, col_offset=12)], [], lineno=128, col_offset=8), Assign([Name('f', Store(), lineno=130, col_offset=8)], Call(Name('StringIO', Load(), lineno=130, col_offset=12), [], [], None, None, lineno=130, col_offset=12), lineno=130, col_offset=8), Assign([Name('p', Store(), lineno=131, col_offset=8)], Call(Name('Pickler', Load(), lineno=131, col_offset=12), [Name('f', Load(), lineno=131, col_offset=20), Attribute(Name('self', Load(), lineno=131, col_offset=23), '_protocol', Load(), lineno=131, col_offset=23)], [], None, None, lineno=131, col_offset=12), lineno=131, col_offset=8), Expr(Call(Attribute(Name('p', Load(), lineno=132, col_offset=8), 'dump', Load(), lineno=132, col_offset=8), [Name('value', Load(), lineno=132, col_offset=15)], [], None, None, lineno=132, col_offset=8), lineno=132, col_offset=8), Assign([Subscript(Attribute(Name('self', Load(), lineno=133, col_offset=8), 'dict', Load(), lineno=133, col_offset=8), Index(Name('key', Load(), lineno=133, col_offset=18)), Store(), lineno=133, col_offset=8)], Call(Attribute(Name('f', Load(), lineno=133, col_offset=25), 'getvalue', Load(), lineno=133, col_offset=25), [], [], None, None, lineno=133, col_offset=25), lineno=133, col_offset=8)], [], lineno=127, col_offset=4), FunctionDef('__delitem__', arguments([Name('self', Param(), lineno=135, col_offset=20), Name('key', Param(), lineno=135, col_offset=26)], None, None, []), [Delete([Subscript(Attribute(Name('self', Load(), lineno=136, col_offset=12), 'dict', Load(), lineno=136, col_offset=12), Index(Name('key', Load(), lineno=136, col_offset=22)), Del(), lineno=136, col_offset=12)], lineno=136, col_offset=8), TryExcept([Delete([Subscript(Attribute(Name('self', Load(), lineno=138, col_offset=16), 'cache', Load(), lineno=138, col_offset=16), Index(Name('key', Load(), lineno=138, col_offset=27)), Del(), lineno=138, col_offset=16)], lineno=138, col_offset=12)], [ExceptHandler(Name('KeyError', Load(), lineno=139, col_offset=15), None, [Pass( lineno=140, col_offset=12)], lineno=139, col_offset=8)], [], lineno=137, col_offset=8)], [], lineno=135, col_offset=4), FunctionDef('close', arguments([Name('self', Param(), lineno=142, col_offset=14)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=143, col_offset=8), 'sync', Load(), lineno=143, col_offset=8), [], [], None, None, lineno=143, col_offset=8), lineno=143, col_offset=8), TryExcept([Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=145, col_offset=12), 'dict', Load(), lineno=145, col_offset=12), 'close', Load(), lineno=145, col_offset=12), [], [], None, None, lineno=145, col_offset=12), lineno=145, col_offset=12)], [ExceptHandler(Name('AttributeError', Load(), lineno=146, col_offset=15), None, [Pass( lineno=147, col_offset=12)], lineno=146, col_offset=8)], [], lineno=144, col_offset=8), TryExcept([Assign([Attribute(Name('self', Load(), lineno=151, col_offset=12), 'dict', Store(), lineno=151, col_offset=12)], Call(Name('_ClosedDict', Load(), lineno=151, col_offset=24), [], [], None, None, lineno=151, col_offset=24), lineno=151, col_offset=12)], [ExceptHandler(Tuple([Name('NameError', Load(), lineno=152, col_offset=16), Name('TypeError', Load(), lineno=152, col_offset=27)], Load(), lineno=152, col_offset=16), None, [Assign([Attribute(Name('self', Load(), lineno=153, col_offset=12), 'dict', Store(), lineno=153, col_offset=12)], Name('None', Load(), lineno=153, col_offset=24), lineno=153, col_offset=12)], lineno=152, col_offset=8)], [], lineno=150, col_offset=8)], [], lineno=142, col_offset=4), FunctionDef('__del__', arguments([Name('self', Param(), lineno=155, col_offset=16)], None, None, []), [If(UnaryOp(Not(), Call(Name('hasattr', Load(), lineno=156, col_offset=15), [Name('self', Load(), lineno=156, col_offset=23), Str('writeback', lineno=156, col_offset=29)], [], None, None, lineno=156, col_offset=15), lineno=156, col_offset=11), [Return(None, lineno=158, col_offset=12)], [], lineno=156, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=159, col_offset=8), 'close', Load(), lineno=159, col_offset=8), [], [], None, None, lineno=159, col_offset=8), lineno=159, col_offset=8)], [], lineno=155, col_offset=4), FunctionDef('sync', arguments([Name('self', Param(), lineno=161, col_offset=13)], None, None, []), [If(BoolOp(And(), [Attribute(Name('self', Load(), lineno=162, col_offset=11), 'writeback', Load(), lineno=162, col_offset=11), Attribute(Name('self', Load(), lineno=162, col_offset=30), 'cache', Load(), lineno=162, col_offset=30)], lineno=162, col_offset=11), [Assign([Attribute(Name('self', Load(), lineno=163, col_offset=12), 'writeback', Store(), lineno=163, col_offset=12)], Name('False', Load(), lineno=163, col_offset=29), lineno=163, col_offset=12), For(Tuple([Name('key', Store(), lineno=164, col_offset=16), Name('entry', Store(), lineno=164, col_offset=21)], Store(), lineno=164, col_offset=16), Call(Attribute(Attribute(Name('self', Load(), lineno=164, col_offset=30), 'cache', Load(), lineno=164, col_offset=30), 'iteritems', Load(), lineno=164, col_offset=30), [], [], None, None, lineno=164, col_offset=30), [Assign([Subscript(Name('self', Load(), lineno=165, col_offset=16), Index(Name('key', Load(), lineno=165, col_offset=21)), Store(), lineno=165, col_offset=16)], Name('entry', Load(), lineno=165, col_offset=28), lineno=165, col_offset=16)], [], lineno=164, col_offset=12), Assign([Attribute(Name('self', Load(), lineno=166, col_offset=12), 'writeback', Store(), lineno=166, col_offset=12)], Name('True', Load(), lineno=166, col_offset=29), lineno=166, col_offset=12), Assign([Attribute(Name('self', Load(), lineno=167, col_offset=12), 'cache', Store(), lineno=167, col_offset=12)], Dict([], [], lineno=167, col_offset=25), lineno=167, col_offset=12)], [], lineno=162, col_offset=8), If(Call(Name('hasattr', Load(), lineno=168, col_offset=11), [Attribute(Name('self', Load(), lineno=168, col_offset=19), 'dict', Load(), lineno=168, col_offset=19), Str('sync', lineno=168, col_offset=30)], [], None, None, lineno=168, col_offset=11), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=169, col_offset=12), 'dict', Load(), lineno=169, col_offset=12), 'sync', Load(), lineno=169, col_offset=12), [], [], None, None, lineno=169, col_offset=12), lineno=169, col_offset=12)], [], lineno=168, col_offset=8)], [], lineno=161, col_offset=4)], [], lineno=85, col_offset=0), ClassDef('BsdDbShelf', [Name('Shelf', Load(), lineno=172, col_offset=17)], [Expr(Str('Shelf implementation using the "BSD" db interface.\n\n    This adds methods first(), next(), previous(), last() and\n    set_location() that have no counterpart in [g]dbm databases.\n\n    The actual database must be opened using one of the "bsddb"\n    modules "open" routines (i.e. bsddb.hashopen, bsddb.btopen or\n    bsddb.rnopen) and passed to the constructor.\n\n    See the module\'s __doc__ string for an overview of the interface.\n    ', lineno=183, col_offset=-1), lineno=183, col_offset=-1), FunctionDef('__init__', arguments([Name('self', Param(), lineno=185, col_offset=17), Name('dict', Param(), lineno=185, col_offset=23), Name('protocol', Param(), lineno=185, col_offset=29), Name('writeback', Param(), lineno=185, col_offset=44)], None, None, [Name('None', Load(), lineno=185, col_offset=38), Name('False', Load(), lineno=185, col_offset=54)]), [Expr(Call(Attribute(Name('Shelf', Load(), lineno=186, col_offset=8), '__init__', Load(), lineno=186, col_offset=8), [Name('self', Load(), lineno=186, col_offset=23), Name('dict', Load(), lineno=186, col_offset=29), Name('protocol', Load(), lineno=186, col_offset=35), Name('writeback', Load(), lineno=186, col_offset=45)], [], None, None, lineno=186, col_offset=8), lineno=186, col_offset=8)], [], lineno=185, col_offset=4), FunctionDef('set_location', arguments([Name('self', Param(), lineno=188, col_offset=21), Name('key', Param(), lineno=188, col_offset=27)], None, None, []), [Assign([Tuple([Name('key', Store(), lineno=189, col_offset=9), Name('value', Store(), lineno=189, col_offset=14)], Store(), lineno=189, col_offset=9)], Call(Attribute(Attribute(Name('self', Load(), lineno=189, col_offset=23), 'dict', Load(), lineno=189, col_offset=23), 'set_location', Load(), lineno=189, col_offset=23), [Name('key', Load(), lineno=189, col_offset=46)], [], None, None, lineno=189, col_offset=23), lineno=189, col_offset=8), Assign([Name('f', Store(), lineno=190, col_offset=8)], Call(Name('StringIO', Load(), lineno=190, col_offset=12), [Name('value', Load(), lineno=190, col_offset=21)], [], None, None, lineno=190, col_offset=12), lineno=190, col_offset=8), Return(Tuple([Name('key', Load(), lineno=191, col_offset=16), Call(Attribute(Call(Name('Unpickler', Load(), lineno=191, col_offset=21), [Name('f', Load(), lineno=191, col_offset=31)], [], None, None, lineno=191, col_offset=21), 'load', Load(), lineno=191, col_offset=21), [], [], None, None, lineno=191, col_offset=21)], Load(), lineno=191, col_offset=16), lineno=191, col_offset=8)], [], lineno=188, col_offset=4), FunctionDef('next', arguments([Name('self', Param(), lineno=193, col_offset=13)], None, None, []), [Assign([Tuple([Name('key', Store(), lineno=194, col_offset=9), Name('value', Store(), lineno=194, col_offset=14)], Store(), lineno=194, col_offset=9)], Call(Attribute(Attribute(Name('self', Load(), lineno=194, col_offset=23), 'dict', Load(), lineno=194, col_offset=23), 'next', Load(), lineno=194, col_offset=23), [], [], None, None, lineno=194, col_offset=23), lineno=194, col_offset=8), Assign([Name('f', Store(), lineno=195, col_offset=8)], Call(Name('StringIO', Load(), lineno=195, col_offset=12), [Name('value', Load(), lineno=195, col_offset=21)], [], None, None, lineno=195, col_offset=12), lineno=195, col_offset=8), Return(Tuple([Name('key', Load(), lineno=196, col_offset=16), Call(Attribute(Call(Name('Unpickler', Load(), lineno=196, col_offset=21), [Name('f', Load(), lineno=196, col_offset=31)], [], None, None, lineno=196, col_offset=21), 'load', Load(), lineno=196, col_offset=21), [], [], None, None, lineno=196, col_offset=21)], Load(), lineno=196, col_offset=16), lineno=196, col_offset=8)], [], lineno=193, col_offset=4), FunctionDef('previous', arguments([Name('self', Param(), lineno=198, col_offset=17)], None, None, []), [Assign([Tuple([Name('key', Store(), lineno=199, col_offset=9), Name('value', Store(), lineno=199, col_offset=14)], Store(), lineno=199, col_offset=9)], Call(Attribute(Attribute(Name('self', Load(), lineno=199, col_offset=23), 'dict', Load(), lineno=199, col_offset=23), 'previous', Load(), lineno=199, col_offset=23), [], [], None, None, lineno=199, col_offset=23), lineno=199, col_offset=8), Assign([Name('f', Store(), lineno=200, col_offset=8)], Call(Name('StringIO', Load(), lineno=200, col_offset=12), [Name('value', Load(), lineno=200, col_offset=21)], [], None, None, lineno=200, col_offset=12), lineno=200, col_offset=8), Return(Tuple([Name('key', Load(), lineno=201, col_offset=16), Call(Attribute(Call(Name('Unpickler', Load(), lineno=201, col_offset=21), [Name('f', Load(), lineno=201, col_offset=31)], [], None, None, lineno=201, col_offset=21), 'load', Load(), lineno=201, col_offset=21), [], [], None, None, lineno=201, col_offset=21)], Load(), lineno=201, col_offset=16), lineno=201, col_offset=8)], [], lineno=198, col_offset=4), FunctionDef('first', arguments([Name('self', Param(), lineno=203, col_offset=14)], None, None, []), [Assign([Tuple([Name('key', Store(), lineno=204, col_offset=9), Name('value', Store(), lineno=204, col_offset=14)], Store(), lineno=204, col_offset=9)], Call(Attribute(Attribute(Name('self', Load(), lineno=204, col_offset=23), 'dict', Load(), lineno=204, col_offset=23), 'first', Load(), lineno=204, col_offset=23), [], [], None, None, lineno=204, col_offset=23), lineno=204, col_offset=8), Assign([Name('f', Store(), lineno=205, col_offset=8)], Call(Name('StringIO', Load(), lineno=205, col_offset=12), [Name('value', Load(), lineno=205, col_offset=21)], [], None, None, lineno=205, col_offset=12), lineno=205, col_offset=8), Return(Tuple([Name('key', Load(), lineno=206, col_offset=16), Call(Attribute(Call(Name('Unpickler', Load(), lineno=206, col_offset=21), [Name('f', Load(), lineno=206, col_offset=31)], [], None, None, lineno=206, col_offset=21), 'load', Load(), lineno=206, col_offset=21), [], [], None, None, lineno=206, col_offset=21)], Load(), lineno=206, col_offset=16), lineno=206, col_offset=8)], [], lineno=203, col_offset=4), FunctionDef('last', arguments([Name('self', Param(), lineno=208, col_offset=13)], None, None, []), [Assign([Tuple([Name('key', Store(), lineno=209, col_offset=9), Name('value', Store(), lineno=209, col_offset=14)], Store(), lineno=209, col_offset=9)], Call(Attribute(Attribute(Name('self', Load(), lineno=209, col_offset=23), 'dict', Load(), lineno=209, col_offset=23), 'last', Load(), lineno=209, col_offset=23), [], [], None, None, lineno=209, col_offset=23), lineno=209, col_offset=8), Assign([Name('f', Store(), lineno=210, col_offset=8)], Call(Name('StringIO', Load(), lineno=210, col_offset=12), [Name('value', Load(), lineno=210, col_offset=21)], [], None, None, lineno=210, col_offset=12), lineno=210, col_offset=8), Return(Tuple([Name('key', Load(), lineno=211, col_offset=16), Call(Attribute(Call(Name('Unpickler', Load(), lineno=211, col_offset=21), [Name('f', Load(), lineno=211, col_offset=31)], [], None, None, lineno=211, col_offset=21), 'load', Load(), lineno=211, col_offset=21), [], [], None, None, lineno=211, col_offset=21)], Load(), lineno=211, col_offset=16), lineno=211, col_offset=8)], [], lineno=208, col_offset=4)], [], lineno=172, col_offset=0), ClassDef('DbfilenameShelf', [Name('Shelf', Load(), lineno=214, col_offset=22)], [Expr(Str('Shelf implementation using the "anydbm" generic dbm interface.\n\n    This is initialized with the filename for the dbm database.\n    See the module\'s __doc__ string for an overview of the interface.\n    ', lineno=219, col_offset=-1), lineno=219, col_offset=-1), FunctionDef('__init__', arguments([Name('self', Param(), lineno=221, col_offset=17), Name('filename', Param(), lineno=221, col_offset=23), Name('flag', Param(), lineno=221, col_offset=33), Name('protocol', Param(), lineno=221, col_offset=43), Name('writeback', Param(), lineno=221, col_offset=58)], None, None, [Str('c', lineno=221, col_offset=38), Name('None', Load(), lineno=221, col_offset=52), Name('False', Load(), lineno=221, col_offset=68)]), [Import([alias('anydbm', None)], lineno=222, col_offset=8), Expr(Call(Attribute(Name('Shelf', Load(), lineno=223, col_offset=8), '__init__', Load(), lineno=223, col_offset=8), [Name('self', Load(), lineno=223, col_offset=23), Call(Attribute(Name('anydbm', Load(), lineno=223, col_offset=29), 'open', Load(), lineno=223, col_offset=29), [Name('filename', Load(), lineno=223, col_offset=41), Name('flag', Load(), lineno=223, col_offset=51)], [], None, None, lineno=223, col_offset=29), Name('protocol', Load(), lineno=223, col_offset=58), Name('writeback', Load(), lineno=223, col_offset=68)], [], None, None, lineno=223, col_offset=8), lineno=223, col_offset=8)], [], lineno=221, col_offset=4)], [], lineno=214, col_offset=0), FunctionDef('open', arguments([Name('filename', Param(), lineno=226, col_offset=9), Name('flag', Param(), lineno=226, col_offset=19), Name('protocol', Param(), lineno=226, col_offset=29), Name('writeback', Param(), lineno=226, col_offset=44)], None, None, [Str('c', lineno=226, col_offset=24), Name('None', Load(), lineno=226, col_offset=38), Name('False', Load(), lineno=226, col_offset=54)]), [Expr(Str("Open a persistent dictionary for reading and writing.\n\n    The filename parameter is the base filename for the underlying\n    database.  As a side-effect, an extension may be added to the\n    filename and more than one file may be created.  The optional flag\n    parameter has the same interpretation as the flag parameter of\n    anydbm.open(). The optional protocol parameter specifies the\n    version of the pickle protocol (0, 1, or 2).\n\n    See the module's __doc__ string for an overview of the interface.\n    ", lineno=237, col_offset=-1), lineno=237, col_offset=-1), Return(Call(Name('DbfilenameShelf', Load(), lineno=239, col_offset=11), [Name('filename', Load(), lineno=239, col_offset=27), Name('flag', Load(), lineno=239, col_offset=37), Name('protocol', Load(), lineno=239, col_offset=43), Name('writeback', Load(), lineno=239, col_offset=53)], [], None, None, lineno=239, col_offset=11), lineno=239, col_offset=4)], [], lineno=226, col_offset=0)])
