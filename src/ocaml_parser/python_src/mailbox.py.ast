Module([Expr(Str('Read/write support for Maildir, mbox, MH, Babyl, and MMDF mailboxes.', lineno=3, col_offset=0), lineno=3, col_offset=0), Import([alias('sys', None)], lineno=11, col_offset=0), Import([alias('os', None)], lineno=12, col_offset=0), Import([alias('time', None)], lineno=13, col_offset=0), Import([alias('calendar', None)], lineno=14, col_offset=0), Import([alias('socket', None)], lineno=15, col_offset=0), Import([alias('errno', None)], lineno=16, col_offset=0), Import([alias('copy', None)], lineno=17, col_offset=0), Import([alias('email', None)], lineno=18, col_offset=0), Import([alias('email.message', None)], lineno=19, col_offset=0), Import([alias('email.generator', None)], lineno=20, col_offset=0), Import([alias('StringIO', None)], lineno=21, col_offset=0), TryExcept([If(Compare(Attribute(Name('sys', Load(), lineno=23, col_offset=7), 'platform', Load(), lineno=23, col_offset=7), [Eq()], [Str('os2emx', lineno=23, col_offset=23)], lineno=23, col_offset=7), [Raise(Name('ImportError', Load(), lineno=25, col_offset=14), None, None, lineno=25, col_offset=8)], [], lineno=23, col_offset=4), Import([alias('fcntl', None)], lineno=26, col_offset=4)], [ExceptHandler(Name('ImportError', Load(), lineno=27, col_offset=7), None, [Assign([Name('fcntl', Store(), lineno=28, col_offset=4)], Name('None', Load(), lineno=28, col_offset=12), lineno=28, col_offset=4)], lineno=27, col_offset=0)], [], lineno=22, col_offset=0), Import([alias('warnings', None)], lineno=30, col_offset=0), With(Call(Attribute(Name('warnings', Load(), lineno=31, col_offset=5), 'catch_warnings', Load(), lineno=31, col_offset=5), [], [], None, None, lineno=31, col_offset=5), None, [If(Attribute(Name('sys', Load(), lineno=32, col_offset=7), 'py3kwarning', Load(), lineno=32, col_offset=7), [Expr(Call(Attribute(Name('warnings', Load(), lineno=33, col_offset=8), 'filterwarnings', Load(), lineno=33, col_offset=8), [Str('ignore', lineno=33, col_offset=32), Str('.*rfc822 has been removed', lineno=33, col_offset=42), Name('DeprecationWarning', Load(), lineno=34, col_offset=32)], [], None, None, lineno=33, col_offset=8), lineno=33, col_offset=8)], [], lineno=32, col_offset=4), Import([alias('rfc822', None)], lineno=35, col_offset=4)], lineno=31, col_offset=5), Assign([Name('__all__', Store(), lineno=37, col_offset=0)], List([Str('Mailbox', lineno=37, col_offset=12), Str('Maildir', lineno=37, col_offset=23), Str('mbox', lineno=37, col_offset=34), Str('MH', lineno=37, col_offset=42), Str('Babyl', lineno=37, col_offset=48), Str('MMDF', lineno=37, col_offset=57), Str('Message', lineno=38, col_offset=12), Str('MaildirMessage', lineno=38, col_offset=23), Str('mboxMessage', lineno=38, col_offset=41), Str('MHMessage', lineno=38, col_offset=56), Str('BabylMessage', lineno=39, col_offset=12), Str('MMDFMessage', lineno=39, col_offset=28), Str('UnixMailbox', lineno=39, col_offset=43), Str('PortableUnixMailbox', lineno=40, col_offset=12), Str('MmdfMailbox', lineno=40, col_offset=35), Str('MHMailbox', lineno=40, col_offset=50), Str('BabylMailbox', lineno=40, col_offset=63)], Load(), lineno=37, col_offset=10), lineno=37, col_offset=0), ClassDef('Mailbox', [], [Expr(Str('A group of messages in a particular place.', lineno=43, col_offset=4), lineno=43, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=45, col_offset=17), Name('path', Param(), lineno=45, col_offset=23), Name('factory', Param(), lineno=45, col_offset=29), Name('create', Param(), lineno=45, col_offset=43)], None, None, [Name('None', Load(), lineno=45, col_offset=37), Name('True', Load(), lineno=45, col_offset=50)]), [Expr(Str('Initialize a Mailbox instance.', lineno=46, col_offset=8), lineno=46, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=47, col_offset=8), '_path', Store(), lineno=47, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=47, col_offset=21), 'path', Load(), lineno=47, col_offset=21), 'abspath', Load(), lineno=47, col_offset=21), [Call(Attribute(Attribute(Name('os', Load(), lineno=47, col_offset=37), 'path', Load(), lineno=47, col_offset=37), 'expanduser', Load(), lineno=47, col_offset=37), [Name('path', Load(), lineno=47, col_offset=56)], [], None, None, lineno=47, col_offset=37)], [], None, None, lineno=47, col_offset=21), lineno=47, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=48, col_offset=8), '_factory', Store(), lineno=48, col_offset=8)], Name('factory', Load(), lineno=48, col_offset=24), lineno=48, col_offset=8)], [], lineno=45, col_offset=4), FunctionDef('add', arguments([Name('self', Param(), lineno=50, col_offset=12), Name('message', Param(), lineno=50, col_offset=18)], None, None, []), [Expr(Str('Add message and return assigned key.', lineno=51, col_offset=8), lineno=51, col_offset=8), Raise(Call(Name('NotImplementedError', Load(), lineno=52, col_offset=14), [Str('Method must be implemented by subclass', lineno=52, col_offset=34)], [], None, None, lineno=52, col_offset=14), None, None, lineno=52, col_offset=8)], [], lineno=50, col_offset=4), FunctionDef('remove', arguments([Name('self', Param(), lineno=54, col_offset=15), Name('key', Param(), lineno=54, col_offset=21)], None, None, []), [Expr(Str("Remove the keyed message; raise KeyError if it doesn't exist.", lineno=55, col_offset=8), lineno=55, col_offset=8), Raise(Call(Name('NotImplementedError', Load(), lineno=56, col_offset=14), [Str('Method must be implemented by subclass', lineno=56, col_offset=34)], [], None, None, lineno=56, col_offset=14), None, None, lineno=56, col_offset=8)], [], lineno=54, col_offset=4), FunctionDef('__delitem__', arguments([Name('self', Param(), lineno=58, col_offset=20), Name('key', Param(), lineno=58, col_offset=26)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=59, col_offset=8), 'remove', Load(), lineno=59, col_offset=8), [Name('key', Load(), lineno=59, col_offset=20)], [], None, None, lineno=59, col_offset=8), lineno=59, col_offset=8)], [], lineno=58, col_offset=4), FunctionDef('discard', arguments([Name('self', Param(), lineno=61, col_offset=16), Name('key', Param(), lineno=61, col_offset=22)], None, None, []), [Expr(Str('If the keyed message exists, remove it.', lineno=62, col_offset=8), lineno=62, col_offset=8), TryExcept([Expr(Call(Attribute(Name('self', Load(), lineno=64, col_offset=12), 'remove', Load(), lineno=64, col_offset=12), [Name('key', Load(), lineno=64, col_offset=24)], [], None, None, lineno=64, col_offset=12), lineno=64, col_offset=12)], [ExceptHandler(Name('KeyError', Load(), lineno=65, col_offset=15), None, [Pass( lineno=66, col_offset=12)], lineno=65, col_offset=8)], [], lineno=63, col_offset=8)], [], lineno=61, col_offset=4), FunctionDef('__setitem__', arguments([Name('self', Param(), lineno=68, col_offset=20), Name('key', Param(), lineno=68, col_offset=26), Name('message', Param(), lineno=68, col_offset=31)], None, None, []), [Expr(Str("Replace the keyed message; raise KeyError if it doesn't exist.", lineno=69, col_offset=8), lineno=69, col_offset=8), Raise(Call(Name('NotImplementedError', Load(), lineno=70, col_offset=14), [Str('Method must be implemented by subclass', lineno=70, col_offset=34)], [], None, None, lineno=70, col_offset=14), None, None, lineno=70, col_offset=8)], [], lineno=68, col_offset=4), FunctionDef('get', arguments([Name('self', Param(), lineno=72, col_offset=12), Name('key', Param(), lineno=72, col_offset=18), Name('default', Param(), lineno=72, col_offset=23)], None, None, [Name('None', Load(), lineno=72, col_offset=31)]), [Expr(Str("Return the keyed message, or default if it doesn't exist.", lineno=73, col_offset=8), lineno=73, col_offset=8), TryExcept([Return(Call(Attribute(Name('self', Load(), lineno=75, col_offset=19), '__getitem__', Load(), lineno=75, col_offset=19), [Name('key', Load(), lineno=75, col_offset=36)], [], None, None, lineno=75, col_offset=19), lineno=75, col_offset=12)], [ExceptHandler(Name('KeyError', Load(), lineno=76, col_offset=15), None, [Return(Name('default', Load(), lineno=77, col_offset=19), lineno=77, col_offset=12)], lineno=76, col_offset=8)], [], lineno=74, col_offset=8)], [], lineno=72, col_offset=4), FunctionDef('__getitem__', arguments([Name('self', Param(), lineno=79, col_offset=20), Name('key', Param(), lineno=79, col_offset=26)], None, None, []), [Expr(Str("Return the keyed message; raise KeyError if it doesn't exist.", lineno=80, col_offset=8), lineno=80, col_offset=8), If(UnaryOp(Not(), Attribute(Name('self', Load(), lineno=81, col_offset=15), '_factory', Load(), lineno=81, col_offset=15), lineno=81, col_offset=11), [Return(Call(Attribute(Name('self', Load(), lineno=82, col_offset=19), 'get_message', Load(), lineno=82, col_offset=19), [Name('key', Load(), lineno=82, col_offset=36)], [], None, None, lineno=82, col_offset=19), lineno=82, col_offset=12)], [Return(Call(Attribute(Name('self', Load(), lineno=84, col_offset=19), '_factory', Load(), lineno=84, col_offset=19), [Call(Attribute(Name('self', Load(), lineno=84, col_offset=33), 'get_file', Load(), lineno=84, col_offset=33), [Name('key', Load(), lineno=84, col_offset=47)], [], None, None, lineno=84, col_offset=33)], [], None, None, lineno=84, col_offset=19), lineno=84, col_offset=12)], lineno=81, col_offset=8)], [], lineno=79, col_offset=4), FunctionDef('get_message', arguments([Name('self', Param(), lineno=86, col_offset=20), Name('key', Param(), lineno=86, col_offset=26)], None, None, []), [Expr(Str('Return a Message representation or raise a KeyError.', lineno=87, col_offset=8), lineno=87, col_offset=8), Raise(Call(Name('NotImplementedError', Load(), lineno=88, col_offset=14), [Str('Method must be implemented by subclass', lineno=88, col_offset=34)], [], None, None, lineno=88, col_offset=14), None, None, lineno=88, col_offset=8)], [], lineno=86, col_offset=4), FunctionDef('get_string', arguments([Name('self', Param(), lineno=90, col_offset=19), Name('key', Param(), lineno=90, col_offset=25)], None, None, []), [Expr(Str('Return a string representation or raise a KeyError.', lineno=91, col_offset=8), lineno=91, col_offset=8), Raise(Call(Name('NotImplementedError', Load(), lineno=92, col_offset=14), [Str('Method must be implemented by subclass', lineno=92, col_offset=34)], [], None, None, lineno=92, col_offset=14), None, None, lineno=92, col_offset=8)], [], lineno=90, col_offset=4), FunctionDef('get_file', arguments([Name('self', Param(), lineno=94, col_offset=17), Name('key', Param(), lineno=94, col_offset=23)], None, None, []), [Expr(Str('Return a file-like representation or raise a KeyError.', lineno=95, col_offset=8), lineno=95, col_offset=8), Raise(Call(Name('NotImplementedError', Load(), lineno=96, col_offset=14), [Str('Method must be implemented by subclass', lineno=96, col_offset=34)], [], None, None, lineno=96, col_offset=14), None, None, lineno=96, col_offset=8)], [], lineno=94, col_offset=4), FunctionDef('iterkeys', arguments([Name('self', Param(), lineno=98, col_offset=17)], None, None, []), [Expr(Str('Return an iterator over keys.', lineno=99, col_offset=8), lineno=99, col_offset=8), Raise(Call(Name('NotImplementedError', Load(), lineno=100, col_offset=14), [Str('Method must be implemented by subclass', lineno=100, col_offset=34)], [], None, None, lineno=100, col_offset=14), None, None, lineno=100, col_offset=8)], [], lineno=98, col_offset=4), FunctionDef('keys', arguments([Name('self', Param(), lineno=102, col_offset=13)], None, None, []), [Expr(Str('Return a list of keys.', lineno=103, col_offset=8), lineno=103, col_offset=8), Return(Call(Name('list', Load(), lineno=104, col_offset=15), [Call(Attribute(Name('self', Load(), lineno=104, col_offset=20), 'iterkeys', Load(), lineno=104, col_offset=20), [], [], None, None, lineno=104, col_offset=20)], [], None, None, lineno=104, col_offset=15), lineno=104, col_offset=8)], [], lineno=102, col_offset=4), FunctionDef('itervalues', arguments([Name('self', Param(), lineno=106, col_offset=19)], None, None, []), [Expr(Str('Return an iterator over all messages.', lineno=107, col_offset=8), lineno=107, col_offset=8), For(Name('key', Store(), lineno=108, col_offset=12), Call(Attribute(Name('self', Load(), lineno=108, col_offset=19), 'iterkeys', Load(), lineno=108, col_offset=19), [], [], None, None, lineno=108, col_offset=19), [TryExcept([Assign([Name('value', Store(), lineno=110, col_offset=16)], Subscript(Name('self', Load(), lineno=110, col_offset=24), Index(Name('key', Load(), lineno=110, col_offset=29)), Load(), lineno=110, col_offset=24), lineno=110, col_offset=16)], [ExceptHandler(Name('KeyError', Load(), lineno=111, col_offset=19), None, [Continue( lineno=112, col_offset=16)], lineno=111, col_offset=12)], [], lineno=109, col_offset=12), Expr(Yield(Name('value', Load(), lineno=113, col_offset=18), lineno=113, col_offset=12), lineno=113, col_offset=12)], [], lineno=108, col_offset=8)], [], lineno=106, col_offset=4), FunctionDef('__iter__', arguments([Name('self', Param(), lineno=115, col_offset=17)], None, None, []), [Return(Call(Attribute(Name('self', Load(), lineno=116, col_offset=15), 'itervalues', Load(), lineno=116, col_offset=15), [], [], None, None, lineno=116, col_offset=15), lineno=116, col_offset=8)], [], lineno=115, col_offset=4), FunctionDef('values', arguments([Name('self', Param(), lineno=118, col_offset=15)], None, None, []), [Expr(Str('Return a list of messages. Memory intensive.', lineno=119, col_offset=8), lineno=119, col_offset=8), Return(Call(Name('list', Load(), lineno=120, col_offset=15), [Call(Attribute(Name('self', Load(), lineno=120, col_offset=20), 'itervalues', Load(), lineno=120, col_offset=20), [], [], None, None, lineno=120, col_offset=20)], [], None, None, lineno=120, col_offset=15), lineno=120, col_offset=8)], [], lineno=118, col_offset=4), FunctionDef('iteritems', arguments([Name('self', Param(), lineno=122, col_offset=18)], None, None, []), [Expr(Str('Return an iterator over (key, message) tuples.', lineno=123, col_offset=8), lineno=123, col_offset=8), For(Name('key', Store(), lineno=124, col_offset=12), Call(Attribute(Name('self', Load(), lineno=124, col_offset=19), 'iterkeys', Load(), lineno=124, col_offset=19), [], [], None, None, lineno=124, col_offset=19), [TryExcept([Assign([Name('value', Store(), lineno=126, col_offset=16)], Subscript(Name('self', Load(), lineno=126, col_offset=24), Index(Name('key', Load(), lineno=126, col_offset=29)), Load(), lineno=126, col_offset=24), lineno=126, col_offset=16)], [ExceptHandler(Name('KeyError', Load(), lineno=127, col_offset=19), None, [Continue( lineno=128, col_offset=16)], lineno=127, col_offset=12)], [], lineno=125, col_offset=12), Expr(Yield(Tuple([Name('key', Load(), lineno=129, col_offset=19), Name('value', Load(), lineno=129, col_offset=24)], Load(), lineno=129, col_offset=19), lineno=129, col_offset=12), lineno=129, col_offset=12)], [], lineno=124, col_offset=8)], [], lineno=122, col_offset=4), FunctionDef('items', arguments([Name('self', Param(), lineno=131, col_offset=14)], None, None, []), [Expr(Str('Return a list of (key, message) tuples. Memory intensive.', lineno=132, col_offset=8), lineno=132, col_offset=8), Return(Call(Name('list', Load(), lineno=133, col_offset=15), [Call(Attribute(Name('self', Load(), lineno=133, col_offset=20), 'iteritems', Load(), lineno=133, col_offset=20), [], [], None, None, lineno=133, col_offset=20)], [], None, None, lineno=133, col_offset=15), lineno=133, col_offset=8)], [], lineno=131, col_offset=4), FunctionDef('has_key', arguments([Name('self', Param(), lineno=135, col_offset=16), Name('key', Param(), lineno=135, col_offset=22)], None, None, []), [Expr(Str('Return True if the keyed message exists, False otherwise.', lineno=136, col_offset=8), lineno=136, col_offset=8), Raise(Call(Name('NotImplementedError', Load(), lineno=137, col_offset=14), [Str('Method must be implemented by subclass', lineno=137, col_offset=34)], [], None, None, lineno=137, col_offset=14), None, None, lineno=137, col_offset=8)], [], lineno=135, col_offset=4), FunctionDef('__contains__', arguments([Name('self', Param(), lineno=139, col_offset=21), Name('key', Param(), lineno=139, col_offset=27)], None, None, []), [Return(Call(Attribute(Name('self', Load(), lineno=140, col_offset=15), 'has_key', Load(), lineno=140, col_offset=15), [Name('key', Load(), lineno=140, col_offset=28)], [], None, None, lineno=140, col_offset=15), lineno=140, col_offset=8)], [], lineno=139, col_offset=4), FunctionDef('__len__', arguments([Name('self', Param(), lineno=142, col_offset=16)], None, None, []), [Expr(Str('Return a count of messages in the mailbox.', lineno=143, col_offset=8), lineno=143, col_offset=8), Raise(Call(Name('NotImplementedError', Load(), lineno=144, col_offset=14), [Str('Method must be implemented by subclass', lineno=144, col_offset=34)], [], None, None, lineno=144, col_offset=14), None, None, lineno=144, col_offset=8)], [], lineno=142, col_offset=4), FunctionDef('clear', arguments([Name('self', Param(), lineno=146, col_offset=14)], None, None, []), [Expr(Str('Delete all messages.', lineno=147, col_offset=8), lineno=147, col_offset=8), For(Name('key', Store(), lineno=148, col_offset=12), Call(Attribute(Name('self', Load(), lineno=148, col_offset=19), 'iterkeys', Load(), lineno=148, col_offset=19), [], [], None, None, lineno=148, col_offset=19), [Expr(Call(Attribute(Name('self', Load(), lineno=149, col_offset=12), 'discard', Load(), lineno=149, col_offset=12), [Name('key', Load(), lineno=149, col_offset=25)], [], None, None, lineno=149, col_offset=12), lineno=149, col_offset=12)], [], lineno=148, col_offset=8)], [], lineno=146, col_offset=4), FunctionDef('pop', arguments([Name('self', Param(), lineno=151, col_offset=12), Name('key', Param(), lineno=151, col_offset=18), Name('default', Param(), lineno=151, col_offset=23)], None, None, [Name('None', Load(), lineno=151, col_offset=31)]), [Expr(Str('Delete the keyed message and return it, or default.', lineno=152, col_offset=8), lineno=152, col_offset=8), TryExcept([Assign([Name('result', Store(), lineno=154, col_offset=12)], Subscript(Name('self', Load(), lineno=154, col_offset=21), Index(Name('key', Load(), lineno=154, col_offset=26)), Load(), lineno=154, col_offset=21), lineno=154, col_offset=12)], [ExceptHandler(Name('KeyError', Load(), lineno=155, col_offset=15), None, [Return(Name('default', Load(), lineno=156, col_offset=19), lineno=156, col_offset=12)], lineno=155, col_offset=8)], [], lineno=153, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=157, col_offset=8), 'discard', Load(), lineno=157, col_offset=8), [Name('key', Load(), lineno=157, col_offset=21)], [], None, None, lineno=157, col_offset=8), lineno=157, col_offset=8), Return(Name('result', Load(), lineno=158, col_offset=15), lineno=158, col_offset=8)], [], lineno=151, col_offset=4), FunctionDef('popitem', arguments([Name('self', Param(), lineno=160, col_offset=16)], None, None, []), [Expr(Str('Delete an arbitrary (key, message) pair and return it.', lineno=161, col_offset=8), lineno=161, col_offset=8), For(Name('key', Store(), lineno=162, col_offset=12), Call(Attribute(Name('self', Load(), lineno=162, col_offset=19), 'iterkeys', Load(), lineno=162, col_offset=19), [], [], None, None, lineno=162, col_offset=19), [Return(Tuple([Name('key', Load(), lineno=163, col_offset=20), Call(Attribute(Name('self', Load(), lineno=163, col_offset=25), 'pop', Load(), lineno=163, col_offset=25), [Name('key', Load(), lineno=163, col_offset=34)], [], None, None, lineno=163, col_offset=25)], Load(), lineno=163, col_offset=20), lineno=163, col_offset=12)], [Raise(Call(Name('KeyError', Load(), lineno=165, col_offset=18), [Str('No messages in mailbox', lineno=165, col_offset=27)], [], None, None, lineno=165, col_offset=18), None, None, lineno=165, col_offset=12)], lineno=162, col_offset=8)], [], lineno=160, col_offset=4), FunctionDef('update', arguments([Name('self', Param(), lineno=167, col_offset=15), Name('arg', Param(), lineno=167, col_offset=21)], None, None, [Name('None', Load(), lineno=167, col_offset=25)]), [Expr(Str('Change the messages that correspond to certain keys.', lineno=168, col_offset=8), lineno=168, col_offset=8), If(Call(Name('hasattr', Load(), lineno=169, col_offset=11), [Name('arg', Load(), lineno=169, col_offset=19), Str('iteritems', lineno=169, col_offset=24)], [], None, None, lineno=169, col_offset=11), [Assign([Name('source', Store(), lineno=170, col_offset=12)], Call(Attribute(Name('arg', Load(), lineno=170, col_offset=21), 'iteritems', Load(), lineno=170, col_offset=21), [], [], None, None, lineno=170, col_offset=21), lineno=170, col_offset=12)], [If(Call(Name('hasattr', Load(), lineno=171, col_offset=13), [Name('arg', Load(), lineno=171, col_offset=21), Str('items', lineno=171, col_offset=26)], [], None, None, lineno=171, col_offset=13), [Assign([Name('source', Store(), lineno=172, col_offset=12)], Call(Attribute(Name('arg', Load(), lineno=172, col_offset=21), 'items', Load(), lineno=172, col_offset=21), [], [], None, None, lineno=172, col_offset=21), lineno=172, col_offset=12)], [Assign([Name('source', Store(), lineno=174, col_offset=12)], Name('arg', Load(), lineno=174, col_offset=21), lineno=174, col_offset=12)], lineno=171, col_offset=13)], lineno=169, col_offset=8), Assign([Name('bad_key', Store(), lineno=175, col_offset=8)], Name('False', Load(), lineno=175, col_offset=18), lineno=175, col_offset=8), For(Tuple([Name('key', Store(), lineno=176, col_offset=12), Name('message', Store(), lineno=176, col_offset=17)], Store(), lineno=176, col_offset=12), Name('source', Load(), lineno=176, col_offset=28), [TryExcept([Assign([Subscript(Name('self', Load(), lineno=178, col_offset=16), Index(Name('key', Load(), lineno=178, col_offset=21)), Store(), lineno=178, col_offset=16)], Name('message', Load(), lineno=178, col_offset=28), lineno=178, col_offset=16)], [ExceptHandler(Name('KeyError', Load(), lineno=179, col_offset=19), None, [Assign([Name('bad_key', Store(), lineno=180, col_offset=16)], Name('True', Load(), lineno=180, col_offset=26), lineno=180, col_offset=16)], lineno=179, col_offset=12)], [], lineno=177, col_offset=12)], [], lineno=176, col_offset=8), If(Name('bad_key', Load(), lineno=181, col_offset=11), [Raise(Call(Name('KeyError', Load(), lineno=182, col_offset=18), [Str('No message with key(s)', lineno=182, col_offset=27)], [], None, None, lineno=182, col_offset=18), None, None, lineno=182, col_offset=12)], [], lineno=181, col_offset=8)], [], lineno=167, col_offset=4), FunctionDef('flush', arguments([Name('self', Param(), lineno=184, col_offset=14)], None, None, []), [Expr(Str('Write any pending changes to the disk.', lineno=185, col_offset=8), lineno=185, col_offset=8), Raise(Call(Name('NotImplementedError', Load(), lineno=186, col_offset=14), [Str('Method must be implemented by subclass', lineno=186, col_offset=34)], [], None, None, lineno=186, col_offset=14), None, None, lineno=186, col_offset=8)], [], lineno=184, col_offset=4), FunctionDef('lock', arguments([Name('self', Param(), lineno=188, col_offset=13)], None, None, []), [Expr(Str('Lock the mailbox.', lineno=189, col_offset=8), lineno=189, col_offset=8), Raise(Call(Name('NotImplementedError', Load(), lineno=190, col_offset=14), [Str('Method must be implemented by subclass', lineno=190, col_offset=34)], [], None, None, lineno=190, col_offset=14), None, None, lineno=190, col_offset=8)], [], lineno=188, col_offset=4), FunctionDef('unlock', arguments([Name('self', Param(), lineno=192, col_offset=15)], None, None, []), [Expr(Str('Unlock the mailbox if it is locked.', lineno=193, col_offset=8), lineno=193, col_offset=8), Raise(Call(Name('NotImplementedError', Load(), lineno=194, col_offset=14), [Str('Method must be implemented by subclass', lineno=194, col_offset=34)], [], None, None, lineno=194, col_offset=14), None, None, lineno=194, col_offset=8)], [], lineno=192, col_offset=4), FunctionDef('close', arguments([Name('self', Param(), lineno=196, col_offset=14)], None, None, []), [Expr(Str('Flush and close the mailbox.', lineno=197, col_offset=8), lineno=197, col_offset=8), Raise(Call(Name('NotImplementedError', Load(), lineno=198, col_offset=14), [Str('Method must be implemented by subclass', lineno=198, col_offset=34)], [], None, None, lineno=198, col_offset=14), None, None, lineno=198, col_offset=8)], [], lineno=196, col_offset=4), FunctionDef('_dump_message', arguments([Name('self', Param(), lineno=200, col_offset=22), Name('message', Param(), lineno=200, col_offset=28), Name('target', Param(), lineno=200, col_offset=37), Name('mangle_from_', Param(), lineno=200, col_offset=45)], None, None, [Name('False', Load(), lineno=200, col_offset=58)]), [Expr(Str('Dump message contents to target file.', lineno=204, col_offset=8), lineno=204, col_offset=8), If(Call(Name('isinstance', Load(), lineno=205, col_offset=11), [Name('message', Load(), lineno=205, col_offset=22), Attribute(Attribute(Name('email', Load(), lineno=205, col_offset=31), 'message', Load(), lineno=205, col_offset=31), 'Message', Load(), lineno=205, col_offset=31)], [], None, None, lineno=205, col_offset=11), [Assign([Name('buffer', Store(), lineno=206, col_offset=12)], Call(Attribute(Name('StringIO', Load(), lineno=206, col_offset=21), 'StringIO', Load(), lineno=206, col_offset=21), [], [], None, None, lineno=206, col_offset=21), lineno=206, col_offset=12), Assign([Name('gen', Store(), lineno=207, col_offset=12)], Call(Attribute(Attribute(Name('email', Load(), lineno=207, col_offset=18), 'generator', Load(), lineno=207, col_offset=18), 'Generator', Load(), lineno=207, col_offset=18), [Name('buffer', Load(), lineno=207, col_offset=44), Name('mangle_from_', Load(), lineno=207, col_offset=52), Num(0, lineno=207, col_offset=66)], [], None, None, lineno=207, col_offset=18), lineno=207, col_offset=12), Expr(Call(Attribute(Name('gen', Load(), lineno=208, col_offset=12), 'flatten', Load(), lineno=208, col_offset=12), [Name('message', Load(), lineno=208, col_offset=24)], [], None, None, lineno=208, col_offset=12), lineno=208, col_offset=12), Expr(Call(Attribute(Name('buffer', Load(), lineno=209, col_offset=12), 'seek', Load(), lineno=209, col_offset=12), [Num(0, lineno=209, col_offset=24)], [], None, None, lineno=209, col_offset=12), lineno=209, col_offset=12), Expr(Call(Attribute(Name('target', Load(), lineno=210, col_offset=12), 'write', Load(), lineno=210, col_offset=12), [Call(Attribute(Call(Attribute(Name('buffer', Load(), lineno=210, col_offset=25), 'read', Load(), lineno=210, col_offset=25), [], [], None, None, lineno=210, col_offset=25), 'replace', Load(), lineno=210, col_offset=25), [Str('\n', lineno=210, col_offset=47), Attribute(Name('os', Load(), lineno=210, col_offset=53), 'linesep', Load(), lineno=210, col_offset=53)], [], None, None, lineno=210, col_offset=25)], [], None, None, lineno=210, col_offset=12), lineno=210, col_offset=12)], [If(Call(Name('isinstance', Load(), lineno=211, col_offset=13), [Name('message', Load(), lineno=211, col_offset=24), Name('str', Load(), lineno=211, col_offset=33)], [], None, None, lineno=211, col_offset=13), [If(Name('mangle_from_', Load(), lineno=212, col_offset=15), [Assign([Name('message', Store(), lineno=213, col_offset=16)], Call(Attribute(Name('message', Load(), lineno=213, col_offset=26), 'replace', Load(), lineno=213, col_offset=26), [Str('\nFrom ', lineno=213, col_offset=42), Str('\n>From ', lineno=213, col_offset=53)], [], None, None, lineno=213, col_offset=26), lineno=213, col_offset=16)], [], lineno=212, col_offset=12), Assign([Name('message', Store(), lineno=214, col_offset=12)], Call(Attribute(Name('message', Load(), lineno=214, col_offset=22), 'replace', Load(), lineno=214, col_offset=22), [Str('\n', lineno=214, col_offset=38), Attribute(Name('os', Load(), lineno=214, col_offset=44), 'linesep', Load(), lineno=214, col_offset=44)], [], None, None, lineno=214, col_offset=22), lineno=214, col_offset=12), Expr(Call(Attribute(Name('target', Load(), lineno=215, col_offset=12), 'write', Load(), lineno=215, col_offset=12), [Name('message', Load(), lineno=215, col_offset=25)], [], None, None, lineno=215, col_offset=12), lineno=215, col_offset=12)], [If(Call(Name('hasattr', Load(), lineno=216, col_offset=13), [Name('message', Load(), lineno=216, col_offset=21), Str('read', lineno=216, col_offset=30)], [], None, None, lineno=216, col_offset=13), [While(Name('True', Load(), lineno=217, col_offset=18), [Assign([Name('line', Store(), lineno=218, col_offset=16)], Call(Attribute(Name('message', Load(), lineno=218, col_offset=23), 'readline', Load(), lineno=218, col_offset=23), [], [], None, None, lineno=218, col_offset=23), lineno=218, col_offset=16), If(Compare(Name('line', Load(), lineno=219, col_offset=19), [Eq()], [Str('', lineno=219, col_offset=27)], lineno=219, col_offset=19), [Break( lineno=220, col_offset=20)], [], lineno=219, col_offset=16), If(BoolOp(And(), [Name('mangle_from_', Load(), lineno=221, col_offset=19), Call(Attribute(Name('line', Load(), lineno=221, col_offset=36), 'startswith', Load(), lineno=221, col_offset=36), [Str('From ', lineno=221, col_offset=52)], [], None, None, lineno=221, col_offset=36)], lineno=221, col_offset=19), [Assign([Name('line', Store(), lineno=222, col_offset=20)], BinOp(Str('>From ', lineno=222, col_offset=27), Add(), Subscript(Name('line', Load(), lineno=222, col_offset=38), Slice(Num(5, lineno=222, col_offset=43), None, None), Load(), lineno=222, col_offset=38), lineno=222, col_offset=27), lineno=222, col_offset=20)], [], lineno=221, col_offset=16), Assign([Name('line', Store(), lineno=223, col_offset=16)], Call(Attribute(Name('line', Load(), lineno=223, col_offset=23), 'replace', Load(), lineno=223, col_offset=23), [Str('\n', lineno=223, col_offset=36), Attribute(Name('os', Load(), lineno=223, col_offset=42), 'linesep', Load(), lineno=223, col_offset=42)], [], None, None, lineno=223, col_offset=23), lineno=223, col_offset=16), Expr(Call(Attribute(Name('target', Load(), lineno=224, col_offset=16), 'write', Load(), lineno=224, col_offset=16), [Name('line', Load(), lineno=224, col_offset=29)], [], None, None, lineno=224, col_offset=16), lineno=224, col_offset=16)], [], lineno=217, col_offset=12)], [Raise(Call(Name('TypeError', Load(), lineno=226, col_offset=18), [BinOp(Str('Invalid message type: %s', lineno=226, col_offset=28), Mod(), Call(Name('type', Load(), lineno=226, col_offset=57), [Name('message', Load(), lineno=226, col_offset=62)], [], None, None, lineno=226, col_offset=57), lineno=226, col_offset=28)], [], None, None, lineno=226, col_offset=18), None, None, lineno=226, col_offset=12)], lineno=216, col_offset=13)], lineno=211, col_offset=13)], lineno=205, col_offset=8)], [], lineno=200, col_offset=4)], [], lineno=42, col_offset=0), ClassDef('Maildir', [Name('Mailbox', Load(), lineno=229, col_offset=14)], [Expr(Str('A qmail-style Maildir mailbox.', lineno=230, col_offset=4), lineno=230, col_offset=4), Assign([Name('colon', Store(), lineno=232, col_offset=4)], Str(':', lineno=232, col_offset=12), lineno=232, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=234, col_offset=17), Name('dirname', Param(), lineno=234, col_offset=23), Name('factory', Param(), lineno=234, col_offset=32), Name('create', Param(), lineno=234, col_offset=56)], None, None, [Attribute(Name('rfc822', Load(), lineno=234, col_offset=40), 'Message', Load(), lineno=234, col_offset=40), Name('True', Load(), lineno=234, col_offset=63)]), [Expr(Str('Initialize a Maildir instance.', lineno=235, col_offset=8), lineno=235, col_offset=8), Expr(Call(Attribute(Name('Mailbox', Load(), lineno=236, col_offset=8), '__init__', Load(), lineno=236, col_offset=8), [Name('self', Load(), lineno=236, col_offset=25), Name('dirname', Load(), lineno=236, col_offset=31), Name('factory', Load(), lineno=236, col_offset=40), Name('create', Load(), lineno=236, col_offset=49)], [], None, None, lineno=236, col_offset=8), lineno=236, col_offset=8), If(UnaryOp(Not(), Call(Attribute(Attribute(Name('os', Load(), lineno=237, col_offset=15), 'path', Load(), lineno=237, col_offset=15), 'exists', Load(), lineno=237, col_offset=15), [Attribute(Name('self', Load(), lineno=237, col_offset=30), '_path', Load(), lineno=237, col_offset=30)], [], None, None, lineno=237, col_offset=15), lineno=237, col_offset=11), [If(Name('create', Load(), lineno=238, col_offset=15), [Expr(Call(Attribute(Name('os', Load(), lineno=239, col_offset=16), 'mkdir', Load(), lineno=239, col_offset=16), [Attribute(Name('self', Load(), lineno=239, col_offset=25), '_path', Load(), lineno=239, col_offset=25), Num(448, lineno=239, col_offset=37)], [], None, None, lineno=239, col_offset=16), lineno=239, col_offset=16), Expr(Call(Attribute(Name('os', Load(), lineno=240, col_offset=16), 'mkdir', Load(), lineno=240, col_offset=16), [Call(Attribute(Attribute(Name('os', Load(), lineno=240, col_offset=25), 'path', Load(), lineno=240, col_offset=25), 'join', Load(), lineno=240, col_offset=25), [Attribute(Name('self', Load(), lineno=240, col_offset=38), '_path', Load(), lineno=240, col_offset=38), Str('tmp', lineno=240, col_offset=50)], [], None, None, lineno=240, col_offset=25), Num(448, lineno=240, col_offset=58)], [], None, None, lineno=240, col_offset=16), lineno=240, col_offset=16), Expr(Call(Attribute(Name('os', Load(), lineno=241, col_offset=16), 'mkdir', Load(), lineno=241, col_offset=16), [Call(Attribute(Attribute(Name('os', Load(), lineno=241, col_offset=25), 'path', Load(), lineno=241, col_offset=25), 'join', Load(), lineno=241, col_offset=25), [Attribute(Name('self', Load(), lineno=241, col_offset=38), '_path', Load(), lineno=241, col_offset=38), Str('new', lineno=241, col_offset=50)], [], None, None, lineno=241, col_offset=25), Num(448, lineno=241, col_offset=58)], [], None, None, lineno=241, col_offset=16), lineno=241, col_offset=16), Expr(Call(Attribute(Name('os', Load(), lineno=242, col_offset=16), 'mkdir', Load(), lineno=242, col_offset=16), [Call(Attribute(Attribute(Name('os', Load(), lineno=242, col_offset=25), 'path', Load(), lineno=242, col_offset=25), 'join', Load(), lineno=242, col_offset=25), [Attribute(Name('self', Load(), lineno=242, col_offset=38), '_path', Load(), lineno=242, col_offset=38), Str('cur', lineno=242, col_offset=50)], [], None, None, lineno=242, col_offset=25), Num(448, lineno=242, col_offset=58)], [], None, None, lineno=242, col_offset=16), lineno=242, col_offset=16)], [Raise(Call(Name('NoSuchMailboxError', Load(), lineno=244, col_offset=22), [Attribute(Name('self', Load(), lineno=244, col_offset=41), '_path', Load(), lineno=244, col_offset=41)], [], None, None, lineno=244, col_offset=22), None, None, lineno=244, col_offset=16)], lineno=238, col_offset=12)], [], lineno=237, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=245, col_offset=8), '_toc', Store(), lineno=245, col_offset=8)], Dict([], [], lineno=245, col_offset=20), lineno=245, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=246, col_offset=8), '_last_read', Store(), lineno=246, col_offset=8)], Name('None', Load(), lineno=246, col_offset=26), lineno=246, col_offset=8)], [], lineno=234, col_offset=4), FunctionDef('add', arguments([Name('self', Param(), lineno=251, col_offset=12), Name('message', Param(), lineno=251, col_offset=18)], None, None, []), [Expr(Str('Add message and return assigned key.', lineno=252, col_offset=8), lineno=252, col_offset=8), Assign([Name('tmp_file', Store(), lineno=253, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=253, col_offset=19), '_create_tmp', Load(), lineno=253, col_offset=19), [], [], None, None, lineno=253, col_offset=19), lineno=253, col_offset=8), TryFinally([Expr(Call(Attribute(Name('self', Load(), lineno=255, col_offset=12), '_dump_message', Load(), lineno=255, col_offset=12), [Name('message', Load(), lineno=255, col_offset=31), Name('tmp_file', Load(), lineno=255, col_offset=40)], [], None, None, lineno=255, col_offset=12), lineno=255, col_offset=12)], [Expr(Call(Name('_sync_close', Load(), lineno=257, col_offset=12), [Name('tmp_file', Load(), lineno=257, col_offset=24)], [], None, None, lineno=257, col_offset=12), lineno=257, col_offset=12)], lineno=254, col_offset=8), If(Call(Name('isinstance', Load(), lineno=258, col_offset=11), [Name('message', Load(), lineno=258, col_offset=22), Name('MaildirMessage', Load(), lineno=258, col_offset=31)], [], None, None, lineno=258, col_offset=11), [Assign([Name('subdir', Store(), lineno=259, col_offset=12)], Call(Attribute(Name('message', Load(), lineno=259, col_offset=21), 'get_subdir', Load(), lineno=259, col_offset=21), [], [], None, None, lineno=259, col_offset=21), lineno=259, col_offset=12), Assign([Name('suffix', Store(), lineno=260, col_offset=12)], BinOp(Attribute(Name('self', Load(), lineno=260, col_offset=21), 'colon', Load(), lineno=260, col_offset=21), Add(), Call(Attribute(Name('message', Load(), lineno=260, col_offset=34), 'get_info', Load(), lineno=260, col_offset=34), [], [], None, None, lineno=260, col_offset=34), lineno=260, col_offset=21), lineno=260, col_offset=12), If(Compare(Name('suffix', Load(), lineno=261, col_offset=15), [Eq()], [Attribute(Name('self', Load(), lineno=261, col_offset=25), 'colon', Load(), lineno=261, col_offset=25)], lineno=261, col_offset=15), [Assign([Name('suffix', Store(), lineno=262, col_offset=16)], Str('', lineno=262, col_offset=25), lineno=262, col_offset=16)], [], lineno=261, col_offset=12)], [Assign([Name('subdir', Store(), lineno=264, col_offset=12)], Str('new', lineno=264, col_offset=21), lineno=264, col_offset=12), Assign([Name('suffix', Store(), lineno=265, col_offset=12)], Str('', lineno=265, col_offset=21), lineno=265, col_offset=12)], lineno=258, col_offset=8), Assign([Name('uniq', Store(), lineno=266, col_offset=8)], Subscript(Call(Attribute(Call(Attribute(Attribute(Name('os', Load(), lineno=266, col_offset=15), 'path', Load(), lineno=266, col_offset=15), 'basename', Load(), lineno=266, col_offset=15), [Attribute(Name('tmp_file', Load(), lineno=266, col_offset=32), 'name', Load(), lineno=266, col_offset=32)], [], None, None, lineno=266, col_offset=15), 'split', Load(), lineno=266, col_offset=15), [Attribute(Name('self', Load(), lineno=266, col_offset=53), 'colon', Load(), lineno=266, col_offset=53)], [], None, None, lineno=266, col_offset=15), Index(Num(0, lineno=266, col_offset=65)), Load(), lineno=266, col_offset=15), lineno=266, col_offset=8), Assign([Name('dest', Store(), lineno=267, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=267, col_offset=15), 'path', Load(), lineno=267, col_offset=15), 'join', Load(), lineno=267, col_offset=15), [Attribute(Name('self', Load(), lineno=267, col_offset=28), '_path', Load(), lineno=267, col_offset=28), Name('subdir', Load(), lineno=267, col_offset=40), BinOp(Name('uniq', Load(), lineno=267, col_offset=48), Add(), Name('suffix', Load(), lineno=267, col_offset=55), lineno=267, col_offset=48)], [], None, None, lineno=267, col_offset=15), lineno=267, col_offset=8), TryExcept([If(Call(Name('hasattr', Load(), lineno=269, col_offset=15), [Name('os', Load(), lineno=269, col_offset=23), Str('link', lineno=269, col_offset=27)], [], None, None, lineno=269, col_offset=15), [Expr(Call(Attribute(Name('os', Load(), lineno=270, col_offset=16), 'link', Load(), lineno=270, col_offset=16), [Attribute(Name('tmp_file', Load(), lineno=270, col_offset=24), 'name', Load(), lineno=270, col_offset=24), Name('dest', Load(), lineno=270, col_offset=39)], [], None, None, lineno=270, col_offset=16), lineno=270, col_offset=16), Expr(Call(Attribute(Name('os', Load(), lineno=271, col_offset=16), 'remove', Load(), lineno=271, col_offset=16), [Attribute(Name('tmp_file', Load(), lineno=271, col_offset=26), 'name', Load(), lineno=271, col_offset=26)], [], None, None, lineno=271, col_offset=16), lineno=271, col_offset=16)], [Expr(Call(Attribute(Name('os', Load(), lineno=273, col_offset=16), 'rename', Load(), lineno=273, col_offset=16), [Attribute(Name('tmp_file', Load(), lineno=273, col_offset=26), 'name', Load(), lineno=273, col_offset=26), Name('dest', Load(), lineno=273, col_offset=41)], [], None, None, lineno=273, col_offset=16), lineno=273, col_offset=16)], lineno=269, col_offset=12)], [ExceptHandler(Name('OSError', Load(), lineno=274, col_offset=15), Name('e', Store(), lineno=274, col_offset=24), [Expr(Call(Attribute(Name('os', Load(), lineno=275, col_offset=12), 'remove', Load(), lineno=275, col_offset=12), [Attribute(Name('tmp_file', Load(), lineno=275, col_offset=22), 'name', Load(), lineno=275, col_offset=22)], [], None, None, lineno=275, col_offset=12), lineno=275, col_offset=12), If(Compare(Attribute(Name('e', Load(), lineno=276, col_offset=15), 'errno', Load(), lineno=276, col_offset=15), [Eq()], [Attribute(Name('errno', Load(), lineno=276, col_offset=26), 'EEXIST', Load(), lineno=276, col_offset=26)], lineno=276, col_offset=15), [Raise(Call(Name('ExternalClashError', Load(), lineno=277, col_offset=22), [BinOp(Str('Name clash with existing message: %s', lineno=277, col_offset=41), Mod(), Name('dest', Load(), lineno=278, col_offset=43), lineno=277, col_offset=41)], [], None, None, lineno=277, col_offset=22), None, None, lineno=277, col_offset=16)], [Raise(None, None, None, lineno=280, col_offset=16)], lineno=276, col_offset=12)], lineno=274, col_offset=8)], [], lineno=268, col_offset=8), If(Call(Name('isinstance', Load(), lineno=281, col_offset=11), [Name('message', Load(), lineno=281, col_offset=22), Name('MaildirMessage', Load(), lineno=281, col_offset=31)], [], None, None, lineno=281, col_offset=11), [Expr(Call(Attribute(Name('os', Load(), lineno=282, col_offset=12), 'utime', Load(), lineno=282, col_offset=12), [Name('dest', Load(), lineno=282, col_offset=21), Tuple([Call(Attribute(Attribute(Name('os', Load(), lineno=282, col_offset=28), 'path', Load(), lineno=282, col_offset=28), 'getatime', Load(), lineno=282, col_offset=28), [Name('dest', Load(), lineno=282, col_offset=45)], [], None, None, lineno=282, col_offset=28), Call(Attribute(Name('message', Load(), lineno=282, col_offset=52), 'get_date', Load(), lineno=282, col_offset=52), [], [], None, None, lineno=282, col_offset=52)], Load(), lineno=282, col_offset=28)], [], None, None, lineno=282, col_offset=12), lineno=282, col_offset=12)], [], lineno=281, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=284, col_offset=8), '_last_read', Store(), lineno=284, col_offset=8)], Name('None', Load(), lineno=284, col_offset=26), lineno=284, col_offset=8), Return(Name('uniq', Load(), lineno=285, col_offset=15), lineno=285, col_offset=8)], [], lineno=251, col_offset=4), FunctionDef('remove', arguments([Name('self', Param(), lineno=287, col_offset=15), Name('key', Param(), lineno=287, col_offset=21)], None, None, []), [Expr(Str("Remove the keyed message; raise KeyError if it doesn't exist.", lineno=288, col_offset=8), lineno=288, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=289, col_offset=8), 'remove', Load(), lineno=289, col_offset=8), [Call(Attribute(Attribute(Name('os', Load(), lineno=289, col_offset=18), 'path', Load(), lineno=289, col_offset=18), 'join', Load(), lineno=289, col_offset=18), [Attribute(Name('self', Load(), lineno=289, col_offset=31), '_path', Load(), lineno=289, col_offset=31), Call(Attribute(Name('self', Load(), lineno=289, col_offset=43), '_lookup', Load(), lineno=289, col_offset=43), [Name('key', Load(), lineno=289, col_offset=56)], [], None, None, lineno=289, col_offset=43)], [], None, None, lineno=289, col_offset=18)], [], None, None, lineno=289, col_offset=8), lineno=289, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=291, col_offset=8), '_last_read', Store(), lineno=291, col_offset=8)], Name('None', Load(), lineno=291, col_offset=26), lineno=291, col_offset=8)], [], lineno=287, col_offset=4), FunctionDef('discard', arguments([Name('self', Param(), lineno=293, col_offset=16), Name('key', Param(), lineno=293, col_offset=22)], None, None, []), [Expr(Str('If the keyed message exists, remove it.', lineno=294, col_offset=8), lineno=294, col_offset=8), TryExcept([Expr(Call(Attribute(Name('self', Load(), lineno=297, col_offset=12), 'remove', Load(), lineno=297, col_offset=12), [Name('key', Load(), lineno=297, col_offset=24)], [], None, None, lineno=297, col_offset=12), lineno=297, col_offset=12)], [ExceptHandler(Name('KeyError', Load(), lineno=298, col_offset=15), None, [Pass( lineno=299, col_offset=12)], lineno=298, col_offset=8), ExceptHandler(Name('OSError', Load(), lineno=300, col_offset=15), Name('e', Store(), lineno=300, col_offset=24), [If(Compare(Attribute(Name('e', Load(), lineno=301, col_offset=15), 'errno', Load(), lineno=301, col_offset=15), [NotEq()], [Attribute(Name('errno', Load(), lineno=301, col_offset=26), 'ENOENT', Load(), lineno=301, col_offset=26)], lineno=301, col_offset=15), [Raise(None, None, None, lineno=302, col_offset=16)], [], lineno=301, col_offset=12)], lineno=300, col_offset=8)], [], lineno=296, col_offset=8)], [], lineno=293, col_offset=4), FunctionDef('__setitem__', arguments([Name('self', Param(), lineno=304, col_offset=20), Name('key', Param(), lineno=304, col_offset=26), Name('message', Param(), lineno=304, col_offset=31)], None, None, []), [Expr(Str("Replace the keyed message; raise KeyError if it doesn't exist.", lineno=305, col_offset=8), lineno=305, col_offset=8), Assign([Name('old_subpath', Store(), lineno=306, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=306, col_offset=22), '_lookup', Load(), lineno=306, col_offset=22), [Name('key', Load(), lineno=306, col_offset=35)], [], None, None, lineno=306, col_offset=22), lineno=306, col_offset=8), Assign([Name('temp_key', Store(), lineno=307, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=307, col_offset=19), 'add', Load(), lineno=307, col_offset=19), [Name('message', Load(), lineno=307, col_offset=28)], [], None, None, lineno=307, col_offset=19), lineno=307, col_offset=8), Assign([Name('temp_subpath', Store(), lineno=308, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=308, col_offset=23), '_lookup', Load(), lineno=308, col_offset=23), [Name('temp_key', Load(), lineno=308, col_offset=36)], [], None, None, lineno=308, col_offset=23), lineno=308, col_offset=8), If(Call(Name('isinstance', Load(), lineno=309, col_offset=11), [Name('message', Load(), lineno=309, col_offset=22), Name('MaildirMessage', Load(), lineno=309, col_offset=31)], [], None, None, lineno=309, col_offset=11), [Assign([Name('dominant_subpath', Store(), lineno=311, col_offset=12)], Name('temp_subpath', Load(), lineno=311, col_offset=31), lineno=311, col_offset=12)], [Assign([Name('dominant_subpath', Store(), lineno=314, col_offset=12)], Name('old_subpath', Load(), lineno=314, col_offset=31), lineno=314, col_offset=12)], lineno=309, col_offset=8), Assign([Name('subdir', Store(), lineno=315, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=315, col_offset=17), 'path', Load(), lineno=315, col_offset=17), 'dirname', Load(), lineno=315, col_offset=17), [Name('dominant_subpath', Load(), lineno=315, col_offset=33)], [], None, None, lineno=315, col_offset=17), lineno=315, col_offset=8), If(Compare(Attribute(Name('self', Load(), lineno=316, col_offset=11), 'colon', Load(), lineno=316, col_offset=11), [In()], [Name('dominant_subpath', Load(), lineno=316, col_offset=25)], lineno=316, col_offset=11), [Assign([Name('suffix', Store(), lineno=317, col_offset=12)], BinOp(Attribute(Name('self', Load(), lineno=317, col_offset=21), 'colon', Load(), lineno=317, col_offset=21), Add(), Subscript(Call(Attribute(Name('dominant_subpath', Load(), lineno=317, col_offset=34), 'split', Load(), lineno=317, col_offset=34), [Attribute(Name('self', Load(), lineno=317, col_offset=57), 'colon', Load(), lineno=317, col_offset=57)], [], None, None, lineno=317, col_offset=34), Index(Num(-1, lineno=317, col_offset=70)), Load(), lineno=317, col_offset=34), lineno=317, col_offset=21), lineno=317, col_offset=12)], [Assign([Name('suffix', Store(), lineno=319, col_offset=12)], Str('', lineno=319, col_offset=21), lineno=319, col_offset=12)], lineno=316, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=320, col_offset=8), 'discard', Load(), lineno=320, col_offset=8), [Name('key', Load(), lineno=320, col_offset=21)], [], None, None, lineno=320, col_offset=8), lineno=320, col_offset=8), Assign([Name('new_path', Store(), lineno=321, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=321, col_offset=19), 'path', Load(), lineno=321, col_offset=19), 'join', Load(), lineno=321, col_offset=19), [Attribute(Name('self', Load(), lineno=321, col_offset=32), '_path', Load(), lineno=321, col_offset=32), Name('subdir', Load(), lineno=321, col_offset=44), BinOp(Name('key', Load(), lineno=321, col_offset=52), Add(), Name('suffix', Load(), lineno=321, col_offset=58), lineno=321, col_offset=52)], [], None, None, lineno=321, col_offset=19), lineno=321, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=322, col_offset=8), 'rename', Load(), lineno=322, col_offset=8), [Call(Attribute(Attribute(Name('os', Load(), lineno=322, col_offset=18), 'path', Load(), lineno=322, col_offset=18), 'join', Load(), lineno=322, col_offset=18), [Attribute(Name('self', Load(), lineno=322, col_offset=31), '_path', Load(), lineno=322, col_offset=31), Name('temp_subpath', Load(), lineno=322, col_offset=43)], [], None, None, lineno=322, col_offset=18), Name('new_path', Load(), lineno=322, col_offset=58)], [], None, None, lineno=322, col_offset=8), lineno=322, col_offset=8), If(Call(Name('isinstance', Load(), lineno=323, col_offset=11), [Name('message', Load(), lineno=323, col_offset=22), Name('MaildirMessage', Load(), lineno=323, col_offset=31)], [], None, None, lineno=323, col_offset=11), [Expr(Call(Attribute(Name('os', Load(), lineno=324, col_offset=12), 'utime', Load(), lineno=324, col_offset=12), [Name('new_path', Load(), lineno=324, col_offset=21), Tuple([Call(Attribute(Attribute(Name('os', Load(), lineno=324, col_offset=32), 'path', Load(), lineno=324, col_offset=32), 'getatime', Load(), lineno=324, col_offset=32), [Name('new_path', Load(), lineno=324, col_offset=49)], [], None, None, lineno=324, col_offset=32), Call(Attribute(Name('message', Load(), lineno=325, col_offset=32), 'get_date', Load(), lineno=325, col_offset=32), [], [], None, None, lineno=325, col_offset=32)], Load(), lineno=324, col_offset=32)], [], None, None, lineno=324, col_offset=12), lineno=324, col_offset=12)], [], lineno=323, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=327, col_offset=8), '_last_read', Store(), lineno=327, col_offset=8)], Name('None', Load(), lineno=327, col_offset=26), lineno=327, col_offset=8)], [], lineno=304, col_offset=4), FunctionDef('get_message', arguments([Name('self', Param(), lineno=329, col_offset=20), Name('key', Param(), lineno=329, col_offset=26)], None, None, []), [Expr(Str('Return a Message representation or raise a KeyError.', lineno=330, col_offset=8), lineno=330, col_offset=8), Assign([Name('subpath', Store(), lineno=331, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=331, col_offset=18), '_lookup', Load(), lineno=331, col_offset=18), [Name('key', Load(), lineno=331, col_offset=31)], [], None, None, lineno=331, col_offset=18), lineno=331, col_offset=8), Assign([Name('f', Store(), lineno=332, col_offset=8)], Call(Name('open', Load(), lineno=332, col_offset=12), [Call(Attribute(Attribute(Name('os', Load(), lineno=332, col_offset=17), 'path', Load(), lineno=332, col_offset=17), 'join', Load(), lineno=332, col_offset=17), [Attribute(Name('self', Load(), lineno=332, col_offset=30), '_path', Load(), lineno=332, col_offset=30), Name('subpath', Load(), lineno=332, col_offset=42)], [], None, None, lineno=332, col_offset=17), Str('r', lineno=332, col_offset=52)], [], None, None, lineno=332, col_offset=12), lineno=332, col_offset=8), TryFinally([If(Attribute(Name('self', Load(), lineno=334, col_offset=15), '_factory', Load(), lineno=334, col_offset=15), [Assign([Name('msg', Store(), lineno=335, col_offset=16)], Call(Attribute(Name('self', Load(), lineno=335, col_offset=22), '_factory', Load(), lineno=335, col_offset=22), [Name('f', Load(), lineno=335, col_offset=36)], [], None, None, lineno=335, col_offset=22), lineno=335, col_offset=16)], [Assign([Name('msg', Store(), lineno=337, col_offset=16)], Call(Name('MaildirMessage', Load(), lineno=337, col_offset=22), [Name('f', Load(), lineno=337, col_offset=37)], [], None, None, lineno=337, col_offset=22), lineno=337, col_offset=16)], lineno=334, col_offset=12)], [Expr(Call(Attribute(Name('f', Load(), lineno=339, col_offset=12), 'close', Load(), lineno=339, col_offset=12), [], [], None, None, lineno=339, col_offset=12), lineno=339, col_offset=12)], lineno=333, col_offset=8), Assign([Tuple([Name('subdir', Store(), lineno=340, col_offset=8), Name('name', Store(), lineno=340, col_offset=16)], Store(), lineno=340, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=340, col_offset=23), 'path', Load(), lineno=340, col_offset=23), 'split', Load(), lineno=340, col_offset=23), [Name('subpath', Load(), lineno=340, col_offset=37)], [], None, None, lineno=340, col_offset=23), lineno=340, col_offset=8), Expr(Call(Attribute(Name('msg', Load(), lineno=341, col_offset=8), 'set_subdir', Load(), lineno=341, col_offset=8), [Name('subdir', Load(), lineno=341, col_offset=23)], [], None, None, lineno=341, col_offset=8), lineno=341, col_offset=8), If(Compare(Attribute(Name('self', Load(), lineno=342, col_offset=11), 'colon', Load(), lineno=342, col_offset=11), [In()], [Name('name', Load(), lineno=342, col_offset=25)], lineno=342, col_offset=11), [Expr(Call(Attribute(Name('msg', Load(), lineno=343, col_offset=12), 'set_info', Load(), lineno=343, col_offset=12), [Subscript(Call(Attribute(Name('name', Load(), lineno=343, col_offset=25), 'split', Load(), lineno=343, col_offset=25), [Attribute(Name('self', Load(), lineno=343, col_offset=36), 'colon', Load(), lineno=343, col_offset=36)], [], None, None, lineno=343, col_offset=25), Index(Num(-1, lineno=343, col_offset=49)), Load(), lineno=343, col_offset=25)], [], None, None, lineno=343, col_offset=12), lineno=343, col_offset=12)], [], lineno=342, col_offset=8), Expr(Call(Attribute(Name('msg', Load(), lineno=344, col_offset=8), 'set_date', Load(), lineno=344, col_offset=8), [Call(Attribute(Attribute(Name('os', Load(), lineno=344, col_offset=21), 'path', Load(), lineno=344, col_offset=21), 'getmtime', Load(), lineno=344, col_offset=21), [Call(Attribute(Attribute(Name('os', Load(), lineno=344, col_offset=38), 'path', Load(), lineno=344, col_offset=38), 'join', Load(), lineno=344, col_offset=38), [Attribute(Name('self', Load(), lineno=344, col_offset=51), '_path', Load(), lineno=344, col_offset=51), Name('subpath', Load(), lineno=344, col_offset=63)], [], None, None, lineno=344, col_offset=38)], [], None, None, lineno=344, col_offset=21)], [], None, None, lineno=344, col_offset=8), lineno=344, col_offset=8), Return(Name('msg', Load(), lineno=345, col_offset=15), lineno=345, col_offset=8)], [], lineno=329, col_offset=4), FunctionDef('get_string', arguments([Name('self', Param(), lineno=347, col_offset=19), Name('key', Param(), lineno=347, col_offset=25)], None, None, []), [Expr(Str('Return a string representation or raise a KeyError.', lineno=348, col_offset=8), lineno=348, col_offset=8), Assign([Name('f', Store(), lineno=349, col_offset=8)], Call(Name('open', Load(), lineno=349, col_offset=12), [Call(Attribute(Attribute(Name('os', Load(), lineno=349, col_offset=17), 'path', Load(), lineno=349, col_offset=17), 'join', Load(), lineno=349, col_offset=17), [Attribute(Name('self', Load(), lineno=349, col_offset=30), '_path', Load(), lineno=349, col_offset=30), Call(Attribute(Name('self', Load(), lineno=349, col_offset=42), '_lookup', Load(), lineno=349, col_offset=42), [Name('key', Load(), lineno=349, col_offset=55)], [], None, None, lineno=349, col_offset=42)], [], None, None, lineno=349, col_offset=17), Str('r', lineno=349, col_offset=62)], [], None, None, lineno=349, col_offset=12), lineno=349, col_offset=8), TryFinally([Return(Call(Attribute(Name('f', Load(), lineno=351, col_offset=19), 'read', Load(), lineno=351, col_offset=19), [], [], None, None, lineno=351, col_offset=19), lineno=351, col_offset=12)], [Expr(Call(Attribute(Name('f', Load(), lineno=353, col_offset=12), 'close', Load(), lineno=353, col_offset=12), [], [], None, None, lineno=353, col_offset=12), lineno=353, col_offset=12)], lineno=350, col_offset=8)], [], lineno=347, col_offset=4), FunctionDef('get_file', arguments([Name('self', Param(), lineno=355, col_offset=17), Name('key', Param(), lineno=355, col_offset=23)], None, None, []), [Expr(Str('Return a file-like representation or raise a KeyError.', lineno=356, col_offset=8), lineno=356, col_offset=8), Assign([Name('f', Store(), lineno=357, col_offset=8)], Call(Name('open', Load(), lineno=357, col_offset=12), [Call(Attribute(Attribute(Name('os', Load(), lineno=357, col_offset=17), 'path', Load(), lineno=357, col_offset=17), 'join', Load(), lineno=357, col_offset=17), [Attribute(Name('self', Load(), lineno=357, col_offset=30), '_path', Load(), lineno=357, col_offset=30), Call(Attribute(Name('self', Load(), lineno=357, col_offset=42), '_lookup', Load(), lineno=357, col_offset=42), [Name('key', Load(), lineno=357, col_offset=55)], [], None, None, lineno=357, col_offset=42)], [], None, None, lineno=357, col_offset=17), Str('rb', lineno=357, col_offset=62)], [], None, None, lineno=357, col_offset=12), lineno=357, col_offset=8), Return(Call(Name('_ProxyFile', Load(), lineno=358, col_offset=15), [Name('f', Load(), lineno=358, col_offset=26)], [], None, None, lineno=358, col_offset=15), lineno=358, col_offset=8)], [], lineno=355, col_offset=4), FunctionDef('iterkeys', arguments([Name('self', Param(), lineno=360, col_offset=17)], None, None, []), [Expr(Str('Return an iterator over keys.', lineno=361, col_offset=8), lineno=361, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=362, col_offset=8), '_refresh', Load(), lineno=362, col_offset=8), [], [], None, None, lineno=362, col_offset=8), lineno=362, col_offset=8), For(Name('key', Store(), lineno=363, col_offset=12), Attribute(Name('self', Load(), lineno=363, col_offset=19), '_toc', Load(), lineno=363, col_offset=19), [TryExcept([Expr(Call(Attribute(Name('self', Load(), lineno=365, col_offset=16), '_lookup', Load(), lineno=365, col_offset=16), [Name('key', Load(), lineno=365, col_offset=29)], [], None, None, lineno=365, col_offset=16), lineno=365, col_offset=16)], [ExceptHandler(Name('KeyError', Load(), lineno=366, col_offset=19), None, [Continue( lineno=367, col_offset=16)], lineno=366, col_offset=12)], [], lineno=364, col_offset=12), Expr(Yield(Name('key', Load(), lineno=368, col_offset=18), lineno=368, col_offset=12), lineno=368, col_offset=12)], [], lineno=363, col_offset=8)], [], lineno=360, col_offset=4), FunctionDef('has_key', arguments([Name('self', Param(), lineno=370, col_offset=16), Name('key', Param(), lineno=370, col_offset=22)], None, None, []), [Expr(Str('Return True if the keyed message exists, False otherwise.', lineno=371, col_offset=8), lineno=371, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=372, col_offset=8), '_refresh', Load(), lineno=372, col_offset=8), [], [], None, None, lineno=372, col_offset=8), lineno=372, col_offset=8), Return(Compare(Name('key', Load(), lineno=373, col_offset=15), [In()], [Attribute(Name('self', Load(), lineno=373, col_offset=22), '_toc', Load(), lineno=373, col_offset=22)], lineno=373, col_offset=15), lineno=373, col_offset=8)], [], lineno=370, col_offset=4), FunctionDef('__len__', arguments([Name('self', Param(), lineno=375, col_offset=16)], None, None, []), [Expr(Str('Return a count of messages in the mailbox.', lineno=376, col_offset=8), lineno=376, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=377, col_offset=8), '_refresh', Load(), lineno=377, col_offset=8), [], [], None, None, lineno=377, col_offset=8), lineno=377, col_offset=8), Return(Call(Name('len', Load(), lineno=378, col_offset=15), [Attribute(Name('self', Load(), lineno=378, col_offset=19), '_toc', Load(), lineno=378, col_offset=19)], [], None, None, lineno=378, col_offset=15), lineno=378, col_offset=8)], [], lineno=375, col_offset=4), FunctionDef('flush', arguments([Name('self', Param(), lineno=380, col_offset=14)], None, None, []), [Expr(Str('Write any pending changes to disk.', lineno=381, col_offset=8), lineno=381, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=384, col_offset=8), '_last_read', Store(), lineno=384, col_offset=8)], Name('None', Load(), lineno=384, col_offset=26), lineno=384, col_offset=8)], [], lineno=380, col_offset=4), FunctionDef('lock', arguments([Name('self', Param(), lineno=386, col_offset=13)], None, None, []), [Expr(Str('Lock the mailbox.', lineno=387, col_offset=8), lineno=387, col_offset=8), Return(None, lineno=388, col_offset=8)], [], lineno=386, col_offset=4), FunctionDef('unlock', arguments([Name('self', Param(), lineno=390, col_offset=15)], None, None, []), [Expr(Str('Unlock the mailbox if it is locked.', lineno=391, col_offset=8), lineno=391, col_offset=8), Return(None, lineno=392, col_offset=8)], [], lineno=390, col_offset=4), FunctionDef('close', arguments([Name('self', Param(), lineno=394, col_offset=14)], None, None, []), [Expr(Str('Flush and close the mailbox.', lineno=395, col_offset=8), lineno=395, col_offset=8), Return(None, lineno=396, col_offset=8)], [], lineno=394, col_offset=4), FunctionDef('list_folders', arguments([Name('self', Param(), lineno=398, col_offset=21)], None, None, []), [Expr(Str('Return a list of folder names.', lineno=399, col_offset=8), lineno=399, col_offset=8), Assign([Name('result', Store(), lineno=400, col_offset=8)], List([], Load(), lineno=400, col_offset=17), lineno=400, col_offset=8), For(Name('entry', Store(), lineno=401, col_offset=12), Call(Attribute(Name('os', Load(), lineno=401, col_offset=21), 'listdir', Load(), lineno=401, col_offset=21), [Attribute(Name('self', Load(), lineno=401, col_offset=32), '_path', Load(), lineno=401, col_offset=32)], [], None, None, lineno=401, col_offset=21), [If(BoolOp(And(), [Compare(Call(Name('len', Load(), lineno=402, col_offset=15), [Name('entry', Load(), lineno=402, col_offset=19)], [], None, None, lineno=402, col_offset=15), [Gt()], [Num(1, lineno=402, col_offset=28)], lineno=402, col_offset=15), Compare(Subscript(Name('entry', Load(), lineno=402, col_offset=34), Index(Num(0, lineno=402, col_offset=40)), Load(), lineno=402, col_offset=34), [Eq()], [Str('.', lineno=402, col_offset=46)], lineno=402, col_offset=34), Call(Attribute(Attribute(Name('os', Load(), lineno=403, col_offset=15), 'path', Load(), lineno=403, col_offset=15), 'isdir', Load(), lineno=403, col_offset=15), [Call(Attribute(Attribute(Name('os', Load(), lineno=403, col_offset=29), 'path', Load(), lineno=403, col_offset=29), 'join', Load(), lineno=403, col_offset=29), [Attribute(Name('self', Load(), lineno=403, col_offset=42), '_path', Load(), lineno=403, col_offset=42), Name('entry', Load(), lineno=403, col_offset=54)], [], None, None, lineno=403, col_offset=29)], [], None, None, lineno=403, col_offset=15)], lineno=402, col_offset=15), [Expr(Call(Attribute(Name('result', Load(), lineno=404, col_offset=16), 'append', Load(), lineno=404, col_offset=16), [Subscript(Name('entry', Load(), lineno=404, col_offset=30), Slice(Num(1, lineno=404, col_offset=36), None, None), Load(), lineno=404, col_offset=30)], [], None, None, lineno=404, col_offset=16), lineno=404, col_offset=16)], [], lineno=402, col_offset=12)], [], lineno=401, col_offset=8), Return(Name('result', Load(), lineno=405, col_offset=15), lineno=405, col_offset=8)], [], lineno=398, col_offset=4), FunctionDef('get_folder', arguments([Name('self', Param(), lineno=407, col_offset=19), Name('folder', Param(), lineno=407, col_offset=25)], None, None, []), [Expr(Str('Return a Maildir instance for the named folder.', lineno=408, col_offset=8), lineno=408, col_offset=8), Return(Call(Name('Maildir', Load(), lineno=409, col_offset=15), [Call(Attribute(Attribute(Name('os', Load(), lineno=409, col_offset=23), 'path', Load(), lineno=409, col_offset=23), 'join', Load(), lineno=409, col_offset=23), [Attribute(Name('self', Load(), lineno=409, col_offset=36), '_path', Load(), lineno=409, col_offset=36), BinOp(Str('.', lineno=409, col_offset=48), Add(), Name('folder', Load(), lineno=409, col_offset=54), lineno=409, col_offset=48)], [], None, None, lineno=409, col_offset=23)], [keyword('factory', Attribute(Name('self', Load(), lineno=410, col_offset=31), '_factory', Load(), lineno=410, col_offset=31)), keyword('create', Name('False', Load(), lineno=411, col_offset=30))], None, None, lineno=409, col_offset=15), lineno=409, col_offset=8)], [], lineno=407, col_offset=4), FunctionDef('add_folder', arguments([Name('self', Param(), lineno=413, col_offset=19), Name('folder', Param(), lineno=413, col_offset=25)], None, None, []), [Expr(Str('Create a folder and return a Maildir instance representing it.', lineno=414, col_offset=8), lineno=414, col_offset=8), Assign([Name('path', Store(), lineno=415, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=415, col_offset=15), 'path', Load(), lineno=415, col_offset=15), 'join', Load(), lineno=415, col_offset=15), [Attribute(Name('self', Load(), lineno=415, col_offset=28), '_path', Load(), lineno=415, col_offset=28), BinOp(Str('.', lineno=415, col_offset=40), Add(), Name('folder', Load(), lineno=415, col_offset=46), lineno=415, col_offset=40)], [], None, None, lineno=415, col_offset=15), lineno=415, col_offset=8), Assign([Name('result', Store(), lineno=416, col_offset=8)], Call(Name('Maildir', Load(), lineno=416, col_offset=17), [Name('path', Load(), lineno=416, col_offset=25)], [keyword('factory', Attribute(Name('self', Load(), lineno=416, col_offset=39), '_factory', Load(), lineno=416, col_offset=39))], None, None, lineno=416, col_offset=17), lineno=416, col_offset=8), Assign([Name('maildirfolder_path', Store(), lineno=417, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=417, col_offset=29), 'path', Load(), lineno=417, col_offset=29), 'join', Load(), lineno=417, col_offset=29), [Name('path', Load(), lineno=417, col_offset=42), Str('maildirfolder', lineno=417, col_offset=48)], [], None, None, lineno=417, col_offset=29), lineno=417, col_offset=8), If(UnaryOp(Not(), Call(Attribute(Attribute(Name('os', Load(), lineno=418, col_offset=15), 'path', Load(), lineno=418, col_offset=15), 'exists', Load(), lineno=418, col_offset=15), [Name('maildirfolder_path', Load(), lineno=418, col_offset=30)], [], None, None, lineno=418, col_offset=15), lineno=418, col_offset=11), [Expr(Call(Attribute(Name('os', Load(), lineno=419, col_offset=12), 'close', Load(), lineno=419, col_offset=12), [Call(Attribute(Name('os', Load(), lineno=419, col_offset=21), 'open', Load(), lineno=419, col_offset=21), [Name('maildirfolder_path', Load(), lineno=419, col_offset=29), BinOp(Attribute(Name('os', Load(), lineno=419, col_offset=49), 'O_CREAT', Load(), lineno=419, col_offset=49), BitOr(), Attribute(Name('os', Load(), lineno=419, col_offset=62), 'O_WRONLY', Load(), lineno=419, col_offset=62), lineno=419, col_offset=49), Num(438, lineno=420, col_offset=16)], [], None, None, lineno=419, col_offset=21)], [], None, None, lineno=419, col_offset=12), lineno=419, col_offset=12)], [], lineno=418, col_offset=8), Return(Name('result', Load(), lineno=421, col_offset=15), lineno=421, col_offset=8)], [], lineno=413, col_offset=4), FunctionDef('remove_folder', arguments([Name('self', Param(), lineno=423, col_offset=22), Name('folder', Param(), lineno=423, col_offset=28)], None, None, []), [Expr(Str('Delete the named folder, which must be empty.', lineno=424, col_offset=8), lineno=424, col_offset=8), Assign([Name('path', Store(), lineno=425, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=425, col_offset=15), 'path', Load(), lineno=425, col_offset=15), 'join', Load(), lineno=425, col_offset=15), [Attribute(Name('self', Load(), lineno=425, col_offset=28), '_path', Load(), lineno=425, col_offset=28), BinOp(Str('.', lineno=425, col_offset=40), Add(), Name('folder', Load(), lineno=425, col_offset=46), lineno=425, col_offset=40)], [], None, None, lineno=425, col_offset=15), lineno=425, col_offset=8), For(Name('entry', Store(), lineno=426, col_offset=12), BinOp(Call(Attribute(Name('os', Load(), lineno=426, col_offset=21), 'listdir', Load(), lineno=426, col_offset=21), [Call(Attribute(Attribute(Name('os', Load(), lineno=426, col_offset=32), 'path', Load(), lineno=426, col_offset=32), 'join', Load(), lineno=426, col_offset=32), [Name('path', Load(), lineno=426, col_offset=45), Str('new', lineno=426, col_offset=51)], [], None, None, lineno=426, col_offset=32)], [], None, None, lineno=426, col_offset=21), Add(), Call(Attribute(Name('os', Load(), lineno=427, col_offset=21), 'listdir', Load(), lineno=427, col_offset=21), [Call(Attribute(Attribute(Name('os', Load(), lineno=427, col_offset=32), 'path', Load(), lineno=427, col_offset=32), 'join', Load(), lineno=427, col_offset=32), [Name('path', Load(), lineno=427, col_offset=45), Str('cur', lineno=427, col_offset=51)], [], None, None, lineno=427, col_offset=32)], [], None, None, lineno=427, col_offset=21), lineno=426, col_offset=21), [If(BoolOp(Or(), [Compare(Call(Name('len', Load(), lineno=428, col_offset=15), [Name('entry', Load(), lineno=428, col_offset=19)], [], None, None, lineno=428, col_offset=15), [Lt()], [Num(1, lineno=428, col_offset=28)], lineno=428, col_offset=15), Compare(Subscript(Name('entry', Load(), lineno=428, col_offset=33), Index(Num(0, lineno=428, col_offset=39)), Load(), lineno=428, col_offset=33), [NotEq()], [Str('.', lineno=428, col_offset=45)], lineno=428, col_offset=33)], lineno=428, col_offset=15), [Raise(Call(Name('NotEmptyError', Load(), lineno=429, col_offset=22), [BinOp(Str('Folder contains message(s): %s', lineno=429, col_offset=36), Mod(), Name('folder', Load(), lineno=429, col_offset=71), lineno=429, col_offset=36)], [], None, None, lineno=429, col_offset=22), None, None, lineno=429, col_offset=16)], [], lineno=428, col_offset=12)], [], lineno=426, col_offset=8), For(Name('entry', Store(), lineno=430, col_offset=12), Call(Attribute(Name('os', Load(), lineno=430, col_offset=21), 'listdir', Load(), lineno=430, col_offset=21), [Name('path', Load(), lineno=430, col_offset=32)], [], None, None, lineno=430, col_offset=21), [If(BoolOp(And(), [Compare(Name('entry', Load(), lineno=431, col_offset=15), [NotEq()], [Str('new', lineno=431, col_offset=24)], lineno=431, col_offset=15), Compare(Name('entry', Load(), lineno=431, col_offset=34), [NotEq()], [Str('cur', lineno=431, col_offset=43)], lineno=431, col_offset=34), Compare(Name('entry', Load(), lineno=431, col_offset=53), [NotEq()], [Str('tmp', lineno=431, col_offset=62)], lineno=431, col_offset=53), Call(Attribute(Attribute(Name('os', Load(), lineno=432, col_offset=15), 'path', Load(), lineno=432, col_offset=15), 'isdir', Load(), lineno=432, col_offset=15), [Call(Attribute(Attribute(Name('os', Load(), lineno=432, col_offset=29), 'path', Load(), lineno=432, col_offset=29), 'join', Load(), lineno=432, col_offset=29), [Name('path', Load(), lineno=432, col_offset=42), Name('entry', Load(), lineno=432, col_offset=48)], [], None, None, lineno=432, col_offset=29)], [], None, None, lineno=432, col_offset=15)], lineno=431, col_offset=15), [Raise(Call(Name('NotEmptyError', Load(), lineno=433, col_offset=22), [BinOp(Str("Folder contains subdirectory '%s': %s", lineno=433, col_offset=36), Mod(), Tuple([Name('folder', Load(), lineno=434, col_offset=37), Name('entry', Load(), lineno=434, col_offset=45)], Load(), lineno=434, col_offset=37), lineno=433, col_offset=36)], [], None, None, lineno=433, col_offset=22), None, None, lineno=433, col_offset=16)], [], lineno=431, col_offset=12)], [], lineno=430, col_offset=8), For(Tuple([Name('root', Store(), lineno=435, col_offset=12), Name('dirs', Store(), lineno=435, col_offset=18), Name('files', Store(), lineno=435, col_offset=24)], Store(), lineno=435, col_offset=12), Call(Attribute(Name('os', Load(), lineno=435, col_offset=33), 'walk', Load(), lineno=435, col_offset=33), [Name('path', Load(), lineno=435, col_offset=41)], [keyword('topdown', Name('False', Load(), lineno=435, col_offset=55))], None, None, lineno=435, col_offset=33), [For(Name('entry', Store(), lineno=436, col_offset=16), Name('files', Load(), lineno=436, col_offset=25), [Expr(Call(Attribute(Name('os', Load(), lineno=437, col_offset=16), 'remove', Load(), lineno=437, col_offset=16), [Call(Attribute(Attribute(Name('os', Load(), lineno=437, col_offset=26), 'path', Load(), lineno=437, col_offset=26), 'join', Load(), lineno=437, col_offset=26), [Name('root', Load(), lineno=437, col_offset=39), Name('entry', Load(), lineno=437, col_offset=45)], [], None, None, lineno=437, col_offset=26)], [], None, None, lineno=437, col_offset=16), lineno=437, col_offset=16)], [], lineno=436, col_offset=12), For(Name('entry', Store(), lineno=438, col_offset=16), Name('dirs', Load(), lineno=438, col_offset=25), [Expr(Call(Attribute(Name('os', Load(), lineno=439, col_offset=16), 'rmdir', Load(), lineno=439, col_offset=16), [Call(Attribute(Attribute(Name('os', Load(), lineno=439, col_offset=25), 'path', Load(), lineno=439, col_offset=25), 'join', Load(), lineno=439, col_offset=25), [Name('root', Load(), lineno=439, col_offset=38), Name('entry', Load(), lineno=439, col_offset=44)], [], None, None, lineno=439, col_offset=25)], [], None, None, lineno=439, col_offset=16), lineno=439, col_offset=16)], [], lineno=438, col_offset=12)], [], lineno=435, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=440, col_offset=8), 'rmdir', Load(), lineno=440, col_offset=8), [Name('path', Load(), lineno=440, col_offset=17)], [], None, None, lineno=440, col_offset=8), lineno=440, col_offset=8)], [], lineno=423, col_offset=4), FunctionDef('clean', arguments([Name('self', Param(), lineno=442, col_offset=14)], None, None, []), [Expr(Str('Delete old files in "tmp".', lineno=443, col_offset=8), lineno=443, col_offset=8), Assign([Name('now', Store(), lineno=444, col_offset=8)], Call(Attribute(Name('time', Load(), lineno=444, col_offset=14), 'time', Load(), lineno=444, col_offset=14), [], [], None, None, lineno=444, col_offset=14), lineno=444, col_offset=8), For(Name('entry', Store(), lineno=445, col_offset=12), Call(Attribute(Name('os', Load(), lineno=445, col_offset=21), 'listdir', Load(), lineno=445, col_offset=21), [Call(Attribute(Attribute(Name('os', Load(), lineno=445, col_offset=32), 'path', Load(), lineno=445, col_offset=32), 'join', Load(), lineno=445, col_offset=32), [Attribute(Name('self', Load(), lineno=445, col_offset=45), '_path', Load(), lineno=445, col_offset=45), Str('tmp', lineno=445, col_offset=57)], [], None, None, lineno=445, col_offset=32)], [], None, None, lineno=445, col_offset=21), [Assign([Name('path', Store(), lineno=446, col_offset=12)], Call(Attribute(Attribute(Name('os', Load(), lineno=446, col_offset=19), 'path', Load(), lineno=446, col_offset=19), 'join', Load(), lineno=446, col_offset=19), [Attribute(Name('self', Load(), lineno=446, col_offset=32), '_path', Load(), lineno=446, col_offset=32), Str('tmp', lineno=446, col_offset=44), Name('entry', Load(), lineno=446, col_offset=51)], [], None, None, lineno=446, col_offset=19), lineno=446, col_offset=12), If(Compare(BinOp(Name('now', Load(), lineno=447, col_offset=15), Sub(), Call(Attribute(Attribute(Name('os', Load(), lineno=447, col_offset=21), 'path', Load(), lineno=447, col_offset=21), 'getatime', Load(), lineno=447, col_offset=21), [Name('path', Load(), lineno=447, col_offset=38)], [], None, None, lineno=447, col_offset=21), lineno=447, col_offset=15), [Gt()], [Num(129600, lineno=447, col_offset=46)], lineno=447, col_offset=15), [Expr(Call(Attribute(Name('os', Load(), lineno=448, col_offset=16), 'remove', Load(), lineno=448, col_offset=16), [Name('path', Load(), lineno=448, col_offset=26)], [], None, None, lineno=448, col_offset=16), lineno=448, col_offset=16)], [], lineno=447, col_offset=12)], [], lineno=445, col_offset=8)], [], lineno=442, col_offset=4), Assign([Name('_count', Store(), lineno=450, col_offset=4)], Num(1, lineno=450, col_offset=13), lineno=450, col_offset=4), FunctionDef('_create_tmp', arguments([Name('self', Param(), lineno=452, col_offset=20)], None, None, []), [Expr(Str('Create a file in the tmp subdirectory and open and return it.', lineno=453, col_offset=8), lineno=453, col_offset=8), Assign([Name('now', Store(), lineno=454, col_offset=8)], Call(Attribute(Name('time', Load(), lineno=454, col_offset=14), 'time', Load(), lineno=454, col_offset=14), [], [], None, None, lineno=454, col_offset=14), lineno=454, col_offset=8), Assign([Name('hostname', Store(), lineno=455, col_offset=8)], Call(Attribute(Name('socket', Load(), lineno=455, col_offset=19), 'gethostname', Load(), lineno=455, col_offset=19), [], [], None, None, lineno=455, col_offset=19), lineno=455, col_offset=8), If(Compare(Str('/', lineno=456, col_offset=11), [In()], [Name('hostname', Load(), lineno=456, col_offset=18)], lineno=456, col_offset=11), [Assign([Name('hostname', Store(), lineno=457, col_offset=12)], Call(Attribute(Name('hostname', Load(), lineno=457, col_offset=23), 'replace', Load(), lineno=457, col_offset=23), [Str('/', lineno=457, col_offset=40), Str('\\057', lineno=457, col_offset=45)], [], None, None, lineno=457, col_offset=23), lineno=457, col_offset=12)], [], lineno=456, col_offset=8), If(Compare(Str(':', lineno=458, col_offset=11), [In()], [Name('hostname', Load(), lineno=458, col_offset=18)], lineno=458, col_offset=11), [Assign([Name('hostname', Store(), lineno=459, col_offset=12)], Call(Attribute(Name('hostname', Load(), lineno=459, col_offset=23), 'replace', Load(), lineno=459, col_offset=23), [Str(':', lineno=459, col_offset=40), Str('\\072', lineno=459, col_offset=45)], [], None, None, lineno=459, col_offset=23), lineno=459, col_offset=12)], [], lineno=458, col_offset=8), Assign([Name('uniq', Store(), lineno=460, col_offset=8)], BinOp(Str('%s.M%sP%sQ%s.%s', lineno=460, col_offset=15), Mod(), Tuple([Call(Name('int', Load(), lineno=460, col_offset=36), [Name('now', Load(), lineno=460, col_offset=40)], [], None, None, lineno=460, col_offset=36), Call(Name('int', Load(), lineno=460, col_offset=46), [BinOp(BinOp(Name('now', Load(), lineno=460, col_offset=50), Mod(), Num(1, lineno=460, col_offset=56), lineno=460, col_offset=50), Mult(), Num(1000000.0, lineno=460, col_offset=60), lineno=460, col_offset=58)], [], None, None, lineno=460, col_offset=46), Call(Attribute(Name('os', Load(), lineno=460, col_offset=66), 'getpid', Load(), lineno=460, col_offset=66), [], [], None, None, lineno=460, col_offset=66), Attribute(Name('Maildir', Load(), lineno=461, col_offset=36), '_count', Load(), lineno=461, col_offset=36), Name('hostname', Load(), lineno=461, col_offset=52)], Load(), lineno=460, col_offset=36), lineno=460, col_offset=15), lineno=460, col_offset=8), Assign([Name('path', Store(), lineno=462, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=462, col_offset=15), 'path', Load(), lineno=462, col_offset=15), 'join', Load(), lineno=462, col_offset=15), [Attribute(Name('self', Load(), lineno=462, col_offset=28), '_path', Load(), lineno=462, col_offset=28), Str('tmp', lineno=462, col_offset=40), Name('uniq', Load(), lineno=462, col_offset=47)], [], None, None, lineno=462, col_offset=15), lineno=462, col_offset=8), TryExcept([Expr(Call(Attribute(Name('os', Load(), lineno=464, col_offset=12), 'stat', Load(), lineno=464, col_offset=12), [Name('path', Load(), lineno=464, col_offset=20)], [], None, None, lineno=464, col_offset=12), lineno=464, col_offset=12)], [ExceptHandler(Name('OSError', Load(), lineno=465, col_offset=15), Name('e', Store(), lineno=465, col_offset=24), [If(Compare(Attribute(Name('e', Load(), lineno=466, col_offset=15), 'errno', Load(), lineno=466, col_offset=15), [Eq()], [Attribute(Name('errno', Load(), lineno=466, col_offset=26), 'ENOENT', Load(), lineno=466, col_offset=26)], lineno=466, col_offset=15), [AugAssign(Attribute(Name('Maildir', Load(), lineno=467, col_offset=16), '_count', Store(), lineno=467, col_offset=16), Add(), Num(1, lineno=467, col_offset=34), lineno=467, col_offset=16), TryExcept([Return(Call(Name('_create_carefully', Load(), lineno=469, col_offset=27), [Name('path', Load(), lineno=469, col_offset=45)], [], None, None, lineno=469, col_offset=27), lineno=469, col_offset=20)], [ExceptHandler(Name('OSError', Load(), lineno=470, col_offset=23), Name('e', Store(), lineno=470, col_offset=32), [If(Compare(Attribute(Name('e', Load(), lineno=471, col_offset=23), 'errno', Load(), lineno=471, col_offset=23), [NotEq()], [Attribute(Name('errno', Load(), lineno=471, col_offset=34), 'EEXIST', Load(), lineno=471, col_offset=34)], lineno=471, col_offset=23), [Raise(None, None, None, lineno=472, col_offset=24)], [], lineno=471, col_offset=20)], lineno=470, col_offset=16)], [], lineno=468, col_offset=16)], [Raise(None, None, None, lineno=474, col_offset=16)], lineno=466, col_offset=12)], lineno=465, col_offset=8)], [], lineno=463, col_offset=8), Raise(Call(Name('ExternalClashError', Load(), lineno=477, col_offset=14), [BinOp(Str('Name clash prevented file creation: %s', lineno=477, col_offset=33), Mod(), Name('path', Load(), lineno=478, col_offset=33), lineno=477, col_offset=33)], [], None, None, lineno=477, col_offset=14), None, None, lineno=477, col_offset=8)], [], lineno=452, col_offset=4), FunctionDef('_refresh', arguments([Name('self', Param(), lineno=480, col_offset=17)], None, None, []), [Expr(Str('Update table of contents mapping.', lineno=481, col_offset=8), lineno=481, col_offset=8), If(Compare(Attribute(Name('self', Load(), lineno=482, col_offset=11), '_last_read', Load(), lineno=482, col_offset=11), [IsNot()], [Name('None', Load(), lineno=482, col_offset=34)], lineno=482, col_offset=11), [For(Name('subdir', Store(), lineno=483, col_offset=16), Tuple([Str('new', lineno=483, col_offset=27), Str('cur', lineno=483, col_offset=34)], Load(), lineno=483, col_offset=27), [Assign([Name('mtime', Store(), lineno=484, col_offset=16)], Call(Attribute(Attribute(Name('os', Load(), lineno=484, col_offset=24), 'path', Load(), lineno=484, col_offset=24), 'getmtime', Load(), lineno=484, col_offset=24), [Call(Attribute(Attribute(Name('os', Load(), lineno=484, col_offset=41), 'path', Load(), lineno=484, col_offset=41), 'join', Load(), lineno=484, col_offset=41), [Attribute(Name('self', Load(), lineno=484, col_offset=54), '_path', Load(), lineno=484, col_offset=54), Name('subdir', Load(), lineno=484, col_offset=66)], [], None, None, lineno=484, col_offset=41)], [], None, None, lineno=484, col_offset=24), lineno=484, col_offset=16), If(Compare(Name('mtime', Load(), lineno=485, col_offset=19), [Gt()], [Attribute(Name('self', Load(), lineno=485, col_offset=27), '_last_read', Load(), lineno=485, col_offset=27)], lineno=485, col_offset=19), [Break( lineno=486, col_offset=20)], [], lineno=485, col_offset=16)], [Return(None, lineno=488, col_offset=16)], lineno=483, col_offset=12)], [], lineno=482, col_offset=8), Assign([Name('now', Store(), lineno=496, col_offset=8)], BinOp(Call(Attribute(Name('time', Load(), lineno=496, col_offset=14), 'time', Load(), lineno=496, col_offset=14), [], [], None, None, lineno=496, col_offset=14), Sub(), Num(1, lineno=496, col_offset=28), lineno=496, col_offset=14), lineno=496, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=498, col_offset=8), '_toc', Store(), lineno=498, col_offset=8)], Dict([], [], lineno=498, col_offset=20), lineno=498, col_offset=8), FunctionDef('update_dir', arguments([Name('subdir', Param(), lineno=499, col_offset=24)], None, None, []), [Assign([Name('path', Store(), lineno=500, col_offset=12)], Call(Attribute(Attribute(Name('os', Load(), lineno=500, col_offset=19), 'path', Load(), lineno=500, col_offset=19), 'join', Load(), lineno=500, col_offset=19), [Attribute(Name('self', Load(), lineno=500, col_offset=32), '_path', Load(), lineno=500, col_offset=32), Name('subdir', Load(), lineno=500, col_offset=44)], [], None, None, lineno=500, col_offset=19), lineno=500, col_offset=12), For(Name('entry', Store(), lineno=501, col_offset=16), Call(Attribute(Name('os', Load(), lineno=501, col_offset=25), 'listdir', Load(), lineno=501, col_offset=25), [Name('path', Load(), lineno=501, col_offset=36)], [], None, None, lineno=501, col_offset=25), [Assign([Name('p', Store(), lineno=502, col_offset=16)], Call(Attribute(Attribute(Name('os', Load(), lineno=502, col_offset=20), 'path', Load(), lineno=502, col_offset=20), 'join', Load(), lineno=502, col_offset=20), [Name('path', Load(), lineno=502, col_offset=33), Name('entry', Load(), lineno=502, col_offset=39)], [], None, None, lineno=502, col_offset=20), lineno=502, col_offset=16), If(Call(Attribute(Attribute(Name('os', Load(), lineno=503, col_offset=19), 'path', Load(), lineno=503, col_offset=19), 'isdir', Load(), lineno=503, col_offset=19), [Name('p', Load(), lineno=503, col_offset=33)], [], None, None, lineno=503, col_offset=19), [Continue( lineno=504, col_offset=20)], [], lineno=503, col_offset=16), Assign([Name('uniq', Store(), lineno=505, col_offset=16)], Subscript(Call(Attribute(Name('entry', Load(), lineno=505, col_offset=23), 'split', Load(), lineno=505, col_offset=23), [Attribute(Name('self', Load(), lineno=505, col_offset=35), 'colon', Load(), lineno=505, col_offset=35)], [], None, None, lineno=505, col_offset=23), Index(Num(0, lineno=505, col_offset=47)), Load(), lineno=505, col_offset=23), lineno=505, col_offset=16), Assign([Subscript(Attribute(Name('self', Load(), lineno=506, col_offset=16), '_toc', Load(), lineno=506, col_offset=16), Index(Name('uniq', Load(), lineno=506, col_offset=26)), Store(), lineno=506, col_offset=16)], Call(Attribute(Attribute(Name('os', Load(), lineno=506, col_offset=34), 'path', Load(), lineno=506, col_offset=34), 'join', Load(), lineno=506, col_offset=34), [Name('subdir', Load(), lineno=506, col_offset=47), Name('entry', Load(), lineno=506, col_offset=55)], [], None, None, lineno=506, col_offset=34), lineno=506, col_offset=16)], [], lineno=501, col_offset=12)], [], lineno=499, col_offset=8), Expr(Call(Name('update_dir', Load(), lineno=508, col_offset=8), [Str('new', lineno=508, col_offset=19)], [], None, None, lineno=508, col_offset=8), lineno=508, col_offset=8), Expr(Call(Name('update_dir', Load(), lineno=509, col_offset=8), [Str('cur', lineno=509, col_offset=19)], [], None, None, lineno=509, col_offset=8), lineno=509, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=511, col_offset=8), '_last_read', Store(), lineno=511, col_offset=8)], Name('now', Load(), lineno=511, col_offset=26), lineno=511, col_offset=8)], [], lineno=480, col_offset=4), FunctionDef('_lookup', arguments([Name('self', Param(), lineno=513, col_offset=16), Name('key', Param(), lineno=513, col_offset=22)], None, None, []), [Expr(Str('Use TOC to return subpath for given key, or raise a KeyError.', lineno=514, col_offset=8), lineno=514, col_offset=8), TryExcept([If(Call(Attribute(Attribute(Name('os', Load(), lineno=516, col_offset=15), 'path', Load(), lineno=516, col_offset=15), 'exists', Load(), lineno=516, col_offset=15), [Call(Attribute(Attribute(Name('os', Load(), lineno=516, col_offset=30), 'path', Load(), lineno=516, col_offset=30), 'join', Load(), lineno=516, col_offset=30), [Attribute(Name('self', Load(), lineno=516, col_offset=43), '_path', Load(), lineno=516, col_offset=43), Subscript(Attribute(Name('self', Load(), lineno=516, col_offset=55), '_toc', Load(), lineno=516, col_offset=55), Index(Name('key', Load(), lineno=516, col_offset=65)), Load(), lineno=516, col_offset=55)], [], None, None, lineno=516, col_offset=30)], [], None, None, lineno=516, col_offset=15), [Return(Subscript(Attribute(Name('self', Load(), lineno=517, col_offset=23), '_toc', Load(), lineno=517, col_offset=23), Index(Name('key', Load(), lineno=517, col_offset=33)), Load(), lineno=517, col_offset=23), lineno=517, col_offset=16)], [], lineno=516, col_offset=12)], [ExceptHandler(Name('KeyError', Load(), lineno=518, col_offset=15), None, [Pass( lineno=519, col_offset=12)], lineno=518, col_offset=8)], [], lineno=515, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=520, col_offset=8), '_refresh', Load(), lineno=520, col_offset=8), [], [], None, None, lineno=520, col_offset=8), lineno=520, col_offset=8), TryExcept([Return(Subscript(Attribute(Name('self', Load(), lineno=522, col_offset=19), '_toc', Load(), lineno=522, col_offset=19), Index(Name('key', Load(), lineno=522, col_offset=29)), Load(), lineno=522, col_offset=19), lineno=522, col_offset=12)], [ExceptHandler(Name('KeyError', Load(), lineno=523, col_offset=15), None, [Raise(Call(Name('KeyError', Load(), lineno=524, col_offset=18), [BinOp(Str('No message with key: %s', lineno=524, col_offset=27), Mod(), Name('key', Load(), lineno=524, col_offset=55), lineno=524, col_offset=27)], [], None, None, lineno=524, col_offset=18), None, None, lineno=524, col_offset=12)], lineno=523, col_offset=8)], [], lineno=521, col_offset=8)], [], lineno=513, col_offset=4), FunctionDef('next', arguments([Name('self', Param(), lineno=527, col_offset=13)], None, None, []), [Expr(Str('Return the next message in a one-time iteration.', lineno=528, col_offset=8), lineno=528, col_offset=8), If(UnaryOp(Not(), Call(Name('hasattr', Load(), lineno=529, col_offset=15), [Name('self', Load(), lineno=529, col_offset=23), Str('_onetime_keys', lineno=529, col_offset=29)], [], None, None, lineno=529, col_offset=15), lineno=529, col_offset=11), [Assign([Attribute(Name('self', Load(), lineno=530, col_offset=12), '_onetime_keys', Store(), lineno=530, col_offset=12)], Call(Attribute(Name('self', Load(), lineno=530, col_offset=33), 'iterkeys', Load(), lineno=530, col_offset=33), [], [], None, None, lineno=530, col_offset=33), lineno=530, col_offset=12)], [], lineno=529, col_offset=8), While(Name('True', Load(), lineno=531, col_offset=14), [TryExcept([Return(Subscript(Name('self', Load(), lineno=533, col_offset=23), Index(Call(Attribute(Attribute(Name('self', Load(), lineno=533, col_offset=28), '_onetime_keys', Load(), lineno=533, col_offset=28), 'next', Load(), lineno=533, col_offset=28), [], [], None, None, lineno=533, col_offset=28)), Load(), lineno=533, col_offset=23), lineno=533, col_offset=16)], [ExceptHandler(Name('StopIteration', Load(), lineno=534, col_offset=19), None, [Return(Name('None', Load(), lineno=535, col_offset=23), lineno=535, col_offset=16)], lineno=534, col_offset=12), ExceptHandler(Name('KeyError', Load(), lineno=536, col_offset=19), None, [Continue( lineno=537, col_offset=16)], lineno=536, col_offset=12)], [], lineno=532, col_offset=12)], [], lineno=531, col_offset=8)], [], lineno=527, col_offset=4)], [], lineno=229, col_offset=0), ClassDef('_singlefileMailbox', [Name('Mailbox', Load(), lineno=540, col_offset=25)], [Expr(Str('A single-file mailbox.', lineno=541, col_offset=4), lineno=541, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=543, col_offset=17), Name('path', Param(), lineno=543, col_offset=23), Name('factory', Param(), lineno=543, col_offset=29), Name('create', Param(), lineno=543, col_offset=43)], None, None, [Name('None', Load(), lineno=543, col_offset=37), Name('True', Load(), lineno=543, col_offset=50)]), [Expr(Str('Initialize a single-file mailbox.', lineno=544, col_offset=8), lineno=544, col_offset=8), Expr(Call(Attribute(Name('Mailbox', Load(), lineno=545, col_offset=8), '__init__', Load(), lineno=545, col_offset=8), [Name('self', Load(), lineno=545, col_offset=25), Name('path', Load(), lineno=545, col_offset=31), Name('factory', Load(), lineno=545, col_offset=37), Name('create', Load(), lineno=545, col_offset=46)], [], None, None, lineno=545, col_offset=8), lineno=545, col_offset=8), TryExcept([Assign([Name('f', Store(), lineno=547, col_offset=12)], Call(Name('open', Load(), lineno=547, col_offset=16), [Attribute(Name('self', Load(), lineno=547, col_offset=21), '_path', Load(), lineno=547, col_offset=21), Str('rb+', lineno=547, col_offset=33)], [], None, None, lineno=547, col_offset=16), lineno=547, col_offset=12)], [ExceptHandler(Name('IOError', Load(), lineno=548, col_offset=15), Name('e', Store(), lineno=548, col_offset=24), [If(Compare(Attribute(Name('e', Load(), lineno=549, col_offset=15), 'errno', Load(), lineno=549, col_offset=15), [Eq()], [Attribute(Name('errno', Load(), lineno=549, col_offset=26), 'ENOENT', Load(), lineno=549, col_offset=26)], lineno=549, col_offset=15), [If(Name('create', Load(), lineno=550, col_offset=19), [Assign([Name('f', Store(), lineno=551, col_offset=20)], Call(Name('open', Load(), lineno=551, col_offset=24), [Attribute(Name('self', Load(), lineno=551, col_offset=29), '_path', Load(), lineno=551, col_offset=29), Str('wb+', lineno=551, col_offset=41)], [], None, None, lineno=551, col_offset=24), lineno=551, col_offset=20)], [Raise(Call(Name('NoSuchMailboxError', Load(), lineno=553, col_offset=26), [Attribute(Name('self', Load(), lineno=553, col_offset=45), '_path', Load(), lineno=553, col_offset=45)], [], None, None, lineno=553, col_offset=26), None, None, lineno=553, col_offset=20)], lineno=550, col_offset=16)], [If(Compare(Attribute(Name('e', Load(), lineno=554, col_offset=17), 'errno', Load(), lineno=554, col_offset=17), [Eq()], [Attribute(Name('errno', Load(), lineno=554, col_offset=28), 'EACCES', Load(), lineno=554, col_offset=28)], lineno=554, col_offset=17), [Assign([Name('f', Store(), lineno=555, col_offset=16)], Call(Name('open', Load(), lineno=555, col_offset=20), [Attribute(Name('self', Load(), lineno=555, col_offset=25), '_path', Load(), lineno=555, col_offset=25), Str('rb', lineno=555, col_offset=37)], [], None, None, lineno=555, col_offset=20), lineno=555, col_offset=16)], [Raise(None, None, None, lineno=557, col_offset=16)], lineno=554, col_offset=17)], lineno=549, col_offset=12)], lineno=548, col_offset=8)], [], lineno=546, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=558, col_offset=8), '_file', Store(), lineno=558, col_offset=8)], Name('f', Load(), lineno=558, col_offset=21), lineno=558, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=559, col_offset=8), '_toc', Store(), lineno=559, col_offset=8)], Name('None', Load(), lineno=559, col_offset=20), lineno=559, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=560, col_offset=8), '_next_key', Store(), lineno=560, col_offset=8)], Num(0, lineno=560, col_offset=25), lineno=560, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=561, col_offset=8), '_pending', Store(), lineno=561, col_offset=8)], Name('False', Load(), lineno=561, col_offset=24), lineno=561, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=562, col_offset=8), '_locked', Store(), lineno=562, col_offset=8)], Name('False', Load(), lineno=562, col_offset=23), lineno=562, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=563, col_offset=8), '_file_length', Store(), lineno=563, col_offset=8)], Name('None', Load(), lineno=563, col_offset=28), lineno=563, col_offset=8)], [], lineno=543, col_offset=4), FunctionDef('add', arguments([Name('self', Param(), lineno=565, col_offset=12), Name('message', Param(), lineno=565, col_offset=18)], None, None, []), [Expr(Str('Add message and return assigned key.', lineno=566, col_offset=8), lineno=566, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=567, col_offset=8), '_lookup', Load(), lineno=567, col_offset=8), [], [], None, None, lineno=567, col_offset=8), lineno=567, col_offset=8), Assign([Subscript(Attribute(Name('self', Load(), lineno=568, col_offset=8), '_toc', Load(), lineno=568, col_offset=8), Index(Attribute(Name('self', Load(), lineno=568, col_offset=18), '_next_key', Load(), lineno=568, col_offset=18)), Store(), lineno=568, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=568, col_offset=36), '_append_message', Load(), lineno=568, col_offset=36), [Name('message', Load(), lineno=568, col_offset=57)], [], None, None, lineno=568, col_offset=36), lineno=568, col_offset=8), AugAssign(Attribute(Name('self', Load(), lineno=569, col_offset=8), '_next_key', Store(), lineno=569, col_offset=8), Add(), Num(1, lineno=569, col_offset=26), lineno=569, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=570, col_offset=8), '_pending', Store(), lineno=570, col_offset=8)], Name('True', Load(), lineno=570, col_offset=24), lineno=570, col_offset=8), Return(BinOp(Attribute(Name('self', Load(), lineno=571, col_offset=15), '_next_key', Load(), lineno=571, col_offset=15), Sub(), Num(1, lineno=571, col_offset=32), lineno=571, col_offset=15), lineno=571, col_offset=8)], [], lineno=565, col_offset=4), FunctionDef('remove', arguments([Name('self', Param(), lineno=573, col_offset=15), Name('key', Param(), lineno=573, col_offset=21)], None, None, []), [Expr(Str("Remove the keyed message; raise KeyError if it doesn't exist.", lineno=574, col_offset=8), lineno=574, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=575, col_offset=8), '_lookup', Load(), lineno=575, col_offset=8), [Name('key', Load(), lineno=575, col_offset=21)], [], None, None, lineno=575, col_offset=8), lineno=575, col_offset=8), Delete([Subscript(Attribute(Name('self', Load(), lineno=576, col_offset=12), '_toc', Load(), lineno=576, col_offset=12), Index(Name('key', Load(), lineno=576, col_offset=22)), Del(), lineno=576, col_offset=12)], lineno=576, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=577, col_offset=8), '_pending', Store(), lineno=577, col_offset=8)], Name('True', Load(), lineno=577, col_offset=24), lineno=577, col_offset=8)], [], lineno=573, col_offset=4), FunctionDef('__setitem__', arguments([Name('self', Param(), lineno=579, col_offset=20), Name('key', Param(), lineno=579, col_offset=26), Name('message', Param(), lineno=579, col_offset=31)], None, None, []), [Expr(Str("Replace the keyed message; raise KeyError if it doesn't exist.", lineno=580, col_offset=8), lineno=580, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=581, col_offset=8), '_lookup', Load(), lineno=581, col_offset=8), [Name('key', Load(), lineno=581, col_offset=21)], [], None, None, lineno=581, col_offset=8), lineno=581, col_offset=8), Assign([Subscript(Attribute(Name('self', Load(), lineno=582, col_offset=8), '_toc', Load(), lineno=582, col_offset=8), Index(Name('key', Load(), lineno=582, col_offset=18)), Store(), lineno=582, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=582, col_offset=25), '_append_message', Load(), lineno=582, col_offset=25), [Name('message', Load(), lineno=582, col_offset=46)], [], None, None, lineno=582, col_offset=25), lineno=582, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=583, col_offset=8), '_pending', Store(), lineno=583, col_offset=8)], Name('True', Load(), lineno=583, col_offset=24), lineno=583, col_offset=8)], [], lineno=579, col_offset=4), FunctionDef('iterkeys', arguments([Name('self', Param(), lineno=585, col_offset=17)], None, None, []), [Expr(Str('Return an iterator over keys.', lineno=586, col_offset=8), lineno=586, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=587, col_offset=8), '_lookup', Load(), lineno=587, col_offset=8), [], [], None, None, lineno=587, col_offset=8), lineno=587, col_offset=8), For(Name('key', Store(), lineno=588, col_offset=12), Call(Attribute(Attribute(Name('self', Load(), lineno=588, col_offset=19), '_toc', Load(), lineno=588, col_offset=19), 'keys', Load(), lineno=588, col_offset=19), [], [], None, None, lineno=588, col_offset=19), [Expr(Yield(Name('key', Load(), lineno=589, col_offset=18), lineno=589, col_offset=12), lineno=589, col_offset=12)], [], lineno=588, col_offset=8)], [], lineno=585, col_offset=4), FunctionDef('has_key', arguments([Name('self', Param(), lineno=591, col_offset=16), Name('key', Param(), lineno=591, col_offset=22)], None, None, []), [Expr(Str('Return True if the keyed message exists, False otherwise.', lineno=592, col_offset=8), lineno=592, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=593, col_offset=8), '_lookup', Load(), lineno=593, col_offset=8), [], [], None, None, lineno=593, col_offset=8), lineno=593, col_offset=8), Return(Compare(Name('key', Load(), lineno=594, col_offset=15), [In()], [Attribute(Name('self', Load(), lineno=594, col_offset=22), '_toc', Load(), lineno=594, col_offset=22)], lineno=594, col_offset=15), lineno=594, col_offset=8)], [], lineno=591, col_offset=4), FunctionDef('__len__', arguments([Name('self', Param(), lineno=596, col_offset=16)], None, None, []), [Expr(Str('Return a count of messages in the mailbox.', lineno=597, col_offset=8), lineno=597, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=598, col_offset=8), '_lookup', Load(), lineno=598, col_offset=8), [], [], None, None, lineno=598, col_offset=8), lineno=598, col_offset=8), Return(Call(Name('len', Load(), lineno=599, col_offset=15), [Attribute(Name('self', Load(), lineno=599, col_offset=19), '_toc', Load(), lineno=599, col_offset=19)], [], None, None, lineno=599, col_offset=15), lineno=599, col_offset=8)], [], lineno=596, col_offset=4), FunctionDef('lock', arguments([Name('self', Param(), lineno=601, col_offset=13)], None, None, []), [Expr(Str('Lock the mailbox.', lineno=602, col_offset=8), lineno=602, col_offset=8), If(UnaryOp(Not(), Attribute(Name('self', Load(), lineno=603, col_offset=15), '_locked', Load(), lineno=603, col_offset=15), lineno=603, col_offset=11), [Expr(Call(Name('_lock_file', Load(), lineno=604, col_offset=12), [Attribute(Name('self', Load(), lineno=604, col_offset=23), '_file', Load(), lineno=604, col_offset=23)], [], None, None, lineno=604, col_offset=12), lineno=604, col_offset=12), Assign([Attribute(Name('self', Load(), lineno=605, col_offset=12), '_locked', Store(), lineno=605, col_offset=12)], Name('True', Load(), lineno=605, col_offset=27), lineno=605, col_offset=12)], [], lineno=603, col_offset=8)], [], lineno=601, col_offset=4), FunctionDef('unlock', arguments([Name('self', Param(), lineno=607, col_offset=15)], None, None, []), [Expr(Str('Unlock the mailbox if it is locked.', lineno=608, col_offset=8), lineno=608, col_offset=8), If(Attribute(Name('self', Load(), lineno=609, col_offset=11), '_locked', Load(), lineno=609, col_offset=11), [Expr(Call(Name('_unlock_file', Load(), lineno=610, col_offset=12), [Attribute(Name('self', Load(), lineno=610, col_offset=25), '_file', Load(), lineno=610, col_offset=25)], [], None, None, lineno=610, col_offset=12), lineno=610, col_offset=12), Assign([Attribute(Name('self', Load(), lineno=611, col_offset=12), '_locked', Store(), lineno=611, col_offset=12)], Name('False', Load(), lineno=611, col_offset=27), lineno=611, col_offset=12)], [], lineno=609, col_offset=8)], [], lineno=607, col_offset=4), FunctionDef('flush', arguments([Name('self', Param(), lineno=613, col_offset=14)], None, None, []), [Expr(Str('Write any pending changes to disk.', lineno=614, col_offset=8), lineno=614, col_offset=8), If(UnaryOp(Not(), Attribute(Name('self', Load(), lineno=615, col_offset=15), '_pending', Load(), lineno=615, col_offset=15), lineno=615, col_offset=11), [Return(None, lineno=616, col_offset=12)], [], lineno=615, col_offset=8), Assert(Compare(Attribute(Name('self', Load(), lineno=621, col_offset=15), '_toc', Load(), lineno=621, col_offset=15), [IsNot()], [Name('None', Load(), lineno=621, col_offset=32)], lineno=621, col_offset=15), None, lineno=621, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=625, col_offset=8), '_file', Load(), lineno=625, col_offset=8), 'seek', Load(), lineno=625, col_offset=8), [Num(0, lineno=625, col_offset=24), Num(2, lineno=625, col_offset=27)], [], None, None, lineno=625, col_offset=8), lineno=625, col_offset=8), Assign([Name('cur_len', Store(), lineno=626, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=626, col_offset=18), '_file', Load(), lineno=626, col_offset=18), 'tell', Load(), lineno=626, col_offset=18), [], [], None, None, lineno=626, col_offset=18), lineno=626, col_offset=8), If(Compare(Name('cur_len', Load(), lineno=627, col_offset=11), [NotEq()], [Attribute(Name('self', Load(), lineno=627, col_offset=22), '_file_length', Load(), lineno=627, col_offset=22)], lineno=627, col_offset=11), [Raise(Call(Name('ExternalClashError', Load(), lineno=628, col_offset=18), [BinOp(Str('Size of mailbox file changed (expected %i, found %i)', lineno=628, col_offset=37), Mod(), Tuple([Attribute(Name('self', Load(), lineno=630, col_offset=38), '_file_length', Load(), lineno=630, col_offset=38), Name('cur_len', Load(), lineno=630, col_offset=57)], Load(), lineno=630, col_offset=38), lineno=628, col_offset=37)], [], None, None, lineno=628, col_offset=18), None, None, lineno=628, col_offset=12)], [], lineno=627, col_offset=8), Assign([Name('new_file', Store(), lineno=632, col_offset=8)], Call(Name('_create_temporary', Load(), lineno=632, col_offset=19), [Attribute(Name('self', Load(), lineno=632, col_offset=37), '_path', Load(), lineno=632, col_offset=37)], [], None, None, lineno=632, col_offset=19), lineno=632, col_offset=8), TryExcept([Assign([Name('new_toc', Store(), lineno=634, col_offset=12)], Dict([], [], lineno=634, col_offset=22), lineno=634, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=635, col_offset=12), '_pre_mailbox_hook', Load(), lineno=635, col_offset=12), [Name('new_file', Load(), lineno=635, col_offset=35)], [], None, None, lineno=635, col_offset=12), lineno=635, col_offset=12), For(Name('key', Store(), lineno=636, col_offset=16), Call(Name('sorted', Load(), lineno=636, col_offset=23), [Call(Attribute(Attribute(Name('self', Load(), lineno=636, col_offset=30), '_toc', Load(), lineno=636, col_offset=30), 'keys', Load(), lineno=636, col_offset=30), [], [], None, None, lineno=636, col_offset=30)], [], None, None, lineno=636, col_offset=23), [Assign([Tuple([Name('start', Store(), lineno=637, col_offset=16), Name('stop', Store(), lineno=637, col_offset=23)], Store(), lineno=637, col_offset=16)], Subscript(Attribute(Name('self', Load(), lineno=637, col_offset=30), '_toc', Load(), lineno=637, col_offset=30), Index(Name('key', Load(), lineno=637, col_offset=40)), Load(), lineno=637, col_offset=30), lineno=637, col_offset=16), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=638, col_offset=16), '_file', Load(), lineno=638, col_offset=16), 'seek', Load(), lineno=638, col_offset=16), [Name('start', Load(), lineno=638, col_offset=32)], [], None, None, lineno=638, col_offset=16), lineno=638, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=639, col_offset=16), '_pre_message_hook', Load(), lineno=639, col_offset=16), [Name('new_file', Load(), lineno=639, col_offset=39)], [], None, None, lineno=639, col_offset=16), lineno=639, col_offset=16), Assign([Name('new_start', Store(), lineno=640, col_offset=16)], Call(Attribute(Name('new_file', Load(), lineno=640, col_offset=28), 'tell', Load(), lineno=640, col_offset=28), [], [], None, None, lineno=640, col_offset=28), lineno=640, col_offset=16), While(Name('True', Load(), lineno=641, col_offset=22), [Assign([Name('buffer', Store(), lineno=642, col_offset=20)], Call(Attribute(Attribute(Name('self', Load(), lineno=642, col_offset=29), '_file', Load(), lineno=642, col_offset=29), 'read', Load(), lineno=642, col_offset=29), [Call(Name('min', Load(), lineno=642, col_offset=45), [Num(4096, lineno=642, col_offset=49), BinOp(Name('stop', Load(), lineno=643, col_offset=49), Sub(), Call(Attribute(Attribute(Name('self', Load(), lineno=643, col_offset=56), '_file', Load(), lineno=643, col_offset=56), 'tell', Load(), lineno=643, col_offset=56), [], [], None, None, lineno=643, col_offset=56), lineno=643, col_offset=49)], [], None, None, lineno=642, col_offset=45)], [], None, None, lineno=642, col_offset=29), lineno=642, col_offset=20), If(Compare(Name('buffer', Load(), lineno=644, col_offset=23), [Eq()], [Str('', lineno=644, col_offset=33)], lineno=644, col_offset=23), [Break( lineno=645, col_offset=24)], [], lineno=644, col_offset=20), Expr(Call(Attribute(Name('new_file', Load(), lineno=646, col_offset=20), 'write', Load(), lineno=646, col_offset=20), [Name('buffer', Load(), lineno=646, col_offset=35)], [], None, None, lineno=646, col_offset=20), lineno=646, col_offset=20)], [], lineno=641, col_offset=16), Assign([Subscript(Name('new_toc', Load(), lineno=647, col_offset=16), Index(Name('key', Load(), lineno=647, col_offset=24)), Store(), lineno=647, col_offset=16)], Tuple([Name('new_start', Load(), lineno=647, col_offset=32), Call(Attribute(Name('new_file', Load(), lineno=647, col_offset=43), 'tell', Load(), lineno=647, col_offset=43), [], [], None, None, lineno=647, col_offset=43)], Load(), lineno=647, col_offset=32), lineno=647, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=648, col_offset=16), '_post_message_hook', Load(), lineno=648, col_offset=16), [Name('new_file', Load(), lineno=648, col_offset=40)], [], None, None, lineno=648, col_offset=16), lineno=648, col_offset=16)], [], lineno=636, col_offset=12)], [ExceptHandler(None, None, [Expr(Call(Attribute(Name('new_file', Load(), lineno=650, col_offset=12), 'close', Load(), lineno=650, col_offset=12), [], [], None, None, lineno=650, col_offset=12), lineno=650, col_offset=12), Expr(Call(Attribute(Name('os', Load(), lineno=651, col_offset=12), 'remove', Load(), lineno=651, col_offset=12), [Attribute(Name('new_file', Load(), lineno=651, col_offset=22), 'name', Load(), lineno=651, col_offset=22)], [], None, None, lineno=651, col_offset=12), lineno=651, col_offset=12), Raise(None, None, None, lineno=652, col_offset=12)], lineno=649, col_offset=8)], [], lineno=633, col_offset=8), Expr(Call(Name('_sync_close', Load(), lineno=653, col_offset=8), [Name('new_file', Load(), lineno=653, col_offset=20)], [], None, None, lineno=653, col_offset=8), lineno=653, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=655, col_offset=8), '_file', Load(), lineno=655, col_offset=8), 'close', Load(), lineno=655, col_offset=8), [], [], None, None, lineno=655, col_offset=8), lineno=655, col_offset=8), TryExcept([Expr(Call(Attribute(Name('os', Load(), lineno=657, col_offset=12), 'rename', Load(), lineno=657, col_offset=12), [Attribute(Name('new_file', Load(), lineno=657, col_offset=22), 'name', Load(), lineno=657, col_offset=22), Attribute(Name('self', Load(), lineno=657, col_offset=37), '_path', Load(), lineno=657, col_offset=37)], [], None, None, lineno=657, col_offset=12), lineno=657, col_offset=12)], [ExceptHandler(Name('OSError', Load(), lineno=658, col_offset=15), Name('e', Store(), lineno=658, col_offset=24), [If(BoolOp(Or(), [Compare(Attribute(Name('e', Load(), lineno=659, col_offset=15), 'errno', Load(), lineno=659, col_offset=15), [Eq()], [Attribute(Name('errno', Load(), lineno=659, col_offset=26), 'EEXIST', Load(), lineno=659, col_offset=26)], lineno=659, col_offset=15), BoolOp(And(), [Compare(Attribute(Name('os', Load(), lineno=660, col_offset=15), 'name', Load(), lineno=660, col_offset=15), [Eq()], [Str('os2', lineno=660, col_offset=26)], lineno=660, col_offset=15), Compare(Attribute(Name('e', Load(), lineno=660, col_offset=36), 'errno', Load(), lineno=660, col_offset=36), [Eq()], [Attribute(Name('errno', Load(), lineno=660, col_offset=47), 'EACCES', Load(), lineno=660, col_offset=47)], lineno=660, col_offset=36)], lineno=660, col_offset=15)], lineno=659, col_offset=15), [Expr(Call(Attribute(Name('os', Load(), lineno=661, col_offset=16), 'remove', Load(), lineno=661, col_offset=16), [Attribute(Name('self', Load(), lineno=661, col_offset=26), '_path', Load(), lineno=661, col_offset=26)], [], None, None, lineno=661, col_offset=16), lineno=661, col_offset=16), Expr(Call(Attribute(Name('os', Load(), lineno=662, col_offset=16), 'rename', Load(), lineno=662, col_offset=16), [Attribute(Name('new_file', Load(), lineno=662, col_offset=26), 'name', Load(), lineno=662, col_offset=26), Attribute(Name('self', Load(), lineno=662, col_offset=41), '_path', Load(), lineno=662, col_offset=41)], [], None, None, lineno=662, col_offset=16), lineno=662, col_offset=16)], [Raise(None, None, None, lineno=664, col_offset=16)], lineno=659, col_offset=12)], lineno=658, col_offset=8)], [], lineno=656, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=665, col_offset=8), '_file', Store(), lineno=665, col_offset=8)], Call(Name('open', Load(), lineno=665, col_offset=21), [Attribute(Name('self', Load(), lineno=665, col_offset=26), '_path', Load(), lineno=665, col_offset=26), Str('rb+', lineno=665, col_offset=38)], [], None, None, lineno=665, col_offset=21), lineno=665, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=666, col_offset=8), '_toc', Store(), lineno=666, col_offset=8)], Name('new_toc', Load(), lineno=666, col_offset=20), lineno=666, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=667, col_offset=8), '_pending', Store(), lineno=667, col_offset=8)], Name('False', Load(), lineno=667, col_offset=24), lineno=667, col_offset=8), If(Attribute(Name('self', Load(), lineno=668, col_offset=11), '_locked', Load(), lineno=668, col_offset=11), [Expr(Call(Name('_lock_file', Load(), lineno=669, col_offset=12), [Attribute(Name('self', Load(), lineno=669, col_offset=23), '_file', Load(), lineno=669, col_offset=23)], [keyword('dotlock', Name('False', Load(), lineno=669, col_offset=43))], None, None, lineno=669, col_offset=12), lineno=669, col_offset=12)], [], lineno=668, col_offset=8)], [], lineno=613, col_offset=4), FunctionDef('_pre_mailbox_hook', arguments([Name('self', Param(), lineno=671, col_offset=26), Name('f', Param(), lineno=671, col_offset=32)], None, None, []), [Expr(Str('Called before writing the mailbox to file f.', lineno=672, col_offset=8), lineno=672, col_offset=8), Return(None, lineno=673, col_offset=8)], [], lineno=671, col_offset=4), FunctionDef('_pre_message_hook', arguments([Name('self', Param(), lineno=675, col_offset=26), Name('f', Param(), lineno=675, col_offset=32)], None, None, []), [Expr(Str('Called before writing each message to file f.', lineno=676, col_offset=8), lineno=676, col_offset=8), Return(None, lineno=677, col_offset=8)], [], lineno=675, col_offset=4), FunctionDef('_post_message_hook', arguments([Name('self', Param(), lineno=679, col_offset=27), Name('f', Param(), lineno=679, col_offset=33)], None, None, []), [Expr(Str('Called after writing each message to file f.', lineno=680, col_offset=8), lineno=680, col_offset=8), Return(None, lineno=681, col_offset=8)], [], lineno=679, col_offset=4), FunctionDef('close', arguments([Name('self', Param(), lineno=683, col_offset=14)], None, None, []), [Expr(Str('Flush and close the mailbox.', lineno=684, col_offset=8), lineno=684, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=685, col_offset=8), 'flush', Load(), lineno=685, col_offset=8), [], [], None, None, lineno=685, col_offset=8), lineno=685, col_offset=8), If(Attribute(Name('self', Load(), lineno=686, col_offset=11), '_locked', Load(), lineno=686, col_offset=11), [Expr(Call(Attribute(Name('self', Load(), lineno=687, col_offset=12), 'unlock', Load(), lineno=687, col_offset=12), [], [], None, None, lineno=687, col_offset=12), lineno=687, col_offset=12)], [], lineno=686, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=688, col_offset=8), '_file', Load(), lineno=688, col_offset=8), 'close', Load(), lineno=688, col_offset=8), [], [], None, None, lineno=688, col_offset=8), lineno=688, col_offset=8)], [], lineno=683, col_offset=4), FunctionDef('_lookup', arguments([Name('self', Param(), lineno=690, col_offset=16), Name('key', Param(), lineno=690, col_offset=22)], None, None, [Name('None', Load(), lineno=690, col_offset=26)]), [Expr(Str('Return (start, stop) or raise KeyError.', lineno=691, col_offset=8), lineno=691, col_offset=8), If(Compare(Attribute(Name('self', Load(), lineno=692, col_offset=11), '_toc', Load(), lineno=692, col_offset=11), [Is()], [Name('None', Load(), lineno=692, col_offset=24)], lineno=692, col_offset=11), [Expr(Call(Attribute(Name('self', Load(), lineno=693, col_offset=12), '_generate_toc', Load(), lineno=693, col_offset=12), [], [], None, None, lineno=693, col_offset=12), lineno=693, col_offset=12)], [], lineno=692, col_offset=8), If(Compare(Name('key', Load(), lineno=694, col_offset=11), [IsNot()], [Name('None', Load(), lineno=694, col_offset=22)], lineno=694, col_offset=11), [TryExcept([Return(Subscript(Attribute(Name('self', Load(), lineno=696, col_offset=23), '_toc', Load(), lineno=696, col_offset=23), Index(Name('key', Load(), lineno=696, col_offset=33)), Load(), lineno=696, col_offset=23), lineno=696, col_offset=16)], [ExceptHandler(Name('KeyError', Load(), lineno=697, col_offset=19), None, [Raise(Call(Name('KeyError', Load(), lineno=698, col_offset=22), [BinOp(Str('No message with key: %s', lineno=698, col_offset=31), Mod(), Name('key', Load(), lineno=698, col_offset=59), lineno=698, col_offset=31)], [], None, None, lineno=698, col_offset=22), None, None, lineno=698, col_offset=16)], lineno=697, col_offset=12)], [], lineno=695, col_offset=12)], [], lineno=694, col_offset=8)], [], lineno=690, col_offset=4), FunctionDef('_append_message', arguments([Name('self', Param(), lineno=700, col_offset=24), Name('message', Param(), lineno=700, col_offset=30)], None, None, []), [Expr(Str('Append message to mailbox and return (start, stop) offsets.', lineno=701, col_offset=8), lineno=701, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=702, col_offset=8), '_file', Load(), lineno=702, col_offset=8), 'seek', Load(), lineno=702, col_offset=8), [Num(0, lineno=702, col_offset=24), Num(2, lineno=702, col_offset=27)], [], None, None, lineno=702, col_offset=8), lineno=702, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=703, col_offset=8), '_pre_message_hook', Load(), lineno=703, col_offset=8), [Attribute(Name('self', Load(), lineno=703, col_offset=31), '_file', Load(), lineno=703, col_offset=31)], [], None, None, lineno=703, col_offset=8), lineno=703, col_offset=8), Assign([Name('offsets', Store(), lineno=704, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=704, col_offset=18), '_install_message', Load(), lineno=704, col_offset=18), [Name('message', Load(), lineno=704, col_offset=40)], [], None, None, lineno=704, col_offset=18), lineno=704, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=705, col_offset=8), '_post_message_hook', Load(), lineno=705, col_offset=8), [Attribute(Name('self', Load(), lineno=705, col_offset=32), '_file', Load(), lineno=705, col_offset=32)], [], None, None, lineno=705, col_offset=8), lineno=705, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=706, col_offset=8), '_file', Load(), lineno=706, col_offset=8), 'flush', Load(), lineno=706, col_offset=8), [], [], None, None, lineno=706, col_offset=8), lineno=706, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=707, col_offset=8), '_file_length', Store(), lineno=707, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=707, col_offset=28), '_file', Load(), lineno=707, col_offset=28), 'tell', Load(), lineno=707, col_offset=28), [], [], None, None, lineno=707, col_offset=28), lineno=707, col_offset=8), Return(Name('offsets', Load(), lineno=708, col_offset=15), lineno=708, col_offset=8)], [], lineno=700, col_offset=4)], [], lineno=540, col_offset=0), ClassDef('_mboxMMDF', [Name('_singlefileMailbox', Load(), lineno=712, col_offset=16)], [Expr(Str('An mbox or MMDF mailbox.', lineno=713, col_offset=4), lineno=713, col_offset=4), Assign([Name('_mangle_from_', Store(), lineno=715, col_offset=4)], Name('True', Load(), lineno=715, col_offset=20), lineno=715, col_offset=4), FunctionDef('get_message', arguments([Name('self', Param(), lineno=717, col_offset=20), Name('key', Param(), lineno=717, col_offset=26)], None, None, []), [Expr(Str('Return a Message representation or raise a KeyError.', lineno=718, col_offset=8), lineno=718, col_offset=8), Assign([Tuple([Name('start', Store(), lineno=719, col_offset=8), Name('stop', Store(), lineno=719, col_offset=15)], Store(), lineno=719, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=719, col_offset=22), '_lookup', Load(), lineno=719, col_offset=22), [Name('key', Load(), lineno=719, col_offset=35)], [], None, None, lineno=719, col_offset=22), lineno=719, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=720, col_offset=8), '_file', Load(), lineno=720, col_offset=8), 'seek', Load(), lineno=720, col_offset=8), [Name('start', Load(), lineno=720, col_offset=24)], [], None, None, lineno=720, col_offset=8), lineno=720, col_offset=8), Assign([Name('from_line', Store(), lineno=721, col_offset=8)], Call(Attribute(Call(Attribute(Attribute(Name('self', Load(), lineno=721, col_offset=20), '_file', Load(), lineno=721, col_offset=20), 'readline', Load(), lineno=721, col_offset=20), [], [], None, None, lineno=721, col_offset=20), 'replace', Load(), lineno=721, col_offset=20), [Attribute(Name('os', Load(), lineno=721, col_offset=50), 'linesep', Load(), lineno=721, col_offset=50), Str('', lineno=721, col_offset=62)], [], None, None, lineno=721, col_offset=20), lineno=721, col_offset=8), Assign([Name('string', Store(), lineno=722, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=722, col_offset=17), '_file', Load(), lineno=722, col_offset=17), 'read', Load(), lineno=722, col_offset=17), [BinOp(Name('stop', Load(), lineno=722, col_offset=33), Sub(), Call(Attribute(Attribute(Name('self', Load(), lineno=722, col_offset=40), '_file', Load(), lineno=722, col_offset=40), 'tell', Load(), lineno=722, col_offset=40), [], [], None, None, lineno=722, col_offset=40), lineno=722, col_offset=33)], [], None, None, lineno=722, col_offset=17), lineno=722, col_offset=8), Assign([Name('msg', Store(), lineno=723, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=723, col_offset=14), '_message_factory', Load(), lineno=723, col_offset=14), [Call(Attribute(Name('string', Load(), lineno=723, col_offset=36), 'replace', Load(), lineno=723, col_offset=36), [Attribute(Name('os', Load(), lineno=723, col_offset=51), 'linesep', Load(), lineno=723, col_offset=51), Str('\n', lineno=723, col_offset=63)], [], None, None, lineno=723, col_offset=36)], [], None, None, lineno=723, col_offset=14), lineno=723, col_offset=8), Expr(Call(Attribute(Name('msg', Load(), lineno=724, col_offset=8), 'set_from', Load(), lineno=724, col_offset=8), [Subscript(Name('from_line', Load(), lineno=724, col_offset=21), Slice(Num(5, lineno=724, col_offset=31), None, None), Load(), lineno=724, col_offset=21)], [], None, None, lineno=724, col_offset=8), lineno=724, col_offset=8), Return(Name('msg', Load(), lineno=725, col_offset=15), lineno=725, col_offset=8)], [], lineno=717, col_offset=4), FunctionDef('get_string', arguments([Name('self', Param(), lineno=727, col_offset=19), Name('key', Param(), lineno=727, col_offset=25), Name('from_', Param(), lineno=727, col_offset=30)], None, None, [Name('False', Load(), lineno=727, col_offset=36)]), [Expr(Str('Return a string representation or raise a KeyError.', lineno=728, col_offset=8), lineno=728, col_offset=8), Assign([Tuple([Name('start', Store(), lineno=729, col_offset=8), Name('stop', Store(), lineno=729, col_offset=15)], Store(), lineno=729, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=729, col_offset=22), '_lookup', Load(), lineno=729, col_offset=22), [Name('key', Load(), lineno=729, col_offset=35)], [], None, None, lineno=729, col_offset=22), lineno=729, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=730, col_offset=8), '_file', Load(), lineno=730, col_offset=8), 'seek', Load(), lineno=730, col_offset=8), [Name('start', Load(), lineno=730, col_offset=24)], [], None, None, lineno=730, col_offset=8), lineno=730, col_offset=8), If(UnaryOp(Not(), Name('from_', Load(), lineno=731, col_offset=15), lineno=731, col_offset=11), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=732, col_offset=12), '_file', Load(), lineno=732, col_offset=12), 'readline', Load(), lineno=732, col_offset=12), [], [], None, None, lineno=732, col_offset=12), lineno=732, col_offset=12)], [], lineno=731, col_offset=8), Assign([Name('string', Store(), lineno=733, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=733, col_offset=17), '_file', Load(), lineno=733, col_offset=17), 'read', Load(), lineno=733, col_offset=17), [BinOp(Name('stop', Load(), lineno=733, col_offset=33), Sub(), Call(Attribute(Attribute(Name('self', Load(), lineno=733, col_offset=40), '_file', Load(), lineno=733, col_offset=40), 'tell', Load(), lineno=733, col_offset=40), [], [], None, None, lineno=733, col_offset=40), lineno=733, col_offset=33)], [], None, None, lineno=733, col_offset=17), lineno=733, col_offset=8), Return(Call(Attribute(Name('string', Load(), lineno=734, col_offset=15), 'replace', Load(), lineno=734, col_offset=15), [Attribute(Name('os', Load(), lineno=734, col_offset=30), 'linesep', Load(), lineno=734, col_offset=30), Str('\n', lineno=734, col_offset=42)], [], None, None, lineno=734, col_offset=15), lineno=734, col_offset=8)], [], lineno=727, col_offset=4), FunctionDef('get_file', arguments([Name('self', Param(), lineno=736, col_offset=17), Name('key', Param(), lineno=736, col_offset=23), Name('from_', Param(), lineno=736, col_offset=28)], None, None, [Name('False', Load(), lineno=736, col_offset=34)]), [Expr(Str('Return a file-like representation or raise a KeyError.', lineno=737, col_offset=8), lineno=737, col_offset=8), Assign([Tuple([Name('start', Store(), lineno=738, col_offset=8), Name('stop', Store(), lineno=738, col_offset=15)], Store(), lineno=738, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=738, col_offset=22), '_lookup', Load(), lineno=738, col_offset=22), [Name('key', Load(), lineno=738, col_offset=35)], [], None, None, lineno=738, col_offset=22), lineno=738, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=739, col_offset=8), '_file', Load(), lineno=739, col_offset=8), 'seek', Load(), lineno=739, col_offset=8), [Name('start', Load(), lineno=739, col_offset=24)], [], None, None, lineno=739, col_offset=8), lineno=739, col_offset=8), If(UnaryOp(Not(), Name('from_', Load(), lineno=740, col_offset=15), lineno=740, col_offset=11), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=741, col_offset=12), '_file', Load(), lineno=741, col_offset=12), 'readline', Load(), lineno=741, col_offset=12), [], [], None, None, lineno=741, col_offset=12), lineno=741, col_offset=12)], [], lineno=740, col_offset=8), Return(Call(Name('_PartialFile', Load(), lineno=742, col_offset=15), [Attribute(Name('self', Load(), lineno=742, col_offset=28), '_file', Load(), lineno=742, col_offset=28), Call(Attribute(Attribute(Name('self', Load(), lineno=742, col_offset=40), '_file', Load(), lineno=742, col_offset=40), 'tell', Load(), lineno=742, col_offset=40), [], [], None, None, lineno=742, col_offset=40), Name('stop', Load(), lineno=742, col_offset=59)], [], None, None, lineno=742, col_offset=15), lineno=742, col_offset=8)], [], lineno=736, col_offset=4), FunctionDef('_install_message', arguments([Name('self', Param(), lineno=744, col_offset=25), Name('message', Param(), lineno=744, col_offset=31)], None, None, []), [Expr(Str('Format a message and blindly write to self._file.', lineno=745, col_offset=8), lineno=745, col_offset=8), Assign([Name('from_line', Store(), lineno=746, col_offset=8)], Name('None', Load(), lineno=746, col_offset=20), lineno=746, col_offset=8), If(BoolOp(And(), [Call(Name('isinstance', Load(), lineno=747, col_offset=11), [Name('message', Load(), lineno=747, col_offset=22), Name('str', Load(), lineno=747, col_offset=31)], [], None, None, lineno=747, col_offset=11), Call(Attribute(Name('message', Load(), lineno=747, col_offset=40), 'startswith', Load(), lineno=747, col_offset=40), [Str('From ', lineno=747, col_offset=59)], [], None, None, lineno=747, col_offset=40)], lineno=747, col_offset=11), [Assign([Name('newline', Store(), lineno=748, col_offset=12)], Call(Attribute(Name('message', Load(), lineno=748, col_offset=22), 'find', Load(), lineno=748, col_offset=22), [Str('\n', lineno=748, col_offset=35)], [], None, None, lineno=748, col_offset=22), lineno=748, col_offset=12), If(Compare(Name('newline', Load(), lineno=749, col_offset=15), [NotEq()], [Num(-1, lineno=749, col_offset=27)], lineno=749, col_offset=15), [Assign([Name('from_line', Store(), lineno=750, col_offset=16)], Subscript(Name('message', Load(), lineno=750, col_offset=28), Slice(None, Name('newline', Load(), lineno=750, col_offset=37), None), Load(), lineno=750, col_offset=28), lineno=750, col_offset=16), Assign([Name('message', Store(), lineno=751, col_offset=16)], Subscript(Name('message', Load(), lineno=751, col_offset=26), Slice(BinOp(Name('newline', Load(), lineno=751, col_offset=34), Add(), Num(1, lineno=751, col_offset=44), lineno=751, col_offset=34), None, None), Load(), lineno=751, col_offset=26), lineno=751, col_offset=16)], [Assign([Name('from_line', Store(), lineno=753, col_offset=16)], Name('message', Load(), lineno=753, col_offset=28), lineno=753, col_offset=16), Assign([Name('message', Store(), lineno=754, col_offset=16)], Str('', lineno=754, col_offset=26), lineno=754, col_offset=16)], lineno=749, col_offset=12)], [If(Call(Name('isinstance', Load(), lineno=755, col_offset=13), [Name('message', Load(), lineno=755, col_offset=24), Name('_mboxMMDFMessage', Load(), lineno=755, col_offset=33)], [], None, None, lineno=755, col_offset=13), [Assign([Name('from_line', Store(), lineno=756, col_offset=12)], BinOp(Str('From ', lineno=756, col_offset=24), Add(), Call(Attribute(Name('message', Load(), lineno=756, col_offset=34), 'get_from', Load(), lineno=756, col_offset=34), [], [], None, None, lineno=756, col_offset=34), lineno=756, col_offset=24), lineno=756, col_offset=12)], [If(Call(Name('isinstance', Load(), lineno=757, col_offset=13), [Name('message', Load(), lineno=757, col_offset=24), Attribute(Attribute(Name('email', Load(), lineno=757, col_offset=33), 'message', Load(), lineno=757, col_offset=33), 'Message', Load(), lineno=757, col_offset=33)], [], None, None, lineno=757, col_offset=13), [Assign([Name('from_line', Store(), lineno=758, col_offset=12)], Call(Attribute(Name('message', Load(), lineno=758, col_offset=24), 'get_unixfrom', Load(), lineno=758, col_offset=24), [], [], None, None, lineno=758, col_offset=24), lineno=758, col_offset=12)], [], lineno=757, col_offset=13)], lineno=755, col_offset=13)], lineno=747, col_offset=8), If(Compare(Name('from_line', Load(), lineno=759, col_offset=11), [Is()], [Name('None', Load(), lineno=759, col_offset=24)], lineno=759, col_offset=11), [Assign([Name('from_line', Store(), lineno=760, col_offset=12)], BinOp(Str('From MAILER-DAEMON %s', lineno=760, col_offset=24), Mod(), Call(Attribute(Name('time', Load(), lineno=760, col_offset=50), 'asctime', Load(), lineno=760, col_offset=50), [Call(Attribute(Name('time', Load(), lineno=760, col_offset=63), 'gmtime', Load(), lineno=760, col_offset=63), [], [], None, None, lineno=760, col_offset=63)], [], None, None, lineno=760, col_offset=50), lineno=760, col_offset=24), lineno=760, col_offset=12)], [], lineno=759, col_offset=8), Assign([Name('start', Store(), lineno=761, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=761, col_offset=16), '_file', Load(), lineno=761, col_offset=16), 'tell', Load(), lineno=761, col_offset=16), [], [], None, None, lineno=761, col_offset=16), lineno=761, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=762, col_offset=8), '_file', Load(), lineno=762, col_offset=8), 'write', Load(), lineno=762, col_offset=8), [BinOp(Name('from_line', Load(), lineno=762, col_offset=25), Add(), Attribute(Name('os', Load(), lineno=762, col_offset=37), 'linesep', Load(), lineno=762, col_offset=37), lineno=762, col_offset=25)], [], None, None, lineno=762, col_offset=8), lineno=762, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=763, col_offset=8), '_dump_message', Load(), lineno=763, col_offset=8), [Name('message', Load(), lineno=763, col_offset=27), Attribute(Name('self', Load(), lineno=763, col_offset=36), '_file', Load(), lineno=763, col_offset=36), Attribute(Name('self', Load(), lineno=763, col_offset=48), '_mangle_from_', Load(), lineno=763, col_offset=48)], [], None, None, lineno=763, col_offset=8), lineno=763, col_offset=8), Assign([Name('stop', Store(), lineno=764, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=764, col_offset=15), '_file', Load(), lineno=764, col_offset=15), 'tell', Load(), lineno=764, col_offset=15), [], [], None, None, lineno=764, col_offset=15), lineno=764, col_offset=8), Return(Tuple([Name('start', Load(), lineno=765, col_offset=16), Name('stop', Load(), lineno=765, col_offset=23)], Load(), lineno=765, col_offset=16), lineno=765, col_offset=8)], [], lineno=744, col_offset=4)], [], lineno=712, col_offset=0), ClassDef('mbox', [Name('_mboxMMDF', Load(), lineno=768, col_offset=11)], [Expr(Str('A classic mbox mailbox.', lineno=769, col_offset=4), lineno=769, col_offset=4), Assign([Name('_mangle_from_', Store(), lineno=771, col_offset=4)], Name('True', Load(), lineno=771, col_offset=20), lineno=771, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=773, col_offset=17), Name('path', Param(), lineno=773, col_offset=23), Name('factory', Param(), lineno=773, col_offset=29), Name('create', Param(), lineno=773, col_offset=43)], None, None, [Name('None', Load(), lineno=773, col_offset=37), Name('True', Load(), lineno=773, col_offset=50)]), [Expr(Str('Initialize an mbox mailbox.', lineno=774, col_offset=8), lineno=774, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=775, col_offset=8), '_message_factory', Store(), lineno=775, col_offset=8)], Name('mboxMessage', Load(), lineno=775, col_offset=32), lineno=775, col_offset=8), Expr(Call(Attribute(Name('_mboxMMDF', Load(), lineno=776, col_offset=8), '__init__', Load(), lineno=776, col_offset=8), [Name('self', Load(), lineno=776, col_offset=27), Name('path', Load(), lineno=776, col_offset=33), Name('factory', Load(), lineno=776, col_offset=39), Name('create', Load(), lineno=776, col_offset=48)], [], None, None, lineno=776, col_offset=8), lineno=776, col_offset=8)], [], lineno=773, col_offset=4), FunctionDef('_pre_message_hook', arguments([Name('self', Param(), lineno=778, col_offset=26), Name('f', Param(), lineno=778, col_offset=32)], None, None, []), [Expr(Str('Called before writing each message to file f.', lineno=779, col_offset=8), lineno=779, col_offset=8), If(Compare(Call(Attribute(Name('f', Load(), lineno=780, col_offset=11), 'tell', Load(), lineno=780, col_offset=11), [], [], None, None, lineno=780, col_offset=11), [NotEq()], [Num(0, lineno=780, col_offset=23)], lineno=780, col_offset=11), [Expr(Call(Attribute(Name('f', Load(), lineno=781, col_offset=12), 'write', Load(), lineno=781, col_offset=12), [Attribute(Name('os', Load(), lineno=781, col_offset=20), 'linesep', Load(), lineno=781, col_offset=20)], [], None, None, lineno=781, col_offset=12), lineno=781, col_offset=12)], [], lineno=780, col_offset=8)], [], lineno=778, col_offset=4), FunctionDef('_generate_toc', arguments([Name('self', Param(), lineno=783, col_offset=22)], None, None, []), [Expr(Str('Generate key-to-(start, stop) table of contents.', lineno=784, col_offset=8), lineno=784, col_offset=8), Assign([Tuple([Name('starts', Store(), lineno=785, col_offset=8), Name('stops', Store(), lineno=785, col_offset=16)], Store(), lineno=785, col_offset=8)], Tuple([List([], Load(), lineno=785, col_offset=24), List([], Load(), lineno=785, col_offset=28)], Load(), lineno=785, col_offset=24), lineno=785, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=786, col_offset=8), '_file', Load(), lineno=786, col_offset=8), 'seek', Load(), lineno=786, col_offset=8), [Num(0, lineno=786, col_offset=24)], [], None, None, lineno=786, col_offset=8), lineno=786, col_offset=8), While(Name('True', Load(), lineno=787, col_offset=14), [Assign([Name('line_pos', Store(), lineno=788, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=788, col_offset=23), '_file', Load(), lineno=788, col_offset=23), 'tell', Load(), lineno=788, col_offset=23), [], [], None, None, lineno=788, col_offset=23), lineno=788, col_offset=12), Assign([Name('line', Store(), lineno=789, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=789, col_offset=19), '_file', Load(), lineno=789, col_offset=19), 'readline', Load(), lineno=789, col_offset=19), [], [], None, None, lineno=789, col_offset=19), lineno=789, col_offset=12), If(Call(Attribute(Name('line', Load(), lineno=790, col_offset=15), 'startswith', Load(), lineno=790, col_offset=15), [Str('From ', lineno=790, col_offset=31)], [], None, None, lineno=790, col_offset=15), [If(Compare(Call(Name('len', Load(), lineno=791, col_offset=19), [Name('stops', Load(), lineno=791, col_offset=23)], [], None, None, lineno=791, col_offset=19), [Lt()], [Call(Name('len', Load(), lineno=791, col_offset=32), [Name('starts', Load(), lineno=791, col_offset=36)], [], None, None, lineno=791, col_offset=32)], lineno=791, col_offset=19), [Expr(Call(Attribute(Name('stops', Load(), lineno=792, col_offset=20), 'append', Load(), lineno=792, col_offset=20), [BinOp(Name('line_pos', Load(), lineno=792, col_offset=33), Sub(), Call(Name('len', Load(), lineno=792, col_offset=44), [Attribute(Name('os', Load(), lineno=792, col_offset=48), 'linesep', Load(), lineno=792, col_offset=48)], [], None, None, lineno=792, col_offset=44), lineno=792, col_offset=33)], [], None, None, lineno=792, col_offset=20), lineno=792, col_offset=20)], [], lineno=791, col_offset=16), Expr(Call(Attribute(Name('starts', Load(), lineno=793, col_offset=16), 'append', Load(), lineno=793, col_offset=16), [Name('line_pos', Load(), lineno=793, col_offset=30)], [], None, None, lineno=793, col_offset=16), lineno=793, col_offset=16)], [If(Compare(Name('line', Load(), lineno=794, col_offset=17), [Eq()], [Str('', lineno=794, col_offset=25)], lineno=794, col_offset=17), [Expr(Call(Attribute(Name('stops', Load(), lineno=795, col_offset=16), 'append', Load(), lineno=795, col_offset=16), [Name('line_pos', Load(), lineno=795, col_offset=29)], [], None, None, lineno=795, col_offset=16), lineno=795, col_offset=16), Break( lineno=796, col_offset=16)], [], lineno=794, col_offset=17)], lineno=790, col_offset=12)], [], lineno=787, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=797, col_offset=8), '_toc', Store(), lineno=797, col_offset=8)], Call(Name('dict', Load(), lineno=797, col_offset=20), [Call(Name('enumerate', Load(), lineno=797, col_offset=25), [Call(Name('zip', Load(), lineno=797, col_offset=35), [Name('starts', Load(), lineno=797, col_offset=39), Name('stops', Load(), lineno=797, col_offset=47)], [], None, None, lineno=797, col_offset=35)], [], None, None, lineno=797, col_offset=25)], [], None, None, lineno=797, col_offset=20), lineno=797, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=798, col_offset=8), '_next_key', Store(), lineno=798, col_offset=8)], Call(Name('len', Load(), lineno=798, col_offset=25), [Attribute(Name('self', Load(), lineno=798, col_offset=29), '_toc', Load(), lineno=798, col_offset=29)], [], None, None, lineno=798, col_offset=25), lineno=798, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=799, col_offset=8), '_file_length', Store(), lineno=799, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=799, col_offset=28), '_file', Load(), lineno=799, col_offset=28), 'tell', Load(), lineno=799, col_offset=28), [], [], None, None, lineno=799, col_offset=28), lineno=799, col_offset=8)], [], lineno=783, col_offset=4)], [], lineno=768, col_offset=0), ClassDef('MMDF', [Name('_mboxMMDF', Load(), lineno=802, col_offset=11)], [Expr(Str('An MMDF mailbox.', lineno=803, col_offset=4), lineno=803, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=805, col_offset=17), Name('path', Param(), lineno=805, col_offset=23), Name('factory', Param(), lineno=805, col_offset=29), Name('create', Param(), lineno=805, col_offset=43)], None, None, [Name('None', Load(), lineno=805, col_offset=37), Name('True', Load(), lineno=805, col_offset=50)]), [Expr(Str('Initialize an MMDF mailbox.', lineno=806, col_offset=8), lineno=806, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=807, col_offset=8), '_message_factory', Store(), lineno=807, col_offset=8)], Name('MMDFMessage', Load(), lineno=807, col_offset=32), lineno=807, col_offset=8), Expr(Call(Attribute(Name('_mboxMMDF', Load(), lineno=808, col_offset=8), '__init__', Load(), lineno=808, col_offset=8), [Name('self', Load(), lineno=808, col_offset=27), Name('path', Load(), lineno=808, col_offset=33), Name('factory', Load(), lineno=808, col_offset=39), Name('create', Load(), lineno=808, col_offset=48)], [], None, None, lineno=808, col_offset=8), lineno=808, col_offset=8)], [], lineno=805, col_offset=4), FunctionDef('_pre_message_hook', arguments([Name('self', Param(), lineno=810, col_offset=26), Name('f', Param(), lineno=810, col_offset=32)], None, None, []), [Expr(Str('Called before writing each message to file f.', lineno=811, col_offset=8), lineno=811, col_offset=8), Expr(Call(Attribute(Name('f', Load(), lineno=812, col_offset=8), 'write', Load(), lineno=812, col_offset=8), [BinOp(Str('\x01\x01\x01\x01', lineno=812, col_offset=16), Add(), Attribute(Name('os', Load(), lineno=812, col_offset=37), 'linesep', Load(), lineno=812, col_offset=37), lineno=812, col_offset=16)], [], None, None, lineno=812, col_offset=8), lineno=812, col_offset=8)], [], lineno=810, col_offset=4), FunctionDef('_post_message_hook', arguments([Name('self', Param(), lineno=814, col_offset=27), Name('f', Param(), lineno=814, col_offset=33)], None, None, []), [Expr(Str('Called after writing each message to file f.', lineno=815, col_offset=8), lineno=815, col_offset=8), Expr(Call(Attribute(Name('f', Load(), lineno=816, col_offset=8), 'write', Load(), lineno=816, col_offset=8), [BinOp(BinOp(Attribute(Name('os', Load(), lineno=816, col_offset=16), 'linesep', Load(), lineno=816, col_offset=16), Add(), Str('\x01\x01\x01\x01', lineno=816, col_offset=29), lineno=816, col_offset=16), Add(), Attribute(Name('os', Load(), lineno=816, col_offset=50), 'linesep', Load(), lineno=816, col_offset=50), lineno=816, col_offset=48)], [], None, None, lineno=816, col_offset=8), lineno=816, col_offset=8)], [], lineno=814, col_offset=4), FunctionDef('_generate_toc', arguments([Name('self', Param(), lineno=818, col_offset=22)], None, None, []), [Expr(Str('Generate key-to-(start, stop) table of contents.', lineno=819, col_offset=8), lineno=819, col_offset=8), Assign([Tuple([Name('starts', Store(), lineno=820, col_offset=8), Name('stops', Store(), lineno=820, col_offset=16)], Store(), lineno=820, col_offset=8)], Tuple([List([], Load(), lineno=820, col_offset=24), List([], Load(), lineno=820, col_offset=28)], Load(), lineno=820, col_offset=24), lineno=820, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=821, col_offset=8), '_file', Load(), lineno=821, col_offset=8), 'seek', Load(), lineno=821, col_offset=8), [Num(0, lineno=821, col_offset=24)], [], None, None, lineno=821, col_offset=8), lineno=821, col_offset=8), Assign([Name('next_pos', Store(), lineno=822, col_offset=8)], Num(0, lineno=822, col_offset=19), lineno=822, col_offset=8), While(Name('True', Load(), lineno=823, col_offset=14), [Assign([Name('line_pos', Store(), lineno=824, col_offset=12)], Name('next_pos', Load(), lineno=824, col_offset=23), lineno=824, col_offset=12), Assign([Name('line', Store(), lineno=825, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=825, col_offset=19), '_file', Load(), lineno=825, col_offset=19), 'readline', Load(), lineno=825, col_offset=19), [], [], None, None, lineno=825, col_offset=19), lineno=825, col_offset=12), Assign([Name('next_pos', Store(), lineno=826, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=826, col_offset=23), '_file', Load(), lineno=826, col_offset=23), 'tell', Load(), lineno=826, col_offset=23), [], [], None, None, lineno=826, col_offset=23), lineno=826, col_offset=12), If(Call(Attribute(Name('line', Load(), lineno=827, col_offset=15), 'startswith', Load(), lineno=827, col_offset=15), [BinOp(Str('\x01\x01\x01\x01', lineno=827, col_offset=31), Add(), Attribute(Name('os', Load(), lineno=827, col_offset=52), 'linesep', Load(), lineno=827, col_offset=52), lineno=827, col_offset=31)], [], None, None, lineno=827, col_offset=15), [Expr(Call(Attribute(Name('starts', Load(), lineno=828, col_offset=16), 'append', Load(), lineno=828, col_offset=16), [Name('next_pos', Load(), lineno=828, col_offset=30)], [], None, None, lineno=828, col_offset=16), lineno=828, col_offset=16), While(Name('True', Load(), lineno=829, col_offset=22), [Assign([Name('line_pos', Store(), lineno=830, col_offset=20)], Name('next_pos', Load(), lineno=830, col_offset=31), lineno=830, col_offset=20), Assign([Name('line', Store(), lineno=831, col_offset=20)], Call(Attribute(Attribute(Name('self', Load(), lineno=831, col_offset=27), '_file', Load(), lineno=831, col_offset=27), 'readline', Load(), lineno=831, col_offset=27), [], [], None, None, lineno=831, col_offset=27), lineno=831, col_offset=20), Assign([Name('next_pos', Store(), lineno=832, col_offset=20)], Call(Attribute(Attribute(Name('self', Load(), lineno=832, col_offset=31), '_file', Load(), lineno=832, col_offset=31), 'tell', Load(), lineno=832, col_offset=31), [], [], None, None, lineno=832, col_offset=31), lineno=832, col_offset=20), If(Compare(Name('line', Load(), lineno=833, col_offset=23), [Eq()], [BinOp(Str('\x01\x01\x01\x01', lineno=833, col_offset=31), Add(), Attribute(Name('os', Load(), lineno=833, col_offset=52), 'linesep', Load(), lineno=833, col_offset=52), lineno=833, col_offset=31)], lineno=833, col_offset=23), [Expr(Call(Attribute(Name('stops', Load(), lineno=834, col_offset=24), 'append', Load(), lineno=834, col_offset=24), [BinOp(Name('line_pos', Load(), lineno=834, col_offset=37), Sub(), Call(Name('len', Load(), lineno=834, col_offset=48), [Attribute(Name('os', Load(), lineno=834, col_offset=52), 'linesep', Load(), lineno=834, col_offset=52)], [], None, None, lineno=834, col_offset=48), lineno=834, col_offset=37)], [], None, None, lineno=834, col_offset=24), lineno=834, col_offset=24), Break( lineno=835, col_offset=24)], [If(Compare(Name('line', Load(), lineno=836, col_offset=25), [Eq()], [Str('', lineno=836, col_offset=33)], lineno=836, col_offset=25), [Expr(Call(Attribute(Name('stops', Load(), lineno=837, col_offset=24), 'append', Load(), lineno=837, col_offset=24), [Name('line_pos', Load(), lineno=837, col_offset=37)], [], None, None, lineno=837, col_offset=24), lineno=837, col_offset=24), Break( lineno=838, col_offset=24)], [], lineno=836, col_offset=25)], lineno=833, col_offset=20)], [], lineno=829, col_offset=16)], [If(Compare(Name('line', Load(), lineno=839, col_offset=17), [Eq()], [Str('', lineno=839, col_offset=25)], lineno=839, col_offset=17), [Break( lineno=840, col_offset=16)], [], lineno=839, col_offset=17)], lineno=827, col_offset=12)], [], lineno=823, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=841, col_offset=8), '_toc', Store(), lineno=841, col_offset=8)], Call(Name('dict', Load(), lineno=841, col_offset=20), [Call(Name('enumerate', Load(), lineno=841, col_offset=25), [Call(Name('zip', Load(), lineno=841, col_offset=35), [Name('starts', Load(), lineno=841, col_offset=39), Name('stops', Load(), lineno=841, col_offset=47)], [], None, None, lineno=841, col_offset=35)], [], None, None, lineno=841, col_offset=25)], [], None, None, lineno=841, col_offset=20), lineno=841, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=842, col_offset=8), '_next_key', Store(), lineno=842, col_offset=8)], Call(Name('len', Load(), lineno=842, col_offset=25), [Attribute(Name('self', Load(), lineno=842, col_offset=29), '_toc', Load(), lineno=842, col_offset=29)], [], None, None, lineno=842, col_offset=25), lineno=842, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=843, col_offset=8), '_file', Load(), lineno=843, col_offset=8), 'seek', Load(), lineno=843, col_offset=8), [Num(0, lineno=843, col_offset=24), Num(2, lineno=843, col_offset=27)], [], None, None, lineno=843, col_offset=8), lineno=843, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=844, col_offset=8), '_file_length', Store(), lineno=844, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=844, col_offset=28), '_file', Load(), lineno=844, col_offset=28), 'tell', Load(), lineno=844, col_offset=28), [], [], None, None, lineno=844, col_offset=28), lineno=844, col_offset=8)], [], lineno=818, col_offset=4)], [], lineno=802, col_offset=0), ClassDef('MH', [Name('Mailbox', Load(), lineno=847, col_offset=9)], [Expr(Str('An MH mailbox.', lineno=848, col_offset=4), lineno=848, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=850, col_offset=17), Name('path', Param(), lineno=850, col_offset=23), Name('factory', Param(), lineno=850, col_offset=29), Name('create', Param(), lineno=850, col_offset=43)], None, None, [Name('None', Load(), lineno=850, col_offset=37), Name('True', Load(), lineno=850, col_offset=50)]), [Expr(Str('Initialize an MH instance.', lineno=851, col_offset=8), lineno=851, col_offset=8), Expr(Call(Attribute(Name('Mailbox', Load(), lineno=852, col_offset=8), '__init__', Load(), lineno=852, col_offset=8), [Name('self', Load(), lineno=852, col_offset=25), Name('path', Load(), lineno=852, col_offset=31), Name('factory', Load(), lineno=852, col_offset=37), Name('create', Load(), lineno=852, col_offset=46)], [], None, None, lineno=852, col_offset=8), lineno=852, col_offset=8), If(UnaryOp(Not(), Call(Attribute(Attribute(Name('os', Load(), lineno=853, col_offset=15), 'path', Load(), lineno=853, col_offset=15), 'exists', Load(), lineno=853, col_offset=15), [Attribute(Name('self', Load(), lineno=853, col_offset=30), '_path', Load(), lineno=853, col_offset=30)], [], None, None, lineno=853, col_offset=15), lineno=853, col_offset=11), [If(Name('create', Load(), lineno=854, col_offset=15), [Expr(Call(Attribute(Name('os', Load(), lineno=855, col_offset=16), 'mkdir', Load(), lineno=855, col_offset=16), [Attribute(Name('self', Load(), lineno=855, col_offset=25), '_path', Load(), lineno=855, col_offset=25), Num(448, lineno=855, col_offset=37)], [], None, None, lineno=855, col_offset=16), lineno=855, col_offset=16), Expr(Call(Attribute(Name('os', Load(), lineno=856, col_offset=16), 'close', Load(), lineno=856, col_offset=16), [Call(Attribute(Name('os', Load(), lineno=856, col_offset=25), 'open', Load(), lineno=856, col_offset=25), [Call(Attribute(Attribute(Name('os', Load(), lineno=856, col_offset=33), 'path', Load(), lineno=856, col_offset=33), 'join', Load(), lineno=856, col_offset=33), [Attribute(Name('self', Load(), lineno=856, col_offset=46), '_path', Load(), lineno=856, col_offset=46), Str('.mh_sequences', lineno=856, col_offset=58)], [], None, None, lineno=856, col_offset=33), BinOp(BinOp(Attribute(Name('os', Load(), lineno=857, col_offset=33), 'O_CREAT', Load(), lineno=857, col_offset=33), BitOr(), Attribute(Name('os', Load(), lineno=857, col_offset=46), 'O_EXCL', Load(), lineno=857, col_offset=46), lineno=857, col_offset=33), BitOr(), Attribute(Name('os', Load(), lineno=857, col_offset=58), 'O_WRONLY', Load(), lineno=857, col_offset=58), lineno=857, col_offset=56), Num(384, lineno=857, col_offset=71)], [], None, None, lineno=856, col_offset=25)], [], None, None, lineno=856, col_offset=16), lineno=856, col_offset=16)], [Raise(Call(Name('NoSuchMailboxError', Load(), lineno=859, col_offset=22), [Attribute(Name('self', Load(), lineno=859, col_offset=41), '_path', Load(), lineno=859, col_offset=41)], [], None, None, lineno=859, col_offset=22), None, None, lineno=859, col_offset=16)], lineno=854, col_offset=12)], [], lineno=853, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=860, col_offset=8), '_locked', Store(), lineno=860, col_offset=8)], Name('False', Load(), lineno=860, col_offset=23), lineno=860, col_offset=8)], [], lineno=850, col_offset=4), FunctionDef('add', arguments([Name('self', Param(), lineno=862, col_offset=12), Name('message', Param(), lineno=862, col_offset=18)], None, None, []), [Expr(Str('Add message and return assigned key.', lineno=863, col_offset=8), lineno=863, col_offset=8), Assign([Name('keys', Store(), lineno=864, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=864, col_offset=15), 'keys', Load(), lineno=864, col_offset=15), [], [], None, None, lineno=864, col_offset=15), lineno=864, col_offset=8), If(Compare(Call(Name('len', Load(), lineno=865, col_offset=11), [Name('keys', Load(), lineno=865, col_offset=15)], [], None, None, lineno=865, col_offset=11), [Eq()], [Num(0, lineno=865, col_offset=24)], lineno=865, col_offset=11), [Assign([Name('new_key', Store(), lineno=866, col_offset=12)], Num(1, lineno=866, col_offset=22), lineno=866, col_offset=12)], [Assign([Name('new_key', Store(), lineno=868, col_offset=12)], BinOp(Call(Name('max', Load(), lineno=868, col_offset=22), [Name('keys', Load(), lineno=868, col_offset=26)], [], None, None, lineno=868, col_offset=22), Add(), Num(1, lineno=868, col_offset=34), lineno=868, col_offset=22), lineno=868, col_offset=12)], lineno=865, col_offset=8), Assign([Name('new_path', Store(), lineno=869, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=869, col_offset=19), 'path', Load(), lineno=869, col_offset=19), 'join', Load(), lineno=869, col_offset=19), [Attribute(Name('self', Load(), lineno=869, col_offset=32), '_path', Load(), lineno=869, col_offset=32), Call(Name('str', Load(), lineno=869, col_offset=44), [Name('new_key', Load(), lineno=869, col_offset=48)], [], None, None, lineno=869, col_offset=44)], [], None, None, lineno=869, col_offset=19), lineno=869, col_offset=8), Assign([Name('f', Store(), lineno=870, col_offset=8)], Call(Name('_create_carefully', Load(), lineno=870, col_offset=12), [Name('new_path', Load(), lineno=870, col_offset=30)], [], None, None, lineno=870, col_offset=12), lineno=870, col_offset=8), TryFinally([If(Attribute(Name('self', Load(), lineno=872, col_offset=15), '_locked', Load(), lineno=872, col_offset=15), [Expr(Call(Name('_lock_file', Load(), lineno=873, col_offset=16), [Name('f', Load(), lineno=873, col_offset=27)], [], None, None, lineno=873, col_offset=16), lineno=873, col_offset=16)], [], lineno=872, col_offset=12), TryFinally([Expr(Call(Attribute(Name('self', Load(), lineno=875, col_offset=16), '_dump_message', Load(), lineno=875, col_offset=16), [Name('message', Load(), lineno=875, col_offset=35), Name('f', Load(), lineno=875, col_offset=44)], [], None, None, lineno=875, col_offset=16), lineno=875, col_offset=16), If(Call(Name('isinstance', Load(), lineno=876, col_offset=19), [Name('message', Load(), lineno=876, col_offset=30), Name('MHMessage', Load(), lineno=876, col_offset=39)], [], None, None, lineno=876, col_offset=19), [Expr(Call(Attribute(Name('self', Load(), lineno=877, col_offset=20), '_dump_sequences', Load(), lineno=877, col_offset=20), [Name('message', Load(), lineno=877, col_offset=41), Name('new_key', Load(), lineno=877, col_offset=50)], [], None, None, lineno=877, col_offset=20), lineno=877, col_offset=20)], [], lineno=876, col_offset=16)], [If(Attribute(Name('self', Load(), lineno=879, col_offset=19), '_locked', Load(), lineno=879, col_offset=19), [Expr(Call(Name('_unlock_file', Load(), lineno=880, col_offset=20), [Name('f', Load(), lineno=880, col_offset=33)], [], None, None, lineno=880, col_offset=20), lineno=880, col_offset=20)], [], lineno=879, col_offset=16)], lineno=874, col_offset=12)], [Expr(Call(Name('_sync_close', Load(), lineno=882, col_offset=12), [Name('f', Load(), lineno=882, col_offset=24)], [], None, None, lineno=882, col_offset=12), lineno=882, col_offset=12)], lineno=871, col_offset=8), Return(Name('new_key', Load(), lineno=883, col_offset=15), lineno=883, col_offset=8)], [], lineno=862, col_offset=4), FunctionDef('remove', arguments([Name('self', Param(), lineno=885, col_offset=15), Name('key', Param(), lineno=885, col_offset=21)], None, None, []), [Expr(Str("Remove the keyed message; raise KeyError if it doesn't exist.", lineno=886, col_offset=8), lineno=886, col_offset=8), Assign([Name('path', Store(), lineno=887, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=887, col_offset=15), 'path', Load(), lineno=887, col_offset=15), 'join', Load(), lineno=887, col_offset=15), [Attribute(Name('self', Load(), lineno=887, col_offset=28), '_path', Load(), lineno=887, col_offset=28), Call(Name('str', Load(), lineno=887, col_offset=40), [Name('key', Load(), lineno=887, col_offset=44)], [], None, None, lineno=887, col_offset=40)], [], None, None, lineno=887, col_offset=15), lineno=887, col_offset=8), TryExcept([Assign([Name('f', Store(), lineno=889, col_offset=12)], Call(Name('open', Load(), lineno=889, col_offset=16), [Name('path', Load(), lineno=889, col_offset=21), Str('rb+', lineno=889, col_offset=27)], [], None, None, lineno=889, col_offset=16), lineno=889, col_offset=12)], [ExceptHandler(Name('IOError', Load(), lineno=890, col_offset=15), Name('e', Store(), lineno=890, col_offset=24), [If(Compare(Attribute(Name('e', Load(), lineno=891, col_offset=15), 'errno', Load(), lineno=891, col_offset=15), [Eq()], [Attribute(Name('errno', Load(), lineno=891, col_offset=26), 'ENOENT', Load(), lineno=891, col_offset=26)], lineno=891, col_offset=15), [Raise(Call(Name('KeyError', Load(), lineno=892, col_offset=22), [BinOp(Str('No message with key: %s', lineno=892, col_offset=31), Mod(), Name('key', Load(), lineno=892, col_offset=59), lineno=892, col_offset=31)], [], None, None, lineno=892, col_offset=22), None, None, lineno=892, col_offset=16)], [Raise(None, None, None, lineno=894, col_offset=16)], lineno=891, col_offset=12)], lineno=890, col_offset=8)], [Expr(Call(Attribute(Name('f', Load(), lineno=896, col_offset=12), 'close', Load(), lineno=896, col_offset=12), [], [], None, None, lineno=896, col_offset=12), lineno=896, col_offset=12), Expr(Call(Attribute(Name('os', Load(), lineno=897, col_offset=12), 'remove', Load(), lineno=897, col_offset=12), [Name('path', Load(), lineno=897, col_offset=22)], [], None, None, lineno=897, col_offset=12), lineno=897, col_offset=12)], lineno=888, col_offset=8)], [], lineno=885, col_offset=4), FunctionDef('__setitem__', arguments([Name('self', Param(), lineno=899, col_offset=20), Name('key', Param(), lineno=899, col_offset=26), Name('message', Param(), lineno=899, col_offset=31)], None, None, []), [Expr(Str("Replace the keyed message; raise KeyError if it doesn't exist.", lineno=900, col_offset=8), lineno=900, col_offset=8), Assign([Name('path', Store(), lineno=901, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=901, col_offset=15), 'path', Load(), lineno=901, col_offset=15), 'join', Load(), lineno=901, col_offset=15), [Attribute(Name('self', Load(), lineno=901, col_offset=28), '_path', Load(), lineno=901, col_offset=28), Call(Name('str', Load(), lineno=901, col_offset=40), [Name('key', Load(), lineno=901, col_offset=44)], [], None, None, lineno=901, col_offset=40)], [], None, None, lineno=901, col_offset=15), lineno=901, col_offset=8), TryExcept([Assign([Name('f', Store(), lineno=903, col_offset=12)], Call(Name('open', Load(), lineno=903, col_offset=16), [Name('path', Load(), lineno=903, col_offset=21), Str('rb+', lineno=903, col_offset=27)], [], None, None, lineno=903, col_offset=16), lineno=903, col_offset=12)], [ExceptHandler(Name('IOError', Load(), lineno=904, col_offset=15), Name('e', Store(), lineno=904, col_offset=24), [If(Compare(Attribute(Name('e', Load(), lineno=905, col_offset=15), 'errno', Load(), lineno=905, col_offset=15), [Eq()], [Attribute(Name('errno', Load(), lineno=905, col_offset=26), 'ENOENT', Load(), lineno=905, col_offset=26)], lineno=905, col_offset=15), [Raise(Call(Name('KeyError', Load(), lineno=906, col_offset=22), [BinOp(Str('No message with key: %s', lineno=906, col_offset=31), Mod(), Name('key', Load(), lineno=906, col_offset=59), lineno=906, col_offset=31)], [], None, None, lineno=906, col_offset=22), None, None, lineno=906, col_offset=16)], [Raise(None, None, None, lineno=908, col_offset=16)], lineno=905, col_offset=12)], lineno=904, col_offset=8)], [], lineno=902, col_offset=8), TryFinally([If(Attribute(Name('self', Load(), lineno=910, col_offset=15), '_locked', Load(), lineno=910, col_offset=15), [Expr(Call(Name('_lock_file', Load(), lineno=911, col_offset=16), [Name('f', Load(), lineno=911, col_offset=27)], [], None, None, lineno=911, col_offset=16), lineno=911, col_offset=16)], [], lineno=910, col_offset=12), TryFinally([Expr(Call(Attribute(Name('os', Load(), lineno=913, col_offset=16), 'close', Load(), lineno=913, col_offset=16), [Call(Attribute(Name('os', Load(), lineno=913, col_offset=25), 'open', Load(), lineno=913, col_offset=25), [Name('path', Load(), lineno=913, col_offset=33), BinOp(Attribute(Name('os', Load(), lineno=913, col_offset=39), 'O_WRONLY', Load(), lineno=913, col_offset=39), BitOr(), Attribute(Name('os', Load(), lineno=913, col_offset=53), 'O_TRUNC', Load(), lineno=913, col_offset=53), lineno=913, col_offset=39)], [], None, None, lineno=913, col_offset=25)], [], None, None, lineno=913, col_offset=16), lineno=913, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=914, col_offset=16), '_dump_message', Load(), lineno=914, col_offset=16), [Name('message', Load(), lineno=914, col_offset=35), Name('f', Load(), lineno=914, col_offset=44)], [], None, None, lineno=914, col_offset=16), lineno=914, col_offset=16), If(Call(Name('isinstance', Load(), lineno=915, col_offset=19), [Name('message', Load(), lineno=915, col_offset=30), Name('MHMessage', Load(), lineno=915, col_offset=39)], [], None, None, lineno=915, col_offset=19), [Expr(Call(Attribute(Name('self', Load(), lineno=916, col_offset=20), '_dump_sequences', Load(), lineno=916, col_offset=20), [Name('message', Load(), lineno=916, col_offset=41), Name('key', Load(), lineno=916, col_offset=50)], [], None, None, lineno=916, col_offset=20), lineno=916, col_offset=20)], [], lineno=915, col_offset=16)], [If(Attribute(Name('self', Load(), lineno=918, col_offset=19), '_locked', Load(), lineno=918, col_offset=19), [Expr(Call(Name('_unlock_file', Load(), lineno=919, col_offset=20), [Name('f', Load(), lineno=919, col_offset=33)], [], None, None, lineno=919, col_offset=20), lineno=919, col_offset=20)], [], lineno=918, col_offset=16)], lineno=912, col_offset=12)], [Expr(Call(Name('_sync_close', Load(), lineno=921, col_offset=12), [Name('f', Load(), lineno=921, col_offset=24)], [], None, None, lineno=921, col_offset=12), lineno=921, col_offset=12)], lineno=909, col_offset=8)], [], lineno=899, col_offset=4), FunctionDef('get_message', arguments([Name('self', Param(), lineno=923, col_offset=20), Name('key', Param(), lineno=923, col_offset=26)], None, None, []), [Expr(Str('Return a Message representation or raise a KeyError.', lineno=924, col_offset=8), lineno=924, col_offset=8), TryExcept([If(Attribute(Name('self', Load(), lineno=926, col_offset=15), '_locked', Load(), lineno=926, col_offset=15), [Assign([Name('f', Store(), lineno=927, col_offset=16)], Call(Name('open', Load(), lineno=927, col_offset=20), [Call(Attribute(Attribute(Name('os', Load(), lineno=927, col_offset=25), 'path', Load(), lineno=927, col_offset=25), 'join', Load(), lineno=927, col_offset=25), [Attribute(Name('self', Load(), lineno=927, col_offset=38), '_path', Load(), lineno=927, col_offset=38), Call(Name('str', Load(), lineno=927, col_offset=50), [Name('key', Load(), lineno=927, col_offset=54)], [], None, None, lineno=927, col_offset=50)], [], None, None, lineno=927, col_offset=25), Str('r+', lineno=927, col_offset=61)], [], None, None, lineno=927, col_offset=20), lineno=927, col_offset=16)], [Assign([Name('f', Store(), lineno=929, col_offset=16)], Call(Name('open', Load(), lineno=929, col_offset=20), [Call(Attribute(Attribute(Name('os', Load(), lineno=929, col_offset=25), 'path', Load(), lineno=929, col_offset=25), 'join', Load(), lineno=929, col_offset=25), [Attribute(Name('self', Load(), lineno=929, col_offset=38), '_path', Load(), lineno=929, col_offset=38), Call(Name('str', Load(), lineno=929, col_offset=50), [Name('key', Load(), lineno=929, col_offset=54)], [], None, None, lineno=929, col_offset=50)], [], None, None, lineno=929, col_offset=25), Str('r', lineno=929, col_offset=61)], [], None, None, lineno=929, col_offset=20), lineno=929, col_offset=16)], lineno=926, col_offset=12)], [ExceptHandler(Name('IOError', Load(), lineno=930, col_offset=15), Name('e', Store(), lineno=930, col_offset=24), [If(Compare(Attribute(Name('e', Load(), lineno=931, col_offset=15), 'errno', Load(), lineno=931, col_offset=15), [Eq()], [Attribute(Name('errno', Load(), lineno=931, col_offset=26), 'ENOENT', Load(), lineno=931, col_offset=26)], lineno=931, col_offset=15), [Raise(Call(Name('KeyError', Load(), lineno=932, col_offset=22), [BinOp(Str('No message with key: %s', lineno=932, col_offset=31), Mod(), Name('key', Load(), lineno=932, col_offset=59), lineno=932, col_offset=31)], [], None, None, lineno=932, col_offset=22), None, None, lineno=932, col_offset=16)], [Raise(None, None, None, lineno=934, col_offset=16)], lineno=931, col_offset=12)], lineno=930, col_offset=8)], [], lineno=925, col_offset=8), TryFinally([If(Attribute(Name('self', Load(), lineno=936, col_offset=15), '_locked', Load(), lineno=936, col_offset=15), [Expr(Call(Name('_lock_file', Load(), lineno=937, col_offset=16), [Name('f', Load(), lineno=937, col_offset=27)], [], None, None, lineno=937, col_offset=16), lineno=937, col_offset=16)], [], lineno=936, col_offset=12), TryFinally([Assign([Name('msg', Store(), lineno=939, col_offset=16)], Call(Name('MHMessage', Load(), lineno=939, col_offset=22), [Name('f', Load(), lineno=939, col_offset=32)], [], None, None, lineno=939, col_offset=22), lineno=939, col_offset=16)], [If(Attribute(Name('self', Load(), lineno=941, col_offset=19), '_locked', Load(), lineno=941, col_offset=19), [Expr(Call(Name('_unlock_file', Load(), lineno=942, col_offset=20), [Name('f', Load(), lineno=942, col_offset=33)], [], None, None, lineno=942, col_offset=20), lineno=942, col_offset=20)], [], lineno=941, col_offset=16)], lineno=938, col_offset=12)], [Expr(Call(Attribute(Name('f', Load(), lineno=944, col_offset=12), 'close', Load(), lineno=944, col_offset=12), [], [], None, None, lineno=944, col_offset=12), lineno=944, col_offset=12)], lineno=935, col_offset=8), For(Tuple([Name('name', Store(), lineno=945, col_offset=12), Name('key_list', Store(), lineno=945, col_offset=18)], Store(), lineno=945, col_offset=12), Call(Attribute(Call(Attribute(Name('self', Load(), lineno=945, col_offset=30), 'get_sequences', Load(), lineno=945, col_offset=30), [], [], None, None, lineno=945, col_offset=30), 'iteritems', Load(), lineno=945, col_offset=30), [], [], None, None, lineno=945, col_offset=30), [If(Compare(Name('key', Load(), lineno=946, col_offset=15), [In()], [Name('key_list', Load(), lineno=946, col_offset=22)], lineno=946, col_offset=15), [Expr(Call(Attribute(Name('msg', Load(), lineno=947, col_offset=16), 'add_sequence', Load(), lineno=947, col_offset=16), [Name('name', Load(), lineno=947, col_offset=33)], [], None, None, lineno=947, col_offset=16), lineno=947, col_offset=16)], [], lineno=946, col_offset=12)], [], lineno=945, col_offset=8), Return(Name('msg', Load(), lineno=948, col_offset=15), lineno=948, col_offset=8)], [], lineno=923, col_offset=4), FunctionDef('get_string', arguments([Name('self', Param(), lineno=950, col_offset=19), Name('key', Param(), lineno=950, col_offset=25)], None, None, []), [Expr(Str('Return a string representation or raise a KeyError.', lineno=951, col_offset=8), lineno=951, col_offset=8), TryExcept([If(Attribute(Name('self', Load(), lineno=953, col_offset=15), '_locked', Load(), lineno=953, col_offset=15), [Assign([Name('f', Store(), lineno=954, col_offset=16)], Call(Name('open', Load(), lineno=954, col_offset=20), [Call(Attribute(Attribute(Name('os', Load(), lineno=954, col_offset=25), 'path', Load(), lineno=954, col_offset=25), 'join', Load(), lineno=954, col_offset=25), [Attribute(Name('self', Load(), lineno=954, col_offset=38), '_path', Load(), lineno=954, col_offset=38), Call(Name('str', Load(), lineno=954, col_offset=50), [Name('key', Load(), lineno=954, col_offset=54)], [], None, None, lineno=954, col_offset=50)], [], None, None, lineno=954, col_offset=25), Str('r+', lineno=954, col_offset=61)], [], None, None, lineno=954, col_offset=20), lineno=954, col_offset=16)], [Assign([Name('f', Store(), lineno=956, col_offset=16)], Call(Name('open', Load(), lineno=956, col_offset=20), [Call(Attribute(Attribute(Name('os', Load(), lineno=956, col_offset=25), 'path', Load(), lineno=956, col_offset=25), 'join', Load(), lineno=956, col_offset=25), [Attribute(Name('self', Load(), lineno=956, col_offset=38), '_path', Load(), lineno=956, col_offset=38), Call(Name('str', Load(), lineno=956, col_offset=50), [Name('key', Load(), lineno=956, col_offset=54)], [], None, None, lineno=956, col_offset=50)], [], None, None, lineno=956, col_offset=25), Str('r', lineno=956, col_offset=61)], [], None, None, lineno=956, col_offset=20), lineno=956, col_offset=16)], lineno=953, col_offset=12)], [ExceptHandler(Name('IOError', Load(), lineno=957, col_offset=15), Name('e', Store(), lineno=957, col_offset=24), [If(Compare(Attribute(Name('e', Load(), lineno=958, col_offset=15), 'errno', Load(), lineno=958, col_offset=15), [Eq()], [Attribute(Name('errno', Load(), lineno=958, col_offset=26), 'ENOENT', Load(), lineno=958, col_offset=26)], lineno=958, col_offset=15), [Raise(Call(Name('KeyError', Load(), lineno=959, col_offset=22), [BinOp(Str('No message with key: %s', lineno=959, col_offset=31), Mod(), Name('key', Load(), lineno=959, col_offset=59), lineno=959, col_offset=31)], [], None, None, lineno=959, col_offset=22), None, None, lineno=959, col_offset=16)], [Raise(None, None, None, lineno=961, col_offset=16)], lineno=958, col_offset=12)], lineno=957, col_offset=8)], [], lineno=952, col_offset=8), TryFinally([If(Attribute(Name('self', Load(), lineno=963, col_offset=15), '_locked', Load(), lineno=963, col_offset=15), [Expr(Call(Name('_lock_file', Load(), lineno=964, col_offset=16), [Name('f', Load(), lineno=964, col_offset=27)], [], None, None, lineno=964, col_offset=16), lineno=964, col_offset=16)], [], lineno=963, col_offset=12), TryFinally([Return(Call(Attribute(Name('f', Load(), lineno=966, col_offset=23), 'read', Load(), lineno=966, col_offset=23), [], [], None, None, lineno=966, col_offset=23), lineno=966, col_offset=16)], [If(Attribute(Name('self', Load(), lineno=968, col_offset=19), '_locked', Load(), lineno=968, col_offset=19), [Expr(Call(Name('_unlock_file', Load(), lineno=969, col_offset=20), [Name('f', Load(), lineno=969, col_offset=33)], [], None, None, lineno=969, col_offset=20), lineno=969, col_offset=20)], [], lineno=968, col_offset=16)], lineno=965, col_offset=12)], [Expr(Call(Attribute(Name('f', Load(), lineno=971, col_offset=12), 'close', Load(), lineno=971, col_offset=12), [], [], None, None, lineno=971, col_offset=12), lineno=971, col_offset=12)], lineno=962, col_offset=8)], [], lineno=950, col_offset=4), FunctionDef('get_file', arguments([Name('self', Param(), lineno=973, col_offset=17), Name('key', Param(), lineno=973, col_offset=23)], None, None, []), [Expr(Str('Return a file-like representation or raise a KeyError.', lineno=974, col_offset=8), lineno=974, col_offset=8), TryExcept([Assign([Name('f', Store(), lineno=976, col_offset=12)], Call(Name('open', Load(), lineno=976, col_offset=16), [Call(Attribute(Attribute(Name('os', Load(), lineno=976, col_offset=21), 'path', Load(), lineno=976, col_offset=21), 'join', Load(), lineno=976, col_offset=21), [Attribute(Name('self', Load(), lineno=976, col_offset=34), '_path', Load(), lineno=976, col_offset=34), Call(Name('str', Load(), lineno=976, col_offset=46), [Name('key', Load(), lineno=976, col_offset=50)], [], None, None, lineno=976, col_offset=46)], [], None, None, lineno=976, col_offset=21), Str('rb', lineno=976, col_offset=57)], [], None, None, lineno=976, col_offset=16), lineno=976, col_offset=12)], [ExceptHandler(Name('IOError', Load(), lineno=977, col_offset=15), Name('e', Store(), lineno=977, col_offset=24), [If(Compare(Attribute(Name('e', Load(), lineno=978, col_offset=15), 'errno', Load(), lineno=978, col_offset=15), [Eq()], [Attribute(Name('errno', Load(), lineno=978, col_offset=26), 'ENOENT', Load(), lineno=978, col_offset=26)], lineno=978, col_offset=15), [Raise(Call(Name('KeyError', Load(), lineno=979, col_offset=22), [BinOp(Str('No message with key: %s', lineno=979, col_offset=31), Mod(), Name('key', Load(), lineno=979, col_offset=59), lineno=979, col_offset=31)], [], None, None, lineno=979, col_offset=22), None, None, lineno=979, col_offset=16)], [Raise(None, None, None, lineno=981, col_offset=16)], lineno=978, col_offset=12)], lineno=977, col_offset=8)], [], lineno=975, col_offset=8), Return(Call(Name('_ProxyFile', Load(), lineno=982, col_offset=15), [Name('f', Load(), lineno=982, col_offset=26)], [], None, None, lineno=982, col_offset=15), lineno=982, col_offset=8)], [], lineno=973, col_offset=4), FunctionDef('iterkeys', arguments([Name('self', Param(), lineno=984, col_offset=17)], None, None, []), [Expr(Str('Return an iterator over keys.', lineno=985, col_offset=8), lineno=985, col_offset=8), Return(Call(Name('iter', Load(), lineno=986, col_offset=15), [Call(Name('sorted', Load(), lineno=986, col_offset=20), [GeneratorExp(Call(Name('int', Load(), lineno=986, col_offset=27), [Name('entry', Load(), lineno=986, col_offset=31)], [], None, None, lineno=986, col_offset=27), [comprehension(Name('entry', Store(), lineno=986, col_offset=42), Call(Attribute(Name('os', Load(), lineno=986, col_offset=51), 'listdir', Load(), lineno=986, col_offset=51), [Attribute(Name('self', Load(), lineno=986, col_offset=62), '_path', Load(), lineno=986, col_offset=62)], [], None, None, lineno=986, col_offset=51), [Call(Attribute(Name('entry', Load(), lineno=987, col_offset=41), 'isdigit', Load(), lineno=987, col_offset=41), [], [], None, None, lineno=987, col_offset=41)])], lineno=986, col_offset=27)], [], None, None, lineno=986, col_offset=20)], [], None, None, lineno=986, col_offset=15), lineno=986, col_offset=8)], [], lineno=984, col_offset=4), FunctionDef('has_key', arguments([Name('self', Param(), lineno=989, col_offset=16), Name('key', Param(), lineno=989, col_offset=22)], None, None, []), [Expr(Str('Return True if the keyed message exists, False otherwise.', lineno=990, col_offset=8), lineno=990, col_offset=8), Return(Call(Attribute(Attribute(Name('os', Load(), lineno=991, col_offset=15), 'path', Load(), lineno=991, col_offset=15), 'exists', Load(), lineno=991, col_offset=15), [Call(Attribute(Attribute(Name('os', Load(), lineno=991, col_offset=30), 'path', Load(), lineno=991, col_offset=30), 'join', Load(), lineno=991, col_offset=30), [Attribute(Name('self', Load(), lineno=991, col_offset=43), '_path', Load(), lineno=991, col_offset=43), Call(Name('str', Load(), lineno=991, col_offset=55), [Name('key', Load(), lineno=991, col_offset=59)], [], None, None, lineno=991, col_offset=55)], [], None, None, lineno=991, col_offset=30)], [], None, None, lineno=991, col_offset=15), lineno=991, col_offset=8)], [], lineno=989, col_offset=4), FunctionDef('__len__', arguments([Name('self', Param(), lineno=993, col_offset=16)], None, None, []), [Expr(Str('Return a count of messages in the mailbox.', lineno=994, col_offset=8), lineno=994, col_offset=8), Return(Call(Name('len', Load(), lineno=995, col_offset=15), [Call(Name('list', Load(), lineno=995, col_offset=19), [Call(Attribute(Name('self', Load(), lineno=995, col_offset=24), 'iterkeys', Load(), lineno=995, col_offset=24), [], [], None, None, lineno=995, col_offset=24)], [], None, None, lineno=995, col_offset=19)], [], None, None, lineno=995, col_offset=15), lineno=995, col_offset=8)], [], lineno=993, col_offset=4), FunctionDef('lock', arguments([Name('self', Param(), lineno=997, col_offset=13)], None, None, []), [Expr(Str('Lock the mailbox.', lineno=998, col_offset=8), lineno=998, col_offset=8), If(UnaryOp(Not(), Attribute(Name('self', Load(), lineno=999, col_offset=15), '_locked', Load(), lineno=999, col_offset=15), lineno=999, col_offset=11), [Assign([Attribute(Name('self', Load(), lineno=1000, col_offset=12), '_file', Store(), lineno=1000, col_offset=12)], Call(Name('open', Load(), lineno=1000, col_offset=25), [Call(Attribute(Attribute(Name('os', Load(), lineno=1000, col_offset=30), 'path', Load(), lineno=1000, col_offset=30), 'join', Load(), lineno=1000, col_offset=30), [Attribute(Name('self', Load(), lineno=1000, col_offset=43), '_path', Load(), lineno=1000, col_offset=43), Str('.mh_sequences', lineno=1000, col_offset=55)], [], None, None, lineno=1000, col_offset=30), Str('rb+', lineno=1000, col_offset=73)], [], None, None, lineno=1000, col_offset=25), lineno=1000, col_offset=12), Expr(Call(Name('_lock_file', Load(), lineno=1001, col_offset=12), [Attribute(Name('self', Load(), lineno=1001, col_offset=23), '_file', Load(), lineno=1001, col_offset=23)], [], None, None, lineno=1001, col_offset=12), lineno=1001, col_offset=12), Assign([Attribute(Name('self', Load(), lineno=1002, col_offset=12), '_locked', Store(), lineno=1002, col_offset=12)], Name('True', Load(), lineno=1002, col_offset=27), lineno=1002, col_offset=12)], [], lineno=999, col_offset=8)], [], lineno=997, col_offset=4), FunctionDef('unlock', arguments([Name('self', Param(), lineno=1004, col_offset=15)], None, None, []), [Expr(Str('Unlock the mailbox if it is locked.', lineno=1005, col_offset=8), lineno=1005, col_offset=8), If(Attribute(Name('self', Load(), lineno=1006, col_offset=11), '_locked', Load(), lineno=1006, col_offset=11), [Expr(Call(Name('_unlock_file', Load(), lineno=1007, col_offset=12), [Attribute(Name('self', Load(), lineno=1007, col_offset=25), '_file', Load(), lineno=1007, col_offset=25)], [], None, None, lineno=1007, col_offset=12), lineno=1007, col_offset=12), Expr(Call(Name('_sync_close', Load(), lineno=1008, col_offset=12), [Attribute(Name('self', Load(), lineno=1008, col_offset=24), '_file', Load(), lineno=1008, col_offset=24)], [], None, None, lineno=1008, col_offset=12), lineno=1008, col_offset=12), Delete([Attribute(Name('self', Load(), lineno=1009, col_offset=16), '_file', Del(), lineno=1009, col_offset=16)], lineno=1009, col_offset=12), Assign([Attribute(Name('self', Load(), lineno=1010, col_offset=12), '_locked', Store(), lineno=1010, col_offset=12)], Name('False', Load(), lineno=1010, col_offset=27), lineno=1010, col_offset=12)], [], lineno=1006, col_offset=8)], [], lineno=1004, col_offset=4), FunctionDef('flush', arguments([Name('self', Param(), lineno=1012, col_offset=14)], None, None, []), [Expr(Str('Write any pending changes to the disk.', lineno=1013, col_offset=8), lineno=1013, col_offset=8), Return(None, lineno=1014, col_offset=8)], [], lineno=1012, col_offset=4), FunctionDef('close', arguments([Name('self', Param(), lineno=1016, col_offset=14)], None, None, []), [Expr(Str('Flush and close the mailbox.', lineno=1017, col_offset=8), lineno=1017, col_offset=8), If(Attribute(Name('self', Load(), lineno=1018, col_offset=11), '_locked', Load(), lineno=1018, col_offset=11), [Expr(Call(Attribute(Name('self', Load(), lineno=1019, col_offset=12), 'unlock', Load(), lineno=1019, col_offset=12), [], [], None, None, lineno=1019, col_offset=12), lineno=1019, col_offset=12)], [], lineno=1018, col_offset=8)], [], lineno=1016, col_offset=4), FunctionDef('list_folders', arguments([Name('self', Param(), lineno=1021, col_offset=21)], None, None, []), [Expr(Str('Return a list of folder names.', lineno=1022, col_offset=8), lineno=1022, col_offset=8), Assign([Name('result', Store(), lineno=1023, col_offset=8)], List([], Load(), lineno=1023, col_offset=17), lineno=1023, col_offset=8), For(Name('entry', Store(), lineno=1024, col_offset=12), Call(Attribute(Name('os', Load(), lineno=1024, col_offset=21), 'listdir', Load(), lineno=1024, col_offset=21), [Attribute(Name('self', Load(), lineno=1024, col_offset=32), '_path', Load(), lineno=1024, col_offset=32)], [], None, None, lineno=1024, col_offset=21), [If(Call(Attribute(Attribute(Name('os', Load(), lineno=1025, col_offset=15), 'path', Load(), lineno=1025, col_offset=15), 'isdir', Load(), lineno=1025, col_offset=15), [Call(Attribute(Attribute(Name('os', Load(), lineno=1025, col_offset=29), 'path', Load(), lineno=1025, col_offset=29), 'join', Load(), lineno=1025, col_offset=29), [Attribute(Name('self', Load(), lineno=1025, col_offset=42), '_path', Load(), lineno=1025, col_offset=42), Name('entry', Load(), lineno=1025, col_offset=54)], [], None, None, lineno=1025, col_offset=29)], [], None, None, lineno=1025, col_offset=15), [Expr(Call(Attribute(Name('result', Load(), lineno=1026, col_offset=16), 'append', Load(), lineno=1026, col_offset=16), [Name('entry', Load(), lineno=1026, col_offset=30)], [], None, None, lineno=1026, col_offset=16), lineno=1026, col_offset=16)], [], lineno=1025, col_offset=12)], [], lineno=1024, col_offset=8), Return(Name('result', Load(), lineno=1027, col_offset=15), lineno=1027, col_offset=8)], [], lineno=1021, col_offset=4), FunctionDef('get_folder', arguments([Name('self', Param(), lineno=1029, col_offset=19), Name('folder', Param(), lineno=1029, col_offset=25)], None, None, []), [Expr(Str('Return an MH instance for the named folder.', lineno=1030, col_offset=8), lineno=1030, col_offset=8), Return(Call(Name('MH', Load(), lineno=1031, col_offset=15), [Call(Attribute(Attribute(Name('os', Load(), lineno=1031, col_offset=18), 'path', Load(), lineno=1031, col_offset=18), 'join', Load(), lineno=1031, col_offset=18), [Attribute(Name('self', Load(), lineno=1031, col_offset=31), '_path', Load(), lineno=1031, col_offset=31), Name('folder', Load(), lineno=1031, col_offset=43)], [], None, None, lineno=1031, col_offset=18)], [keyword('factory', Attribute(Name('self', Load(), lineno=1032, col_offset=26), '_factory', Load(), lineno=1032, col_offset=26)), keyword('create', Name('False', Load(), lineno=1032, col_offset=48))], None, None, lineno=1031, col_offset=15), lineno=1031, col_offset=8)], [], lineno=1029, col_offset=4), FunctionDef('add_folder', arguments([Name('self', Param(), lineno=1034, col_offset=19), Name('folder', Param(), lineno=1034, col_offset=25)], None, None, []), [Expr(Str('Create a folder and return an MH instance representing it.', lineno=1035, col_offset=8), lineno=1035, col_offset=8), Return(Call(Name('MH', Load(), lineno=1036, col_offset=15), [Call(Attribute(Attribute(Name('os', Load(), lineno=1036, col_offset=18), 'path', Load(), lineno=1036, col_offset=18), 'join', Load(), lineno=1036, col_offset=18), [Attribute(Name('self', Load(), lineno=1036, col_offset=31), '_path', Load(), lineno=1036, col_offset=31), Name('folder', Load(), lineno=1036, col_offset=43)], [], None, None, lineno=1036, col_offset=18)], [keyword('factory', Attribute(Name('self', Load(), lineno=1037, col_offset=26), '_factory', Load(), lineno=1037, col_offset=26))], None, None, lineno=1036, col_offset=15), lineno=1036, col_offset=8)], [], lineno=1034, col_offset=4), FunctionDef('remove_folder', arguments([Name('self', Param(), lineno=1039, col_offset=22), Name('folder', Param(), lineno=1039, col_offset=28)], None, None, []), [Expr(Str('Delete the named folder, which must be empty.', lineno=1040, col_offset=8), lineno=1040, col_offset=8), Assign([Name('path', Store(), lineno=1041, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=1041, col_offset=15), 'path', Load(), lineno=1041, col_offset=15), 'join', Load(), lineno=1041, col_offset=15), [Attribute(Name('self', Load(), lineno=1041, col_offset=28), '_path', Load(), lineno=1041, col_offset=28), Name('folder', Load(), lineno=1041, col_offset=40)], [], None, None, lineno=1041, col_offset=15), lineno=1041, col_offset=8), Assign([Name('entries', Store(), lineno=1042, col_offset=8)], Call(Attribute(Name('os', Load(), lineno=1042, col_offset=18), 'listdir', Load(), lineno=1042, col_offset=18), [Name('path', Load(), lineno=1042, col_offset=29)], [], None, None, lineno=1042, col_offset=18), lineno=1042, col_offset=8), If(Compare(Name('entries', Load(), lineno=1043, col_offset=11), [Eq()], [List([Str('.mh_sequences', lineno=1043, col_offset=23)], Load(), lineno=1043, col_offset=22)], lineno=1043, col_offset=11), [Expr(Call(Attribute(Name('os', Load(), lineno=1044, col_offset=12), 'remove', Load(), lineno=1044, col_offset=12), [Call(Attribute(Attribute(Name('os', Load(), lineno=1044, col_offset=22), 'path', Load(), lineno=1044, col_offset=22), 'join', Load(), lineno=1044, col_offset=22), [Name('path', Load(), lineno=1044, col_offset=35), Str('.mh_sequences', lineno=1044, col_offset=41)], [], None, None, lineno=1044, col_offset=22)], [], None, None, lineno=1044, col_offset=12), lineno=1044, col_offset=12)], [If(Compare(Name('entries', Load(), lineno=1045, col_offset=13), [Eq()], [List([], Load(), lineno=1045, col_offset=24)], lineno=1045, col_offset=13), [Pass( lineno=1046, col_offset=12)], [Raise(Call(Name('NotEmptyError', Load(), lineno=1048, col_offset=18), [BinOp(Str('Folder not empty: %s', lineno=1048, col_offset=32), Mod(), Attribute(Name('self', Load(), lineno=1048, col_offset=57), '_path', Load(), lineno=1048, col_offset=57), lineno=1048, col_offset=32)], [], None, None, lineno=1048, col_offset=18), None, None, lineno=1048, col_offset=12)], lineno=1045, col_offset=13)], lineno=1043, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=1049, col_offset=8), 'rmdir', Load(), lineno=1049, col_offset=8), [Name('path', Load(), lineno=1049, col_offset=17)], [], None, None, lineno=1049, col_offset=8), lineno=1049, col_offset=8)], [], lineno=1039, col_offset=4), FunctionDef('get_sequences', arguments([Name('self', Param(), lineno=1051, col_offset=22)], None, None, []), [Expr(Str('Return a name-to-key-list dictionary to define each sequence.', lineno=1052, col_offset=8), lineno=1052, col_offset=8), Assign([Name('results', Store(), lineno=1053, col_offset=8)], Dict([], [], lineno=1053, col_offset=18), lineno=1053, col_offset=8), Assign([Name('f', Store(), lineno=1054, col_offset=8)], Call(Name('open', Load(), lineno=1054, col_offset=12), [Call(Attribute(Attribute(Name('os', Load(), lineno=1054, col_offset=17), 'path', Load(), lineno=1054, col_offset=17), 'join', Load(), lineno=1054, col_offset=17), [Attribute(Name('self', Load(), lineno=1054, col_offset=30), '_path', Load(), lineno=1054, col_offset=30), Str('.mh_sequences', lineno=1054, col_offset=42)], [], None, None, lineno=1054, col_offset=17), Str('r', lineno=1054, col_offset=60)], [], None, None, lineno=1054, col_offset=12), lineno=1054, col_offset=8), TryFinally([Assign([Name('all_keys', Store(), lineno=1056, col_offset=12)], Call(Name('set', Load(), lineno=1056, col_offset=23), [Call(Attribute(Name('self', Load(), lineno=1056, col_offset=27), 'keys', Load(), lineno=1056, col_offset=27), [], [], None, None, lineno=1056, col_offset=27)], [], None, None, lineno=1056, col_offset=23), lineno=1056, col_offset=12), For(Name('line', Store(), lineno=1057, col_offset=16), Name('f', Load(), lineno=1057, col_offset=24), [TryExcept([Assign([Tuple([Name('name', Store(), lineno=1059, col_offset=20), Name('contents', Store(), lineno=1059, col_offset=26)], Store(), lineno=1059, col_offset=20)], Call(Attribute(Name('line', Load(), lineno=1059, col_offset=37), 'split', Load(), lineno=1059, col_offset=37), [Str(':', lineno=1059, col_offset=48)], [], None, None, lineno=1059, col_offset=37), lineno=1059, col_offset=20), Assign([Name('keys', Store(), lineno=1060, col_offset=20)], Call(Name('set', Load(), lineno=1060, col_offset=27), [], [], None, None, lineno=1060, col_offset=27), lineno=1060, col_offset=20), For(Name('spec', Store(), lineno=1061, col_offset=24), Call(Attribute(Name('contents', Load(), lineno=1061, col_offset=32), 'split', Load(), lineno=1061, col_offset=32), [], [], None, None, lineno=1061, col_offset=32), [If(Call(Attribute(Name('spec', Load(), lineno=1062, col_offset=27), 'isdigit', Load(), lineno=1062, col_offset=27), [], [], None, None, lineno=1062, col_offset=27), [Expr(Call(Attribute(Name('keys', Load(), lineno=1063, col_offset=28), 'add', Load(), lineno=1063, col_offset=28), [Call(Name('int', Load(), lineno=1063, col_offset=37), [Name('spec', Load(), lineno=1063, col_offset=41)], [], None, None, lineno=1063, col_offset=37)], [], None, None, lineno=1063, col_offset=28), lineno=1063, col_offset=28)], [Assign([Tuple([Name('start', Store(), lineno=1065, col_offset=28), Name('stop', Store(), lineno=1065, col_offset=35)], Store(), lineno=1065, col_offset=28)], GeneratorExp(Call(Name('int', Load(), lineno=1065, col_offset=43), [Name('x', Load(), lineno=1065, col_offset=47)], [], None, None, lineno=1065, col_offset=43), [comprehension(Name('x', Store(), lineno=1065, col_offset=54), Call(Attribute(Name('spec', Load(), lineno=1065, col_offset=59), 'split', Load(), lineno=1065, col_offset=59), [Str('-', lineno=1065, col_offset=70)], [], None, None, lineno=1065, col_offset=59), [])], lineno=1065, col_offset=43), lineno=1065, col_offset=28), Expr(Call(Attribute(Name('keys', Load(), lineno=1066, col_offset=28), 'update', Load(), lineno=1066, col_offset=28), [Call(Name('range', Load(), lineno=1066, col_offset=40), [Name('start', Load(), lineno=1066, col_offset=46), BinOp(Name('stop', Load(), lineno=1066, col_offset=53), Add(), Num(1, lineno=1066, col_offset=60), lineno=1066, col_offset=53)], [], None, None, lineno=1066, col_offset=40)], [], None, None, lineno=1066, col_offset=28), lineno=1066, col_offset=28)], lineno=1062, col_offset=24)], [], lineno=1061, col_offset=20), Assign([Subscript(Name('results', Load(), lineno=1067, col_offset=20), Index(Name('name', Load(), lineno=1067, col_offset=28)), Store(), lineno=1067, col_offset=20)], ListComp(Name('key', Load(), lineno=1067, col_offset=37), [comprehension(Name('key', Store(), lineno=1067, col_offset=45), Call(Name('sorted', Load(), lineno=1067, col_offset=52), [Name('keys', Load(), lineno=1067, col_offset=59)], [], None, None, lineno=1067, col_offset=52), [Compare(Name('key', Load(), lineno=1068, col_offset=44), [In()], [Name('all_keys', Load(), lineno=1068, col_offset=51)], lineno=1068, col_offset=44)])], lineno=1067, col_offset=37), lineno=1067, col_offset=20), If(Compare(Call(Name('len', Load(), lineno=1069, col_offset=23), [Subscript(Name('results', Load(), lineno=1069, col_offset=27), Index(Name('name', Load(), lineno=1069, col_offset=35)), Load(), lineno=1069, col_offset=27)], [], None, None, lineno=1069, col_offset=23), [Eq()], [Num(0, lineno=1069, col_offset=45)], lineno=1069, col_offset=23), [Delete([Subscript(Name('results', Load(), lineno=1070, col_offset=28), Index(Name('name', Load(), lineno=1070, col_offset=36)), Del(), lineno=1070, col_offset=28)], lineno=1070, col_offset=24)], [], lineno=1069, col_offset=20)], [ExceptHandler(Name('ValueError', Load(), lineno=1071, col_offset=23), None, [Raise(Call(Name('FormatError', Load(), lineno=1072, col_offset=26), [BinOp(Str('Invalid sequence specification: %s', lineno=1072, col_offset=38), Mod(), Call(Attribute(Name('line', Load(), lineno=1073, col_offset=38), 'rstrip', Load(), lineno=1073, col_offset=38), [], [], None, None, lineno=1073, col_offset=38), lineno=1072, col_offset=38)], [], None, None, lineno=1072, col_offset=26), None, None, lineno=1072, col_offset=20)], lineno=1071, col_offset=16)], [], lineno=1058, col_offset=16)], [], lineno=1057, col_offset=12)], [Expr(Call(Attribute(Name('f', Load(), lineno=1075, col_offset=12), 'close', Load(), lineno=1075, col_offset=12), [], [], None, None, lineno=1075, col_offset=12), lineno=1075, col_offset=12)], lineno=1055, col_offset=8), Return(Name('results', Load(), lineno=1076, col_offset=15), lineno=1076, col_offset=8)], [], lineno=1051, col_offset=4), FunctionDef('set_sequences', arguments([Name('self', Param(), lineno=1078, col_offset=22), Name('sequences', Param(), lineno=1078, col_offset=28)], None, None, []), [Expr(Str('Set sequences using the given name-to-key-list dictionary.', lineno=1079, col_offset=8), lineno=1079, col_offset=8), Assign([Name('f', Store(), lineno=1080, col_offset=8)], Call(Name('open', Load(), lineno=1080, col_offset=12), [Call(Attribute(Attribute(Name('os', Load(), lineno=1080, col_offset=17), 'path', Load(), lineno=1080, col_offset=17), 'join', Load(), lineno=1080, col_offset=17), [Attribute(Name('self', Load(), lineno=1080, col_offset=30), '_path', Load(), lineno=1080, col_offset=30), Str('.mh_sequences', lineno=1080, col_offset=42)], [], None, None, lineno=1080, col_offset=17), Str('r+', lineno=1080, col_offset=60)], [], None, None, lineno=1080, col_offset=12), lineno=1080, col_offset=8), TryFinally([Expr(Call(Attribute(Name('os', Load(), lineno=1082, col_offset=12), 'close', Load(), lineno=1082, col_offset=12), [Call(Attribute(Name('os', Load(), lineno=1082, col_offset=21), 'open', Load(), lineno=1082, col_offset=21), [Attribute(Name('f', Load(), lineno=1082, col_offset=29), 'name', Load(), lineno=1082, col_offset=29), BinOp(Attribute(Name('os', Load(), lineno=1082, col_offset=37), 'O_WRONLY', Load(), lineno=1082, col_offset=37), BitOr(), Attribute(Name('os', Load(), lineno=1082, col_offset=51), 'O_TRUNC', Load(), lineno=1082, col_offset=51), lineno=1082, col_offset=37)], [], None, None, lineno=1082, col_offset=21)], [], None, None, lineno=1082, col_offset=12), lineno=1082, col_offset=12), For(Tuple([Name('name', Store(), lineno=1083, col_offset=16), Name('keys', Store(), lineno=1083, col_offset=22)], Store(), lineno=1083, col_offset=16), Call(Attribute(Name('sequences', Load(), lineno=1083, col_offset=30), 'iteritems', Load(), lineno=1083, col_offset=30), [], [], None, None, lineno=1083, col_offset=30), [If(Compare(Call(Name('len', Load(), lineno=1084, col_offset=19), [Name('keys', Load(), lineno=1084, col_offset=23)], [], None, None, lineno=1084, col_offset=19), [Eq()], [Num(0, lineno=1084, col_offset=32)], lineno=1084, col_offset=19), [Continue( lineno=1085, col_offset=20)], [], lineno=1084, col_offset=16), Expr(Call(Attribute(Name('f', Load(), lineno=1086, col_offset=16), 'write', Load(), lineno=1086, col_offset=16), [BinOp(Str('%s:', lineno=1086, col_offset=24), Mod(), Name('name', Load(), lineno=1086, col_offset=32), lineno=1086, col_offset=24)], [], None, None, lineno=1086, col_offset=16), lineno=1086, col_offset=16), Assign([Name('prev', Store(), lineno=1087, col_offset=16)], Name('None', Load(), lineno=1087, col_offset=23), lineno=1087, col_offset=16), Assign([Name('completing', Store(), lineno=1088, col_offset=16)], Name('False', Load(), lineno=1088, col_offset=29), lineno=1088, col_offset=16), For(Name('key', Store(), lineno=1089, col_offset=20), Call(Name('sorted', Load(), lineno=1089, col_offset=27), [Call(Name('set', Load(), lineno=1089, col_offset=34), [Name('keys', Load(), lineno=1089, col_offset=38)], [], None, None, lineno=1089, col_offset=34)], [], None, None, lineno=1089, col_offset=27), [If(Compare(BinOp(Name('key', Load(), lineno=1090, col_offset=23), Sub(), Num(1, lineno=1090, col_offset=29), lineno=1090, col_offset=23), [Eq()], [Name('prev', Load(), lineno=1090, col_offset=34)], lineno=1090, col_offset=23), [If(UnaryOp(Not(), Name('completing', Load(), lineno=1091, col_offset=31), lineno=1091, col_offset=27), [Assign([Name('completing', Store(), lineno=1092, col_offset=28)], Name('True', Load(), lineno=1092, col_offset=41), lineno=1092, col_offset=28), Expr(Call(Attribute(Name('f', Load(), lineno=1093, col_offset=28), 'write', Load(), lineno=1093, col_offset=28), [Str('-', lineno=1093, col_offset=36)], [], None, None, lineno=1093, col_offset=28), lineno=1093, col_offset=28)], [], lineno=1091, col_offset=24)], [If(Name('completing', Load(), lineno=1094, col_offset=25), [Assign([Name('completing', Store(), lineno=1095, col_offset=24)], Name('False', Load(), lineno=1095, col_offset=37), lineno=1095, col_offset=24), Expr(Call(Attribute(Name('f', Load(), lineno=1096, col_offset=24), 'write', Load(), lineno=1096, col_offset=24), [BinOp(Str('%s %s', lineno=1096, col_offset=32), Mod(), Tuple([Name('prev', Load(), lineno=1096, col_offset=43), Name('key', Load(), lineno=1096, col_offset=49)], Load(), lineno=1096, col_offset=43), lineno=1096, col_offset=32)], [], None, None, lineno=1096, col_offset=24), lineno=1096, col_offset=24)], [Expr(Call(Attribute(Name('f', Load(), lineno=1098, col_offset=24), 'write', Load(), lineno=1098, col_offset=24), [BinOp(Str(' %s', lineno=1098, col_offset=32), Mod(), Name('key', Load(), lineno=1098, col_offset=40), lineno=1098, col_offset=32)], [], None, None, lineno=1098, col_offset=24), lineno=1098, col_offset=24)], lineno=1094, col_offset=25)], lineno=1090, col_offset=20), Assign([Name('prev', Store(), lineno=1099, col_offset=20)], Name('key', Load(), lineno=1099, col_offset=27), lineno=1099, col_offset=20)], [], lineno=1089, col_offset=16), If(Name('completing', Load(), lineno=1100, col_offset=19), [Expr(Call(Attribute(Name('f', Load(), lineno=1101, col_offset=20), 'write', Load(), lineno=1101, col_offset=20), [BinOp(Call(Name('str', Load(), lineno=1101, col_offset=28), [Name('prev', Load(), lineno=1101, col_offset=32)], [], None, None, lineno=1101, col_offset=28), Add(), Str('\n', lineno=1101, col_offset=40), lineno=1101, col_offset=28)], [], None, None, lineno=1101, col_offset=20), lineno=1101, col_offset=20)], [Expr(Call(Attribute(Name('f', Load(), lineno=1103, col_offset=20), 'write', Load(), lineno=1103, col_offset=20), [Str('\n', lineno=1103, col_offset=28)], [], None, None, lineno=1103, col_offset=20), lineno=1103, col_offset=20)], lineno=1100, col_offset=16)], [], lineno=1083, col_offset=12)], [Expr(Call(Name('_sync_close', Load(), lineno=1105, col_offset=12), [Name('f', Load(), lineno=1105, col_offset=24)], [], None, None, lineno=1105, col_offset=12), lineno=1105, col_offset=12)], lineno=1081, col_offset=8)], [], lineno=1078, col_offset=4), FunctionDef('pack', arguments([Name('self', Param(), lineno=1107, col_offset=13)], None, None, []), [Expr(Str('Re-name messages to eliminate numbering gaps. Invalidates keys.', lineno=1108, col_offset=8), lineno=1108, col_offset=8), Assign([Name('sequences', Store(), lineno=1109, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=1109, col_offset=20), 'get_sequences', Load(), lineno=1109, col_offset=20), [], [], None, None, lineno=1109, col_offset=20), lineno=1109, col_offset=8), Assign([Name('prev', Store(), lineno=1110, col_offset=8)], Num(0, lineno=1110, col_offset=15), lineno=1110, col_offset=8), Assign([Name('changes', Store(), lineno=1111, col_offset=8)], List([], Load(), lineno=1111, col_offset=18), lineno=1111, col_offset=8), For(Name('key', Store(), lineno=1112, col_offset=12), Call(Attribute(Name('self', Load(), lineno=1112, col_offset=19), 'iterkeys', Load(), lineno=1112, col_offset=19), [], [], None, None, lineno=1112, col_offset=19), [If(Compare(BinOp(Name('key', Load(), lineno=1113, col_offset=15), Sub(), Num(1, lineno=1113, col_offset=21), lineno=1113, col_offset=15), [NotEq()], [Name('prev', Load(), lineno=1113, col_offset=26)], lineno=1113, col_offset=15), [Expr(Call(Attribute(Name('changes', Load(), lineno=1114, col_offset=16), 'append', Load(), lineno=1114, col_offset=16), [Tuple([Name('key', Load(), lineno=1114, col_offset=32), BinOp(Name('prev', Load(), lineno=1114, col_offset=37), Add(), Num(1, lineno=1114, col_offset=44), lineno=1114, col_offset=37)], Load(), lineno=1114, col_offset=32)], [], None, None, lineno=1114, col_offset=16), lineno=1114, col_offset=16), If(Call(Name('hasattr', Load(), lineno=1115, col_offset=19), [Name('os', Load(), lineno=1115, col_offset=27), Str('link', lineno=1115, col_offset=31)], [], None, None, lineno=1115, col_offset=19), [Expr(Call(Attribute(Name('os', Load(), lineno=1116, col_offset=20), 'link', Load(), lineno=1116, col_offset=20), [Call(Attribute(Attribute(Name('os', Load(), lineno=1116, col_offset=28), 'path', Load(), lineno=1116, col_offset=28), 'join', Load(), lineno=1116, col_offset=28), [Attribute(Name('self', Load(), lineno=1116, col_offset=41), '_path', Load(), lineno=1116, col_offset=41), Call(Name('str', Load(), lineno=1116, col_offset=53), [Name('key', Load(), lineno=1116, col_offset=57)], [], None, None, lineno=1116, col_offset=53)], [], None, None, lineno=1116, col_offset=28), Call(Attribute(Attribute(Name('os', Load(), lineno=1117, col_offset=28), 'path', Load(), lineno=1117, col_offset=28), 'join', Load(), lineno=1117, col_offset=28), [Attribute(Name('self', Load(), lineno=1117, col_offset=41), '_path', Load(), lineno=1117, col_offset=41), Call(Name('str', Load(), lineno=1117, col_offset=53), [BinOp(Name('prev', Load(), lineno=1117, col_offset=57), Add(), Num(1, lineno=1117, col_offset=64), lineno=1117, col_offset=57)], [], None, None, lineno=1117, col_offset=53)], [], None, None, lineno=1117, col_offset=28)], [], None, None, lineno=1116, col_offset=20), lineno=1116, col_offset=20), Expr(Call(Attribute(Name('os', Load(), lineno=1118, col_offset=20), 'unlink', Load(), lineno=1118, col_offset=20), [Call(Attribute(Attribute(Name('os', Load(), lineno=1118, col_offset=30), 'path', Load(), lineno=1118, col_offset=30), 'join', Load(), lineno=1118, col_offset=30), [Attribute(Name('self', Load(), lineno=1118, col_offset=43), '_path', Load(), lineno=1118, col_offset=43), Call(Name('str', Load(), lineno=1118, col_offset=55), [Name('key', Load(), lineno=1118, col_offset=59)], [], None, None, lineno=1118, col_offset=55)], [], None, None, lineno=1118, col_offset=30)], [], None, None, lineno=1118, col_offset=20), lineno=1118, col_offset=20)], [Expr(Call(Attribute(Name('os', Load(), lineno=1120, col_offset=20), 'rename', Load(), lineno=1120, col_offset=20), [Call(Attribute(Attribute(Name('os', Load(), lineno=1120, col_offset=30), 'path', Load(), lineno=1120, col_offset=30), 'join', Load(), lineno=1120, col_offset=30), [Attribute(Name('self', Load(), lineno=1120, col_offset=43), '_path', Load(), lineno=1120, col_offset=43), Call(Name('str', Load(), lineno=1120, col_offset=55), [Name('key', Load(), lineno=1120, col_offset=59)], [], None, None, lineno=1120, col_offset=55)], [], None, None, lineno=1120, col_offset=30), Call(Attribute(Attribute(Name('os', Load(), lineno=1121, col_offset=30), 'path', Load(), lineno=1121, col_offset=30), 'join', Load(), lineno=1121, col_offset=30), [Attribute(Name('self', Load(), lineno=1121, col_offset=43), '_path', Load(), lineno=1121, col_offset=43), Call(Name('str', Load(), lineno=1121, col_offset=55), [BinOp(Name('prev', Load(), lineno=1121, col_offset=59), Add(), Num(1, lineno=1121, col_offset=66), lineno=1121, col_offset=59)], [], None, None, lineno=1121, col_offset=55)], [], None, None, lineno=1121, col_offset=30)], [], None, None, lineno=1120, col_offset=20), lineno=1120, col_offset=20)], lineno=1115, col_offset=16)], [], lineno=1113, col_offset=12), AugAssign(Name('prev', Store(), lineno=1122, col_offset=12), Add(), Num(1, lineno=1122, col_offset=20), lineno=1122, col_offset=12)], [], lineno=1112, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1123, col_offset=8), '_next_key', Store(), lineno=1123, col_offset=8)], BinOp(Name('prev', Load(), lineno=1123, col_offset=25), Add(), Num(1, lineno=1123, col_offset=32), lineno=1123, col_offset=25), lineno=1123, col_offset=8), If(Compare(Call(Name('len', Load(), lineno=1124, col_offset=11), [Name('changes', Load(), lineno=1124, col_offset=15)], [], None, None, lineno=1124, col_offset=11), [Eq()], [Num(0, lineno=1124, col_offset=27)], lineno=1124, col_offset=11), [Return(None, lineno=1125, col_offset=12)], [], lineno=1124, col_offset=8), For(Tuple([Name('name', Store(), lineno=1126, col_offset=12), Name('key_list', Store(), lineno=1126, col_offset=18)], Store(), lineno=1126, col_offset=12), Call(Attribute(Name('sequences', Load(), lineno=1126, col_offset=30), 'items', Load(), lineno=1126, col_offset=30), [], [], None, None, lineno=1126, col_offset=30), [For(Tuple([Name('old', Store(), lineno=1127, col_offset=16), Name('new', Store(), lineno=1127, col_offset=21)], Store(), lineno=1127, col_offset=16), Name('changes', Load(), lineno=1127, col_offset=28), [If(Compare(Name('old', Load(), lineno=1128, col_offset=19), [In()], [Name('key_list', Load(), lineno=1128, col_offset=26)], lineno=1128, col_offset=19), [Assign([Subscript(Name('key_list', Load(), lineno=1129, col_offset=20), Index(Call(Attribute(Name('key_list', Load(), lineno=1129, col_offset=29), 'index', Load(), lineno=1129, col_offset=29), [Name('old', Load(), lineno=1129, col_offset=44)], [], None, None, lineno=1129, col_offset=29)), Store(), lineno=1129, col_offset=20)], Name('new', Load(), lineno=1129, col_offset=52), lineno=1129, col_offset=20)], [], lineno=1128, col_offset=16)], [], lineno=1127, col_offset=12)], [], lineno=1126, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1130, col_offset=8), 'set_sequences', Load(), lineno=1130, col_offset=8), [Name('sequences', Load(), lineno=1130, col_offset=27)], [], None, None, lineno=1130, col_offset=8), lineno=1130, col_offset=8)], [], lineno=1107, col_offset=4), FunctionDef('_dump_sequences', arguments([Name('self', Param(), lineno=1132, col_offset=24), Name('message', Param(), lineno=1132, col_offset=30), Name('key', Param(), lineno=1132, col_offset=39)], None, None, []), [Expr(Str('Inspect a new MHMessage and update sequences appropriately.', lineno=1133, col_offset=8), lineno=1133, col_offset=8), Assign([Name('pending_sequences', Store(), lineno=1134, col_offset=8)], Call(Attribute(Name('message', Load(), lineno=1134, col_offset=28), 'get_sequences', Load(), lineno=1134, col_offset=28), [], [], None, None, lineno=1134, col_offset=28), lineno=1134, col_offset=8), Assign([Name('all_sequences', Store(), lineno=1135, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=1135, col_offset=24), 'get_sequences', Load(), lineno=1135, col_offset=24), [], [], None, None, lineno=1135, col_offset=24), lineno=1135, col_offset=8), For(Tuple([Name('name', Store(), lineno=1136, col_offset=12), Name('key_list', Store(), lineno=1136, col_offset=18)], Store(), lineno=1136, col_offset=12), Call(Attribute(Name('all_sequences', Load(), lineno=1136, col_offset=30), 'iteritems', Load(), lineno=1136, col_offset=30), [], [], None, None, lineno=1136, col_offset=30), [If(Compare(Name('name', Load(), lineno=1137, col_offset=15), [In()], [Name('pending_sequences', Load(), lineno=1137, col_offset=23)], lineno=1137, col_offset=15), [Expr(Call(Attribute(Name('key_list', Load(), lineno=1138, col_offset=16), 'append', Load(), lineno=1138, col_offset=16), [Name('key', Load(), lineno=1138, col_offset=32)], [], None, None, lineno=1138, col_offset=16), lineno=1138, col_offset=16)], [If(Compare(Name('key', Load(), lineno=1139, col_offset=17), [In()], [Name('key_list', Load(), lineno=1139, col_offset=24)], lineno=1139, col_offset=17), [Delete([Subscript(Name('key_list', Load(), lineno=1140, col_offset=20), Index(Call(Attribute(Name('key_list', Load(), lineno=1140, col_offset=29), 'index', Load(), lineno=1140, col_offset=29), [Name('key', Load(), lineno=1140, col_offset=44)], [], None, None, lineno=1140, col_offset=29)), Del(), lineno=1140, col_offset=20)], lineno=1140, col_offset=16)], [], lineno=1139, col_offset=17)], lineno=1137, col_offset=12)], [], lineno=1136, col_offset=8), For(Name('sequence', Store(), lineno=1141, col_offset=12), Name('pending_sequences', Load(), lineno=1141, col_offset=24), [If(Compare(Name('sequence', Load(), lineno=1142, col_offset=15), [NotIn()], [Name('all_sequences', Load(), lineno=1142, col_offset=31)], lineno=1142, col_offset=15), [Assign([Subscript(Name('all_sequences', Load(), lineno=1143, col_offset=16), Index(Name('sequence', Load(), lineno=1143, col_offset=30)), Store(), lineno=1143, col_offset=16)], List([Name('key', Load(), lineno=1143, col_offset=43)], Load(), lineno=1143, col_offset=42), lineno=1143, col_offset=16)], [], lineno=1142, col_offset=12)], [], lineno=1141, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1144, col_offset=8), 'set_sequences', Load(), lineno=1144, col_offset=8), [Name('all_sequences', Load(), lineno=1144, col_offset=27)], [], None, None, lineno=1144, col_offset=8), lineno=1144, col_offset=8)], [], lineno=1132, col_offset=4)], [], lineno=847, col_offset=0), ClassDef('Babyl', [Name('_singlefileMailbox', Load(), lineno=1147, col_offset=12)], [Expr(Str('An Rmail-style Babyl mailbox.', lineno=1148, col_offset=4), lineno=1148, col_offset=4), Assign([Name('_special_labels', Store(), lineno=1150, col_offset=4)], Call(Name('frozenset', Load(), lineno=1150, col_offset=22), [Tuple([Str('unseen', lineno=1150, col_offset=33), Str('deleted', lineno=1150, col_offset=43), Str('filed', lineno=1150, col_offset=54), Str('answered', lineno=1150, col_offset=63), Str('forwarded', lineno=1151, col_offset=33), Str('edited', lineno=1151, col_offset=46), Str('resent', lineno=1151, col_offset=56)], Load(), lineno=1150, col_offset=33)], [], None, None, lineno=1150, col_offset=22), lineno=1150, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=1153, col_offset=17), Name('path', Param(), lineno=1153, col_offset=23), Name('factory', Param(), lineno=1153, col_offset=29), Name('create', Param(), lineno=1153, col_offset=43)], None, None, [Name('None', Load(), lineno=1153, col_offset=37), Name('True', Load(), lineno=1153, col_offset=50)]), [Expr(Str('Initialize a Babyl mailbox.', lineno=1154, col_offset=8), lineno=1154, col_offset=8), Expr(Call(Attribute(Name('_singlefileMailbox', Load(), lineno=1155, col_offset=8), '__init__', Load(), lineno=1155, col_offset=8), [Name('self', Load(), lineno=1155, col_offset=36), Name('path', Load(), lineno=1155, col_offset=42), Name('factory', Load(), lineno=1155, col_offset=48), Name('create', Load(), lineno=1155, col_offset=57)], [], None, None, lineno=1155, col_offset=8), lineno=1155, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1156, col_offset=8), '_labels', Store(), lineno=1156, col_offset=8)], Dict([], [], lineno=1156, col_offset=23), lineno=1156, col_offset=8)], [], lineno=1153, col_offset=4), FunctionDef('add', arguments([Name('self', Param(), lineno=1158, col_offset=12), Name('message', Param(), lineno=1158, col_offset=18)], None, None, []), [Expr(Str('Add message and return assigned key.', lineno=1159, col_offset=8), lineno=1159, col_offset=8), Assign([Name('key', Store(), lineno=1160, col_offset=8)], Call(Attribute(Name('_singlefileMailbox', Load(), lineno=1160, col_offset=14), 'add', Load(), lineno=1160, col_offset=14), [Name('self', Load(), lineno=1160, col_offset=37), Name('message', Load(), lineno=1160, col_offset=43)], [], None, None, lineno=1160, col_offset=14), lineno=1160, col_offset=8), If(Call(Name('isinstance', Load(), lineno=1161, col_offset=11), [Name('message', Load(), lineno=1161, col_offset=22), Name('BabylMessage', Load(), lineno=1161, col_offset=31)], [], None, None, lineno=1161, col_offset=11), [Assign([Subscript(Attribute(Name('self', Load(), lineno=1162, col_offset=12), '_labels', Load(), lineno=1162, col_offset=12), Index(Name('key', Load(), lineno=1162, col_offset=25)), Store(), lineno=1162, col_offset=12)], Call(Attribute(Name('message', Load(), lineno=1162, col_offset=32), 'get_labels', Load(), lineno=1162, col_offset=32), [], [], None, None, lineno=1162, col_offset=32), lineno=1162, col_offset=12)], [], lineno=1161, col_offset=8), Return(Name('key', Load(), lineno=1163, col_offset=15), lineno=1163, col_offset=8)], [], lineno=1158, col_offset=4), FunctionDef('remove', arguments([Name('self', Param(), lineno=1165, col_offset=15), Name('key', Param(), lineno=1165, col_offset=21)], None, None, []), [Expr(Str("Remove the keyed message; raise KeyError if it doesn't exist.", lineno=1166, col_offset=8), lineno=1166, col_offset=8), Expr(Call(Attribute(Name('_singlefileMailbox', Load(), lineno=1167, col_offset=8), 'remove', Load(), lineno=1167, col_offset=8), [Name('self', Load(), lineno=1167, col_offset=34), Name('key', Load(), lineno=1167, col_offset=40)], [], None, None, lineno=1167, col_offset=8), lineno=1167, col_offset=8), If(Compare(Name('key', Load(), lineno=1168, col_offset=11), [In()], [Attribute(Name('self', Load(), lineno=1168, col_offset=18), '_labels', Load(), lineno=1168, col_offset=18)], lineno=1168, col_offset=11), [Delete([Subscript(Attribute(Name('self', Load(), lineno=1169, col_offset=16), '_labels', Load(), lineno=1169, col_offset=16), Index(Name('key', Load(), lineno=1169, col_offset=29)), Del(), lineno=1169, col_offset=16)], lineno=1169, col_offset=12)], [], lineno=1168, col_offset=8)], [], lineno=1165, col_offset=4), FunctionDef('__setitem__', arguments([Name('self', Param(), lineno=1171, col_offset=20), Name('key', Param(), lineno=1171, col_offset=26), Name('message', Param(), lineno=1171, col_offset=31)], None, None, []), [Expr(Str("Replace the keyed message; raise KeyError if it doesn't exist.", lineno=1172, col_offset=8), lineno=1172, col_offset=8), Expr(Call(Attribute(Name('_singlefileMailbox', Load(), lineno=1173, col_offset=8), '__setitem__', Load(), lineno=1173, col_offset=8), [Name('self', Load(), lineno=1173, col_offset=39), Name('key', Load(), lineno=1173, col_offset=45), Name('message', Load(), lineno=1173, col_offset=50)], [], None, None, lineno=1173, col_offset=8), lineno=1173, col_offset=8), If(Call(Name('isinstance', Load(), lineno=1174, col_offset=11), [Name('message', Load(), lineno=1174, col_offset=22), Name('BabylMessage', Load(), lineno=1174, col_offset=31)], [], None, None, lineno=1174, col_offset=11), [Assign([Subscript(Attribute(Name('self', Load(), lineno=1175, col_offset=12), '_labels', Load(), lineno=1175, col_offset=12), Index(Name('key', Load(), lineno=1175, col_offset=25)), Store(), lineno=1175, col_offset=12)], Call(Attribute(Name('message', Load(), lineno=1175, col_offset=32), 'get_labels', Load(), lineno=1175, col_offset=32), [], [], None, None, lineno=1175, col_offset=32), lineno=1175, col_offset=12)], [], lineno=1174, col_offset=8)], [], lineno=1171, col_offset=4), FunctionDef('get_message', arguments([Name('self', Param(), lineno=1177, col_offset=20), Name('key', Param(), lineno=1177, col_offset=26)], None, None, []), [Expr(Str('Return a Message representation or raise a KeyError.', lineno=1178, col_offset=8), lineno=1178, col_offset=8), Assign([Tuple([Name('start', Store(), lineno=1179, col_offset=8), Name('stop', Store(), lineno=1179, col_offset=15)], Store(), lineno=1179, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=1179, col_offset=22), '_lookup', Load(), lineno=1179, col_offset=22), [Name('key', Load(), lineno=1179, col_offset=35)], [], None, None, lineno=1179, col_offset=22), lineno=1179, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1180, col_offset=8), '_file', Load(), lineno=1180, col_offset=8), 'seek', Load(), lineno=1180, col_offset=8), [Name('start', Load(), lineno=1180, col_offset=24)], [], None, None, lineno=1180, col_offset=8), lineno=1180, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1181, col_offset=8), '_file', Load(), lineno=1181, col_offset=8), 'readline', Load(), lineno=1181, col_offset=8), [], [], None, None, lineno=1181, col_offset=8), lineno=1181, col_offset=8), Assign([Name('original_headers', Store(), lineno=1182, col_offset=8)], Call(Attribute(Name('StringIO', Load(), lineno=1182, col_offset=27), 'StringIO', Load(), lineno=1182, col_offset=27), [], [], None, None, lineno=1182, col_offset=27), lineno=1182, col_offset=8), While(Name('True', Load(), lineno=1183, col_offset=14), [Assign([Name('line', Store(), lineno=1184, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=1184, col_offset=19), '_file', Load(), lineno=1184, col_offset=19), 'readline', Load(), lineno=1184, col_offset=19), [], [], None, None, lineno=1184, col_offset=19), lineno=1184, col_offset=12), If(BoolOp(Or(), [Compare(Name('line', Load(), lineno=1185, col_offset=15), [Eq()], [BinOp(Str('*** EOOH ***', lineno=1185, col_offset=23), Add(), Attribute(Name('os', Load(), lineno=1185, col_offset=40), 'linesep', Load(), lineno=1185, col_offset=40), lineno=1185, col_offset=23)], lineno=1185, col_offset=15), Compare(Name('line', Load(), lineno=1185, col_offset=54), [Eq()], [Str('', lineno=1185, col_offset=62)], lineno=1185, col_offset=54)], lineno=1185, col_offset=15), [Break( lineno=1186, col_offset=16)], [], lineno=1185, col_offset=12), Expr(Call(Attribute(Name('original_headers', Load(), lineno=1187, col_offset=12), 'write', Load(), lineno=1187, col_offset=12), [Call(Attribute(Name('line', Load(), lineno=1187, col_offset=35), 'replace', Load(), lineno=1187, col_offset=35), [Attribute(Name('os', Load(), lineno=1187, col_offset=48), 'linesep', Load(), lineno=1187, col_offset=48), Str('\n', lineno=1187, col_offset=60)], [], None, None, lineno=1187, col_offset=35)], [], None, None, lineno=1187, col_offset=12), lineno=1187, col_offset=12)], [], lineno=1183, col_offset=8), Assign([Name('visible_headers', Store(), lineno=1188, col_offset=8)], Call(Attribute(Name('StringIO', Load(), lineno=1188, col_offset=26), 'StringIO', Load(), lineno=1188, col_offset=26), [], [], None, None, lineno=1188, col_offset=26), lineno=1188, col_offset=8), While(Name('True', Load(), lineno=1189, col_offset=14), [Assign([Name('line', Store(), lineno=1190, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=1190, col_offset=19), '_file', Load(), lineno=1190, col_offset=19), 'readline', Load(), lineno=1190, col_offset=19), [], [], None, None, lineno=1190, col_offset=19), lineno=1190, col_offset=12), If(BoolOp(Or(), [Compare(Name('line', Load(), lineno=1191, col_offset=15), [Eq()], [Attribute(Name('os', Load(), lineno=1191, col_offset=23), 'linesep', Load(), lineno=1191, col_offset=23)], lineno=1191, col_offset=15), Compare(Name('line', Load(), lineno=1191, col_offset=37), [Eq()], [Str('', lineno=1191, col_offset=45)], lineno=1191, col_offset=37)], lineno=1191, col_offset=15), [Break( lineno=1192, col_offset=16)], [], lineno=1191, col_offset=12), Expr(Call(Attribute(Name('visible_headers', Load(), lineno=1193, col_offset=12), 'write', Load(), lineno=1193, col_offset=12), [Call(Attribute(Name('line', Load(), lineno=1193, col_offset=34), 'replace', Load(), lineno=1193, col_offset=34), [Attribute(Name('os', Load(), lineno=1193, col_offset=47), 'linesep', Load(), lineno=1193, col_offset=47), Str('\n', lineno=1193, col_offset=59)], [], None, None, lineno=1193, col_offset=34)], [], None, None, lineno=1193, col_offset=12), lineno=1193, col_offset=12)], [], lineno=1189, col_offset=8), Assign([Name('body', Store(), lineno=1194, col_offset=8)], Call(Attribute(Call(Attribute(Attribute(Name('self', Load(), lineno=1194, col_offset=15), '_file', Load(), lineno=1194, col_offset=15), 'read', Load(), lineno=1194, col_offset=15), [BinOp(Name('stop', Load(), lineno=1194, col_offset=31), Sub(), Call(Attribute(Attribute(Name('self', Load(), lineno=1194, col_offset=38), '_file', Load(), lineno=1194, col_offset=38), 'tell', Load(), lineno=1194, col_offset=38), [], [], None, None, lineno=1194, col_offset=38), lineno=1194, col_offset=31)], [], None, None, lineno=1194, col_offset=15), 'replace', Load(), lineno=1194, col_offset=15), [Attribute(Name('os', Load(), lineno=1194, col_offset=65), 'linesep', Load(), lineno=1194, col_offset=65), Str('\n', lineno=1195, col_offset=65)], [], None, None, lineno=1194, col_offset=15), lineno=1194, col_offset=8), Assign([Name('msg', Store(), lineno=1196, col_offset=8)], Call(Name('BabylMessage', Load(), lineno=1196, col_offset=14), [BinOp(Call(Attribute(Name('original_headers', Load(), lineno=1196, col_offset=27), 'getvalue', Load(), lineno=1196, col_offset=27), [], [], None, None, lineno=1196, col_offset=27), Add(), Name('body', Load(), lineno=1196, col_offset=57), lineno=1196, col_offset=27)], [], None, None, lineno=1196, col_offset=14), lineno=1196, col_offset=8), Expr(Call(Attribute(Name('msg', Load(), lineno=1197, col_offset=8), 'set_visible', Load(), lineno=1197, col_offset=8), [Call(Attribute(Name('visible_headers', Load(), lineno=1197, col_offset=24), 'getvalue', Load(), lineno=1197, col_offset=24), [], [], None, None, lineno=1197, col_offset=24)], [], None, None, lineno=1197, col_offset=8), lineno=1197, col_offset=8), If(Compare(Name('key', Load(), lineno=1198, col_offset=11), [In()], [Attribute(Name('self', Load(), lineno=1198, col_offset=18), '_labels', Load(), lineno=1198, col_offset=18)], lineno=1198, col_offset=11), [Expr(Call(Attribute(Name('msg', Load(), lineno=1199, col_offset=12), 'set_labels', Load(), lineno=1199, col_offset=12), [Subscript(Attribute(Name('self', Load(), lineno=1199, col_offset=27), '_labels', Load(), lineno=1199, col_offset=27), Index(Name('key', Load(), lineno=1199, col_offset=40)), Load(), lineno=1199, col_offset=27)], [], None, None, lineno=1199, col_offset=12), lineno=1199, col_offset=12)], [], lineno=1198, col_offset=8), Return(Name('msg', Load(), lineno=1200, col_offset=15), lineno=1200, col_offset=8)], [], lineno=1177, col_offset=4), FunctionDef('get_string', arguments([Name('self', Param(), lineno=1202, col_offset=19), Name('key', Param(), lineno=1202, col_offset=25)], None, None, []), [Expr(Str('Return a string representation or raise a KeyError.', lineno=1203, col_offset=8), lineno=1203, col_offset=8), Assign([Tuple([Name('start', Store(), lineno=1204, col_offset=8), Name('stop', Store(), lineno=1204, col_offset=15)], Store(), lineno=1204, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=1204, col_offset=22), '_lookup', Load(), lineno=1204, col_offset=22), [Name('key', Load(), lineno=1204, col_offset=35)], [], None, None, lineno=1204, col_offset=22), lineno=1204, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1205, col_offset=8), '_file', Load(), lineno=1205, col_offset=8), 'seek', Load(), lineno=1205, col_offset=8), [Name('start', Load(), lineno=1205, col_offset=24)], [], None, None, lineno=1205, col_offset=8), lineno=1205, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1206, col_offset=8), '_file', Load(), lineno=1206, col_offset=8), 'readline', Load(), lineno=1206, col_offset=8), [], [], None, None, lineno=1206, col_offset=8), lineno=1206, col_offset=8), Assign([Name('original_headers', Store(), lineno=1207, col_offset=8)], Call(Attribute(Name('StringIO', Load(), lineno=1207, col_offset=27), 'StringIO', Load(), lineno=1207, col_offset=27), [], [], None, None, lineno=1207, col_offset=27), lineno=1207, col_offset=8), While(Name('True', Load(), lineno=1208, col_offset=14), [Assign([Name('line', Store(), lineno=1209, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=1209, col_offset=19), '_file', Load(), lineno=1209, col_offset=19), 'readline', Load(), lineno=1209, col_offset=19), [], [], None, None, lineno=1209, col_offset=19), lineno=1209, col_offset=12), If(BoolOp(Or(), [Compare(Name('line', Load(), lineno=1210, col_offset=15), [Eq()], [BinOp(Str('*** EOOH ***', lineno=1210, col_offset=23), Add(), Attribute(Name('os', Load(), lineno=1210, col_offset=40), 'linesep', Load(), lineno=1210, col_offset=40), lineno=1210, col_offset=23)], lineno=1210, col_offset=15), Compare(Name('line', Load(), lineno=1210, col_offset=54), [Eq()], [Str('', lineno=1210, col_offset=62)], lineno=1210, col_offset=54)], lineno=1210, col_offset=15), [Break( lineno=1211, col_offset=16)], [], lineno=1210, col_offset=12), Expr(Call(Attribute(Name('original_headers', Load(), lineno=1212, col_offset=12), 'write', Load(), lineno=1212, col_offset=12), [Call(Attribute(Name('line', Load(), lineno=1212, col_offset=35), 'replace', Load(), lineno=1212, col_offset=35), [Attribute(Name('os', Load(), lineno=1212, col_offset=48), 'linesep', Load(), lineno=1212, col_offset=48), Str('\n', lineno=1212, col_offset=60)], [], None, None, lineno=1212, col_offset=35)], [], None, None, lineno=1212, col_offset=12), lineno=1212, col_offset=12)], [], lineno=1208, col_offset=8), While(Name('True', Load(), lineno=1213, col_offset=14), [Assign([Name('line', Store(), lineno=1214, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=1214, col_offset=19), '_file', Load(), lineno=1214, col_offset=19), 'readline', Load(), lineno=1214, col_offset=19), [], [], None, None, lineno=1214, col_offset=19), lineno=1214, col_offset=12), If(BoolOp(Or(), [Compare(Name('line', Load(), lineno=1215, col_offset=15), [Eq()], [Attribute(Name('os', Load(), lineno=1215, col_offset=23), 'linesep', Load(), lineno=1215, col_offset=23)], lineno=1215, col_offset=15), Compare(Name('line', Load(), lineno=1215, col_offset=37), [Eq()], [Str('', lineno=1215, col_offset=45)], lineno=1215, col_offset=37)], lineno=1215, col_offset=15), [Break( lineno=1216, col_offset=16)], [], lineno=1215, col_offset=12)], [], lineno=1213, col_offset=8), Return(BinOp(Call(Attribute(Name('original_headers', Load(), lineno=1217, col_offset=15), 'getvalue', Load(), lineno=1217, col_offset=15), [], [], None, None, lineno=1217, col_offset=15), Add(), Call(Attribute(Call(Attribute(Attribute(Name('self', Load(), lineno=1218, col_offset=15), '_file', Load(), lineno=1218, col_offset=15), 'read', Load(), lineno=1218, col_offset=15), [BinOp(Name('stop', Load(), lineno=1218, col_offset=31), Sub(), Call(Attribute(Attribute(Name('self', Load(), lineno=1218, col_offset=38), '_file', Load(), lineno=1218, col_offset=38), 'tell', Load(), lineno=1218, col_offset=38), [], [], None, None, lineno=1218, col_offset=38), lineno=1218, col_offset=31)], [], None, None, lineno=1218, col_offset=15), 'replace', Load(), lineno=1218, col_offset=15), [Attribute(Name('os', Load(), lineno=1218, col_offset=65), 'linesep', Load(), lineno=1218, col_offset=65), Str('\n', lineno=1219, col_offset=65)], [], None, None, lineno=1218, col_offset=15), lineno=1217, col_offset=15), lineno=1217, col_offset=8)], [], lineno=1202, col_offset=4), FunctionDef('get_file', arguments([Name('self', Param(), lineno=1221, col_offset=17), Name('key', Param(), lineno=1221, col_offset=23)], None, None, []), [Expr(Str('Return a file-like representation or raise a KeyError.', lineno=1222, col_offset=8), lineno=1222, col_offset=8), Return(Call(Attribute(Name('StringIO', Load(), lineno=1223, col_offset=15), 'StringIO', Load(), lineno=1223, col_offset=15), [Call(Attribute(Call(Attribute(Name('self', Load(), lineno=1223, col_offset=33), 'get_string', Load(), lineno=1223, col_offset=33), [Name('key', Load(), lineno=1223, col_offset=49)], [], None, None, lineno=1223, col_offset=33), 'replace', Load(), lineno=1223, col_offset=33), [Str('\n', lineno=1223, col_offset=62), Attribute(Name('os', Load(), lineno=1224, col_offset=62), 'linesep', Load(), lineno=1224, col_offset=62)], [], None, None, lineno=1223, col_offset=33)], [], None, None, lineno=1223, col_offset=15), lineno=1223, col_offset=8)], [], lineno=1221, col_offset=4), FunctionDef('get_labels', arguments([Name('self', Param(), lineno=1226, col_offset=19)], None, None, []), [Expr(Str('Return a list of user-defined labels in the mailbox.', lineno=1227, col_offset=8), lineno=1227, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1228, col_offset=8), '_lookup', Load(), lineno=1228, col_offset=8), [], [], None, None, lineno=1228, col_offset=8), lineno=1228, col_offset=8), Assign([Name('labels', Store(), lineno=1229, col_offset=8)], Call(Name('set', Load(), lineno=1229, col_offset=17), [], [], None, None, lineno=1229, col_offset=17), lineno=1229, col_offset=8), For(Name('label_list', Store(), lineno=1230, col_offset=12), Call(Attribute(Attribute(Name('self', Load(), lineno=1230, col_offset=26), '_labels', Load(), lineno=1230, col_offset=26), 'values', Load(), lineno=1230, col_offset=26), [], [], None, None, lineno=1230, col_offset=26), [Expr(Call(Attribute(Name('labels', Load(), lineno=1231, col_offset=12), 'update', Load(), lineno=1231, col_offset=12), [Name('label_list', Load(), lineno=1231, col_offset=26)], [], None, None, lineno=1231, col_offset=12), lineno=1231, col_offset=12)], [], lineno=1230, col_offset=8), Expr(Call(Attribute(Name('labels', Load(), lineno=1232, col_offset=8), 'difference_update', Load(), lineno=1232, col_offset=8), [Attribute(Name('self', Load(), lineno=1232, col_offset=33), '_special_labels', Load(), lineno=1232, col_offset=33)], [], None, None, lineno=1232, col_offset=8), lineno=1232, col_offset=8), Return(Call(Name('list', Load(), lineno=1233, col_offset=15), [Name('labels', Load(), lineno=1233, col_offset=20)], [], None, None, lineno=1233, col_offset=15), lineno=1233, col_offset=8)], [], lineno=1226, col_offset=4), FunctionDef('_generate_toc', arguments([Name('self', Param(), lineno=1235, col_offset=22)], None, None, []), [Expr(Str('Generate key-to-(start, stop) table of contents.', lineno=1236, col_offset=8), lineno=1236, col_offset=8), Assign([Tuple([Name('starts', Store(), lineno=1237, col_offset=8), Name('stops', Store(), lineno=1237, col_offset=16)], Store(), lineno=1237, col_offset=8)], Tuple([List([], Load(), lineno=1237, col_offset=24), List([], Load(), lineno=1237, col_offset=28)], Load(), lineno=1237, col_offset=24), lineno=1237, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1238, col_offset=8), '_file', Load(), lineno=1238, col_offset=8), 'seek', Load(), lineno=1238, col_offset=8), [Num(0, lineno=1238, col_offset=24)], [], None, None, lineno=1238, col_offset=8), lineno=1238, col_offset=8), Assign([Name('next_pos', Store(), lineno=1239, col_offset=8)], Num(0, lineno=1239, col_offset=19), lineno=1239, col_offset=8), Assign([Name('label_lists', Store(), lineno=1240, col_offset=8)], List([], Load(), lineno=1240, col_offset=22), lineno=1240, col_offset=8), While(Name('True', Load(), lineno=1241, col_offset=14), [Assign([Name('line_pos', Store(), lineno=1242, col_offset=12)], Name('next_pos', Load(), lineno=1242, col_offset=23), lineno=1242, col_offset=12), Assign([Name('line', Store(), lineno=1243, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=1243, col_offset=19), '_file', Load(), lineno=1243, col_offset=19), 'readline', Load(), lineno=1243, col_offset=19), [], [], None, None, lineno=1243, col_offset=19), lineno=1243, col_offset=12), Assign([Name('next_pos', Store(), lineno=1244, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=1244, col_offset=23), '_file', Load(), lineno=1244, col_offset=23), 'tell', Load(), lineno=1244, col_offset=23), [], [], None, None, lineno=1244, col_offset=23), lineno=1244, col_offset=12), If(Compare(Name('line', Load(), lineno=1245, col_offset=15), [Eq()], [BinOp(Str('\x1f\x0c', lineno=1245, col_offset=23), Add(), Attribute(Name('os', Load(), lineno=1245, col_offset=36), 'linesep', Load(), lineno=1245, col_offset=36), lineno=1245, col_offset=23)], lineno=1245, col_offset=15), [If(Compare(Call(Name('len', Load(), lineno=1246, col_offset=19), [Name('stops', Load(), lineno=1246, col_offset=23)], [], None, None, lineno=1246, col_offset=19), [Lt()], [Call(Name('len', Load(), lineno=1246, col_offset=32), [Name('starts', Load(), lineno=1246, col_offset=36)], [], None, None, lineno=1246, col_offset=32)], lineno=1246, col_offset=19), [Expr(Call(Attribute(Name('stops', Load(), lineno=1247, col_offset=20), 'append', Load(), lineno=1247, col_offset=20), [BinOp(Name('line_pos', Load(), lineno=1247, col_offset=33), Sub(), Call(Name('len', Load(), lineno=1247, col_offset=44), [Attribute(Name('os', Load(), lineno=1247, col_offset=48), 'linesep', Load(), lineno=1247, col_offset=48)], [], None, None, lineno=1247, col_offset=44), lineno=1247, col_offset=33)], [], None, None, lineno=1247, col_offset=20), lineno=1247, col_offset=20)], [], lineno=1246, col_offset=16), Expr(Call(Attribute(Name('starts', Load(), lineno=1248, col_offset=16), 'append', Load(), lineno=1248, col_offset=16), [Name('next_pos', Load(), lineno=1248, col_offset=30)], [], None, None, lineno=1248, col_offset=16), lineno=1248, col_offset=16), Assign([Name('labels', Store(), lineno=1249, col_offset=16)], ListComp(Call(Attribute(Name('label', Load(), lineno=1249, col_offset=26), 'strip', Load(), lineno=1249, col_offset=26), [], [], None, None, lineno=1249, col_offset=26), [comprehension(Name('label', Store(), lineno=1249, col_offset=44), Call(Attribute(Subscript(Call(Attribute(Attribute(Name('self', Load(), lineno=1250, col_offset=43), '_file', Load(), lineno=1250, col_offset=43), 'readline', Load(), lineno=1250, col_offset=43), [], [], None, None, lineno=1250, col_offset=43), Slice(Num(1, lineno=1250, col_offset=65), None, None), Load(), lineno=1250, col_offset=43), 'split', Load(), lineno=1250, col_offset=43), [Str(',', lineno=1250, col_offset=75)], [], None, None, lineno=1250, col_offset=43), [Compare(Call(Attribute(Name('label', Load(), lineno=1251, col_offset=43), 'strip', Load(), lineno=1251, col_offset=43), [], [], None, None, lineno=1251, col_offset=43), [NotEq()], [Str('', lineno=1251, col_offset=60)], lineno=1251, col_offset=43)])], lineno=1249, col_offset=26), lineno=1249, col_offset=16), Expr(Call(Attribute(Name('label_lists', Load(), lineno=1252, col_offset=16), 'append', Load(), lineno=1252, col_offset=16), [Name('labels', Load(), lineno=1252, col_offset=35)], [], None, None, lineno=1252, col_offset=16), lineno=1252, col_offset=16)], [If(BoolOp(Or(), [Compare(Name('line', Load(), lineno=1253, col_offset=17), [Eq()], [Str('\x1f', lineno=1253, col_offset=25)], lineno=1253, col_offset=17), Compare(Name('line', Load(), lineno=1253, col_offset=35), [Eq()], [BinOp(Str('\x1f', lineno=1253, col_offset=43), Add(), Attribute(Name('os', Load(), lineno=1253, col_offset=52), 'linesep', Load(), lineno=1253, col_offset=52), lineno=1253, col_offset=43)], lineno=1253, col_offset=35)], lineno=1253, col_offset=17), [If(Compare(Call(Name('len', Load(), lineno=1254, col_offset=19), [Name('stops', Load(), lineno=1254, col_offset=23)], [], None, None, lineno=1254, col_offset=19), [Lt()], [Call(Name('len', Load(), lineno=1254, col_offset=32), [Name('starts', Load(), lineno=1254, col_offset=36)], [], None, None, lineno=1254, col_offset=32)], lineno=1254, col_offset=19), [Expr(Call(Attribute(Name('stops', Load(), lineno=1255, col_offset=20), 'append', Load(), lineno=1255, col_offset=20), [BinOp(Name('line_pos', Load(), lineno=1255, col_offset=33), Sub(), Call(Name('len', Load(), lineno=1255, col_offset=44), [Attribute(Name('os', Load(), lineno=1255, col_offset=48), 'linesep', Load(), lineno=1255, col_offset=48)], [], None, None, lineno=1255, col_offset=44), lineno=1255, col_offset=33)], [], None, None, lineno=1255, col_offset=20), lineno=1255, col_offset=20)], [], lineno=1254, col_offset=16)], [If(Compare(Name('line', Load(), lineno=1256, col_offset=17), [Eq()], [Str('', lineno=1256, col_offset=25)], lineno=1256, col_offset=17), [Expr(Call(Attribute(Name('stops', Load(), lineno=1257, col_offset=16), 'append', Load(), lineno=1257, col_offset=16), [BinOp(Name('line_pos', Load(), lineno=1257, col_offset=29), Sub(), Call(Name('len', Load(), lineno=1257, col_offset=40), [Attribute(Name('os', Load(), lineno=1257, col_offset=44), 'linesep', Load(), lineno=1257, col_offset=44)], [], None, None, lineno=1257, col_offset=40), lineno=1257, col_offset=29)], [], None, None, lineno=1257, col_offset=16), lineno=1257, col_offset=16), Break( lineno=1258, col_offset=16)], [], lineno=1256, col_offset=17)], lineno=1253, col_offset=17)], lineno=1245, col_offset=12)], [], lineno=1241, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1259, col_offset=8), '_toc', Store(), lineno=1259, col_offset=8)], Call(Name('dict', Load(), lineno=1259, col_offset=20), [Call(Name('enumerate', Load(), lineno=1259, col_offset=25), [Call(Name('zip', Load(), lineno=1259, col_offset=35), [Name('starts', Load(), lineno=1259, col_offset=39), Name('stops', Load(), lineno=1259, col_offset=47)], [], None, None, lineno=1259, col_offset=35)], [], None, None, lineno=1259, col_offset=25)], [], None, None, lineno=1259, col_offset=20), lineno=1259, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1260, col_offset=8), '_labels', Store(), lineno=1260, col_offset=8)], Call(Name('dict', Load(), lineno=1260, col_offset=23), [Call(Name('enumerate', Load(), lineno=1260, col_offset=28), [Name('label_lists', Load(), lineno=1260, col_offset=38)], [], None, None, lineno=1260, col_offset=28)], [], None, None, lineno=1260, col_offset=23), lineno=1260, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1261, col_offset=8), '_next_key', Store(), lineno=1261, col_offset=8)], Call(Name('len', Load(), lineno=1261, col_offset=25), [Attribute(Name('self', Load(), lineno=1261, col_offset=29), '_toc', Load(), lineno=1261, col_offset=29)], [], None, None, lineno=1261, col_offset=25), lineno=1261, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1262, col_offset=8), '_file', Load(), lineno=1262, col_offset=8), 'seek', Load(), lineno=1262, col_offset=8), [Num(0, lineno=1262, col_offset=24), Num(2, lineno=1262, col_offset=27)], [], None, None, lineno=1262, col_offset=8), lineno=1262, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1263, col_offset=8), '_file_length', Store(), lineno=1263, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=1263, col_offset=28), '_file', Load(), lineno=1263, col_offset=28), 'tell', Load(), lineno=1263, col_offset=28), [], [], None, None, lineno=1263, col_offset=28), lineno=1263, col_offset=8)], [], lineno=1235, col_offset=4), FunctionDef('_pre_mailbox_hook', arguments([Name('self', Param(), lineno=1265, col_offset=26), Name('f', Param(), lineno=1265, col_offset=32)], None, None, []), [Expr(Str('Called before writing the mailbox to file f.', lineno=1266, col_offset=8), lineno=1266, col_offset=8), Expr(Call(Attribute(Name('f', Load(), lineno=1267, col_offset=8), 'write', Load(), lineno=1267, col_offset=8), [BinOp(Str('BABYL OPTIONS:%sVersion: 5%sLabels:%s%s\x1f', lineno=1267, col_offset=16), Mod(), Tuple([Attribute(Name('os', Load(), lineno=1268, col_offset=17), 'linesep', Load(), lineno=1268, col_offset=17), Attribute(Name('os', Load(), lineno=1268, col_offset=29), 'linesep', Load(), lineno=1268, col_offset=29), Call(Attribute(Str(',', lineno=1268, col_offset=41), 'join', Load(), lineno=1268, col_offset=41), [Call(Attribute(Name('self', Load(), lineno=1268, col_offset=50), 'get_labels', Load(), lineno=1268, col_offset=50), [], [], None, None, lineno=1268, col_offset=50)], [], None, None, lineno=1268, col_offset=41), Attribute(Name('os', Load(), lineno=1269, col_offset=17), 'linesep', Load(), lineno=1269, col_offset=17)], Load(), lineno=1268, col_offset=17), lineno=1267, col_offset=16)], [], None, None, lineno=1267, col_offset=8), lineno=1267, col_offset=8)], [], lineno=1265, col_offset=4), FunctionDef('_pre_message_hook', arguments([Name('self', Param(), lineno=1271, col_offset=26), Name('f', Param(), lineno=1271, col_offset=32)], None, None, []), [Expr(Str('Called before writing each message to file f.', lineno=1272, col_offset=8), lineno=1272, col_offset=8), Expr(Call(Attribute(Name('f', Load(), lineno=1273, col_offset=8), 'write', Load(), lineno=1273, col_offset=8), [BinOp(Str('\x0c', lineno=1273, col_offset=16), Add(), Attribute(Name('os', Load(), lineno=1273, col_offset=25), 'linesep', Load(), lineno=1273, col_offset=25), lineno=1273, col_offset=16)], [], None, None, lineno=1273, col_offset=8), lineno=1273, col_offset=8)], [], lineno=1271, col_offset=4), FunctionDef('_post_message_hook', arguments([Name('self', Param(), lineno=1275, col_offset=27), Name('f', Param(), lineno=1275, col_offset=33)], None, None, []), [Expr(Str('Called after writing each message to file f.', lineno=1276, col_offset=8), lineno=1276, col_offset=8), Expr(Call(Attribute(Name('f', Load(), lineno=1277, col_offset=8), 'write', Load(), lineno=1277, col_offset=8), [BinOp(Attribute(Name('os', Load(), lineno=1277, col_offset=16), 'linesep', Load(), lineno=1277, col_offset=16), Add(), Str('\x1f', lineno=1277, col_offset=29), lineno=1277, col_offset=16)], [], None, None, lineno=1277, col_offset=8), lineno=1277, col_offset=8)], [], lineno=1275, col_offset=4), FunctionDef('_install_message', arguments([Name('self', Param(), lineno=1279, col_offset=25), Name('message', Param(), lineno=1279, col_offset=31)], None, None, []), [Expr(Str('Write message contents and return (start, stop).', lineno=1280, col_offset=8), lineno=1280, col_offset=8), Assign([Name('start', Store(), lineno=1281, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=1281, col_offset=16), '_file', Load(), lineno=1281, col_offset=16), 'tell', Load(), lineno=1281, col_offset=16), [], [], None, None, lineno=1281, col_offset=16), lineno=1281, col_offset=8), If(Call(Name('isinstance', Load(), lineno=1282, col_offset=11), [Name('message', Load(), lineno=1282, col_offset=22), Name('BabylMessage', Load(), lineno=1282, col_offset=31)], [], None, None, lineno=1282, col_offset=11), [Assign([Name('special_labels', Store(), lineno=1283, col_offset=12)], List([], Load(), lineno=1283, col_offset=29), lineno=1283, col_offset=12), Assign([Name('labels', Store(), lineno=1284, col_offset=12)], List([], Load(), lineno=1284, col_offset=21), lineno=1284, col_offset=12), For(Name('label', Store(), lineno=1285, col_offset=16), Call(Attribute(Name('message', Load(), lineno=1285, col_offset=25), 'get_labels', Load(), lineno=1285, col_offset=25), [], [], None, None, lineno=1285, col_offset=25), [If(Compare(Name('label', Load(), lineno=1286, col_offset=19), [In()], [Attribute(Name('self', Load(), lineno=1286, col_offset=28), '_special_labels', Load(), lineno=1286, col_offset=28)], lineno=1286, col_offset=19), [Expr(Call(Attribute(Name('special_labels', Load(), lineno=1287, col_offset=20), 'append', Load(), lineno=1287, col_offset=20), [Name('label', Load(), lineno=1287, col_offset=42)], [], None, None, lineno=1287, col_offset=20), lineno=1287, col_offset=20)], [Expr(Call(Attribute(Name('labels', Load(), lineno=1289, col_offset=20), 'append', Load(), lineno=1289, col_offset=20), [Name('label', Load(), lineno=1289, col_offset=34)], [], None, None, lineno=1289, col_offset=20), lineno=1289, col_offset=20)], lineno=1286, col_offset=16)], [], lineno=1285, col_offset=12), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1290, col_offset=12), '_file', Load(), lineno=1290, col_offset=12), 'write', Load(), lineno=1290, col_offset=12), [Str('1', lineno=1290, col_offset=29)], [], None, None, lineno=1290, col_offset=12), lineno=1290, col_offset=12), For(Name('label', Store(), lineno=1291, col_offset=16), Name('special_labels', Load(), lineno=1291, col_offset=25), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1292, col_offset=16), '_file', Load(), lineno=1292, col_offset=16), 'write', Load(), lineno=1292, col_offset=16), [BinOp(Str(', ', lineno=1292, col_offset=33), Add(), Name('label', Load(), lineno=1292, col_offset=40), lineno=1292, col_offset=33)], [], None, None, lineno=1292, col_offset=16), lineno=1292, col_offset=16)], [], lineno=1291, col_offset=12), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1293, col_offset=12), '_file', Load(), lineno=1293, col_offset=12), 'write', Load(), lineno=1293, col_offset=12), [Str(',,', lineno=1293, col_offset=29)], [], None, None, lineno=1293, col_offset=12), lineno=1293, col_offset=12), For(Name('label', Store(), lineno=1294, col_offset=16), Name('labels', Load(), lineno=1294, col_offset=25), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1295, col_offset=16), '_file', Load(), lineno=1295, col_offset=16), 'write', Load(), lineno=1295, col_offset=16), [BinOp(BinOp(Str(' ', lineno=1295, col_offset=33), Add(), Name('label', Load(), lineno=1295, col_offset=39), lineno=1295, col_offset=33), Add(), Str(',', lineno=1295, col_offset=47), lineno=1295, col_offset=45)], [], None, None, lineno=1295, col_offset=16), lineno=1295, col_offset=16)], [], lineno=1294, col_offset=12), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1296, col_offset=12), '_file', Load(), lineno=1296, col_offset=12), 'write', Load(), lineno=1296, col_offset=12), [Attribute(Name('os', Load(), lineno=1296, col_offset=29), 'linesep', Load(), lineno=1296, col_offset=29)], [], None, None, lineno=1296, col_offset=12), lineno=1296, col_offset=12)], [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1298, col_offset=12), '_file', Load(), lineno=1298, col_offset=12), 'write', Load(), lineno=1298, col_offset=12), [BinOp(Str('1,,', lineno=1298, col_offset=29), Add(), Attribute(Name('os', Load(), lineno=1298, col_offset=37), 'linesep', Load(), lineno=1298, col_offset=37), lineno=1298, col_offset=29)], [], None, None, lineno=1298, col_offset=12), lineno=1298, col_offset=12)], lineno=1282, col_offset=8), If(Call(Name('isinstance', Load(), lineno=1299, col_offset=11), [Name('message', Load(), lineno=1299, col_offset=22), Attribute(Attribute(Name('email', Load(), lineno=1299, col_offset=31), 'message', Load(), lineno=1299, col_offset=31), 'Message', Load(), lineno=1299, col_offset=31)], [], None, None, lineno=1299, col_offset=11), [Assign([Name('orig_buffer', Store(), lineno=1300, col_offset=12)], Call(Attribute(Name('StringIO', Load(), lineno=1300, col_offset=26), 'StringIO', Load(), lineno=1300, col_offset=26), [], [], None, None, lineno=1300, col_offset=26), lineno=1300, col_offset=12), Assign([Name('orig_generator', Store(), lineno=1301, col_offset=12)], Call(Attribute(Attribute(Name('email', Load(), lineno=1301, col_offset=29), 'generator', Load(), lineno=1301, col_offset=29), 'Generator', Load(), lineno=1301, col_offset=29), [Name('orig_buffer', Load(), lineno=1301, col_offset=55), Name('False', Load(), lineno=1301, col_offset=68), Num(0, lineno=1301, col_offset=75)], [], None, None, lineno=1301, col_offset=29), lineno=1301, col_offset=12), Expr(Call(Attribute(Name('orig_generator', Load(), lineno=1302, col_offset=12), 'flatten', Load(), lineno=1302, col_offset=12), [Name('message', Load(), lineno=1302, col_offset=35)], [], None, None, lineno=1302, col_offset=12), lineno=1302, col_offset=12), Expr(Call(Attribute(Name('orig_buffer', Load(), lineno=1303, col_offset=12), 'seek', Load(), lineno=1303, col_offset=12), [Num(0, lineno=1303, col_offset=29)], [], None, None, lineno=1303, col_offset=12), lineno=1303, col_offset=12), While(Name('True', Load(), lineno=1304, col_offset=18), [Assign([Name('line', Store(), lineno=1305, col_offset=16)], Call(Attribute(Name('orig_buffer', Load(), lineno=1305, col_offset=23), 'readline', Load(), lineno=1305, col_offset=23), [], [], None, None, lineno=1305, col_offset=23), lineno=1305, col_offset=16), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1306, col_offset=16), '_file', Load(), lineno=1306, col_offset=16), 'write', Load(), lineno=1306, col_offset=16), [Call(Attribute(Name('line', Load(), lineno=1306, col_offset=33), 'replace', Load(), lineno=1306, col_offset=33), [Str('\n', lineno=1306, col_offset=46), Attribute(Name('os', Load(), lineno=1306, col_offset=52), 'linesep', Load(), lineno=1306, col_offset=52)], [], None, None, lineno=1306, col_offset=33)], [], None, None, lineno=1306, col_offset=16), lineno=1306, col_offset=16), If(BoolOp(Or(), [Compare(Name('line', Load(), lineno=1307, col_offset=19), [Eq()], [Str('\n', lineno=1307, col_offset=27)], lineno=1307, col_offset=19), Compare(Name('line', Load(), lineno=1307, col_offset=35), [Eq()], [Str('', lineno=1307, col_offset=43)], lineno=1307, col_offset=35)], lineno=1307, col_offset=19), [Break( lineno=1308, col_offset=20)], [], lineno=1307, col_offset=16)], [], lineno=1304, col_offset=12), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1309, col_offset=12), '_file', Load(), lineno=1309, col_offset=12), 'write', Load(), lineno=1309, col_offset=12), [BinOp(Str('*** EOOH ***', lineno=1309, col_offset=29), Add(), Attribute(Name('os', Load(), lineno=1309, col_offset=46), 'linesep', Load(), lineno=1309, col_offset=46), lineno=1309, col_offset=29)], [], None, None, lineno=1309, col_offset=12), lineno=1309, col_offset=12), If(Call(Name('isinstance', Load(), lineno=1310, col_offset=15), [Name('message', Load(), lineno=1310, col_offset=26), Name('BabylMessage', Load(), lineno=1310, col_offset=35)], [], None, None, lineno=1310, col_offset=15), [Assign([Name('vis_buffer', Store(), lineno=1311, col_offset=16)], Call(Attribute(Name('StringIO', Load(), lineno=1311, col_offset=29), 'StringIO', Load(), lineno=1311, col_offset=29), [], [], None, None, lineno=1311, col_offset=29), lineno=1311, col_offset=16), Assign([Name('vis_generator', Store(), lineno=1312, col_offset=16)], Call(Attribute(Attribute(Name('email', Load(), lineno=1312, col_offset=32), 'generator', Load(), lineno=1312, col_offset=32), 'Generator', Load(), lineno=1312, col_offset=32), [Name('vis_buffer', Load(), lineno=1312, col_offset=58), Name('False', Load(), lineno=1312, col_offset=70), Num(0, lineno=1312, col_offset=77)], [], None, None, lineno=1312, col_offset=32), lineno=1312, col_offset=16), Expr(Call(Attribute(Name('vis_generator', Load(), lineno=1313, col_offset=16), 'flatten', Load(), lineno=1313, col_offset=16), [Call(Attribute(Name('message', Load(), lineno=1313, col_offset=38), 'get_visible', Load(), lineno=1313, col_offset=38), [], [], None, None, lineno=1313, col_offset=38)], [], None, None, lineno=1313, col_offset=16), lineno=1313, col_offset=16), While(Name('True', Load(), lineno=1314, col_offset=22), [Assign([Name('line', Store(), lineno=1315, col_offset=20)], Call(Attribute(Name('vis_buffer', Load(), lineno=1315, col_offset=27), 'readline', Load(), lineno=1315, col_offset=27), [], [], None, None, lineno=1315, col_offset=27), lineno=1315, col_offset=20), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1316, col_offset=20), '_file', Load(), lineno=1316, col_offset=20), 'write', Load(), lineno=1316, col_offset=20), [Call(Attribute(Name('line', Load(), lineno=1316, col_offset=37), 'replace', Load(), lineno=1316, col_offset=37), [Str('\n', lineno=1316, col_offset=50), Attribute(Name('os', Load(), lineno=1316, col_offset=56), 'linesep', Load(), lineno=1316, col_offset=56)], [], None, None, lineno=1316, col_offset=37)], [], None, None, lineno=1316, col_offset=20), lineno=1316, col_offset=20), If(BoolOp(Or(), [Compare(Name('line', Load(), lineno=1317, col_offset=23), [Eq()], [Str('\n', lineno=1317, col_offset=31)], lineno=1317, col_offset=23), Compare(Name('line', Load(), lineno=1317, col_offset=39), [Eq()], [Str('', lineno=1317, col_offset=47)], lineno=1317, col_offset=39)], lineno=1317, col_offset=23), [Break( lineno=1318, col_offset=24)], [], lineno=1317, col_offset=20)], [], lineno=1314, col_offset=16)], [Expr(Call(Attribute(Name('orig_buffer', Load(), lineno=1320, col_offset=16), 'seek', Load(), lineno=1320, col_offset=16), [Num(0, lineno=1320, col_offset=33)], [], None, None, lineno=1320, col_offset=16), lineno=1320, col_offset=16), While(Name('True', Load(), lineno=1321, col_offset=22), [Assign([Name('line', Store(), lineno=1322, col_offset=20)], Call(Attribute(Name('orig_buffer', Load(), lineno=1322, col_offset=27), 'readline', Load(), lineno=1322, col_offset=27), [], [], None, None, lineno=1322, col_offset=27), lineno=1322, col_offset=20), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1323, col_offset=20), '_file', Load(), lineno=1323, col_offset=20), 'write', Load(), lineno=1323, col_offset=20), [Call(Attribute(Name('line', Load(), lineno=1323, col_offset=37), 'replace', Load(), lineno=1323, col_offset=37), [Str('\n', lineno=1323, col_offset=50), Attribute(Name('os', Load(), lineno=1323, col_offset=56), 'linesep', Load(), lineno=1323, col_offset=56)], [], None, None, lineno=1323, col_offset=37)], [], None, None, lineno=1323, col_offset=20), lineno=1323, col_offset=20), If(BoolOp(Or(), [Compare(Name('line', Load(), lineno=1324, col_offset=23), [Eq()], [Str('\n', lineno=1324, col_offset=31)], lineno=1324, col_offset=23), Compare(Name('line', Load(), lineno=1324, col_offset=39), [Eq()], [Str('', lineno=1324, col_offset=47)], lineno=1324, col_offset=39)], lineno=1324, col_offset=23), [Break( lineno=1325, col_offset=24)], [], lineno=1324, col_offset=20)], [], lineno=1321, col_offset=16)], lineno=1310, col_offset=12), While(Name('True', Load(), lineno=1326, col_offset=18), [Assign([Name('buffer', Store(), lineno=1327, col_offset=16)], Call(Attribute(Name('orig_buffer', Load(), lineno=1327, col_offset=25), 'read', Load(), lineno=1327, col_offset=25), [Num(4096, lineno=1327, col_offset=42)], [], None, None, lineno=1327, col_offset=25), lineno=1327, col_offset=16), If(Compare(Name('buffer', Load(), lineno=1328, col_offset=19), [Eq()], [Str('', lineno=1328, col_offset=29)], lineno=1328, col_offset=19), [Break( lineno=1329, col_offset=20)], [], lineno=1328, col_offset=16), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1330, col_offset=16), '_file', Load(), lineno=1330, col_offset=16), 'write', Load(), lineno=1330, col_offset=16), [Call(Attribute(Name('buffer', Load(), lineno=1330, col_offset=33), 'replace', Load(), lineno=1330, col_offset=33), [Str('\n', lineno=1330, col_offset=48), Attribute(Name('os', Load(), lineno=1330, col_offset=54), 'linesep', Load(), lineno=1330, col_offset=54)], [], None, None, lineno=1330, col_offset=33)], [], None, None, lineno=1330, col_offset=16), lineno=1330, col_offset=16)], [], lineno=1326, col_offset=12)], [If(Call(Name('isinstance', Load(), lineno=1331, col_offset=13), [Name('message', Load(), lineno=1331, col_offset=24), Name('str', Load(), lineno=1331, col_offset=33)], [], None, None, lineno=1331, col_offset=13), [Assign([Name('body_start', Store(), lineno=1332, col_offset=12)], BinOp(Call(Attribute(Name('message', Load(), lineno=1332, col_offset=25), 'find', Load(), lineno=1332, col_offset=25), [Str('\n\n', lineno=1332, col_offset=38)], [], None, None, lineno=1332, col_offset=25), Add(), Num(2, lineno=1332, col_offset=48), lineno=1332, col_offset=25), lineno=1332, col_offset=12), If(Compare(BinOp(Name('body_start', Load(), lineno=1333, col_offset=15), Sub(), Num(2, lineno=1333, col_offset=28), lineno=1333, col_offset=15), [NotEq()], [Num(-1, lineno=1333, col_offset=34)], lineno=1333, col_offset=15), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1334, col_offset=16), '_file', Load(), lineno=1334, col_offset=16), 'write', Load(), lineno=1334, col_offset=16), [Call(Attribute(Subscript(Name('message', Load(), lineno=1334, col_offset=33), Slice(None, Name('body_start', Load(), lineno=1334, col_offset=42), None), Load(), lineno=1334, col_offset=33), 'replace', Load(), lineno=1334, col_offset=33), [Str('\n', lineno=1334, col_offset=62), Attribute(Name('os', Load(), lineno=1335, col_offset=62), 'linesep', Load(), lineno=1335, col_offset=62)], [], None, None, lineno=1334, col_offset=33)], [], None, None, lineno=1334, col_offset=16), lineno=1334, col_offset=16), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1336, col_offset=16), '_file', Load(), lineno=1336, col_offset=16), 'write', Load(), lineno=1336, col_offset=16), [BinOp(Str('*** EOOH ***', lineno=1336, col_offset=33), Add(), Attribute(Name('os', Load(), lineno=1336, col_offset=50), 'linesep', Load(), lineno=1336, col_offset=50), lineno=1336, col_offset=33)], [], None, None, lineno=1336, col_offset=16), lineno=1336, col_offset=16), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1337, col_offset=16), '_file', Load(), lineno=1337, col_offset=16), 'write', Load(), lineno=1337, col_offset=16), [Call(Attribute(Subscript(Name('message', Load(), lineno=1337, col_offset=33), Slice(None, Name('body_start', Load(), lineno=1337, col_offset=42), None), Load(), lineno=1337, col_offset=33), 'replace', Load(), lineno=1337, col_offset=33), [Str('\n', lineno=1337, col_offset=62), Attribute(Name('os', Load(), lineno=1338, col_offset=62), 'linesep', Load(), lineno=1338, col_offset=62)], [], None, None, lineno=1337, col_offset=33)], [], None, None, lineno=1337, col_offset=16), lineno=1337, col_offset=16), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1339, col_offset=16), '_file', Load(), lineno=1339, col_offset=16), 'write', Load(), lineno=1339, col_offset=16), [Call(Attribute(Subscript(Name('message', Load(), lineno=1339, col_offset=33), Slice(Name('body_start', Load(), lineno=1339, col_offset=41), None, None), Load(), lineno=1339, col_offset=33), 'replace', Load(), lineno=1339, col_offset=33), [Str('\n', lineno=1339, col_offset=62), Attribute(Name('os', Load(), lineno=1340, col_offset=62), 'linesep', Load(), lineno=1340, col_offset=62)], [], None, None, lineno=1339, col_offset=33)], [], None, None, lineno=1339, col_offset=16), lineno=1339, col_offset=16)], [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1342, col_offset=16), '_file', Load(), lineno=1342, col_offset=16), 'write', Load(), lineno=1342, col_offset=16), [BinOp(BinOp(Str('*** EOOH ***', lineno=1342, col_offset=33), Add(), Attribute(Name('os', Load(), lineno=1342, col_offset=50), 'linesep', Load(), lineno=1342, col_offset=50), lineno=1342, col_offset=33), Add(), Attribute(Name('os', Load(), lineno=1342, col_offset=63), 'linesep', Load(), lineno=1342, col_offset=63), lineno=1342, col_offset=61)], [], None, None, lineno=1342, col_offset=16), lineno=1342, col_offset=16), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1343, col_offset=16), '_file', Load(), lineno=1343, col_offset=16), 'write', Load(), lineno=1343, col_offset=16), [Call(Attribute(Name('message', Load(), lineno=1343, col_offset=33), 'replace', Load(), lineno=1343, col_offset=33), [Str('\n', lineno=1343, col_offset=49), Attribute(Name('os', Load(), lineno=1343, col_offset=55), 'linesep', Load(), lineno=1343, col_offset=55)], [], None, None, lineno=1343, col_offset=33)], [], None, None, lineno=1343, col_offset=16), lineno=1343, col_offset=16)], lineno=1333, col_offset=12)], [If(Call(Name('hasattr', Load(), lineno=1344, col_offset=13), [Name('message', Load(), lineno=1344, col_offset=21), Str('readline', lineno=1344, col_offset=30)], [], None, None, lineno=1344, col_offset=13), [Assign([Name('original_pos', Store(), lineno=1345, col_offset=12)], Call(Attribute(Name('message', Load(), lineno=1345, col_offset=27), 'tell', Load(), lineno=1345, col_offset=27), [], [], None, None, lineno=1345, col_offset=27), lineno=1345, col_offset=12), Assign([Name('first_pass', Store(), lineno=1346, col_offset=12)], Name('True', Load(), lineno=1346, col_offset=25), lineno=1346, col_offset=12), While(Name('True', Load(), lineno=1347, col_offset=18), [Assign([Name('line', Store(), lineno=1348, col_offset=16)], Call(Attribute(Name('message', Load(), lineno=1348, col_offset=23), 'readline', Load(), lineno=1348, col_offset=23), [], [], None, None, lineno=1348, col_offset=23), lineno=1348, col_offset=16), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1349, col_offset=16), '_file', Load(), lineno=1349, col_offset=16), 'write', Load(), lineno=1349, col_offset=16), [Call(Attribute(Name('line', Load(), lineno=1349, col_offset=33), 'replace', Load(), lineno=1349, col_offset=33), [Str('\n', lineno=1349, col_offset=46), Attribute(Name('os', Load(), lineno=1349, col_offset=52), 'linesep', Load(), lineno=1349, col_offset=52)], [], None, None, lineno=1349, col_offset=33)], [], None, None, lineno=1349, col_offset=16), lineno=1349, col_offset=16), If(BoolOp(Or(), [Compare(Name('line', Load(), lineno=1350, col_offset=19), [Eq()], [Str('\n', lineno=1350, col_offset=27)], lineno=1350, col_offset=19), Compare(Name('line', Load(), lineno=1350, col_offset=35), [Eq()], [Str('', lineno=1350, col_offset=43)], lineno=1350, col_offset=35)], lineno=1350, col_offset=19), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1351, col_offset=20), '_file', Load(), lineno=1351, col_offset=20), 'write', Load(), lineno=1351, col_offset=20), [BinOp(Str('*** EOOH ***', lineno=1351, col_offset=37), Add(), Attribute(Name('os', Load(), lineno=1351, col_offset=54), 'linesep', Load(), lineno=1351, col_offset=54), lineno=1351, col_offset=37)], [], None, None, lineno=1351, col_offset=20), lineno=1351, col_offset=20), If(Name('first_pass', Load(), lineno=1352, col_offset=23), [Assign([Name('first_pass', Store(), lineno=1353, col_offset=24)], Name('False', Load(), lineno=1353, col_offset=37), lineno=1353, col_offset=24), Expr(Call(Attribute(Name('message', Load(), lineno=1354, col_offset=24), 'seek', Load(), lineno=1354, col_offset=24), [Name('original_pos', Load(), lineno=1354, col_offset=37)], [], None, None, lineno=1354, col_offset=24), lineno=1354, col_offset=24)], [Break( lineno=1356, col_offset=24)], lineno=1352, col_offset=20)], [], lineno=1350, col_offset=16)], [], lineno=1347, col_offset=12), While(Name('True', Load(), lineno=1357, col_offset=18), [Assign([Name('buffer', Store(), lineno=1358, col_offset=16)], Call(Attribute(Name('message', Load(), lineno=1358, col_offset=25), 'read', Load(), lineno=1358, col_offset=25), [Num(4096, lineno=1358, col_offset=38)], [], None, None, lineno=1358, col_offset=25), lineno=1358, col_offset=16), If(Compare(Name('buffer', Load(), lineno=1359, col_offset=19), [Eq()], [Str('', lineno=1359, col_offset=29)], lineno=1359, col_offset=19), [Break( lineno=1360, col_offset=20)], [], lineno=1359, col_offset=16), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1361, col_offset=16), '_file', Load(), lineno=1361, col_offset=16), 'write', Load(), lineno=1361, col_offset=16), [Call(Attribute(Name('buffer', Load(), lineno=1361, col_offset=33), 'replace', Load(), lineno=1361, col_offset=33), [Str('\n', lineno=1361, col_offset=48), Attribute(Name('os', Load(), lineno=1361, col_offset=54), 'linesep', Load(), lineno=1361, col_offset=54)], [], None, None, lineno=1361, col_offset=33)], [], None, None, lineno=1361, col_offset=16), lineno=1361, col_offset=16)], [], lineno=1357, col_offset=12)], [Raise(Call(Name('TypeError', Load(), lineno=1363, col_offset=18), [BinOp(Str('Invalid message type: %s', lineno=1363, col_offset=28), Mod(), Call(Name('type', Load(), lineno=1363, col_offset=57), [Name('message', Load(), lineno=1363, col_offset=62)], [], None, None, lineno=1363, col_offset=57), lineno=1363, col_offset=28)], [], None, None, lineno=1363, col_offset=18), None, None, lineno=1363, col_offset=12)], lineno=1344, col_offset=13)], lineno=1331, col_offset=13)], lineno=1299, col_offset=8), Assign([Name('stop', Store(), lineno=1364, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=1364, col_offset=15), '_file', Load(), lineno=1364, col_offset=15), 'tell', Load(), lineno=1364, col_offset=15), [], [], None, None, lineno=1364, col_offset=15), lineno=1364, col_offset=8), Return(Tuple([Name('start', Load(), lineno=1365, col_offset=16), Name('stop', Load(), lineno=1365, col_offset=23)], Load(), lineno=1365, col_offset=16), lineno=1365, col_offset=8)], [], lineno=1279, col_offset=4)], [], lineno=1147, col_offset=0), ClassDef('Message', [Attribute(Attribute(Name('email', Load(), lineno=1368, col_offset=14), 'message', Load(), lineno=1368, col_offset=14), 'Message', Load(), lineno=1368, col_offset=14)], [Expr(Str('Message with mailbox-format-specific properties.', lineno=1369, col_offset=4), lineno=1369, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=1371, col_offset=17), Name('message', Param(), lineno=1371, col_offset=23)], None, None, [Name('None', Load(), lineno=1371, col_offset=31)]), [Expr(Str('Initialize a Message instance.', lineno=1372, col_offset=8), lineno=1372, col_offset=8), If(Call(Name('isinstance', Load(), lineno=1373, col_offset=11), [Name('message', Load(), lineno=1373, col_offset=22), Attribute(Attribute(Name('email', Load(), lineno=1373, col_offset=31), 'message', Load(), lineno=1373, col_offset=31), 'Message', Load(), lineno=1373, col_offset=31)], [], None, None, lineno=1373, col_offset=11), [Expr(Call(Attribute(Name('self', Load(), lineno=1374, col_offset=12), '_become_message', Load(), lineno=1374, col_offset=12), [Call(Attribute(Name('copy', Load(), lineno=1374, col_offset=33), 'deepcopy', Load(), lineno=1374, col_offset=33), [Name('message', Load(), lineno=1374, col_offset=47)], [], None, None, lineno=1374, col_offset=33)], [], None, None, lineno=1374, col_offset=12), lineno=1374, col_offset=12), If(Call(Name('isinstance', Load(), lineno=1375, col_offset=15), [Name('message', Load(), lineno=1375, col_offset=26), Name('Message', Load(), lineno=1375, col_offset=35)], [], None, None, lineno=1375, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1376, col_offset=16), '_explain_to', Load(), lineno=1376, col_offset=16), [Name('self', Load(), lineno=1376, col_offset=36)], [], None, None, lineno=1376, col_offset=16), lineno=1376, col_offset=16)], [], lineno=1375, col_offset=12)], [If(Call(Name('isinstance', Load(), lineno=1377, col_offset=13), [Name('message', Load(), lineno=1377, col_offset=24), Name('str', Load(), lineno=1377, col_offset=33)], [], None, None, lineno=1377, col_offset=13), [Expr(Call(Attribute(Name('self', Load(), lineno=1378, col_offset=12), '_become_message', Load(), lineno=1378, col_offset=12), [Call(Attribute(Name('email', Load(), lineno=1378, col_offset=33), 'message_from_string', Load(), lineno=1378, col_offset=33), [Name('message', Load(), lineno=1378, col_offset=59)], [], None, None, lineno=1378, col_offset=33)], [], None, None, lineno=1378, col_offset=12), lineno=1378, col_offset=12)], [If(Call(Name('hasattr', Load(), lineno=1379, col_offset=13), [Name('message', Load(), lineno=1379, col_offset=21), Str('read', lineno=1379, col_offset=30)], [], None, None, lineno=1379, col_offset=13), [Expr(Call(Attribute(Name('self', Load(), lineno=1380, col_offset=12), '_become_message', Load(), lineno=1380, col_offset=12), [Call(Attribute(Name('email', Load(), lineno=1380, col_offset=33), 'message_from_file', Load(), lineno=1380, col_offset=33), [Name('message', Load(), lineno=1380, col_offset=57)], [], None, None, lineno=1380, col_offset=33)], [], None, None, lineno=1380, col_offset=12), lineno=1380, col_offset=12)], [If(Compare(Name('message', Load(), lineno=1381, col_offset=13), [Is()], [Name('None', Load(), lineno=1381, col_offset=24)], lineno=1381, col_offset=13), [Expr(Call(Attribute(Attribute(Attribute(Name('email', Load(), lineno=1382, col_offset=12), 'message', Load(), lineno=1382, col_offset=12), 'Message', Load(), lineno=1382, col_offset=12), '__init__', Load(), lineno=1382, col_offset=12), [Name('self', Load(), lineno=1382, col_offset=43)], [], None, None, lineno=1382, col_offset=12), lineno=1382, col_offset=12)], [Raise(Call(Name('TypeError', Load(), lineno=1384, col_offset=18), [BinOp(Str('Invalid message type: %s', lineno=1384, col_offset=28), Mod(), Call(Name('type', Load(), lineno=1384, col_offset=57), [Name('message', Load(), lineno=1384, col_offset=62)], [], None, None, lineno=1384, col_offset=57), lineno=1384, col_offset=28)], [], None, None, lineno=1384, col_offset=18), None, None, lineno=1384, col_offset=12)], lineno=1381, col_offset=13)], lineno=1379, col_offset=13)], lineno=1377, col_offset=13)], lineno=1373, col_offset=8)], [], lineno=1371, col_offset=4), FunctionDef('_become_message', arguments([Name('self', Param(), lineno=1386, col_offset=24), Name('message', Param(), lineno=1386, col_offset=30)], None, None, []), [Expr(Str('Assume the non-format-specific state of message.', lineno=1387, col_offset=8), lineno=1387, col_offset=8), For(Name('name', Store(), lineno=1388, col_offset=12), Tuple([Str('_headers', lineno=1388, col_offset=21), Str('_unixfrom', lineno=1388, col_offset=33), Str('_payload', lineno=1388, col_offset=46), Str('_charset', lineno=1388, col_offset=58), Str('preamble', lineno=1389, col_offset=21), Str('epilogue', lineno=1389, col_offset=33), Str('defects', lineno=1389, col_offset=45), Str('_default_type', lineno=1389, col_offset=56)], Load(), lineno=1388, col_offset=21), [Assign([Subscript(Attribute(Name('self', Load(), lineno=1390, col_offset=12), '__dict__', Load(), lineno=1390, col_offset=12), Index(Name('name', Load(), lineno=1390, col_offset=26)), Store(), lineno=1390, col_offset=12)], Subscript(Attribute(Name('message', Load(), lineno=1390, col_offset=34), '__dict__', Load(), lineno=1390, col_offset=34), Index(Name('name', Load(), lineno=1390, col_offset=51)), Load(), lineno=1390, col_offset=34), lineno=1390, col_offset=12)], [], lineno=1388, col_offset=8)], [], lineno=1386, col_offset=4), FunctionDef('_explain_to', arguments([Name('self', Param(), lineno=1392, col_offset=20), Name('message', Param(), lineno=1392, col_offset=26)], None, None, []), [Expr(Str('Copy format-specific state to message insofar as possible.', lineno=1393, col_offset=8), lineno=1393, col_offset=8), If(Call(Name('isinstance', Load(), lineno=1394, col_offset=11), [Name('message', Load(), lineno=1394, col_offset=22), Name('Message', Load(), lineno=1394, col_offset=31)], [], None, None, lineno=1394, col_offset=11), [Return(None, lineno=1395, col_offset=12)], [Raise(Call(Name('TypeError', Load(), lineno=1397, col_offset=18), [Str('Cannot convert to specified type', lineno=1397, col_offset=28)], [], None, None, lineno=1397, col_offset=18), None, None, lineno=1397, col_offset=12)], lineno=1394, col_offset=8)], [], lineno=1392, col_offset=4)], [], lineno=1368, col_offset=0), ClassDef('MaildirMessage', [Name('Message', Load(), lineno=1400, col_offset=21)], [Expr(Str('Message with Maildir-specific properties.', lineno=1401, col_offset=4), lineno=1401, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=1403, col_offset=17), Name('message', Param(), lineno=1403, col_offset=23)], None, None, [Name('None', Load(), lineno=1403, col_offset=31)]), [Expr(Str('Initialize a MaildirMessage instance.', lineno=1404, col_offset=8), lineno=1404, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1405, col_offset=8), '_subdir', Store(), lineno=1405, col_offset=8)], Str('new', lineno=1405, col_offset=23), lineno=1405, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1406, col_offset=8), '_info', Store(), lineno=1406, col_offset=8)], Str('', lineno=1406, col_offset=21), lineno=1406, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1407, col_offset=8), '_date', Store(), lineno=1407, col_offset=8)], Call(Attribute(Name('time', Load(), lineno=1407, col_offset=21), 'time', Load(), lineno=1407, col_offset=21), [], [], None, None, lineno=1407, col_offset=21), lineno=1407, col_offset=8), Expr(Call(Attribute(Name('Message', Load(), lineno=1408, col_offset=8), '__init__', Load(), lineno=1408, col_offset=8), [Name('self', Load(), lineno=1408, col_offset=25), Name('message', Load(), lineno=1408, col_offset=31)], [], None, None, lineno=1408, col_offset=8), lineno=1408, col_offset=8)], [], lineno=1403, col_offset=4), FunctionDef('get_subdir', arguments([Name('self', Param(), lineno=1410, col_offset=19)], None, None, []), [Expr(Str("Return 'new' or 'cur'.", lineno=1411, col_offset=8), lineno=1411, col_offset=8), Return(Attribute(Name('self', Load(), lineno=1412, col_offset=15), '_subdir', Load(), lineno=1412, col_offset=15), lineno=1412, col_offset=8)], [], lineno=1410, col_offset=4), FunctionDef('set_subdir', arguments([Name('self', Param(), lineno=1414, col_offset=19), Name('subdir', Param(), lineno=1414, col_offset=25)], None, None, []), [Expr(Str("Set subdir to 'new' or 'cur'.", lineno=1415, col_offset=8), lineno=1415, col_offset=8), If(BoolOp(Or(), [Compare(Name('subdir', Load(), lineno=1416, col_offset=11), [Eq()], [Str('new', lineno=1416, col_offset=21)], lineno=1416, col_offset=11), Compare(Name('subdir', Load(), lineno=1416, col_offset=30), [Eq()], [Str('cur', lineno=1416, col_offset=40)], lineno=1416, col_offset=30)], lineno=1416, col_offset=11), [Assign([Attribute(Name('self', Load(), lineno=1417, col_offset=12), '_subdir', Store(), lineno=1417, col_offset=12)], Name('subdir', Load(), lineno=1417, col_offset=27), lineno=1417, col_offset=12)], [Raise(Call(Name('ValueError', Load(), lineno=1419, col_offset=18), [BinOp(Str("subdir must be 'new' or 'cur': %s", lineno=1419, col_offset=29), Mod(), Name('subdir', Load(), lineno=1419, col_offset=67), lineno=1419, col_offset=29)], [], None, None, lineno=1419, col_offset=18), None, None, lineno=1419, col_offset=12)], lineno=1416, col_offset=8)], [], lineno=1414, col_offset=4), FunctionDef('get_flags', arguments([Name('self', Param(), lineno=1421, col_offset=18)], None, None, []), [Expr(Str('Return as a string the flags that are set.', lineno=1422, col_offset=8), lineno=1422, col_offset=8), If(Call(Attribute(Attribute(Name('self', Load(), lineno=1423, col_offset=11), '_info', Load(), lineno=1423, col_offset=11), 'startswith', Load(), lineno=1423, col_offset=11), [Str('2,', lineno=1423, col_offset=33)], [], None, None, lineno=1423, col_offset=11), [Return(Subscript(Attribute(Name('self', Load(), lineno=1424, col_offset=19), '_info', Load(), lineno=1424, col_offset=19), Slice(Num(2, lineno=1424, col_offset=30), None, None), Load(), lineno=1424, col_offset=19), lineno=1424, col_offset=12)], [Return(Str('', lineno=1426, col_offset=19), lineno=1426, col_offset=12)], lineno=1423, col_offset=8)], [], lineno=1421, col_offset=4), FunctionDef('set_flags', arguments([Name('self', Param(), lineno=1428, col_offset=18), Name('flags', Param(), lineno=1428, col_offset=24)], None, None, []), [Expr(Str('Set the given flags and unset all others.', lineno=1429, col_offset=8), lineno=1429, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1430, col_offset=8), '_info', Store(), lineno=1430, col_offset=8)], BinOp(Str('2,', lineno=1430, col_offset=21), Add(), Call(Attribute(Str('', lineno=1430, col_offset=28), 'join', Load(), lineno=1430, col_offset=28), [Call(Name('sorted', Load(), lineno=1430, col_offset=36), [Name('flags', Load(), lineno=1430, col_offset=43)], [], None, None, lineno=1430, col_offset=36)], [], None, None, lineno=1430, col_offset=28), lineno=1430, col_offset=21), lineno=1430, col_offset=8)], [], lineno=1428, col_offset=4), FunctionDef('add_flag', arguments([Name('self', Param(), lineno=1432, col_offset=17), Name('flag', Param(), lineno=1432, col_offset=23)], None, None, []), [Expr(Str('Set the given flag(s) without changing others.', lineno=1433, col_offset=8), lineno=1433, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1434, col_offset=8), 'set_flags', Load(), lineno=1434, col_offset=8), [Call(Attribute(Str('', lineno=1434, col_offset=23), 'join', Load(), lineno=1434, col_offset=23), [BinOp(Call(Name('set', Load(), lineno=1434, col_offset=31), [Call(Attribute(Name('self', Load(), lineno=1434, col_offset=35), 'get_flags', Load(), lineno=1434, col_offset=35), [], [], None, None, lineno=1434, col_offset=35)], [], None, None, lineno=1434, col_offset=31), BitOr(), Call(Name('set', Load(), lineno=1434, col_offset=55), [Name('flag', Load(), lineno=1434, col_offset=59)], [], None, None, lineno=1434, col_offset=55), lineno=1434, col_offset=31)], [], None, None, lineno=1434, col_offset=23)], [], None, None, lineno=1434, col_offset=8), lineno=1434, col_offset=8)], [], lineno=1432, col_offset=4), FunctionDef('remove_flag', arguments([Name('self', Param(), lineno=1436, col_offset=20), Name('flag', Param(), lineno=1436, col_offset=26)], None, None, []), [Expr(Str('Unset the given string flag(s) without changing others.', lineno=1437, col_offset=8), lineno=1437, col_offset=8), If(Compare(Call(Attribute(Name('self', Load(), lineno=1438, col_offset=11), 'get_flags', Load(), lineno=1438, col_offset=11), [], [], None, None, lineno=1438, col_offset=11), [NotEq()], [Str('', lineno=1438, col_offset=31)], lineno=1438, col_offset=11), [Expr(Call(Attribute(Name('self', Load(), lineno=1439, col_offset=12), 'set_flags', Load(), lineno=1439, col_offset=12), [Call(Attribute(Str('', lineno=1439, col_offset=27), 'join', Load(), lineno=1439, col_offset=27), [BinOp(Call(Name('set', Load(), lineno=1439, col_offset=35), [Call(Attribute(Name('self', Load(), lineno=1439, col_offset=39), 'get_flags', Load(), lineno=1439, col_offset=39), [], [], None, None, lineno=1439, col_offset=39)], [], None, None, lineno=1439, col_offset=35), Sub(), Call(Name('set', Load(), lineno=1439, col_offset=59), [Name('flag', Load(), lineno=1439, col_offset=63)], [], None, None, lineno=1439, col_offset=59), lineno=1439, col_offset=35)], [], None, None, lineno=1439, col_offset=27)], [], None, None, lineno=1439, col_offset=12), lineno=1439, col_offset=12)], [], lineno=1438, col_offset=8)], [], lineno=1436, col_offset=4), FunctionDef('get_date', arguments([Name('self', Param(), lineno=1441, col_offset=17)], None, None, []), [Expr(Str('Return delivery date of message, in seconds since the epoch.', lineno=1442, col_offset=8), lineno=1442, col_offset=8), Return(Attribute(Name('self', Load(), lineno=1443, col_offset=15), '_date', Load(), lineno=1443, col_offset=15), lineno=1443, col_offset=8)], [], lineno=1441, col_offset=4), FunctionDef('set_date', arguments([Name('self', Param(), lineno=1445, col_offset=17), Name('date', Param(), lineno=1445, col_offset=23)], None, None, []), [Expr(Str('Set delivery date of message, in seconds since the epoch.', lineno=1446, col_offset=8), lineno=1446, col_offset=8), TryExcept([Assign([Attribute(Name('self', Load(), lineno=1448, col_offset=12), '_date', Store(), lineno=1448, col_offset=12)], Call(Name('float', Load(), lineno=1448, col_offset=25), [Name('date', Load(), lineno=1448, col_offset=31)], [], None, None, lineno=1448, col_offset=25), lineno=1448, col_offset=12)], [ExceptHandler(Name('ValueError', Load(), lineno=1449, col_offset=15), None, [Raise(Call(Name('TypeError', Load(), lineno=1450, col_offset=18), [BinOp(Str("can't convert to float: %s", lineno=1450, col_offset=28), Mod(), Name('date', Load(), lineno=1450, col_offset=59), lineno=1450, col_offset=28)], [], None, None, lineno=1450, col_offset=18), None, None, lineno=1450, col_offset=12)], lineno=1449, col_offset=8)], [], lineno=1447, col_offset=8)], [], lineno=1445, col_offset=4), FunctionDef('get_info', arguments([Name('self', Param(), lineno=1452, col_offset=17)], None, None, []), [Expr(Str('Get the message\'s "info" as a string.', lineno=1453, col_offset=8), lineno=1453, col_offset=8), Return(Attribute(Name('self', Load(), lineno=1454, col_offset=15), '_info', Load(), lineno=1454, col_offset=15), lineno=1454, col_offset=8)], [], lineno=1452, col_offset=4), FunctionDef('set_info', arguments([Name('self', Param(), lineno=1456, col_offset=17), Name('info', Param(), lineno=1456, col_offset=23)], None, None, []), [Expr(Str('Set the message\'s "info" string.', lineno=1457, col_offset=8), lineno=1457, col_offset=8), If(Call(Name('isinstance', Load(), lineno=1458, col_offset=11), [Name('info', Load(), lineno=1458, col_offset=22), Name('str', Load(), lineno=1458, col_offset=28)], [], None, None, lineno=1458, col_offset=11), [Assign([Attribute(Name('self', Load(), lineno=1459, col_offset=12), '_info', Store(), lineno=1459, col_offset=12)], Name('info', Load(), lineno=1459, col_offset=25), lineno=1459, col_offset=12)], [Raise(Call(Name('TypeError', Load(), lineno=1461, col_offset=18), [BinOp(Str('info must be a string: %s', lineno=1461, col_offset=28), Mod(), Call(Name('type', Load(), lineno=1461, col_offset=58), [Name('info', Load(), lineno=1461, col_offset=63)], [], None, None, lineno=1461, col_offset=58), lineno=1461, col_offset=28)], [], None, None, lineno=1461, col_offset=18), None, None, lineno=1461, col_offset=12)], lineno=1458, col_offset=8)], [], lineno=1456, col_offset=4), FunctionDef('_explain_to', arguments([Name('self', Param(), lineno=1463, col_offset=20), Name('message', Param(), lineno=1463, col_offset=26)], None, None, []), [Expr(Str('Copy Maildir-specific state to message insofar as possible.', lineno=1464, col_offset=8), lineno=1464, col_offset=8), If(Call(Name('isinstance', Load(), lineno=1465, col_offset=11), [Name('message', Load(), lineno=1465, col_offset=22), Name('MaildirMessage', Load(), lineno=1465, col_offset=31)], [], None, None, lineno=1465, col_offset=11), [Expr(Call(Attribute(Name('message', Load(), lineno=1466, col_offset=12), 'set_flags', Load(), lineno=1466, col_offset=12), [Call(Attribute(Name('self', Load(), lineno=1466, col_offset=30), 'get_flags', Load(), lineno=1466, col_offset=30), [], [], None, None, lineno=1466, col_offset=30)], [], None, None, lineno=1466, col_offset=12), lineno=1466, col_offset=12), Expr(Call(Attribute(Name('message', Load(), lineno=1467, col_offset=12), 'set_subdir', Load(), lineno=1467, col_offset=12), [Call(Attribute(Name('self', Load(), lineno=1467, col_offset=31), 'get_subdir', Load(), lineno=1467, col_offset=31), [], [], None, None, lineno=1467, col_offset=31)], [], None, None, lineno=1467, col_offset=12), lineno=1467, col_offset=12), Expr(Call(Attribute(Name('message', Load(), lineno=1468, col_offset=12), 'set_date', Load(), lineno=1468, col_offset=12), [Call(Attribute(Name('self', Load(), lineno=1468, col_offset=29), 'get_date', Load(), lineno=1468, col_offset=29), [], [], None, None, lineno=1468, col_offset=29)], [], None, None, lineno=1468, col_offset=12), lineno=1468, col_offset=12)], [If(Call(Name('isinstance', Load(), lineno=1469, col_offset=13), [Name('message', Load(), lineno=1469, col_offset=24), Name('_mboxMMDFMessage', Load(), lineno=1469, col_offset=33)], [], None, None, lineno=1469, col_offset=13), [Assign([Name('flags', Store(), lineno=1470, col_offset=12)], Call(Name('set', Load(), lineno=1470, col_offset=20), [Call(Attribute(Name('self', Load(), lineno=1470, col_offset=24), 'get_flags', Load(), lineno=1470, col_offset=24), [], [], None, None, lineno=1470, col_offset=24)], [], None, None, lineno=1470, col_offset=20), lineno=1470, col_offset=12), If(Compare(Str('S', lineno=1471, col_offset=15), [In()], [Name('flags', Load(), lineno=1471, col_offset=22)], lineno=1471, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1472, col_offset=16), 'add_flag', Load(), lineno=1472, col_offset=16), [Str('R', lineno=1472, col_offset=33)], [], None, None, lineno=1472, col_offset=16), lineno=1472, col_offset=16)], [], lineno=1471, col_offset=12), If(Compare(Call(Attribute(Name('self', Load(), lineno=1473, col_offset=15), 'get_subdir', Load(), lineno=1473, col_offset=15), [], [], None, None, lineno=1473, col_offset=15), [Eq()], [Str('cur', lineno=1473, col_offset=36)], lineno=1473, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1474, col_offset=16), 'add_flag', Load(), lineno=1474, col_offset=16), [Str('O', lineno=1474, col_offset=33)], [], None, None, lineno=1474, col_offset=16), lineno=1474, col_offset=16)], [], lineno=1473, col_offset=12), If(Compare(Str('T', lineno=1475, col_offset=15), [In()], [Name('flags', Load(), lineno=1475, col_offset=22)], lineno=1475, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1476, col_offset=16), 'add_flag', Load(), lineno=1476, col_offset=16), [Str('D', lineno=1476, col_offset=33)], [], None, None, lineno=1476, col_offset=16), lineno=1476, col_offset=16)], [], lineno=1475, col_offset=12), If(Compare(Str('F', lineno=1477, col_offset=15), [In()], [Name('flags', Load(), lineno=1477, col_offset=22)], lineno=1477, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1478, col_offset=16), 'add_flag', Load(), lineno=1478, col_offset=16), [Str('F', lineno=1478, col_offset=33)], [], None, None, lineno=1478, col_offset=16), lineno=1478, col_offset=16)], [], lineno=1477, col_offset=12), If(Compare(Str('R', lineno=1479, col_offset=15), [In()], [Name('flags', Load(), lineno=1479, col_offset=22)], lineno=1479, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1480, col_offset=16), 'add_flag', Load(), lineno=1480, col_offset=16), [Str('A', lineno=1480, col_offset=33)], [], None, None, lineno=1480, col_offset=16), lineno=1480, col_offset=16)], [], lineno=1479, col_offset=12), Expr(Call(Attribute(Name('message', Load(), lineno=1481, col_offset=12), 'set_from', Load(), lineno=1481, col_offset=12), [Str('MAILER-DAEMON', lineno=1481, col_offset=29), Call(Attribute(Name('time', Load(), lineno=1481, col_offset=46), 'gmtime', Load(), lineno=1481, col_offset=46), [Call(Attribute(Name('self', Load(), lineno=1481, col_offset=58), 'get_date', Load(), lineno=1481, col_offset=58), [], [], None, None, lineno=1481, col_offset=58)], [], None, None, lineno=1481, col_offset=46)], [], None, None, lineno=1481, col_offset=12), lineno=1481, col_offset=12)], [If(Call(Name('isinstance', Load(), lineno=1482, col_offset=13), [Name('message', Load(), lineno=1482, col_offset=24), Name('MHMessage', Load(), lineno=1482, col_offset=33)], [], None, None, lineno=1482, col_offset=13), [Assign([Name('flags', Store(), lineno=1483, col_offset=12)], Call(Name('set', Load(), lineno=1483, col_offset=20), [Call(Attribute(Name('self', Load(), lineno=1483, col_offset=24), 'get_flags', Load(), lineno=1483, col_offset=24), [], [], None, None, lineno=1483, col_offset=24)], [], None, None, lineno=1483, col_offset=20), lineno=1483, col_offset=12), If(Compare(Str('S', lineno=1484, col_offset=15), [NotIn()], [Name('flags', Load(), lineno=1484, col_offset=26)], lineno=1484, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1485, col_offset=16), 'add_sequence', Load(), lineno=1485, col_offset=16), [Str('unseen', lineno=1485, col_offset=37)], [], None, None, lineno=1485, col_offset=16), lineno=1485, col_offset=16)], [], lineno=1484, col_offset=12), If(Compare(Str('R', lineno=1486, col_offset=15), [In()], [Name('flags', Load(), lineno=1486, col_offset=22)], lineno=1486, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1487, col_offset=16), 'add_sequence', Load(), lineno=1487, col_offset=16), [Str('replied', lineno=1487, col_offset=37)], [], None, None, lineno=1487, col_offset=16), lineno=1487, col_offset=16)], [], lineno=1486, col_offset=12), If(Compare(Str('F', lineno=1488, col_offset=15), [In()], [Name('flags', Load(), lineno=1488, col_offset=22)], lineno=1488, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1489, col_offset=16), 'add_sequence', Load(), lineno=1489, col_offset=16), [Str('flagged', lineno=1489, col_offset=37)], [], None, None, lineno=1489, col_offset=16), lineno=1489, col_offset=16)], [], lineno=1488, col_offset=12)], [If(Call(Name('isinstance', Load(), lineno=1490, col_offset=13), [Name('message', Load(), lineno=1490, col_offset=24), Name('BabylMessage', Load(), lineno=1490, col_offset=33)], [], None, None, lineno=1490, col_offset=13), [Assign([Name('flags', Store(), lineno=1491, col_offset=12)], Call(Name('set', Load(), lineno=1491, col_offset=20), [Call(Attribute(Name('self', Load(), lineno=1491, col_offset=24), 'get_flags', Load(), lineno=1491, col_offset=24), [], [], None, None, lineno=1491, col_offset=24)], [], None, None, lineno=1491, col_offset=20), lineno=1491, col_offset=12), If(Compare(Str('S', lineno=1492, col_offset=15), [NotIn()], [Name('flags', Load(), lineno=1492, col_offset=26)], lineno=1492, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1493, col_offset=16), 'add_label', Load(), lineno=1493, col_offset=16), [Str('unseen', lineno=1493, col_offset=34)], [], None, None, lineno=1493, col_offset=16), lineno=1493, col_offset=16)], [], lineno=1492, col_offset=12), If(Compare(Str('T', lineno=1494, col_offset=15), [In()], [Name('flags', Load(), lineno=1494, col_offset=22)], lineno=1494, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1495, col_offset=16), 'add_label', Load(), lineno=1495, col_offset=16), [Str('deleted', lineno=1495, col_offset=34)], [], None, None, lineno=1495, col_offset=16), lineno=1495, col_offset=16)], [], lineno=1494, col_offset=12), If(Compare(Str('R', lineno=1496, col_offset=15), [In()], [Name('flags', Load(), lineno=1496, col_offset=22)], lineno=1496, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1497, col_offset=16), 'add_label', Load(), lineno=1497, col_offset=16), [Str('answered', lineno=1497, col_offset=34)], [], None, None, lineno=1497, col_offset=16), lineno=1497, col_offset=16)], [], lineno=1496, col_offset=12), If(Compare(Str('P', lineno=1498, col_offset=15), [In()], [Name('flags', Load(), lineno=1498, col_offset=22)], lineno=1498, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1499, col_offset=16), 'add_label', Load(), lineno=1499, col_offset=16), [Str('forwarded', lineno=1499, col_offset=34)], [], None, None, lineno=1499, col_offset=16), lineno=1499, col_offset=16)], [], lineno=1498, col_offset=12)], [If(Call(Name('isinstance', Load(), lineno=1500, col_offset=13), [Name('message', Load(), lineno=1500, col_offset=24), Name('Message', Load(), lineno=1500, col_offset=33)], [], None, None, lineno=1500, col_offset=13), [Pass( lineno=1501, col_offset=12)], [Raise(Call(Name('TypeError', Load(), lineno=1503, col_offset=18), [BinOp(Str('Cannot convert to specified type: %s', lineno=1503, col_offset=28), Mod(), Call(Name('type', Load(), lineno=1504, col_offset=28), [Name('message', Load(), lineno=1504, col_offset=33)], [], None, None, lineno=1504, col_offset=28), lineno=1503, col_offset=28)], [], None, None, lineno=1503, col_offset=18), None, None, lineno=1503, col_offset=12)], lineno=1500, col_offset=13)], lineno=1490, col_offset=13)], lineno=1482, col_offset=13)], lineno=1469, col_offset=13)], lineno=1465, col_offset=8)], [], lineno=1463, col_offset=4)], [], lineno=1400, col_offset=0), ClassDef('_mboxMMDFMessage', [Name('Message', Load(), lineno=1507, col_offset=23)], [Expr(Str('Message with mbox- or MMDF-specific properties.', lineno=1508, col_offset=4), lineno=1508, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=1510, col_offset=17), Name('message', Param(), lineno=1510, col_offset=23)], None, None, [Name('None', Load(), lineno=1510, col_offset=31)]), [Expr(Str('Initialize an mboxMMDFMessage instance.', lineno=1511, col_offset=8), lineno=1511, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1512, col_offset=8), 'set_from', Load(), lineno=1512, col_offset=8), [Str('MAILER-DAEMON', lineno=1512, col_offset=22), Name('True', Load(), lineno=1512, col_offset=39)], [], None, None, lineno=1512, col_offset=8), lineno=1512, col_offset=8), If(Call(Name('isinstance', Load(), lineno=1513, col_offset=11), [Name('message', Load(), lineno=1513, col_offset=22), Attribute(Attribute(Name('email', Load(), lineno=1513, col_offset=31), 'message', Load(), lineno=1513, col_offset=31), 'Message', Load(), lineno=1513, col_offset=31)], [], None, None, lineno=1513, col_offset=11), [Assign([Name('unixfrom', Store(), lineno=1514, col_offset=12)], Call(Attribute(Name('message', Load(), lineno=1514, col_offset=23), 'get_unixfrom', Load(), lineno=1514, col_offset=23), [], [], None, None, lineno=1514, col_offset=23), lineno=1514, col_offset=12), If(BoolOp(And(), [Compare(Name('unixfrom', Load(), lineno=1515, col_offset=15), [IsNot()], [Name('None', Load(), lineno=1515, col_offset=31)], lineno=1515, col_offset=15), Call(Attribute(Name('unixfrom', Load(), lineno=1515, col_offset=40), 'startswith', Load(), lineno=1515, col_offset=40), [Str('From ', lineno=1515, col_offset=60)], [], None, None, lineno=1515, col_offset=40)], lineno=1515, col_offset=15), [Expr(Call(Attribute(Name('self', Load(), lineno=1516, col_offset=16), 'set_from', Load(), lineno=1516, col_offset=16), [Subscript(Name('unixfrom', Load(), lineno=1516, col_offset=30), Slice(Num(5, lineno=1516, col_offset=39), None, None), Load(), lineno=1516, col_offset=30)], [], None, None, lineno=1516, col_offset=16), lineno=1516, col_offset=16)], [], lineno=1515, col_offset=12)], [], lineno=1513, col_offset=8), Expr(Call(Attribute(Name('Message', Load(), lineno=1517, col_offset=8), '__init__', Load(), lineno=1517, col_offset=8), [Name('self', Load(), lineno=1517, col_offset=25), Name('message', Load(), lineno=1517, col_offset=31)], [], None, None, lineno=1517, col_offset=8), lineno=1517, col_offset=8)], [], lineno=1510, col_offset=4), FunctionDef('get_from', arguments([Name('self', Param(), lineno=1519, col_offset=17)], None, None, []), [Expr(Str('Return contents of "From " line.', lineno=1520, col_offset=8), lineno=1520, col_offset=8), Return(Attribute(Name('self', Load(), lineno=1521, col_offset=15), '_from', Load(), lineno=1521, col_offset=15), lineno=1521, col_offset=8)], [], lineno=1519, col_offset=4), FunctionDef('set_from', arguments([Name('self', Param(), lineno=1523, col_offset=17), Name('from_', Param(), lineno=1523, col_offset=23), Name('time_', Param(), lineno=1523, col_offset=30)], None, None, [Name('None', Load(), lineno=1523, col_offset=36)]), [Expr(Str('Set "From " line, formatting and appending time_ if specified.', lineno=1524, col_offset=8), lineno=1524, col_offset=8), If(Compare(Name('time_', Load(), lineno=1525, col_offset=11), [IsNot()], [Name('None', Load(), lineno=1525, col_offset=24)], lineno=1525, col_offset=11), [If(Compare(Name('time_', Load(), lineno=1526, col_offset=15), [Is()], [Name('True', Load(), lineno=1526, col_offset=24)], lineno=1526, col_offset=15), [Assign([Name('time_', Store(), lineno=1527, col_offset=16)], Call(Attribute(Name('time', Load(), lineno=1527, col_offset=24), 'gmtime', Load(), lineno=1527, col_offset=24), [], [], None, None, lineno=1527, col_offset=24), lineno=1527, col_offset=16)], [], lineno=1526, col_offset=12), AugAssign(Name('from_', Store(), lineno=1528, col_offset=12), Add(), BinOp(Str(' ', lineno=1528, col_offset=21), Add(), Call(Attribute(Name('time', Load(), lineno=1528, col_offset=27), 'asctime', Load(), lineno=1528, col_offset=27), [Name('time_', Load(), lineno=1528, col_offset=40)], [], None, None, lineno=1528, col_offset=27), lineno=1528, col_offset=21), lineno=1528, col_offset=12)], [], lineno=1525, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1529, col_offset=8), '_from', Store(), lineno=1529, col_offset=8)], Name('from_', Load(), lineno=1529, col_offset=21), lineno=1529, col_offset=8)], [], lineno=1523, col_offset=4), FunctionDef('get_flags', arguments([Name('self', Param(), lineno=1531, col_offset=18)], None, None, []), [Expr(Str('Return as a string the flags that are set.', lineno=1532, col_offset=8), lineno=1532, col_offset=8), Return(BinOp(Call(Attribute(Name('self', Load(), lineno=1533, col_offset=15), 'get', Load(), lineno=1533, col_offset=15), [Str('Status', lineno=1533, col_offset=24), Str('', lineno=1533, col_offset=34)], [], None, None, lineno=1533, col_offset=15), Add(), Call(Attribute(Name('self', Load(), lineno=1533, col_offset=40), 'get', Load(), lineno=1533, col_offset=40), [Str('X-Status', lineno=1533, col_offset=49), Str('', lineno=1533, col_offset=61)], [], None, None, lineno=1533, col_offset=40), lineno=1533, col_offset=15), lineno=1533, col_offset=8)], [], lineno=1531, col_offset=4), FunctionDef('set_flags', arguments([Name('self', Param(), lineno=1535, col_offset=18), Name('flags', Param(), lineno=1535, col_offset=24)], None, None, []), [Expr(Str('Set the given flags and unset all others.', lineno=1536, col_offset=8), lineno=1536, col_offset=8), Assign([Name('flags', Store(), lineno=1537, col_offset=8)], Call(Name('set', Load(), lineno=1537, col_offset=16), [Name('flags', Load(), lineno=1537, col_offset=20)], [], None, None, lineno=1537, col_offset=16), lineno=1537, col_offset=8), Assign([Tuple([Name('status_flags', Store(), lineno=1538, col_offset=8), Name('xstatus_flags', Store(), lineno=1538, col_offset=22)], Store(), lineno=1538, col_offset=8)], Tuple([Str('', lineno=1538, col_offset=38), Str('', lineno=1538, col_offset=42)], Load(), lineno=1538, col_offset=38), lineno=1538, col_offset=8), For(Name('flag', Store(), lineno=1539, col_offset=12), Tuple([Str('R', lineno=1539, col_offset=21), Str('O', lineno=1539, col_offset=26)], Load(), lineno=1539, col_offset=21), [If(Compare(Name('flag', Load(), lineno=1540, col_offset=15), [In()], [Name('flags', Load(), lineno=1540, col_offset=23)], lineno=1540, col_offset=15), [AugAssign(Name('status_flags', Store(), lineno=1541, col_offset=16), Add(), Name('flag', Load(), lineno=1541, col_offset=32), lineno=1541, col_offset=16), Expr(Call(Attribute(Name('flags', Load(), lineno=1542, col_offset=16), 'remove', Load(), lineno=1542, col_offset=16), [Name('flag', Load(), lineno=1542, col_offset=29)], [], None, None, lineno=1542, col_offset=16), lineno=1542, col_offset=16)], [], lineno=1540, col_offset=12)], [], lineno=1539, col_offset=8), For(Name('flag', Store(), lineno=1543, col_offset=12), Tuple([Str('D', lineno=1543, col_offset=21), Str('F', lineno=1543, col_offset=26), Str('A', lineno=1543, col_offset=31)], Load(), lineno=1543, col_offset=21), [If(Compare(Name('flag', Load(), lineno=1544, col_offset=15), [In()], [Name('flags', Load(), lineno=1544, col_offset=23)], lineno=1544, col_offset=15), [AugAssign(Name('xstatus_flags', Store(), lineno=1545, col_offset=16), Add(), Name('flag', Load(), lineno=1545, col_offset=33), lineno=1545, col_offset=16), Expr(Call(Attribute(Name('flags', Load(), lineno=1546, col_offset=16), 'remove', Load(), lineno=1546, col_offset=16), [Name('flag', Load(), lineno=1546, col_offset=29)], [], None, None, lineno=1546, col_offset=16), lineno=1546, col_offset=16)], [], lineno=1544, col_offset=12)], [], lineno=1543, col_offset=8), AugAssign(Name('xstatus_flags', Store(), lineno=1547, col_offset=8), Add(), Call(Attribute(Str('', lineno=1547, col_offset=25), 'join', Load(), lineno=1547, col_offset=25), [Call(Name('sorted', Load(), lineno=1547, col_offset=33), [Name('flags', Load(), lineno=1547, col_offset=40)], [], None, None, lineno=1547, col_offset=33)], [], None, None, lineno=1547, col_offset=25), lineno=1547, col_offset=8), TryExcept([Expr(Call(Attribute(Name('self', Load(), lineno=1549, col_offset=12), 'replace_header', Load(), lineno=1549, col_offset=12), [Str('Status', lineno=1549, col_offset=32), Name('status_flags', Load(), lineno=1549, col_offset=42)], [], None, None, lineno=1549, col_offset=12), lineno=1549, col_offset=12)], [ExceptHandler(Name('KeyError', Load(), lineno=1550, col_offset=15), None, [Expr(Call(Attribute(Name('self', Load(), lineno=1551, col_offset=12), 'add_header', Load(), lineno=1551, col_offset=12), [Str('Status', lineno=1551, col_offset=28), Name('status_flags', Load(), lineno=1551, col_offset=38)], [], None, None, lineno=1551, col_offset=12), lineno=1551, col_offset=12)], lineno=1550, col_offset=8)], [], lineno=1548, col_offset=8), TryExcept([Expr(Call(Attribute(Name('self', Load(), lineno=1553, col_offset=12), 'replace_header', Load(), lineno=1553, col_offset=12), [Str('X-Status', lineno=1553, col_offset=32), Name('xstatus_flags', Load(), lineno=1553, col_offset=44)], [], None, None, lineno=1553, col_offset=12), lineno=1553, col_offset=12)], [ExceptHandler(Name('KeyError', Load(), lineno=1554, col_offset=15), None, [Expr(Call(Attribute(Name('self', Load(), lineno=1555, col_offset=12), 'add_header', Load(), lineno=1555, col_offset=12), [Str('X-Status', lineno=1555, col_offset=28), Name('xstatus_flags', Load(), lineno=1555, col_offset=40)], [], None, None, lineno=1555, col_offset=12), lineno=1555, col_offset=12)], lineno=1554, col_offset=8)], [], lineno=1552, col_offset=8)], [], lineno=1535, col_offset=4), FunctionDef('add_flag', arguments([Name('self', Param(), lineno=1557, col_offset=17), Name('flag', Param(), lineno=1557, col_offset=23)], None, None, []), [Expr(Str('Set the given flag(s) without changing others.', lineno=1558, col_offset=8), lineno=1558, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1559, col_offset=8), 'set_flags', Load(), lineno=1559, col_offset=8), [Call(Attribute(Str('', lineno=1559, col_offset=23), 'join', Load(), lineno=1559, col_offset=23), [BinOp(Call(Name('set', Load(), lineno=1559, col_offset=31), [Call(Attribute(Name('self', Load(), lineno=1559, col_offset=35), 'get_flags', Load(), lineno=1559, col_offset=35), [], [], None, None, lineno=1559, col_offset=35)], [], None, None, lineno=1559, col_offset=31), BitOr(), Call(Name('set', Load(), lineno=1559, col_offset=55), [Name('flag', Load(), lineno=1559, col_offset=59)], [], None, None, lineno=1559, col_offset=55), lineno=1559, col_offset=31)], [], None, None, lineno=1559, col_offset=23)], [], None, None, lineno=1559, col_offset=8), lineno=1559, col_offset=8)], [], lineno=1557, col_offset=4), FunctionDef('remove_flag', arguments([Name('self', Param(), lineno=1561, col_offset=20), Name('flag', Param(), lineno=1561, col_offset=26)], None, None, []), [Expr(Str('Unset the given string flag(s) without changing others.', lineno=1562, col_offset=8), lineno=1562, col_offset=8), If(BoolOp(Or(), [Compare(Str('Status', lineno=1563, col_offset=11), [In()], [Name('self', Load(), lineno=1563, col_offset=23)], lineno=1563, col_offset=11), Compare(Str('X-Status', lineno=1563, col_offset=31), [In()], [Name('self', Load(), lineno=1563, col_offset=45)], lineno=1563, col_offset=31)], lineno=1563, col_offset=11), [Expr(Call(Attribute(Name('self', Load(), lineno=1564, col_offset=12), 'set_flags', Load(), lineno=1564, col_offset=12), [Call(Attribute(Str('', lineno=1564, col_offset=27), 'join', Load(), lineno=1564, col_offset=27), [BinOp(Call(Name('set', Load(), lineno=1564, col_offset=35), [Call(Attribute(Name('self', Load(), lineno=1564, col_offset=39), 'get_flags', Load(), lineno=1564, col_offset=39), [], [], None, None, lineno=1564, col_offset=39)], [], None, None, lineno=1564, col_offset=35), Sub(), Call(Name('set', Load(), lineno=1564, col_offset=59), [Name('flag', Load(), lineno=1564, col_offset=63)], [], None, None, lineno=1564, col_offset=59), lineno=1564, col_offset=35)], [], None, None, lineno=1564, col_offset=27)], [], None, None, lineno=1564, col_offset=12), lineno=1564, col_offset=12)], [], lineno=1563, col_offset=8)], [], lineno=1561, col_offset=4), FunctionDef('_explain_to', arguments([Name('self', Param(), lineno=1566, col_offset=20), Name('message', Param(), lineno=1566, col_offset=26)], None, None, []), [Expr(Str('Copy mbox- or MMDF-specific state to message insofar as possible.', lineno=1567, col_offset=8), lineno=1567, col_offset=8), If(Call(Name('isinstance', Load(), lineno=1568, col_offset=11), [Name('message', Load(), lineno=1568, col_offset=22), Name('MaildirMessage', Load(), lineno=1568, col_offset=31)], [], None, None, lineno=1568, col_offset=11), [Assign([Name('flags', Store(), lineno=1569, col_offset=12)], Call(Name('set', Load(), lineno=1569, col_offset=20), [Call(Attribute(Name('self', Load(), lineno=1569, col_offset=24), 'get_flags', Load(), lineno=1569, col_offset=24), [], [], None, None, lineno=1569, col_offset=24)], [], None, None, lineno=1569, col_offset=20), lineno=1569, col_offset=12), If(Compare(Str('O', lineno=1570, col_offset=15), [In()], [Name('flags', Load(), lineno=1570, col_offset=22)], lineno=1570, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1571, col_offset=16), 'set_subdir', Load(), lineno=1571, col_offset=16), [Str('cur', lineno=1571, col_offset=35)], [], None, None, lineno=1571, col_offset=16), lineno=1571, col_offset=16)], [], lineno=1570, col_offset=12), If(Compare(Str('F', lineno=1572, col_offset=15), [In()], [Name('flags', Load(), lineno=1572, col_offset=22)], lineno=1572, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1573, col_offset=16), 'add_flag', Load(), lineno=1573, col_offset=16), [Str('F', lineno=1573, col_offset=33)], [], None, None, lineno=1573, col_offset=16), lineno=1573, col_offset=16)], [], lineno=1572, col_offset=12), If(Compare(Str('A', lineno=1574, col_offset=15), [In()], [Name('flags', Load(), lineno=1574, col_offset=22)], lineno=1574, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1575, col_offset=16), 'add_flag', Load(), lineno=1575, col_offset=16), [Str('R', lineno=1575, col_offset=33)], [], None, None, lineno=1575, col_offset=16), lineno=1575, col_offset=16)], [], lineno=1574, col_offset=12), If(Compare(Str('R', lineno=1576, col_offset=15), [In()], [Name('flags', Load(), lineno=1576, col_offset=22)], lineno=1576, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1577, col_offset=16), 'add_flag', Load(), lineno=1577, col_offset=16), [Str('S', lineno=1577, col_offset=33)], [], None, None, lineno=1577, col_offset=16), lineno=1577, col_offset=16)], [], lineno=1576, col_offset=12), If(Compare(Str('D', lineno=1578, col_offset=15), [In()], [Name('flags', Load(), lineno=1578, col_offset=22)], lineno=1578, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1579, col_offset=16), 'add_flag', Load(), lineno=1579, col_offset=16), [Str('T', lineno=1579, col_offset=33)], [], None, None, lineno=1579, col_offset=16), lineno=1579, col_offset=16)], [], lineno=1578, col_offset=12), Delete([Subscript(Name('message', Load(), lineno=1580, col_offset=16), Index(Str('status', lineno=1580, col_offset=24)), Del(), lineno=1580, col_offset=16)], lineno=1580, col_offset=12), Delete([Subscript(Name('message', Load(), lineno=1581, col_offset=16), Index(Str('x-status', lineno=1581, col_offset=24)), Del(), lineno=1581, col_offset=16)], lineno=1581, col_offset=12), Assign([Name('maybe_date', Store(), lineno=1582, col_offset=12)], Call(Attribute(Str(' ', lineno=1582, col_offset=25), 'join', Load(), lineno=1582, col_offset=25), [Subscript(Call(Attribute(Call(Attribute(Name('self', Load(), lineno=1582, col_offset=34), 'get_from', Load(), lineno=1582, col_offset=34), [], [], None, None, lineno=1582, col_offset=34), 'split', Load(), lineno=1582, col_offset=34), [], [], None, None, lineno=1582, col_offset=34), Slice(Num(-5, lineno=1582, col_offset=59), None, None), Load(), lineno=1582, col_offset=34)], [], None, None, lineno=1582, col_offset=25), lineno=1582, col_offset=12), TryExcept([Expr(Call(Attribute(Name('message', Load(), lineno=1584, col_offset=16), 'set_date', Load(), lineno=1584, col_offset=16), [Call(Attribute(Name('calendar', Load(), lineno=1584, col_offset=33), 'timegm', Load(), lineno=1584, col_offset=33), [Call(Attribute(Name('time', Load(), lineno=1584, col_offset=49), 'strptime', Load(), lineno=1584, col_offset=49), [Name('maybe_date', Load(), lineno=1584, col_offset=63), Str('%a %b %d %H:%M:%S %Y', lineno=1585, col_offset=54)], [], None, None, lineno=1584, col_offset=49)], [], None, None, lineno=1584, col_offset=33)], [], None, None, lineno=1584, col_offset=16), lineno=1584, col_offset=16)], [ExceptHandler(Tuple([Name('ValueError', Load(), lineno=1586, col_offset=20), Name('OverflowError', Load(), lineno=1586, col_offset=32)], Load(), lineno=1586, col_offset=20), None, [Pass( lineno=1587, col_offset=16)], lineno=1586, col_offset=12)], [], lineno=1583, col_offset=12)], [If(Call(Name('isinstance', Load(), lineno=1588, col_offset=13), [Name('message', Load(), lineno=1588, col_offset=24), Name('_mboxMMDFMessage', Load(), lineno=1588, col_offset=33)], [], None, None, lineno=1588, col_offset=13), [Expr(Call(Attribute(Name('message', Load(), lineno=1589, col_offset=12), 'set_flags', Load(), lineno=1589, col_offset=12), [Call(Attribute(Name('self', Load(), lineno=1589, col_offset=30), 'get_flags', Load(), lineno=1589, col_offset=30), [], [], None, None, lineno=1589, col_offset=30)], [], None, None, lineno=1589, col_offset=12), lineno=1589, col_offset=12), Expr(Call(Attribute(Name('message', Load(), lineno=1590, col_offset=12), 'set_from', Load(), lineno=1590, col_offset=12), [Call(Attribute(Name('self', Load(), lineno=1590, col_offset=29), 'get_from', Load(), lineno=1590, col_offset=29), [], [], None, None, lineno=1590, col_offset=29)], [], None, None, lineno=1590, col_offset=12), lineno=1590, col_offset=12)], [If(Call(Name('isinstance', Load(), lineno=1591, col_offset=13), [Name('message', Load(), lineno=1591, col_offset=24), Name('MHMessage', Load(), lineno=1591, col_offset=33)], [], None, None, lineno=1591, col_offset=13), [Assign([Name('flags', Store(), lineno=1592, col_offset=12)], Call(Name('set', Load(), lineno=1592, col_offset=20), [Call(Attribute(Name('self', Load(), lineno=1592, col_offset=24), 'get_flags', Load(), lineno=1592, col_offset=24), [], [], None, None, lineno=1592, col_offset=24)], [], None, None, lineno=1592, col_offset=20), lineno=1592, col_offset=12), If(Compare(Str('R', lineno=1593, col_offset=15), [NotIn()], [Name('flags', Load(), lineno=1593, col_offset=26)], lineno=1593, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1594, col_offset=16), 'add_sequence', Load(), lineno=1594, col_offset=16), [Str('unseen', lineno=1594, col_offset=37)], [], None, None, lineno=1594, col_offset=16), lineno=1594, col_offset=16)], [], lineno=1593, col_offset=12), If(Compare(Str('A', lineno=1595, col_offset=15), [In()], [Name('flags', Load(), lineno=1595, col_offset=22)], lineno=1595, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1596, col_offset=16), 'add_sequence', Load(), lineno=1596, col_offset=16), [Str('replied', lineno=1596, col_offset=37)], [], None, None, lineno=1596, col_offset=16), lineno=1596, col_offset=16)], [], lineno=1595, col_offset=12), If(Compare(Str('F', lineno=1597, col_offset=15), [In()], [Name('flags', Load(), lineno=1597, col_offset=22)], lineno=1597, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1598, col_offset=16), 'add_sequence', Load(), lineno=1598, col_offset=16), [Str('flagged', lineno=1598, col_offset=37)], [], None, None, lineno=1598, col_offset=16), lineno=1598, col_offset=16)], [], lineno=1597, col_offset=12), Delete([Subscript(Name('message', Load(), lineno=1599, col_offset=16), Index(Str('status', lineno=1599, col_offset=24)), Del(), lineno=1599, col_offset=16)], lineno=1599, col_offset=12), Delete([Subscript(Name('message', Load(), lineno=1600, col_offset=16), Index(Str('x-status', lineno=1600, col_offset=24)), Del(), lineno=1600, col_offset=16)], lineno=1600, col_offset=12)], [If(Call(Name('isinstance', Load(), lineno=1601, col_offset=13), [Name('message', Load(), lineno=1601, col_offset=24), Name('BabylMessage', Load(), lineno=1601, col_offset=33)], [], None, None, lineno=1601, col_offset=13), [Assign([Name('flags', Store(), lineno=1602, col_offset=12)], Call(Name('set', Load(), lineno=1602, col_offset=20), [Call(Attribute(Name('self', Load(), lineno=1602, col_offset=24), 'get_flags', Load(), lineno=1602, col_offset=24), [], [], None, None, lineno=1602, col_offset=24)], [], None, None, lineno=1602, col_offset=20), lineno=1602, col_offset=12), If(Compare(Str('R', lineno=1603, col_offset=15), [NotIn()], [Name('flags', Load(), lineno=1603, col_offset=26)], lineno=1603, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1604, col_offset=16), 'add_label', Load(), lineno=1604, col_offset=16), [Str('unseen', lineno=1604, col_offset=34)], [], None, None, lineno=1604, col_offset=16), lineno=1604, col_offset=16)], [], lineno=1603, col_offset=12), If(Compare(Str('D', lineno=1605, col_offset=15), [In()], [Name('flags', Load(), lineno=1605, col_offset=22)], lineno=1605, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1606, col_offset=16), 'add_label', Load(), lineno=1606, col_offset=16), [Str('deleted', lineno=1606, col_offset=34)], [], None, None, lineno=1606, col_offset=16), lineno=1606, col_offset=16)], [], lineno=1605, col_offset=12), If(Compare(Str('A', lineno=1607, col_offset=15), [In()], [Name('flags', Load(), lineno=1607, col_offset=22)], lineno=1607, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1608, col_offset=16), 'add_label', Load(), lineno=1608, col_offset=16), [Str('answered', lineno=1608, col_offset=34)], [], None, None, lineno=1608, col_offset=16), lineno=1608, col_offset=16)], [], lineno=1607, col_offset=12), Delete([Subscript(Name('message', Load(), lineno=1609, col_offset=16), Index(Str('status', lineno=1609, col_offset=24)), Del(), lineno=1609, col_offset=16)], lineno=1609, col_offset=12), Delete([Subscript(Name('message', Load(), lineno=1610, col_offset=16), Index(Str('x-status', lineno=1610, col_offset=24)), Del(), lineno=1610, col_offset=16)], lineno=1610, col_offset=12)], [If(Call(Name('isinstance', Load(), lineno=1611, col_offset=13), [Name('message', Load(), lineno=1611, col_offset=24), Name('Message', Load(), lineno=1611, col_offset=33)], [], None, None, lineno=1611, col_offset=13), [Pass( lineno=1612, col_offset=12)], [Raise(Call(Name('TypeError', Load(), lineno=1614, col_offset=18), [BinOp(Str('Cannot convert to specified type: %s', lineno=1614, col_offset=28), Mod(), Call(Name('type', Load(), lineno=1615, col_offset=28), [Name('message', Load(), lineno=1615, col_offset=33)], [], None, None, lineno=1615, col_offset=28), lineno=1614, col_offset=28)], [], None, None, lineno=1614, col_offset=18), None, None, lineno=1614, col_offset=12)], lineno=1611, col_offset=13)], lineno=1601, col_offset=13)], lineno=1591, col_offset=13)], lineno=1588, col_offset=13)], lineno=1568, col_offset=8)], [], lineno=1566, col_offset=4)], [], lineno=1507, col_offset=0), ClassDef('mboxMessage', [Name('_mboxMMDFMessage', Load(), lineno=1618, col_offset=18)], [Expr(Str('Message with mbox-specific properties.', lineno=1619, col_offset=4), lineno=1619, col_offset=4)], [], lineno=1618, col_offset=0), ClassDef('MHMessage', [Name('Message', Load(), lineno=1622, col_offset=16)], [Expr(Str('Message with MH-specific properties.', lineno=1623, col_offset=4), lineno=1623, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=1625, col_offset=17), Name('message', Param(), lineno=1625, col_offset=23)], None, None, [Name('None', Load(), lineno=1625, col_offset=31)]), [Expr(Str('Initialize an MHMessage instance.', lineno=1626, col_offset=8), lineno=1626, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1627, col_offset=8), '_sequences', Store(), lineno=1627, col_offset=8)], List([], Load(), lineno=1627, col_offset=26), lineno=1627, col_offset=8), Expr(Call(Attribute(Name('Message', Load(), lineno=1628, col_offset=8), '__init__', Load(), lineno=1628, col_offset=8), [Name('self', Load(), lineno=1628, col_offset=25), Name('message', Load(), lineno=1628, col_offset=31)], [], None, None, lineno=1628, col_offset=8), lineno=1628, col_offset=8)], [], lineno=1625, col_offset=4), FunctionDef('get_sequences', arguments([Name('self', Param(), lineno=1630, col_offset=22)], None, None, []), [Expr(Str('Return a list of sequences that include the message.', lineno=1631, col_offset=8), lineno=1631, col_offset=8), Return(Subscript(Attribute(Name('self', Load(), lineno=1632, col_offset=15), '_sequences', Load(), lineno=1632, col_offset=15), Slice(None, None, None), Load(), lineno=1632, col_offset=15), lineno=1632, col_offset=8)], [], lineno=1630, col_offset=4), FunctionDef('set_sequences', arguments([Name('self', Param(), lineno=1634, col_offset=22), Name('sequences', Param(), lineno=1634, col_offset=28)], None, None, []), [Expr(Str('Set the list of sequences that include the message.', lineno=1635, col_offset=8), lineno=1635, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1636, col_offset=8), '_sequences', Store(), lineno=1636, col_offset=8)], Call(Name('list', Load(), lineno=1636, col_offset=26), [Name('sequences', Load(), lineno=1636, col_offset=31)], [], None, None, lineno=1636, col_offset=26), lineno=1636, col_offset=8)], [], lineno=1634, col_offset=4), FunctionDef('add_sequence', arguments([Name('self', Param(), lineno=1638, col_offset=21), Name('sequence', Param(), lineno=1638, col_offset=27)], None, None, []), [Expr(Str('Add sequence to list of sequences including the message.', lineno=1639, col_offset=8), lineno=1639, col_offset=8), If(Call(Name('isinstance', Load(), lineno=1640, col_offset=11), [Name('sequence', Load(), lineno=1640, col_offset=22), Name('str', Load(), lineno=1640, col_offset=32)], [], None, None, lineno=1640, col_offset=11), [If(UnaryOp(Not(), Compare(Name('sequence', Load(), lineno=1641, col_offset=19), [In()], [Attribute(Name('self', Load(), lineno=1641, col_offset=31), '_sequences', Load(), lineno=1641, col_offset=31)], lineno=1641, col_offset=19), lineno=1641, col_offset=15), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1642, col_offset=16), '_sequences', Load(), lineno=1642, col_offset=16), 'append', Load(), lineno=1642, col_offset=16), [Name('sequence', Load(), lineno=1642, col_offset=39)], [], None, None, lineno=1642, col_offset=16), lineno=1642, col_offset=16)], [], lineno=1641, col_offset=12)], [Raise(Call(Name('TypeError', Load(), lineno=1644, col_offset=18), [BinOp(Str('sequence must be a string: %s', lineno=1644, col_offset=28), Mod(), Call(Name('type', Load(), lineno=1644, col_offset=62), [Name('sequence', Load(), lineno=1644, col_offset=67)], [], None, None, lineno=1644, col_offset=62), lineno=1644, col_offset=28)], [], None, None, lineno=1644, col_offset=18), None, None, lineno=1644, col_offset=12)], lineno=1640, col_offset=8)], [], lineno=1638, col_offset=4), FunctionDef('remove_sequence', arguments([Name('self', Param(), lineno=1646, col_offset=24), Name('sequence', Param(), lineno=1646, col_offset=30)], None, None, []), [Expr(Str('Remove sequence from the list of sequences including the message.', lineno=1647, col_offset=8), lineno=1647, col_offset=8), TryExcept([Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1649, col_offset=12), '_sequences', Load(), lineno=1649, col_offset=12), 'remove', Load(), lineno=1649, col_offset=12), [Name('sequence', Load(), lineno=1649, col_offset=35)], [], None, None, lineno=1649, col_offset=12), lineno=1649, col_offset=12)], [ExceptHandler(Name('ValueError', Load(), lineno=1650, col_offset=15), None, [Pass( lineno=1651, col_offset=12)], lineno=1650, col_offset=8)], [], lineno=1648, col_offset=8)], [], lineno=1646, col_offset=4), FunctionDef('_explain_to', arguments([Name('self', Param(), lineno=1653, col_offset=20), Name('message', Param(), lineno=1653, col_offset=26)], None, None, []), [Expr(Str('Copy MH-specific state to message insofar as possible.', lineno=1654, col_offset=8), lineno=1654, col_offset=8), If(Call(Name('isinstance', Load(), lineno=1655, col_offset=11), [Name('message', Load(), lineno=1655, col_offset=22), Name('MaildirMessage', Load(), lineno=1655, col_offset=31)], [], None, None, lineno=1655, col_offset=11), [Assign([Name('sequences', Store(), lineno=1656, col_offset=12)], Call(Name('set', Load(), lineno=1656, col_offset=24), [Call(Attribute(Name('self', Load(), lineno=1656, col_offset=28), 'get_sequences', Load(), lineno=1656, col_offset=28), [], [], None, None, lineno=1656, col_offset=28)], [], None, None, lineno=1656, col_offset=24), lineno=1656, col_offset=12), If(Compare(Str('unseen', lineno=1657, col_offset=15), [In()], [Name('sequences', Load(), lineno=1657, col_offset=27)], lineno=1657, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1658, col_offset=16), 'set_subdir', Load(), lineno=1658, col_offset=16), [Str('cur', lineno=1658, col_offset=35)], [], None, None, lineno=1658, col_offset=16), lineno=1658, col_offset=16)], [Expr(Call(Attribute(Name('message', Load(), lineno=1660, col_offset=16), 'set_subdir', Load(), lineno=1660, col_offset=16), [Str('cur', lineno=1660, col_offset=35)], [], None, None, lineno=1660, col_offset=16), lineno=1660, col_offset=16), Expr(Call(Attribute(Name('message', Load(), lineno=1661, col_offset=16), 'add_flag', Load(), lineno=1661, col_offset=16), [Str('S', lineno=1661, col_offset=33)], [], None, None, lineno=1661, col_offset=16), lineno=1661, col_offset=16)], lineno=1657, col_offset=12), If(Compare(Str('flagged', lineno=1662, col_offset=15), [In()], [Name('sequences', Load(), lineno=1662, col_offset=28)], lineno=1662, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1663, col_offset=16), 'add_flag', Load(), lineno=1663, col_offset=16), [Str('F', lineno=1663, col_offset=33)], [], None, None, lineno=1663, col_offset=16), lineno=1663, col_offset=16)], [], lineno=1662, col_offset=12), If(Compare(Str('replied', lineno=1664, col_offset=15), [In()], [Name('sequences', Load(), lineno=1664, col_offset=28)], lineno=1664, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1665, col_offset=16), 'add_flag', Load(), lineno=1665, col_offset=16), [Str('R', lineno=1665, col_offset=33)], [], None, None, lineno=1665, col_offset=16), lineno=1665, col_offset=16)], [], lineno=1664, col_offset=12)], [If(Call(Name('isinstance', Load(), lineno=1666, col_offset=13), [Name('message', Load(), lineno=1666, col_offset=24), Name('_mboxMMDFMessage', Load(), lineno=1666, col_offset=33)], [], None, None, lineno=1666, col_offset=13), [Assign([Name('sequences', Store(), lineno=1667, col_offset=12)], Call(Name('set', Load(), lineno=1667, col_offset=24), [Call(Attribute(Name('self', Load(), lineno=1667, col_offset=28), 'get_sequences', Load(), lineno=1667, col_offset=28), [], [], None, None, lineno=1667, col_offset=28)], [], None, None, lineno=1667, col_offset=24), lineno=1667, col_offset=12), If(Compare(Str('unseen', lineno=1668, col_offset=15), [NotIn()], [Name('sequences', Load(), lineno=1668, col_offset=31)], lineno=1668, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1669, col_offset=16), 'add_flag', Load(), lineno=1669, col_offset=16), [Str('RO', lineno=1669, col_offset=33)], [], None, None, lineno=1669, col_offset=16), lineno=1669, col_offset=16)], [Expr(Call(Attribute(Name('message', Load(), lineno=1671, col_offset=16), 'add_flag', Load(), lineno=1671, col_offset=16), [Str('O', lineno=1671, col_offset=33)], [], None, None, lineno=1671, col_offset=16), lineno=1671, col_offset=16)], lineno=1668, col_offset=12), If(Compare(Str('flagged', lineno=1672, col_offset=15), [In()], [Name('sequences', Load(), lineno=1672, col_offset=28)], lineno=1672, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1673, col_offset=16), 'add_flag', Load(), lineno=1673, col_offset=16), [Str('F', lineno=1673, col_offset=33)], [], None, None, lineno=1673, col_offset=16), lineno=1673, col_offset=16)], [], lineno=1672, col_offset=12), If(Compare(Str('replied', lineno=1674, col_offset=15), [In()], [Name('sequences', Load(), lineno=1674, col_offset=28)], lineno=1674, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1675, col_offset=16), 'add_flag', Load(), lineno=1675, col_offset=16), [Str('A', lineno=1675, col_offset=33)], [], None, None, lineno=1675, col_offset=16), lineno=1675, col_offset=16)], [], lineno=1674, col_offset=12)], [If(Call(Name('isinstance', Load(), lineno=1676, col_offset=13), [Name('message', Load(), lineno=1676, col_offset=24), Name('MHMessage', Load(), lineno=1676, col_offset=33)], [], None, None, lineno=1676, col_offset=13), [For(Name('sequence', Store(), lineno=1677, col_offset=16), Call(Attribute(Name('self', Load(), lineno=1677, col_offset=28), 'get_sequences', Load(), lineno=1677, col_offset=28), [], [], None, None, lineno=1677, col_offset=28), [Expr(Call(Attribute(Name('message', Load(), lineno=1678, col_offset=16), 'add_sequence', Load(), lineno=1678, col_offset=16), [Name('sequence', Load(), lineno=1678, col_offset=37)], [], None, None, lineno=1678, col_offset=16), lineno=1678, col_offset=16)], [], lineno=1677, col_offset=12)], [If(Call(Name('isinstance', Load(), lineno=1679, col_offset=13), [Name('message', Load(), lineno=1679, col_offset=24), Name('BabylMessage', Load(), lineno=1679, col_offset=33)], [], None, None, lineno=1679, col_offset=13), [Assign([Name('sequences', Store(), lineno=1680, col_offset=12)], Call(Name('set', Load(), lineno=1680, col_offset=24), [Call(Attribute(Name('self', Load(), lineno=1680, col_offset=28), 'get_sequences', Load(), lineno=1680, col_offset=28), [], [], None, None, lineno=1680, col_offset=28)], [], None, None, lineno=1680, col_offset=24), lineno=1680, col_offset=12), If(Compare(Str('unseen', lineno=1681, col_offset=15), [In()], [Name('sequences', Load(), lineno=1681, col_offset=27)], lineno=1681, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1682, col_offset=16), 'add_label', Load(), lineno=1682, col_offset=16), [Str('unseen', lineno=1682, col_offset=34)], [], None, None, lineno=1682, col_offset=16), lineno=1682, col_offset=16)], [], lineno=1681, col_offset=12), If(Compare(Str('replied', lineno=1683, col_offset=15), [In()], [Name('sequences', Load(), lineno=1683, col_offset=28)], lineno=1683, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1684, col_offset=16), 'add_label', Load(), lineno=1684, col_offset=16), [Str('answered', lineno=1684, col_offset=34)], [], None, None, lineno=1684, col_offset=16), lineno=1684, col_offset=16)], [], lineno=1683, col_offset=12)], [If(Call(Name('isinstance', Load(), lineno=1685, col_offset=13), [Name('message', Load(), lineno=1685, col_offset=24), Name('Message', Load(), lineno=1685, col_offset=33)], [], None, None, lineno=1685, col_offset=13), [Pass( lineno=1686, col_offset=12)], [Raise(Call(Name('TypeError', Load(), lineno=1688, col_offset=18), [BinOp(Str('Cannot convert to specified type: %s', lineno=1688, col_offset=28), Mod(), Call(Name('type', Load(), lineno=1689, col_offset=28), [Name('message', Load(), lineno=1689, col_offset=33)], [], None, None, lineno=1689, col_offset=28), lineno=1688, col_offset=28)], [], None, None, lineno=1688, col_offset=18), None, None, lineno=1688, col_offset=12)], lineno=1685, col_offset=13)], lineno=1679, col_offset=13)], lineno=1676, col_offset=13)], lineno=1666, col_offset=13)], lineno=1655, col_offset=8)], [], lineno=1653, col_offset=4)], [], lineno=1622, col_offset=0), ClassDef('BabylMessage', [Name('Message', Load(), lineno=1692, col_offset=19)], [Expr(Str('Message with Babyl-specific properties.', lineno=1693, col_offset=4), lineno=1693, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=1695, col_offset=17), Name('message', Param(), lineno=1695, col_offset=23)], None, None, [Name('None', Load(), lineno=1695, col_offset=31)]), [Expr(Str('Initialize an BabylMessage instance.', lineno=1696, col_offset=8), lineno=1696, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1697, col_offset=8), '_labels', Store(), lineno=1697, col_offset=8)], List([], Load(), lineno=1697, col_offset=23), lineno=1697, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1698, col_offset=8), '_visible', Store(), lineno=1698, col_offset=8)], Call(Name('Message', Load(), lineno=1698, col_offset=24), [], [], None, None, lineno=1698, col_offset=24), lineno=1698, col_offset=8), Expr(Call(Attribute(Name('Message', Load(), lineno=1699, col_offset=8), '__init__', Load(), lineno=1699, col_offset=8), [Name('self', Load(), lineno=1699, col_offset=25), Name('message', Load(), lineno=1699, col_offset=31)], [], None, None, lineno=1699, col_offset=8), lineno=1699, col_offset=8)], [], lineno=1695, col_offset=4), FunctionDef('get_labels', arguments([Name('self', Param(), lineno=1701, col_offset=19)], None, None, []), [Expr(Str('Return a list of labels on the message.', lineno=1702, col_offset=8), lineno=1702, col_offset=8), Return(Subscript(Attribute(Name('self', Load(), lineno=1703, col_offset=15), '_labels', Load(), lineno=1703, col_offset=15), Slice(None, None, None), Load(), lineno=1703, col_offset=15), lineno=1703, col_offset=8)], [], lineno=1701, col_offset=4), FunctionDef('set_labels', arguments([Name('self', Param(), lineno=1705, col_offset=19), Name('labels', Param(), lineno=1705, col_offset=25)], None, None, []), [Expr(Str('Set the list of labels on the message.', lineno=1706, col_offset=8), lineno=1706, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1707, col_offset=8), '_labels', Store(), lineno=1707, col_offset=8)], Call(Name('list', Load(), lineno=1707, col_offset=23), [Name('labels', Load(), lineno=1707, col_offset=28)], [], None, None, lineno=1707, col_offset=23), lineno=1707, col_offset=8)], [], lineno=1705, col_offset=4), FunctionDef('add_label', arguments([Name('self', Param(), lineno=1709, col_offset=18), Name('label', Param(), lineno=1709, col_offset=24)], None, None, []), [Expr(Str('Add label to list of labels on the message.', lineno=1710, col_offset=8), lineno=1710, col_offset=8), If(Call(Name('isinstance', Load(), lineno=1711, col_offset=11), [Name('label', Load(), lineno=1711, col_offset=22), Name('str', Load(), lineno=1711, col_offset=29)], [], None, None, lineno=1711, col_offset=11), [If(Compare(Name('label', Load(), lineno=1712, col_offset=15), [NotIn()], [Attribute(Name('self', Load(), lineno=1712, col_offset=28), '_labels', Load(), lineno=1712, col_offset=28)], lineno=1712, col_offset=15), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1713, col_offset=16), '_labels', Load(), lineno=1713, col_offset=16), 'append', Load(), lineno=1713, col_offset=16), [Name('label', Load(), lineno=1713, col_offset=36)], [], None, None, lineno=1713, col_offset=16), lineno=1713, col_offset=16)], [], lineno=1712, col_offset=12)], [Raise(Call(Name('TypeError', Load(), lineno=1715, col_offset=18), [BinOp(Str('label must be a string: %s', lineno=1715, col_offset=28), Mod(), Call(Name('type', Load(), lineno=1715, col_offset=59), [Name('label', Load(), lineno=1715, col_offset=64)], [], None, None, lineno=1715, col_offset=59), lineno=1715, col_offset=28)], [], None, None, lineno=1715, col_offset=18), None, None, lineno=1715, col_offset=12)], lineno=1711, col_offset=8)], [], lineno=1709, col_offset=4), FunctionDef('remove_label', arguments([Name('self', Param(), lineno=1717, col_offset=21), Name('label', Param(), lineno=1717, col_offset=27)], None, None, []), [Expr(Str('Remove label from the list of labels on the message.', lineno=1718, col_offset=8), lineno=1718, col_offset=8), TryExcept([Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1720, col_offset=12), '_labels', Load(), lineno=1720, col_offset=12), 'remove', Load(), lineno=1720, col_offset=12), [Name('label', Load(), lineno=1720, col_offset=32)], [], None, None, lineno=1720, col_offset=12), lineno=1720, col_offset=12)], [ExceptHandler(Name('ValueError', Load(), lineno=1721, col_offset=15), None, [Pass( lineno=1722, col_offset=12)], lineno=1721, col_offset=8)], [], lineno=1719, col_offset=8)], [], lineno=1717, col_offset=4), FunctionDef('get_visible', arguments([Name('self', Param(), lineno=1724, col_offset=20)], None, None, []), [Expr(Str('Return a Message representation of visible headers.', lineno=1725, col_offset=8), lineno=1725, col_offset=8), Return(Call(Name('Message', Load(), lineno=1726, col_offset=15), [Attribute(Name('self', Load(), lineno=1726, col_offset=23), '_visible', Load(), lineno=1726, col_offset=23)], [], None, None, lineno=1726, col_offset=15), lineno=1726, col_offset=8)], [], lineno=1724, col_offset=4), FunctionDef('set_visible', arguments([Name('self', Param(), lineno=1728, col_offset=20), Name('visible', Param(), lineno=1728, col_offset=26)], None, None, []), [Expr(Str('Set the Message representation of visible headers.', lineno=1729, col_offset=8), lineno=1729, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1730, col_offset=8), '_visible', Store(), lineno=1730, col_offset=8)], Call(Name('Message', Load(), lineno=1730, col_offset=24), [Name('visible', Load(), lineno=1730, col_offset=32)], [], None, None, lineno=1730, col_offset=24), lineno=1730, col_offset=8)], [], lineno=1728, col_offset=4), FunctionDef('update_visible', arguments([Name('self', Param(), lineno=1732, col_offset=23)], None, None, []), [Expr(Str('Update and/or sensibly generate a set of visible headers.', lineno=1733, col_offset=8), lineno=1733, col_offset=8), For(Name('header', Store(), lineno=1734, col_offset=12), Call(Attribute(Attribute(Name('self', Load(), lineno=1734, col_offset=22), '_visible', Load(), lineno=1734, col_offset=22), 'keys', Load(), lineno=1734, col_offset=22), [], [], None, None, lineno=1734, col_offset=22), [If(Compare(Name('header', Load(), lineno=1735, col_offset=15), [In()], [Name('self', Load(), lineno=1735, col_offset=25)], lineno=1735, col_offset=15), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1736, col_offset=16), '_visible', Load(), lineno=1736, col_offset=16), 'replace_header', Load(), lineno=1736, col_offset=16), [Name('header', Load(), lineno=1736, col_offset=45), Subscript(Name('self', Load(), lineno=1736, col_offset=53), Index(Name('header', Load(), lineno=1736, col_offset=58)), Load(), lineno=1736, col_offset=53)], [], None, None, lineno=1736, col_offset=16), lineno=1736, col_offset=16)], [Delete([Subscript(Attribute(Name('self', Load(), lineno=1738, col_offset=20), '_visible', Load(), lineno=1738, col_offset=20), Index(Name('header', Load(), lineno=1738, col_offset=34)), Del(), lineno=1738, col_offset=20)], lineno=1738, col_offset=16)], lineno=1735, col_offset=12)], [], lineno=1734, col_offset=8), For(Name('header', Store(), lineno=1739, col_offset=12), Tuple([Str('Date', lineno=1739, col_offset=23), Str('From', lineno=1739, col_offset=31), Str('Reply-To', lineno=1739, col_offset=39), Str('To', lineno=1739, col_offset=51), Str('CC', lineno=1739, col_offset=57), Str('Subject', lineno=1739, col_offset=63)], Load(), lineno=1739, col_offset=23), [If(BoolOp(And(), [Compare(Name('header', Load(), lineno=1740, col_offset=15), [In()], [Name('self', Load(), lineno=1740, col_offset=25)], lineno=1740, col_offset=15), Compare(Name('header', Load(), lineno=1740, col_offset=34), [NotIn()], [Attribute(Name('self', Load(), lineno=1740, col_offset=48), '_visible', Load(), lineno=1740, col_offset=48)], lineno=1740, col_offset=34)], lineno=1740, col_offset=15), [Assign([Subscript(Attribute(Name('self', Load(), lineno=1741, col_offset=16), '_visible', Load(), lineno=1741, col_offset=16), Index(Name('header', Load(), lineno=1741, col_offset=30)), Store(), lineno=1741, col_offset=16)], Subscript(Name('self', Load(), lineno=1741, col_offset=40), Index(Name('header', Load(), lineno=1741, col_offset=45)), Load(), lineno=1741, col_offset=40), lineno=1741, col_offset=16)], [], lineno=1740, col_offset=12)], [], lineno=1739, col_offset=8)], [], lineno=1732, col_offset=4), FunctionDef('_explain_to', arguments([Name('self', Param(), lineno=1743, col_offset=20), Name('message', Param(), lineno=1743, col_offset=26)], None, None, []), [Expr(Str('Copy Babyl-specific state to message insofar as possible.', lineno=1744, col_offset=8), lineno=1744, col_offset=8), If(Call(Name('isinstance', Load(), lineno=1745, col_offset=11), [Name('message', Load(), lineno=1745, col_offset=22), Name('MaildirMessage', Load(), lineno=1745, col_offset=31)], [], None, None, lineno=1745, col_offset=11), [Assign([Name('labels', Store(), lineno=1746, col_offset=12)], Call(Name('set', Load(), lineno=1746, col_offset=21), [Call(Attribute(Name('self', Load(), lineno=1746, col_offset=25), 'get_labels', Load(), lineno=1746, col_offset=25), [], [], None, None, lineno=1746, col_offset=25)], [], None, None, lineno=1746, col_offset=21), lineno=1746, col_offset=12), If(Compare(Str('unseen', lineno=1747, col_offset=15), [In()], [Name('labels', Load(), lineno=1747, col_offset=27)], lineno=1747, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1748, col_offset=16), 'set_subdir', Load(), lineno=1748, col_offset=16), [Str('cur', lineno=1748, col_offset=35)], [], None, None, lineno=1748, col_offset=16), lineno=1748, col_offset=16)], [Expr(Call(Attribute(Name('message', Load(), lineno=1750, col_offset=16), 'set_subdir', Load(), lineno=1750, col_offset=16), [Str('cur', lineno=1750, col_offset=35)], [], None, None, lineno=1750, col_offset=16), lineno=1750, col_offset=16), Expr(Call(Attribute(Name('message', Load(), lineno=1751, col_offset=16), 'add_flag', Load(), lineno=1751, col_offset=16), [Str('S', lineno=1751, col_offset=33)], [], None, None, lineno=1751, col_offset=16), lineno=1751, col_offset=16)], lineno=1747, col_offset=12), If(BoolOp(Or(), [Compare(Str('forwarded', lineno=1752, col_offset=15), [In()], [Name('labels', Load(), lineno=1752, col_offset=30)], lineno=1752, col_offset=15), Compare(Str('resent', lineno=1752, col_offset=40), [In()], [Name('labels', Load(), lineno=1752, col_offset=52)], lineno=1752, col_offset=40)], lineno=1752, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1753, col_offset=16), 'add_flag', Load(), lineno=1753, col_offset=16), [Str('P', lineno=1753, col_offset=33)], [], None, None, lineno=1753, col_offset=16), lineno=1753, col_offset=16)], [], lineno=1752, col_offset=12), If(Compare(Str('answered', lineno=1754, col_offset=15), [In()], [Name('labels', Load(), lineno=1754, col_offset=29)], lineno=1754, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1755, col_offset=16), 'add_flag', Load(), lineno=1755, col_offset=16), [Str('R', lineno=1755, col_offset=33)], [], None, None, lineno=1755, col_offset=16), lineno=1755, col_offset=16)], [], lineno=1754, col_offset=12), If(Compare(Str('deleted', lineno=1756, col_offset=15), [In()], [Name('labels', Load(), lineno=1756, col_offset=28)], lineno=1756, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1757, col_offset=16), 'add_flag', Load(), lineno=1757, col_offset=16), [Str('T', lineno=1757, col_offset=33)], [], None, None, lineno=1757, col_offset=16), lineno=1757, col_offset=16)], [], lineno=1756, col_offset=12)], [If(Call(Name('isinstance', Load(), lineno=1758, col_offset=13), [Name('message', Load(), lineno=1758, col_offset=24), Name('_mboxMMDFMessage', Load(), lineno=1758, col_offset=33)], [], None, None, lineno=1758, col_offset=13), [Assign([Name('labels', Store(), lineno=1759, col_offset=12)], Call(Name('set', Load(), lineno=1759, col_offset=21), [Call(Attribute(Name('self', Load(), lineno=1759, col_offset=25), 'get_labels', Load(), lineno=1759, col_offset=25), [], [], None, None, lineno=1759, col_offset=25)], [], None, None, lineno=1759, col_offset=21), lineno=1759, col_offset=12), If(Compare(Str('unseen', lineno=1760, col_offset=15), [NotIn()], [Name('labels', Load(), lineno=1760, col_offset=31)], lineno=1760, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1761, col_offset=16), 'add_flag', Load(), lineno=1761, col_offset=16), [Str('RO', lineno=1761, col_offset=33)], [], None, None, lineno=1761, col_offset=16), lineno=1761, col_offset=16)], [Expr(Call(Attribute(Name('message', Load(), lineno=1763, col_offset=16), 'add_flag', Load(), lineno=1763, col_offset=16), [Str('O', lineno=1763, col_offset=33)], [], None, None, lineno=1763, col_offset=16), lineno=1763, col_offset=16)], lineno=1760, col_offset=12), If(Compare(Str('deleted', lineno=1764, col_offset=15), [In()], [Name('labels', Load(), lineno=1764, col_offset=28)], lineno=1764, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1765, col_offset=16), 'add_flag', Load(), lineno=1765, col_offset=16), [Str('D', lineno=1765, col_offset=33)], [], None, None, lineno=1765, col_offset=16), lineno=1765, col_offset=16)], [], lineno=1764, col_offset=12), If(Compare(Str('answered', lineno=1766, col_offset=15), [In()], [Name('labels', Load(), lineno=1766, col_offset=29)], lineno=1766, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1767, col_offset=16), 'add_flag', Load(), lineno=1767, col_offset=16), [Str('A', lineno=1767, col_offset=33)], [], None, None, lineno=1767, col_offset=16), lineno=1767, col_offset=16)], [], lineno=1766, col_offset=12)], [If(Call(Name('isinstance', Load(), lineno=1768, col_offset=13), [Name('message', Load(), lineno=1768, col_offset=24), Name('MHMessage', Load(), lineno=1768, col_offset=33)], [], None, None, lineno=1768, col_offset=13), [Assign([Name('labels', Store(), lineno=1769, col_offset=12)], Call(Name('set', Load(), lineno=1769, col_offset=21), [Call(Attribute(Name('self', Load(), lineno=1769, col_offset=25), 'get_labels', Load(), lineno=1769, col_offset=25), [], [], None, None, lineno=1769, col_offset=25)], [], None, None, lineno=1769, col_offset=21), lineno=1769, col_offset=12), If(Compare(Str('unseen', lineno=1770, col_offset=15), [In()], [Name('labels', Load(), lineno=1770, col_offset=27)], lineno=1770, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1771, col_offset=16), 'add_sequence', Load(), lineno=1771, col_offset=16), [Str('unseen', lineno=1771, col_offset=37)], [], None, None, lineno=1771, col_offset=16), lineno=1771, col_offset=16)], [], lineno=1770, col_offset=12), If(Compare(Str('answered', lineno=1772, col_offset=15), [In()], [Name('labels', Load(), lineno=1772, col_offset=29)], lineno=1772, col_offset=15), [Expr(Call(Attribute(Name('message', Load(), lineno=1773, col_offset=16), 'add_sequence', Load(), lineno=1773, col_offset=16), [Str('replied', lineno=1773, col_offset=37)], [], None, None, lineno=1773, col_offset=16), lineno=1773, col_offset=16)], [], lineno=1772, col_offset=12)], [If(Call(Name('isinstance', Load(), lineno=1774, col_offset=13), [Name('message', Load(), lineno=1774, col_offset=24), Name('BabylMessage', Load(), lineno=1774, col_offset=33)], [], None, None, lineno=1774, col_offset=13), [Expr(Call(Attribute(Name('message', Load(), lineno=1775, col_offset=12), 'set_visible', Load(), lineno=1775, col_offset=12), [Call(Attribute(Name('self', Load(), lineno=1775, col_offset=32), 'get_visible', Load(), lineno=1775, col_offset=32), [], [], None, None, lineno=1775, col_offset=32)], [], None, None, lineno=1775, col_offset=12), lineno=1775, col_offset=12), For(Name('label', Store(), lineno=1776, col_offset=16), Call(Attribute(Name('self', Load(), lineno=1776, col_offset=25), 'get_labels', Load(), lineno=1776, col_offset=25), [], [], None, None, lineno=1776, col_offset=25), [Expr(Call(Attribute(Name('message', Load(), lineno=1777, col_offset=16), 'add_label', Load(), lineno=1777, col_offset=16), [Name('label', Load(), lineno=1777, col_offset=34)], [], None, None, lineno=1777, col_offset=16), lineno=1777, col_offset=16)], [], lineno=1776, col_offset=12)], [If(Call(Name('isinstance', Load(), lineno=1778, col_offset=13), [Name('message', Load(), lineno=1778, col_offset=24), Name('Message', Load(), lineno=1778, col_offset=33)], [], None, None, lineno=1778, col_offset=13), [Pass( lineno=1779, col_offset=12)], [Raise(Call(Name('TypeError', Load(), lineno=1781, col_offset=18), [BinOp(Str('Cannot convert to specified type: %s', lineno=1781, col_offset=28), Mod(), Call(Name('type', Load(), lineno=1782, col_offset=28), [Name('message', Load(), lineno=1782, col_offset=33)], [], None, None, lineno=1782, col_offset=28), lineno=1781, col_offset=28)], [], None, None, lineno=1781, col_offset=18), None, None, lineno=1781, col_offset=12)], lineno=1778, col_offset=13)], lineno=1774, col_offset=13)], lineno=1768, col_offset=13)], lineno=1758, col_offset=13)], lineno=1745, col_offset=8)], [], lineno=1743, col_offset=4)], [], lineno=1692, col_offset=0), ClassDef('MMDFMessage', [Name('_mboxMMDFMessage', Load(), lineno=1785, col_offset=18)], [Expr(Str('Message with MMDF-specific properties.', lineno=1786, col_offset=4), lineno=1786, col_offset=4)], [], lineno=1785, col_offset=0), ClassDef('_ProxyFile', [], [Expr(Str('A read-only wrapper of a file.', lineno=1790, col_offset=4), lineno=1790, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=1792, col_offset=17), Name('f', Param(), lineno=1792, col_offset=23), Name('pos', Param(), lineno=1792, col_offset=26)], None, None, [Name('None', Load(), lineno=1792, col_offset=30)]), [Expr(Str('Initialize a _ProxyFile.', lineno=1793, col_offset=8), lineno=1793, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1794, col_offset=8), '_file', Store(), lineno=1794, col_offset=8)], Name('f', Load(), lineno=1794, col_offset=21), lineno=1794, col_offset=8), If(Compare(Name('pos', Load(), lineno=1795, col_offset=11), [Is()], [Name('None', Load(), lineno=1795, col_offset=18)], lineno=1795, col_offset=11), [Assign([Attribute(Name('self', Load(), lineno=1796, col_offset=12), '_pos', Store(), lineno=1796, col_offset=12)], Call(Attribute(Name('f', Load(), lineno=1796, col_offset=24), 'tell', Load(), lineno=1796, col_offset=24), [], [], None, None, lineno=1796, col_offset=24), lineno=1796, col_offset=12)], [Assign([Attribute(Name('self', Load(), lineno=1798, col_offset=12), '_pos', Store(), lineno=1798, col_offset=12)], Name('pos', Load(), lineno=1798, col_offset=24), lineno=1798, col_offset=12)], lineno=1795, col_offset=8)], [], lineno=1792, col_offset=4), FunctionDef('read', arguments([Name('self', Param(), lineno=1800, col_offset=13), Name('size', Param(), lineno=1800, col_offset=19)], None, None, [Name('None', Load(), lineno=1800, col_offset=24)]), [Expr(Str('Read bytes.', lineno=1801, col_offset=8), lineno=1801, col_offset=8), Return(Call(Attribute(Name('self', Load(), lineno=1802, col_offset=15), '_read', Load(), lineno=1802, col_offset=15), [Name('size', Load(), lineno=1802, col_offset=26), Attribute(Attribute(Name('self', Load(), lineno=1802, col_offset=32), '_file', Load(), lineno=1802, col_offset=32), 'read', Load(), lineno=1802, col_offset=32)], [], None, None, lineno=1802, col_offset=15), lineno=1802, col_offset=8)], [], lineno=1800, col_offset=4), FunctionDef('readline', arguments([Name('self', Param(), lineno=1804, col_offset=17), Name('size', Param(), lineno=1804, col_offset=23)], None, None, [Name('None', Load(), lineno=1804, col_offset=28)]), [Expr(Str('Read a line.', lineno=1805, col_offset=8), lineno=1805, col_offset=8), Return(Call(Attribute(Name('self', Load(), lineno=1806, col_offset=15), '_read', Load(), lineno=1806, col_offset=15), [Name('size', Load(), lineno=1806, col_offset=26), Attribute(Attribute(Name('self', Load(), lineno=1806, col_offset=32), '_file', Load(), lineno=1806, col_offset=32), 'readline', Load(), lineno=1806, col_offset=32)], [], None, None, lineno=1806, col_offset=15), lineno=1806, col_offset=8)], [], lineno=1804, col_offset=4), FunctionDef('readlines', arguments([Name('self', Param(), lineno=1808, col_offset=18), Name('sizehint', Param(), lineno=1808, col_offset=24)], None, None, [Name('None', Load(), lineno=1808, col_offset=33)]), [Expr(Str('Read multiple lines.', lineno=1809, col_offset=8), lineno=1809, col_offset=8), Assign([Name('result', Store(), lineno=1810, col_offset=8)], List([], Load(), lineno=1810, col_offset=17), lineno=1810, col_offset=8), For(Name('line', Store(), lineno=1811, col_offset=12), Name('self', Load(), lineno=1811, col_offset=20), [Expr(Call(Attribute(Name('result', Load(), lineno=1812, col_offset=12), 'append', Load(), lineno=1812, col_offset=12), [Name('line', Load(), lineno=1812, col_offset=26)], [], None, None, lineno=1812, col_offset=12), lineno=1812, col_offset=12), If(Compare(Name('sizehint', Load(), lineno=1813, col_offset=15), [IsNot()], [Name('None', Load(), lineno=1813, col_offset=31)], lineno=1813, col_offset=15), [AugAssign(Name('sizehint', Store(), lineno=1814, col_offset=16), Sub(), Call(Name('len', Load(), lineno=1814, col_offset=28), [Name('line', Load(), lineno=1814, col_offset=32)], [], None, None, lineno=1814, col_offset=28), lineno=1814, col_offset=16), If(Compare(Name('sizehint', Load(), lineno=1815, col_offset=19), [LtE()], [Num(0, lineno=1815, col_offset=31)], lineno=1815, col_offset=19), [Break( lineno=1816, col_offset=20)], [], lineno=1815, col_offset=16)], [], lineno=1813, col_offset=12)], [], lineno=1811, col_offset=8), Return(Name('result', Load(), lineno=1817, col_offset=15), lineno=1817, col_offset=8)], [], lineno=1808, col_offset=4), FunctionDef('__iter__', arguments([Name('self', Param(), lineno=1819, col_offset=17)], None, None, []), [Expr(Str('Iterate over lines.', lineno=1820, col_offset=8), lineno=1820, col_offset=8), Return(Call(Name('iter', Load(), lineno=1821, col_offset=15), [Attribute(Name('self', Load(), lineno=1821, col_offset=20), 'readline', Load(), lineno=1821, col_offset=20), Str('', lineno=1821, col_offset=35)], [], None, None, lineno=1821, col_offset=15), lineno=1821, col_offset=8)], [], lineno=1819, col_offset=4), FunctionDef('tell', arguments([Name('self', Param(), lineno=1823, col_offset=13)], None, None, []), [Expr(Str('Return the position.', lineno=1824, col_offset=8), lineno=1824, col_offset=8), Return(Attribute(Name('self', Load(), lineno=1825, col_offset=15), '_pos', Load(), lineno=1825, col_offset=15), lineno=1825, col_offset=8)], [], lineno=1823, col_offset=4), FunctionDef('seek', arguments([Name('self', Param(), lineno=1827, col_offset=13), Name('offset', Param(), lineno=1827, col_offset=19), Name('whence', Param(), lineno=1827, col_offset=27)], None, None, [Num(0, lineno=1827, col_offset=34)]), [Expr(Str('Change position.', lineno=1828, col_offset=8), lineno=1828, col_offset=8), If(Compare(Name('whence', Load(), lineno=1829, col_offset=11), [Eq()], [Num(1, lineno=1829, col_offset=21)], lineno=1829, col_offset=11), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1830, col_offset=12), '_file', Load(), lineno=1830, col_offset=12), 'seek', Load(), lineno=1830, col_offset=12), [Attribute(Name('self', Load(), lineno=1830, col_offset=28), '_pos', Load(), lineno=1830, col_offset=28)], [], None, None, lineno=1830, col_offset=12), lineno=1830, col_offset=12)], [], lineno=1829, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1831, col_offset=8), '_file', Load(), lineno=1831, col_offset=8), 'seek', Load(), lineno=1831, col_offset=8), [Name('offset', Load(), lineno=1831, col_offset=24), Name('whence', Load(), lineno=1831, col_offset=32)], [], None, None, lineno=1831, col_offset=8), lineno=1831, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1832, col_offset=8), '_pos', Store(), lineno=1832, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=1832, col_offset=20), '_file', Load(), lineno=1832, col_offset=20), 'tell', Load(), lineno=1832, col_offset=20), [], [], None, None, lineno=1832, col_offset=20), lineno=1832, col_offset=8)], [], lineno=1827, col_offset=4), FunctionDef('close', arguments([Name('self', Param(), lineno=1834, col_offset=14)], None, None, []), [Expr(Str('Close the file.', lineno=1835, col_offset=8), lineno=1835, col_offset=8), Delete([Attribute(Name('self', Load(), lineno=1836, col_offset=12), '_file', Del(), lineno=1836, col_offset=12)], lineno=1836, col_offset=8)], [], lineno=1834, col_offset=4), FunctionDef('_read', arguments([Name('self', Param(), lineno=1838, col_offset=14), Name('size', Param(), lineno=1838, col_offset=20), Name('read_method', Param(), lineno=1838, col_offset=26)], None, None, []), [Expr(Str('Read size bytes using read_method.', lineno=1839, col_offset=8), lineno=1839, col_offset=8), If(Compare(Name('size', Load(), lineno=1840, col_offset=11), [Is()], [Name('None', Load(), lineno=1840, col_offset=19)], lineno=1840, col_offset=11), [Assign([Name('size', Store(), lineno=1841, col_offset=12)], Num(-1, lineno=1841, col_offset=20), lineno=1841, col_offset=12)], [], lineno=1840, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1842, col_offset=8), '_file', Load(), lineno=1842, col_offset=8), 'seek', Load(), lineno=1842, col_offset=8), [Attribute(Name('self', Load(), lineno=1842, col_offset=24), '_pos', Load(), lineno=1842, col_offset=24)], [], None, None, lineno=1842, col_offset=8), lineno=1842, col_offset=8), Assign([Name('result', Store(), lineno=1843, col_offset=8)], Call(Name('read_method', Load(), lineno=1843, col_offset=17), [Name('size', Load(), lineno=1843, col_offset=29)], [], None, None, lineno=1843, col_offset=17), lineno=1843, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1844, col_offset=8), '_pos', Store(), lineno=1844, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=1844, col_offset=20), '_file', Load(), lineno=1844, col_offset=20), 'tell', Load(), lineno=1844, col_offset=20), [], [], None, None, lineno=1844, col_offset=20), lineno=1844, col_offset=8), Return(Name('result', Load(), lineno=1845, col_offset=15), lineno=1845, col_offset=8)], [], lineno=1838, col_offset=4)], [], lineno=1789, col_offset=0), ClassDef('_PartialFile', [Name('_ProxyFile', Load(), lineno=1848, col_offset=19)], [Expr(Str('A read-only wrapper of part of a file.', lineno=1849, col_offset=4), lineno=1849, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=1851, col_offset=17), Name('f', Param(), lineno=1851, col_offset=23), Name('start', Param(), lineno=1851, col_offset=26), Name('stop', Param(), lineno=1851, col_offset=38)], None, None, [Name('None', Load(), lineno=1851, col_offset=32), Name('None', Load(), lineno=1851, col_offset=43)]), [Expr(Str('Initialize a _PartialFile.', lineno=1852, col_offset=8), lineno=1852, col_offset=8), Expr(Call(Attribute(Name('_ProxyFile', Load(), lineno=1853, col_offset=8), '__init__', Load(), lineno=1853, col_offset=8), [Name('self', Load(), lineno=1853, col_offset=28), Name('f', Load(), lineno=1853, col_offset=34), Name('start', Load(), lineno=1853, col_offset=37)], [], None, None, lineno=1853, col_offset=8), lineno=1853, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1854, col_offset=8), '_start', Store(), lineno=1854, col_offset=8)], Name('start', Load(), lineno=1854, col_offset=22), lineno=1854, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1855, col_offset=8), '_stop', Store(), lineno=1855, col_offset=8)], Name('stop', Load(), lineno=1855, col_offset=21), lineno=1855, col_offset=8)], [], lineno=1851, col_offset=4), FunctionDef('tell', arguments([Name('self', Param(), lineno=1857, col_offset=13)], None, None, []), [Expr(Str('Return the position with respect to start.', lineno=1858, col_offset=8), lineno=1858, col_offset=8), Return(BinOp(Call(Attribute(Name('_ProxyFile', Load(), lineno=1859, col_offset=15), 'tell', Load(), lineno=1859, col_offset=15), [Name('self', Load(), lineno=1859, col_offset=31)], [], None, None, lineno=1859, col_offset=15), Sub(), Attribute(Name('self', Load(), lineno=1859, col_offset=39), '_start', Load(), lineno=1859, col_offset=39), lineno=1859, col_offset=15), lineno=1859, col_offset=8)], [], lineno=1857, col_offset=4), FunctionDef('seek', arguments([Name('self', Param(), lineno=1861, col_offset=13), Name('offset', Param(), lineno=1861, col_offset=19), Name('whence', Param(), lineno=1861, col_offset=27)], None, None, [Num(0, lineno=1861, col_offset=34)]), [Expr(Str('Change position, possibly with respect to start or stop.', lineno=1862, col_offset=8), lineno=1862, col_offset=8), If(Compare(Name('whence', Load(), lineno=1863, col_offset=11), [Eq()], [Num(0, lineno=1863, col_offset=21)], lineno=1863, col_offset=11), [Assign([Attribute(Name('self', Load(), lineno=1864, col_offset=12), '_pos', Store(), lineno=1864, col_offset=12)], Attribute(Name('self', Load(), lineno=1864, col_offset=24), '_start', Load(), lineno=1864, col_offset=24), lineno=1864, col_offset=12), Assign([Name('whence', Store(), lineno=1865, col_offset=12)], Num(1, lineno=1865, col_offset=21), lineno=1865, col_offset=12)], [If(Compare(Name('whence', Load(), lineno=1866, col_offset=13), [Eq()], [Num(2, lineno=1866, col_offset=23)], lineno=1866, col_offset=13), [Assign([Attribute(Name('self', Load(), lineno=1867, col_offset=12), '_pos', Store(), lineno=1867, col_offset=12)], Attribute(Name('self', Load(), lineno=1867, col_offset=24), '_stop', Load(), lineno=1867, col_offset=24), lineno=1867, col_offset=12), Assign([Name('whence', Store(), lineno=1868, col_offset=12)], Num(1, lineno=1868, col_offset=21), lineno=1868, col_offset=12)], [], lineno=1866, col_offset=13)], lineno=1863, col_offset=8), Expr(Call(Attribute(Name('_ProxyFile', Load(), lineno=1869, col_offset=8), 'seek', Load(), lineno=1869, col_offset=8), [Name('self', Load(), lineno=1869, col_offset=24), Name('offset', Load(), lineno=1869, col_offset=30), Name('whence', Load(), lineno=1869, col_offset=38)], [], None, None, lineno=1869, col_offset=8), lineno=1869, col_offset=8)], [], lineno=1861, col_offset=4), FunctionDef('_read', arguments([Name('self', Param(), lineno=1871, col_offset=14), Name('size', Param(), lineno=1871, col_offset=20), Name('read_method', Param(), lineno=1871, col_offset=26)], None, None, []), [Expr(Str('Read size bytes using read_method, honoring start and stop.', lineno=1872, col_offset=8), lineno=1872, col_offset=8), Assign([Name('remaining', Store(), lineno=1873, col_offset=8)], BinOp(Attribute(Name('self', Load(), lineno=1873, col_offset=20), '_stop', Load(), lineno=1873, col_offset=20), Sub(), Attribute(Name('self', Load(), lineno=1873, col_offset=33), '_pos', Load(), lineno=1873, col_offset=33), lineno=1873, col_offset=20), lineno=1873, col_offset=8), If(Compare(Name('remaining', Load(), lineno=1874, col_offset=11), [LtE()], [Num(0, lineno=1874, col_offset=24)], lineno=1874, col_offset=11), [Return(Str('', lineno=1875, col_offset=19), lineno=1875, col_offset=12)], [], lineno=1874, col_offset=8), If(BoolOp(Or(), [Compare(Name('size', Load(), lineno=1876, col_offset=11), [Is()], [Name('None', Load(), lineno=1876, col_offset=19)], lineno=1876, col_offset=11), Compare(Name('size', Load(), lineno=1876, col_offset=27), [Lt()], [Num(0, lineno=1876, col_offset=34)], lineno=1876, col_offset=27), Compare(Name('size', Load(), lineno=1876, col_offset=39), [Gt()], [Name('remaining', Load(), lineno=1876, col_offset=46)], lineno=1876, col_offset=39)], lineno=1876, col_offset=11), [Assign([Name('size', Store(), lineno=1877, col_offset=12)], Name('remaining', Load(), lineno=1877, col_offset=19), lineno=1877, col_offset=12)], [], lineno=1876, col_offset=8), Return(Call(Attribute(Name('_ProxyFile', Load(), lineno=1878, col_offset=15), '_read', Load(), lineno=1878, col_offset=15), [Name('self', Load(), lineno=1878, col_offset=32), Name('size', Load(), lineno=1878, col_offset=38), Name('read_method', Load(), lineno=1878, col_offset=44)], [], None, None, lineno=1878, col_offset=15), lineno=1878, col_offset=8)], [], lineno=1871, col_offset=4)], [], lineno=1848, col_offset=0), FunctionDef('_lock_file', arguments([Name('f', Param(), lineno=1881, col_offset=15), Name('dotlock', Param(), lineno=1881, col_offset=18)], None, None, [Name('True', Load(), lineno=1881, col_offset=26)]), [Expr(Str('Lock file f using lockf and dot locking.', lineno=1882, col_offset=4), lineno=1882, col_offset=4), Assign([Name('dotlock_done', Store(), lineno=1883, col_offset=4)], Name('False', Load(), lineno=1883, col_offset=19), lineno=1883, col_offset=4), TryExcept([If(Name('fcntl', Load(), lineno=1885, col_offset=11), [TryExcept([Expr(Call(Attribute(Name('fcntl', Load(), lineno=1887, col_offset=16), 'lockf', Load(), lineno=1887, col_offset=16), [Name('f', Load(), lineno=1887, col_offset=28), BinOp(Attribute(Name('fcntl', Load(), lineno=1887, col_offset=31), 'LOCK_EX', Load(), lineno=1887, col_offset=31), BitOr(), Attribute(Name('fcntl', Load(), lineno=1887, col_offset=47), 'LOCK_NB', Load(), lineno=1887, col_offset=47), lineno=1887, col_offset=31)], [], None, None, lineno=1887, col_offset=16), lineno=1887, col_offset=16)], [ExceptHandler(Name('IOError', Load(), lineno=1888, col_offset=19), Name('e', Store(), lineno=1888, col_offset=28), [If(Compare(Attribute(Name('e', Load(), lineno=1889, col_offset=19), 'errno', Load(), lineno=1889, col_offset=19), [In()], [Tuple([Attribute(Name('errno', Load(), lineno=1889, col_offset=31), 'EAGAIN', Load(), lineno=1889, col_offset=31), Attribute(Name('errno', Load(), lineno=1889, col_offset=45), 'EACCES', Load(), lineno=1889, col_offset=45)], Load(), lineno=1889, col_offset=31)], lineno=1889, col_offset=19), [Raise(Call(Name('ExternalClashError', Load(), lineno=1890, col_offset=26), [BinOp(Str('lockf: lock unavailable: %s', lineno=1890, col_offset=45), Mod(), Attribute(Name('f', Load(), lineno=1891, col_offset=45), 'name', Load(), lineno=1891, col_offset=45), lineno=1890, col_offset=45)], [], None, None, lineno=1890, col_offset=26), None, None, lineno=1890, col_offset=20)], [Raise(None, None, None, lineno=1893, col_offset=20)], lineno=1889, col_offset=16)], lineno=1888, col_offset=12)], [], lineno=1886, col_offset=12)], [], lineno=1885, col_offset=8), If(Name('dotlock', Load(), lineno=1894, col_offset=11), [TryExcept([Assign([Name('pre_lock', Store(), lineno=1896, col_offset=16)], Call(Name('_create_temporary', Load(), lineno=1896, col_offset=27), [BinOp(Attribute(Name('f', Load(), lineno=1896, col_offset=45), 'name', Load(), lineno=1896, col_offset=45), Add(), Str('.lock', lineno=1896, col_offset=54), lineno=1896, col_offset=45)], [], None, None, lineno=1896, col_offset=27), lineno=1896, col_offset=16), Expr(Call(Attribute(Name('pre_lock', Load(), lineno=1897, col_offset=16), 'close', Load(), lineno=1897, col_offset=16), [], [], None, None, lineno=1897, col_offset=16), lineno=1897, col_offset=16)], [ExceptHandler(Name('IOError', Load(), lineno=1898, col_offset=19), Name('e', Store(), lineno=1898, col_offset=28), [If(Compare(Attribute(Name('e', Load(), lineno=1899, col_offset=19), 'errno', Load(), lineno=1899, col_offset=19), [Eq()], [Attribute(Name('errno', Load(), lineno=1899, col_offset=30), 'EACCES', Load(), lineno=1899, col_offset=30)], lineno=1899, col_offset=19), [Return(None, lineno=1900, col_offset=20)], [Raise(None, None, None, lineno=1902, col_offset=20)], lineno=1899, col_offset=16)], lineno=1898, col_offset=12)], [], lineno=1895, col_offset=12), TryExcept([If(Call(Name('hasattr', Load(), lineno=1904, col_offset=19), [Name('os', Load(), lineno=1904, col_offset=27), Str('link', lineno=1904, col_offset=31)], [], None, None, lineno=1904, col_offset=19), [Expr(Call(Attribute(Name('os', Load(), lineno=1905, col_offset=20), 'link', Load(), lineno=1905, col_offset=20), [Attribute(Name('pre_lock', Load(), lineno=1905, col_offset=28), 'name', Load(), lineno=1905, col_offset=28), BinOp(Attribute(Name('f', Load(), lineno=1905, col_offset=43), 'name', Load(), lineno=1905, col_offset=43), Add(), Str('.lock', lineno=1905, col_offset=52), lineno=1905, col_offset=43)], [], None, None, lineno=1905, col_offset=20), lineno=1905, col_offset=20), Assign([Name('dotlock_done', Store(), lineno=1906, col_offset=20)], Name('True', Load(), lineno=1906, col_offset=35), lineno=1906, col_offset=20), Expr(Call(Attribute(Name('os', Load(), lineno=1907, col_offset=20), 'unlink', Load(), lineno=1907, col_offset=20), [Attribute(Name('pre_lock', Load(), lineno=1907, col_offset=30), 'name', Load(), lineno=1907, col_offset=30)], [], None, None, lineno=1907, col_offset=20), lineno=1907, col_offset=20)], [Expr(Call(Attribute(Name('os', Load(), lineno=1909, col_offset=20), 'rename', Load(), lineno=1909, col_offset=20), [Attribute(Name('pre_lock', Load(), lineno=1909, col_offset=30), 'name', Load(), lineno=1909, col_offset=30), BinOp(Attribute(Name('f', Load(), lineno=1909, col_offset=45), 'name', Load(), lineno=1909, col_offset=45), Add(), Str('.lock', lineno=1909, col_offset=54), lineno=1909, col_offset=45)], [], None, None, lineno=1909, col_offset=20), lineno=1909, col_offset=20), Assign([Name('dotlock_done', Store(), lineno=1910, col_offset=20)], Name('True', Load(), lineno=1910, col_offset=35), lineno=1910, col_offset=20)], lineno=1904, col_offset=16)], [ExceptHandler(Name('OSError', Load(), lineno=1911, col_offset=19), Name('e', Store(), lineno=1911, col_offset=28), [If(BoolOp(Or(), [Compare(Attribute(Name('e', Load(), lineno=1912, col_offset=19), 'errno', Load(), lineno=1912, col_offset=19), [Eq()], [Attribute(Name('errno', Load(), lineno=1912, col_offset=30), 'EEXIST', Load(), lineno=1912, col_offset=30)], lineno=1912, col_offset=19), BoolOp(And(), [Compare(Attribute(Name('os', Load(), lineno=1913, col_offset=19), 'name', Load(), lineno=1913, col_offset=19), [Eq()], [Str('os2', lineno=1913, col_offset=30)], lineno=1913, col_offset=19), Compare(Attribute(Name('e', Load(), lineno=1913, col_offset=40), 'errno', Load(), lineno=1913, col_offset=40), [Eq()], [Attribute(Name('errno', Load(), lineno=1913, col_offset=51), 'EACCES', Load(), lineno=1913, col_offset=51)], lineno=1913, col_offset=40)], lineno=1913, col_offset=19)], lineno=1912, col_offset=19), [Expr(Call(Attribute(Name('os', Load(), lineno=1914, col_offset=20), 'remove', Load(), lineno=1914, col_offset=20), [Attribute(Name('pre_lock', Load(), lineno=1914, col_offset=30), 'name', Load(), lineno=1914, col_offset=30)], [], None, None, lineno=1914, col_offset=20), lineno=1914, col_offset=20), Raise(Call(Name('ExternalClashError', Load(), lineno=1915, col_offset=26), [BinOp(Str('dot lock unavailable: %s', lineno=1915, col_offset=45), Mod(), Attribute(Name('f', Load(), lineno=1916, col_offset=45), 'name', Load(), lineno=1916, col_offset=45), lineno=1915, col_offset=45)], [], None, None, lineno=1915, col_offset=26), None, None, lineno=1915, col_offset=20)], [Raise(None, None, None, lineno=1918, col_offset=20)], lineno=1912, col_offset=16)], lineno=1911, col_offset=12)], [], lineno=1903, col_offset=12)], [], lineno=1894, col_offset=8)], [ExceptHandler(None, None, [If(Name('fcntl', Load(), lineno=1920, col_offset=11), [Expr(Call(Attribute(Name('fcntl', Load(), lineno=1921, col_offset=12), 'lockf', Load(), lineno=1921, col_offset=12), [Name('f', Load(), lineno=1921, col_offset=24), Attribute(Name('fcntl', Load(), lineno=1921, col_offset=27), 'LOCK_UN', Load(), lineno=1921, col_offset=27)], [], None, None, lineno=1921, col_offset=12), lineno=1921, col_offset=12)], [], lineno=1920, col_offset=8), If(Name('dotlock_done', Load(), lineno=1922, col_offset=11), [Expr(Call(Attribute(Name('os', Load(), lineno=1923, col_offset=12), 'remove', Load(), lineno=1923, col_offset=12), [BinOp(Attribute(Name('f', Load(), lineno=1923, col_offset=22), 'name', Load(), lineno=1923, col_offset=22), Add(), Str('.lock', lineno=1923, col_offset=31), lineno=1923, col_offset=22)], [], None, None, lineno=1923, col_offset=12), lineno=1923, col_offset=12)], [], lineno=1922, col_offset=8), Raise(None, None, None, lineno=1924, col_offset=8)], lineno=1919, col_offset=4)], [], lineno=1884, col_offset=4)], [], lineno=1881, col_offset=0), FunctionDef('_unlock_file', arguments([Name('f', Param(), lineno=1926, col_offset=17)], None, None, []), [Expr(Str('Unlock file f using lockf and dot locking.', lineno=1927, col_offset=4), lineno=1927, col_offset=4), If(Name('fcntl', Load(), lineno=1928, col_offset=7), [Expr(Call(Attribute(Name('fcntl', Load(), lineno=1929, col_offset=8), 'lockf', Load(), lineno=1929, col_offset=8), [Name('f', Load(), lineno=1929, col_offset=20), Attribute(Name('fcntl', Load(), lineno=1929, col_offset=23), 'LOCK_UN', Load(), lineno=1929, col_offset=23)], [], None, None, lineno=1929, col_offset=8), lineno=1929, col_offset=8)], [], lineno=1928, col_offset=4), If(Call(Attribute(Attribute(Name('os', Load(), lineno=1930, col_offset=7), 'path', Load(), lineno=1930, col_offset=7), 'exists', Load(), lineno=1930, col_offset=7), [BinOp(Attribute(Name('f', Load(), lineno=1930, col_offset=22), 'name', Load(), lineno=1930, col_offset=22), Add(), Str('.lock', lineno=1930, col_offset=31), lineno=1930, col_offset=22)], [], None, None, lineno=1930, col_offset=7), [Expr(Call(Attribute(Name('os', Load(), lineno=1931, col_offset=8), 'remove', Load(), lineno=1931, col_offset=8), [BinOp(Attribute(Name('f', Load(), lineno=1931, col_offset=18), 'name', Load(), lineno=1931, col_offset=18), Add(), Str('.lock', lineno=1931, col_offset=27), lineno=1931, col_offset=18)], [], None, None, lineno=1931, col_offset=8), lineno=1931, col_offset=8)], [], lineno=1930, col_offset=4)], [], lineno=1926, col_offset=0), FunctionDef('_create_carefully', arguments([Name('path', Param(), lineno=1933, col_offset=22)], None, None, []), [Expr(Str("Create a file if it doesn't exist and open for reading and writing.", lineno=1934, col_offset=4), lineno=1934, col_offset=4), Assign([Name('fd', Store(), lineno=1935, col_offset=4)], Call(Attribute(Name('os', Load(), lineno=1935, col_offset=9), 'open', Load(), lineno=1935, col_offset=9), [Name('path', Load(), lineno=1935, col_offset=17), BinOp(BinOp(Attribute(Name('os', Load(), lineno=1935, col_offset=23), 'O_CREAT', Load(), lineno=1935, col_offset=23), BitOr(), Attribute(Name('os', Load(), lineno=1935, col_offset=36), 'O_EXCL', Load(), lineno=1935, col_offset=36), lineno=1935, col_offset=23), BitOr(), Attribute(Name('os', Load(), lineno=1935, col_offset=48), 'O_RDWR', Load(), lineno=1935, col_offset=48), lineno=1935, col_offset=46), Num(438, lineno=1935, col_offset=59)], [], None, None, lineno=1935, col_offset=9), lineno=1935, col_offset=4), TryFinally([Return(Call(Name('open', Load(), lineno=1937, col_offset=15), [Name('path', Load(), lineno=1937, col_offset=20), Str('rb+', lineno=1937, col_offset=26)], [], None, None, lineno=1937, col_offset=15), lineno=1937, col_offset=8)], [Expr(Call(Attribute(Name('os', Load(), lineno=1939, col_offset=8), 'close', Load(), lineno=1939, col_offset=8), [Name('fd', Load(), lineno=1939, col_offset=17)], [], None, None, lineno=1939, col_offset=8), lineno=1939, col_offset=8)], lineno=1936, col_offset=4)], [], lineno=1933, col_offset=0), FunctionDef('_create_temporary', arguments([Name('path', Param(), lineno=1941, col_offset=22)], None, None, []), [Expr(Str('Create a temp file based on path and open for reading and writing.', lineno=1942, col_offset=4), lineno=1942, col_offset=4), Return(Call(Name('_create_carefully', Load(), lineno=1943, col_offset=11), [BinOp(Str('%s.%s.%s.%s', lineno=1943, col_offset=29), Mod(), Tuple([Name('path', Load(), lineno=1943, col_offset=46), Call(Name('int', Load(), lineno=1943, col_offset=52), [Call(Attribute(Name('time', Load(), lineno=1943, col_offset=56), 'time', Load(), lineno=1943, col_offset=56), [], [], None, None, lineno=1943, col_offset=56)], [], None, None, lineno=1943, col_offset=52), Call(Attribute(Name('socket', Load(), lineno=1944, col_offset=46), 'gethostname', Load(), lineno=1944, col_offset=46), [], [], None, None, lineno=1944, col_offset=46), Call(Attribute(Name('os', Load(), lineno=1945, col_offset=46), 'getpid', Load(), lineno=1945, col_offset=46), [], [], None, None, lineno=1945, col_offset=46)], Load(), lineno=1943, col_offset=46), lineno=1943, col_offset=29)], [], None, None, lineno=1943, col_offset=11), lineno=1943, col_offset=4)], [], lineno=1941, col_offset=0), FunctionDef('_sync_flush', arguments([Name('f', Param(), lineno=1947, col_offset=16)], None, None, []), [Expr(Str('Ensure changes to file f are physically on disk.', lineno=1948, col_offset=4), lineno=1948, col_offset=4), Expr(Call(Attribute(Name('f', Load(), lineno=1949, col_offset=4), 'flush', Load(), lineno=1949, col_offset=4), [], [], None, None, lineno=1949, col_offset=4), lineno=1949, col_offset=4), If(Call(Name('hasattr', Load(), lineno=1950, col_offset=7), [Name('os', Load(), lineno=1950, col_offset=15), Str('fsync', lineno=1950, col_offset=19)], [], None, None, lineno=1950, col_offset=7), [Expr(Call(Attribute(Name('os', Load(), lineno=1951, col_offset=8), 'fsync', Load(), lineno=1951, col_offset=8), [Call(Attribute(Name('f', Load(), lineno=1951, col_offset=17), 'fileno', Load(), lineno=1951, col_offset=17), [], [], None, None, lineno=1951, col_offset=17)], [], None, None, lineno=1951, col_offset=8), lineno=1951, col_offset=8)], [], lineno=1950, col_offset=4)], [], lineno=1947, col_offset=0), FunctionDef('_sync_close', arguments([Name('f', Param(), lineno=1953, col_offset=16)], None, None, []), [Expr(Str('Close file f, ensuring all changes are physically on disk.', lineno=1954, col_offset=4), lineno=1954, col_offset=4), Expr(Call(Name('_sync_flush', Load(), lineno=1955, col_offset=4), [Name('f', Load(), lineno=1955, col_offset=16)], [], None, None, lineno=1955, col_offset=4), lineno=1955, col_offset=4), Expr(Call(Attribute(Name('f', Load(), lineno=1956, col_offset=4), 'close', Load(), lineno=1956, col_offset=4), [], [], None, None, lineno=1956, col_offset=4), lineno=1956, col_offset=4)], [], lineno=1953, col_offset=0), ClassDef('_Mailbox', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=1965, col_offset=17), Name('fp', Param(), lineno=1965, col_offset=23), Name('factory', Param(), lineno=1965, col_offset=27)], None, None, [Attribute(Name('rfc822', Load(), lineno=1965, col_offset=35), 'Message', Load(), lineno=1965, col_offset=35)]), [Assign([Attribute(Name('self', Load(), lineno=1966, col_offset=8), 'fp', Store(), lineno=1966, col_offset=8)], Name('fp', Load(), lineno=1966, col_offset=18), lineno=1966, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1967, col_offset=8), 'seekp', Store(), lineno=1967, col_offset=8)], Num(0, lineno=1967, col_offset=21), lineno=1967, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=1968, col_offset=8), 'factory', Store(), lineno=1968, col_offset=8)], Name('factory', Load(), lineno=1968, col_offset=23), lineno=1968, col_offset=8)], [], lineno=1965, col_offset=4), FunctionDef('__iter__', arguments([Name('self', Param(), lineno=1970, col_offset=17)], None, None, []), [Return(Call(Name('iter', Load(), lineno=1971, col_offset=15), [Attribute(Name('self', Load(), lineno=1971, col_offset=20), 'next', Load(), lineno=1971, col_offset=20), Name('None', Load(), lineno=1971, col_offset=31)], [], None, None, lineno=1971, col_offset=15), lineno=1971, col_offset=8)], [], lineno=1970, col_offset=4), FunctionDef('next', arguments([Name('self', Param(), lineno=1973, col_offset=13)], None, None, []), [While(Num(1, lineno=1974, col_offset=14), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1975, col_offset=12), 'fp', Load(), lineno=1975, col_offset=12), 'seek', Load(), lineno=1975, col_offset=12), [Attribute(Name('self', Load(), lineno=1975, col_offset=25), 'seekp', Load(), lineno=1975, col_offset=25)], [], None, None, lineno=1975, col_offset=12), lineno=1975, col_offset=12), TryExcept([Expr(Call(Attribute(Name('self', Load(), lineno=1977, col_offset=16), '_search_start', Load(), lineno=1977, col_offset=16), [], [], None, None, lineno=1977, col_offset=16), lineno=1977, col_offset=16)], [ExceptHandler(Name('EOFError', Load(), lineno=1978, col_offset=19), None, [Assign([Attribute(Name('self', Load(), lineno=1979, col_offset=16), 'seekp', Store(), lineno=1979, col_offset=16)], Call(Attribute(Attribute(Name('self', Load(), lineno=1979, col_offset=29), 'fp', Load(), lineno=1979, col_offset=29), 'tell', Load(), lineno=1979, col_offset=29), [], [], None, None, lineno=1979, col_offset=29), lineno=1979, col_offset=16), Return(Name('None', Load(), lineno=1980, col_offset=23), lineno=1980, col_offset=16)], lineno=1978, col_offset=12)], [], lineno=1976, col_offset=12), Assign([Name('start', Store(), lineno=1981, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=1981, col_offset=20), 'fp', Load(), lineno=1981, col_offset=20), 'tell', Load(), lineno=1981, col_offset=20), [], [], None, None, lineno=1981, col_offset=20), lineno=1981, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=1982, col_offset=12), '_search_end', Load(), lineno=1982, col_offset=12), [], [], None, None, lineno=1982, col_offset=12), lineno=1982, col_offset=12), Assign([Attribute(Name('self', Load(), lineno=1983, col_offset=12), 'seekp', Store(), lineno=1983, col_offset=12), Name('stop', Store(), lineno=1983, col_offset=25)], Call(Attribute(Attribute(Name('self', Load(), lineno=1983, col_offset=32), 'fp', Load(), lineno=1983, col_offset=32), 'tell', Load(), lineno=1983, col_offset=32), [], [], None, None, lineno=1983, col_offset=32), lineno=1983, col_offset=12), If(Compare(Name('start', Load(), lineno=1984, col_offset=15), [NotEq()], [Name('stop', Load(), lineno=1984, col_offset=24)], lineno=1984, col_offset=15), [Break( lineno=1985, col_offset=16)], [], lineno=1984, col_offset=12)], [], lineno=1974, col_offset=8), Return(Call(Attribute(Name('self', Load(), lineno=1986, col_offset=15), 'factory', Load(), lineno=1986, col_offset=15), [Call(Name('_PartialFile', Load(), lineno=1986, col_offset=28), [Attribute(Name('self', Load(), lineno=1986, col_offset=41), 'fp', Load(), lineno=1986, col_offset=41), Name('start', Load(), lineno=1986, col_offset=50), Name('stop', Load(), lineno=1986, col_offset=57)], [], None, None, lineno=1986, col_offset=28)], [], None, None, lineno=1986, col_offset=15), lineno=1986, col_offset=8)], [], lineno=1973, col_offset=4)], [], lineno=1963, col_offset=0), ClassDef('UnixMailbox', [Name('_Mailbox', Load(), lineno=1989, col_offset=18)], [FunctionDef('_search_start', arguments([Name('self', Param(), lineno=1991, col_offset=22)], None, None, []), [While(Num(1, lineno=1992, col_offset=14), [Assign([Name('pos', Store(), lineno=1993, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=1993, col_offset=18), 'fp', Load(), lineno=1993, col_offset=18), 'tell', Load(), lineno=1993, col_offset=18), [], [], None, None, lineno=1993, col_offset=18), lineno=1993, col_offset=12), Assign([Name('line', Store(), lineno=1994, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=1994, col_offset=19), 'fp', Load(), lineno=1994, col_offset=19), 'readline', Load(), lineno=1994, col_offset=19), [], [], None, None, lineno=1994, col_offset=19), lineno=1994, col_offset=12), If(UnaryOp(Not(), Name('line', Load(), lineno=1995, col_offset=19), lineno=1995, col_offset=15), [Raise(Name('EOFError', Load(), lineno=1996, col_offset=22), None, None, lineno=1996, col_offset=16)], [], lineno=1995, col_offset=12), If(BoolOp(And(), [Compare(Subscript(Name('line', Load(), lineno=1997, col_offset=15), Slice(None, Num(5, lineno=1997, col_offset=21), None), Load(), lineno=1997, col_offset=15), [Eq()], [Str('From ', lineno=1997, col_offset=27)], lineno=1997, col_offset=15), Call(Attribute(Name('self', Load(), lineno=1997, col_offset=39), '_isrealfromline', Load(), lineno=1997, col_offset=39), [Name('line', Load(), lineno=1997, col_offset=60)], [], None, None, lineno=1997, col_offset=39)], lineno=1997, col_offset=15), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=1998, col_offset=16), 'fp', Load(), lineno=1998, col_offset=16), 'seek', Load(), lineno=1998, col_offset=16), [Name('pos', Load(), lineno=1998, col_offset=29)], [], None, None, lineno=1998, col_offset=16), lineno=1998, col_offset=16), Return(None, lineno=1999, col_offset=16)], [], lineno=1997, col_offset=12)], [], lineno=1992, col_offset=8)], [], lineno=1991, col_offset=4), FunctionDef('_search_end', arguments([Name('self', Param(), lineno=2001, col_offset=20)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=2002, col_offset=8), 'fp', Load(), lineno=2002, col_offset=8), 'readline', Load(), lineno=2002, col_offset=8), [], [], None, None, lineno=2002, col_offset=8), lineno=2002, col_offset=8), While(Num(1, lineno=2003, col_offset=14), [Assign([Name('pos', Store(), lineno=2004, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=2004, col_offset=18), 'fp', Load(), lineno=2004, col_offset=18), 'tell', Load(), lineno=2004, col_offset=18), [], [], None, None, lineno=2004, col_offset=18), lineno=2004, col_offset=12), Assign([Name('line', Store(), lineno=2005, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=2005, col_offset=19), 'fp', Load(), lineno=2005, col_offset=19), 'readline', Load(), lineno=2005, col_offset=19), [], [], None, None, lineno=2005, col_offset=19), lineno=2005, col_offset=12), If(UnaryOp(Not(), Name('line', Load(), lineno=2006, col_offset=19), lineno=2006, col_offset=15), [Return(None, lineno=2007, col_offset=16)], [], lineno=2006, col_offset=12), If(BoolOp(And(), [Compare(Subscript(Name('line', Load(), lineno=2008, col_offset=15), Slice(None, Num(5, lineno=2008, col_offset=21), None), Load(), lineno=2008, col_offset=15), [Eq()], [Str('From ', lineno=2008, col_offset=27)], lineno=2008, col_offset=15), Call(Attribute(Name('self', Load(), lineno=2008, col_offset=39), '_isrealfromline', Load(), lineno=2008, col_offset=39), [Name('line', Load(), lineno=2008, col_offset=60)], [], None, None, lineno=2008, col_offset=39)], lineno=2008, col_offset=15), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=2009, col_offset=16), 'fp', Load(), lineno=2009, col_offset=16), 'seek', Load(), lineno=2009, col_offset=16), [Name('pos', Load(), lineno=2009, col_offset=29)], [], None, None, lineno=2009, col_offset=16), lineno=2009, col_offset=16), Return(None, lineno=2010, col_offset=16)], [], lineno=2008, col_offset=12)], [], lineno=2003, col_offset=8)], [], lineno=2001, col_offset=4), Assign([Name('_fromlinepattern', Store(), lineno=2037, col_offset=4)], Str('From \\s*[^\\s]+\\s+\\w\\w\\w\\s+\\w\\w\\w\\s+\\d?\\d\\s+\\d?\\d:\\d\\d(:\\d\\d)?(\\s+[^\\s]+)?\\s+\\d\\d\\d\\d\\s*[^\\s]*\\s*$', lineno=2037, col_offset=24), lineno=2037, col_offset=4), Assign([Name('_regexp', Store(), lineno=2041, col_offset=4)], Name('None', Load(), lineno=2041, col_offset=14), lineno=2041, col_offset=4), FunctionDef('_strict_isrealfromline', arguments([Name('self', Param(), lineno=2043, col_offset=31), Name('line', Param(), lineno=2043, col_offset=37)], None, None, []), [If(UnaryOp(Not(), Attribute(Name('self', Load(), lineno=2044, col_offset=15), '_regexp', Load(), lineno=2044, col_offset=15), lineno=2044, col_offset=11), [Import([alias('re', None)], lineno=2045, col_offset=12), Assign([Attribute(Name('self', Load(), lineno=2046, col_offset=12), '_regexp', Store(), lineno=2046, col_offset=12)], Call(Attribute(Name('re', Load(), lineno=2046, col_offset=27), 'compile', Load(), lineno=2046, col_offset=27), [Attribute(Name('self', Load(), lineno=2046, col_offset=38), '_fromlinepattern', Load(), lineno=2046, col_offset=38)], [], None, None, lineno=2046, col_offset=27), lineno=2046, col_offset=12)], [], lineno=2044, col_offset=8), Return(Call(Attribute(Attribute(Name('self', Load(), lineno=2047, col_offset=15), '_regexp', Load(), lineno=2047, col_offset=15), 'match', Load(), lineno=2047, col_offset=15), [Name('line', Load(), lineno=2047, col_offset=34)], [], None, None, lineno=2047, col_offset=15), lineno=2047, col_offset=8)], [], lineno=2043, col_offset=4), FunctionDef('_portable_isrealfromline', arguments([Name('self', Param(), lineno=2049, col_offset=33), Name('line', Param(), lineno=2049, col_offset=39)], None, None, []), [Return(Name('True', Load(), lineno=2050, col_offset=15), lineno=2050, col_offset=8)], [], lineno=2049, col_offset=4), Assign([Name('_isrealfromline', Store(), lineno=2052, col_offset=4)], Name('_strict_isrealfromline', Load(), lineno=2052, col_offset=22), lineno=2052, col_offset=4)], [], lineno=1989, col_offset=0), ClassDef('PortableUnixMailbox', [Name('UnixMailbox', Load(), lineno=2055, col_offset=26)], [Assign([Name('_isrealfromline', Store(), lineno=2056, col_offset=4)], Attribute(Name('UnixMailbox', Load(), lineno=2056, col_offset=22), '_portable_isrealfromline', Load(), lineno=2056, col_offset=22), lineno=2056, col_offset=4)], [], lineno=2055, col_offset=0), ClassDef('MmdfMailbox', [Name('_Mailbox', Load(), lineno=2059, col_offset=18)], [FunctionDef('_search_start', arguments([Name('self', Param(), lineno=2061, col_offset=22)], None, None, []), [While(Num(1, lineno=2062, col_offset=14), [Assign([Name('line', Store(), lineno=2063, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=2063, col_offset=19), 'fp', Load(), lineno=2063, col_offset=19), 'readline', Load(), lineno=2063, col_offset=19), [], [], None, None, lineno=2063, col_offset=19), lineno=2063, col_offset=12), If(UnaryOp(Not(), Name('line', Load(), lineno=2064, col_offset=19), lineno=2064, col_offset=15), [Raise(Name('EOFError', Load(), lineno=2065, col_offset=22), None, None, lineno=2065, col_offset=16)], [], lineno=2064, col_offset=12), If(Compare(Subscript(Name('line', Load(), lineno=2066, col_offset=15), Slice(None, Num(5, lineno=2066, col_offset=21), None), Load(), lineno=2066, col_offset=15), [Eq()], [Str('\x01\x01\x01\x01\n', lineno=2066, col_offset=27)], lineno=2066, col_offset=15), [Return(None, lineno=2067, col_offset=16)], [], lineno=2066, col_offset=12)], [], lineno=2062, col_offset=8)], [], lineno=2061, col_offset=4), FunctionDef('_search_end', arguments([Name('self', Param(), lineno=2069, col_offset=20)], None, None, []), [While(Num(1, lineno=2070, col_offset=14), [Assign([Name('pos', Store(), lineno=2071, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=2071, col_offset=18), 'fp', Load(), lineno=2071, col_offset=18), 'tell', Load(), lineno=2071, col_offset=18), [], [], None, None, lineno=2071, col_offset=18), lineno=2071, col_offset=12), Assign([Name('line', Store(), lineno=2072, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=2072, col_offset=19), 'fp', Load(), lineno=2072, col_offset=19), 'readline', Load(), lineno=2072, col_offset=19), [], [], None, None, lineno=2072, col_offset=19), lineno=2072, col_offset=12), If(UnaryOp(Not(), Name('line', Load(), lineno=2073, col_offset=19), lineno=2073, col_offset=15), [Return(None, lineno=2074, col_offset=16)], [], lineno=2073, col_offset=12), If(Compare(Name('line', Load(), lineno=2075, col_offset=15), [Eq()], [Str('\x01\x01\x01\x01\n', lineno=2075, col_offset=23)], lineno=2075, col_offset=15), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=2076, col_offset=16), 'fp', Load(), lineno=2076, col_offset=16), 'seek', Load(), lineno=2076, col_offset=16), [Name('pos', Load(), lineno=2076, col_offset=29)], [], None, None, lineno=2076, col_offset=16), lineno=2076, col_offset=16), Return(None, lineno=2077, col_offset=16)], [], lineno=2075, col_offset=12)], [], lineno=2070, col_offset=8)], [], lineno=2069, col_offset=4)], [], lineno=2059, col_offset=0), ClassDef('MHMailbox', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=2082, col_offset=17), Name('dirname', Param(), lineno=2082, col_offset=23), Name('factory', Param(), lineno=2082, col_offset=32)], None, None, [Attribute(Name('rfc822', Load(), lineno=2082, col_offset=40), 'Message', Load(), lineno=2082, col_offset=40)]), [Import([alias('re', None)], lineno=2083, col_offset=8), Assign([Name('pat', Store(), lineno=2084, col_offset=8)], Call(Attribute(Name('re', Load(), lineno=2084, col_offset=14), 'compile', Load(), lineno=2084, col_offset=14), [Str('^[1-9][0-9]*$', lineno=2084, col_offset=25)], [], None, None, lineno=2084, col_offset=14), lineno=2084, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=2085, col_offset=8), 'dirname', Store(), lineno=2085, col_offset=8)], Name('dirname', Load(), lineno=2085, col_offset=23), lineno=2085, col_offset=8), Assign([Name('list', Store(), lineno=2088, col_offset=8)], Call(Attribute(Name('os', Load(), lineno=2088, col_offset=15), 'listdir', Load(), lineno=2088, col_offset=15), [Attribute(Name('self', Load(), lineno=2088, col_offset=26), 'dirname', Load(), lineno=2088, col_offset=26)], [], None, None, lineno=2088, col_offset=15), lineno=2088, col_offset=8), Assign([Name('list', Store(), lineno=2089, col_offset=8)], Call(Name('filter', Load(), lineno=2089, col_offset=15), [Attribute(Name('pat', Load(), lineno=2089, col_offset=22), 'match', Load(), lineno=2089, col_offset=22), Name('list', Load(), lineno=2089, col_offset=33)], [], None, None, lineno=2089, col_offset=15), lineno=2089, col_offset=8), Assign([Name('list', Store(), lineno=2090, col_offset=8)], Call(Name('map', Load(), lineno=2090, col_offset=15), [Name('long', Load(), lineno=2090, col_offset=19), Name('list', Load(), lineno=2090, col_offset=25)], [], None, None, lineno=2090, col_offset=15), lineno=2090, col_offset=8), Expr(Call(Attribute(Name('list', Load(), lineno=2091, col_offset=8), 'sort', Load(), lineno=2091, col_offset=8), [], [], None, None, lineno=2091, col_offset=8), lineno=2091, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=2094, col_offset=8), 'boxes', Store(), lineno=2094, col_offset=8)], Call(Name('map', Load(), lineno=2094, col_offset=21), [Name('str', Load(), lineno=2094, col_offset=25), Name('list', Load(), lineno=2094, col_offset=30)], [], None, None, lineno=2094, col_offset=21), lineno=2094, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=2095, col_offset=8), 'boxes', Load(), lineno=2095, col_offset=8), 'reverse', Load(), lineno=2095, col_offset=8), [], [], None, None, lineno=2095, col_offset=8), lineno=2095, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=2096, col_offset=8), 'factory', Store(), lineno=2096, col_offset=8)], Name('factory', Load(), lineno=2096, col_offset=23), lineno=2096, col_offset=8)], [], lineno=2082, col_offset=4), FunctionDef('__iter__', arguments([Name('self', Param(), lineno=2098, col_offset=17)], None, None, []), [Return(Call(Name('iter', Load(), lineno=2099, col_offset=15), [Attribute(Name('self', Load(), lineno=2099, col_offset=20), 'next', Load(), lineno=2099, col_offset=20), Name('None', Load(), lineno=2099, col_offset=31)], [], None, None, lineno=2099, col_offset=15), lineno=2099, col_offset=8)], [], lineno=2098, col_offset=4), FunctionDef('next', arguments([Name('self', Param(), lineno=2101, col_offset=13)], None, None, []), [If(UnaryOp(Not(), Attribute(Name('self', Load(), lineno=2102, col_offset=15), 'boxes', Load(), lineno=2102, col_offset=15), lineno=2102, col_offset=11), [Return(Name('None', Load(), lineno=2103, col_offset=19), lineno=2103, col_offset=12)], [], lineno=2102, col_offset=8), Assign([Name('fn', Store(), lineno=2104, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=2104, col_offset=13), 'boxes', Load(), lineno=2104, col_offset=13), 'pop', Load(), lineno=2104, col_offset=13), [], [], None, None, lineno=2104, col_offset=13), lineno=2104, col_offset=8), Assign([Name('fp', Store(), lineno=2105, col_offset=8)], Call(Name('open', Load(), lineno=2105, col_offset=13), [Call(Attribute(Attribute(Name('os', Load(), lineno=2105, col_offset=18), 'path', Load(), lineno=2105, col_offset=18), 'join', Load(), lineno=2105, col_offset=18), [Attribute(Name('self', Load(), lineno=2105, col_offset=31), 'dirname', Load(), lineno=2105, col_offset=31), Name('fn', Load(), lineno=2105, col_offset=45)], [], None, None, lineno=2105, col_offset=18)], [], None, None, lineno=2105, col_offset=13), lineno=2105, col_offset=8), Assign([Name('msg', Store(), lineno=2106, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=2106, col_offset=14), 'factory', Load(), lineno=2106, col_offset=14), [Name('fp', Load(), lineno=2106, col_offset=27)], [], None, None, lineno=2106, col_offset=14), lineno=2106, col_offset=8), TryExcept([Assign([Attribute(Name('msg', Load(), lineno=2108, col_offset=12), '_mh_msgno', Store(), lineno=2108, col_offset=12)], Name('fn', Load(), lineno=2108, col_offset=28), lineno=2108, col_offset=12)], [ExceptHandler(Tuple([Name('AttributeError', Load(), lineno=2109, col_offset=16), Name('TypeError', Load(), lineno=2109, col_offset=32)], Load(), lineno=2109, col_offset=16), None, [Pass( lineno=2110, col_offset=12)], lineno=2109, col_offset=8)], [], lineno=2107, col_offset=8), Return(Name('msg', Load(), lineno=2111, col_offset=15), lineno=2111, col_offset=8)], [], lineno=2101, col_offset=4)], [], lineno=2080, col_offset=0), ClassDef('BabylMailbox', [Name('_Mailbox', Load(), lineno=2114, col_offset=19)], [FunctionDef('_search_start', arguments([Name('self', Param(), lineno=2116, col_offset=22)], None, None, []), [While(Num(1, lineno=2117, col_offset=14), [Assign([Name('line', Store(), lineno=2118, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=2118, col_offset=19), 'fp', Load(), lineno=2118, col_offset=19), 'readline', Load(), lineno=2118, col_offset=19), [], [], None, None, lineno=2118, col_offset=19), lineno=2118, col_offset=12), If(UnaryOp(Not(), Name('line', Load(), lineno=2119, col_offset=19), lineno=2119, col_offset=15), [Raise(Name('EOFError', Load(), lineno=2120, col_offset=22), None, None, lineno=2120, col_offset=16)], [], lineno=2119, col_offset=12), If(Compare(Name('line', Load(), lineno=2121, col_offset=15), [Eq()], [Str('*** EOOH ***\n', lineno=2121, col_offset=23)], lineno=2121, col_offset=15), [Return(None, lineno=2122, col_offset=16)], [], lineno=2121, col_offset=12)], [], lineno=2117, col_offset=8)], [], lineno=2116, col_offset=4), FunctionDef('_search_end', arguments([Name('self', Param(), lineno=2124, col_offset=20)], None, None, []), [While(Num(1, lineno=2125, col_offset=14), [Assign([Name('pos', Store(), lineno=2126, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=2126, col_offset=18), 'fp', Load(), lineno=2126, col_offset=18), 'tell', Load(), lineno=2126, col_offset=18), [], [], None, None, lineno=2126, col_offset=18), lineno=2126, col_offset=12), Assign([Name('line', Store(), lineno=2127, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=2127, col_offset=19), 'fp', Load(), lineno=2127, col_offset=19), 'readline', Load(), lineno=2127, col_offset=19), [], [], None, None, lineno=2127, col_offset=19), lineno=2127, col_offset=12), If(UnaryOp(Not(), Name('line', Load(), lineno=2128, col_offset=19), lineno=2128, col_offset=15), [Return(None, lineno=2129, col_offset=16)], [], lineno=2128, col_offset=12), If(BoolOp(Or(), [Compare(Name('line', Load(), lineno=2130, col_offset=15), [Eq()], [Str('\x1f\x0c\n', lineno=2130, col_offset=23)], lineno=2130, col_offset=15), Compare(Name('line', Load(), lineno=2130, col_offset=39), [Eq()], [Str('\x1f', lineno=2130, col_offset=47)], lineno=2130, col_offset=39)], lineno=2130, col_offset=15), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=2131, col_offset=16), 'fp', Load(), lineno=2131, col_offset=16), 'seek', Load(), lineno=2131, col_offset=16), [Name('pos', Load(), lineno=2131, col_offset=29)], [], None, None, lineno=2131, col_offset=16), lineno=2131, col_offset=16), Return(None, lineno=2132, col_offset=16)], [], lineno=2130, col_offset=12)], [], lineno=2125, col_offset=8)], [], lineno=2124, col_offset=4)], [], lineno=2114, col_offset=0), ClassDef('Error', [Name('Exception', Load(), lineno=2137, col_offset=12)], [Expr(Str('Raised for module-specific errors.', lineno=2138, col_offset=4), lineno=2138, col_offset=4)], [], lineno=2137, col_offset=0), ClassDef('NoSuchMailboxError', [Name('Error', Load(), lineno=2140, col_offset=25)], [Expr(Str("The specified mailbox does not exist and won't be created.", lineno=2141, col_offset=4), lineno=2141, col_offset=4)], [], lineno=2140, col_offset=0), ClassDef('NotEmptyError', [Name('Error', Load(), lineno=2143, col_offset=20)], [Expr(Str('The specified mailbox is not empty and deletion was requested.', lineno=2144, col_offset=4), lineno=2144, col_offset=4)], [], lineno=2143, col_offset=0), ClassDef('ExternalClashError', [Name('Error', Load(), lineno=2146, col_offset=25)], [Expr(Str('Another process caused an action to fail.', lineno=2147, col_offset=4), lineno=2147, col_offset=4)], [], lineno=2146, col_offset=0), ClassDef('FormatError', [Name('Error', Load(), lineno=2149, col_offset=18)], [Expr(Str('A file appears to have an invalid format.', lineno=2150, col_offset=4), lineno=2150, col_offset=4)], [], lineno=2149, col_offset=0)])
