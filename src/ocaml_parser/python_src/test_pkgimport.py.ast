Module([Import([alias('os', None), alias('sys', None), alias('string', None), alias('random', None), alias('tempfile', None), alias('unittest', None)], lineno=1, col_offset=0), ImportFrom('test.test_support', [alias('run_unittest', None)], 0, lineno=3, col_offset=0), ClassDef('TestImport', [Attribute(Name('unittest', Load(), lineno=5, col_offset=17), 'TestCase', Load(), lineno=5, col_offset=17)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=7, col_offset=17)], 'args', 'kw', []), [Assign([Attribute(Name('self', Load(), lineno=8, col_offset=8), 'package_name', Store(), lineno=8, col_offset=8)], Str('PACKAGE_', lineno=8, col_offset=28), lineno=8, col_offset=8), While(Compare(Attribute(Name('self', Load(), lineno=9, col_offset=14), 'package_name', Load(), lineno=9, col_offset=14), [In()], [Attribute(Name('sys', Load(), lineno=9, col_offset=35), 'modules', Load(), lineno=9, col_offset=35)], lineno=9, col_offset=14), [AugAssign(Attribute(Name('self', Load(), lineno=10, col_offset=12), 'package_name', Store(), lineno=10, col_offset=12), Add(), Call(Attribute(Name('random', Load(), lineno=10, col_offset=33), 'choose', Load(), lineno=10, col_offset=33), [Attribute(Name('string', Load(), lineno=10, col_offset=47), 'letters', Load(), lineno=10, col_offset=47)], [], None, None, lineno=10, col_offset=33), lineno=10, col_offset=12)], [], lineno=9, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=11, col_offset=8), 'module_name', Store(), lineno=11, col_offset=8)], BinOp(Attribute(Name('self', Load(), lineno=11, col_offset=27), 'package_name', Load(), lineno=11, col_offset=27), Add(), Str('.foo', lineno=11, col_offset=47), lineno=11, col_offset=27), lineno=11, col_offset=8), Expr(Call(Attribute(Attribute(Name('unittest', Load(), lineno=12, col_offset=8), 'TestCase', Load(), lineno=12, col_offset=8), '__init__', Load(), lineno=12, col_offset=8), [Name('self', Load(), lineno=12, col_offset=35)], [], Name('args', Load(), lineno=12, col_offset=42), Name('kw', Load(), lineno=12, col_offset=50), lineno=12, col_offset=8), lineno=12, col_offset=8)], [], lineno=7, col_offset=4), FunctionDef('remove_modules', arguments([Name('self', Param(), lineno=14, col_offset=23)], None, None, []), [For(Name('module_name', Store(), lineno=15, col_offset=12), Tuple([Attribute(Name('self', Load(), lineno=15, col_offset=28), 'package_name', Load(), lineno=15, col_offset=28), Attribute(Name('self', Load(), lineno=15, col_offset=47), 'module_name', Load(), lineno=15, col_offset=47)], Load(), lineno=15, col_offset=28), [If(Compare(Name('module_name', Load(), lineno=16, col_offset=15), [In()], [Attribute(Name('sys', Load(), lineno=16, col_offset=30), 'modules', Load(), lineno=16, col_offset=30)], lineno=16, col_offset=15), [Delete([Subscript(Attribute(Name('sys', Load(), lineno=17, col_offset=20), 'modules', Load(), lineno=17, col_offset=20), Index(Name('module_name', Load(), lineno=17, col_offset=32)), Del(), lineno=17, col_offset=20)], lineno=17, col_offset=16)], [], lineno=16, col_offset=12)], [], lineno=15, col_offset=8)], [], lineno=14, col_offset=4), FunctionDef('setUp', arguments([Name('self', Param(), lineno=19, col_offset=14)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=20, col_offset=8), 'test_dir', Store(), lineno=20, col_offset=8)], Call(Attribute(Name('tempfile', Load(), lineno=20, col_offset=24), 'mkdtemp', Load(), lineno=20, col_offset=24), [], [], None, None, lineno=20, col_offset=24), lineno=20, col_offset=8), Expr(Call(Attribute(Attribute(Name('sys', Load(), lineno=21, col_offset=8), 'path', Load(), lineno=21, col_offset=8), 'append', Load(), lineno=21, col_offset=8), [Attribute(Name('self', Load(), lineno=21, col_offset=24), 'test_dir', Load(), lineno=21, col_offset=24)], [], None, None, lineno=21, col_offset=8), lineno=21, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=22, col_offset=8), 'package_dir', Store(), lineno=22, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=22, col_offset=27), 'path', Load(), lineno=22, col_offset=27), 'join', Load(), lineno=22, col_offset=27), [Attribute(Name('self', Load(), lineno=22, col_offset=40), 'test_dir', Load(), lineno=22, col_offset=40), Attribute(Name('self', Load(), lineno=23, col_offset=40), 'package_name', Load(), lineno=23, col_offset=40)], [], None, None, lineno=22, col_offset=27), lineno=22, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=24, col_offset=8), 'mkdir', Load(), lineno=24, col_offset=8), [Attribute(Name('self', Load(), lineno=24, col_offset=17), 'package_dir', Load(), lineno=24, col_offset=17)], [], None, None, lineno=24, col_offset=8), lineno=24, col_offset=8), Expr(Call(Attribute(Call(Name('open', Load(), lineno=25, col_offset=8), [Call(Attribute(Attribute(Name('os', Load(), lineno=25, col_offset=13), 'path', Load(), lineno=25, col_offset=13), 'join', Load(), lineno=25, col_offset=13), [Attribute(Name('self', Load(), lineno=26, col_offset=16), 'package_dir', Load(), lineno=26, col_offset=16), BinOp(BinOp(Str('__init__', lineno=26, col_offset=34), Add(), Attribute(Name('os', Load(), lineno=26, col_offset=45), 'extsep', Load(), lineno=26, col_offset=45), lineno=26, col_offset=34), Add(), Str('py', lineno=26, col_offset=55), lineno=26, col_offset=54)], [], None, None, lineno=25, col_offset=13), Str('w', lineno=26, col_offset=62)], [], None, None, lineno=25, col_offset=8), 'close', Load(), lineno=25, col_offset=8), [], [], None, None, lineno=25, col_offset=8), lineno=25, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=27, col_offset=8), 'module_path', Store(), lineno=27, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=27, col_offset=27), 'path', Load(), lineno=27, col_offset=27), 'join', Load(), lineno=27, col_offset=27), [Attribute(Name('self', Load(), lineno=27, col_offset=40), 'package_dir', Load(), lineno=27, col_offset=40), BinOp(BinOp(Str('foo', lineno=27, col_offset=58), Add(), Attribute(Name('os', Load(), lineno=27, col_offset=64), 'extsep', Load(), lineno=27, col_offset=64), lineno=27, col_offset=58), Add(), Str('py', lineno=27, col_offset=74), lineno=27, col_offset=73)], [], None, None, lineno=27, col_offset=27), lineno=27, col_offset=8)], [], lineno=19, col_offset=4), FunctionDef('tearDown', arguments([Name('self', Param(), lineno=29, col_offset=17)], None, None, []), [For(Name('file', Store(), lineno=30, col_offset=12), Call(Attribute(Name('os', Load(), lineno=30, col_offset=20), 'listdir', Load(), lineno=30, col_offset=20), [Attribute(Name('self', Load(), lineno=30, col_offset=31), 'package_dir', Load(), lineno=30, col_offset=31)], [], None, None, lineno=30, col_offset=20), [Expr(Call(Attribute(Name('os', Load(), lineno=31, col_offset=12), 'remove', Load(), lineno=31, col_offset=12), [Call(Attribute(Attribute(Name('os', Load(), lineno=31, col_offset=22), 'path', Load(), lineno=31, col_offset=22), 'join', Load(), lineno=31, col_offset=22), [Attribute(Name('self', Load(), lineno=31, col_offset=35), 'package_dir', Load(), lineno=31, col_offset=35), Name('file', Load(), lineno=31, col_offset=53)], [], None, None, lineno=31, col_offset=22)], [], None, None, lineno=31, col_offset=12), lineno=31, col_offset=12)], [], lineno=30, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=32, col_offset=8), 'rmdir', Load(), lineno=32, col_offset=8), [Attribute(Name('self', Load(), lineno=32, col_offset=17), 'package_dir', Load(), lineno=32, col_offset=17)], [], None, None, lineno=32, col_offset=8), lineno=32, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=33, col_offset=8), 'rmdir', Load(), lineno=33, col_offset=8), [Attribute(Name('self', Load(), lineno=33, col_offset=17), 'test_dir', Load(), lineno=33, col_offset=17)], [], None, None, lineno=33, col_offset=8), lineno=33, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=34, col_offset=8), 'assertNotEqual', Load(), lineno=34, col_offset=8), [Call(Attribute(Attribute(Name('sys', Load(), lineno=34, col_offset=28), 'path', Load(), lineno=34, col_offset=28), 'count', Load(), lineno=34, col_offset=28), [Attribute(Name('self', Load(), lineno=34, col_offset=43), 'test_dir', Load(), lineno=34, col_offset=43)], [], None, None, lineno=34, col_offset=28), Num(0, lineno=34, col_offset=59)], [], None, None, lineno=34, col_offset=8), lineno=34, col_offset=8), Expr(Call(Attribute(Attribute(Name('sys', Load(), lineno=35, col_offset=8), 'path', Load(), lineno=35, col_offset=8), 'remove', Load(), lineno=35, col_offset=8), [Attribute(Name('self', Load(), lineno=35, col_offset=24), 'test_dir', Load(), lineno=35, col_offset=24)], [], None, None, lineno=35, col_offset=8), lineno=35, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=36, col_offset=8), 'remove_modules', Load(), lineno=36, col_offset=8), [], [], None, None, lineno=36, col_offset=8), lineno=36, col_offset=8)], [], lineno=29, col_offset=4), FunctionDef('rewrite_file', arguments([Name('self', Param(), lineno=38, col_offset=21), Name('contents', Param(), lineno=38, col_offset=27)], None, None, []), [For(Name('extension', Store(), lineno=39, col_offset=12), Str('co', lineno=39, col_offset=25), [Assign([Name('compiled_path', Store(), lineno=40, col_offset=12)], BinOp(Attribute(Name('self', Load(), lineno=40, col_offset=28), 'module_path', Load(), lineno=40, col_offset=28), Add(), Name('extension', Load(), lineno=40, col_offset=47), lineno=40, col_offset=28), lineno=40, col_offset=12), If(Call(Attribute(Attribute(Name('os', Load(), lineno=41, col_offset=15), 'path', Load(), lineno=41, col_offset=15), 'exists', Load(), lineno=41, col_offset=15), [Name('compiled_path', Load(), lineno=41, col_offset=30)], [], None, None, lineno=41, col_offset=15), [Expr(Call(Attribute(Name('os', Load(), lineno=42, col_offset=16), 'remove', Load(), lineno=42, col_offset=16), [Name('compiled_path', Load(), lineno=42, col_offset=26)], [], None, None, lineno=42, col_offset=16), lineno=42, col_offset=16)], [], lineno=41, col_offset=12)], [], lineno=39, col_offset=8), Assign([Name('f', Store(), lineno=43, col_offset=8)], Call(Name('open', Load(), lineno=43, col_offset=12), [Attribute(Name('self', Load(), lineno=43, col_offset=17), 'module_path', Load(), lineno=43, col_offset=17), Str('w', lineno=43, col_offset=35)], [], None, None, lineno=43, col_offset=12), lineno=43, col_offset=8), Expr(Call(Attribute(Name('f', Load(), lineno=44, col_offset=8), 'write', Load(), lineno=44, col_offset=8), [Name('contents', Load(), lineno=44, col_offset=16)], [], None, None, lineno=44, col_offset=8), lineno=44, col_offset=8), Expr(Call(Attribute(Name('f', Load(), lineno=45, col_offset=8), 'close', Load(), lineno=45, col_offset=8), [], [], None, None, lineno=45, col_offset=8), lineno=45, col_offset=8)], [], lineno=38, col_offset=4), FunctionDef('test_package_import__semantics', arguments([Name('self', Param(), lineno=47, col_offset=39)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=52, col_offset=8), 'rewrite_file', Load(), lineno=52, col_offset=8), [Str('for', lineno=52, col_offset=26)], [], None, None, lineno=52, col_offset=8), lineno=52, col_offset=8), TryExcept([Expr(Call(Name('__import__', Load(), lineno=53, col_offset=13), [Attribute(Name('self', Load(), lineno=53, col_offset=24), 'module_name', Load(), lineno=53, col_offset=24)], [], None, None, lineno=53, col_offset=13), lineno=53, col_offset=13)], [ExceptHandler(Name('SyntaxError', Load(), lineno=54, col_offset=15), None, [Pass( lineno=54, col_offset=28)], lineno=54, col_offset=8)], [Raise(Name('RuntimeError', Load(), lineno=55, col_offset=20), Str('Failed to induce SyntaxError', lineno=55, col_offset=34), None, lineno=55, col_offset=14)], lineno=53, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=56, col_offset=8), 'assertNotIn', Load(), lineno=56, col_offset=8), [Attribute(Name('self', Load(), lineno=56, col_offset=25), 'module_name', Load(), lineno=56, col_offset=25), Attribute(Name('sys', Load(), lineno=56, col_offset=43), 'modules', Load(), lineno=56, col_offset=43)], [], None, None, lineno=56, col_offset=8), lineno=56, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=57, col_offset=8), 'assertFalse', Load(), lineno=57, col_offset=8), [Call(Name('hasattr', Load(), lineno=57, col_offset=25), [Subscript(Attribute(Name('sys', Load(), lineno=57, col_offset=33), 'modules', Load(), lineno=57, col_offset=33), Index(Attribute(Name('self', Load(), lineno=57, col_offset=45), 'package_name', Load(), lineno=57, col_offset=45)), Load(), lineno=57, col_offset=33), Str('foo', lineno=57, col_offset=65)], [], None, None, lineno=57, col_offset=25)], [], None, None, lineno=57, col_offset=8), lineno=57, col_offset=8), Assign([Name('var', Store(), lineno=60, col_offset=8)], Str('a', lineno=60, col_offset=14), lineno=60, col_offset=8), While(Compare(Name('var', Load(), lineno=61, col_offset=14), [In()], [Call(Name('dir', Load(), lineno=61, col_offset=21), [Name('__builtins__', Load(), lineno=61, col_offset=25)], [], None, None, lineno=61, col_offset=21)], lineno=61, col_offset=14), [AugAssign(Name('var', Store(), lineno=62, col_offset=12), Add(), Call(Attribute(Name('random', Load(), lineno=62, col_offset=19), 'choose', Load(), lineno=62, col_offset=19), [Attribute(Name('string', Load(), lineno=62, col_offset=33), 'letters', Load(), lineno=62, col_offset=33)], [], None, None, lineno=62, col_offset=19), lineno=62, col_offset=12)], [], lineno=61, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=65, col_offset=8), 'rewrite_file', Load(), lineno=65, col_offset=8), [Name('var', Load(), lineno=65, col_offset=26)], [], None, None, lineno=65, col_offset=8), lineno=65, col_offset=8), TryExcept([Expr(Call(Name('__import__', Load(), lineno=67, col_offset=13), [Attribute(Name('self', Load(), lineno=67, col_offset=24), 'module_name', Load(), lineno=67, col_offset=24)], [], None, None, lineno=67, col_offset=13), lineno=67, col_offset=13)], [ExceptHandler(Name('NameError', Load(), lineno=68, col_offset=15), None, [Pass( lineno=68, col_offset=26)], lineno=68, col_offset=8)], [Raise(Name('RuntimeError', Load(), lineno=69, col_offset=20), Str('Failed to induce NameError.', lineno=69, col_offset=34), None, lineno=69, col_offset=14)], lineno=67, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=73, col_offset=8), 'rewrite_file', Load(), lineno=73, col_offset=8), [BinOp(Str('%s = 1', lineno=73, col_offset=26), Mod(), Name('var', Load(), lineno=73, col_offset=37), lineno=73, col_offset=26)], [], None, None, lineno=73, col_offset=8), lineno=73, col_offset=8), Assign([Name('module', Store(), lineno=74, col_offset=8)], Attribute(Call(Name('__import__', Load(), lineno=74, col_offset=17), [Attribute(Name('self', Load(), lineno=74, col_offset=28), 'module_name', Load(), lineno=74, col_offset=28)], [], None, None, lineno=74, col_offset=17), 'foo', Load(), lineno=74, col_offset=17), lineno=74, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=75, col_offset=8), 'assertEqual', Load(), lineno=75, col_offset=8), [Call(Name('getattr', Load(), lineno=75, col_offset=25), [Name('module', Load(), lineno=75, col_offset=33), Name('var', Load(), lineno=75, col_offset=41)], [], None, None, lineno=75, col_offset=25), Num(1, lineno=75, col_offset=47)], [], None, None, lineno=75, col_offset=8), lineno=75, col_offset=8)], [], lineno=47, col_offset=4)], [], lineno=5, col_offset=0), FunctionDef('test_main', arguments([], None, None, []), [Expr(Call(Name('run_unittest', Load(), lineno=79, col_offset=4), [Name('TestImport', Load(), lineno=79, col_offset=17)], [], None, None, lineno=79, col_offset=4), lineno=79, col_offset=4)], [], lineno=78, col_offset=0), If(Compare(Name('__name__', Load(), lineno=82, col_offset=3), [Eq()], [Str('__main__', lineno=82, col_offset=15)], lineno=82, col_offset=3), [Expr(Call(Name('test_main', Load(), lineno=83, col_offset=4), [], [], None, None, lineno=83, col_offset=4), lineno=83, col_offset=4)], [], lineno=82, col_offset=0)])
