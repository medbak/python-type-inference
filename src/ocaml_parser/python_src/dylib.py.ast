Module([Expr(Str('\nGeneric dylib path manipulation\n', lineno=6, col_offset=-1), lineno=6, col_offset=-1), Import([alias('re', None)], lineno=8, col_offset=0), Assign([Name('__all__', Store(), lineno=10, col_offset=0)], List([Str('dylib_info', lineno=10, col_offset=11)], Load(), lineno=10, col_offset=10), lineno=10, col_offset=0), Assign([Name('DYLIB_RE', Store(), lineno=12, col_offset=0)], Call(Attribute(Name('re', Load(), lineno=12, col_offset=11), 'compile', Load(), lineno=12, col_offset=11), [Str('(?x)\n(?P<location>^.*)(?:^|/)\n(?P<name>\n    (?P<shortname>\\w+?)\n    (?:\\.(?P<version>[^._]+))?\n    (?:_(?P<suffix>[^._]+))?\n    \\.dylib$\n)\n', lineno=20, col_offset=-1)], [], None, None, lineno=12, col_offset=11), lineno=12, col_offset=0), FunctionDef('dylib_info', arguments([Name('filename', Param(), lineno=22, col_offset=15)], None, None, []), [Expr(Str("\n    A dylib name can take one of the following four forms:\n        Location/Name.SomeVersion_Suffix.dylib\n        Location/Name.SomeVersion.dylib\n        Location/Name_Suffix.dylib\n        Location/Name.dylib\n\n    returns None if not found or a mapping equivalent to:\n        dict(\n            location='Location',\n            name='Name.SomeVersion_Suffix.dylib',\n            shortname='Name',\n            version='SomeVersion',\n            suffix='Suffix',\n        )\n\n    Note that SomeVersion and Suffix are optional and may be None\n    if not present.\n    ", lineno=41, col_offset=-1), lineno=41, col_offset=-1), Assign([Name('is_dylib', Store(), lineno=42, col_offset=4)], Call(Attribute(Name('DYLIB_RE', Load(), lineno=42, col_offset=15), 'match', Load(), lineno=42, col_offset=15), [Name('filename', Load(), lineno=42, col_offset=30)], [], None, None, lineno=42, col_offset=15), lineno=42, col_offset=4), If(UnaryOp(Not(), Name('is_dylib', Load(), lineno=43, col_offset=11), lineno=43, col_offset=7), [Return(Name('None', Load(), lineno=44, col_offset=15), lineno=44, col_offset=8)], [], lineno=43, col_offset=4), Return(Call(Attribute(Name('is_dylib', Load(), lineno=45, col_offset=11), 'groupdict', Load(), lineno=45, col_offset=11), [], [], None, None, lineno=45, col_offset=11), lineno=45, col_offset=4)], [], lineno=22, col_offset=0), FunctionDef('test_dylib_info', arguments([], None, None, []), [FunctionDef('d', arguments([Name('location', Param(), lineno=49, col_offset=10), Name('name', Param(), lineno=49, col_offset=25), Name('shortname', Param(), lineno=49, col_offset=36), Name('version', Param(), lineno=49, col_offset=52), Name('suffix', Param(), lineno=49, col_offset=66)], None, None, [Name('None', Load(), lineno=49, col_offset=19), Name('None', Load(), lineno=49, col_offset=30), Name('None', Load(), lineno=49, col_offset=46), Name('None', Load(), lineno=49, col_offset=60), Name('None', Load(), lineno=49, col_offset=73)]), [Return(Call(Name('dict', Load(), lineno=50, col_offset=15), [], [keyword('location', Name('location', Load(), lineno=51, col_offset=21)), keyword('name', Name('name', Load(), lineno=52, col_offset=17)), keyword('shortname', Name('shortname', Load(), lineno=53, col_offset=22)), keyword('version', Name('version', Load(), lineno=54, col_offset=20)), keyword('suffix', Name('suffix', Load(), lineno=55, col_offset=19))], None, None, lineno=50, col_offset=15), lineno=50, col_offset=8)], [], lineno=49, col_offset=4), Assert(Compare(Call(Name('dylib_info', Load(), lineno=57, col_offset=11), [Str('completely/invalid', lineno=57, col_offset=22)], [], None, None, lineno=57, col_offset=11), [Is()], [Name('None', Load(), lineno=57, col_offset=47)], lineno=57, col_offset=11), None, lineno=57, col_offset=4), Assert(Compare(Call(Name('dylib_info', Load(), lineno=58, col_offset=11), [Str('completely/invalide_debug', lineno=58, col_offset=22)], [], None, None, lineno=58, col_offset=11), [Is()], [Name('None', Load(), lineno=58, col_offset=54)], lineno=58, col_offset=11), None, lineno=58, col_offset=4), Assert(Compare(Call(Name('dylib_info', Load(), lineno=59, col_offset=11), [Str('P/Foo.dylib', lineno=59, col_offset=22)], [], None, None, lineno=59, col_offset=11), [Eq()], [Call(Name('d', Load(), lineno=59, col_offset=40), [Str('P', lineno=59, col_offset=42), Str('Foo.dylib', lineno=59, col_offset=47), Str('Foo', lineno=59, col_offset=60)], [], None, None, lineno=59, col_offset=40)], lineno=59, col_offset=11), None, lineno=59, col_offset=4), Assert(Compare(Call(Name('dylib_info', Load(), lineno=60, col_offset=11), [Str('P/Foo_debug.dylib', lineno=60, col_offset=22)], [], None, None, lineno=60, col_offset=11), [Eq()], [Call(Name('d', Load(), lineno=60, col_offset=46), [Str('P', lineno=60, col_offset=48), Str('Foo_debug.dylib', lineno=60, col_offset=53), Str('Foo', lineno=60, col_offset=72)], [keyword('suffix', Str('debug', lineno=60, col_offset=86))], None, None, lineno=60, col_offset=46)], lineno=60, col_offset=11), None, lineno=60, col_offset=4), Assert(Compare(Call(Name('dylib_info', Load(), lineno=61, col_offset=11), [Str('P/Foo.A.dylib', lineno=61, col_offset=22)], [], None, None, lineno=61, col_offset=11), [Eq()], [Call(Name('d', Load(), lineno=61, col_offset=42), [Str('P', lineno=61, col_offset=44), Str('Foo.A.dylib', lineno=61, col_offset=49), Str('Foo', lineno=61, col_offset=64), Str('A', lineno=61, col_offset=71)], [], None, None, lineno=61, col_offset=42)], lineno=61, col_offset=11), None, lineno=61, col_offset=4), Assert(Compare(Call(Name('dylib_info', Load(), lineno=62, col_offset=11), [Str('P/Foo_debug.A.dylib', lineno=62, col_offset=22)], [], None, None, lineno=62, col_offset=11), [Eq()], [Call(Name('d', Load(), lineno=62, col_offset=48), [Str('P', lineno=62, col_offset=50), Str('Foo_debug.A.dylib', lineno=62, col_offset=55), Str('Foo_debug', lineno=62, col_offset=76), Str('A', lineno=62, col_offset=89)], [], None, None, lineno=62, col_offset=48)], lineno=62, col_offset=11), None, lineno=62, col_offset=4), Assert(Compare(Call(Name('dylib_info', Load(), lineno=63, col_offset=11), [Str('P/Foo.A_debug.dylib', lineno=63, col_offset=22)], [], None, None, lineno=63, col_offset=11), [Eq()], [Call(Name('d', Load(), lineno=63, col_offset=48), [Str('P', lineno=63, col_offset=50), Str('Foo.A_debug.dylib', lineno=63, col_offset=55), Str('Foo', lineno=63, col_offset=76), Str('A', lineno=63, col_offset=83), Str('debug', lineno=63, col_offset=88)], [], None, None, lineno=63, col_offset=48)], lineno=63, col_offset=11), None, lineno=63, col_offset=4)], [], lineno=48, col_offset=0), If(Compare(Name('__name__', Load(), lineno=65, col_offset=3), [Eq()], [Str('__main__', lineno=65, col_offset=15)], lineno=65, col_offset=3), [Expr(Call(Name('test_dylib_info', Load(), lineno=66, col_offset=4), [], [], None, None, lineno=66, col_offset=4), lineno=66, col_offset=4)], [], lineno=65, col_offset=0)])
