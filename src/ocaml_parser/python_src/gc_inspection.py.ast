Module([Expr(Str('\ngc.get_referrers() can be used to see objects before they are fully built.\n\nNote that this is only an example.  There are many ways to crash Python\nby using gc.get_referrers(), as well as many extension modules (even\nwhen they are using perfectly documented patterns to build objects).\n\nIdentifying and removing all places that expose to the GC a\npartially-built object is a long-term project.  A patch was proposed on\nSF specifically for this example but I consider fixing just this single\nexample a bit pointless (#1517042).\n\nA fix would include a whole-scale code review, possibly with an API\nchange to decouple object creation and GC registration, and according\nfixes to the documentation for extension module writers.  It\'s unlikely\nto happen, though.  So this is currently classified as\n"gc.get_referrers() is dangerous, use only for debugging".\n', lineno=18, col_offset=-1), lineno=18, col_offset=-1), Import([alias('gc', None)], lineno=20, col_offset=0), FunctionDef('g', arguments([], None, None, []), [Assign([Name('marker', Store(), lineno=24, col_offset=4)], Call(Name('object', Load(), lineno=24, col_offset=13), [], [], None, None, lineno=24, col_offset=13), lineno=24, col_offset=4), Expr(Yield(Name('marker', Load(), lineno=25, col_offset=10), lineno=25, col_offset=4), lineno=25, col_offset=4), Assign([List([Name('tup', Store(), lineno=27, col_offset=5)], Store(), lineno=27, col_offset=4)], ListComp(Name('x', Load(), lineno=27, col_offset=13), [comprehension(Name('x', Store(), lineno=27, col_offset=19), Call(Attribute(Name('gc', Load(), lineno=27, col_offset=24), 'get_referrers', Load(), lineno=27, col_offset=24), [Name('marker', Load(), lineno=27, col_offset=41)], [], None, None, lineno=27, col_offset=24), [Compare(Call(Name('type', Load(), lineno=27, col_offset=52), [Name('x', Load(), lineno=27, col_offset=57)], [], None, None, lineno=27, col_offset=52), [Is()], [Name('tuple', Load(), lineno=27, col_offset=63)], lineno=27, col_offset=52)])], lineno=27, col_offset=13), lineno=27, col_offset=4), Print(None, [Name('tup', Load(), lineno=28, col_offset=10)], True, lineno=28, col_offset=4), Print(None, [Subscript(Name('tup', Load(), lineno=29, col_offset=10), Index(Num(1, lineno=29, col_offset=14)), Load(), lineno=29, col_offset=10)], True, lineno=29, col_offset=4)], [], lineno=23, col_offset=0), Expr(Call(Name('tuple', Load(), lineno=32, col_offset=0), [Call(Name('g', Load(), lineno=32, col_offset=6), [], [], None, None, lineno=32, col_offset=6)], [], None, None, lineno=32, col_offset=0), lineno=32, col_offset=0)])
