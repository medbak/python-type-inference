Module([Import([alias('sys', None)], lineno=4, col_offset=0), Import([alias('os', None)], lineno=5, col_offset=0), Import([alias('os.path', None)], lineno=6, col_offset=0), Import([alias('tempfile', None)], lineno=7, col_offset=0), Import([alias('subprocess', None)], lineno=8, col_offset=0), Import([alias('py_compile', None)], lineno=9, col_offset=0), Import([alias('contextlib', None)], lineno=10, col_offset=0), Import([alias('shutil', None)], lineno=11, col_offset=0), Import([alias('zipfile', None)], lineno=12, col_offset=0), FunctionDef('_assert_python', arguments([Name('expected_success', Param(), lineno=15, col_offset=19)], 'args', 'env_vars', []), [Assign([Name('cmd_line', Store(), lineno=16, col_offset=4)], List([Attribute(Name('sys', Load(), lineno=16, col_offset=16), 'executable', Load(), lineno=16, col_offset=16)], Load(), lineno=16, col_offset=15), lineno=16, col_offset=4), If(UnaryOp(Not(), Name('env_vars', Load(), lineno=17, col_offset=11), lineno=17, col_offset=7), [Expr(Call(Attribute(Name('cmd_line', Load(), lineno=18, col_offset=8), 'append', Load(), lineno=18, col_offset=8), [Str('-E', lineno=18, col_offset=24)], [], None, None, lineno=18, col_offset=8), lineno=18, col_offset=8)], [], lineno=17, col_offset=4), Expr(Call(Attribute(Name('cmd_line', Load(), lineno=19, col_offset=4), 'extend', Load(), lineno=19, col_offset=4), [Name('args', Load(), lineno=19, col_offset=20)], [], None, None, lineno=19, col_offset=4), lineno=19, col_offset=4), Assign([Name('env', Store(), lineno=22, col_offset=4)], Call(Attribute(Attribute(Name('os', Load(), lineno=22, col_offset=10), 'environ', Load(), lineno=22, col_offset=10), 'copy', Load(), lineno=22, col_offset=10), [], [], None, None, lineno=22, col_offset=10), lineno=22, col_offset=4), Expr(Call(Attribute(Name('env', Load(), lineno=23, col_offset=4), 'update', Load(), lineno=23, col_offset=4), [Name('env_vars', Load(), lineno=23, col_offset=15)], [], None, None, lineno=23, col_offset=4), lineno=23, col_offset=4), Assign([Name('p', Store(), lineno=24, col_offset=4)], Call(Attribute(Name('subprocess', Load(), lineno=24, col_offset=8), 'Popen', Load(), lineno=24, col_offset=8), [Name('cmd_line', Load(), lineno=24, col_offset=25)], [keyword('stdin', Attribute(Name('subprocess', Load(), lineno=24, col_offset=41), 'PIPE', Load(), lineno=24, col_offset=41)), keyword('stdout', Attribute(Name('subprocess', Load(), lineno=25, col_offset=32), 'PIPE', Load(), lineno=25, col_offset=32)), keyword('stderr', Attribute(Name('subprocess', Load(), lineno=25, col_offset=56), 'PIPE', Load(), lineno=25, col_offset=56)), keyword('env', Name('env', Load(), lineno=26, col_offset=29))], None, None, lineno=24, col_offset=8), lineno=24, col_offset=4), TryFinally([Assign([Tuple([Name('out', Store(), lineno=28, col_offset=8), Name('err', Store(), lineno=28, col_offset=13)], Store(), lineno=28, col_offset=8)], Call(Attribute(Name('p', Load(), lineno=28, col_offset=19), 'communicate', Load(), lineno=28, col_offset=19), [], [], None, None, lineno=28, col_offset=19), lineno=28, col_offset=8)], [Expr(Call(Attribute(Name('subprocess', Load(), lineno=30, col_offset=8), '_cleanup', Load(), lineno=30, col_offset=8), [], [], None, None, lineno=30, col_offset=8), lineno=30, col_offset=8), Expr(Call(Attribute(Attribute(Name('p', Load(), lineno=31, col_offset=8), 'stdout', Load(), lineno=31, col_offset=8), 'close', Load(), lineno=31, col_offset=8), [], [], None, None, lineno=31, col_offset=8), lineno=31, col_offset=8), Expr(Call(Attribute(Attribute(Name('p', Load(), lineno=32, col_offset=8), 'stderr', Load(), lineno=32, col_offset=8), 'close', Load(), lineno=32, col_offset=8), [], [], None, None, lineno=32, col_offset=8), lineno=32, col_offset=8)], lineno=27, col_offset=4), Assign([Name('rc', Store(), lineno=33, col_offset=4)], Attribute(Name('p', Load(), lineno=33, col_offset=9), 'returncode', Load(), lineno=33, col_offset=9), lineno=33, col_offset=4), If(BoolOp(Or(), [BoolOp(And(), [Name('rc', Load(), lineno=34, col_offset=8), Name('expected_success', Load(), lineno=34, col_offset=15)], lineno=34, col_offset=8), BoolOp(And(), [UnaryOp(Not(), Name('rc', Load(), lineno=34, col_offset=41), lineno=34, col_offset=37), UnaryOp(Not(), Name('expected_success', Load(), lineno=34, col_offset=52), lineno=34, col_offset=48)], lineno=34, col_offset=37)], lineno=34, col_offset=7), [Raise(Call(Name('AssertionError', Load(), lineno=35, col_offset=14), [BinOp(Str('Process return code is %d, stderr follows:\n%s', lineno=36, col_offset=12), Mod(), Tuple([Name('rc', Load(), lineno=37, col_offset=37), Call(Attribute(Name('err', Load(), lineno=37, col_offset=41), 'decode', Load(), lineno=37, col_offset=41), [Str('ascii', lineno=37, col_offset=52), Str('ignore', lineno=37, col_offset=61)], [], None, None, lineno=37, col_offset=41)], Load(), lineno=37, col_offset=37), lineno=36, col_offset=12)], [], None, None, lineno=35, col_offset=14), None, None, lineno=35, col_offset=8)], [], lineno=34, col_offset=4), Return(Tuple([Name('rc', Load(), lineno=38, col_offset=11), Name('out', Load(), lineno=38, col_offset=15), Name('err', Load(), lineno=38, col_offset=20)], Load(), lineno=38, col_offset=11), lineno=38, col_offset=4)], [], lineno=15, col_offset=0), FunctionDef('assert_python_ok', arguments([], 'args', 'env_vars', []), [Expr(Str('\n    Assert that running the interpreter with `args` and optional environment\n    variables `env_vars` is ok and return a (return code, stdout, stderr) tuple.\n    ', lineno=44, col_offset=-1), lineno=44, col_offset=-1), Return(Call(Name('_assert_python', Load(), lineno=45, col_offset=11), [Name('True', Load(), lineno=45, col_offset=26)], [], Name('args', Load(), lineno=45, col_offset=33), Name('env_vars', Load(), lineno=45, col_offset=41), lineno=45, col_offset=11), lineno=45, col_offset=4)], [], lineno=40, col_offset=0), FunctionDef('assert_python_failure', arguments([], 'args', 'env_vars', []), [Expr(Str('\n    Assert that running the interpreter with `args` and optional environment\n    variables `env_vars` fails and return a (return code, stdout, stderr) tuple.\n    ', lineno=51, col_offset=-1), lineno=51, col_offset=-1), Return(Call(Name('_assert_python', Load(), lineno=52, col_offset=11), [Name('False', Load(), lineno=52, col_offset=26)], [], Name('args', Load(), lineno=52, col_offset=34), Name('env_vars', Load(), lineno=52, col_offset=42), lineno=52, col_offset=11), lineno=52, col_offset=4)], [], lineno=47, col_offset=0), FunctionDef('python_exit_code', arguments([], 'args', None, []), [Assign([Name('cmd_line', Store(), lineno=55, col_offset=4)], List([Attribute(Name('sys', Load(), lineno=55, col_offset=16), 'executable', Load(), lineno=55, col_offset=16), Str('-E', lineno=55, col_offset=32)], Load(), lineno=55, col_offset=15), lineno=55, col_offset=4), Expr(Call(Attribute(Name('cmd_line', Load(), lineno=56, col_offset=4), 'extend', Load(), lineno=56, col_offset=4), [Name('args', Load(), lineno=56, col_offset=20)], [], None, None, lineno=56, col_offset=4), lineno=56, col_offset=4), With(Call(Name('open', Load(), lineno=57, col_offset=9), [Attribute(Name('os', Load(), lineno=57, col_offset=14), 'devnull', Load(), lineno=57, col_offset=14), Str('w', lineno=57, col_offset=26)], [], None, None, lineno=57, col_offset=9), Name('devnull', Store(), lineno=57, col_offset=34), [Return(Call(Attribute(Name('subprocess', Load(), lineno=58, col_offset=15), 'call', Load(), lineno=58, col_offset=15), [Name('cmd_line', Load(), lineno=58, col_offset=31)], [keyword('stdout', Name('devnull', Load(), lineno=58, col_offset=48)), keyword('stderr', Attribute(Name('subprocess', Load(), lineno=59, col_offset=39), 'STDOUT', Load(), lineno=59, col_offset=39))], None, None, lineno=58, col_offset=15), lineno=58, col_offset=8)], lineno=57, col_offset=9)], [], lineno=54, col_offset=0), FunctionDef('spawn_python', arguments([], 'args', 'kwargs', []), [Assign([Name('cmd_line', Store(), lineno=62, col_offset=4)], List([Attribute(Name('sys', Load(), lineno=62, col_offset=16), 'executable', Load(), lineno=62, col_offset=16), Str('-E', lineno=62, col_offset=32)], Load(), lineno=62, col_offset=15), lineno=62, col_offset=4), Expr(Call(Attribute(Name('cmd_line', Load(), lineno=63, col_offset=4), 'extend', Load(), lineno=63, col_offset=4), [Name('args', Load(), lineno=63, col_offset=20)], [], None, None, lineno=63, col_offset=4), lineno=63, col_offset=4), Return(Call(Attribute(Name('subprocess', Load(), lineno=64, col_offset=11), 'Popen', Load(), lineno=64, col_offset=11), [Name('cmd_line', Load(), lineno=64, col_offset=28)], [keyword('stdin', Attribute(Name('subprocess', Load(), lineno=64, col_offset=44), 'PIPE', Load(), lineno=64, col_offset=44)), keyword('stdout', Attribute(Name('subprocess', Load(), lineno=65, col_offset=35), 'PIPE', Load(), lineno=65, col_offset=35)), keyword('stderr', Attribute(Name('subprocess', Load(), lineno=65, col_offset=59), 'STDOUT', Load(), lineno=65, col_offset=59))], None, Name('kwargs', Load(), lineno=66, col_offset=30), lineno=64, col_offset=11), lineno=64, col_offset=4)], [], lineno=61, col_offset=0), FunctionDef('kill_python', arguments([Name('p', Param(), lineno=68, col_offset=16)], None, None, []), [Expr(Call(Attribute(Attribute(Name('p', Load(), lineno=69, col_offset=4), 'stdin', Load(), lineno=69, col_offset=4), 'close', Load(), lineno=69, col_offset=4), [], [], None, None, lineno=69, col_offset=4), lineno=69, col_offset=4), Assign([Name('data', Store(), lineno=70, col_offset=4)], Call(Attribute(Attribute(Name('p', Load(), lineno=70, col_offset=11), 'stdout', Load(), lineno=70, col_offset=11), 'read', Load(), lineno=70, col_offset=11), [], [], None, None, lineno=70, col_offset=11), lineno=70, col_offset=4), Expr(Call(Attribute(Attribute(Name('p', Load(), lineno=71, col_offset=4), 'stdout', Load(), lineno=71, col_offset=4), 'close', Load(), lineno=71, col_offset=4), [], [], None, None, lineno=71, col_offset=4), lineno=71, col_offset=4), Expr(Call(Attribute(Name('p', Load(), lineno=74, col_offset=4), 'wait', Load(), lineno=74, col_offset=4), [], [], None, None, lineno=74, col_offset=4), lineno=74, col_offset=4), Expr(Call(Attribute(Name('subprocess', Load(), lineno=75, col_offset=4), '_cleanup', Load(), lineno=75, col_offset=4), [], [], None, None, lineno=75, col_offset=4), lineno=75, col_offset=4), Return(Name('data', Load(), lineno=76, col_offset=11), lineno=76, col_offset=4)], [], lineno=68, col_offset=0), FunctionDef('run_python', arguments([], 'args', 'kwargs', []), [If(Name('__debug__', Load(), lineno=79, col_offset=7), [Assign([Name('p', Store(), lineno=80, col_offset=8)], Call(Name('spawn_python', Load(), lineno=80, col_offset=12), [], [], Name('args', Load(), lineno=80, col_offset=26), Name('kwargs', Load(), lineno=80, col_offset=34), lineno=80, col_offset=12), lineno=80, col_offset=8)], [Assign([Name('p', Store(), lineno=82, col_offset=8)], Call(Name('spawn_python', Load(), lineno=82, col_offset=12), [Str('-O', lineno=82, col_offset=25)], [], Name('args', Load(), lineno=82, col_offset=32), Name('kwargs', Load(), lineno=82, col_offset=40), lineno=82, col_offset=12), lineno=82, col_offset=8)], lineno=79, col_offset=4), Assign([Name('stdout_data', Store(), lineno=83, col_offset=4)], Call(Name('kill_python', Load(), lineno=83, col_offset=18), [Name('p', Load(), lineno=83, col_offset=30)], [], None, None, lineno=83, col_offset=18), lineno=83, col_offset=4), Return(Tuple([Call(Attribute(Name('p', Load(), lineno=84, col_offset=11), 'wait', Load(), lineno=84, col_offset=11), [], [], None, None, lineno=84, col_offset=11), Name('stdout_data', Load(), lineno=84, col_offset=21)], Load(), lineno=84, col_offset=11), lineno=84, col_offset=4)], [], lineno=78, col_offset=0), FunctionDef('temp_dir', arguments([], None, None, []), [Assign([Name('dirname', Store(), lineno=89, col_offset=4)], Call(Attribute(Name('tempfile', Load(), lineno=89, col_offset=14), 'mkdtemp', Load(), lineno=89, col_offset=14), [], [], None, None, lineno=89, col_offset=14), lineno=89, col_offset=4), Assign([Name('dirname', Store(), lineno=90, col_offset=4)], Call(Attribute(Attribute(Name('os', Load(), lineno=90, col_offset=14), 'path', Load(), lineno=90, col_offset=14), 'realpath', Load(), lineno=90, col_offset=14), [Name('dirname', Load(), lineno=90, col_offset=31)], [], None, None, lineno=90, col_offset=14), lineno=90, col_offset=4), TryFinally([Expr(Yield(Name('dirname', Load(), lineno=92, col_offset=14), lineno=92, col_offset=8), lineno=92, col_offset=8)], [Expr(Call(Attribute(Name('shutil', Load(), lineno=94, col_offset=8), 'rmtree', Load(), lineno=94, col_offset=8), [Name('dirname', Load(), lineno=94, col_offset=22)], [], None, None, lineno=94, col_offset=8), lineno=94, col_offset=8)], lineno=91, col_offset=4)], [Attribute(Name('contextlib', Load(), lineno=87, col_offset=1), 'contextmanager', Load(), lineno=87, col_offset=1)], lineno=87, col_offset=0), FunctionDef('make_script', arguments([Name('script_dir', Param(), lineno=96, col_offset=16), Name('script_basename', Param(), lineno=96, col_offset=28), Name('source', Param(), lineno=96, col_offset=45)], None, None, []), [Assign([Name('script_filename', Store(), lineno=97, col_offset=4)], BinOp(BinOp(Name('script_basename', Load(), lineno=97, col_offset=22), Add(), Attribute(Name('os', Load(), lineno=97, col_offset=38), 'extsep', Load(), lineno=97, col_offset=38), lineno=97, col_offset=22), Add(), Str('py', lineno=97, col_offset=48), lineno=97, col_offset=47), lineno=97, col_offset=4), Assign([Name('script_name', Store(), lineno=98, col_offset=4)], Call(Attribute(Attribute(Name('os', Load(), lineno=98, col_offset=18), 'path', Load(), lineno=98, col_offset=18), 'join', Load(), lineno=98, col_offset=18), [Name('script_dir', Load(), lineno=98, col_offset=31), Name('script_filename', Load(), lineno=98, col_offset=43)], [], None, None, lineno=98, col_offset=18), lineno=98, col_offset=4), Assign([Name('script_file', Store(), lineno=99, col_offset=4)], Call(Name('open', Load(), lineno=99, col_offset=18), [Name('script_name', Load(), lineno=99, col_offset=23), Str('w', lineno=99, col_offset=36)], [], None, None, lineno=99, col_offset=18), lineno=99, col_offset=4), Expr(Call(Attribute(Name('script_file', Load(), lineno=100, col_offset=4), 'write', Load(), lineno=100, col_offset=4), [Name('source', Load(), lineno=100, col_offset=22)], [], None, None, lineno=100, col_offset=4), lineno=100, col_offset=4), Expr(Call(Attribute(Name('script_file', Load(), lineno=101, col_offset=4), 'close', Load(), lineno=101, col_offset=4), [], [], None, None, lineno=101, col_offset=4), lineno=101, col_offset=4), Return(Name('script_name', Load(), lineno=102, col_offset=11), lineno=102, col_offset=4)], [], lineno=96, col_offset=0), FunctionDef('compile_script', arguments([Name('script_name', Param(), lineno=104, col_offset=19)], None, None, []), [Expr(Call(Attribute(Name('py_compile', Load(), lineno=105, col_offset=4), 'compile', Load(), lineno=105, col_offset=4), [Name('script_name', Load(), lineno=105, col_offset=23)], [keyword('doraise', Name('True', Load(), lineno=105, col_offset=44))], None, None, lineno=105, col_offset=4), lineno=105, col_offset=4), If(Name('__debug__', Load(), lineno=106, col_offset=7), [Assign([Name('compiled_name', Store(), lineno=107, col_offset=8)], BinOp(Name('script_name', Load(), lineno=107, col_offset=24), Add(), Str('c', lineno=107, col_offset=38), lineno=107, col_offset=24), lineno=107, col_offset=8)], [Assign([Name('compiled_name', Store(), lineno=109, col_offset=8)], BinOp(Name('script_name', Load(), lineno=109, col_offset=24), Add(), Str('o', lineno=109, col_offset=38), lineno=109, col_offset=24), lineno=109, col_offset=8)], lineno=106, col_offset=4), Return(Name('compiled_name', Load(), lineno=110, col_offset=11), lineno=110, col_offset=4)], [], lineno=104, col_offset=0), FunctionDef('make_zip_script', arguments([Name('zip_dir', Param(), lineno=112, col_offset=20), Name('zip_basename', Param(), lineno=112, col_offset=29), Name('script_name', Param(), lineno=112, col_offset=43), Name('name_in_zip', Param(), lineno=112, col_offset=56)], None, None, [Name('None', Load(), lineno=112, col_offset=68)]), [Assign([Name('zip_filename', Store(), lineno=113, col_offset=4)], BinOp(BinOp(Name('zip_basename', Load(), lineno=113, col_offset=19), Add(), Attribute(Name('os', Load(), lineno=113, col_offset=32), 'extsep', Load(), lineno=113, col_offset=32), lineno=113, col_offset=19), Add(), Str('zip', lineno=113, col_offset=42), lineno=113, col_offset=41), lineno=113, col_offset=4), Assign([Name('zip_name', Store(), lineno=114, col_offset=4)], Call(Attribute(Attribute(Name('os', Load(), lineno=114, col_offset=15), 'path', Load(), lineno=114, col_offset=15), 'join', Load(), lineno=114, col_offset=15), [Name('zip_dir', Load(), lineno=114, col_offset=28), Name('zip_filename', Load(), lineno=114, col_offset=37)], [], None, None, lineno=114, col_offset=15), lineno=114, col_offset=4), Assign([Name('zip_file', Store(), lineno=115, col_offset=4)], Call(Attribute(Name('zipfile', Load(), lineno=115, col_offset=15), 'ZipFile', Load(), lineno=115, col_offset=15), [Name('zip_name', Load(), lineno=115, col_offset=31), Str('w', lineno=115, col_offset=41)], [], None, None, lineno=115, col_offset=15), lineno=115, col_offset=4), If(Compare(Name('name_in_zip', Load(), lineno=116, col_offset=7), [Is()], [Name('None', Load(), lineno=116, col_offset=22)], lineno=116, col_offset=7), [Assign([Name('name_in_zip', Store(), lineno=117, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=117, col_offset=22), 'path', Load(), lineno=117, col_offset=22), 'basename', Load(), lineno=117, col_offset=22), [Name('script_name', Load(), lineno=117, col_offset=39)], [], None, None, lineno=117, col_offset=22), lineno=117, col_offset=8)], [], lineno=116, col_offset=4), Expr(Call(Attribute(Name('zip_file', Load(), lineno=118, col_offset=4), 'write', Load(), lineno=118, col_offset=4), [Name('script_name', Load(), lineno=118, col_offset=19), Name('name_in_zip', Load(), lineno=118, col_offset=32)], [], None, None, lineno=118, col_offset=4), lineno=118, col_offset=4), Expr(Call(Attribute(Name('zip_file', Load(), lineno=119, col_offset=4), 'close', Load(), lineno=119, col_offset=4), [], [], None, None, lineno=119, col_offset=4), lineno=119, col_offset=4), Return(Tuple([Name('zip_name', Load(), lineno=125, col_offset=11), Call(Attribute(Attribute(Name('os', Load(), lineno=125, col_offset=21), 'path', Load(), lineno=125, col_offset=21), 'join', Load(), lineno=125, col_offset=21), [Name('zip_name', Load(), lineno=125, col_offset=34), Name('name_in_zip', Load(), lineno=125, col_offset=44)], [], None, None, lineno=125, col_offset=21)], Load(), lineno=125, col_offset=11), lineno=125, col_offset=4)], [], lineno=112, col_offset=0), FunctionDef('make_pkg', arguments([Name('pkg_dir', Param(), lineno=127, col_offset=13)], None, None, []), [Expr(Call(Attribute(Name('os', Load(), lineno=128, col_offset=4), 'mkdir', Load(), lineno=128, col_offset=4), [Name('pkg_dir', Load(), lineno=128, col_offset=13)], [], None, None, lineno=128, col_offset=4), lineno=128, col_offset=4), Expr(Call(Name('make_script', Load(), lineno=129, col_offset=4), [Name('pkg_dir', Load(), lineno=129, col_offset=16), Str('__init__', lineno=129, col_offset=25), Str('', lineno=129, col_offset=37)], [], None, None, lineno=129, col_offset=4), lineno=129, col_offset=4)], [], lineno=127, col_offset=0), FunctionDef('make_zip_pkg', arguments([Name('zip_dir', Param(), lineno=131, col_offset=17), Name('zip_basename', Param(), lineno=131, col_offset=26), Name('pkg_name', Param(), lineno=131, col_offset=40), Name('script_basename', Param(), lineno=131, col_offset=50), Name('source', Param(), lineno=132, col_offset=17), Name('depth', Param(), lineno=132, col_offset=25), Name('compiled', Param(), lineno=132, col_offset=34)], None, None, [Num(1, lineno=132, col_offset=31), Name('False', Load(), lineno=132, col_offset=43)]), [Assign([Name('unlink', Store(), lineno=133, col_offset=4)], List([], Load(), lineno=133, col_offset=13), lineno=133, col_offset=4), Assign([Name('init_name', Store(), lineno=134, col_offset=4)], Call(Name('make_script', Load(), lineno=134, col_offset=16), [Name('zip_dir', Load(), lineno=134, col_offset=28), Str('__init__', lineno=134, col_offset=37), Str('', lineno=134, col_offset=49)], [], None, None, lineno=134, col_offset=16), lineno=134, col_offset=4), Expr(Call(Attribute(Name('unlink', Load(), lineno=135, col_offset=4), 'append', Load(), lineno=135, col_offset=4), [Name('init_name', Load(), lineno=135, col_offset=18)], [], None, None, lineno=135, col_offset=4), lineno=135, col_offset=4), Assign([Name('init_basename', Store(), lineno=136, col_offset=4)], Call(Attribute(Attribute(Name('os', Load(), lineno=136, col_offset=20), 'path', Load(), lineno=136, col_offset=20), 'basename', Load(), lineno=136, col_offset=20), [Name('init_name', Load(), lineno=136, col_offset=37)], [], None, None, lineno=136, col_offset=20), lineno=136, col_offset=4), Assign([Name('script_name', Store(), lineno=137, col_offset=4)], Call(Name('make_script', Load(), lineno=137, col_offset=18), [Name('zip_dir', Load(), lineno=137, col_offset=30), Name('script_basename', Load(), lineno=137, col_offset=39), Name('source', Load(), lineno=137, col_offset=56)], [], None, None, lineno=137, col_offset=18), lineno=137, col_offset=4), Expr(Call(Attribute(Name('unlink', Load(), lineno=138, col_offset=4), 'append', Load(), lineno=138, col_offset=4), [Name('script_name', Load(), lineno=138, col_offset=18)], [], None, None, lineno=138, col_offset=4), lineno=138, col_offset=4), If(Name('compiled', Load(), lineno=139, col_offset=7), [Assign([Name('init_name', Store(), lineno=140, col_offset=8)], Call(Name('compile_script', Load(), lineno=140, col_offset=20), [Name('init_name', Load(), lineno=140, col_offset=35)], [], None, None, lineno=140, col_offset=20), lineno=140, col_offset=8), Assign([Name('script_name', Store(), lineno=141, col_offset=8)], Call(Name('compile_script', Load(), lineno=141, col_offset=22), [Name('script_name', Load(), lineno=141, col_offset=37)], [], None, None, lineno=141, col_offset=22), lineno=141, col_offset=8), Expr(Call(Attribute(Name('unlink', Load(), lineno=142, col_offset=8), 'extend', Load(), lineno=142, col_offset=8), [Tuple([Name('init_name', Load(), lineno=142, col_offset=23), Name('script_name', Load(), lineno=142, col_offset=34)], Load(), lineno=142, col_offset=23)], [], None, None, lineno=142, col_offset=8), lineno=142, col_offset=8)], [], lineno=139, col_offset=4), Assign([Name('pkg_names', Store(), lineno=143, col_offset=4)], ListComp(Call(Attribute(Attribute(Name('os', Load(), lineno=143, col_offset=17), 'sep', Load(), lineno=143, col_offset=17), 'join', Load(), lineno=143, col_offset=17), [BinOp(List([Name('pkg_name', Load(), lineno=143, col_offset=30)], Load(), lineno=143, col_offset=29), Mult(), Name('i', Load(), lineno=143, col_offset=40), lineno=143, col_offset=29)], [], None, None, lineno=143, col_offset=17), [comprehension(Name('i', Store(), lineno=143, col_offset=47), Call(Name('range', Load(), lineno=143, col_offset=52), [Num(1, lineno=143, col_offset=58), BinOp(Name('depth', Load(), lineno=143, col_offset=61), Add(), Num(1, lineno=143, col_offset=67), lineno=143, col_offset=61)], [], None, None, lineno=143, col_offset=52), [])], lineno=143, col_offset=17), lineno=143, col_offset=4), Assign([Name('script_name_in_zip', Store(), lineno=144, col_offset=4)], Call(Attribute(Attribute(Name('os', Load(), lineno=144, col_offset=25), 'path', Load(), lineno=144, col_offset=25), 'join', Load(), lineno=144, col_offset=25), [Subscript(Name('pkg_names', Load(), lineno=144, col_offset=38), Index(Num(-1, lineno=144, col_offset=49)), Load(), lineno=144, col_offset=38), Call(Attribute(Attribute(Name('os', Load(), lineno=144, col_offset=53), 'path', Load(), lineno=144, col_offset=53), 'basename', Load(), lineno=144, col_offset=53), [Name('script_name', Load(), lineno=144, col_offset=70)], [], None, None, lineno=144, col_offset=53)], [], None, None, lineno=144, col_offset=25), lineno=144, col_offset=4), Assign([Name('zip_filename', Store(), lineno=145, col_offset=4)], BinOp(BinOp(Name('zip_basename', Load(), lineno=145, col_offset=19), Add(), Attribute(Name('os', Load(), lineno=145, col_offset=32), 'extsep', Load(), lineno=145, col_offset=32), lineno=145, col_offset=19), Add(), Str('zip', lineno=145, col_offset=42), lineno=145, col_offset=41), lineno=145, col_offset=4), Assign([Name('zip_name', Store(), lineno=146, col_offset=4)], Call(Attribute(Attribute(Name('os', Load(), lineno=146, col_offset=15), 'path', Load(), lineno=146, col_offset=15), 'join', Load(), lineno=146, col_offset=15), [Name('zip_dir', Load(), lineno=146, col_offset=28), Name('zip_filename', Load(), lineno=146, col_offset=37)], [], None, None, lineno=146, col_offset=15), lineno=146, col_offset=4), Assign([Name('zip_file', Store(), lineno=147, col_offset=4)], Call(Attribute(Name('zipfile', Load(), lineno=147, col_offset=15), 'ZipFile', Load(), lineno=147, col_offset=15), [Name('zip_name', Load(), lineno=147, col_offset=31), Str('w', lineno=147, col_offset=41)], [], None, None, lineno=147, col_offset=15), lineno=147, col_offset=4), For(Name('name', Store(), lineno=148, col_offset=8), Name('pkg_names', Load(), lineno=148, col_offset=16), [Assign([Name('init_name_in_zip', Store(), lineno=149, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=149, col_offset=27), 'path', Load(), lineno=149, col_offset=27), 'join', Load(), lineno=149, col_offset=27), [Name('name', Load(), lineno=149, col_offset=40), Name('init_basename', Load(), lineno=149, col_offset=46)], [], None, None, lineno=149, col_offset=27), lineno=149, col_offset=8), Expr(Call(Attribute(Name('zip_file', Load(), lineno=150, col_offset=8), 'write', Load(), lineno=150, col_offset=8), [Name('init_name', Load(), lineno=150, col_offset=23), Name('init_name_in_zip', Load(), lineno=150, col_offset=34)], [], None, None, lineno=150, col_offset=8), lineno=150, col_offset=8)], [], lineno=148, col_offset=4), Expr(Call(Attribute(Name('zip_file', Load(), lineno=151, col_offset=4), 'write', Load(), lineno=151, col_offset=4), [Name('script_name', Load(), lineno=151, col_offset=19), Name('script_name_in_zip', Load(), lineno=151, col_offset=32)], [], None, None, lineno=151, col_offset=4), lineno=151, col_offset=4), Expr(Call(Attribute(Name('zip_file', Load(), lineno=152, col_offset=4), 'close', Load(), lineno=152, col_offset=4), [], [], None, None, lineno=152, col_offset=4), lineno=152, col_offset=4), For(Name('name', Store(), lineno=153, col_offset=8), Name('unlink', Load(), lineno=153, col_offset=16), [Expr(Call(Attribute(Name('os', Load(), lineno=154, col_offset=8), 'unlink', Load(), lineno=154, col_offset=8), [Name('name', Load(), lineno=154, col_offset=18)], [], None, None, lineno=154, col_offset=8), lineno=154, col_offset=8)], [], lineno=153, col_offset=4), Return(Tuple([Name('zip_name', Load(), lineno=160, col_offset=11), Call(Attribute(Attribute(Name('os', Load(), lineno=160, col_offset=21), 'path', Load(), lineno=160, col_offset=21), 'join', Load(), lineno=160, col_offset=21), [Name('zip_name', Load(), lineno=160, col_offset=34), Name('script_name_in_zip', Load(), lineno=160, col_offset=44)], [], None, None, lineno=160, col_offset=21)], Load(), lineno=160, col_offset=11), lineno=160, col_offset=4)], [], lineno=131, col_offset=0)])
