Module([Expr(Str('Mozilla / Netscape cookie loading / saving.', lineno=1, col_offset=0), lineno=1, col_offset=0), Import([alias('re', None), alias('time', None)], lineno=3, col_offset=0), ImportFrom('cookielib', [alias('_warn_unhandled_exception', None), alias('FileCookieJar', None), alias('LoadError', None), alias('Cookie', None), alias('MISSING_FILENAME_TEXT', None)], 0, lineno=5, col_offset=0), ClassDef('MozillaCookieJar', [Name('FileCookieJar', Load(), lineno=8, col_offset=23)], [Expr(Str("\n\n    WARNING: you may want to backup your browser's cookies file if you use\n    this class to save cookies.  I *think* it works, but there have been\n    bugs in the past!\n\n    This class differs from CookieJar only in the format it uses to save and\n    load cookies to and from a file.  This class uses the Mozilla/Netscape\n    `cookies.txt' format.  lynx uses this file format, too.\n\n    Don't expect cookies saved while the browser is running to be noticed by\n    the browser (in fact, Mozilla on unix will overwrite your saved cookies if\n    you change them on disk while it's running; on Windows, you probably can't\n    save at all while the browser is running).\n\n    Note that the Mozilla/Netscape format will downgrade RFC2965 cookies to\n    Netscape cookies on saving.\n\n    In particular, the cookie version and port number information is lost,\n    together with information about whether or not Path, Port and Discard were\n    specified by the Set-Cookie2 (or Set-Cookie) header, and whether or not the\n    domain as set in the HTTP header started with a dot (yes, I'm aware some\n    domains in Netscape files start with a dot and some don't -- trust me, you\n    really don't want to know any more about this).\n\n    Note that though Mozilla and Netscape use the same format, they use\n    slightly different headers.  The class saves cookies using the Netscape\n    header by default (Mozilla can cope with that).\n\n    ", lineno=38, col_offset=-1), lineno=38, col_offset=-1), Assign([Name('magic_re', Store(), lineno=39, col_offset=4)], Str('#( Netscape)? HTTP Cookie File', lineno=39, col_offset=15), lineno=39, col_offset=4), Assign([Name('header', Store(), lineno=40, col_offset=4)], Str('# Netscape HTTP Cookie File\n# http://www.netscape.com/newsref/std/cookie_spec.html\n# This is a generated file!  Do not edit.\n\n', lineno=45, col_offset=-1), lineno=40, col_offset=4), FunctionDef('_really_load', arguments([Name('self', Param(), lineno=47, col_offset=21), Name('f', Param(), lineno=47, col_offset=27), Name('filename', Param(), lineno=47, col_offset=30), Name('ignore_discard', Param(), lineno=47, col_offset=40), Name('ignore_expires', Param(), lineno=47, col_offset=56)], None, None, []), [Assign([Name('now', Store(), lineno=48, col_offset=8)], Call(Attribute(Name('time', Load(), lineno=48, col_offset=14), 'time', Load(), lineno=48, col_offset=14), [], [], None, None, lineno=48, col_offset=14), lineno=48, col_offset=8), Assign([Name('magic', Store(), lineno=50, col_offset=8)], Call(Attribute(Name('f', Load(), lineno=50, col_offset=16), 'readline', Load(), lineno=50, col_offset=16), [], [], None, None, lineno=50, col_offset=16), lineno=50, col_offset=8), If(UnaryOp(Not(), Call(Attribute(Name('re', Load(), lineno=51, col_offset=15), 'search', Load(), lineno=51, col_offset=15), [Attribute(Name('self', Load(), lineno=51, col_offset=25), 'magic_re', Load(), lineno=51, col_offset=25), Name('magic', Load(), lineno=51, col_offset=40)], [], None, None, lineno=51, col_offset=15), lineno=51, col_offset=11), [Expr(Call(Attribute(Name('f', Load(), lineno=52, col_offset=12), 'close', Load(), lineno=52, col_offset=12), [], [], None, None, lineno=52, col_offset=12), lineno=52, col_offset=12), Raise(Call(Name('LoadError', Load(), lineno=53, col_offset=18), [BinOp(Str('%r does not look like a Netscape format cookies file', lineno=54, col_offset=16), Mod(), Name('filename', Load(), lineno=55, col_offset=16), lineno=54, col_offset=16)], [], None, None, lineno=53, col_offset=18), None, None, lineno=53, col_offset=12)], [], lineno=51, col_offset=8), TryExcept([While(Num(1, lineno=58, col_offset=18), [Assign([Name('line', Store(), lineno=59, col_offset=16)], Call(Attribute(Name('f', Load(), lineno=59, col_offset=23), 'readline', Load(), lineno=59, col_offset=23), [], [], None, None, lineno=59, col_offset=23), lineno=59, col_offset=16), If(Compare(Name('line', Load(), lineno=60, col_offset=19), [Eq()], [Str('', lineno=60, col_offset=27)], lineno=60, col_offset=19), [Break( lineno=60, col_offset=31)], [], lineno=60, col_offset=16), If(Call(Attribute(Name('line', Load(), lineno=63, col_offset=19), 'endswith', Load(), lineno=63, col_offset=19), [Str('\n', lineno=63, col_offset=33)], [], None, None, lineno=63, col_offset=19), [Assign([Name('line', Store(), lineno=63, col_offset=40)], Subscript(Name('line', Load(), lineno=63, col_offset=47), Slice(None, Num(-1, lineno=63, col_offset=54), None), Load(), lineno=63, col_offset=47), lineno=63, col_offset=40)], [], lineno=63, col_offset=16), If(BoolOp(Or(), [Call(Attribute(Call(Attribute(Name('line', Load(), lineno=66, col_offset=20), 'strip', Load(), lineno=66, col_offset=20), [], [], None, None, lineno=66, col_offset=20), 'startswith', Load(), lineno=66, col_offset=20), [Tuple([Str('#', lineno=66, col_offset=45), Str('$', lineno=66, col_offset=50)], Load(), lineno=66, col_offset=45)], [], None, None, lineno=66, col_offset=20), Compare(Call(Attribute(Name('line', Load(), lineno=67, col_offset=20), 'strip', Load(), lineno=67, col_offset=20), [], [], None, None, lineno=67, col_offset=20), [Eq()], [Str('', lineno=67, col_offset=36)], lineno=67, col_offset=20)], lineno=66, col_offset=20), [Continue( lineno=68, col_offset=20)], [], lineno=66, col_offset=16), Assign([Tuple([Name('domain', Store(), lineno=70, col_offset=16), Name('domain_specified', Store(), lineno=70, col_offset=24), Name('path', Store(), lineno=70, col_offset=42), Name('secure', Store(), lineno=70, col_offset=48), Name('expires', Store(), lineno=70, col_offset=56), Name('name', Store(), lineno=70, col_offset=65), Name('value', Store(), lineno=70, col_offset=71)], Store(), lineno=70, col_offset=16)], Call(Attribute(Name('line', Load(), lineno=71, col_offset=24), 'split', Load(), lineno=71, col_offset=24), [Str('\t', lineno=71, col_offset=35)], [], None, None, lineno=71, col_offset=24), lineno=70, col_offset=16), Assign([Name('secure', Store(), lineno=72, col_offset=16)], Compare(Name('secure', Load(), lineno=72, col_offset=26), [Eq()], [Str('TRUE', lineno=72, col_offset=36)], lineno=72, col_offset=26), lineno=72, col_offset=16), Assign([Name('domain_specified', Store(), lineno=73, col_offset=16)], Compare(Name('domain_specified', Load(), lineno=73, col_offset=36), [Eq()], [Str('TRUE', lineno=73, col_offset=56)], lineno=73, col_offset=36), lineno=73, col_offset=16), If(Compare(Name('name', Load(), lineno=74, col_offset=19), [Eq()], [Str('', lineno=74, col_offset=27)], lineno=74, col_offset=19), [Assign([Name('name', Store(), lineno=78, col_offset=20)], Name('value', Load(), lineno=78, col_offset=27), lineno=78, col_offset=20), Assign([Name('value', Store(), lineno=79, col_offset=20)], Name('None', Load(), lineno=79, col_offset=28), lineno=79, col_offset=20)], [], lineno=74, col_offset=16), Assign([Name('initial_dot', Store(), lineno=81, col_offset=16)], Call(Attribute(Name('domain', Load(), lineno=81, col_offset=30), 'startswith', Load(), lineno=81, col_offset=30), [Str('.', lineno=81, col_offset=48)], [], None, None, lineno=81, col_offset=30), lineno=81, col_offset=16), Assert(Compare(Name('domain_specified', Load(), lineno=82, col_offset=23), [Eq()], [Name('initial_dot', Load(), lineno=82, col_offset=43)], lineno=82, col_offset=23), None, lineno=82, col_offset=16), Assign([Name('discard', Store(), lineno=84, col_offset=16)], Name('False', Load(), lineno=84, col_offset=26), lineno=84, col_offset=16), If(Compare(Name('expires', Load(), lineno=85, col_offset=19), [Eq()], [Str('', lineno=85, col_offset=30)], lineno=85, col_offset=19), [Assign([Name('expires', Store(), lineno=86, col_offset=20)], Name('None', Load(), lineno=86, col_offset=30), lineno=86, col_offset=20), Assign([Name('discard', Store(), lineno=87, col_offset=20)], Name('True', Load(), lineno=87, col_offset=30), lineno=87, col_offset=20)], [], lineno=85, col_offset=16), Assign([Name('c', Store(), lineno=90, col_offset=16)], Call(Name('Cookie', Load(), lineno=90, col_offset=20), [Num(0, lineno=90, col_offset=27), Name('name', Load(), lineno=90, col_offset=30), Name('value', Load(), lineno=90, col_offset=36), Name('None', Load(), lineno=91, col_offset=27), Name('False', Load(), lineno=91, col_offset=33), Name('domain', Load(), lineno=92, col_offset=27), Name('domain_specified', Load(), lineno=92, col_offset=35), Name('initial_dot', Load(), lineno=92, col_offset=53), Name('path', Load(), lineno=93, col_offset=27), Name('False', Load(), lineno=93, col_offset=33), Name('secure', Load(), lineno=94, col_offset=27), Name('expires', Load(), lineno=95, col_offset=27), Name('discard', Load(), lineno=96, col_offset=27), Name('None', Load(), lineno=97, col_offset=27), Name('None', Load(), lineno=98, col_offset=27), Dict([], [], lineno=99, col_offset=27)], [], None, None, lineno=90, col_offset=20), lineno=90, col_offset=16), If(BoolOp(And(), [UnaryOp(Not(), Name('ignore_discard', Load(), lineno=100, col_offset=23), lineno=100, col_offset=19), Attribute(Name('c', Load(), lineno=100, col_offset=42), 'discard', Load(), lineno=100, col_offset=42)], lineno=100, col_offset=19), [Continue( lineno=101, col_offset=20)], [], lineno=100, col_offset=16), If(BoolOp(And(), [UnaryOp(Not(), Name('ignore_expires', Load(), lineno=102, col_offset=23), lineno=102, col_offset=19), Call(Attribute(Name('c', Load(), lineno=102, col_offset=42), 'is_expired', Load(), lineno=102, col_offset=42), [Name('now', Load(), lineno=102, col_offset=55)], [], None, None, lineno=102, col_offset=42)], lineno=102, col_offset=19), [Continue( lineno=103, col_offset=20)], [], lineno=102, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=104, col_offset=16), 'set_cookie', Load(), lineno=104, col_offset=16), [Name('c', Load(), lineno=104, col_offset=32)], [], None, None, lineno=104, col_offset=16), lineno=104, col_offset=16)], [], lineno=58, col_offset=12)], [ExceptHandler(Name('IOError', Load(), lineno=106, col_offset=15), None, [Raise(None, None, None, lineno=107, col_offset=12)], lineno=106, col_offset=8), ExceptHandler(Name('Exception', Load(), lineno=108, col_offset=15), None, [Expr(Call(Name('_warn_unhandled_exception', Load(), lineno=109, col_offset=12), [], [], None, None, lineno=109, col_offset=12), lineno=109, col_offset=12), Raise(Call(Name('LoadError', Load(), lineno=110, col_offset=18), [BinOp(Str('invalid Netscape format cookies file %r: %r', lineno=110, col_offset=28), Mod(), Tuple([Name('filename', Load(), lineno=111, col_offset=29), Name('line', Load(), lineno=111, col_offset=39)], Load(), lineno=111, col_offset=29), lineno=110, col_offset=28)], [], None, None, lineno=110, col_offset=18), None, None, lineno=110, col_offset=12)], lineno=108, col_offset=8)], [], lineno=57, col_offset=8)], [], lineno=47, col_offset=4), FunctionDef('save', arguments([Name('self', Param(), lineno=113, col_offset=13), Name('filename', Param(), lineno=113, col_offset=19), Name('ignore_discard', Param(), lineno=113, col_offset=34), Name('ignore_expires', Param(), lineno=113, col_offset=56)], None, None, [Name('None', Load(), lineno=113, col_offset=28), Name('False', Load(), lineno=113, col_offset=49), Name('False', Load(), lineno=113, col_offset=71)]), [If(Compare(Name('filename', Load(), lineno=114, col_offset=11), [Is()], [Name('None', Load(), lineno=114, col_offset=23)], lineno=114, col_offset=11), [If(Compare(Attribute(Name('self', Load(), lineno=115, col_offset=15), 'filename', Load(), lineno=115, col_offset=15), [IsNot()], [Name('None', Load(), lineno=115, col_offset=36)], lineno=115, col_offset=15), [Assign([Name('filename', Store(), lineno=115, col_offset=42)], Attribute(Name('self', Load(), lineno=115, col_offset=53), 'filename', Load(), lineno=115, col_offset=53), lineno=115, col_offset=42)], [Raise(Call(Name('ValueError', Load(), lineno=116, col_offset=24), [Name('MISSING_FILENAME_TEXT', Load(), lineno=116, col_offset=35)], [], None, None, lineno=116, col_offset=24), None, None, lineno=116, col_offset=18)], lineno=115, col_offset=12)], [], lineno=114, col_offset=8), Assign([Name('f', Store(), lineno=118, col_offset=8)], Call(Name('open', Load(), lineno=118, col_offset=12), [Name('filename', Load(), lineno=118, col_offset=17), Str('w', lineno=118, col_offset=27)], [], None, None, lineno=118, col_offset=12), lineno=118, col_offset=8), TryFinally([Expr(Call(Attribute(Name('f', Load(), lineno=120, col_offset=12), 'write', Load(), lineno=120, col_offset=12), [Attribute(Name('self', Load(), lineno=120, col_offset=20), 'header', Load(), lineno=120, col_offset=20)], [], None, None, lineno=120, col_offset=12), lineno=120, col_offset=12), Assign([Name('now', Store(), lineno=121, col_offset=12)], Call(Attribute(Name('time', Load(), lineno=121, col_offset=18), 'time', Load(), lineno=121, col_offset=18), [], [], None, None, lineno=121, col_offset=18), lineno=121, col_offset=12), For(Name('cookie', Store(), lineno=122, col_offset=16), Name('self', Load(), lineno=122, col_offset=26), [If(BoolOp(And(), [UnaryOp(Not(), Name('ignore_discard', Load(), lineno=123, col_offset=23), lineno=123, col_offset=19), Attribute(Name('cookie', Load(), lineno=123, col_offset=42), 'discard', Load(), lineno=123, col_offset=42)], lineno=123, col_offset=19), [Continue( lineno=124, col_offset=20)], [], lineno=123, col_offset=16), If(BoolOp(And(), [UnaryOp(Not(), Name('ignore_expires', Load(), lineno=125, col_offset=23), lineno=125, col_offset=19), Call(Attribute(Name('cookie', Load(), lineno=125, col_offset=42), 'is_expired', Load(), lineno=125, col_offset=42), [Name('now', Load(), lineno=125, col_offset=60)], [], None, None, lineno=125, col_offset=42)], lineno=125, col_offset=19), [Continue( lineno=126, col_offset=20)], [], lineno=125, col_offset=16), If(Attribute(Name('cookie', Load(), lineno=127, col_offset=19), 'secure', Load(), lineno=127, col_offset=19), [Assign([Name('secure', Store(), lineno=127, col_offset=34)], Str('TRUE', lineno=127, col_offset=43), lineno=127, col_offset=34)], [Assign([Name('secure', Store(), lineno=128, col_offset=22)], Str('FALSE', lineno=128, col_offset=31), lineno=128, col_offset=22)], lineno=127, col_offset=16), If(Call(Attribute(Attribute(Name('cookie', Load(), lineno=129, col_offset=19), 'domain', Load(), lineno=129, col_offset=19), 'startswith', Load(), lineno=129, col_offset=19), [Str('.', lineno=129, col_offset=44)], [], None, None, lineno=129, col_offset=19), [Assign([Name('initial_dot', Store(), lineno=129, col_offset=50)], Str('TRUE', lineno=129, col_offset=64), lineno=129, col_offset=50)], [Assign([Name('initial_dot', Store(), lineno=130, col_offset=22)], Str('FALSE', lineno=130, col_offset=36), lineno=130, col_offset=22)], lineno=129, col_offset=16), If(Compare(Attribute(Name('cookie', Load(), lineno=131, col_offset=19), 'expires', Load(), lineno=131, col_offset=19), [IsNot()], [Name('None', Load(), lineno=131, col_offset=41)], lineno=131, col_offset=19), [Assign([Name('expires', Store(), lineno=132, col_offset=20)], Call(Name('str', Load(), lineno=132, col_offset=30), [Attribute(Name('cookie', Load(), lineno=132, col_offset=34), 'expires', Load(), lineno=132, col_offset=34)], [], None, None, lineno=132, col_offset=30), lineno=132, col_offset=20)], [Assign([Name('expires', Store(), lineno=134, col_offset=20)], Str('', lineno=134, col_offset=30), lineno=134, col_offset=20)], lineno=131, col_offset=16), If(Compare(Attribute(Name('cookie', Load(), lineno=135, col_offset=19), 'value', Load(), lineno=135, col_offset=19), [Is()], [Name('None', Load(), lineno=135, col_offset=35)], lineno=135, col_offset=19), [Assign([Name('name', Store(), lineno=139, col_offset=20)], Str('', lineno=139, col_offset=27), lineno=139, col_offset=20), Assign([Name('value', Store(), lineno=140, col_offset=20)], Attribute(Name('cookie', Load(), lineno=140, col_offset=28), 'name', Load(), lineno=140, col_offset=28), lineno=140, col_offset=20)], [Assign([Name('name', Store(), lineno=142, col_offset=20)], Attribute(Name('cookie', Load(), lineno=142, col_offset=27), 'name', Load(), lineno=142, col_offset=27), lineno=142, col_offset=20), Assign([Name('value', Store(), lineno=143, col_offset=20)], Attribute(Name('cookie', Load(), lineno=143, col_offset=28), 'value', Load(), lineno=143, col_offset=28), lineno=143, col_offset=20)], lineno=135, col_offset=16), Expr(Call(Attribute(Name('f', Load(), lineno=144, col_offset=16), 'write', Load(), lineno=144, col_offset=16), [BinOp(Call(Attribute(Str('\t', lineno=145, col_offset=20), 'join', Load(), lineno=145, col_offset=20), [List([Attribute(Name('cookie', Load(), lineno=145, col_offset=31), 'domain', Load(), lineno=145, col_offset=31), Name('initial_dot', Load(), lineno=145, col_offset=46), Attribute(Name('cookie', Load(), lineno=145, col_offset=59), 'path', Load(), lineno=145, col_offset=59), Name('secure', Load(), lineno=146, col_offset=31), Name('expires', Load(), lineno=146, col_offset=39), Name('name', Load(), lineno=146, col_offset=48), Name('value', Load(), lineno=146, col_offset=54)], Load(), lineno=145, col_offset=30)], [], None, None, lineno=145, col_offset=20), Add(), Str('\n', lineno=147, col_offset=20), lineno=145, col_offset=20)], [], None, None, lineno=144, col_offset=16), lineno=144, col_offset=16)], [], lineno=122, col_offset=12)], [Expr(Call(Attribute(Name('f', Load(), lineno=149, col_offset=12), 'close', Load(), lineno=149, col_offset=12), [], [], None, None, lineno=149, col_offset=12), lineno=149, col_offset=12)], lineno=119, col_offset=8)], [], lineno=113, col_offset=4)], [], lineno=8, col_offset=0)])
