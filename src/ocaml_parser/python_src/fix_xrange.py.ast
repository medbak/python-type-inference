Module([Expr(Str('Fixer that changes xrange(...) into range(...).', lineno=4, col_offset=0), lineno=4, col_offset=0), ImportFrom(None, [alias('fixer_base', None)], 2, lineno=7, col_offset=0), ImportFrom('fixer_util', [alias('Name', None), alias('Call', None), alias('consuming_calls', None)], 2, lineno=8, col_offset=0), ImportFrom(None, [alias('patcomp', None)], 2, lineno=9, col_offset=0), ClassDef('FixXrange', [Attribute(Name('fixer_base', Load(), lineno=12, col_offset=16), 'BaseFix', Load(), lineno=12, col_offset=16)], [Assign([Name('BM_compatible', Store(), lineno=13, col_offset=4)], Name('True', Load(), lineno=13, col_offset=20), lineno=13, col_offset=4), Assign([Name('PATTERN', Store(), lineno=14, col_offset=4)], Str("\n              power<\n                 (name='range'|name='xrange') trailer< '(' args=any ')' >\n              rest=any* >\n              ", lineno=18, col_offset=-1), lineno=14, col_offset=4), FunctionDef('start_tree', arguments([Name('self', Param(), lineno=20, col_offset=19), Name('tree', Param(), lineno=20, col_offset=25), Name('filename', Param(), lineno=20, col_offset=31)], None, None, []), [Expr(Call(Attribute(Call(Name('super', Load(), lineno=21, col_offset=8), [Name('FixXrange', Load(), lineno=21, col_offset=14), Name('self', Load(), lineno=21, col_offset=25)], [], None, None, lineno=21, col_offset=8), 'start_tree', Load(), lineno=21, col_offset=8), [Name('tree', Load(), lineno=21, col_offset=42), Name('filename', Load(), lineno=21, col_offset=48)], [], None, None, lineno=21, col_offset=8), lineno=21, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=22, col_offset=8), 'transformed_xranges', Store(), lineno=22, col_offset=8)], Call(Name('set', Load(), lineno=22, col_offset=35), [], [], None, None, lineno=22, col_offset=35), lineno=22, col_offset=8)], [], lineno=20, col_offset=4), FunctionDef('finish_tree', arguments([Name('self', Param(), lineno=24, col_offset=20), Name('tree', Param(), lineno=24, col_offset=26), Name('filename', Param(), lineno=24, col_offset=32)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=25, col_offset=8), 'transformed_xranges', Store(), lineno=25, col_offset=8)], Name('None', Load(), lineno=25, col_offset=35), lineno=25, col_offset=8)], [], lineno=24, col_offset=4), FunctionDef('transform', arguments([Name('self', Param(), lineno=27, col_offset=18), Name('node', Param(), lineno=27, col_offset=24), Name('results', Param(), lineno=27, col_offset=30)], None, None, []), [Assign([Name('name', Store(), lineno=28, col_offset=8)], Subscript(Name('results', Load(), lineno=28, col_offset=15), Index(Str('name', lineno=28, col_offset=23)), Load(), lineno=28, col_offset=15), lineno=28, col_offset=8), If(Compare(Attribute(Name('name', Load(), lineno=29, col_offset=11), 'value', Load(), lineno=29, col_offset=11), [Eq()], [Str(u'xrange', lineno=29, col_offset=25)], lineno=29, col_offset=11), [Return(Call(Attribute(Name('self', Load(), lineno=30, col_offset=19), 'transform_xrange', Load(), lineno=30, col_offset=19), [Name('node', Load(), lineno=30, col_offset=41), Name('results', Load(), lineno=30, col_offset=47)], [], None, None, lineno=30, col_offset=19), lineno=30, col_offset=12)], [If(Compare(Attribute(Name('name', Load(), lineno=31, col_offset=13), 'value', Load(), lineno=31, col_offset=13), [Eq()], [Str(u'range', lineno=31, col_offset=27)], lineno=31, col_offset=13), [Return(Call(Attribute(Name('self', Load(), lineno=32, col_offset=19), 'transform_range', Load(), lineno=32, col_offset=19), [Name('node', Load(), lineno=32, col_offset=40), Name('results', Load(), lineno=32, col_offset=46)], [], None, None, lineno=32, col_offset=19), lineno=32, col_offset=12)], [Raise(Call(Name('ValueError', Load(), lineno=34, col_offset=18), [Call(Name('repr', Load(), lineno=34, col_offset=29), [Name('name', Load(), lineno=34, col_offset=34)], [], None, None, lineno=34, col_offset=29)], [], None, None, lineno=34, col_offset=18), None, None, lineno=34, col_offset=12)], lineno=31, col_offset=13)], lineno=29, col_offset=8)], [], lineno=27, col_offset=4), FunctionDef('transform_xrange', arguments([Name('self', Param(), lineno=36, col_offset=25), Name('node', Param(), lineno=36, col_offset=31), Name('results', Param(), lineno=36, col_offset=37)], None, None, []), [Assign([Name('name', Store(), lineno=37, col_offset=8)], Subscript(Name('results', Load(), lineno=37, col_offset=15), Index(Str('name', lineno=37, col_offset=23)), Load(), lineno=37, col_offset=15), lineno=37, col_offset=8), Expr(Call(Attribute(Name('name', Load(), lineno=38, col_offset=8), 'replace', Load(), lineno=38, col_offset=8), [Call(Name('Name', Load(), lineno=38, col_offset=21), [Str(u'range', lineno=38, col_offset=26)], [keyword('prefix', Attribute(Name('name', Load(), lineno=38, col_offset=43), 'prefix', Load(), lineno=38, col_offset=43))], None, None, lineno=38, col_offset=21)], [], None, None, lineno=38, col_offset=8), lineno=38, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=40, col_offset=8), 'transformed_xranges', Load(), lineno=40, col_offset=8), 'add', Load(), lineno=40, col_offset=8), [Call(Name('id', Load(), lineno=40, col_offset=37), [Name('node', Load(), lineno=40, col_offset=40)], [], None, None, lineno=40, col_offset=37)], [], None, None, lineno=40, col_offset=8), lineno=40, col_offset=8)], [], lineno=36, col_offset=4), FunctionDef('transform_range', arguments([Name('self', Param(), lineno=42, col_offset=24), Name('node', Param(), lineno=42, col_offset=30), Name('results', Param(), lineno=42, col_offset=36)], None, None, []), [If(BoolOp(And(), [Compare(Call(Name('id', Load(), lineno=43, col_offset=12), [Name('node', Load(), lineno=43, col_offset=15)], [], None, None, lineno=43, col_offset=12), [NotIn()], [Attribute(Name('self', Load(), lineno=43, col_offset=28), 'transformed_xranges', Load(), lineno=43, col_offset=28)], lineno=43, col_offset=12), UnaryOp(Not(), Call(Attribute(Name('self', Load(), lineno=44, col_offset=16), 'in_special_context', Load(), lineno=44, col_offset=16), [Name('node', Load(), lineno=44, col_offset=40)], [], None, None, lineno=44, col_offset=16), lineno=44, col_offset=12)], lineno=43, col_offset=12), [Assign([Name('range_call', Store(), lineno=45, col_offset=12)], Call(Name('Call', Load(), lineno=45, col_offset=25), [Call(Name('Name', Load(), lineno=45, col_offset=30), [Str(u'range', lineno=45, col_offset=35)], [], None, None, lineno=45, col_offset=30), List([Call(Attribute(Subscript(Name('results', Load(), lineno=45, col_offset=47), Index(Str('args', lineno=45, col_offset=55)), Load(), lineno=45, col_offset=47), 'clone', Load(), lineno=45, col_offset=47), [], [], None, None, lineno=45, col_offset=47)], Load(), lineno=45, col_offset=46)], [], None, None, lineno=45, col_offset=25), lineno=45, col_offset=12), Assign([Name('list_call', Store(), lineno=47, col_offset=12)], Call(Name('Call', Load(), lineno=47, col_offset=24), [Call(Name('Name', Load(), lineno=47, col_offset=29), [Str(u'list', lineno=47, col_offset=34)], [], None, None, lineno=47, col_offset=29), List([Name('range_call', Load(), lineno=47, col_offset=45)], Load(), lineno=47, col_offset=44)], [keyword('prefix', Attribute(Name('node', Load(), lineno=48, col_offset=36), 'prefix', Load(), lineno=48, col_offset=36))], None, None, lineno=47, col_offset=24), lineno=47, col_offset=12), For(Name('n', Store(), lineno=50, col_offset=16), Subscript(Name('results', Load(), lineno=50, col_offset=21), Index(Str('rest', lineno=50, col_offset=29)), Load(), lineno=50, col_offset=21), [Expr(Call(Attribute(Name('list_call', Load(), lineno=51, col_offset=16), 'append_child', Load(), lineno=51, col_offset=16), [Name('n', Load(), lineno=51, col_offset=39)], [], None, None, lineno=51, col_offset=16), lineno=51, col_offset=16)], [], lineno=50, col_offset=12), Return(Name('list_call', Load(), lineno=52, col_offset=19), lineno=52, col_offset=12)], [], lineno=43, col_offset=8)], [], lineno=42, col_offset=4), Assign([Name('P1', Store(), lineno=54, col_offset=4)], Str("power< func=NAME trailer< '(' node=any ')' > any* >", lineno=54, col_offset=9), lineno=54, col_offset=4), Assign([Name('p1', Store(), lineno=55, col_offset=4)], Call(Attribute(Name('patcomp', Load(), lineno=55, col_offset=9), 'compile_pattern', Load(), lineno=55, col_offset=9), [Name('P1', Load(), lineno=55, col_offset=33)], [], None, None, lineno=55, col_offset=9), lineno=55, col_offset=4), Assign([Name('P2', Store(), lineno=57, col_offset=4)], Str("for_stmt< 'for' any 'in' node=any ':' any* >\n            | comp_for< 'for' any 'in' node=any any* >\n            | comparison< any 'in' node=any any*>\n         ", lineno=60, col_offset=-1), lineno=57, col_offset=4), Assign([Name('p2', Store(), lineno=61, col_offset=4)], Call(Attribute(Name('patcomp', Load(), lineno=61, col_offset=9), 'compile_pattern', Load(), lineno=61, col_offset=9), [Name('P2', Load(), lineno=61, col_offset=33)], [], None, None, lineno=61, col_offset=9), lineno=61, col_offset=4), FunctionDef('in_special_context', arguments([Name('self', Param(), lineno=63, col_offset=27), Name('node', Param(), lineno=63, col_offset=33)], None, None, []), [If(Compare(Attribute(Name('node', Load(), lineno=64, col_offset=11), 'parent', Load(), lineno=64, col_offset=11), [Is()], [Name('None', Load(), lineno=64, col_offset=26)], lineno=64, col_offset=11), [Return(Name('False', Load(), lineno=65, col_offset=19), lineno=65, col_offset=12)], [], lineno=64, col_offset=8), Assign([Name('results', Store(), lineno=66, col_offset=8)], Dict([], [], lineno=66, col_offset=18), lineno=66, col_offset=8), If(BoolOp(And(), [Compare(Attribute(Attribute(Name('node', Load(), lineno=67, col_offset=12), 'parent', Load(), lineno=67, col_offset=12), 'parent', Load(), lineno=67, col_offset=12), [IsNot()], [Name('None', Load(), lineno=67, col_offset=38)], lineno=67, col_offset=12), Call(Attribute(Attribute(Name('self', Load(), lineno=68, col_offset=15), 'p1', Load(), lineno=68, col_offset=15), 'match', Load(), lineno=68, col_offset=15), [Attribute(Attribute(Name('node', Load(), lineno=68, col_offset=29), 'parent', Load(), lineno=68, col_offset=29), 'parent', Load(), lineno=68, col_offset=29), Name('results', Load(), lineno=68, col_offset=49)], [], None, None, lineno=68, col_offset=15), Compare(Subscript(Name('results', Load(), lineno=69, col_offset=15), Index(Str('node', lineno=69, col_offset=23)), Load(), lineno=69, col_offset=15), [Is()], [Name('node', Load(), lineno=69, col_offset=34)], lineno=69, col_offset=15)], lineno=67, col_offset=12), [Return(Compare(Attribute(Subscript(Name('results', Load(), lineno=71, col_offset=19), Index(Str('func', lineno=71, col_offset=27)), Load(), lineno=71, col_offset=19), 'value', Load(), lineno=71, col_offset=19), [In()], [Name('consuming_calls', Load(), lineno=71, col_offset=44)], lineno=71, col_offset=19), lineno=71, col_offset=12)], [], lineno=67, col_offset=8), Return(BoolOp(And(), [Call(Attribute(Attribute(Name('self', Load(), lineno=73, col_offset=15), 'p2', Load(), lineno=73, col_offset=15), 'match', Load(), lineno=73, col_offset=15), [Attribute(Name('node', Load(), lineno=73, col_offset=29), 'parent', Load(), lineno=73, col_offset=29), Name('results', Load(), lineno=73, col_offset=42)], [], None, None, lineno=73, col_offset=15), Compare(Subscript(Name('results', Load(), lineno=73, col_offset=55), Index(Str('node', lineno=73, col_offset=63)), Load(), lineno=73, col_offset=55), [Is()], [Name('node', Load(), lineno=73, col_offset=74)], lineno=73, col_offset=55)], lineno=73, col_offset=15), lineno=73, col_offset=8)], [], lineno=63, col_offset=4)], [], lineno=12, col_offset=0)])
