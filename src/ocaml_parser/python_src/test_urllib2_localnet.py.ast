Module([Import([alias('urlparse', None)], lineno=3, col_offset=0), Import([alias('urllib2', None)], lineno=4, col_offset=0), Import([alias('BaseHTTPServer', None)], lineno=5, col_offset=0), Import([alias('unittest', None)], lineno=6, col_offset=0), Import([alias('hashlib', None)], lineno=7, col_offset=0), ImportFrom('test', [alias('test_support', None)], 0, lineno=8, col_offset=0), Assign([Name('mimetools', Store(), lineno=9, col_offset=0)], Call(Attribute(Name('test_support', Load(), lineno=9, col_offset=12), 'import_module', Load(), lineno=9, col_offset=12), [Str('mimetools', lineno=9, col_offset=39)], [keyword('deprecated', Name('True', Load(), lineno=9, col_offset=63))], None, None, lineno=9, col_offset=12), lineno=9, col_offset=0), Assign([Name('threading', Store(), lineno=10, col_offset=0)], Call(Attribute(Name('test_support', Load(), lineno=10, col_offset=12), 'import_module', Load(), lineno=10, col_offset=12), [Str('threading', lineno=10, col_offset=39)], [], None, None, lineno=10, col_offset=12), lineno=10, col_offset=0), ClassDef('LoopbackHttpServer', [Attribute(Name('BaseHTTPServer', Load(), lineno=14, col_offset=25), 'HTTPServer', Load(), lineno=14, col_offset=25)], [Expr(Str('HTTP server w/ a few modifications that make it useful for\n    loopback testing purposes.\n    ', lineno=17, col_offset=-1), lineno=17, col_offset=-1), FunctionDef('__init__', arguments([Name('self', Param(), lineno=19, col_offset=17), Name('server_address', Param(), lineno=19, col_offset=23), Name('RequestHandlerClass', Param(), lineno=19, col_offset=39)], None, None, []), [Expr(Call(Attribute(Attribute(Name('BaseHTTPServer', Load(), lineno=20, col_offset=8), 'HTTPServer', Load(), lineno=20, col_offset=8), '__init__', Load(), lineno=20, col_offset=8), [Name('self', Load(), lineno=20, col_offset=43), Name('server_address', Load(), lineno=21, col_offset=43), Name('RequestHandlerClass', Load(), lineno=22, col_offset=43)], [], None, None, lineno=20, col_offset=8), lineno=20, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=26, col_offset=8), 'socket', Load(), lineno=26, col_offset=8), 'settimeout', Load(), lineno=26, col_offset=8), [Num(1.0, lineno=26, col_offset=31)], [], None, None, lineno=26, col_offset=8), lineno=26, col_offset=8)], [], lineno=19, col_offset=4), FunctionDef('get_request', arguments([Name('self', Param(), lineno=28, col_offset=20)], None, None, []), [Expr(Str('BaseHTTPServer method, overridden.', lineno=29, col_offset=8), lineno=29, col_offset=8), Assign([Tuple([Name('request', Store(), lineno=31, col_offset=8), Name('client_address', Store(), lineno=31, col_offset=17)], Store(), lineno=31, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=31, col_offset=34), 'socket', Load(), lineno=31, col_offset=34), 'accept', Load(), lineno=31, col_offset=34), [], [], None, None, lineno=31, col_offset=34), lineno=31, col_offset=8), Expr(Call(Attribute(Name('request', Load(), lineno=36, col_offset=8), 'settimeout', Load(), lineno=36, col_offset=8), [Num(10.0, lineno=36, col_offset=27)], [], None, None, lineno=36, col_offset=8), lineno=36, col_offset=8), Return(Tuple([Name('request', Load(), lineno=38, col_offset=16), Name('client_address', Load(), lineno=38, col_offset=25)], Load(), lineno=38, col_offset=16), lineno=38, col_offset=8)], [], lineno=28, col_offset=4)], [], lineno=14, col_offset=0), ClassDef('LoopbackHttpServerThread', [Attribute(Name('threading', Load(), lineno=40, col_offset=31), 'Thread', Load(), lineno=40, col_offset=31)], [Expr(Str('Stoppable thread that runs a loopback http server.', lineno=41, col_offset=4), lineno=41, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=43, col_offset=17), Name('request_handler', Param(), lineno=43, col_offset=23)], None, None, []), [Expr(Call(Attribute(Attribute(Name('threading', Load(), lineno=44, col_offset=8), 'Thread', Load(), lineno=44, col_offset=8), '__init__', Load(), lineno=44, col_offset=8), [Name('self', Load(), lineno=44, col_offset=34)], [], None, None, lineno=44, col_offset=8), lineno=44, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=45, col_offset=8), '_stop', Store(), lineno=45, col_offset=8)], Name('False', Load(), lineno=45, col_offset=21), lineno=45, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=46, col_offset=8), 'ready', Store(), lineno=46, col_offset=8)], Call(Attribute(Name('threading', Load(), lineno=46, col_offset=21), 'Event', Load(), lineno=46, col_offset=21), [], [], None, None, lineno=46, col_offset=21), lineno=46, col_offset=8), Assign([Attribute(Name('request_handler', Load(), lineno=47, col_offset=8), 'protocol_version', Store(), lineno=47, col_offset=8)], Str('HTTP/1.0', lineno=47, col_offset=43), lineno=47, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=48, col_offset=8), 'httpd', Store(), lineno=48, col_offset=8)], Call(Name('LoopbackHttpServer', Load(), lineno=48, col_offset=21), [Tuple([Str('127.0.0.1', lineno=48, col_offset=41), Num(0, lineno=48, col_offset=54)], Load(), lineno=48, col_offset=41), Name('request_handler', Load(), lineno=49, col_offset=40)], [], None, None, lineno=48, col_offset=21), lineno=48, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=52, col_offset=8), 'port', Store(), lineno=52, col_offset=8)], Attribute(Attribute(Name('self', Load(), lineno=52, col_offset=20), 'httpd', Load(), lineno=52, col_offset=20), 'server_port', Load(), lineno=52, col_offset=20), lineno=52, col_offset=8)], [], lineno=43, col_offset=4), FunctionDef('stop', arguments([Name('self', Param(), lineno=54, col_offset=13)], None, None, []), [Expr(Str("Stops the webserver if it's currently running.", lineno=55, col_offset=8), lineno=55, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=58, col_offset=8), '_stop', Store(), lineno=58, col_offset=8)], Name('True', Load(), lineno=58, col_offset=21), lineno=58, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=60, col_offset=8), 'join', Load(), lineno=60, col_offset=8), [], [], None, None, lineno=60, col_offset=8), lineno=60, col_offset=8)], [], lineno=54, col_offset=4), FunctionDef('run', arguments([Name('self', Param(), lineno=62, col_offset=12)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=63, col_offset=8), 'ready', Load(), lineno=63, col_offset=8), 'set', Load(), lineno=63, col_offset=8), [], [], None, None, lineno=63, col_offset=8), lineno=63, col_offset=8), While(UnaryOp(Not(), Attribute(Name('self', Load(), lineno=64, col_offset=18), '_stop', Load(), lineno=64, col_offset=18), lineno=64, col_offset=14), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=65, col_offset=12), 'httpd', Load(), lineno=65, col_offset=12), 'handle_request', Load(), lineno=65, col_offset=12), [], [], None, None, lineno=65, col_offset=12), lineno=65, col_offset=12)], [], lineno=64, col_offset=8)], [], lineno=62, col_offset=4)], [], lineno=40, col_offset=0), ClassDef('DigestAuthHandler', [], [Expr(Str('Handler for performing digest authentication.', lineno=70, col_offset=4), lineno=70, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=72, col_offset=17)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=73, col_offset=8), '_request_num', Store(), lineno=73, col_offset=8)], Num(0, lineno=73, col_offset=28), lineno=73, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=74, col_offset=8), '_nonces', Store(), lineno=74, col_offset=8)], List([], Load(), lineno=74, col_offset=23), lineno=74, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=75, col_offset=8), '_users', Store(), lineno=75, col_offset=8)], Dict([], [], lineno=75, col_offset=22), lineno=75, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=76, col_offset=8), '_realm_name', Store(), lineno=76, col_offset=8)], Str('Test Realm', lineno=76, col_offset=27), lineno=76, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=77, col_offset=8), '_qop', Store(), lineno=77, col_offset=8)], Str('auth', lineno=77, col_offset=20), lineno=77, col_offset=8)], [], lineno=72, col_offset=4), FunctionDef('set_qop', arguments([Name('self', Param(), lineno=79, col_offset=16), Name('qop', Param(), lineno=79, col_offset=22)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=80, col_offset=8), '_qop', Store(), lineno=80, col_offset=8)], Name('qop', Load(), lineno=80, col_offset=20), lineno=80, col_offset=8)], [], lineno=79, col_offset=4), FunctionDef('set_users', arguments([Name('self', Param(), lineno=82, col_offset=18), Name('users', Param(), lineno=82, col_offset=24)], None, None, []), [Assert(Call(Name('isinstance', Load(), lineno=83, col_offset=15), [Name('users', Load(), lineno=83, col_offset=26), Name('dict', Load(), lineno=83, col_offset=33)], [], None, None, lineno=83, col_offset=15), None, lineno=83, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=84, col_offset=8), '_users', Store(), lineno=84, col_offset=8)], Name('users', Load(), lineno=84, col_offset=22), lineno=84, col_offset=8)], [], lineno=82, col_offset=4), FunctionDef('set_realm', arguments([Name('self', Param(), lineno=86, col_offset=18), Name('realm', Param(), lineno=86, col_offset=24)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=87, col_offset=8), '_realm_name', Store(), lineno=87, col_offset=8)], Name('realm', Load(), lineno=87, col_offset=27), lineno=87, col_offset=8)], [], lineno=86, col_offset=4), FunctionDef('_generate_nonce', arguments([Name('self', Param(), lineno=89, col_offset=24)], None, None, []), [AugAssign(Attribute(Name('self', Load(), lineno=90, col_offset=8), '_request_num', Store(), lineno=90, col_offset=8), Add(), Num(1, lineno=90, col_offset=29), lineno=90, col_offset=8), Assign([Name('nonce', Store(), lineno=91, col_offset=8)], Call(Attribute(Call(Attribute(Name('hashlib', Load(), lineno=91, col_offset=16), 'md5', Load(), lineno=91, col_offset=16), [Call(Name('str', Load(), lineno=91, col_offset=28), [Attribute(Name('self', Load(), lineno=91, col_offset=32), '_request_num', Load(), lineno=91, col_offset=32)], [], None, None, lineno=91, col_offset=28)], [], None, None, lineno=91, col_offset=16), 'hexdigest', Load(), lineno=91, col_offset=16), [], [], None, None, lineno=91, col_offset=16), lineno=91, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=92, col_offset=8), '_nonces', Load(), lineno=92, col_offset=8), 'append', Load(), lineno=92, col_offset=8), [Name('nonce', Load(), lineno=92, col_offset=28)], [], None, None, lineno=92, col_offset=8), lineno=92, col_offset=8), Return(Name('nonce', Load(), lineno=93, col_offset=15), lineno=93, col_offset=8)], [], lineno=89, col_offset=4), FunctionDef('_create_auth_dict', arguments([Name('self', Param(), lineno=95, col_offset=26), Name('auth_str', Param(), lineno=95, col_offset=32)], None, None, []), [Assign([Name('first_space_index', Store(), lineno=96, col_offset=8)], Call(Attribute(Name('auth_str', Load(), lineno=96, col_offset=28), 'find', Load(), lineno=96, col_offset=28), [Str(' ', lineno=96, col_offset=42)], [], None, None, lineno=96, col_offset=28), lineno=96, col_offset=8), Assign([Name('auth_str', Store(), lineno=97, col_offset=8)], Subscript(Name('auth_str', Load(), lineno=97, col_offset=19), Slice(BinOp(Name('first_space_index', Load(), lineno=97, col_offset=28), Add(), Num(1, lineno=97, col_offset=46), lineno=97, col_offset=28), None, None), Load(), lineno=97, col_offset=19), lineno=97, col_offset=8), Assign([Name('parts', Store(), lineno=99, col_offset=8)], Call(Attribute(Name('auth_str', Load(), lineno=99, col_offset=16), 'split', Load(), lineno=99, col_offset=16), [Str(',', lineno=99, col_offset=31)], [], None, None, lineno=99, col_offset=16), lineno=99, col_offset=8), Assign([Name('auth_dict', Store(), lineno=101, col_offset=8)], Dict([], [], lineno=101, col_offset=20), lineno=101, col_offset=8), For(Name('part', Store(), lineno=102, col_offset=12), Name('parts', Load(), lineno=102, col_offset=20), [Assign([Tuple([Name('name', Store(), lineno=103, col_offset=12), Name('value', Store(), lineno=103, col_offset=18)], Store(), lineno=103, col_offset=12)], Call(Attribute(Name('part', Load(), lineno=103, col_offset=26), 'split', Load(), lineno=103, col_offset=26), [Str('=', lineno=103, col_offset=37)], [], None, None, lineno=103, col_offset=26), lineno=103, col_offset=12), Assign([Name('name', Store(), lineno=104, col_offset=12)], Call(Attribute(Name('name', Load(), lineno=104, col_offset=19), 'strip', Load(), lineno=104, col_offset=19), [], [], None, None, lineno=104, col_offset=19), lineno=104, col_offset=12), If(BoolOp(And(), [Compare(Subscript(Name('value', Load(), lineno=105, col_offset=15), Index(Num(0, lineno=105, col_offset=21)), Load(), lineno=105, col_offset=15), [Eq()], [Str('"', lineno=105, col_offset=27)], lineno=105, col_offset=15), Compare(Subscript(Name('value', Load(), lineno=105, col_offset=35), Index(Num(-1, lineno=105, col_offset=42)), Load(), lineno=105, col_offset=35), [Eq()], [Str('"', lineno=105, col_offset=48)], lineno=105, col_offset=35)], lineno=105, col_offset=15), [Assign([Name('value', Store(), lineno=106, col_offset=16)], Subscript(Name('value', Load(), lineno=106, col_offset=24), Slice(Num(1, lineno=106, col_offset=30), Num(-1, lineno=106, col_offset=33), None), Load(), lineno=106, col_offset=24), lineno=106, col_offset=16)], [Assign([Name('value', Store(), lineno=108, col_offset=16)], Call(Attribute(Name('value', Load(), lineno=108, col_offset=24), 'strip', Load(), lineno=108, col_offset=24), [], [], None, None, lineno=108, col_offset=24), lineno=108, col_offset=16)], lineno=105, col_offset=12), Assign([Subscript(Name('auth_dict', Load(), lineno=109, col_offset=12), Index(Name('name', Load(), lineno=109, col_offset=22)), Store(), lineno=109, col_offset=12)], Name('value', Load(), lineno=109, col_offset=30), lineno=109, col_offset=12)], [], lineno=102, col_offset=8), Return(Name('auth_dict', Load(), lineno=110, col_offset=15), lineno=110, col_offset=8)], [], lineno=95, col_offset=4), FunctionDef('_validate_auth', arguments([Name('self', Param(), lineno=112, col_offset=23), Name('auth_dict', Param(), lineno=112, col_offset=29), Name('password', Param(), lineno=112, col_offset=40), Name('method', Param(), lineno=112, col_offset=50), Name('uri', Param(), lineno=112, col_offset=58)], None, None, []), [Assign([Name('final_dict', Store(), lineno=113, col_offset=8)], Dict([], [], lineno=113, col_offset=21), lineno=113, col_offset=8), Expr(Call(Attribute(Name('final_dict', Load(), lineno=114, col_offset=8), 'update', Load(), lineno=114, col_offset=8), [Name('auth_dict', Load(), lineno=114, col_offset=26)], [], None, None, lineno=114, col_offset=8), lineno=114, col_offset=8), Assign([Subscript(Name('final_dict', Load(), lineno=115, col_offset=8), Index(Str('password', lineno=115, col_offset=19)), Store(), lineno=115, col_offset=8)], Name('password', Load(), lineno=115, col_offset=33), lineno=115, col_offset=8), Assign([Subscript(Name('final_dict', Load(), lineno=116, col_offset=8), Index(Str('method', lineno=116, col_offset=19)), Store(), lineno=116, col_offset=8)], Name('method', Load(), lineno=116, col_offset=31), lineno=116, col_offset=8), Assign([Subscript(Name('final_dict', Load(), lineno=117, col_offset=8), Index(Str('uri', lineno=117, col_offset=19)), Store(), lineno=117, col_offset=8)], Name('uri', Load(), lineno=117, col_offset=28), lineno=117, col_offset=8), Assign([Name('HA1_str', Store(), lineno=118, col_offset=8)], BinOp(Str('%(username)s:%(realm)s:%(password)s', lineno=118, col_offset=18), Mod(), Name('final_dict', Load(), lineno=118, col_offset=58), lineno=118, col_offset=18), lineno=118, col_offset=8), Assign([Name('HA1', Store(), lineno=119, col_offset=8)], Call(Attribute(Call(Attribute(Name('hashlib', Load(), lineno=119, col_offset=14), 'md5', Load(), lineno=119, col_offset=14), [Name('HA1_str', Load(), lineno=119, col_offset=26)], [], None, None, lineno=119, col_offset=14), 'hexdigest', Load(), lineno=119, col_offset=14), [], [], None, None, lineno=119, col_offset=14), lineno=119, col_offset=8), Assign([Name('HA2_str', Store(), lineno=120, col_offset=8)], BinOp(Str('%(method)s:%(uri)s', lineno=120, col_offset=18), Mod(), Name('final_dict', Load(), lineno=120, col_offset=41), lineno=120, col_offset=18), lineno=120, col_offset=8), Assign([Name('HA2', Store(), lineno=121, col_offset=8)], Call(Attribute(Call(Attribute(Name('hashlib', Load(), lineno=121, col_offset=14), 'md5', Load(), lineno=121, col_offset=14), [Name('HA2_str', Load(), lineno=121, col_offset=26)], [], None, None, lineno=121, col_offset=14), 'hexdigest', Load(), lineno=121, col_offset=14), [], [], None, None, lineno=121, col_offset=14), lineno=121, col_offset=8), Assign([Subscript(Name('final_dict', Load(), lineno=122, col_offset=8), Index(Str('HA1', lineno=122, col_offset=19)), Store(), lineno=122, col_offset=8)], Name('HA1', Load(), lineno=122, col_offset=28), lineno=122, col_offset=8), Assign([Subscript(Name('final_dict', Load(), lineno=123, col_offset=8), Index(Str('HA2', lineno=123, col_offset=19)), Store(), lineno=123, col_offset=8)], Name('HA2', Load(), lineno=123, col_offset=28), lineno=123, col_offset=8), Assign([Name('response_str', Store(), lineno=124, col_offset=8)], BinOp(Str('%(HA1)s:%(nonce)s:%(nc)s:%(cnonce)s:%(qop)s:%(HA2)s', lineno=124, col_offset=23), Mod(), Name('final_dict', Load(), lineno=125, col_offset=54), lineno=124, col_offset=23), lineno=124, col_offset=8), Assign([Name('response', Store(), lineno=126, col_offset=8)], Call(Attribute(Call(Attribute(Name('hashlib', Load(), lineno=126, col_offset=19), 'md5', Load(), lineno=126, col_offset=19), [Name('response_str', Load(), lineno=126, col_offset=31)], [], None, None, lineno=126, col_offset=19), 'hexdigest', Load(), lineno=126, col_offset=19), [], [], None, None, lineno=126, col_offset=19), lineno=126, col_offset=8), Return(Compare(Name('response', Load(), lineno=128, col_offset=15), [Eq()], [Subscript(Name('auth_dict', Load(), lineno=128, col_offset=27), Index(Str('response', lineno=128, col_offset=37)), Load(), lineno=128, col_offset=27)], lineno=128, col_offset=15), lineno=128, col_offset=8)], [], lineno=112, col_offset=4), FunctionDef('_return_auth_challenge', arguments([Name('self', Param(), lineno=130, col_offset=31), Name('request_handler', Param(), lineno=130, col_offset=37)], None, None, []), [Expr(Call(Attribute(Name('request_handler', Load(), lineno=131, col_offset=8), 'send_response', Load(), lineno=131, col_offset=8), [Num(407, lineno=131, col_offset=38), Str('Proxy Authentication Required', lineno=131, col_offset=43)], [], None, None, lineno=131, col_offset=8), lineno=131, col_offset=8), Expr(Call(Attribute(Name('request_handler', Load(), lineno=132, col_offset=8), 'send_header', Load(), lineno=132, col_offset=8), [Str('Content-Type', lineno=132, col_offset=36), Str('text/html', lineno=132, col_offset=52)], [], None, None, lineno=132, col_offset=8), lineno=132, col_offset=8), Expr(Call(Attribute(Name('request_handler', Load(), lineno=133, col_offset=8), 'send_header', Load(), lineno=133, col_offset=8), [Str('Proxy-Authenticate', lineno=134, col_offset=12), BinOp(Str('Digest realm="%s", qop="%s",nonce="%s", ', lineno=134, col_offset=34), Mod(), Tuple([Attribute(Name('self', Load(), lineno=137, col_offset=13), '_realm_name', Load(), lineno=137, col_offset=13), Attribute(Name('self', Load(), lineno=137, col_offset=31), '_qop', Load(), lineno=137, col_offset=31), Call(Attribute(Name('self', Load(), lineno=137, col_offset=42), '_generate_nonce', Load(), lineno=137, col_offset=42), [], [], None, None, lineno=137, col_offset=42)], Load(), lineno=137, col_offset=13), lineno=134, col_offset=34)], [], None, None, lineno=133, col_offset=8), lineno=133, col_offset=8), Expr(Call(Attribute(Name('request_handler', Load(), lineno=141, col_offset=8), 'end_headers', Load(), lineno=141, col_offset=8), [], [], None, None, lineno=141, col_offset=8), lineno=141, col_offset=8), Expr(Call(Attribute(Attribute(Name('request_handler', Load(), lineno=142, col_offset=8), 'wfile', Load(), lineno=142, col_offset=8), 'write', Load(), lineno=142, col_offset=8), [Str('Proxy Authentication Required.', lineno=142, col_offset=36)], [], None, None, lineno=142, col_offset=8), lineno=142, col_offset=8), Return(Name('False', Load(), lineno=143, col_offset=15), lineno=143, col_offset=8)], [], lineno=130, col_offset=4), FunctionDef('handle_request', arguments([Name('self', Param(), lineno=145, col_offset=23), Name('request_handler', Param(), lineno=145, col_offset=29)], None, None, []), [Expr(Str('Performs digest authentication on the given HTTP request\n        handler.  Returns True if authentication was successful, False\n        otherwise.\n\n        If no users have been set, then digest auth is effectively\n        disabled and this method will always return True.\n        ', lineno=152, col_offset=-1), lineno=152, col_offset=-1), If(Compare(Call(Name('len', Load(), lineno=154, col_offset=11), [Attribute(Name('self', Load(), lineno=154, col_offset=15), '_users', Load(), lineno=154, col_offset=15)], [], None, None, lineno=154, col_offset=11), [Eq()], [Num(0, lineno=154, col_offset=31)], lineno=154, col_offset=11), [Return(Name('True', Load(), lineno=155, col_offset=19), lineno=155, col_offset=12)], [], lineno=154, col_offset=8), If(Compare(Str('Proxy-Authorization', lineno=157, col_offset=11), [NotIn()], [Attribute(Name('request_handler', Load(), lineno=157, col_offset=40), 'headers', Load(), lineno=157, col_offset=40)], lineno=157, col_offset=11), [Return(Call(Attribute(Name('self', Load(), lineno=158, col_offset=19), '_return_auth_challenge', Load(), lineno=158, col_offset=19), [Name('request_handler', Load(), lineno=158, col_offset=47)], [], None, None, lineno=158, col_offset=19), lineno=158, col_offset=12)], [Assign([Name('auth_dict', Store(), lineno=160, col_offset=12)], Call(Attribute(Name('self', Load(), lineno=160, col_offset=24), '_create_auth_dict', Load(), lineno=160, col_offset=24), [Subscript(Attribute(Name('request_handler', Load(), lineno=161, col_offset=16), 'headers', Load(), lineno=161, col_offset=16), Index(Str('Proxy-Authorization', lineno=161, col_offset=40)), Load(), lineno=161, col_offset=16)], [], None, None, lineno=160, col_offset=24), lineno=160, col_offset=12), If(Compare(Subscript(Name('auth_dict', Load(), lineno=163, col_offset=15), Index(Str('username', lineno=163, col_offset=25)), Load(), lineno=163, col_offset=15), [In()], [Attribute(Name('self', Load(), lineno=163, col_offset=40), '_users', Load(), lineno=163, col_offset=40)], lineno=163, col_offset=15), [Assign([Name('password', Store(), lineno=164, col_offset=16)], Subscript(Attribute(Name('self', Load(), lineno=164, col_offset=27), '_users', Load(), lineno=164, col_offset=27), Index(Subscript(Name('auth_dict', Load(), lineno=164, col_offset=40), Index(Str('username', lineno=164, col_offset=50)), Load(), lineno=164, col_offset=40)), Load(), lineno=164, col_offset=27), lineno=164, col_offset=16)], [Return(Call(Attribute(Name('self', Load(), lineno=166, col_offset=23), '_return_auth_challenge', Load(), lineno=166, col_offset=23), [Name('request_handler', Load(), lineno=166, col_offset=51)], [], None, None, lineno=166, col_offset=23), lineno=166, col_offset=16)], lineno=163, col_offset=12), If(UnaryOp(Not(), Compare(Call(Attribute(Name('auth_dict', Load(), lineno=167, col_offset=19), 'get', Load(), lineno=167, col_offset=19), [Str('nonce', lineno=167, col_offset=33)], [], None, None, lineno=167, col_offset=19), [In()], [Attribute(Name('self', Load(), lineno=167, col_offset=45), '_nonces', Load(), lineno=167, col_offset=45)], lineno=167, col_offset=19), lineno=167, col_offset=15), [Return(Call(Attribute(Name('self', Load(), lineno=168, col_offset=23), '_return_auth_challenge', Load(), lineno=168, col_offset=23), [Name('request_handler', Load(), lineno=168, col_offset=51)], [], None, None, lineno=168, col_offset=23), lineno=168, col_offset=16)], [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=170, col_offset=16), '_nonces', Load(), lineno=170, col_offset=16), 'remove', Load(), lineno=170, col_offset=16), [Subscript(Name('auth_dict', Load(), lineno=170, col_offset=36), Index(Str('nonce', lineno=170, col_offset=46)), Load(), lineno=170, col_offset=36)], [], None, None, lineno=170, col_offset=16), lineno=170, col_offset=16)], lineno=167, col_offset=12), Assign([Name('auth_validated', Store(), lineno=172, col_offset=12)], Name('False', Load(), lineno=172, col_offset=29), lineno=172, col_offset=12), For(Name('path', Store(), lineno=178, col_offset=16), List([Attribute(Name('request_handler', Load(), lineno=178, col_offset=25), 'path', Load(), lineno=178, col_offset=25), Attribute(Name('request_handler', Load(), lineno=178, col_offset=47), 'short_path', Load(), lineno=178, col_offset=47)], Load(), lineno=178, col_offset=24), [If(Call(Attribute(Name('self', Load(), lineno=179, col_offset=19), '_validate_auth', Load(), lineno=179, col_offset=19), [Name('auth_dict', Load(), lineno=179, col_offset=39), Name('password', Load(), lineno=180, col_offset=39), Attribute(Name('request_handler', Load(), lineno=181, col_offset=39), 'command', Load(), lineno=181, col_offset=39), Name('path', Load(), lineno=182, col_offset=39)], [], None, None, lineno=179, col_offset=19), [Assign([Name('auth_validated', Store(), lineno=183, col_offset=20)], Name('True', Load(), lineno=183, col_offset=37), lineno=183, col_offset=20)], [], lineno=179, col_offset=16)], [], lineno=178, col_offset=12), If(UnaryOp(Not(), Name('auth_validated', Load(), lineno=185, col_offset=19), lineno=185, col_offset=15), [Return(Call(Attribute(Name('self', Load(), lineno=186, col_offset=23), '_return_auth_challenge', Load(), lineno=186, col_offset=23), [Name('request_handler', Load(), lineno=186, col_offset=51)], [], None, None, lineno=186, col_offset=23), lineno=186, col_offset=16)], [], lineno=185, col_offset=12), Return(Name('True', Load(), lineno=187, col_offset=19), lineno=187, col_offset=12)], lineno=157, col_offset=8)], [], lineno=145, col_offset=4)], [], lineno=69, col_offset=0), ClassDef('FakeProxyHandler', [Attribute(Name('BaseHTTPServer', Load(), lineno=191, col_offset=23), 'BaseHTTPRequestHandler', Load(), lineno=191, col_offset=23)], [Expr(Str("This is a 'fake proxy' that makes it look like the entire\n    internet has gone down due to a sudden zombie invasion.  It main\n    utility is in providing us with authentication support for\n    testing.\n    ", lineno=196, col_offset=-1), lineno=196, col_offset=-1), FunctionDef('__init__', arguments([Name('self', Param(), lineno=198, col_offset=17), Name('digest_auth_handler', Param(), lineno=198, col_offset=23)], 'args', 'kwargs', []), [Assign([Attribute(Name('self', Load(), lineno=201, col_offset=8), 'digest_auth_handler', Store(), lineno=201, col_offset=8)], Name('digest_auth_handler', Load(), lineno=201, col_offset=35), lineno=201, col_offset=8), Expr(Call(Attribute(Attribute(Name('BaseHTTPServer', Load(), lineno=202, col_offset=8), 'BaseHTTPRequestHandler', Load(), lineno=202, col_offset=8), '__init__', Load(), lineno=202, col_offset=8), [Name('self', Load(), lineno=202, col_offset=55)], [], Name('args', Load(), lineno=202, col_offset=62), Name('kwargs', Load(), lineno=202, col_offset=70), lineno=202, col_offset=8), lineno=202, col_offset=8)], [], lineno=198, col_offset=4), FunctionDef('log_message', arguments([Name('self', Param(), lineno=204, col_offset=20), Name('format', Param(), lineno=204, col_offset=26)], 'args', None, []), [Pass( lineno=207, col_offset=8)], [], lineno=204, col_offset=4), FunctionDef('do_GET', arguments([Name('self', Param(), lineno=209, col_offset=15)], None, None, []), [Assign([Tuple([Name('scm', Store(), lineno=210, col_offset=9), Name('netloc', Store(), lineno=210, col_offset=14), Name('path', Store(), lineno=210, col_offset=22), Name('params', Store(), lineno=210, col_offset=28), Name('query', Store(), lineno=210, col_offset=36), Name('fragment', Store(), lineno=210, col_offset=43)], Store(), lineno=210, col_offset=9)], Call(Attribute(Name('urlparse', Load(), lineno=210, col_offset=55), 'urlparse', Load(), lineno=210, col_offset=55), [Attribute(Name('self', Load(), lineno=211, col_offset=12), 'path', Load(), lineno=211, col_offset=12), Str('http', lineno=211, col_offset=23)], [], None, None, lineno=210, col_offset=55), lineno=210, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=212, col_offset=8), 'short_path', Store(), lineno=212, col_offset=8)], Name('path', Load(), lineno=212, col_offset=26), lineno=212, col_offset=8), If(Call(Attribute(Attribute(Name('self', Load(), lineno=213, col_offset=11), 'digest_auth_handler', Load(), lineno=213, col_offset=11), 'handle_request', Load(), lineno=213, col_offset=11), [Name('self', Load(), lineno=213, col_offset=51)], [], None, None, lineno=213, col_offset=11), [Expr(Call(Attribute(Name('self', Load(), lineno=214, col_offset=12), 'send_response', Load(), lineno=214, col_offset=12), [Num(200, lineno=214, col_offset=31), Str('OK', lineno=214, col_offset=36)], [], None, None, lineno=214, col_offset=12), lineno=214, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=215, col_offset=12), 'send_header', Load(), lineno=215, col_offset=12), [Str('Content-Type', lineno=215, col_offset=29), Str('text/html', lineno=215, col_offset=45)], [], None, None, lineno=215, col_offset=12), lineno=215, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=216, col_offset=12), 'end_headers', Load(), lineno=216, col_offset=12), [], [], None, None, lineno=216, col_offset=12), lineno=216, col_offset=12), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=217, col_offset=12), 'wfile', Load(), lineno=217, col_offset=12), 'write', Load(), lineno=217, col_offset=12), [BinOp(Str("You've reached %s!<BR>", lineno=217, col_offset=29), Mod(), Attribute(Name('self', Load(), lineno=217, col_offset=56), 'path', Load(), lineno=217, col_offset=56), lineno=217, col_offset=29)], [], None, None, lineno=217, col_offset=12), lineno=217, col_offset=12), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=218, col_offset=12), 'wfile', Load(), lineno=218, col_offset=12), 'write', Load(), lineno=218, col_offset=12), [Str('Our apologies, but our server is down due to a sudden zombie invasion.', lineno=218, col_offset=29)], [], None, None, lineno=218, col_offset=12), lineno=218, col_offset=12)], [], lineno=213, col_offset=8)], [], lineno=209, col_offset=4)], [], lineno=191, col_offset=0), ClassDef('BaseTestCase', [Attribute(Name('unittest', Load(), lineno=223, col_offset=19), 'TestCase', Load(), lineno=223, col_offset=19)], [FunctionDef('setUp', arguments([Name('self', Param(), lineno=224, col_offset=14)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=225, col_offset=8), '_threads', Store(), lineno=225, col_offset=8)], Call(Attribute(Name('test_support', Load(), lineno=225, col_offset=24), 'threading_setup', Load(), lineno=225, col_offset=24), [], [], None, None, lineno=225, col_offset=24), lineno=225, col_offset=8)], [], lineno=224, col_offset=4), FunctionDef('tearDown', arguments([Name('self', Param(), lineno=227, col_offset=17)], None, None, []), [Expr(Call(Attribute(Name('test_support', Load(), lineno=228, col_offset=8), 'threading_cleanup', Load(), lineno=228, col_offset=8), [], [], Attribute(Name('self', Load(), lineno=228, col_offset=40), '_threads', Load(), lineno=228, col_offset=40), None, lineno=228, col_offset=8), lineno=228, col_offset=8)], [], lineno=227, col_offset=4)], [], lineno=223, col_offset=0), ClassDef('ProxyAuthTests', [Name('BaseTestCase', Load(), lineno=231, col_offset=21)], [Assign([Name('URL', Store(), lineno=232, col_offset=4)], Str('http://localhost', lineno=232, col_offset=10), lineno=232, col_offset=4), Assign([Name('USER', Store(), lineno=234, col_offset=4)], Str('tester', lineno=234, col_offset=11), lineno=234, col_offset=4), Assign([Name('PASSWD', Store(), lineno=235, col_offset=4)], Str('test123', lineno=235, col_offset=13), lineno=235, col_offset=4), Assign([Name('REALM', Store(), lineno=236, col_offset=4)], Str('TestRealm', lineno=236, col_offset=12), lineno=236, col_offset=4), FunctionDef('setUp', arguments([Name('self', Param(), lineno=238, col_offset=14)], None, None, []), [Expr(Call(Attribute(Call(Name('super', Load(), lineno=239, col_offset=8), [Name('ProxyAuthTests', Load(), lineno=239, col_offset=14), Name('self', Load(), lineno=239, col_offset=30)], [], None, None, lineno=239, col_offset=8), 'setUp', Load(), lineno=239, col_offset=8), [], [], None, None, lineno=239, col_offset=8), lineno=239, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=240, col_offset=8), 'digest_auth_handler', Store(), lineno=240, col_offset=8)], Call(Name('DigestAuthHandler', Load(), lineno=240, col_offset=35), [], [], None, None, lineno=240, col_offset=35), lineno=240, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=241, col_offset=8), 'digest_auth_handler', Load(), lineno=241, col_offset=8), 'set_users', Load(), lineno=241, col_offset=8), [Dict([Attribute(Name('self', Load(), lineno=241, col_offset=44), 'USER', Load(), lineno=241, col_offset=44)], [Attribute(Name('self', Load(), lineno=241, col_offset=55), 'PASSWD', Load(), lineno=241, col_offset=55)], lineno=241, col_offset=43)], [], None, None, lineno=241, col_offset=8), lineno=241, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=242, col_offset=8), 'digest_auth_handler', Load(), lineno=242, col_offset=8), 'set_realm', Load(), lineno=242, col_offset=8), [Attribute(Name('self', Load(), lineno=242, col_offset=43), 'REALM', Load(), lineno=242, col_offset=43)], [], None, None, lineno=242, col_offset=8), lineno=242, col_offset=8), FunctionDef('create_fake_proxy_handler', arguments([], 'args', 'kwargs', []), [Return(Call(Name('FakeProxyHandler', Load(), lineno=244, col_offset=19), [Attribute(Name('self', Load(), lineno=244, col_offset=36), 'digest_auth_handler', Load(), lineno=244, col_offset=36)], [], Name('args', Load(), lineno=244, col_offset=63), Name('kwargs', Load(), lineno=244, col_offset=71), lineno=244, col_offset=19), lineno=244, col_offset=12)], [], lineno=243, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=246, col_offset=8), 'server', Store(), lineno=246, col_offset=8)], Call(Name('LoopbackHttpServerThread', Load(), lineno=246, col_offset=22), [Name('create_fake_proxy_handler', Load(), lineno=246, col_offset=47)], [], None, None, lineno=246, col_offset=22), lineno=246, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=247, col_offset=8), 'server', Load(), lineno=247, col_offset=8), 'start', Load(), lineno=247, col_offset=8), [], [], None, None, lineno=247, col_offset=8), lineno=247, col_offset=8), Expr(Call(Attribute(Attribute(Attribute(Name('self', Load(), lineno=248, col_offset=8), 'server', Load(), lineno=248, col_offset=8), 'ready', Load(), lineno=248, col_offset=8), 'wait', Load(), lineno=248, col_offset=8), [], [], None, None, lineno=248, col_offset=8), lineno=248, col_offset=8), Assign([Name('proxy_url', Store(), lineno=249, col_offset=8)], BinOp(Str('http://127.0.0.1:%d', lineno=249, col_offset=20), Mod(), Attribute(Attribute(Name('self', Load(), lineno=249, col_offset=44), 'server', Load(), lineno=249, col_offset=44), 'port', Load(), lineno=249, col_offset=44), lineno=249, col_offset=20), lineno=249, col_offset=8), Assign([Name('handler', Store(), lineno=250, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=250, col_offset=18), 'ProxyHandler', Load(), lineno=250, col_offset=18), [Dict([Str('http', lineno=250, col_offset=40)], [Name('proxy_url', Load(), lineno=250, col_offset=49)], lineno=250, col_offset=39)], [], None, None, lineno=250, col_offset=18), lineno=250, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=251, col_offset=8), 'proxy_digest_handler', Store(), lineno=251, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=251, col_offset=36), 'ProxyDigestAuthHandler', Load(), lineno=251, col_offset=36), [], [], None, None, lineno=251, col_offset=36), lineno=251, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=252, col_offset=8), 'opener', Store(), lineno=252, col_offset=8)], Call(Attribute(Name('urllib2', Load(), lineno=252, col_offset=22), 'build_opener', Load(), lineno=252, col_offset=22), [Name('handler', Load(), lineno=252, col_offset=43), Attribute(Name('self', Load(), lineno=252, col_offset=52), 'proxy_digest_handler', Load(), lineno=252, col_offset=52)], [], None, None, lineno=252, col_offset=22), lineno=252, col_offset=8)], [], lineno=238, col_offset=4), FunctionDef('tearDown', arguments([Name('self', Param(), lineno=254, col_offset=17)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=255, col_offset=8), 'server', Load(), lineno=255, col_offset=8), 'stop', Load(), lineno=255, col_offset=8), [], [], None, None, lineno=255, col_offset=8), lineno=255, col_offset=8), Expr(Call(Attribute(Call(Name('super', Load(), lineno=256, col_offset=8), [Name('ProxyAuthTests', Load(), lineno=256, col_offset=14), Name('self', Load(), lineno=256, col_offset=30)], [], None, None, lineno=256, col_offset=8), 'tearDown', Load(), lineno=256, col_offset=8), [], [], None, None, lineno=256, col_offset=8), lineno=256, col_offset=8)], [], lineno=254, col_offset=4), FunctionDef('test_proxy_with_bad_password_raises_httperror', arguments([Name('self', Param(), lineno=258, col_offset=54)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=259, col_offset=8), 'proxy_digest_handler', Load(), lineno=259, col_offset=8), 'add_password', Load(), lineno=259, col_offset=8), [Attribute(Name('self', Load(), lineno=259, col_offset=47), 'REALM', Load(), lineno=259, col_offset=47), Attribute(Name('self', Load(), lineno=259, col_offset=59), 'URL', Load(), lineno=259, col_offset=59), Attribute(Name('self', Load(), lineno=260, col_offset=47), 'USER', Load(), lineno=260, col_offset=47), BinOp(Attribute(Name('self', Load(), lineno=260, col_offset=58), 'PASSWD', Load(), lineno=260, col_offset=58), Add(), Str('bad', lineno=260, col_offset=70), lineno=260, col_offset=58)], [], None, None, lineno=259, col_offset=8), lineno=259, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=261, col_offset=8), 'digest_auth_handler', Load(), lineno=261, col_offset=8), 'set_qop', Load(), lineno=261, col_offset=8), [Str('auth', lineno=261, col_offset=41)], [], None, None, lineno=261, col_offset=8), lineno=261, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=262, col_offset=8), 'assertRaises', Load(), lineno=262, col_offset=8), [Attribute(Name('urllib2', Load(), lineno=262, col_offset=26), 'HTTPError', Load(), lineno=262, col_offset=26), Attribute(Attribute(Name('self', Load(), lineno=263, col_offset=26), 'opener', Load(), lineno=263, col_offset=26), 'open', Load(), lineno=263, col_offset=26), Attribute(Name('self', Load(), lineno=264, col_offset=26), 'URL', Load(), lineno=264, col_offset=26)], [], None, None, lineno=262, col_offset=8), lineno=262, col_offset=8)], [], lineno=258, col_offset=4), FunctionDef('test_proxy_with_no_password_raises_httperror', arguments([Name('self', Param(), lineno=266, col_offset=53)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=267, col_offset=8), 'digest_auth_handler', Load(), lineno=267, col_offset=8), 'set_qop', Load(), lineno=267, col_offset=8), [Str('auth', lineno=267, col_offset=41)], [], None, None, lineno=267, col_offset=8), lineno=267, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=268, col_offset=8), 'assertRaises', Load(), lineno=268, col_offset=8), [Attribute(Name('urllib2', Load(), lineno=268, col_offset=26), 'HTTPError', Load(), lineno=268, col_offset=26), Attribute(Attribute(Name('self', Load(), lineno=269, col_offset=26), 'opener', Load(), lineno=269, col_offset=26), 'open', Load(), lineno=269, col_offset=26), Attribute(Name('self', Load(), lineno=270, col_offset=26), 'URL', Load(), lineno=270, col_offset=26)], [], None, None, lineno=268, col_offset=8), lineno=268, col_offset=8)], [], lineno=266, col_offset=4), FunctionDef('test_proxy_qop_auth_works', arguments([Name('self', Param(), lineno=272, col_offset=34)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=273, col_offset=8), 'proxy_digest_handler', Load(), lineno=273, col_offset=8), 'add_password', Load(), lineno=273, col_offset=8), [Attribute(Name('self', Load(), lineno=273, col_offset=47), 'REALM', Load(), lineno=273, col_offset=47), Attribute(Name('self', Load(), lineno=273, col_offset=59), 'URL', Load(), lineno=273, col_offset=59), Attribute(Name('self', Load(), lineno=274, col_offset=47), 'USER', Load(), lineno=274, col_offset=47), Attribute(Name('self', Load(), lineno=274, col_offset=58), 'PASSWD', Load(), lineno=274, col_offset=58)], [], None, None, lineno=273, col_offset=8), lineno=273, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=275, col_offset=8), 'digest_auth_handler', Load(), lineno=275, col_offset=8), 'set_qop', Load(), lineno=275, col_offset=8), [Str('auth', lineno=275, col_offset=41)], [], None, None, lineno=275, col_offset=8), lineno=275, col_offset=8), Assign([Name('result', Store(), lineno=276, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=276, col_offset=17), 'opener', Load(), lineno=276, col_offset=17), 'open', Load(), lineno=276, col_offset=17), [Attribute(Name('self', Load(), lineno=276, col_offset=34), 'URL', Load(), lineno=276, col_offset=34)], [], None, None, lineno=276, col_offset=17), lineno=276, col_offset=8), While(Call(Attribute(Name('result', Load(), lineno=277, col_offset=14), 'read', Load(), lineno=277, col_offset=14), [], [], None, None, lineno=277, col_offset=14), [Pass( lineno=278, col_offset=12)], [], lineno=277, col_offset=8), Expr(Call(Attribute(Name('result', Load(), lineno=279, col_offset=8), 'close', Load(), lineno=279, col_offset=8), [], [], None, None, lineno=279, col_offset=8), lineno=279, col_offset=8)], [], lineno=272, col_offset=4), FunctionDef('test_proxy_qop_auth_int_works_or_throws_urlerror', arguments([Name('self', Param(), lineno=281, col_offset=57)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=282, col_offset=8), 'proxy_digest_handler', Load(), lineno=282, col_offset=8), 'add_password', Load(), lineno=282, col_offset=8), [Attribute(Name('self', Load(), lineno=282, col_offset=47), 'REALM', Load(), lineno=282, col_offset=47), Attribute(Name('self', Load(), lineno=282, col_offset=59), 'URL', Load(), lineno=282, col_offset=59), Attribute(Name('self', Load(), lineno=283, col_offset=47), 'USER', Load(), lineno=283, col_offset=47), Attribute(Name('self', Load(), lineno=283, col_offset=58), 'PASSWD', Load(), lineno=283, col_offset=58)], [], None, None, lineno=282, col_offset=8), lineno=282, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=284, col_offset=8), 'digest_auth_handler', Load(), lineno=284, col_offset=8), 'set_qop', Load(), lineno=284, col_offset=8), [Str('auth-int', lineno=284, col_offset=41)], [], None, None, lineno=284, col_offset=8), lineno=284, col_offset=8), TryExcept([Assign([Name('result', Store(), lineno=286, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=286, col_offset=21), 'opener', Load(), lineno=286, col_offset=21), 'open', Load(), lineno=286, col_offset=21), [Attribute(Name('self', Load(), lineno=286, col_offset=38), 'URL', Load(), lineno=286, col_offset=38)], [], None, None, lineno=286, col_offset=21), lineno=286, col_offset=12)], [ExceptHandler(Attribute(Name('urllib2', Load(), lineno=287, col_offset=15), 'URLError', Load(), lineno=287, col_offset=15), None, [Assign([Name('result', Store(), lineno=291, col_offset=12)], Name('None', Load(), lineno=291, col_offset=21), lineno=291, col_offset=12)], lineno=287, col_offset=8)], [], lineno=285, col_offset=8), If(Name('result', Load(), lineno=292, col_offset=11), [While(Call(Attribute(Name('result', Load(), lineno=293, col_offset=18), 'read', Load(), lineno=293, col_offset=18), [], [], None, None, lineno=293, col_offset=18), [Pass( lineno=294, col_offset=16)], [], lineno=293, col_offset=12), Expr(Call(Attribute(Name('result', Load(), lineno=295, col_offset=12), 'close', Load(), lineno=295, col_offset=12), [], [], None, None, lineno=295, col_offset=12), lineno=295, col_offset=12)], [], lineno=292, col_offset=8)], [], lineno=281, col_offset=4)], [], lineno=231, col_offset=0), FunctionDef('GetRequestHandler', arguments([Name('responses', Param(), lineno=298, col_offset=22)], None, None, []), [ClassDef('FakeHTTPRequestHandler', [Attribute(Name('BaseHTTPServer', Load(), lineno=300, col_offset=33), 'BaseHTTPRequestHandler', Load(), lineno=300, col_offset=33)], [Assign([Name('server_version', Store(), lineno=302, col_offset=8)], Str('TestHTTP/', lineno=302, col_offset=25), lineno=302, col_offset=8), Assign([Name('requests', Store(), lineno=303, col_offset=8)], List([], Load(), lineno=303, col_offset=19), lineno=303, col_offset=8), Assign([Name('headers_received', Store(), lineno=304, col_offset=8)], List([], Load(), lineno=304, col_offset=27), lineno=304, col_offset=8), Assign([Name('port', Store(), lineno=305, col_offset=8)], Num(80, lineno=305, col_offset=15), lineno=305, col_offset=8), FunctionDef('do_GET', arguments([Name('self', Param(), lineno=307, col_offset=19)], None, None, []), [Assign([Name('body', Store(), lineno=308, col_offset=12)], Call(Attribute(Name('self', Load(), lineno=308, col_offset=19), 'send_head', Load(), lineno=308, col_offset=19), [], [], None, None, lineno=308, col_offset=19), lineno=308, col_offset=12), If(Name('body', Load(), lineno=309, col_offset=15), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=310, col_offset=16), 'wfile', Load(), lineno=310, col_offset=16), 'write', Load(), lineno=310, col_offset=16), [Name('body', Load(), lineno=310, col_offset=33)], [], None, None, lineno=310, col_offset=16), lineno=310, col_offset=16)], [], lineno=309, col_offset=12)], [], lineno=307, col_offset=8), FunctionDef('do_POST', arguments([Name('self', Param(), lineno=312, col_offset=20)], None, None, []), [Assign([Name('content_length', Store(), lineno=313, col_offset=12)], Subscript(Attribute(Name('self', Load(), lineno=313, col_offset=29), 'headers', Load(), lineno=313, col_offset=29), Index(Str('Content-Length', lineno=313, col_offset=42)), Load(), lineno=313, col_offset=29), lineno=313, col_offset=12), Assign([Name('post_data', Store(), lineno=314, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=314, col_offset=24), 'rfile', Load(), lineno=314, col_offset=24), 'read', Load(), lineno=314, col_offset=24), [Call(Name('int', Load(), lineno=314, col_offset=40), [Name('content_length', Load(), lineno=314, col_offset=44)], [], None, None, lineno=314, col_offset=40)], [], None, None, lineno=314, col_offset=24), lineno=314, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=315, col_offset=12), 'do_GET', Load(), lineno=315, col_offset=12), [], [], None, None, lineno=315, col_offset=12), lineno=315, col_offset=12), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=316, col_offset=12), 'requests', Load(), lineno=316, col_offset=12), 'append', Load(), lineno=316, col_offset=12), [Name('post_data', Load(), lineno=316, col_offset=33)], [], None, None, lineno=316, col_offset=12), lineno=316, col_offset=12)], [], lineno=312, col_offset=8), FunctionDef('send_head', arguments([Name('self', Param(), lineno=318, col_offset=22)], None, None, []), [Assign([Attribute(Name('FakeHTTPRequestHandler', Load(), lineno=319, col_offset=12), 'headers_received', Store(), lineno=319, col_offset=12)], Attribute(Name('self', Load(), lineno=319, col_offset=54), 'headers', Load(), lineno=319, col_offset=54), lineno=319, col_offset=12), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=320, col_offset=12), 'requests', Load(), lineno=320, col_offset=12), 'append', Load(), lineno=320, col_offset=12), [Attribute(Name('self', Load(), lineno=320, col_offset=33), 'path', Load(), lineno=320, col_offset=33)], [], None, None, lineno=320, col_offset=12), lineno=320, col_offset=12), Assign([Tuple([Name('response_code', Store(), lineno=321, col_offset=12), Name('headers', Store(), lineno=321, col_offset=27), Name('body', Store(), lineno=321, col_offset=36)], Store(), lineno=321, col_offset=12)], Call(Attribute(Name('responses', Load(), lineno=321, col_offset=43), 'pop', Load(), lineno=321, col_offset=43), [Num(0, lineno=321, col_offset=57)], [], None, None, lineno=321, col_offset=43), lineno=321, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=323, col_offset=12), 'send_response', Load(), lineno=323, col_offset=12), [Name('response_code', Load(), lineno=323, col_offset=31)], [], None, None, lineno=323, col_offset=12), lineno=323, col_offset=12), For(Tuple([Name('header', Store(), lineno=325, col_offset=17), Name('value', Store(), lineno=325, col_offset=25)], Store(), lineno=325, col_offset=17), Name('headers', Load(), lineno=325, col_offset=35), [Expr(Call(Attribute(Name('self', Load(), lineno=326, col_offset=16), 'send_header', Load(), lineno=326, col_offset=16), [Name('header', Load(), lineno=326, col_offset=33), BinOp(Name('value', Load(), lineno=326, col_offset=41), Mod(), Attribute(Name('self', Load(), lineno=326, col_offset=49), 'port', Load(), lineno=326, col_offset=49), lineno=326, col_offset=41)], [], None, None, lineno=326, col_offset=16), lineno=326, col_offset=16)], [], lineno=325, col_offset=12), If(Name('body', Load(), lineno=327, col_offset=15), [Expr(Call(Attribute(Name('self', Load(), lineno=328, col_offset=16), 'send_header', Load(), lineno=328, col_offset=16), [Str('Content-type', lineno=328, col_offset=33), Str('text/plain', lineno=328, col_offset=49)], [], None, None, lineno=328, col_offset=16), lineno=328, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=329, col_offset=16), 'end_headers', Load(), lineno=329, col_offset=16), [], [], None, None, lineno=329, col_offset=16), lineno=329, col_offset=16), Return(Name('body', Load(), lineno=330, col_offset=23), lineno=330, col_offset=16)], [], lineno=327, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=331, col_offset=12), 'end_headers', Load(), lineno=331, col_offset=12), [], [], None, None, lineno=331, col_offset=12), lineno=331, col_offset=12)], [], lineno=318, col_offset=8), FunctionDef('log_message', arguments([Name('self', Param(), lineno=333, col_offset=24)], 'args', None, []), [Pass( lineno=334, col_offset=12)], [], lineno=333, col_offset=8)], [], lineno=300, col_offset=4), Return(Name('FakeHTTPRequestHandler', Load(), lineno=337, col_offset=11), lineno=337, col_offset=4)], [], lineno=298, col_offset=0), ClassDef('TestUrlopen', [Name('BaseTestCase', Load(), lineno=340, col_offset=18)], [Expr(Str("Tests urllib2.urlopen using the network.\n\n    These tests are not exhaustive.  Assuming that testing using files does a\n    good job overall of some of the basic interface features.  There are no\n    tests exercising the optional 'data' and 'proxies' arguments.  No tests\n    for transparent redirection have been written.\n    ", lineno=347, col_offset=-1), lineno=347, col_offset=-1), FunctionDef('start_server', arguments([Name('self', Param(), lineno=349, col_offset=21), Name('responses', Param(), lineno=349, col_offset=27)], None, None, []), [Assign([Name('handler', Store(), lineno=350, col_offset=8)], Call(Name('GetRequestHandler', Load(), lineno=350, col_offset=18), [Name('responses', Load(), lineno=350, col_offset=36)], [], None, None, lineno=350, col_offset=18), lineno=350, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=352, col_offset=8), 'server', Store(), lineno=352, col_offset=8)], Call(Name('LoopbackHttpServerThread', Load(), lineno=352, col_offset=22), [Name('handler', Load(), lineno=352, col_offset=47)], [], None, None, lineno=352, col_offset=22), lineno=352, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=353, col_offset=8), 'server', Load(), lineno=353, col_offset=8), 'start', Load(), lineno=353, col_offset=8), [], [], None, None, lineno=353, col_offset=8), lineno=353, col_offset=8), Expr(Call(Attribute(Attribute(Attribute(Name('self', Load(), lineno=354, col_offset=8), 'server', Load(), lineno=354, col_offset=8), 'ready', Load(), lineno=354, col_offset=8), 'wait', Load(), lineno=354, col_offset=8), [], [], None, None, lineno=354, col_offset=8), lineno=354, col_offset=8), Assign([Name('port', Store(), lineno=355, col_offset=8)], Attribute(Attribute(Name('self', Load(), lineno=355, col_offset=15), 'server', Load(), lineno=355, col_offset=15), 'port', Load(), lineno=355, col_offset=15), lineno=355, col_offset=8), Assign([Attribute(Name('handler', Load(), lineno=356, col_offset=8), 'port', Store(), lineno=356, col_offset=8)], Name('port', Load(), lineno=356, col_offset=23), lineno=356, col_offset=8), Return(Name('handler', Load(), lineno=357, col_offset=15), lineno=357, col_offset=8)], [], lineno=349, col_offset=4), FunctionDef('test_redirection', arguments([Name('self', Param(), lineno=360, col_offset=25)], None, None, []), [Assign([Name('expected_response', Store(), lineno=361, col_offset=8)], Str('We got here...', lineno=361, col_offset=28), lineno=361, col_offset=8), Assign([Name('responses', Store(), lineno=362, col_offset=8)], List([Tuple([Num(302, lineno=363, col_offset=13), List([Tuple([Str('Location', lineno=363, col_offset=20), Str('http://localhost:%s/somewhere_else', lineno=363, col_offset=32)], Load(), lineno=363, col_offset=20)], Load(), lineno=363, col_offset=18), Str('', lineno=363, col_offset=72)], Load(), lineno=363, col_offset=13), Tuple([Num(200, lineno=364, col_offset=13), List([], Load(), lineno=364, col_offset=18), Name('expected_response', Load(), lineno=364, col_offset=22)], Load(), lineno=364, col_offset=13)], Load(), lineno=362, col_offset=20), lineno=362, col_offset=8), Assign([Name('handler', Store(), lineno=367, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=367, col_offset=18), 'start_server', Load(), lineno=367, col_offset=18), [Name('responses', Load(), lineno=367, col_offset=36)], [], None, None, lineno=367, col_offset=18), lineno=367, col_offset=8), TryFinally([Assign([Name('f', Store(), lineno=370, col_offset=12)], Call(Attribute(Name('urllib2', Load(), lineno=370, col_offset=16), 'urlopen', Load(), lineno=370, col_offset=16), [BinOp(Str('http://localhost:%s/', lineno=370, col_offset=32), Mod(), Attribute(Name('handler', Load(), lineno=370, col_offset=57), 'port', Load(), lineno=370, col_offset=57), lineno=370, col_offset=32)], [], None, None, lineno=370, col_offset=16), lineno=370, col_offset=12), Assign([Name('data', Store(), lineno=371, col_offset=12)], Call(Attribute(Name('f', Load(), lineno=371, col_offset=19), 'read', Load(), lineno=371, col_offset=19), [], [], None, None, lineno=371, col_offset=19), lineno=371, col_offset=12), Expr(Call(Attribute(Name('f', Load(), lineno=372, col_offset=12), 'close', Load(), lineno=372, col_offset=12), [], [], None, None, lineno=372, col_offset=12), lineno=372, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=374, col_offset=12), 'assertEqual', Load(), lineno=374, col_offset=12), [Name('data', Load(), lineno=374, col_offset=29), Name('expected_response', Load(), lineno=374, col_offset=35)], [], None, None, lineno=374, col_offset=12), lineno=374, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=375, col_offset=12), 'assertEqual', Load(), lineno=375, col_offset=12), [Attribute(Name('handler', Load(), lineno=375, col_offset=29), 'requests', Load(), lineno=375, col_offset=29), List([Str('/', lineno=375, col_offset=48), Str('/somewhere_else', lineno=375, col_offset=53)], Load(), lineno=375, col_offset=47)], [], None, None, lineno=375, col_offset=12), lineno=375, col_offset=12)], [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=377, col_offset=12), 'server', Load(), lineno=377, col_offset=12), 'stop', Load(), lineno=377, col_offset=12), [], [], None, None, lineno=377, col_offset=12), lineno=377, col_offset=12)], lineno=369, col_offset=8)], [], lineno=360, col_offset=4), FunctionDef('test_404', arguments([Name('self', Param(), lineno=380, col_offset=17)], None, None, []), [Assign([Name('expected_response', Store(), lineno=381, col_offset=8)], Str('Bad bad bad...', lineno=381, col_offset=28), lineno=381, col_offset=8), Assign([Name('handler', Store(), lineno=382, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=382, col_offset=18), 'start_server', Load(), lineno=382, col_offset=18), [List([Tuple([Num(404, lineno=382, col_offset=38), List([], Load(), lineno=382, col_offset=43), Name('expected_response', Load(), lineno=382, col_offset=47)], Load(), lineno=382, col_offset=38)], Load(), lineno=382, col_offset=36)], [], None, None, lineno=382, col_offset=18), lineno=382, col_offset=8), TryFinally([TryExcept([Expr(Call(Attribute(Name('urllib2', Load(), lineno=386, col_offset=16), 'urlopen', Load(), lineno=386, col_offset=16), [BinOp(Str('http://localhost:%s/weeble', lineno=386, col_offset=32), Mod(), Attribute(Name('handler', Load(), lineno=386, col_offset=63), 'port', Load(), lineno=386, col_offset=63), lineno=386, col_offset=32)], [], None, None, lineno=386, col_offset=16), lineno=386, col_offset=16)], [ExceptHandler(Attribute(Name('urllib2', Load(), lineno=387, col_offset=19), 'URLError', Load(), lineno=387, col_offset=19), Name('f', Store(), lineno=387, col_offset=37), [Pass( lineno=388, col_offset=16)], lineno=387, col_offset=12)], [Expr(Call(Attribute(Name('self', Load(), lineno=390, col_offset=16), 'fail', Load(), lineno=390, col_offset=16), [Str('404 should raise URLError', lineno=390, col_offset=26)], [], None, None, lineno=390, col_offset=16), lineno=390, col_offset=16)], lineno=385, col_offset=12), Assign([Name('data', Store(), lineno=392, col_offset=12)], Call(Attribute(Name('f', Load(), lineno=392, col_offset=19), 'read', Load(), lineno=392, col_offset=19), [], [], None, None, lineno=392, col_offset=19), lineno=392, col_offset=12), Expr(Call(Attribute(Name('f', Load(), lineno=393, col_offset=12), 'close', Load(), lineno=393, col_offset=12), [], [], None, None, lineno=393, col_offset=12), lineno=393, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=395, col_offset=12), 'assertEqual', Load(), lineno=395, col_offset=12), [Name('data', Load(), lineno=395, col_offset=29), Name('expected_response', Load(), lineno=395, col_offset=35)], [], None, None, lineno=395, col_offset=12), lineno=395, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=396, col_offset=12), 'assertEqual', Load(), lineno=396, col_offset=12), [Attribute(Name('handler', Load(), lineno=396, col_offset=29), 'requests', Load(), lineno=396, col_offset=29), List([Str('/weeble', lineno=396, col_offset=48)], Load(), lineno=396, col_offset=47)], [], None, None, lineno=396, col_offset=12), lineno=396, col_offset=12)], [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=398, col_offset=12), 'server', Load(), lineno=398, col_offset=12), 'stop', Load(), lineno=398, col_offset=12), [], [], None, None, lineno=398, col_offset=12), lineno=398, col_offset=12)], lineno=384, col_offset=8)], [], lineno=380, col_offset=4), FunctionDef('test_200', arguments([Name('self', Param(), lineno=401, col_offset=17)], None, None, []), [Assign([Name('expected_response', Store(), lineno=402, col_offset=8)], Str('pycon 2008...', lineno=402, col_offset=28), lineno=402, col_offset=8), Assign([Name('handler', Store(), lineno=403, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=403, col_offset=18), 'start_server', Load(), lineno=403, col_offset=18), [List([Tuple([Num(200, lineno=403, col_offset=38), List([], Load(), lineno=403, col_offset=43), Name('expected_response', Load(), lineno=403, col_offset=47)], Load(), lineno=403, col_offset=38)], Load(), lineno=403, col_offset=36)], [], None, None, lineno=403, col_offset=18), lineno=403, col_offset=8), TryFinally([Assign([Name('f', Store(), lineno=406, col_offset=12)], Call(Attribute(Name('urllib2', Load(), lineno=406, col_offset=16), 'urlopen', Load(), lineno=406, col_offset=16), [BinOp(Str('http://localhost:%s/bizarre', lineno=406, col_offset=32), Mod(), Attribute(Name('handler', Load(), lineno=406, col_offset=64), 'port', Load(), lineno=406, col_offset=64), lineno=406, col_offset=32)], [], None, None, lineno=406, col_offset=16), lineno=406, col_offset=12), Assign([Name('data', Store(), lineno=407, col_offset=12)], Call(Attribute(Name('f', Load(), lineno=407, col_offset=19), 'read', Load(), lineno=407, col_offset=19), [], [], None, None, lineno=407, col_offset=19), lineno=407, col_offset=12), Expr(Call(Attribute(Name('f', Load(), lineno=408, col_offset=12), 'close', Load(), lineno=408, col_offset=12), [], [], None, None, lineno=408, col_offset=12), lineno=408, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=410, col_offset=12), 'assertEqual', Load(), lineno=410, col_offset=12), [Name('data', Load(), lineno=410, col_offset=29), Name('expected_response', Load(), lineno=410, col_offset=35)], [], None, None, lineno=410, col_offset=12), lineno=410, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=411, col_offset=12), 'assertEqual', Load(), lineno=411, col_offset=12), [Attribute(Name('handler', Load(), lineno=411, col_offset=29), 'requests', Load(), lineno=411, col_offset=29), List([Str('/bizarre', lineno=411, col_offset=48)], Load(), lineno=411, col_offset=47)], [], None, None, lineno=411, col_offset=12), lineno=411, col_offset=12)], [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=413, col_offset=12), 'server', Load(), lineno=413, col_offset=12), 'stop', Load(), lineno=413, col_offset=12), [], [], None, None, lineno=413, col_offset=12), lineno=413, col_offset=12)], lineno=405, col_offset=8)], [], lineno=401, col_offset=4), FunctionDef('test_200_with_parameters', arguments([Name('self', Param(), lineno=415, col_offset=33)], None, None, []), [Assign([Name('expected_response', Store(), lineno=416, col_offset=8)], Str('pycon 2008...', lineno=416, col_offset=28), lineno=416, col_offset=8), Assign([Name('handler', Store(), lineno=417, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=417, col_offset=18), 'start_server', Load(), lineno=417, col_offset=18), [List([Tuple([Num(200, lineno=417, col_offset=38), List([], Load(), lineno=417, col_offset=43), Name('expected_response', Load(), lineno=417, col_offset=47)], Load(), lineno=417, col_offset=38)], Load(), lineno=417, col_offset=36)], [], None, None, lineno=417, col_offset=18), lineno=417, col_offset=8), TryFinally([Assign([Name('f', Store(), lineno=420, col_offset=12)], Call(Attribute(Name('urllib2', Load(), lineno=420, col_offset=16), 'urlopen', Load(), lineno=420, col_offset=16), [BinOp(Str('http://localhost:%s/bizarre', lineno=420, col_offset=32), Mod(), Attribute(Name('handler', Load(), lineno=420, col_offset=64), 'port', Load(), lineno=420, col_offset=64), lineno=420, col_offset=32), Str('get=with_feeling', lineno=420, col_offset=78)], [], None, None, lineno=420, col_offset=16), lineno=420, col_offset=12), Assign([Name('data', Store(), lineno=421, col_offset=12)], Call(Attribute(Name('f', Load(), lineno=421, col_offset=19), 'read', Load(), lineno=421, col_offset=19), [], [], None, None, lineno=421, col_offset=19), lineno=421, col_offset=12), Expr(Call(Attribute(Name('f', Load(), lineno=422, col_offset=12), 'close', Load(), lineno=422, col_offset=12), [], [], None, None, lineno=422, col_offset=12), lineno=422, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=424, col_offset=12), 'assertEqual', Load(), lineno=424, col_offset=12), [Name('data', Load(), lineno=424, col_offset=29), Name('expected_response', Load(), lineno=424, col_offset=35)], [], None, None, lineno=424, col_offset=12), lineno=424, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=425, col_offset=12), 'assertEqual', Load(), lineno=425, col_offset=12), [Attribute(Name('handler', Load(), lineno=425, col_offset=29), 'requests', Load(), lineno=425, col_offset=29), List([Str('/bizarre', lineno=425, col_offset=48), Str('get=with_feeling', lineno=425, col_offset=60)], Load(), lineno=425, col_offset=47)], [], None, None, lineno=425, col_offset=12), lineno=425, col_offset=12)], [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=427, col_offset=12), 'server', Load(), lineno=427, col_offset=12), 'stop', Load(), lineno=427, col_offset=12), [], [], None, None, lineno=427, col_offset=12), lineno=427, col_offset=12)], lineno=419, col_offset=8)], [], lineno=415, col_offset=4), FunctionDef('test_sending_headers', arguments([Name('self', Param(), lineno=430, col_offset=29)], None, None, []), [Assign([Name('handler', Store(), lineno=431, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=431, col_offset=18), 'start_server', Load(), lineno=431, col_offset=18), [List([Tuple([Num(200, lineno=431, col_offset=38), List([], Load(), lineno=431, col_offset=43), Str("we don't care", lineno=431, col_offset=47)], Load(), lineno=431, col_offset=38)], Load(), lineno=431, col_offset=36)], [], None, None, lineno=431, col_offset=18), lineno=431, col_offset=8), TryFinally([Assign([Name('req', Store(), lineno=434, col_offset=12)], Call(Attribute(Name('urllib2', Load(), lineno=434, col_offset=18), 'Request', Load(), lineno=434, col_offset=18), [BinOp(Str('http://localhost:%s/', lineno=434, col_offset=34), Mod(), Attribute(Name('handler', Load(), lineno=434, col_offset=59), 'port', Load(), lineno=434, col_offset=59), lineno=434, col_offset=34)], [keyword('headers', Dict([Str('Range', lineno=435, col_offset=43)], [Str('bytes=20-39', lineno=435, col_offset=52)], lineno=435, col_offset=42))], None, None, lineno=434, col_offset=18), lineno=434, col_offset=12), Expr(Call(Attribute(Name('urllib2', Load(), lineno=436, col_offset=12), 'urlopen', Load(), lineno=436, col_offset=12), [Name('req', Load(), lineno=436, col_offset=28)], [], None, None, lineno=436, col_offset=12), lineno=436, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=437, col_offset=12), 'assertEqual', Load(), lineno=437, col_offset=12), [Subscript(Attribute(Name('handler', Load(), lineno=437, col_offset=29), 'headers_received', Load(), lineno=437, col_offset=29), Index(Str('Range', lineno=437, col_offset=54)), Load(), lineno=437, col_offset=29), Str('bytes=20-39', lineno=437, col_offset=64)], [], None, None, lineno=437, col_offset=12), lineno=437, col_offset=12)], [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=439, col_offset=12), 'server', Load(), lineno=439, col_offset=12), 'stop', Load(), lineno=439, col_offset=12), [], [], None, None, lineno=439, col_offset=12), lineno=439, col_offset=12)], lineno=433, col_offset=8)], [], lineno=430, col_offset=4), FunctionDef('test_basic', arguments([Name('self', Param(), lineno=441, col_offset=19)], None, None, []), [Assign([Name('handler', Store(), lineno=442, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=442, col_offset=18), 'start_server', Load(), lineno=442, col_offset=18), [List([Tuple([Num(200, lineno=442, col_offset=38), List([], Load(), lineno=442, col_offset=43), Str("we don't care", lineno=442, col_offset=47)], Load(), lineno=442, col_offset=38)], Load(), lineno=442, col_offset=36)], [], None, None, lineno=442, col_offset=18), lineno=442, col_offset=8), TryFinally([Assign([Name('open_url', Store(), lineno=445, col_offset=12)], Call(Attribute(Name('urllib2', Load(), lineno=445, col_offset=23), 'urlopen', Load(), lineno=445, col_offset=23), [BinOp(Str('http://localhost:%s', lineno=445, col_offset=39), Mod(), Attribute(Name('handler', Load(), lineno=445, col_offset=63), 'port', Load(), lineno=445, col_offset=63), lineno=445, col_offset=39)], [], None, None, lineno=445, col_offset=23), lineno=445, col_offset=12), For(Name('attr', Store(), lineno=446, col_offset=16), Tuple([Str('read', lineno=446, col_offset=25), Str('close', lineno=446, col_offset=33), Str('info', lineno=446, col_offset=42), Str('geturl', lineno=446, col_offset=50)], Load(), lineno=446, col_offset=25), [Expr(Call(Attribute(Name('self', Load(), lineno=447, col_offset=16), 'assertTrue', Load(), lineno=447, col_offset=16), [Call(Name('hasattr', Load(), lineno=447, col_offset=32), [Name('open_url', Load(), lineno=447, col_offset=40), Name('attr', Load(), lineno=447, col_offset=50)], [], None, None, lineno=447, col_offset=32), BinOp(Str('object returned from urlopen lacks the %s attribute', lineno=447, col_offset=57), Mod(), Name('attr', Load(), lineno=448, col_offset=64), lineno=447, col_offset=57)], [], None, None, lineno=447, col_offset=16), lineno=447, col_offset=16)], [], lineno=446, col_offset=12), TryFinally([Expr(Call(Attribute(Name('self', Load(), lineno=450, col_offset=16), 'assertTrue', Load(), lineno=450, col_offset=16), [Call(Attribute(Name('open_url', Load(), lineno=450, col_offset=32), 'read', Load(), lineno=450, col_offset=32), [], [], None, None, lineno=450, col_offset=32), Str("calling 'read' failed", lineno=450, col_offset=49)], [], None, None, lineno=450, col_offset=16), lineno=450, col_offset=16)], [Expr(Call(Attribute(Name('open_url', Load(), lineno=452, col_offset=16), 'close', Load(), lineno=452, col_offset=16), [], [], None, None, lineno=452, col_offset=16), lineno=452, col_offset=16)], lineno=449, col_offset=12)], [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=454, col_offset=12), 'server', Load(), lineno=454, col_offset=12), 'stop', Load(), lineno=454, col_offset=12), [], [], None, None, lineno=454, col_offset=12), lineno=454, col_offset=12)], lineno=444, col_offset=8)], [], lineno=441, col_offset=4), FunctionDef('test_info', arguments([Name('self', Param(), lineno=456, col_offset=18)], None, None, []), [Assign([Name('handler', Store(), lineno=457, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=457, col_offset=18), 'start_server', Load(), lineno=457, col_offset=18), [List([Tuple([Num(200, lineno=457, col_offset=38), List([], Load(), lineno=457, col_offset=43), Str("we don't care", lineno=457, col_offset=47)], Load(), lineno=457, col_offset=38)], Load(), lineno=457, col_offset=36)], [], None, None, lineno=457, col_offset=18), lineno=457, col_offset=8), TryFinally([Assign([Name('open_url', Store(), lineno=460, col_offset=12)], Call(Attribute(Name('urllib2', Load(), lineno=460, col_offset=23), 'urlopen', Load(), lineno=460, col_offset=23), [BinOp(Str('http://localhost:%s', lineno=460, col_offset=39), Mod(), Attribute(Name('handler', Load(), lineno=460, col_offset=63), 'port', Load(), lineno=460, col_offset=63), lineno=460, col_offset=39)], [], None, None, lineno=460, col_offset=23), lineno=460, col_offset=12), Assign([Name('info_obj', Store(), lineno=461, col_offset=12)], Call(Attribute(Name('open_url', Load(), lineno=461, col_offset=23), 'info', Load(), lineno=461, col_offset=23), [], [], None, None, lineno=461, col_offset=23), lineno=461, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=462, col_offset=12), 'assertIsInstance', Load(), lineno=462, col_offset=12), [Name('info_obj', Load(), lineno=462, col_offset=34), Attribute(Name('mimetools', Load(), lineno=462, col_offset=44), 'Message', Load(), lineno=462, col_offset=44), Str("object returned by 'info' is not an instance of mimetools.Message", lineno=463, col_offset=34)], [], None, None, lineno=462, col_offset=12), lineno=462, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=465, col_offset=12), 'assertEqual', Load(), lineno=465, col_offset=12), [Call(Attribute(Name('info_obj', Load(), lineno=465, col_offset=29), 'getsubtype', Load(), lineno=465, col_offset=29), [], [], None, None, lineno=465, col_offset=29), Str('plain', lineno=465, col_offset=52)], [], None, None, lineno=465, col_offset=12), lineno=465, col_offset=12)], [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=467, col_offset=12), 'server', Load(), lineno=467, col_offset=12), 'stop', Load(), lineno=467, col_offset=12), [], [], None, None, lineno=467, col_offset=12), lineno=467, col_offset=12)], lineno=459, col_offset=8)], [], lineno=456, col_offset=4), FunctionDef('test_geturl', arguments([Name('self', Param(), lineno=469, col_offset=20)], None, None, []), [Assign([Name('handler', Store(), lineno=471, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=471, col_offset=18), 'start_server', Load(), lineno=471, col_offset=18), [List([Tuple([Num(200, lineno=471, col_offset=38), List([], Load(), lineno=471, col_offset=43), Str("we don't care", lineno=471, col_offset=47)], Load(), lineno=471, col_offset=38)], Load(), lineno=471, col_offset=36)], [], None, None, lineno=471, col_offset=18), lineno=471, col_offset=8), TryFinally([Assign([Name('open_url', Store(), lineno=474, col_offset=12)], Call(Attribute(Name('urllib2', Load(), lineno=474, col_offset=23), 'urlopen', Load(), lineno=474, col_offset=23), [BinOp(Str('http://localhost:%s', lineno=474, col_offset=39), Mod(), Attribute(Name('handler', Load(), lineno=474, col_offset=63), 'port', Load(), lineno=474, col_offset=63), lineno=474, col_offset=39)], [], None, None, lineno=474, col_offset=23), lineno=474, col_offset=12), Assign([Name('url', Store(), lineno=475, col_offset=12)], Call(Attribute(Name('open_url', Load(), lineno=475, col_offset=18), 'geturl', Load(), lineno=475, col_offset=18), [], [], None, None, lineno=475, col_offset=18), lineno=475, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=476, col_offset=12), 'assertEqual', Load(), lineno=476, col_offset=12), [Name('url', Load(), lineno=476, col_offset=29), BinOp(Str('http://localhost:%s', lineno=476, col_offset=34), Mod(), Attribute(Name('handler', Load(), lineno=476, col_offset=58), 'port', Load(), lineno=476, col_offset=58), lineno=476, col_offset=34)], [], None, None, lineno=476, col_offset=12), lineno=476, col_offset=12)], [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=478, col_offset=12), 'server', Load(), lineno=478, col_offset=12), 'stop', Load(), lineno=478, col_offset=12), [], [], None, None, lineno=478, col_offset=12), lineno=478, col_offset=12)], lineno=473, col_offset=8)], [], lineno=469, col_offset=4), FunctionDef('test_bad_address', arguments([Name('self', Param(), lineno=481, col_offset=25)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=484, col_offset=8), 'assertRaises', Load(), lineno=484, col_offset=8), [Name('IOError', Load(), lineno=484, col_offset=26), Attribute(Name('urllib2', Load(), lineno=502, col_offset=26), 'urlopen', Load(), lineno=502, col_offset=26), Str('http://sadflkjsasf.i.nvali.d./', lineno=502, col_offset=43)], [], None, None, lineno=484, col_offset=8), lineno=484, col_offset=8)], [], lineno=481, col_offset=4), FunctionDef('test_iteration', arguments([Name('self', Param(), lineno=504, col_offset=23)], None, None, []), [Assign([Name('expected_response', Store(), lineno=505, col_offset=8)], Str('pycon 2008...', lineno=505, col_offset=28), lineno=505, col_offset=8), Assign([Name('handler', Store(), lineno=506, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=506, col_offset=18), 'start_server', Load(), lineno=506, col_offset=18), [List([Tuple([Num(200, lineno=506, col_offset=38), List([], Load(), lineno=506, col_offset=43), Name('expected_response', Load(), lineno=506, col_offset=47)], Load(), lineno=506, col_offset=38)], Load(), lineno=506, col_offset=36)], [], None, None, lineno=506, col_offset=18), lineno=506, col_offset=8), TryFinally([Assign([Name('data', Store(), lineno=508, col_offset=12)], Call(Attribute(Name('urllib2', Load(), lineno=508, col_offset=19), 'urlopen', Load(), lineno=508, col_offset=19), [BinOp(Str('http://localhost:%s', lineno=508, col_offset=35), Mod(), Attribute(Name('handler', Load(), lineno=508, col_offset=59), 'port', Load(), lineno=508, col_offset=59), lineno=508, col_offset=35)], [], None, None, lineno=508, col_offset=19), lineno=508, col_offset=12), For(Name('line', Store(), lineno=509, col_offset=16), Name('data', Load(), lineno=509, col_offset=24), [Expr(Call(Attribute(Name('self', Load(), lineno=510, col_offset=16), 'assertEqual', Load(), lineno=510, col_offset=16), [Name('line', Load(), lineno=510, col_offset=33), Name('expected_response', Load(), lineno=510, col_offset=39)], [], None, None, lineno=510, col_offset=16), lineno=510, col_offset=16)], [], lineno=509, col_offset=12)], [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=512, col_offset=12), 'server', Load(), lineno=512, col_offset=12), 'stop', Load(), lineno=512, col_offset=12), [], [], None, None, lineno=512, col_offset=12), lineno=512, col_offset=12)], lineno=507, col_offset=8)], [], lineno=504, col_offset=4), FunctionDef('ztest_line_iteration', arguments([Name('self', Param(), lineno=514, col_offset=29)], None, None, []), [Assign([Name('lines', Store(), lineno=515, col_offset=8)], List([Str('We\n', lineno=515, col_offset=17), Str('got\n', lineno=515, col_offset=25), Str('here\n', lineno=515, col_offset=34), BinOp(BinOp(Str('verylong ', lineno=515, col_offset=44), Mult(), Num(8192, lineno=515, col_offset=58), lineno=515, col_offset=44), Add(), Str('\n', lineno=515, col_offset=65), lineno=515, col_offset=44)], Load(), lineno=515, col_offset=16), lineno=515, col_offset=8), Assign([Name('expected_response', Store(), lineno=516, col_offset=8)], Call(Attribute(Str('', lineno=516, col_offset=28), 'join', Load(), lineno=516, col_offset=28), [Name('lines', Load(), lineno=516, col_offset=36)], [], None, None, lineno=516, col_offset=28), lineno=516, col_offset=8), Assign([Name('handler', Store(), lineno=517, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=517, col_offset=18), 'start_server', Load(), lineno=517, col_offset=18), [List([Tuple([Num(200, lineno=517, col_offset=38), List([], Load(), lineno=517, col_offset=43), Name('expected_response', Load(), lineno=517, col_offset=47)], Load(), lineno=517, col_offset=38)], Load(), lineno=517, col_offset=36)], [], None, None, lineno=517, col_offset=18), lineno=517, col_offset=8), TryFinally([Assign([Name('data', Store(), lineno=519, col_offset=12)], Call(Attribute(Name('urllib2', Load(), lineno=519, col_offset=19), 'urlopen', Load(), lineno=519, col_offset=19), [BinOp(Str('http://localhost:%s', lineno=519, col_offset=35), Mod(), Attribute(Name('handler', Load(), lineno=519, col_offset=59), 'port', Load(), lineno=519, col_offset=59), lineno=519, col_offset=35)], [], None, None, lineno=519, col_offset=19), lineno=519, col_offset=12), For(Tuple([Name('index', Store(), lineno=520, col_offset=16), Name('line', Store(), lineno=520, col_offset=23)], Store(), lineno=520, col_offset=16), Call(Name('enumerate', Load(), lineno=520, col_offset=31), [Name('data', Load(), lineno=520, col_offset=41)], [], None, None, lineno=520, col_offset=31), [Expr(Call(Attribute(Name('self', Load(), lineno=521, col_offset=16), 'assertEqual', Load(), lineno=521, col_offset=16), [Name('line', Load(), lineno=521, col_offset=33), Subscript(Name('lines', Load(), lineno=521, col_offset=39), Index(Name('index', Load(), lineno=521, col_offset=45)), Load(), lineno=521, col_offset=39), BinOp(Str("Fetched line number %s doesn't match expected:\n    Expected length was %s, got %s", lineno=522, col_offset=33), Mod(), Tuple([Name('index', Load(), lineno=524, col_offset=34), Call(Name('len', Load(), lineno=524, col_offset=41), [Subscript(Name('lines', Load(), lineno=524, col_offset=45), Index(Name('index', Load(), lineno=524, col_offset=51)), Load(), lineno=524, col_offset=45)], [], None, None, lineno=524, col_offset=41), Call(Name('len', Load(), lineno=524, col_offset=60), [Name('line', Load(), lineno=524, col_offset=64)], [], None, None, lineno=524, col_offset=60)], Load(), lineno=524, col_offset=34), lineno=522, col_offset=33)], [], None, None, lineno=521, col_offset=16), lineno=521, col_offset=16)], [], lineno=520, col_offset=12)], [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=526, col_offset=12), 'server', Load(), lineno=526, col_offset=12), 'stop', Load(), lineno=526, col_offset=12), [], [], None, None, lineno=526, col_offset=12), lineno=526, col_offset=12)], lineno=518, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=527, col_offset=8), 'assertEqual', Load(), lineno=527, col_offset=8), [BinOp(Name('index', Load(), lineno=527, col_offset=25), Add(), Num(1, lineno=527, col_offset=33), lineno=527, col_offset=25), Call(Name('len', Load(), lineno=527, col_offset=36), [Name('lines', Load(), lineno=527, col_offset=40)], [], None, None, lineno=527, col_offset=36)], [], None, None, lineno=527, col_offset=8), lineno=527, col_offset=8)], [], lineno=514, col_offset=4)], [], lineno=340, col_offset=0), FunctionDef('test_main', arguments([], None, None, []), [Expr(Call(Attribute(Name('test_support', Load(), lineno=536, col_offset=4), 'run_unittest', Load(), lineno=536, col_offset=4), [Name('ProxyAuthTests', Load(), lineno=536, col_offset=30), Name('TestUrlopen', Load(), lineno=536, col_offset=46)], [], None, None, lineno=536, col_offset=4), lineno=536, col_offset=4)], [], lineno=529, col_offset=0), If(Compare(Name('__name__', Load(), lineno=538, col_offset=3), [Eq()], [Str('__main__', lineno=538, col_offset=15)], lineno=538, col_offset=3), [Expr(Call(Name('test_main', Load(), lineno=539, col_offset=4), [], [], None, None, lineno=539, col_offset=4), lineno=539, col_offset=4)], [], lineno=538, col_offset=0)])
