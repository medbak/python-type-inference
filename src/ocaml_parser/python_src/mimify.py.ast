Module([Expr(Str('Mimification and unmimification of mail messages.\n\nDecode quoted-printable parts of a mail message or encode using\nquoted-printable.\n\nUsage:\n        mimify(input, output)\n        unmimify(input, output, decode_base64 = 0)\nto encode and decode respectively.  Input and output may be the name\nof a file or an open file object.  Only a readline() method is used\non the input file, only a write() method is used on the output file.\nWhen using file names, the input and output file names may be the\nsame.\n\nInteractive usage:\n        mimify.py -e [infile [outfile]]\n        mimify.py -d [infile [outfile]]\nto encode and decode respectively.  Infile defaults to standard\ninput and outfile to standard output.\n', lineno=22, col_offset=-1), lineno=22, col_offset=-1), Assign([Name('MAXLEN', Store(), lineno=25, col_offset=0)], Num(200, lineno=25, col_offset=9), lineno=25, col_offset=0), Assign([Name('CHARSET', Store(), lineno=26, col_offset=0)], Str('ISO-8859-1', lineno=26, col_offset=10), lineno=26, col_offset=0), Assign([Name('QUOTE', Store(), lineno=27, col_offset=0)], Str('> ', lineno=27, col_offset=8), lineno=27, col_offset=0), Import([alias('re', None)], lineno=30, col_offset=0), Import([alias('warnings', None)], lineno=32, col_offset=0), Expr(Call(Attribute(Name('warnings', Load(), lineno=33, col_offset=0), 'warn', Load(), lineno=33, col_offset=0), [Str('the mimify module is deprecated; use the email package instead', lineno=33, col_offset=14), Name('DeprecationWarning', Load(), lineno=34, col_offset=16), Num(2, lineno=34, col_offset=36)], [], None, None, lineno=33, col_offset=0), lineno=33, col_offset=0), Assign([Name('__all__', Store(), lineno=36, col_offset=0)], List([Str('mimify', lineno=36, col_offset=11), Str('unmimify', lineno=36, col_offset=20), Str('mime_encode_header', lineno=36, col_offset=31), Str('mime_decode_header', lineno=36, col_offset=52)], Load(), lineno=36, col_offset=10), lineno=36, col_offset=0), Assign([Name('qp', Store(), lineno=38, col_offset=0)], Call(Attribute(Name('re', Load(), lineno=38, col_offset=5), 'compile', Load(), lineno=38, col_offset=5), [Str('^content-transfer-encoding:\\s*quoted-printable', lineno=38, col_offset=16), Attribute(Name('re', Load(), lineno=38, col_offset=67), 'I', Load(), lineno=38, col_offset=67)], [], None, None, lineno=38, col_offset=5), lineno=38, col_offset=0), Assign([Name('base64_re', Store(), lineno=39, col_offset=0)], Call(Attribute(Name('re', Load(), lineno=39, col_offset=12), 'compile', Load(), lineno=39, col_offset=12), [Str('^content-transfer-encoding:\\s*base64', lineno=39, col_offset=23), Attribute(Name('re', Load(), lineno=39, col_offset=64), 'I', Load(), lineno=39, col_offset=64)], [], None, None, lineno=39, col_offset=12), lineno=39, col_offset=0), Assign([Name('mp', Store(), lineno=40, col_offset=0)], Call(Attribute(Name('re', Load(), lineno=40, col_offset=5), 'compile', Load(), lineno=40, col_offset=5), [Str('^content-type:.*multipart/.*boundary="?([^;"\n]*)', lineno=40, col_offset=16), BinOp(Attribute(Name('re', Load(), lineno=40, col_offset=69), 'I', Load(), lineno=40, col_offset=69), BitOr(), Attribute(Name('re', Load(), lineno=40, col_offset=74), 'S', Load(), lineno=40, col_offset=74), lineno=40, col_offset=69)], [], None, None, lineno=40, col_offset=5), lineno=40, col_offset=0), Assign([Name('chrset', Store(), lineno=41, col_offset=0)], Call(Attribute(Name('re', Load(), lineno=41, col_offset=9), 'compile', Load(), lineno=41, col_offset=9), [Str('^(content-type:.*charset=")(us-ascii|iso-8859-[0-9]+)(".*)', lineno=41, col_offset=20), BinOp(Attribute(Name('re', Load(), lineno=41, col_offset=82), 'I', Load(), lineno=41, col_offset=82), BitOr(), Attribute(Name('re', Load(), lineno=41, col_offset=87), 'S', Load(), lineno=41, col_offset=87), lineno=41, col_offset=82)], [], None, None, lineno=41, col_offset=9), lineno=41, col_offset=0), Assign([Name('he', Store(), lineno=42, col_offset=0)], Call(Attribute(Name('re', Load(), lineno=42, col_offset=5), 'compile', Load(), lineno=42, col_offset=5), [Str('^-*\n', lineno=42, col_offset=16)], [], None, None, lineno=42, col_offset=5), lineno=42, col_offset=0), Assign([Name('mime_code', Store(), lineno=43, col_offset=0)], Call(Attribute(Name('re', Load(), lineno=43, col_offset=12), 'compile', Load(), lineno=43, col_offset=12), [Str('=([0-9a-f][0-9a-f])', lineno=43, col_offset=23), Attribute(Name('re', Load(), lineno=43, col_offset=46), 'I', Load(), lineno=43, col_offset=46)], [], None, None, lineno=43, col_offset=12), lineno=43, col_offset=0), Assign([Name('mime_head', Store(), lineno=44, col_offset=0)], Call(Attribute(Name('re', Load(), lineno=44, col_offset=12), 'compile', Load(), lineno=44, col_offset=12), [Str('=\\?iso-8859-1\\?q\\?([^? \t\n]+)\\?=', lineno=44, col_offset=23), Attribute(Name('re', Load(), lineno=44, col_offset=64), 'I', Load(), lineno=44, col_offset=64)], [], None, None, lineno=44, col_offset=12), lineno=44, col_offset=0), Assign([Name('repl', Store(), lineno=45, col_offset=0)], Call(Attribute(Name('re', Load(), lineno=45, col_offset=7), 'compile', Load(), lineno=45, col_offset=7), [Str('^subject:\\s+re: ', lineno=45, col_offset=18), Attribute(Name('re', Load(), lineno=45, col_offset=39), 'I', Load(), lineno=45, col_offset=39)], [], None, None, lineno=45, col_offset=7), lineno=45, col_offset=0), ClassDef('File', [], [Expr(Str('A simple fake file object that knows about limited read-ahead and\n    boundaries.  The only supported method is readline().', lineno=49, col_offset=-1), lineno=49, col_offset=-1), FunctionDef('__init__', arguments([Name('self', Param(), lineno=51, col_offset=17), Name('file', Param(), lineno=51, col_offset=23), Name('boundary', Param(), lineno=51, col_offset=29)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=52, col_offset=8), 'file', Store(), lineno=52, col_offset=8)], Name('file', Load(), lineno=52, col_offset=20), lineno=52, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=53, col_offset=8), 'boundary', Store(), lineno=53, col_offset=8)], Name('boundary', Load(), lineno=53, col_offset=24), lineno=53, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=54, col_offset=8), 'peek', Store(), lineno=54, col_offset=8)], Name('None', Load(), lineno=54, col_offset=20), lineno=54, col_offset=8)], [], lineno=51, col_offset=4), FunctionDef('readline', arguments([Name('self', Param(), lineno=56, col_offset=17)], None, None, []), [If(Compare(Attribute(Name('self', Load(), lineno=57, col_offset=11), 'peek', Load(), lineno=57, col_offset=11), [IsNot()], [Name('None', Load(), lineno=57, col_offset=28)], lineno=57, col_offset=11), [Return(Str('', lineno=58, col_offset=19), lineno=58, col_offset=12)], [], lineno=57, col_offset=8), Assign([Name('line', Store(), lineno=59, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=59, col_offset=15), 'file', Load(), lineno=59, col_offset=15), 'readline', Load(), lineno=59, col_offset=15), [], [], None, None, lineno=59, col_offset=15), lineno=59, col_offset=8), If(UnaryOp(Not(), Name('line', Load(), lineno=60, col_offset=15), lineno=60, col_offset=11), [Return(Name('line', Load(), lineno=61, col_offset=19), lineno=61, col_offset=12)], [], lineno=60, col_offset=8), If(Attribute(Name('self', Load(), lineno=62, col_offset=11), 'boundary', Load(), lineno=62, col_offset=11), [If(Compare(Name('line', Load(), lineno=63, col_offset=15), [Eq()], [BinOp(Attribute(Name('self', Load(), lineno=63, col_offset=23), 'boundary', Load(), lineno=63, col_offset=23), Add(), Str('\n', lineno=63, col_offset=39), lineno=63, col_offset=23)], lineno=63, col_offset=15), [Assign([Attribute(Name('self', Load(), lineno=64, col_offset=16), 'peek', Store(), lineno=64, col_offset=16)], Name('line', Load(), lineno=64, col_offset=28), lineno=64, col_offset=16), Return(Str('', lineno=65, col_offset=23), lineno=65, col_offset=16)], [], lineno=63, col_offset=12), If(Compare(Name('line', Load(), lineno=66, col_offset=15), [Eq()], [BinOp(Attribute(Name('self', Load(), lineno=66, col_offset=23), 'boundary', Load(), lineno=66, col_offset=23), Add(), Str('--\n', lineno=66, col_offset=39), lineno=66, col_offset=23)], lineno=66, col_offset=15), [Assign([Attribute(Name('self', Load(), lineno=67, col_offset=16), 'peek', Store(), lineno=67, col_offset=16)], Name('line', Load(), lineno=67, col_offset=28), lineno=67, col_offset=16), Return(Str('', lineno=68, col_offset=23), lineno=68, col_offset=16)], [], lineno=66, col_offset=12)], [], lineno=62, col_offset=8), Return(Name('line', Load(), lineno=69, col_offset=15), lineno=69, col_offset=8)], [], lineno=56, col_offset=4)], [], lineno=47, col_offset=0), ClassDef('HeaderFile', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=72, col_offset=17), Name('file', Param(), lineno=72, col_offset=23)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=73, col_offset=8), 'file', Store(), lineno=73, col_offset=8)], Name('file', Load(), lineno=73, col_offset=20), lineno=73, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=74, col_offset=8), 'peek', Store(), lineno=74, col_offset=8)], Name('None', Load(), lineno=74, col_offset=20), lineno=74, col_offset=8)], [], lineno=72, col_offset=4), FunctionDef('readline', arguments([Name('self', Param(), lineno=76, col_offset=17)], None, None, []), [If(Compare(Attribute(Name('self', Load(), lineno=77, col_offset=11), 'peek', Load(), lineno=77, col_offset=11), [IsNot()], [Name('None', Load(), lineno=77, col_offset=28)], lineno=77, col_offset=11), [Assign([Name('line', Store(), lineno=78, col_offset=12)], Attribute(Name('self', Load(), lineno=78, col_offset=19), 'peek', Load(), lineno=78, col_offset=19), lineno=78, col_offset=12), Assign([Attribute(Name('self', Load(), lineno=79, col_offset=12), 'peek', Store(), lineno=79, col_offset=12)], Name('None', Load(), lineno=79, col_offset=24), lineno=79, col_offset=12)], [Assign([Name('line', Store(), lineno=81, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=81, col_offset=19), 'file', Load(), lineno=81, col_offset=19), 'readline', Load(), lineno=81, col_offset=19), [], [], None, None, lineno=81, col_offset=19), lineno=81, col_offset=12)], lineno=77, col_offset=8), If(UnaryOp(Not(), Name('line', Load(), lineno=82, col_offset=15), lineno=82, col_offset=11), [Return(Name('line', Load(), lineno=83, col_offset=19), lineno=83, col_offset=12)], [], lineno=82, col_offset=8), If(Call(Attribute(Name('he', Load(), lineno=84, col_offset=11), 'match', Load(), lineno=84, col_offset=11), [Name('line', Load(), lineno=84, col_offset=20)], [], None, None, lineno=84, col_offset=11), [Return(Name('line', Load(), lineno=85, col_offset=19), lineno=85, col_offset=12)], [], lineno=84, col_offset=8), While(Num(1, lineno=86, col_offset=14), [Assign([Attribute(Name('self', Load(), lineno=87, col_offset=12), 'peek', Store(), lineno=87, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=87, col_offset=24), 'file', Load(), lineno=87, col_offset=24), 'readline', Load(), lineno=87, col_offset=24), [], [], None, None, lineno=87, col_offset=24), lineno=87, col_offset=12), If(BoolOp(Or(), [Compare(Call(Name('len', Load(), lineno=88, col_offset=15), [Attribute(Name('self', Load(), lineno=88, col_offset=19), 'peek', Load(), lineno=88, col_offset=19)], [], None, None, lineno=88, col_offset=15), [Eq()], [Num(0, lineno=88, col_offset=33)], lineno=88, col_offset=15), BoolOp(And(), [Compare(Subscript(Attribute(Name('self', Load(), lineno=89, col_offset=16), 'peek', Load(), lineno=89, col_offset=16), Index(Num(0, lineno=89, col_offset=26)), Load(), lineno=89, col_offset=16), [NotEq()], [Str(' ', lineno=89, col_offset=32)], lineno=89, col_offset=16), Compare(Subscript(Attribute(Name('self', Load(), lineno=89, col_offset=40), 'peek', Load(), lineno=89, col_offset=40), Index(Num(0, lineno=89, col_offset=50)), Load(), lineno=89, col_offset=40), [NotEq()], [Str('\t', lineno=89, col_offset=56)], lineno=89, col_offset=40)], lineno=89, col_offset=16)], lineno=88, col_offset=15), [Return(Name('line', Load(), lineno=90, col_offset=23), lineno=90, col_offset=16)], [], lineno=88, col_offset=12), Assign([Name('line', Store(), lineno=91, col_offset=12)], BinOp(Name('line', Load(), lineno=91, col_offset=19), Add(), Attribute(Name('self', Load(), lineno=91, col_offset=26), 'peek', Load(), lineno=91, col_offset=26), lineno=91, col_offset=19), lineno=91, col_offset=12), Assign([Attribute(Name('self', Load(), lineno=92, col_offset=12), 'peek', Store(), lineno=92, col_offset=12)], Name('None', Load(), lineno=92, col_offset=24), lineno=92, col_offset=12)], [], lineno=86, col_offset=8)], [], lineno=76, col_offset=4)], [], lineno=71, col_offset=0), FunctionDef('mime_decode', arguments([Name('line', Param(), lineno=94, col_offset=16)], None, None, []), [Expr(Str('Decode a single line of quoted-printable text to 8bit.', lineno=95, col_offset=4), lineno=95, col_offset=4), Assign([Name('newline', Store(), lineno=96, col_offset=4)], Str('', lineno=96, col_offset=14), lineno=96, col_offset=4), Assign([Name('pos', Store(), lineno=97, col_offset=4)], Num(0, lineno=97, col_offset=10), lineno=97, col_offset=4), While(Num(1, lineno=98, col_offset=10), [Assign([Name('res', Store(), lineno=99, col_offset=8)], Call(Attribute(Name('mime_code', Load(), lineno=99, col_offset=14), 'search', Load(), lineno=99, col_offset=14), [Name('line', Load(), lineno=99, col_offset=31), Name('pos', Load(), lineno=99, col_offset=37)], [], None, None, lineno=99, col_offset=14), lineno=99, col_offset=8), If(Compare(Name('res', Load(), lineno=100, col_offset=11), [Is()], [Name('None', Load(), lineno=100, col_offset=18)], lineno=100, col_offset=11), [Break( lineno=101, col_offset=12)], [], lineno=100, col_offset=8), Assign([Name('newline', Store(), lineno=102, col_offset=8)], BinOp(BinOp(Name('newline', Load(), lineno=102, col_offset=18), Add(), Subscript(Name('line', Load(), lineno=102, col_offset=28), Slice(Name('pos', Load(), lineno=102, col_offset=33), Call(Attribute(Name('res', Load(), lineno=102, col_offset=37), 'start', Load(), lineno=102, col_offset=37), [Num(0, lineno=102, col_offset=47)], [], None, None, lineno=102, col_offset=37), None), Load(), lineno=102, col_offset=28), lineno=102, col_offset=18), Add(), Call(Name('chr', Load(), lineno=103, col_offset=18), [Call(Name('int', Load(), lineno=103, col_offset=22), [Call(Attribute(Name('res', Load(), lineno=103, col_offset=26), 'group', Load(), lineno=103, col_offset=26), [Num(1, lineno=103, col_offset=36)], [], None, None, lineno=103, col_offset=26), Num(16, lineno=103, col_offset=40)], [], None, None, lineno=103, col_offset=22)], [], None, None, lineno=103, col_offset=18), lineno=102, col_offset=51), lineno=102, col_offset=8), Assign([Name('pos', Store(), lineno=104, col_offset=8)], Call(Attribute(Name('res', Load(), lineno=104, col_offset=14), 'end', Load(), lineno=104, col_offset=14), [Num(0, lineno=104, col_offset=22)], [], None, None, lineno=104, col_offset=14), lineno=104, col_offset=8)], [], lineno=98, col_offset=4), Return(BinOp(Name('newline', Load(), lineno=105, col_offset=11), Add(), Subscript(Name('line', Load(), lineno=105, col_offset=21), Slice(Name('pos', Load(), lineno=105, col_offset=26), None, None), Load(), lineno=105, col_offset=21), lineno=105, col_offset=11), lineno=105, col_offset=4)], [], lineno=94, col_offset=0), FunctionDef('mime_decode_header', arguments([Name('line', Param(), lineno=107, col_offset=23)], None, None, []), [Expr(Str('Decode a header line to 8bit.', lineno=108, col_offset=4), lineno=108, col_offset=4), Assign([Name('newline', Store(), lineno=109, col_offset=4)], Str('', lineno=109, col_offset=14), lineno=109, col_offset=4), Assign([Name('pos', Store(), lineno=110, col_offset=4)], Num(0, lineno=110, col_offset=10), lineno=110, col_offset=4), While(Num(1, lineno=111, col_offset=10), [Assign([Name('res', Store(), lineno=112, col_offset=8)], Call(Attribute(Name('mime_head', Load(), lineno=112, col_offset=14), 'search', Load(), lineno=112, col_offset=14), [Name('line', Load(), lineno=112, col_offset=31), Name('pos', Load(), lineno=112, col_offset=37)], [], None, None, lineno=112, col_offset=14), lineno=112, col_offset=8), If(Compare(Name('res', Load(), lineno=113, col_offset=11), [Is()], [Name('None', Load(), lineno=113, col_offset=18)], lineno=113, col_offset=11), [Break( lineno=114, col_offset=12)], [], lineno=113, col_offset=8), Assign([Name('match', Store(), lineno=115, col_offset=8)], Call(Attribute(Name('res', Load(), lineno=115, col_offset=16), 'group', Load(), lineno=115, col_offset=16), [Num(1, lineno=115, col_offset=26)], [], None, None, lineno=115, col_offset=16), lineno=115, col_offset=8), Assign([Name('match', Store(), lineno=117, col_offset=8)], Call(Attribute(Str(' ', lineno=117, col_offset=16), 'join', Load(), lineno=117, col_offset=16), [Call(Attribute(Name('match', Load(), lineno=117, col_offset=25), 'split', Load(), lineno=117, col_offset=25), [Str('_', lineno=117, col_offset=37)], [], None, None, lineno=117, col_offset=25)], [], None, None, lineno=117, col_offset=16), lineno=117, col_offset=8), Assign([Name('newline', Store(), lineno=118, col_offset=8)], BinOp(BinOp(Name('newline', Load(), lineno=118, col_offset=18), Add(), Subscript(Name('line', Load(), lineno=118, col_offset=28), Slice(Name('pos', Load(), lineno=118, col_offset=33), Call(Attribute(Name('res', Load(), lineno=118, col_offset=37), 'start', Load(), lineno=118, col_offset=37), [Num(0, lineno=118, col_offset=47)], [], None, None, lineno=118, col_offset=37), None), Load(), lineno=118, col_offset=28), lineno=118, col_offset=18), Add(), Call(Name('mime_decode', Load(), lineno=118, col_offset=53), [Name('match', Load(), lineno=118, col_offset=65)], [], None, None, lineno=118, col_offset=53), lineno=118, col_offset=51), lineno=118, col_offset=8), Assign([Name('pos', Store(), lineno=119, col_offset=8)], Call(Attribute(Name('res', Load(), lineno=119, col_offset=14), 'end', Load(), lineno=119, col_offset=14), [Num(0, lineno=119, col_offset=22)], [], None, None, lineno=119, col_offset=14), lineno=119, col_offset=8)], [], lineno=111, col_offset=4), Return(BinOp(Name('newline', Load(), lineno=120, col_offset=11), Add(), Subscript(Name('line', Load(), lineno=120, col_offset=21), Slice(Name('pos', Load(), lineno=120, col_offset=26), None, None), Load(), lineno=120, col_offset=21), lineno=120, col_offset=11), lineno=120, col_offset=4)], [], lineno=107, col_offset=0), FunctionDef('unmimify_part', arguments([Name('ifile', Param(), lineno=122, col_offset=18), Name('ofile', Param(), lineno=122, col_offset=25), Name('decode_base64', Param(), lineno=122, col_offset=32)], None, None, [Num(0, lineno=122, col_offset=48)]), [Expr(Str('Convert a quoted-printable part of a MIME mail message to 8bit.', lineno=123, col_offset=4), lineno=123, col_offset=4), Assign([Name('multipart', Store(), lineno=124, col_offset=4)], Name('None', Load(), lineno=124, col_offset=16), lineno=124, col_offset=4), Assign([Name('quoted_printable', Store(), lineno=125, col_offset=4)], Num(0, lineno=125, col_offset=23), lineno=125, col_offset=4), Assign([Name('is_base64', Store(), lineno=126, col_offset=4)], Num(0, lineno=126, col_offset=16), lineno=126, col_offset=4), Assign([Name('is_repl', Store(), lineno=127, col_offset=4)], Num(0, lineno=127, col_offset=14), lineno=127, col_offset=4), If(BoolOp(And(), [Attribute(Name('ifile', Load(), lineno=128, col_offset=7), 'boundary', Load(), lineno=128, col_offset=7), Compare(Subscript(Attribute(Name('ifile', Load(), lineno=128, col_offset=26), 'boundary', Load(), lineno=128, col_offset=26), Slice(None, Num(2, lineno=128, col_offset=42), None), Load(), lineno=128, col_offset=26), [Eq()], [Name('QUOTE', Load(), lineno=128, col_offset=48)], lineno=128, col_offset=26)], lineno=128, col_offset=7), [Assign([Name('prefix', Store(), lineno=129, col_offset=8)], Name('QUOTE', Load(), lineno=129, col_offset=17), lineno=129, col_offset=8)], [Assign([Name('prefix', Store(), lineno=131, col_offset=8)], Str('', lineno=131, col_offset=17), lineno=131, col_offset=8)], lineno=128, col_offset=4), Assign([Name('hfile', Store(), lineno=134, col_offset=4)], Call(Name('HeaderFile', Load(), lineno=134, col_offset=12), [Name('ifile', Load(), lineno=134, col_offset=23)], [], None, None, lineno=134, col_offset=12), lineno=134, col_offset=4), While(Num(1, lineno=135, col_offset=10), [Assign([Name('line', Store(), lineno=136, col_offset=8)], Call(Attribute(Name('hfile', Load(), lineno=136, col_offset=15), 'readline', Load(), lineno=136, col_offset=15), [], [], None, None, lineno=136, col_offset=15), lineno=136, col_offset=8), If(UnaryOp(Not(), Name('line', Load(), lineno=137, col_offset=15), lineno=137, col_offset=11), [Return(None, lineno=138, col_offset=12)], [], lineno=137, col_offset=8), If(BoolOp(And(), [Name('prefix', Load(), lineno=139, col_offset=11), Compare(Subscript(Name('line', Load(), lineno=139, col_offset=22), Slice(None, Call(Name('len', Load(), lineno=139, col_offset=28), [Name('prefix', Load(), lineno=139, col_offset=32)], [], None, None, lineno=139, col_offset=28), None), Load(), lineno=139, col_offset=22), [Eq()], [Name('prefix', Load(), lineno=139, col_offset=44)], lineno=139, col_offset=22)], lineno=139, col_offset=11), [Assign([Name('line', Store(), lineno=140, col_offset=12)], Subscript(Name('line', Load(), lineno=140, col_offset=19), Slice(Call(Name('len', Load(), lineno=140, col_offset=24), [Name('prefix', Load(), lineno=140, col_offset=28)], [], None, None, lineno=140, col_offset=24), None, None), Load(), lineno=140, col_offset=19), lineno=140, col_offset=12), Assign([Name('pref', Store(), lineno=141, col_offset=12)], Name('prefix', Load(), lineno=141, col_offset=19), lineno=141, col_offset=12)], [Assign([Name('pref', Store(), lineno=143, col_offset=12)], Str('', lineno=143, col_offset=19), lineno=143, col_offset=12)], lineno=139, col_offset=8), Assign([Name('line', Store(), lineno=144, col_offset=8)], Call(Name('mime_decode_header', Load(), lineno=144, col_offset=15), [Name('line', Load(), lineno=144, col_offset=34)], [], None, None, lineno=144, col_offset=15), lineno=144, col_offset=8), If(Call(Attribute(Name('qp', Load(), lineno=145, col_offset=11), 'match', Load(), lineno=145, col_offset=11), [Name('line', Load(), lineno=145, col_offset=20)], [], None, None, lineno=145, col_offset=11), [Assign([Name('quoted_printable', Store(), lineno=146, col_offset=12)], Num(1, lineno=146, col_offset=31), lineno=146, col_offset=12), Continue( lineno=147, col_offset=12)], [], lineno=145, col_offset=8), If(BoolOp(And(), [Name('decode_base64', Load(), lineno=148, col_offset=11), Call(Attribute(Name('base64_re', Load(), lineno=148, col_offset=29), 'match', Load(), lineno=148, col_offset=29), [Name('line', Load(), lineno=148, col_offset=45)], [], None, None, lineno=148, col_offset=29)], lineno=148, col_offset=11), [Assign([Name('is_base64', Store(), lineno=149, col_offset=12)], Num(1, lineno=149, col_offset=24), lineno=149, col_offset=12), Continue( lineno=150, col_offset=12)], [], lineno=148, col_offset=8), Expr(Call(Attribute(Name('ofile', Load(), lineno=151, col_offset=8), 'write', Load(), lineno=151, col_offset=8), [BinOp(Name('pref', Load(), lineno=151, col_offset=20), Add(), Name('line', Load(), lineno=151, col_offset=27), lineno=151, col_offset=20)], [], None, None, lineno=151, col_offset=8), lineno=151, col_offset=8), If(BoolOp(And(), [UnaryOp(Not(), Name('prefix', Load(), lineno=152, col_offset=15), lineno=152, col_offset=11), Call(Attribute(Name('repl', Load(), lineno=152, col_offset=26), 'match', Load(), lineno=152, col_offset=26), [Name('line', Load(), lineno=152, col_offset=37)], [], None, None, lineno=152, col_offset=26)], lineno=152, col_offset=11), [Assign([Name('is_repl', Store(), lineno=154, col_offset=12)], Num(1, lineno=154, col_offset=22), lineno=154, col_offset=12)], [], lineno=152, col_offset=8), Assign([Name('mp_res', Store(), lineno=155, col_offset=8)], Call(Attribute(Name('mp', Load(), lineno=155, col_offset=17), 'match', Load(), lineno=155, col_offset=17), [Name('line', Load(), lineno=155, col_offset=26)], [], None, None, lineno=155, col_offset=17), lineno=155, col_offset=8), If(Name('mp_res', Load(), lineno=156, col_offset=11), [Assign([Name('multipart', Store(), lineno=157, col_offset=12)], BinOp(Str('--', lineno=157, col_offset=24), Add(), Call(Attribute(Name('mp_res', Load(), lineno=157, col_offset=31), 'group', Load(), lineno=157, col_offset=31), [Num(1, lineno=157, col_offset=44)], [], None, None, lineno=157, col_offset=31), lineno=157, col_offset=24), lineno=157, col_offset=12)], [], lineno=156, col_offset=8), If(Call(Attribute(Name('he', Load(), lineno=158, col_offset=11), 'match', Load(), lineno=158, col_offset=11), [Name('line', Load(), lineno=158, col_offset=20)], [], None, None, lineno=158, col_offset=11), [Break( lineno=159, col_offset=12)], [], lineno=158, col_offset=8)], [], lineno=135, col_offset=4), If(BoolOp(And(), [Name('is_repl', Load(), lineno=160, col_offset=7), BoolOp(Or(), [Name('quoted_printable', Load(), lineno=160, col_offset=20), Name('multipart', Load(), lineno=160, col_offset=40)], lineno=160, col_offset=20)], lineno=160, col_offset=7), [Assign([Name('is_repl', Store(), lineno=161, col_offset=8)], Num(0, lineno=161, col_offset=18), lineno=161, col_offset=8)], [], lineno=160, col_offset=4), While(Num(1, lineno=164, col_offset=10), [Assign([Name('line', Store(), lineno=165, col_offset=8)], Call(Attribute(Name('ifile', Load(), lineno=165, col_offset=15), 'readline', Load(), lineno=165, col_offset=15), [], [], None, None, lineno=165, col_offset=15), lineno=165, col_offset=8), If(UnaryOp(Not(), Name('line', Load(), lineno=166, col_offset=15), lineno=166, col_offset=11), [Return(None, lineno=167, col_offset=12)], [], lineno=166, col_offset=8), Assign([Name('line', Store(), lineno=168, col_offset=8)], Call(Attribute(Name('re', Load(), lineno=168, col_offset=15), 'sub', Load(), lineno=168, col_offset=15), [Name('mime_head', Load(), lineno=168, col_offset=22), Str('\\1', lineno=168, col_offset=33), Name('line', Load(), lineno=168, col_offset=40)], [], None, None, lineno=168, col_offset=15), lineno=168, col_offset=8), If(BoolOp(And(), [Name('prefix', Load(), lineno=169, col_offset=11), Compare(Subscript(Name('line', Load(), lineno=169, col_offset=22), Slice(None, Call(Name('len', Load(), lineno=169, col_offset=28), [Name('prefix', Load(), lineno=169, col_offset=32)], [], None, None, lineno=169, col_offset=28), None), Load(), lineno=169, col_offset=22), [Eq()], [Name('prefix', Load(), lineno=169, col_offset=44)], lineno=169, col_offset=22)], lineno=169, col_offset=11), [Assign([Name('line', Store(), lineno=170, col_offset=12)], Subscript(Name('line', Load(), lineno=170, col_offset=19), Slice(Call(Name('len', Load(), lineno=170, col_offset=24), [Name('prefix', Load(), lineno=170, col_offset=28)], [], None, None, lineno=170, col_offset=24), None, None), Load(), lineno=170, col_offset=19), lineno=170, col_offset=12), Assign([Name('pref', Store(), lineno=171, col_offset=12)], Name('prefix', Load(), lineno=171, col_offset=19), lineno=171, col_offset=12)], [Assign([Name('pref', Store(), lineno=173, col_offset=12)], Str('', lineno=173, col_offset=19), lineno=173, col_offset=12)], lineno=169, col_offset=8), While(Name('multipart', Load(), lineno=176, col_offset=14), [If(Compare(Name('line', Load(), lineno=177, col_offset=15), [Eq()], [BinOp(Name('multipart', Load(), lineno=177, col_offset=23), Add(), Str('--\n', lineno=177, col_offset=35), lineno=177, col_offset=23)], lineno=177, col_offset=15), [Expr(Call(Attribute(Name('ofile', Load(), lineno=178, col_offset=16), 'write', Load(), lineno=178, col_offset=16), [BinOp(Name('pref', Load(), lineno=178, col_offset=28), Add(), Name('line', Load(), lineno=178, col_offset=35), lineno=178, col_offset=28)], [], None, None, lineno=178, col_offset=16), lineno=178, col_offset=16), Assign([Name('multipart', Store(), lineno=179, col_offset=16)], Name('None', Load(), lineno=179, col_offset=28), lineno=179, col_offset=16), Assign([Name('line', Store(), lineno=180, col_offset=16)], Name('None', Load(), lineno=180, col_offset=23), lineno=180, col_offset=16), Break( lineno=181, col_offset=16)], [], lineno=177, col_offset=12), If(Compare(Name('line', Load(), lineno=182, col_offset=15), [Eq()], [BinOp(Name('multipart', Load(), lineno=182, col_offset=23), Add(), Str('\n', lineno=182, col_offset=35), lineno=182, col_offset=23)], lineno=182, col_offset=15), [Expr(Call(Attribute(Name('ofile', Load(), lineno=183, col_offset=16), 'write', Load(), lineno=183, col_offset=16), [BinOp(Name('pref', Load(), lineno=183, col_offset=28), Add(), Name('line', Load(), lineno=183, col_offset=35), lineno=183, col_offset=28)], [], None, None, lineno=183, col_offset=16), lineno=183, col_offset=16), Assign([Name('nifile', Store(), lineno=184, col_offset=16)], Call(Name('File', Load(), lineno=184, col_offset=25), [Name('ifile', Load(), lineno=184, col_offset=30), Name('multipart', Load(), lineno=184, col_offset=37)], [], None, None, lineno=184, col_offset=25), lineno=184, col_offset=16), Expr(Call(Name('unmimify_part', Load(), lineno=185, col_offset=16), [Name('nifile', Load(), lineno=185, col_offset=30), Name('ofile', Load(), lineno=185, col_offset=38), Name('decode_base64', Load(), lineno=185, col_offset=45)], [], None, None, lineno=185, col_offset=16), lineno=185, col_offset=16), Assign([Name('line', Store(), lineno=186, col_offset=16)], Attribute(Name('nifile', Load(), lineno=186, col_offset=23), 'peek', Load(), lineno=186, col_offset=23), lineno=186, col_offset=16), If(UnaryOp(Not(), Name('line', Load(), lineno=187, col_offset=23), lineno=187, col_offset=19), [Break( lineno=189, col_offset=20)], [], lineno=187, col_offset=16), Continue( lineno=190, col_offset=16)], [], lineno=182, col_offset=12), Break( lineno=192, col_offset=12)], [], lineno=176, col_offset=8), If(BoolOp(And(), [Name('line', Load(), lineno=193, col_offset=11), Name('quoted_printable', Load(), lineno=193, col_offset=20)], lineno=193, col_offset=11), [While(Compare(Subscript(Name('line', Load(), lineno=194, col_offset=18), Slice(Num(-2, lineno=194, col_offset=24), None, None), Load(), lineno=194, col_offset=18), [Eq()], [Str('=\n', lineno=194, col_offset=31)], lineno=194, col_offset=18), [Assign([Name('line', Store(), lineno=195, col_offset=16)], Subscript(Name('line', Load(), lineno=195, col_offset=23), Slice(None, Num(-2, lineno=195, col_offset=30), None), Load(), lineno=195, col_offset=23), lineno=195, col_offset=16), Assign([Name('newline', Store(), lineno=196, col_offset=16)], Call(Attribute(Name('ifile', Load(), lineno=196, col_offset=26), 'readline', Load(), lineno=196, col_offset=26), [], [], None, None, lineno=196, col_offset=26), lineno=196, col_offset=16), If(Compare(Subscript(Name('newline', Load(), lineno=197, col_offset=19), Slice(None, Call(Name('len', Load(), lineno=197, col_offset=28), [Name('QUOTE', Load(), lineno=197, col_offset=32)], [], None, None, lineno=197, col_offset=28), None), Load(), lineno=197, col_offset=19), [Eq()], [Name('QUOTE', Load(), lineno=197, col_offset=43)], lineno=197, col_offset=19), [Assign([Name('newline', Store(), lineno=198, col_offset=20)], Subscript(Name('newline', Load(), lineno=198, col_offset=30), Slice(Call(Name('len', Load(), lineno=198, col_offset=38), [Name('QUOTE', Load(), lineno=198, col_offset=42)], [], None, None, lineno=198, col_offset=38), None, None), Load(), lineno=198, col_offset=30), lineno=198, col_offset=20)], [], lineno=197, col_offset=16), Assign([Name('line', Store(), lineno=199, col_offset=16)], BinOp(Name('line', Load(), lineno=199, col_offset=23), Add(), Name('newline', Load(), lineno=199, col_offset=30), lineno=199, col_offset=23), lineno=199, col_offset=16)], [], lineno=194, col_offset=12), Assign([Name('line', Store(), lineno=200, col_offset=12)], Call(Name('mime_decode', Load(), lineno=200, col_offset=19), [Name('line', Load(), lineno=200, col_offset=31)], [], None, None, lineno=200, col_offset=19), lineno=200, col_offset=12)], [], lineno=193, col_offset=8), If(BoolOp(And(), [Name('line', Load(), lineno=201, col_offset=11), Name('is_base64', Load(), lineno=201, col_offset=20), UnaryOp(Not(), Name('pref', Load(), lineno=201, col_offset=38), lineno=201, col_offset=34)], lineno=201, col_offset=11), [Import([alias('base64', None)], lineno=202, col_offset=12), Assign([Name('line', Store(), lineno=203, col_offset=12)], Call(Attribute(Name('base64', Load(), lineno=203, col_offset=19), 'decodestring', Load(), lineno=203, col_offset=19), [Name('line', Load(), lineno=203, col_offset=39)], [], None, None, lineno=203, col_offset=19), lineno=203, col_offset=12)], [], lineno=201, col_offset=8), If(Name('line', Load(), lineno=204, col_offset=11), [Expr(Call(Attribute(Name('ofile', Load(), lineno=205, col_offset=12), 'write', Load(), lineno=205, col_offset=12), [BinOp(Name('pref', Load(), lineno=205, col_offset=24), Add(), Name('line', Load(), lineno=205, col_offset=31), lineno=205, col_offset=24)], [], None, None, lineno=205, col_offset=12), lineno=205, col_offset=12)], [], lineno=204, col_offset=8)], [], lineno=164, col_offset=4)], [], lineno=122, col_offset=0), FunctionDef('unmimify', arguments([Name('infile', Param(), lineno=207, col_offset=13), Name('outfile', Param(), lineno=207, col_offset=21), Name('decode_base64', Param(), lineno=207, col_offset=30)], None, None, [Num(0, lineno=207, col_offset=46)]), [Expr(Str('Convert quoted-printable parts of a MIME mail message to 8bit.', lineno=208, col_offset=4), lineno=208, col_offset=4), If(Compare(Call(Name('type', Load(), lineno=209, col_offset=7), [Name('infile', Load(), lineno=209, col_offset=12)], [], None, None, lineno=209, col_offset=7), [Eq()], [Call(Name('type', Load(), lineno=209, col_offset=23), [Str('', lineno=209, col_offset=28)], [], None, None, lineno=209, col_offset=23)], lineno=209, col_offset=7), [Assign([Name('ifile', Store(), lineno=210, col_offset=8)], Call(Name('open', Load(), lineno=210, col_offset=16), [Name('infile', Load(), lineno=210, col_offset=21)], [], None, None, lineno=210, col_offset=16), lineno=210, col_offset=8), If(BoolOp(And(), [Compare(Call(Name('type', Load(), lineno=211, col_offset=11), [Name('outfile', Load(), lineno=211, col_offset=16)], [], None, None, lineno=211, col_offset=11), [Eq()], [Call(Name('type', Load(), lineno=211, col_offset=28), [Str('', lineno=211, col_offset=33)], [], None, None, lineno=211, col_offset=28)], lineno=211, col_offset=11), Compare(Name('infile', Load(), lineno=211, col_offset=41), [Eq()], [Name('outfile', Load(), lineno=211, col_offset=51)], lineno=211, col_offset=41)], lineno=211, col_offset=11), [Import([alias('os', None)], lineno=212, col_offset=12), Assign([Tuple([Name('d', Store(), lineno=213, col_offset=12), Name('f', Store(), lineno=213, col_offset=15)], Store(), lineno=213, col_offset=12)], Call(Attribute(Attribute(Name('os', Load(), lineno=213, col_offset=19), 'path', Load(), lineno=213, col_offset=19), 'split', Load(), lineno=213, col_offset=19), [Name('infile', Load(), lineno=213, col_offset=33)], [], None, None, lineno=213, col_offset=19), lineno=213, col_offset=12), Expr(Call(Attribute(Name('os', Load(), lineno=214, col_offset=12), 'rename', Load(), lineno=214, col_offset=12), [Name('infile', Load(), lineno=214, col_offset=22), Call(Attribute(Attribute(Name('os', Load(), lineno=214, col_offset=30), 'path', Load(), lineno=214, col_offset=30), 'join', Load(), lineno=214, col_offset=30), [Name('d', Load(), lineno=214, col_offset=43), BinOp(Str(',', lineno=214, col_offset=46), Add(), Name('f', Load(), lineno=214, col_offset=52), lineno=214, col_offset=46)], [], None, None, lineno=214, col_offset=30)], [], None, None, lineno=214, col_offset=12), lineno=214, col_offset=12)], [], lineno=211, col_offset=8)], [Assign([Name('ifile', Store(), lineno=216, col_offset=8)], Name('infile', Load(), lineno=216, col_offset=16), lineno=216, col_offset=8)], lineno=209, col_offset=4), If(Compare(Call(Name('type', Load(), lineno=217, col_offset=7), [Name('outfile', Load(), lineno=217, col_offset=12)], [], None, None, lineno=217, col_offset=7), [Eq()], [Call(Name('type', Load(), lineno=217, col_offset=24), [Str('', lineno=217, col_offset=29)], [], None, None, lineno=217, col_offset=24)], lineno=217, col_offset=7), [Assign([Name('ofile', Store(), lineno=218, col_offset=8)], Call(Name('open', Load(), lineno=218, col_offset=16), [Name('outfile', Load(), lineno=218, col_offset=21), Str('w', lineno=218, col_offset=30)], [], None, None, lineno=218, col_offset=16), lineno=218, col_offset=8)], [Assign([Name('ofile', Store(), lineno=220, col_offset=8)], Name('outfile', Load(), lineno=220, col_offset=16), lineno=220, col_offset=8)], lineno=217, col_offset=4), Assign([Name('nifile', Store(), lineno=221, col_offset=4)], Call(Name('File', Load(), lineno=221, col_offset=13), [Name('ifile', Load(), lineno=221, col_offset=18), Name('None', Load(), lineno=221, col_offset=25)], [], None, None, lineno=221, col_offset=13), lineno=221, col_offset=4), Expr(Call(Name('unmimify_part', Load(), lineno=222, col_offset=4), [Name('nifile', Load(), lineno=222, col_offset=18), Name('ofile', Load(), lineno=222, col_offset=26), Name('decode_base64', Load(), lineno=222, col_offset=33)], [], None, None, lineno=222, col_offset=4), lineno=222, col_offset=4), Expr(Call(Attribute(Name('ofile', Load(), lineno=223, col_offset=4), 'flush', Load(), lineno=223, col_offset=4), [], [], None, None, lineno=223, col_offset=4), lineno=223, col_offset=4)], [], lineno=207, col_offset=0), Assign([Name('mime_char', Store(), lineno=225, col_offset=0)], Call(Attribute(Name('re', Load(), lineno=225, col_offset=12), 'compile', Load(), lineno=225, col_offset=12), [Str('[=\x7f-\xff]', lineno=225, col_offset=23)], [], None, None, lineno=225, col_offset=12), lineno=225, col_offset=0), Assign([Name('mime_header_char', Store(), lineno=226, col_offset=0)], Call(Attribute(Name('re', Load(), lineno=226, col_offset=19), 'compile', Load(), lineno=226, col_offset=19), [Str('[=?\x7f-\xff]', lineno=226, col_offset=30)], [], None, None, lineno=226, col_offset=19), lineno=226, col_offset=0), FunctionDef('mime_encode', arguments([Name('line', Param(), lineno=228, col_offset=16), Name('header', Param(), lineno=228, col_offset=22)], None, None, []), [Expr(Str('Code a single line as quoted-printable.\n    If header is set, quote some extra characters.', lineno=230, col_offset=-1), lineno=230, col_offset=-1), If(Name('header', Load(), lineno=231, col_offset=7), [Assign([Name('reg', Store(), lineno=232, col_offset=8)], Name('mime_header_char', Load(), lineno=232, col_offset=14), lineno=232, col_offset=8)], [Assign([Name('reg', Store(), lineno=234, col_offset=8)], Name('mime_char', Load(), lineno=234, col_offset=14), lineno=234, col_offset=8)], lineno=231, col_offset=4), Assign([Name('newline', Store(), lineno=235, col_offset=4)], Str('', lineno=235, col_offset=14), lineno=235, col_offset=4), Assign([Name('pos', Store(), lineno=236, col_offset=4)], Num(0, lineno=236, col_offset=10), lineno=236, col_offset=4), If(BoolOp(And(), [Compare(Call(Name('len', Load(), lineno=237, col_offset=7), [Name('line', Load(), lineno=237, col_offset=11)], [], None, None, lineno=237, col_offset=7), [GtE()], [Num(5, lineno=237, col_offset=20)], lineno=237, col_offset=7), Compare(Subscript(Name('line', Load(), lineno=237, col_offset=26), Slice(None, Num(5, lineno=237, col_offset=32), None), Load(), lineno=237, col_offset=26), [Eq()], [Str('From ', lineno=237, col_offset=38)], lineno=237, col_offset=26)], lineno=237, col_offset=7), [Assign([Name('newline', Store(), lineno=239, col_offset=8)], Call(Attribute(BinOp(Str('=%02x', lineno=239, col_offset=19), Mod(), Call(Name('ord', Load(), lineno=239, col_offset=29), [Str('F', lineno=239, col_offset=33)], [], None, None, lineno=239, col_offset=29), lineno=239, col_offset=19), 'upper', Load(), lineno=239, col_offset=19), [], [], None, None, lineno=239, col_offset=19), lineno=239, col_offset=8), Assign([Name('pos', Store(), lineno=240, col_offset=8)], Num(1, lineno=240, col_offset=14), lineno=240, col_offset=8)], [], lineno=237, col_offset=4), While(Num(1, lineno=241, col_offset=10), [Assign([Name('res', Store(), lineno=242, col_offset=8)], Call(Attribute(Name('reg', Load(), lineno=242, col_offset=14), 'search', Load(), lineno=242, col_offset=14), [Name('line', Load(), lineno=242, col_offset=25), Name('pos', Load(), lineno=242, col_offset=31)], [], None, None, lineno=242, col_offset=14), lineno=242, col_offset=8), If(Compare(Name('res', Load(), lineno=243, col_offset=11), [Is()], [Name('None', Load(), lineno=243, col_offset=18)], lineno=243, col_offset=11), [Break( lineno=244, col_offset=12)], [], lineno=243, col_offset=8), Assign([Name('newline', Store(), lineno=245, col_offset=8)], BinOp(BinOp(Name('newline', Load(), lineno=245, col_offset=18), Add(), Subscript(Name('line', Load(), lineno=245, col_offset=28), Slice(Name('pos', Load(), lineno=245, col_offset=33), Call(Attribute(Name('res', Load(), lineno=245, col_offset=37), 'start', Load(), lineno=245, col_offset=37), [Num(0, lineno=245, col_offset=47)], [], None, None, lineno=245, col_offset=37), None), Load(), lineno=245, col_offset=28), lineno=245, col_offset=18), Add(), Call(Attribute(BinOp(Str('=%02x', lineno=246, col_offset=19), Mod(), Call(Name('ord', Load(), lineno=246, col_offset=29), [Call(Attribute(Name('res', Load(), lineno=246, col_offset=33), 'group', Load(), lineno=246, col_offset=33), [Num(0, lineno=246, col_offset=43)], [], None, None, lineno=246, col_offset=33)], [], None, None, lineno=246, col_offset=29), lineno=246, col_offset=19), 'upper', Load(), lineno=246, col_offset=19), [], [], None, None, lineno=246, col_offset=19), lineno=245, col_offset=51), lineno=245, col_offset=8), Assign([Name('pos', Store(), lineno=247, col_offset=8)], Call(Attribute(Name('res', Load(), lineno=247, col_offset=14), 'end', Load(), lineno=247, col_offset=14), [Num(0, lineno=247, col_offset=22)], [], None, None, lineno=247, col_offset=14), lineno=247, col_offset=8)], [], lineno=241, col_offset=4), Assign([Name('line', Store(), lineno=248, col_offset=4)], BinOp(Name('newline', Load(), lineno=248, col_offset=11), Add(), Subscript(Name('line', Load(), lineno=248, col_offset=21), Slice(Name('pos', Load(), lineno=248, col_offset=26), None, None), Load(), lineno=248, col_offset=21), lineno=248, col_offset=11), lineno=248, col_offset=4), Assign([Name('newline', Store(), lineno=250, col_offset=4)], Str('', lineno=250, col_offset=14), lineno=250, col_offset=4), While(Compare(Call(Name('len', Load(), lineno=251, col_offset=10), [Name('line', Load(), lineno=251, col_offset=14)], [], None, None, lineno=251, col_offset=10), [GtE()], [Num(75, lineno=251, col_offset=23)], lineno=251, col_offset=10), [Assign([Name('i', Store(), lineno=252, col_offset=8)], Num(73, lineno=252, col_offset=12), lineno=252, col_offset=8), While(BoolOp(Or(), [Compare(Subscript(Name('line', Load(), lineno=253, col_offset=14), Index(Name('i', Load(), lineno=253, col_offset=19)), Load(), lineno=253, col_offset=14), [Eq()], [Str('=', lineno=253, col_offset=25)], lineno=253, col_offset=14), Compare(Subscript(Name('line', Load(), lineno=253, col_offset=32), Index(BinOp(Name('i', Load(), lineno=253, col_offset=37), Sub(), Num(1, lineno=253, col_offset=39), lineno=253, col_offset=37)), Load(), lineno=253, col_offset=32), [Eq()], [Str('=', lineno=253, col_offset=45)], lineno=253, col_offset=32)], lineno=253, col_offset=14), [Assign([Name('i', Store(), lineno=254, col_offset=12)], BinOp(Name('i', Load(), lineno=254, col_offset=16), Sub(), Num(1, lineno=254, col_offset=20), lineno=254, col_offset=16), lineno=254, col_offset=12)], [], lineno=253, col_offset=8), Assign([Name('i', Store(), lineno=255, col_offset=8)], BinOp(Name('i', Load(), lineno=255, col_offset=12), Add(), Num(1, lineno=255, col_offset=16), lineno=255, col_offset=12), lineno=255, col_offset=8), Assign([Name('newline', Store(), lineno=256, col_offset=8)], BinOp(BinOp(Name('newline', Load(), lineno=256, col_offset=18), Add(), Subscript(Name('line', Load(), lineno=256, col_offset=28), Slice(None, Name('i', Load(), lineno=256, col_offset=34), None), Load(), lineno=256, col_offset=28), lineno=256, col_offset=18), Add(), Str('=\n', lineno=256, col_offset=39), lineno=256, col_offset=37), lineno=256, col_offset=8), Assign([Name('line', Store(), lineno=257, col_offset=8)], Subscript(Name('line', Load(), lineno=257, col_offset=15), Slice(Name('i', Load(), lineno=257, col_offset=20), None, None), Load(), lineno=257, col_offset=15), lineno=257, col_offset=8)], [], lineno=251, col_offset=4), Return(BinOp(Name('newline', Load(), lineno=258, col_offset=11), Add(), Name('line', Load(), lineno=258, col_offset=21), lineno=258, col_offset=11), lineno=258, col_offset=4)], [], lineno=228, col_offset=0), Assign([Name('mime_header', Store(), lineno=260, col_offset=0)], Call(Attribute(Name('re', Load(), lineno=260, col_offset=14), 'compile', Load(), lineno=260, col_offset=14), [Str('([ \t(]|^)([-a-zA-Z0-9_+]*[\x7f-\xff][-a-zA-Z0-9_+\x7f-\xff]*)(?=[ \t)]|\n)', lineno=260, col_offset=25)], [], None, None, lineno=260, col_offset=14), lineno=260, col_offset=0), FunctionDef('mime_encode_header', arguments([Name('line', Param(), lineno=262, col_offset=23)], None, None, []), [Expr(Str('Code a single header line as quoted-printable.', lineno=263, col_offset=4), lineno=263, col_offset=4), Assign([Name('newline', Store(), lineno=264, col_offset=4)], Str('', lineno=264, col_offset=14), lineno=264, col_offset=4), Assign([Name('pos', Store(), lineno=265, col_offset=4)], Num(0, lineno=265, col_offset=10), lineno=265, col_offset=4), While(Num(1, lineno=266, col_offset=10), [Assign([Name('res', Store(), lineno=267, col_offset=8)], Call(Attribute(Name('mime_header', Load(), lineno=267, col_offset=14), 'search', Load(), lineno=267, col_offset=14), [Name('line', Load(), lineno=267, col_offset=33), Name('pos', Load(), lineno=267, col_offset=39)], [], None, None, lineno=267, col_offset=14), lineno=267, col_offset=8), If(Compare(Name('res', Load(), lineno=268, col_offset=11), [Is()], [Name('None', Load(), lineno=268, col_offset=18)], lineno=268, col_offset=11), [Break( lineno=269, col_offset=12)], [], lineno=268, col_offset=8), Assign([Name('newline', Store(), lineno=270, col_offset=8)], BinOp(Str('%s%s%s=?%s?Q?%s?=', lineno=270, col_offset=18), Mod(), Tuple([Name('newline', Load(), lineno=271, col_offset=19), Subscript(Name('line', Load(), lineno=271, col_offset=28), Slice(Name('pos', Load(), lineno=271, col_offset=33), Call(Attribute(Name('res', Load(), lineno=271, col_offset=37), 'start', Load(), lineno=271, col_offset=37), [Num(0, lineno=271, col_offset=47)], [], None, None, lineno=271, col_offset=37), None), Load(), lineno=271, col_offset=28), Call(Attribute(Name('res', Load(), lineno=271, col_offset=52), 'group', Load(), lineno=271, col_offset=52), [Num(1, lineno=271, col_offset=62)], [], None, None, lineno=271, col_offset=52), Name('CHARSET', Load(), lineno=272, col_offset=19), Call(Name('mime_encode', Load(), lineno=272, col_offset=28), [Call(Attribute(Name('res', Load(), lineno=272, col_offset=40), 'group', Load(), lineno=272, col_offset=40), [Num(2, lineno=272, col_offset=50)], [], None, None, lineno=272, col_offset=40), Num(1, lineno=272, col_offset=54)], [], None, None, lineno=272, col_offset=28)], Load(), lineno=271, col_offset=19), lineno=270, col_offset=18), lineno=270, col_offset=8), Assign([Name('pos', Store(), lineno=273, col_offset=8)], Call(Attribute(Name('res', Load(), lineno=273, col_offset=14), 'end', Load(), lineno=273, col_offset=14), [Num(0, lineno=273, col_offset=22)], [], None, None, lineno=273, col_offset=14), lineno=273, col_offset=8)], [], lineno=266, col_offset=4), Return(BinOp(Name('newline', Load(), lineno=274, col_offset=11), Add(), Subscript(Name('line', Load(), lineno=274, col_offset=21), Slice(Name('pos', Load(), lineno=274, col_offset=26), None, None), Load(), lineno=274, col_offset=21), lineno=274, col_offset=11), lineno=274, col_offset=4)], [], lineno=262, col_offset=0), Assign([Name('mv', Store(), lineno=276, col_offset=0)], Call(Attribute(Name('re', Load(), lineno=276, col_offset=5), 'compile', Load(), lineno=276, col_offset=5), [Str('^mime-version:', lineno=276, col_offset=16), Attribute(Name('re', Load(), lineno=276, col_offset=34), 'I', Load(), lineno=276, col_offset=34)], [], None, None, lineno=276, col_offset=5), lineno=276, col_offset=0), Assign([Name('cte', Store(), lineno=277, col_offset=0)], Call(Attribute(Name('re', Load(), lineno=277, col_offset=6), 'compile', Load(), lineno=277, col_offset=6), [Str('^content-transfer-encoding:', lineno=277, col_offset=17), Attribute(Name('re', Load(), lineno=277, col_offset=48), 'I', Load(), lineno=277, col_offset=48)], [], None, None, lineno=277, col_offset=6), lineno=277, col_offset=0), Assign([Name('iso_char', Store(), lineno=278, col_offset=0)], Call(Attribute(Name('re', Load(), lineno=278, col_offset=11), 'compile', Load(), lineno=278, col_offset=11), [Str('[\x7f-\xff]', lineno=278, col_offset=22)], [], None, None, lineno=278, col_offset=11), lineno=278, col_offset=0), FunctionDef('mimify_part', arguments([Name('ifile', Param(), lineno=280, col_offset=16), Name('ofile', Param(), lineno=280, col_offset=23), Name('is_mime', Param(), lineno=280, col_offset=30)], None, None, []), [Expr(Str('Convert an 8bit part of a MIME mail message to quoted-printable.', lineno=281, col_offset=4), lineno=281, col_offset=4), Assign([Name('has_cte', Store(), lineno=282, col_offset=4), Name('is_qp', Store(), lineno=282, col_offset=14), Name('is_base64', Store(), lineno=282, col_offset=22)], Num(0, lineno=282, col_offset=34), lineno=282, col_offset=4), Assign([Name('multipart', Store(), lineno=283, col_offset=4)], Name('None', Load(), lineno=283, col_offset=16), lineno=283, col_offset=4), Assign([Name('must_quote_body', Store(), lineno=284, col_offset=4), Name('must_quote_header', Store(), lineno=284, col_offset=22), Name('has_iso_chars', Store(), lineno=284, col_offset=42)], Num(0, lineno=284, col_offset=58), lineno=284, col_offset=4), Assign([Name('header', Store(), lineno=286, col_offset=4)], List([], Load(), lineno=286, col_offset=13), lineno=286, col_offset=4), Assign([Name('header_end', Store(), lineno=287, col_offset=4)], Str('', lineno=287, col_offset=17), lineno=287, col_offset=4), Assign([Name('message', Store(), lineno=288, col_offset=4)], List([], Load(), lineno=288, col_offset=14), lineno=288, col_offset=4), Assign([Name('message_end', Store(), lineno=289, col_offset=4)], Str('', lineno=289, col_offset=18), lineno=289, col_offset=4), Assign([Name('hfile', Store(), lineno=291, col_offset=4)], Call(Name('HeaderFile', Load(), lineno=291, col_offset=12), [Name('ifile', Load(), lineno=291, col_offset=23)], [], None, None, lineno=291, col_offset=12), lineno=291, col_offset=4), While(Num(1, lineno=292, col_offset=10), [Assign([Name('line', Store(), lineno=293, col_offset=8)], Call(Attribute(Name('hfile', Load(), lineno=293, col_offset=15), 'readline', Load(), lineno=293, col_offset=15), [], [], None, None, lineno=293, col_offset=15), lineno=293, col_offset=8), If(UnaryOp(Not(), Name('line', Load(), lineno=294, col_offset=15), lineno=294, col_offset=11), [Break( lineno=295, col_offset=12)], [], lineno=294, col_offset=8), If(BoolOp(And(), [UnaryOp(Not(), Name('must_quote_header', Load(), lineno=296, col_offset=15), lineno=296, col_offset=11), Call(Attribute(Name('iso_char', Load(), lineno=296, col_offset=37), 'search', Load(), lineno=296, col_offset=37), [Name('line', Load(), lineno=296, col_offset=53)], [], None, None, lineno=296, col_offset=37)], lineno=296, col_offset=11), [Assign([Name('must_quote_header', Store(), lineno=297, col_offset=12)], Num(1, lineno=297, col_offset=32), lineno=297, col_offset=12)], [], lineno=296, col_offset=8), If(Call(Attribute(Name('mv', Load(), lineno=298, col_offset=11), 'match', Load(), lineno=298, col_offset=11), [Name('line', Load(), lineno=298, col_offset=20)], [], None, None, lineno=298, col_offset=11), [Assign([Name('is_mime', Store(), lineno=299, col_offset=12)], Num(1, lineno=299, col_offset=22), lineno=299, col_offset=12)], [], lineno=298, col_offset=8), If(Call(Attribute(Name('cte', Load(), lineno=300, col_offset=11), 'match', Load(), lineno=300, col_offset=11), [Name('line', Load(), lineno=300, col_offset=21)], [], None, None, lineno=300, col_offset=11), [Assign([Name('has_cte', Store(), lineno=301, col_offset=12)], Num(1, lineno=301, col_offset=22), lineno=301, col_offset=12), If(Call(Attribute(Name('qp', Load(), lineno=302, col_offset=15), 'match', Load(), lineno=302, col_offset=15), [Name('line', Load(), lineno=302, col_offset=24)], [], None, None, lineno=302, col_offset=15), [Assign([Name('is_qp', Store(), lineno=303, col_offset=16)], Num(1, lineno=303, col_offset=24), lineno=303, col_offset=16)], [If(Call(Attribute(Name('base64_re', Load(), lineno=304, col_offset=17), 'match', Load(), lineno=304, col_offset=17), [Name('line', Load(), lineno=304, col_offset=33)], [], None, None, lineno=304, col_offset=17), [Assign([Name('is_base64', Store(), lineno=305, col_offset=16)], Num(1, lineno=305, col_offset=28), lineno=305, col_offset=16)], [], lineno=304, col_offset=17)], lineno=302, col_offset=12)], [], lineno=300, col_offset=8), Assign([Name('mp_res', Store(), lineno=306, col_offset=8)], Call(Attribute(Name('mp', Load(), lineno=306, col_offset=17), 'match', Load(), lineno=306, col_offset=17), [Name('line', Load(), lineno=306, col_offset=26)], [], None, None, lineno=306, col_offset=17), lineno=306, col_offset=8), If(Name('mp_res', Load(), lineno=307, col_offset=11), [Assign([Name('multipart', Store(), lineno=308, col_offset=12)], BinOp(Str('--', lineno=308, col_offset=24), Add(), Call(Attribute(Name('mp_res', Load(), lineno=308, col_offset=31), 'group', Load(), lineno=308, col_offset=31), [Num(1, lineno=308, col_offset=44)], [], None, None, lineno=308, col_offset=31), lineno=308, col_offset=24), lineno=308, col_offset=12)], [], lineno=307, col_offset=8), If(Call(Attribute(Name('he', Load(), lineno=309, col_offset=11), 'match', Load(), lineno=309, col_offset=11), [Name('line', Load(), lineno=309, col_offset=20)], [], None, None, lineno=309, col_offset=11), [Assign([Name('header_end', Store(), lineno=310, col_offset=12)], Name('line', Load(), lineno=310, col_offset=25), lineno=310, col_offset=12), Break( lineno=311, col_offset=12)], [], lineno=309, col_offset=8), Expr(Call(Attribute(Name('header', Load(), lineno=312, col_offset=8), 'append', Load(), lineno=312, col_offset=8), [Name('line', Load(), lineno=312, col_offset=22)], [], None, None, lineno=312, col_offset=8), lineno=312, col_offset=8)], [], lineno=292, col_offset=4), While(Num(1, lineno=315, col_offset=10), [Assign([Name('line', Store(), lineno=316, col_offset=8)], Call(Attribute(Name('ifile', Load(), lineno=316, col_offset=15), 'readline', Load(), lineno=316, col_offset=15), [], [], None, None, lineno=316, col_offset=15), lineno=316, col_offset=8), If(UnaryOp(Not(), Name('line', Load(), lineno=317, col_offset=15), lineno=317, col_offset=11), [Break( lineno=318, col_offset=12)], [], lineno=317, col_offset=8), If(Name('multipart', Load(), lineno=319, col_offset=11), [If(Compare(Name('line', Load(), lineno=320, col_offset=15), [Eq()], [BinOp(Name('multipart', Load(), lineno=320, col_offset=23), Add(), Str('--\n', lineno=320, col_offset=35), lineno=320, col_offset=23)], lineno=320, col_offset=15), [Assign([Name('message_end', Store(), lineno=321, col_offset=16)], Name('line', Load(), lineno=321, col_offset=30), lineno=321, col_offset=16), Break( lineno=322, col_offset=16)], [], lineno=320, col_offset=12), If(Compare(Name('line', Load(), lineno=323, col_offset=15), [Eq()], [BinOp(Name('multipart', Load(), lineno=323, col_offset=23), Add(), Str('\n', lineno=323, col_offset=35), lineno=323, col_offset=23)], lineno=323, col_offset=15), [Assign([Name('message_end', Store(), lineno=324, col_offset=16)], Name('line', Load(), lineno=324, col_offset=30), lineno=324, col_offset=16), Break( lineno=325, col_offset=16)], [], lineno=323, col_offset=12)], [], lineno=319, col_offset=8), If(Name('is_base64', Load(), lineno=326, col_offset=11), [Expr(Call(Attribute(Name('message', Load(), lineno=327, col_offset=12), 'append', Load(), lineno=327, col_offset=12), [Name('line', Load(), lineno=327, col_offset=27)], [], None, None, lineno=327, col_offset=12), lineno=327, col_offset=12), Continue( lineno=328, col_offset=12)], [], lineno=326, col_offset=8), If(Name('is_qp', Load(), lineno=329, col_offset=11), [While(Compare(Subscript(Name('line', Load(), lineno=330, col_offset=18), Slice(Num(-2, lineno=330, col_offset=24), None, None), Load(), lineno=330, col_offset=18), [Eq()], [Str('=\n', lineno=330, col_offset=31)], lineno=330, col_offset=18), [Assign([Name('line', Store(), lineno=331, col_offset=16)], Subscript(Name('line', Load(), lineno=331, col_offset=23), Slice(None, Num(-2, lineno=331, col_offset=30), None), Load(), lineno=331, col_offset=23), lineno=331, col_offset=16), Assign([Name('newline', Store(), lineno=332, col_offset=16)], Call(Attribute(Name('ifile', Load(), lineno=332, col_offset=26), 'readline', Load(), lineno=332, col_offset=26), [], [], None, None, lineno=332, col_offset=26), lineno=332, col_offset=16), If(Compare(Subscript(Name('newline', Load(), lineno=333, col_offset=19), Slice(None, Call(Name('len', Load(), lineno=333, col_offset=28), [Name('QUOTE', Load(), lineno=333, col_offset=32)], [], None, None, lineno=333, col_offset=28), None), Load(), lineno=333, col_offset=19), [Eq()], [Name('QUOTE', Load(), lineno=333, col_offset=43)], lineno=333, col_offset=19), [Assign([Name('newline', Store(), lineno=334, col_offset=20)], Subscript(Name('newline', Load(), lineno=334, col_offset=30), Slice(Call(Name('len', Load(), lineno=334, col_offset=38), [Name('QUOTE', Load(), lineno=334, col_offset=42)], [], None, None, lineno=334, col_offset=38), None, None), Load(), lineno=334, col_offset=30), lineno=334, col_offset=20)], [], lineno=333, col_offset=16), Assign([Name('line', Store(), lineno=335, col_offset=16)], BinOp(Name('line', Load(), lineno=335, col_offset=23), Add(), Name('newline', Load(), lineno=335, col_offset=30), lineno=335, col_offset=23), lineno=335, col_offset=16)], [], lineno=330, col_offset=12), Assign([Name('line', Store(), lineno=336, col_offset=12)], Call(Name('mime_decode', Load(), lineno=336, col_offset=19), [Name('line', Load(), lineno=336, col_offset=31)], [], None, None, lineno=336, col_offset=19), lineno=336, col_offset=12)], [], lineno=329, col_offset=8), Expr(Call(Attribute(Name('message', Load(), lineno=337, col_offset=8), 'append', Load(), lineno=337, col_offset=8), [Name('line', Load(), lineno=337, col_offset=23)], [], None, None, lineno=337, col_offset=8), lineno=337, col_offset=8), If(UnaryOp(Not(), Name('has_iso_chars', Load(), lineno=338, col_offset=15), lineno=338, col_offset=11), [If(Call(Attribute(Name('iso_char', Load(), lineno=339, col_offset=15), 'search', Load(), lineno=339, col_offset=15), [Name('line', Load(), lineno=339, col_offset=31)], [], None, None, lineno=339, col_offset=15), [Assign([Name('has_iso_chars', Store(), lineno=340, col_offset=16), Name('must_quote_body', Store(), lineno=340, col_offset=32)], Num(1, lineno=340, col_offset=50), lineno=340, col_offset=16)], [], lineno=339, col_offset=12)], [], lineno=338, col_offset=8), If(UnaryOp(Not(), Name('must_quote_body', Load(), lineno=341, col_offset=15), lineno=341, col_offset=11), [If(Compare(Call(Name('len', Load(), lineno=342, col_offset=15), [Name('line', Load(), lineno=342, col_offset=19)], [], None, None, lineno=342, col_offset=15), [Gt()], [Name('MAXLEN', Load(), lineno=342, col_offset=27)], lineno=342, col_offset=15), [Assign([Name('must_quote_body', Store(), lineno=343, col_offset=16)], Num(1, lineno=343, col_offset=34), lineno=343, col_offset=16)], [], lineno=342, col_offset=12)], [], lineno=341, col_offset=8)], [], lineno=315, col_offset=4), For(Name('line', Store(), lineno=346, col_offset=8), Name('header', Load(), lineno=346, col_offset=16), [If(Name('must_quote_header', Load(), lineno=347, col_offset=11), [Assign([Name('line', Store(), lineno=348, col_offset=12)], Call(Name('mime_encode_header', Load(), lineno=348, col_offset=19), [Name('line', Load(), lineno=348, col_offset=38)], [], None, None, lineno=348, col_offset=19), lineno=348, col_offset=12)], [], lineno=347, col_offset=8), Assign([Name('chrset_res', Store(), lineno=349, col_offset=8)], Call(Attribute(Name('chrset', Load(), lineno=349, col_offset=21), 'match', Load(), lineno=349, col_offset=21), [Name('line', Load(), lineno=349, col_offset=34)], [], None, None, lineno=349, col_offset=21), lineno=349, col_offset=8), If(Name('chrset_res', Load(), lineno=350, col_offset=11), [If(Name('has_iso_chars', Load(), lineno=351, col_offset=15), [If(Compare(Call(Attribute(Call(Attribute(Name('chrset_res', Load(), lineno=353, col_offset=19), 'group', Load(), lineno=353, col_offset=19), [Num(2, lineno=353, col_offset=36)], [], None, None, lineno=353, col_offset=19), 'lower', Load(), lineno=353, col_offset=19), [], [], None, None, lineno=353, col_offset=19), [Eq()], [Str('us-ascii', lineno=353, col_offset=50)], lineno=353, col_offset=19), [Assign([Name('line', Store(), lineno=354, col_offset=20)], BinOp(Str('%s%s%s', lineno=354, col_offset=27), Mod(), Tuple([Call(Attribute(Name('chrset_res', Load(), lineno=354, col_offset=39), 'group', Load(), lineno=354, col_offset=39), [Num(1, lineno=354, col_offset=56)], [], None, None, lineno=354, col_offset=39), Name('CHARSET', Load(), lineno=355, col_offset=39), Call(Attribute(Name('chrset_res', Load(), lineno=356, col_offset=39), 'group', Load(), lineno=356, col_offset=39), [Num(3, lineno=356, col_offset=56)], [], None, None, lineno=356, col_offset=39)], Load(), lineno=354, col_offset=39), lineno=354, col_offset=27), lineno=354, col_offset=20)], [], lineno=353, col_offset=16)], [Assign([Name('line', Store(), lineno=359, col_offset=16)], BinOp(Str('%sus-ascii%s', lineno=359, col_offset=23), Mod(), Call(Attribute(Name('chrset_res', Load(), lineno=359, col_offset=40), 'group', Load(), lineno=359, col_offset=40), [Num(1, lineno=359, col_offset=57), Num(3, lineno=359, col_offset=60)], [], None, None, lineno=359, col_offset=40), lineno=359, col_offset=23), lineno=359, col_offset=16)], lineno=351, col_offset=12)], [], lineno=350, col_offset=8), If(BoolOp(And(), [Name('has_cte', Load(), lineno=360, col_offset=11), Call(Attribute(Name('cte', Load(), lineno=360, col_offset=23), 'match', Load(), lineno=360, col_offset=23), [Name('line', Load(), lineno=360, col_offset=33)], [], None, None, lineno=360, col_offset=23)], lineno=360, col_offset=11), [Assign([Name('line', Store(), lineno=361, col_offset=12)], Str('Content-Transfer-Encoding: ', lineno=361, col_offset=19), lineno=361, col_offset=12), If(Name('is_base64', Load(), lineno=362, col_offset=15), [Assign([Name('line', Store(), lineno=363, col_offset=16)], BinOp(Name('line', Load(), lineno=363, col_offset=23), Add(), Str('base64\n', lineno=363, col_offset=30), lineno=363, col_offset=23), lineno=363, col_offset=16)], [If(Name('must_quote_body', Load(), lineno=364, col_offset=17), [Assign([Name('line', Store(), lineno=365, col_offset=16)], BinOp(Name('line', Load(), lineno=365, col_offset=23), Add(), Str('quoted-printable\n', lineno=365, col_offset=30), lineno=365, col_offset=23), lineno=365, col_offset=16)], [Assign([Name('line', Store(), lineno=367, col_offset=16)], BinOp(Name('line', Load(), lineno=367, col_offset=23), Add(), Str('7bit\n', lineno=367, col_offset=30), lineno=367, col_offset=23), lineno=367, col_offset=16)], lineno=364, col_offset=17)], lineno=362, col_offset=12)], [], lineno=360, col_offset=8), Expr(Call(Attribute(Name('ofile', Load(), lineno=368, col_offset=8), 'write', Load(), lineno=368, col_offset=8), [Name('line', Load(), lineno=368, col_offset=20)], [], None, None, lineno=368, col_offset=8), lineno=368, col_offset=8)], [], lineno=346, col_offset=4), If(BoolOp(And(), [BoolOp(Or(), [Name('must_quote_header', Load(), lineno=369, col_offset=8), Name('must_quote_body', Load(), lineno=369, col_offset=29)], lineno=369, col_offset=8), UnaryOp(Not(), Name('is_mime', Load(), lineno=369, col_offset=54), lineno=369, col_offset=50)], lineno=369, col_offset=7), [Expr(Call(Attribute(Name('ofile', Load(), lineno=370, col_offset=8), 'write', Load(), lineno=370, col_offset=8), [Str('Mime-Version: 1.0\n', lineno=370, col_offset=20)], [], None, None, lineno=370, col_offset=8), lineno=370, col_offset=8), Expr(Call(Attribute(Name('ofile', Load(), lineno=371, col_offset=8), 'write', Load(), lineno=371, col_offset=8), [Str('Content-Type: text/plain; ', lineno=371, col_offset=20)], [], None, None, lineno=371, col_offset=8), lineno=371, col_offset=8), If(Name('has_iso_chars', Load(), lineno=372, col_offset=11), [Expr(Call(Attribute(Name('ofile', Load(), lineno=373, col_offset=12), 'write', Load(), lineno=373, col_offset=12), [BinOp(Str('charset="%s"\n', lineno=373, col_offset=24), Mod(), Name('CHARSET', Load(), lineno=373, col_offset=43), lineno=373, col_offset=24)], [], None, None, lineno=373, col_offset=12), lineno=373, col_offset=12)], [Expr(Call(Attribute(Name('ofile', Load(), lineno=375, col_offset=12), 'write', Load(), lineno=375, col_offset=12), [Str('charset="us-ascii"\n', lineno=375, col_offset=24)], [], None, None, lineno=375, col_offset=12), lineno=375, col_offset=12)], lineno=372, col_offset=8)], [], lineno=369, col_offset=4), If(BoolOp(And(), [Name('must_quote_body', Load(), lineno=376, col_offset=7), UnaryOp(Not(), Name('has_cte', Load(), lineno=376, col_offset=31), lineno=376, col_offset=27)], lineno=376, col_offset=7), [Expr(Call(Attribute(Name('ofile', Load(), lineno=377, col_offset=8), 'write', Load(), lineno=377, col_offset=8), [Str('Content-Transfer-Encoding: quoted-printable\n', lineno=377, col_offset=20)], [], None, None, lineno=377, col_offset=8), lineno=377, col_offset=8)], [], lineno=376, col_offset=4), Expr(Call(Attribute(Name('ofile', Load(), lineno=378, col_offset=4), 'write', Load(), lineno=378, col_offset=4), [Name('header_end', Load(), lineno=378, col_offset=16)], [], None, None, lineno=378, col_offset=4), lineno=378, col_offset=4), For(Name('line', Store(), lineno=380, col_offset=8), Name('message', Load(), lineno=380, col_offset=16), [If(Name('must_quote_body', Load(), lineno=381, col_offset=11), [Assign([Name('line', Store(), lineno=382, col_offset=12)], Call(Name('mime_encode', Load(), lineno=382, col_offset=19), [Name('line', Load(), lineno=382, col_offset=31), Num(0, lineno=382, col_offset=37)], [], None, None, lineno=382, col_offset=19), lineno=382, col_offset=12)], [], lineno=381, col_offset=8), Expr(Call(Attribute(Name('ofile', Load(), lineno=383, col_offset=8), 'write', Load(), lineno=383, col_offset=8), [Name('line', Load(), lineno=383, col_offset=20)], [], None, None, lineno=383, col_offset=8), lineno=383, col_offset=8)], [], lineno=380, col_offset=4), Expr(Call(Attribute(Name('ofile', Load(), lineno=384, col_offset=4), 'write', Load(), lineno=384, col_offset=4), [Name('message_end', Load(), lineno=384, col_offset=16)], [], None, None, lineno=384, col_offset=4), lineno=384, col_offset=4), Assign([Name('line', Store(), lineno=386, col_offset=4)], Name('message_end', Load(), lineno=386, col_offset=11), lineno=386, col_offset=4), While(Name('multipart', Load(), lineno=387, col_offset=10), [If(Compare(Name('line', Load(), lineno=388, col_offset=11), [Eq()], [BinOp(Name('multipart', Load(), lineno=388, col_offset=19), Add(), Str('--\n', lineno=388, col_offset=31), lineno=388, col_offset=19)], lineno=388, col_offset=11), [While(Num(1, lineno=390, col_offset=18), [Assign([Name('line', Store(), lineno=391, col_offset=16)], Call(Attribute(Name('ifile', Load(), lineno=391, col_offset=23), 'readline', Load(), lineno=391, col_offset=23), [], [], None, None, lineno=391, col_offset=23), lineno=391, col_offset=16), If(UnaryOp(Not(), Name('line', Load(), lineno=392, col_offset=23), lineno=392, col_offset=19), [Return(None, lineno=393, col_offset=20)], [], lineno=392, col_offset=16), If(Name('must_quote_body', Load(), lineno=394, col_offset=19), [Assign([Name('line', Store(), lineno=395, col_offset=20)], Call(Name('mime_encode', Load(), lineno=395, col_offset=27), [Name('line', Load(), lineno=395, col_offset=39), Num(0, lineno=395, col_offset=45)], [], None, None, lineno=395, col_offset=27), lineno=395, col_offset=20)], [], lineno=394, col_offset=16), Expr(Call(Attribute(Name('ofile', Load(), lineno=396, col_offset=16), 'write', Load(), lineno=396, col_offset=16), [Name('line', Load(), lineno=396, col_offset=28)], [], None, None, lineno=396, col_offset=16), lineno=396, col_offset=16)], [], lineno=390, col_offset=12)], [], lineno=388, col_offset=8), If(Compare(Name('line', Load(), lineno=397, col_offset=11), [Eq()], [BinOp(Name('multipart', Load(), lineno=397, col_offset=19), Add(), Str('\n', lineno=397, col_offset=31), lineno=397, col_offset=19)], lineno=397, col_offset=11), [Assign([Name('nifile', Store(), lineno=398, col_offset=12)], Call(Name('File', Load(), lineno=398, col_offset=21), [Name('ifile', Load(), lineno=398, col_offset=26), Name('multipart', Load(), lineno=398, col_offset=33)], [], None, None, lineno=398, col_offset=21), lineno=398, col_offset=12), Expr(Call(Name('mimify_part', Load(), lineno=399, col_offset=12), [Name('nifile', Load(), lineno=399, col_offset=24), Name('ofile', Load(), lineno=399, col_offset=32), Num(1, lineno=399, col_offset=39)], [], None, None, lineno=399, col_offset=12), lineno=399, col_offset=12), Assign([Name('line', Store(), lineno=400, col_offset=12)], Attribute(Name('nifile', Load(), lineno=400, col_offset=19), 'peek', Load(), lineno=400, col_offset=19), lineno=400, col_offset=12), If(UnaryOp(Not(), Name('line', Load(), lineno=401, col_offset=19), lineno=401, col_offset=15), [Break( lineno=403, col_offset=16)], [], lineno=401, col_offset=12), Expr(Call(Attribute(Name('ofile', Load(), lineno=404, col_offset=12), 'write', Load(), lineno=404, col_offset=12), [Name('line', Load(), lineno=404, col_offset=24)], [], None, None, lineno=404, col_offset=12), lineno=404, col_offset=12), Continue( lineno=405, col_offset=12)], [], lineno=397, col_offset=8), While(Num(1, lineno=407, col_offset=14), [Assign([Name('line', Store(), lineno=408, col_offset=12)], Call(Attribute(Name('ifile', Load(), lineno=408, col_offset=19), 'readline', Load(), lineno=408, col_offset=19), [], [], None, None, lineno=408, col_offset=19), lineno=408, col_offset=12), If(UnaryOp(Not(), Name('line', Load(), lineno=409, col_offset=19), lineno=409, col_offset=15), [Return(None, lineno=410, col_offset=16)], [], lineno=409, col_offset=12), If(Name('must_quote_body', Load(), lineno=411, col_offset=15), [Assign([Name('line', Store(), lineno=412, col_offset=16)], Call(Name('mime_encode', Load(), lineno=412, col_offset=23), [Name('line', Load(), lineno=412, col_offset=35), Num(0, lineno=412, col_offset=41)], [], None, None, lineno=412, col_offset=23), lineno=412, col_offset=16)], [], lineno=411, col_offset=12), Expr(Call(Attribute(Name('ofile', Load(), lineno=413, col_offset=12), 'write', Load(), lineno=413, col_offset=12), [Name('line', Load(), lineno=413, col_offset=24)], [], None, None, lineno=413, col_offset=12), lineno=413, col_offset=12)], [], lineno=407, col_offset=8)], [], lineno=387, col_offset=4)], [], lineno=280, col_offset=0), FunctionDef('mimify', arguments([Name('infile', Param(), lineno=415, col_offset=11), Name('outfile', Param(), lineno=415, col_offset=19)], None, None, []), [Expr(Str('Convert 8bit parts of a MIME mail message to quoted-printable.', lineno=416, col_offset=4), lineno=416, col_offset=4), If(Compare(Call(Name('type', Load(), lineno=417, col_offset=7), [Name('infile', Load(), lineno=417, col_offset=12)], [], None, None, lineno=417, col_offset=7), [Eq()], [Call(Name('type', Load(), lineno=417, col_offset=23), [Str('', lineno=417, col_offset=28)], [], None, None, lineno=417, col_offset=23)], lineno=417, col_offset=7), [Assign([Name('ifile', Store(), lineno=418, col_offset=8)], Call(Name('open', Load(), lineno=418, col_offset=16), [Name('infile', Load(), lineno=418, col_offset=21)], [], None, None, lineno=418, col_offset=16), lineno=418, col_offset=8), If(BoolOp(And(), [Compare(Call(Name('type', Load(), lineno=419, col_offset=11), [Name('outfile', Load(), lineno=419, col_offset=16)], [], None, None, lineno=419, col_offset=11), [Eq()], [Call(Name('type', Load(), lineno=419, col_offset=28), [Str('', lineno=419, col_offset=33)], [], None, None, lineno=419, col_offset=28)], lineno=419, col_offset=11), Compare(Name('infile', Load(), lineno=419, col_offset=41), [Eq()], [Name('outfile', Load(), lineno=419, col_offset=51)], lineno=419, col_offset=41)], lineno=419, col_offset=11), [Import([alias('os', None)], lineno=420, col_offset=12), Assign([Tuple([Name('d', Store(), lineno=421, col_offset=12), Name('f', Store(), lineno=421, col_offset=15)], Store(), lineno=421, col_offset=12)], Call(Attribute(Attribute(Name('os', Load(), lineno=421, col_offset=19), 'path', Load(), lineno=421, col_offset=19), 'split', Load(), lineno=421, col_offset=19), [Name('infile', Load(), lineno=421, col_offset=33)], [], None, None, lineno=421, col_offset=19), lineno=421, col_offset=12), Expr(Call(Attribute(Name('os', Load(), lineno=422, col_offset=12), 'rename', Load(), lineno=422, col_offset=12), [Name('infile', Load(), lineno=422, col_offset=22), Call(Attribute(Attribute(Name('os', Load(), lineno=422, col_offset=30), 'path', Load(), lineno=422, col_offset=30), 'join', Load(), lineno=422, col_offset=30), [Name('d', Load(), lineno=422, col_offset=43), BinOp(Str(',', lineno=422, col_offset=46), Add(), Name('f', Load(), lineno=422, col_offset=52), lineno=422, col_offset=46)], [], None, None, lineno=422, col_offset=30)], [], None, None, lineno=422, col_offset=12), lineno=422, col_offset=12)], [], lineno=419, col_offset=8)], [Assign([Name('ifile', Store(), lineno=424, col_offset=8)], Name('infile', Load(), lineno=424, col_offset=16), lineno=424, col_offset=8)], lineno=417, col_offset=4), If(Compare(Call(Name('type', Load(), lineno=425, col_offset=7), [Name('outfile', Load(), lineno=425, col_offset=12)], [], None, None, lineno=425, col_offset=7), [Eq()], [Call(Name('type', Load(), lineno=425, col_offset=24), [Str('', lineno=425, col_offset=29)], [], None, None, lineno=425, col_offset=24)], lineno=425, col_offset=7), [Assign([Name('ofile', Store(), lineno=426, col_offset=8)], Call(Name('open', Load(), lineno=426, col_offset=16), [Name('outfile', Load(), lineno=426, col_offset=21), Str('w', lineno=426, col_offset=30)], [], None, None, lineno=426, col_offset=16), lineno=426, col_offset=8)], [Assign([Name('ofile', Store(), lineno=428, col_offset=8)], Name('outfile', Load(), lineno=428, col_offset=16), lineno=428, col_offset=8)], lineno=425, col_offset=4), Assign([Name('nifile', Store(), lineno=429, col_offset=4)], Call(Name('File', Load(), lineno=429, col_offset=13), [Name('ifile', Load(), lineno=429, col_offset=18), Name('None', Load(), lineno=429, col_offset=25)], [], None, None, lineno=429, col_offset=13), lineno=429, col_offset=4), Expr(Call(Name('mimify_part', Load(), lineno=430, col_offset=4), [Name('nifile', Load(), lineno=430, col_offset=16), Name('ofile', Load(), lineno=430, col_offset=24), Num(0, lineno=430, col_offset=31)], [], None, None, lineno=430, col_offset=4), lineno=430, col_offset=4), Expr(Call(Attribute(Name('ofile', Load(), lineno=431, col_offset=4), 'flush', Load(), lineno=431, col_offset=4), [], [], None, None, lineno=431, col_offset=4), lineno=431, col_offset=4)], [], lineno=415, col_offset=0), Import([alias('sys', None)], lineno=433, col_offset=0), If(BoolOp(Or(), [Compare(Name('__name__', Load(), lineno=434, col_offset=3), [Eq()], [Str('__main__', lineno=434, col_offset=15)], lineno=434, col_offset=3), BoolOp(And(), [Compare(Call(Name('len', Load(), lineno=434, col_offset=30), [Attribute(Name('sys', Load(), lineno=434, col_offset=34), 'argv', Load(), lineno=434, col_offset=34)], [], None, None, lineno=434, col_offset=30), [Gt()], [Num(0, lineno=434, col_offset=46)], lineno=434, col_offset=30), Compare(Subscript(Attribute(Name('sys', Load(), lineno=434, col_offset=52), 'argv', Load(), lineno=434, col_offset=52), Index(Num(0, lineno=434, col_offset=61)), Load(), lineno=434, col_offset=52), [Eq()], [Str('mimify', lineno=434, col_offset=67)], lineno=434, col_offset=52)], lineno=434, col_offset=30)], lineno=434, col_offset=3), [Import([alias('getopt', None)], lineno=435, col_offset=4), Assign([Name('usage', Store(), lineno=436, col_offset=4)], Str('Usage: mimify [-l len] -[ed] [infile [outfile]]', lineno=436, col_offset=12), lineno=436, col_offset=4), Assign([Name('decode_base64', Store(), lineno=438, col_offset=4)], Num(0, lineno=438, col_offset=20), lineno=438, col_offset=4), Assign([Tuple([Name('opts', Store(), lineno=439, col_offset=4), Name('args', Store(), lineno=439, col_offset=10)], Store(), lineno=439, col_offset=4)], Call(Attribute(Name('getopt', Load(), lineno=439, col_offset=17), 'getopt', Load(), lineno=439, col_offset=17), [Subscript(Attribute(Name('sys', Load(), lineno=439, col_offset=31), 'argv', Load(), lineno=439, col_offset=31), Slice(Num(1, lineno=439, col_offset=40), None, None), Load(), lineno=439, col_offset=31), Str('l:edb', lineno=439, col_offset=45)], [], None, None, lineno=439, col_offset=17), lineno=439, col_offset=4), If(Compare(Call(Name('len', Load(), lineno=440, col_offset=7), [Name('args', Load(), lineno=440, col_offset=11)], [], None, None, lineno=440, col_offset=7), [NotIn()], [Tuple([Num(0, lineno=440, col_offset=25), Num(1, lineno=440, col_offset=28), Num(2, lineno=440, col_offset=31)], Load(), lineno=440, col_offset=25)], lineno=440, col_offset=7), [Print(None, [Name('usage', Load(), lineno=441, col_offset=14)], True, lineno=441, col_offset=8), Expr(Call(Attribute(Name('sys', Load(), lineno=442, col_offset=8), 'exit', Load(), lineno=442, col_offset=8), [Num(1, lineno=442, col_offset=17)], [], None, None, lineno=442, col_offset=8), lineno=442, col_offset=8)], [], lineno=440, col_offset=4), If(BoolOp(Or(), [Compare(Compare(Tuple([Str('-e', lineno=443, col_offset=9), Str('', lineno=443, col_offset=15)], Load(), lineno=443, col_offset=9), [In()], [Name('opts', Load(), lineno=443, col_offset=22)], lineno=443, col_offset=8), [Eq()], [Compare(Tuple([Str('-d', lineno=443, col_offset=33), Str('', lineno=443, col_offset=39)], Load(), lineno=443, col_offset=33), [In()], [Name('opts', Load(), lineno=443, col_offset=46)], lineno=443, col_offset=32)], lineno=443, col_offset=7), BoolOp(And(), [Compare(Tuple([Str('-b', lineno=444, col_offset=10), Str('', lineno=444, col_offset=16)], Load(), lineno=444, col_offset=10), [In()], [Name('opts', Load(), lineno=444, col_offset=23)], lineno=444, col_offset=9), Compare(Tuple([Str('-d', lineno=444, col_offset=35), Str('', lineno=444, col_offset=41)], Load(), lineno=444, col_offset=35), [NotIn()], [Name('opts', Load(), lineno=444, col_offset=52)], lineno=444, col_offset=34)], lineno=444, col_offset=8)], lineno=443, col_offset=7), [Print(None, [Name('usage', Load(), lineno=445, col_offset=14)], True, lineno=445, col_offset=8), Expr(Call(Attribute(Name('sys', Load(), lineno=446, col_offset=8), 'exit', Load(), lineno=446, col_offset=8), [Num(1, lineno=446, col_offset=17)], [], None, None, lineno=446, col_offset=8), lineno=446, col_offset=8)], [], lineno=443, col_offset=4), For(Tuple([Name('o', Store(), lineno=447, col_offset=8), Name('a', Store(), lineno=447, col_offset=11)], Store(), lineno=447, col_offset=8), Name('opts', Load(), lineno=447, col_offset=16), [If(Compare(Name('o', Load(), lineno=448, col_offset=11), [Eq()], [Str('-e', lineno=448, col_offset=16)], lineno=448, col_offset=11), [Assign([Name('encode', Store(), lineno=449, col_offset=12)], Name('mimify', Load(), lineno=449, col_offset=21), lineno=449, col_offset=12)], [If(Compare(Name('o', Load(), lineno=450, col_offset=13), [Eq()], [Str('-d', lineno=450, col_offset=18)], lineno=450, col_offset=13), [Assign([Name('encode', Store(), lineno=451, col_offset=12)], Name('unmimify', Load(), lineno=451, col_offset=21), lineno=451, col_offset=12)], [If(Compare(Name('o', Load(), lineno=452, col_offset=13), [Eq()], [Str('-l', lineno=452, col_offset=18)], lineno=452, col_offset=13), [TryExcept([Assign([Name('MAXLEN', Store(), lineno=454, col_offset=16)], Call(Name('int', Load(), lineno=454, col_offset=25), [Name('a', Load(), lineno=454, col_offset=29)], [], None, None, lineno=454, col_offset=25), lineno=454, col_offset=16)], [ExceptHandler(Tuple([Name('ValueError', Load(), lineno=455, col_offset=20), Name('OverflowError', Load(), lineno=455, col_offset=32)], Load(), lineno=455, col_offset=20), None, [Print(None, [Name('usage', Load(), lineno=456, col_offset=22)], True, lineno=456, col_offset=16), Expr(Call(Attribute(Name('sys', Load(), lineno=457, col_offset=16), 'exit', Load(), lineno=457, col_offset=16), [Num(1, lineno=457, col_offset=25)], [], None, None, lineno=457, col_offset=16), lineno=457, col_offset=16)], lineno=455, col_offset=12)], [], lineno=453, col_offset=12)], [If(Compare(Name('o', Load(), lineno=458, col_offset=13), [Eq()], [Str('-b', lineno=458, col_offset=18)], lineno=458, col_offset=13), [Assign([Name('decode_base64', Store(), lineno=459, col_offset=12)], Num(1, lineno=459, col_offset=28), lineno=459, col_offset=12)], [], lineno=458, col_offset=13)], lineno=452, col_offset=13)], lineno=450, col_offset=13)], lineno=448, col_offset=8)], [], lineno=447, col_offset=4), If(Compare(Call(Name('len', Load(), lineno=460, col_offset=7), [Name('args', Load(), lineno=460, col_offset=11)], [], None, None, lineno=460, col_offset=7), [Eq()], [Num(0, lineno=460, col_offset=20)], lineno=460, col_offset=7), [Assign([Name('encode_args', Store(), lineno=461, col_offset=8)], Tuple([Attribute(Name('sys', Load(), lineno=461, col_offset=23), 'stdin', Load(), lineno=461, col_offset=23), Attribute(Name('sys', Load(), lineno=461, col_offset=34), 'stdout', Load(), lineno=461, col_offset=34)], Load(), lineno=461, col_offset=23), lineno=461, col_offset=8)], [If(Compare(Call(Name('len', Load(), lineno=462, col_offset=9), [Name('args', Load(), lineno=462, col_offset=13)], [], None, None, lineno=462, col_offset=9), [Eq()], [Num(1, lineno=462, col_offset=22)], lineno=462, col_offset=9), [Assign([Name('encode_args', Store(), lineno=463, col_offset=8)], Tuple([Subscript(Name('args', Load(), lineno=463, col_offset=23), Index(Num(0, lineno=463, col_offset=28)), Load(), lineno=463, col_offset=23), Attribute(Name('sys', Load(), lineno=463, col_offset=32), 'stdout', Load(), lineno=463, col_offset=32)], Load(), lineno=463, col_offset=23), lineno=463, col_offset=8)], [Assign([Name('encode_args', Store(), lineno=465, col_offset=8)], Tuple([Subscript(Name('args', Load(), lineno=465, col_offset=23), Index(Num(0, lineno=465, col_offset=28)), Load(), lineno=465, col_offset=23), Subscript(Name('args', Load(), lineno=465, col_offset=32), Index(Num(1, lineno=465, col_offset=37)), Load(), lineno=465, col_offset=32)], Load(), lineno=465, col_offset=23), lineno=465, col_offset=8)], lineno=462, col_offset=9)], lineno=460, col_offset=4), If(Name('decode_base64', Load(), lineno=466, col_offset=7), [Assign([Name('encode_args', Store(), lineno=467, col_offset=8)], BinOp(Name('encode_args', Load(), lineno=467, col_offset=22), Add(), Tuple([Name('decode_base64', Load(), lineno=467, col_offset=37)], Load(), lineno=467, col_offset=37), lineno=467, col_offset=22), lineno=467, col_offset=8)], [], lineno=466, col_offset=4), Expr(Call(Name('encode', Load(), lineno=468, col_offset=4), [], [], Name('encode_args', Load(), lineno=468, col_offset=12), None, lineno=468, col_offset=4), lineno=468, col_offset=4)], [], lineno=434, col_offset=0)])
