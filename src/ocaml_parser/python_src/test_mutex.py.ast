Module([Import([alias('unittest', None)], lineno=1, col_offset=0), Import([alias('test.test_support', None)], lineno=2, col_offset=0), Assign([Name('mutex', Store(), lineno=4, col_offset=0)], Call(Attribute(Attribute(Name('test', Load(), lineno=4, col_offset=8), 'test_support', Load(), lineno=4, col_offset=8), 'import_module', Load(), lineno=4, col_offset=8), [Str('mutex', lineno=4, col_offset=40)], [keyword('deprecated', Name('True', Load(), lineno=4, col_offset=60))], None, None, lineno=4, col_offset=8), lineno=4, col_offset=0), ClassDef('MutexTest', [Attribute(Name('unittest', Load(), lineno=6, col_offset=16), 'TestCase', Load(), lineno=6, col_offset=16)], [FunctionDef('test_lock_and_unlock', arguments([Name('self', Param(), lineno=8, col_offset=29)], None, None, []), [FunctionDef('called_by_mutex', arguments([Name('some_data', Param(), lineno=10, col_offset=28)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=11, col_offset=12), 'assertEqual', Load(), lineno=11, col_offset=12), [Name('some_data', Load(), lineno=11, col_offset=29), Str('spam', lineno=11, col_offset=40)], [], None, None, lineno=11, col_offset=12), lineno=11, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=12, col_offset=12), 'assertTrue', Load(), lineno=12, col_offset=12), [Call(Attribute(Name('m', Load(), lineno=12, col_offset=28), 'test', Load(), lineno=12, col_offset=28), [], [], None, None, lineno=12, col_offset=28), Str('mutex not held', lineno=12, col_offset=38)], [], None, None, lineno=12, col_offset=12), lineno=12, col_offset=12), Expr(Call(Attribute(Name('m', Load(), lineno=14, col_offset=12), 'lock', Load(), lineno=14, col_offset=12), [Name('called_by_mutex2', Load(), lineno=14, col_offset=19), Str('eggs', lineno=14, col_offset=37)], [], None, None, lineno=14, col_offset=12), lineno=14, col_offset=12)], [], lineno=10, col_offset=8), FunctionDef('called_by_mutex2', arguments([Name('some_data', Param(), lineno=16, col_offset=29)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=17, col_offset=12), 'assertEquals', Load(), lineno=17, col_offset=12), [Name('some_data', Load(), lineno=17, col_offset=30), Str('eggs', lineno=17, col_offset=41)], [], None, None, lineno=17, col_offset=12), lineno=17, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=18, col_offset=12), 'assertTrue', Load(), lineno=18, col_offset=12), [Call(Attribute(Name('m', Load(), lineno=18, col_offset=28), 'test', Load(), lineno=18, col_offset=28), [], [], None, None, lineno=18, col_offset=28), Str('mutex not held', lineno=18, col_offset=38)], [], None, None, lineno=18, col_offset=12), lineno=18, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=19, col_offset=12), 'assertTrue', Load(), lineno=19, col_offset=12), [Name('ready_for_2', Load(), lineno=19, col_offset=28), Str('called_by_mutex2 called too soon', lineno=20, col_offset=25)], [], None, None, lineno=19, col_offset=12), lineno=19, col_offset=12)], [], lineno=16, col_offset=8), Assign([Name('m', Store(), lineno=22, col_offset=8)], Call(Attribute(Name('mutex', Load(), lineno=22, col_offset=12), 'mutex', Load(), lineno=22, col_offset=12), [], [], None, None, lineno=22, col_offset=12), lineno=22, col_offset=8), Assign([Name('read_for_2', Store(), lineno=23, col_offset=8)], Name('False', Load(), lineno=23, col_offset=21), lineno=23, col_offset=8), Expr(Call(Attribute(Name('m', Load(), lineno=24, col_offset=8), 'lock', Load(), lineno=24, col_offset=8), [Name('called_by_mutex', Load(), lineno=24, col_offset=15), Str('spam', lineno=24, col_offset=32)], [], None, None, lineno=24, col_offset=8), lineno=24, col_offset=8), Assign([Name('ready_for_2', Store(), lineno=25, col_offset=8)], Name('True', Load(), lineno=25, col_offset=22), lineno=25, col_offset=8), Expr(Call(Attribute(Name('m', Load(), lineno=27, col_offset=8), 'unlock', Load(), lineno=27, col_offset=8), [], [], None, None, lineno=27, col_offset=8), lineno=27, col_offset=8), Expr(Call(Attribute(Name('m', Load(), lineno=28, col_offset=8), 'unlock', Load(), lineno=28, col_offset=8), [], [], None, None, lineno=28, col_offset=8), lineno=28, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=29, col_offset=8), 'assertFalse', Load(), lineno=29, col_offset=8), [Call(Attribute(Name('m', Load(), lineno=29, col_offset=25), 'test', Load(), lineno=29, col_offset=25), [], [], None, None, lineno=29, col_offset=25), Str('mutex still held', lineno=29, col_offset=35)], [], None, None, lineno=29, col_offset=8), lineno=29, col_offset=8)], [], lineno=8, col_offset=4)], [], lineno=6, col_offset=0), FunctionDef('test_main', arguments([], None, None, []), [Expr(Call(Attribute(Attribute(Name('test', Load(), lineno=32, col_offset=4), 'test_support', Load(), lineno=32, col_offset=4), 'run_unittest', Load(), lineno=32, col_offset=4), [Name('MutexTest', Load(), lineno=32, col_offset=35)], [], None, None, lineno=32, col_offset=4), lineno=32, col_offset=4)], [], lineno=31, col_offset=0), If(Compare(Name('__name__', Load(), lineno=34, col_offset=3), [Eq()], [Str('__main__', lineno=34, col_offset=15)], lineno=34, col_offset=3), [Expr(Call(Name('test_main', Load(), lineno=35, col_offset=4), [], [], None, None, lineno=35, col_offset=4), lineno=35, col_offset=4)], [], lineno=34, col_offset=0)])
