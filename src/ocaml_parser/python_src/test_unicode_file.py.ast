Module([Import([alias('os', None), alias('glob', None), alias('time', None), alias('shutil', None)], lineno=4, col_offset=0), Import([alias('unicodedata', None)], lineno=5, col_offset=0), Import([alias('unittest', None)], lineno=7, col_offset=0), ImportFrom('test.test_support', [alias('run_unittest', None), alias('TESTFN_UNICODE', None)], 0, lineno=8, col_offset=0), ImportFrom('test.test_support', [alias('TESTFN_ENCODING', None), alias('TESTFN_UNENCODABLE', None)], 0, lineno=9, col_offset=0), TryExcept([Assign([Name('TESTFN_ENCODED', Store(), lineno=11, col_offset=4)], Call(Attribute(Name('TESTFN_UNICODE', Load(), lineno=11, col_offset=21), 'encode', Load(), lineno=11, col_offset=21), [Name('TESTFN_ENCODING', Load(), lineno=11, col_offset=43)], [], None, None, lineno=11, col_offset=21), lineno=11, col_offset=4)], [ExceptHandler(Tuple([Name('UnicodeError', Load(), lineno=12, col_offset=8), Name('TypeError', Load(), lineno=12, col_offset=22)], Load(), lineno=12, col_offset=8), None, [Raise(Call(Attribute(Name('unittest', Load(), lineno=15, col_offset=10), 'SkipTest', Load(), lineno=15, col_offset=10), [Str('No Unicode filesystem semantics on this platform.', lineno=15, col_offset=28)], [], None, None, lineno=15, col_offset=10), None, None, lineno=15, col_offset=4)], lineno=12, col_offset=0)], [], lineno=10, col_offset=0), If(Compare(Call(Attribute(Name('TESTFN_ENCODED', Load(), lineno=17, col_offset=3), 'decode', Load(), lineno=17, col_offset=3), [Name('TESTFN_ENCODING', Load(), lineno=17, col_offset=25)], [], None, None, lineno=17, col_offset=3), [NotEq()], [Name('TESTFN_UNICODE', Load(), lineno=17, col_offset=45)], lineno=17, col_offset=3), [Import([alias('sys', None)], lineno=21, col_offset=4), TryExcept([Assign([Name('TESTFN_UNICODE', Store(), lineno=23, col_offset=8)], Call(Name('unicode', Load(), lineno=23, col_offset=25), [Str('@test-\xe0\xf2', lineno=23, col_offset=33), Call(Attribute(Name('sys', Load(), lineno=23, col_offset=51), 'getfilesystemencoding', Load(), lineno=23, col_offset=51), [], [], None, None, lineno=23, col_offset=51)], [], None, None, lineno=23, col_offset=25), lineno=23, col_offset=8), Assign([Name('TESTFN_ENCODED', Store(), lineno=24, col_offset=8)], Call(Attribute(Name('TESTFN_UNICODE', Load(), lineno=24, col_offset=25), 'encode', Load(), lineno=24, col_offset=25), [Name('TESTFN_ENCODING', Load(), lineno=24, col_offset=47)], [], None, None, lineno=24, col_offset=25), lineno=24, col_offset=8), If(Compare(Str('?', lineno=25, col_offset=11), [In()], [Name('TESTFN_ENCODED', Load(), lineno=25, col_offset=18)], lineno=25, col_offset=11), [Raise(Name('UnicodeError', Load(), lineno=27, col_offset=18), Str('mbcs encoding problem', lineno=27, col_offset=32), None, lineno=27, col_offset=12)], [], lineno=25, col_offset=8)], [ExceptHandler(Tuple([Name('UnicodeError', Load(), lineno=28, col_offset=12), Name('TypeError', Load(), lineno=28, col_offset=26)], Load(), lineno=28, col_offset=12), None, [Raise(Call(Attribute(Name('unittest', Load(), lineno=29, col_offset=14), 'SkipTest', Load(), lineno=29, col_offset=14), [Str('Cannot find a suiteable filename.', lineno=29, col_offset=32)], [], None, None, lineno=29, col_offset=14), None, None, lineno=29, col_offset=8)], lineno=28, col_offset=4)], [], lineno=22, col_offset=4)], [], lineno=17, col_offset=0), If(Compare(Call(Attribute(Name('TESTFN_ENCODED', Load(), lineno=31, col_offset=3), 'decode', Load(), lineno=31, col_offset=3), [Name('TESTFN_ENCODING', Load(), lineno=31, col_offset=25)], [], None, None, lineno=31, col_offset=3), [NotEq()], [Name('TESTFN_UNICODE', Load(), lineno=31, col_offset=45)], lineno=31, col_offset=3), [Raise(Call(Attribute(Name('unittest', Load(), lineno=32, col_offset=10), 'SkipTest', Load(), lineno=32, col_offset=10), [Str('Cannot find a suitable filename.', lineno=32, col_offset=28)], [], None, None, lineno=32, col_offset=10), None, None, lineno=32, col_offset=4)], [], lineno=31, col_offset=0), FunctionDef('remove_if_exists', arguments([Name('filename', Param(), lineno=34, col_offset=21)], None, None, []), [If(Call(Attribute(Attribute(Name('os', Load(), lineno=35, col_offset=7), 'path', Load(), lineno=35, col_offset=7), 'exists', Load(), lineno=35, col_offset=7), [Name('filename', Load(), lineno=35, col_offset=22)], [], None, None, lineno=35, col_offset=7), [Expr(Call(Attribute(Name('os', Load(), lineno=36, col_offset=8), 'unlink', Load(), lineno=36, col_offset=8), [Name('filename', Load(), lineno=36, col_offset=18)], [], None, None, lineno=36, col_offset=8), lineno=36, col_offset=8)], [], lineno=35, col_offset=4)], [], lineno=34, col_offset=0), ClassDef('TestUnicodeFiles', [Attribute(Name('unittest', Load(), lineno=38, col_offset=23), 'TestCase', Load(), lineno=38, col_offset=23)], [FunctionDef('_do_single', arguments([Name('self', Param(), lineno=44, col_offset=19), Name('filename', Param(), lineno=44, col_offset=25)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=45, col_offset=8), 'assertTrue', Load(), lineno=45, col_offset=8), [Call(Attribute(Attribute(Name('os', Load(), lineno=45, col_offset=24), 'path', Load(), lineno=45, col_offset=24), 'exists', Load(), lineno=45, col_offset=24), [Name('filename', Load(), lineno=45, col_offset=39)], [], None, None, lineno=45, col_offset=24)], [], None, None, lineno=45, col_offset=8), lineno=45, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=46, col_offset=8), 'assertTrue', Load(), lineno=46, col_offset=8), [Call(Attribute(Attribute(Name('os', Load(), lineno=46, col_offset=24), 'path', Load(), lineno=46, col_offset=24), 'isfile', Load(), lineno=46, col_offset=24), [Name('filename', Load(), lineno=46, col_offset=39)], [], None, None, lineno=46, col_offset=24)], [], None, None, lineno=46, col_offset=8), lineno=46, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=47, col_offset=8), 'assertTrue', Load(), lineno=47, col_offset=8), [Call(Attribute(Name('os', Load(), lineno=47, col_offset=24), 'access', Load(), lineno=47, col_offset=24), [Name('filename', Load(), lineno=47, col_offset=34), Attribute(Name('os', Load(), lineno=47, col_offset=44), 'R_OK', Load(), lineno=47, col_offset=44)], [], None, None, lineno=47, col_offset=24)], [], None, None, lineno=47, col_offset=8), lineno=47, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=48, col_offset=8), 'assertTrue', Load(), lineno=48, col_offset=8), [Call(Attribute(Attribute(Name('os', Load(), lineno=48, col_offset=24), 'path', Load(), lineno=48, col_offset=24), 'exists', Load(), lineno=48, col_offset=24), [Call(Attribute(Attribute(Name('os', Load(), lineno=48, col_offset=39), 'path', Load(), lineno=48, col_offset=39), 'abspath', Load(), lineno=48, col_offset=39), [Name('filename', Load(), lineno=48, col_offset=55)], [], None, None, lineno=48, col_offset=39)], [], None, None, lineno=48, col_offset=24)], [], None, None, lineno=48, col_offset=8), lineno=48, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=49, col_offset=8), 'assertTrue', Load(), lineno=49, col_offset=8), [Call(Attribute(Attribute(Name('os', Load(), lineno=49, col_offset=24), 'path', Load(), lineno=49, col_offset=24), 'isfile', Load(), lineno=49, col_offset=24), [Call(Attribute(Attribute(Name('os', Load(), lineno=49, col_offset=39), 'path', Load(), lineno=49, col_offset=39), 'abspath', Load(), lineno=49, col_offset=39), [Name('filename', Load(), lineno=49, col_offset=55)], [], None, None, lineno=49, col_offset=39)], [], None, None, lineno=49, col_offset=24)], [], None, None, lineno=49, col_offset=8), lineno=49, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=50, col_offset=8), 'assertTrue', Load(), lineno=50, col_offset=8), [Call(Attribute(Name('os', Load(), lineno=50, col_offset=24), 'access', Load(), lineno=50, col_offset=24), [Call(Attribute(Attribute(Name('os', Load(), lineno=50, col_offset=34), 'path', Load(), lineno=50, col_offset=34), 'abspath', Load(), lineno=50, col_offset=34), [Name('filename', Load(), lineno=50, col_offset=50)], [], None, None, lineno=50, col_offset=34), Attribute(Name('os', Load(), lineno=50, col_offset=61), 'R_OK', Load(), lineno=50, col_offset=61)], [], None, None, lineno=50, col_offset=24)], [], None, None, lineno=50, col_offset=8), lineno=50, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=51, col_offset=8), 'chmod', Load(), lineno=51, col_offset=8), [Name('filename', Load(), lineno=51, col_offset=17), Num(511, lineno=51, col_offset=27)], [], None, None, lineno=51, col_offset=8), lineno=51, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=52, col_offset=8), 'utime', Load(), lineno=52, col_offset=8), [Name('filename', Load(), lineno=52, col_offset=17), Name('None', Load(), lineno=52, col_offset=27)], [], None, None, lineno=52, col_offset=8), lineno=52, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=53, col_offset=8), 'utime', Load(), lineno=53, col_offset=8), [Name('filename', Load(), lineno=53, col_offset=17), Tuple([Call(Attribute(Name('time', Load(), lineno=53, col_offset=28), 'time', Load(), lineno=53, col_offset=28), [], [], None, None, lineno=53, col_offset=28), Call(Attribute(Name('time', Load(), lineno=53, col_offset=41), 'time', Load(), lineno=53, col_offset=41), [], [], None, None, lineno=53, col_offset=41)], Load(), lineno=53, col_offset=28)], [], None, None, lineno=53, col_offset=8), lineno=53, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=55, col_offset=8), '_do_copyish', Load(), lineno=55, col_offset=8), [Name('filename', Load(), lineno=55, col_offset=25), Name('filename', Load(), lineno=55, col_offset=35)], [], None, None, lineno=55, col_offset=8), lineno=55, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=57, col_offset=8), 'assertTrue', Load(), lineno=57, col_offset=8), [Compare(Call(Attribute(Attribute(Name('os', Load(), lineno=58, col_offset=12), 'path', Load(), lineno=58, col_offset=12), 'abspath', Load(), lineno=58, col_offset=12), [Name('filename', Load(), lineno=58, col_offset=28)], [], None, None, lineno=58, col_offset=12), [Eq()], [Call(Attribute(Attribute(Name('os', Load(), lineno=58, col_offset=39), 'path', Load(), lineno=58, col_offset=39), 'abspath', Load(), lineno=58, col_offset=39), [Subscript(Call(Attribute(Name('glob', Load(), lineno=58, col_offset=55), 'glob', Load(), lineno=58, col_offset=55), [Name('filename', Load(), lineno=58, col_offset=65)], [], None, None, lineno=58, col_offset=55), Index(Num(0, lineno=58, col_offset=75)), Load(), lineno=58, col_offset=55)], [], None, None, lineno=58, col_offset=39)], lineno=58, col_offset=12)], [], None, None, lineno=57, col_offset=8), lineno=57, col_offset=8), Assign([Tuple([Name('path', Store(), lineno=60, col_offset=8), Name('base', Store(), lineno=60, col_offset=14)], Store(), lineno=60, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=60, col_offset=21), 'path', Load(), lineno=60, col_offset=21), 'split', Load(), lineno=60, col_offset=21), [Call(Attribute(Attribute(Name('os', Load(), lineno=60, col_offset=35), 'path', Load(), lineno=60, col_offset=35), 'abspath', Load(), lineno=60, col_offset=35), [Name('filename', Load(), lineno=60, col_offset=51)], [], None, None, lineno=60, col_offset=35)], [], None, None, lineno=60, col_offset=21), lineno=60, col_offset=8), If(Call(Name('isinstance', Load(), lineno=61, col_offset=11), [Name('base', Load(), lineno=61, col_offset=22), Name('str', Load(), lineno=61, col_offset=28)], [], None, None, lineno=61, col_offset=11), [Assign([Name('base', Store(), lineno=62, col_offset=12)], Call(Attribute(Name('base', Load(), lineno=62, col_offset=19), 'decode', Load(), lineno=62, col_offset=19), [Name('TESTFN_ENCODING', Load(), lineno=62, col_offset=31)], [], None, None, lineno=62, col_offset=19), lineno=62, col_offset=12)], [], lineno=61, col_offset=8), Assign([Name('file_list', Store(), lineno=63, col_offset=8)], Call(Attribute(Name('os', Load(), lineno=63, col_offset=20), 'listdir', Load(), lineno=63, col_offset=20), [Name('path', Load(), lineno=63, col_offset=31)], [], None, None, lineno=63, col_offset=20), lineno=63, col_offset=8), If(BoolOp(And(), [Name('file_list', Load(), lineno=66, col_offset=11), Call(Name('isinstance', Load(), lineno=66, col_offset=25), [Subscript(Name('file_list', Load(), lineno=66, col_offset=36), Index(Num(0, lineno=66, col_offset=46)), Load(), lineno=66, col_offset=36), Name('str', Load(), lineno=66, col_offset=50)], [], None, None, lineno=66, col_offset=25)], lineno=66, col_offset=11), [Assign([Name('file_list', Store(), lineno=67, col_offset=12)], ListComp(Call(Attribute(Name('f', Load(), lineno=67, col_offset=25), 'decode', Load(), lineno=67, col_offset=25), [Name('TESTFN_ENCODING', Load(), lineno=67, col_offset=34)], [], None, None, lineno=67, col_offset=25), [comprehension(Name('f', Store(), lineno=67, col_offset=55), Name('file_list', Load(), lineno=67, col_offset=60), [])], lineno=67, col_offset=25), lineno=67, col_offset=12)], [], lineno=66, col_offset=8), Assign([Name('base', Store(), lineno=71, col_offset=8)], Call(Attribute(Name('unicodedata', Load(), lineno=71, col_offset=15), 'normalize', Load(), lineno=71, col_offset=15), [Str('NFD', lineno=71, col_offset=37), Name('base', Load(), lineno=71, col_offset=44)], [], None, None, lineno=71, col_offset=15), lineno=71, col_offset=8), Assign([Name('file_list', Store(), lineno=72, col_offset=8)], ListComp(Call(Attribute(Name('unicodedata', Load(), lineno=72, col_offset=21), 'normalize', Load(), lineno=72, col_offset=21), [Str('NFD', lineno=72, col_offset=43), Name('f', Load(), lineno=72, col_offset=50)], [], None, None, lineno=72, col_offset=21), [comprehension(Name('f', Store(), lineno=72, col_offset=57), Name('file_list', Load(), lineno=72, col_offset=62), [])], lineno=72, col_offset=21), lineno=72, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=74, col_offset=8), 'assertIn', Load(), lineno=74, col_offset=8), [Name('base', Load(), lineno=74, col_offset=22), Name('file_list', Load(), lineno=74, col_offset=28)], [], None, None, lineno=74, col_offset=8), lineno=74, col_offset=8)], [], lineno=44, col_offset=4), FunctionDef('_do_equivalent', arguments([Name('self', Param(), lineno=78, col_offset=23), Name('filename1', Param(), lineno=78, col_offset=29), Name('filename2', Param(), lineno=78, col_offset=40)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=82, col_offset=8), 'assertTrue', Load(), lineno=82, col_offset=8), [Compare(Call(Name('type', Load(), lineno=82, col_offset=24), [Name('filename1', Load(), lineno=82, col_offset=29)], [], None, None, lineno=82, col_offset=24), [NotEq()], [Call(Name('type', Load(), lineno=82, col_offset=41), [Name('filename2', Load(), lineno=82, col_offset=46)], [], None, None, lineno=82, col_offset=41)], lineno=82, col_offset=24), Str('No point checking equivalent filenames of the same type', lineno=83, col_offset=20)], [], None, None, lineno=82, col_offset=8), lineno=82, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=85, col_offset=8), 'assertEqual', Load(), lineno=85, col_offset=8), [Call(Attribute(Name('os', Load(), lineno=85, col_offset=25), 'stat', Load(), lineno=85, col_offset=25), [Name('filename1', Load(), lineno=85, col_offset=33)], [], None, None, lineno=85, col_offset=25), Call(Attribute(Name('os', Load(), lineno=86, col_offset=29), 'stat', Load(), lineno=86, col_offset=29), [Name('filename2', Load(), lineno=86, col_offset=37)], [], None, None, lineno=86, col_offset=29)], [], None, None, lineno=85, col_offset=8), lineno=85, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=87, col_offset=8), 'assertEqual', Load(), lineno=87, col_offset=8), [Call(Attribute(Name('os', Load(), lineno=87, col_offset=25), 'lstat', Load(), lineno=87, col_offset=25), [Name('filename1', Load(), lineno=87, col_offset=34)], [], None, None, lineno=87, col_offset=25), Call(Attribute(Name('os', Load(), lineno=88, col_offset=29), 'lstat', Load(), lineno=88, col_offset=29), [Name('filename2', Load(), lineno=88, col_offset=38)], [], None, None, lineno=88, col_offset=29)], [], None, None, lineno=87, col_offset=8), lineno=87, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=90, col_offset=8), '_do_copyish', Load(), lineno=90, col_offset=8), [Name('filename1', Load(), lineno=90, col_offset=25), Name('filename2', Load(), lineno=90, col_offset=36)], [], None, None, lineno=90, col_offset=8), lineno=90, col_offset=8)], [], lineno=78, col_offset=4), FunctionDef('_do_copyish', arguments([Name('self', Param(), lineno=93, col_offset=20), Name('filename1', Param(), lineno=93, col_offset=26), Name('filename2', Param(), lineno=93, col_offset=37)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=95, col_offset=8), 'assertTrue', Load(), lineno=95, col_offset=8), [Call(Attribute(Attribute(Name('os', Load(), lineno=95, col_offset=24), 'path', Load(), lineno=95, col_offset=24), 'isfile', Load(), lineno=95, col_offset=24), [Name('filename1', Load(), lineno=95, col_offset=39)], [], None, None, lineno=95, col_offset=24)], [], None, None, lineno=95, col_offset=8), lineno=95, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=96, col_offset=8), 'rename', Load(), lineno=96, col_offset=8), [Name('filename1', Load(), lineno=96, col_offset=18), BinOp(Name('filename2', Load(), lineno=96, col_offset=29), Add(), Str('.new', lineno=96, col_offset=41), lineno=96, col_offset=29)], [], None, None, lineno=96, col_offset=8), lineno=96, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=97, col_offset=8), 'assertTrue', Load(), lineno=97, col_offset=8), [Call(Attribute(Attribute(Name('os', Load(), lineno=97, col_offset=24), 'path', Load(), lineno=97, col_offset=24), 'isfile', Load(), lineno=97, col_offset=24), [BinOp(Name('filename1', Load(), lineno=97, col_offset=39), Add(), Str('.new', lineno=97, col_offset=49), lineno=97, col_offset=39)], [], None, None, lineno=97, col_offset=24)], [], None, None, lineno=97, col_offset=8), lineno=97, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=98, col_offset=8), 'rename', Load(), lineno=98, col_offset=8), [BinOp(Name('filename1', Load(), lineno=98, col_offset=18), Add(), Str('.new', lineno=98, col_offset=30), lineno=98, col_offset=18), Name('filename2', Load(), lineno=98, col_offset=38)], [], None, None, lineno=98, col_offset=8), lineno=98, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=99, col_offset=8), 'assertTrue', Load(), lineno=99, col_offset=8), [Call(Attribute(Attribute(Name('os', Load(), lineno=99, col_offset=24), 'path', Load(), lineno=99, col_offset=24), 'isfile', Load(), lineno=99, col_offset=24), [Name('filename2', Load(), lineno=99, col_offset=39)], [], None, None, lineno=99, col_offset=24)], [], None, None, lineno=99, col_offset=8), lineno=99, col_offset=8), Expr(Call(Attribute(Name('shutil', Load(), lineno=101, col_offset=8), 'copy', Load(), lineno=101, col_offset=8), [Name('filename1', Load(), lineno=101, col_offset=20), BinOp(Name('filename2', Load(), lineno=101, col_offset=31), Add(), Str('.new', lineno=101, col_offset=43), lineno=101, col_offset=31)], [], None, None, lineno=101, col_offset=8), lineno=101, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=102, col_offset=8), 'unlink', Load(), lineno=102, col_offset=8), [BinOp(Name('filename1', Load(), lineno=102, col_offset=18), Add(), Str('.new', lineno=102, col_offset=30), lineno=102, col_offset=18)], [], None, None, lineno=102, col_offset=8), lineno=102, col_offset=8), Expr(Call(Attribute(Name('shutil', Load(), lineno=104, col_offset=8), 'move', Load(), lineno=104, col_offset=8), [Name('filename1', Load(), lineno=104, col_offset=20), BinOp(Name('filename2', Load(), lineno=104, col_offset=31), Add(), Str('.new', lineno=104, col_offset=43), lineno=104, col_offset=31)], [], None, None, lineno=104, col_offset=8), lineno=104, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=105, col_offset=8), 'assertTrue', Load(), lineno=105, col_offset=8), [UnaryOp(Not(), Call(Attribute(Attribute(Name('os', Load(), lineno=105, col_offset=28), 'path', Load(), lineno=105, col_offset=28), 'exists', Load(), lineno=105, col_offset=28), [Name('filename2', Load(), lineno=105, col_offset=43)], [], None, None, lineno=105, col_offset=28), lineno=105, col_offset=24)], [], None, None, lineno=105, col_offset=8), lineno=105, col_offset=8), Expr(Call(Attribute(Name('shutil', Load(), lineno=106, col_offset=8), 'move', Load(), lineno=106, col_offset=8), [BinOp(Name('filename1', Load(), lineno=106, col_offset=20), Add(), Str('.new', lineno=106, col_offset=32), lineno=106, col_offset=20), Name('filename2', Load(), lineno=106, col_offset=40)], [], None, None, lineno=106, col_offset=8), lineno=106, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=107, col_offset=8), 'assertTrue', Load(), lineno=107, col_offset=8), [Call(Attribute(Attribute(Name('os', Load(), lineno=107, col_offset=24), 'path', Load(), lineno=107, col_offset=24), 'exists', Load(), lineno=107, col_offset=24), [Name('filename1', Load(), lineno=107, col_offset=39)], [], None, None, lineno=107, col_offset=24)], [], None, None, lineno=107, col_offset=8), lineno=107, col_offset=8), Expr(Call(Attribute(Name('shutil', Load(), lineno=113, col_offset=8), 'copy2', Load(), lineno=113, col_offset=8), [Name('filename1', Load(), lineno=113, col_offset=21), BinOp(Name('filename2', Load(), lineno=113, col_offset=32), Add(), Str('.new', lineno=113, col_offset=44), lineno=113, col_offset=32)], [], None, None, lineno=113, col_offset=8), lineno=113, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=114, col_offset=8), 'unlink', Load(), lineno=114, col_offset=8), [BinOp(Name('filename1', Load(), lineno=114, col_offset=18), Add(), Str('.new', lineno=114, col_offset=30), lineno=114, col_offset=18)], [], None, None, lineno=114, col_offset=8), lineno=114, col_offset=8)], [], lineno=93, col_offset=4), FunctionDef('_do_directory', arguments([Name('self', Param(), lineno=116, col_offset=22), Name('make_name', Param(), lineno=116, col_offset=28), Name('chdir_name', Param(), lineno=116, col_offset=39), Name('encoded', Param(), lineno=116, col_offset=51)], None, None, []), [Assign([Name('cwd', Store(), lineno=117, col_offset=8)], Call(Attribute(Name('os', Load(), lineno=117, col_offset=14), 'getcwd', Load(), lineno=117, col_offset=14), [], [], None, None, lineno=117, col_offset=14), lineno=117, col_offset=8), If(Call(Attribute(Attribute(Name('os', Load(), lineno=118, col_offset=11), 'path', Load(), lineno=118, col_offset=11), 'isdir', Load(), lineno=118, col_offset=11), [Name('make_name', Load(), lineno=118, col_offset=25)], [], None, None, lineno=118, col_offset=11), [Expr(Call(Attribute(Name('os', Load(), lineno=119, col_offset=12), 'rmdir', Load(), lineno=119, col_offset=12), [Name('make_name', Load(), lineno=119, col_offset=21)], [], None, None, lineno=119, col_offset=12), lineno=119, col_offset=12)], [], lineno=118, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=120, col_offset=8), 'mkdir', Load(), lineno=120, col_offset=8), [Name('make_name', Load(), lineno=120, col_offset=17)], [], None, None, lineno=120, col_offset=8), lineno=120, col_offset=8), TryFinally([Expr(Call(Attribute(Name('os', Load(), lineno=122, col_offset=12), 'chdir', Load(), lineno=122, col_offset=12), [Name('chdir_name', Load(), lineno=122, col_offset=21)], [], None, None, lineno=122, col_offset=12), lineno=122, col_offset=12), TryFinally([If(UnaryOp(Not(), Name('encoded', Load(), lineno=124, col_offset=23), lineno=124, col_offset=19), [Assign([Name('cwd_result', Store(), lineno=125, col_offset=20)], Call(Attribute(Name('os', Load(), lineno=125, col_offset=33), 'getcwdu', Load(), lineno=125, col_offset=33), [], [], None, None, lineno=125, col_offset=33), lineno=125, col_offset=20), Assign([Name('name_result', Store(), lineno=126, col_offset=20)], Name('make_name', Load(), lineno=126, col_offset=34), lineno=126, col_offset=20)], [Assign([Name('cwd_result', Store(), lineno=128, col_offset=20)], Call(Attribute(Call(Attribute(Name('os', Load(), lineno=128, col_offset=33), 'getcwd', Load(), lineno=128, col_offset=33), [], [], None, None, lineno=128, col_offset=33), 'decode', Load(), lineno=128, col_offset=33), [Name('TESTFN_ENCODING', Load(), lineno=128, col_offset=52)], [], None, None, lineno=128, col_offset=33), lineno=128, col_offset=20), Assign([Name('name_result', Store(), lineno=129, col_offset=20)], Call(Attribute(Name('make_name', Load(), lineno=129, col_offset=34), 'decode', Load(), lineno=129, col_offset=34), [Name('TESTFN_ENCODING', Load(), lineno=129, col_offset=51)], [], None, None, lineno=129, col_offset=34), lineno=129, col_offset=20)], lineno=124, col_offset=16), Assign([Name('cwd_result', Store(), lineno=131, col_offset=16)], Call(Attribute(Name('unicodedata', Load(), lineno=131, col_offset=29), 'normalize', Load(), lineno=131, col_offset=29), [Str('NFD', lineno=131, col_offset=51), Name('cwd_result', Load(), lineno=131, col_offset=58)], [], None, None, lineno=131, col_offset=29), lineno=131, col_offset=16), Assign([Name('name_result', Store(), lineno=132, col_offset=16)], Call(Attribute(Name('unicodedata', Load(), lineno=132, col_offset=30), 'normalize', Load(), lineno=132, col_offset=30), [Str('NFD', lineno=132, col_offset=52), Name('name_result', Load(), lineno=132, col_offset=59)], [], None, None, lineno=132, col_offset=30), lineno=132, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=134, col_offset=16), 'assertEqual', Load(), lineno=134, col_offset=16), [Call(Attribute(Attribute(Name('os', Load(), lineno=134, col_offset=33), 'path', Load(), lineno=134, col_offset=33), 'basename', Load(), lineno=134, col_offset=33), [Name('cwd_result', Load(), lineno=134, col_offset=50)], [], None, None, lineno=134, col_offset=33), Name('name_result', Load(), lineno=134, col_offset=62)], [], None, None, lineno=134, col_offset=16), lineno=134, col_offset=16)], [Expr(Call(Attribute(Name('os', Load(), lineno=136, col_offset=16), 'chdir', Load(), lineno=136, col_offset=16), [Name('cwd', Load(), lineno=136, col_offset=25)], [], None, None, lineno=136, col_offset=16), lineno=136, col_offset=16)], lineno=123, col_offset=12)], [Expr(Call(Attribute(Name('os', Load(), lineno=138, col_offset=12), 'rmdir', Load(), lineno=138, col_offset=12), [Name('make_name', Load(), lineno=138, col_offset=21)], [], None, None, lineno=138, col_offset=12), lineno=138, col_offset=12)], lineno=121, col_offset=8)], [], lineno=116, col_offset=4), FunctionDef('_test_single', arguments([Name('self', Param(), lineno=142, col_offset=21), Name('filename', Param(), lineno=142, col_offset=27)], None, None, []), [Expr(Call(Name('remove_if_exists', Load(), lineno=143, col_offset=8), [Name('filename', Load(), lineno=143, col_offset=25)], [], None, None, lineno=143, col_offset=8), lineno=143, col_offset=8), Assign([Name('f', Store(), lineno=144, col_offset=8)], Call(Name('file', Load(), lineno=144, col_offset=12), [Name('filename', Load(), lineno=144, col_offset=17), Str('w', lineno=144, col_offset=27)], [], None, None, lineno=144, col_offset=12), lineno=144, col_offset=8), Expr(Call(Attribute(Name('f', Load(), lineno=145, col_offset=8), 'close', Load(), lineno=145, col_offset=8), [], [], None, None, lineno=145, col_offset=8), lineno=145, col_offset=8), TryFinally([Expr(Call(Attribute(Name('self', Load(), lineno=147, col_offset=12), '_do_single', Load(), lineno=147, col_offset=12), [Name('filename', Load(), lineno=147, col_offset=28)], [], None, None, lineno=147, col_offset=12), lineno=147, col_offset=12)], [Expr(Call(Attribute(Name('os', Load(), lineno=149, col_offset=12), 'unlink', Load(), lineno=149, col_offset=12), [Name('filename', Load(), lineno=149, col_offset=22)], [], None, None, lineno=149, col_offset=12), lineno=149, col_offset=12)], lineno=146, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=150, col_offset=8), 'assertTrue', Load(), lineno=150, col_offset=8), [UnaryOp(Not(), Call(Attribute(Attribute(Name('os', Load(), lineno=150, col_offset=28), 'path', Load(), lineno=150, col_offset=28), 'exists', Load(), lineno=150, col_offset=28), [Name('filename', Load(), lineno=150, col_offset=43)], [], None, None, lineno=150, col_offset=28), lineno=150, col_offset=24)], [], None, None, lineno=150, col_offset=8), lineno=150, col_offset=8), Assign([Name('f', Store(), lineno=152, col_offset=8)], Call(Attribute(Name('os', Load(), lineno=152, col_offset=12), 'open', Load(), lineno=152, col_offset=12), [Name('filename', Load(), lineno=152, col_offset=20), Attribute(Name('os', Load(), lineno=152, col_offset=30), 'O_CREAT', Load(), lineno=152, col_offset=30)], [], None, None, lineno=152, col_offset=12), lineno=152, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=153, col_offset=8), 'close', Load(), lineno=153, col_offset=8), [Name('f', Load(), lineno=153, col_offset=17)], [], None, None, lineno=153, col_offset=8), lineno=153, col_offset=8), TryFinally([Expr(Call(Attribute(Name('self', Load(), lineno=155, col_offset=12), '_do_single', Load(), lineno=155, col_offset=12), [Name('filename', Load(), lineno=155, col_offset=28)], [], None, None, lineno=155, col_offset=12), lineno=155, col_offset=12)], [Expr(Call(Attribute(Name('os', Load(), lineno=157, col_offset=12), 'unlink', Load(), lineno=157, col_offset=12), [Name('filename', Load(), lineno=157, col_offset=22)], [], None, None, lineno=157, col_offset=12), lineno=157, col_offset=12)], lineno=154, col_offset=8)], [], lineno=142, col_offset=4), FunctionDef('_test_equivalent', arguments([Name('self', Param(), lineno=159, col_offset=25), Name('filename1', Param(), lineno=159, col_offset=31), Name('filename2', Param(), lineno=159, col_offset=42)], None, None, []), [Expr(Call(Name('remove_if_exists', Load(), lineno=160, col_offset=8), [Name('filename1', Load(), lineno=160, col_offset=25)], [], None, None, lineno=160, col_offset=8), lineno=160, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=161, col_offset=8), 'assertTrue', Load(), lineno=161, col_offset=8), [UnaryOp(Not(), Call(Attribute(Attribute(Name('os', Load(), lineno=161, col_offset=28), 'path', Load(), lineno=161, col_offset=28), 'exists', Load(), lineno=161, col_offset=28), [Name('filename2', Load(), lineno=161, col_offset=43)], [], None, None, lineno=161, col_offset=28), lineno=161, col_offset=24)], [], None, None, lineno=161, col_offset=8), lineno=161, col_offset=8), Assign([Name('f', Store(), lineno=162, col_offset=8)], Call(Name('file', Load(), lineno=162, col_offset=12), [Name('filename1', Load(), lineno=162, col_offset=17), Str('w', lineno=162, col_offset=28)], [], None, None, lineno=162, col_offset=12), lineno=162, col_offset=8), Expr(Call(Attribute(Name('f', Load(), lineno=163, col_offset=8), 'close', Load(), lineno=163, col_offset=8), [], [], None, None, lineno=163, col_offset=8), lineno=163, col_offset=8), TryFinally([Expr(Call(Attribute(Name('self', Load(), lineno=165, col_offset=12), '_do_equivalent', Load(), lineno=165, col_offset=12), [Name('filename1', Load(), lineno=165, col_offset=32), Name('filename2', Load(), lineno=165, col_offset=43)], [], None, None, lineno=165, col_offset=12), lineno=165, col_offset=12)], [Expr(Call(Attribute(Name('os', Load(), lineno=167, col_offset=12), 'unlink', Load(), lineno=167, col_offset=12), [Name('filename1', Load(), lineno=167, col_offset=22)], [], None, None, lineno=167, col_offset=12), lineno=167, col_offset=12)], lineno=164, col_offset=8)], [], lineno=159, col_offset=4), FunctionDef('test_single_files', arguments([Name('self', Param(), lineno=171, col_offset=26)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=172, col_offset=8), '_test_single', Load(), lineno=172, col_offset=8), [Name('TESTFN_ENCODED', Load(), lineno=172, col_offset=26)], [], None, None, lineno=172, col_offset=8), lineno=172, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=173, col_offset=8), '_test_single', Load(), lineno=173, col_offset=8), [Name('TESTFN_UNICODE', Load(), lineno=173, col_offset=26)], [], None, None, lineno=173, col_offset=8), lineno=173, col_offset=8), If(Compare(Name('TESTFN_UNENCODABLE', Load(), lineno=174, col_offset=11), [IsNot()], [Name('None', Load(), lineno=174, col_offset=37)], lineno=174, col_offset=11), [Expr(Call(Attribute(Name('self', Load(), lineno=175, col_offset=12), '_test_single', Load(), lineno=175, col_offset=12), [Name('TESTFN_UNENCODABLE', Load(), lineno=175, col_offset=30)], [], None, None, lineno=175, col_offset=12), lineno=175, col_offset=12)], [], lineno=174, col_offset=8)], [], lineno=171, col_offset=4), FunctionDef('test_equivalent_files', arguments([Name('self', Param(), lineno=177, col_offset=30)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=178, col_offset=8), '_test_equivalent', Load(), lineno=178, col_offset=8), [Name('TESTFN_ENCODED', Load(), lineno=178, col_offset=30), Name('TESTFN_UNICODE', Load(), lineno=178, col_offset=46)], [], None, None, lineno=178, col_offset=8), lineno=178, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=179, col_offset=8), '_test_equivalent', Load(), lineno=179, col_offset=8), [Name('TESTFN_UNICODE', Load(), lineno=179, col_offset=30), Name('TESTFN_ENCODED', Load(), lineno=179, col_offset=46)], [], None, None, lineno=179, col_offset=8), lineno=179, col_offset=8)], [], lineno=177, col_offset=4), FunctionDef('test_directories', arguments([Name('self', Param(), lineno=181, col_offset=25)], None, None, []), [Assign([Name('ext', Store(), lineno=185, col_offset=8)], Str('.dir', lineno=185, col_offset=14), lineno=185, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=186, col_offset=8), '_do_directory', Load(), lineno=186, col_offset=8), [BinOp(Name('TESTFN_ENCODED', Load(), lineno=186, col_offset=27), Add(), Name('ext', Load(), lineno=186, col_offset=42), lineno=186, col_offset=27), BinOp(Name('TESTFN_ENCODED', Load(), lineno=186, col_offset=47), Add(), Name('ext', Load(), lineno=186, col_offset=62), lineno=186, col_offset=47), Name('True', Load(), lineno=186, col_offset=67)], [], None, None, lineno=186, col_offset=8), lineno=186, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=187, col_offset=8), '_do_directory', Load(), lineno=187, col_offset=8), [BinOp(Name('TESTFN_ENCODED', Load(), lineno=187, col_offset=27), Add(), Name('ext', Load(), lineno=187, col_offset=42), lineno=187, col_offset=27), BinOp(Name('TESTFN_UNICODE', Load(), lineno=187, col_offset=47), Add(), Name('ext', Load(), lineno=187, col_offset=62), lineno=187, col_offset=47), Name('True', Load(), lineno=187, col_offset=67)], [], None, None, lineno=187, col_offset=8), lineno=187, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=188, col_offset=8), '_do_directory', Load(), lineno=188, col_offset=8), [BinOp(Name('TESTFN_UNICODE', Load(), lineno=188, col_offset=27), Add(), Name('ext', Load(), lineno=188, col_offset=42), lineno=188, col_offset=27), BinOp(Name('TESTFN_ENCODED', Load(), lineno=188, col_offset=47), Add(), Name('ext', Load(), lineno=188, col_offset=62), lineno=188, col_offset=47), Name('False', Load(), lineno=188, col_offset=67)], [], None, None, lineno=188, col_offset=8), lineno=188, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=189, col_offset=8), '_do_directory', Load(), lineno=189, col_offset=8), [BinOp(Name('TESTFN_UNICODE', Load(), lineno=189, col_offset=27), Add(), Name('ext', Load(), lineno=189, col_offset=42), lineno=189, col_offset=27), BinOp(Name('TESTFN_UNICODE', Load(), lineno=189, col_offset=47), Add(), Name('ext', Load(), lineno=189, col_offset=62), lineno=189, col_offset=47), Name('False', Load(), lineno=189, col_offset=67)], [], None, None, lineno=189, col_offset=8), lineno=189, col_offset=8), If(Compare(Name('TESTFN_UNENCODABLE', Load(), lineno=191, col_offset=11), [IsNot()], [Name('None', Load(), lineno=191, col_offset=37)], lineno=191, col_offset=11), [Expr(Call(Attribute(Name('self', Load(), lineno=192, col_offset=12), '_do_directory', Load(), lineno=192, col_offset=12), [BinOp(Name('TESTFN_UNENCODABLE', Load(), lineno=192, col_offset=31), Add(), Name('ext', Load(), lineno=192, col_offset=50), lineno=192, col_offset=31), BinOp(Name('TESTFN_UNENCODABLE', Load(), lineno=193, col_offset=31), Add(), Name('ext', Load(), lineno=193, col_offset=50), lineno=193, col_offset=31), Name('False', Load(), lineno=194, col_offset=31)], [], None, None, lineno=192, col_offset=12), lineno=192, col_offset=12)], [], lineno=191, col_offset=8)], [], lineno=181, col_offset=4)], [], lineno=38, col_offset=0), FunctionDef('test_main', arguments([], None, None, []), [Expr(Call(Name('run_unittest', Load(), lineno=197, col_offset=4), [Name('__name__', Load(), lineno=197, col_offset=17)], [], None, None, lineno=197, col_offset=4), lineno=197, col_offset=4)], [], lineno=196, col_offset=0), If(Compare(Name('__name__', Load(), lineno=199, col_offset=3), [Eq()], [Str('__main__', lineno=199, col_offset=15)], lineno=199, col_offset=3), [Expr(Call(Name('test_main', Load(), lineno=200, col_offset=4), [], [], None, None, lineno=200, col_offset=4), lineno=200, col_offset=4)], [], lineno=199, col_offset=0)])
