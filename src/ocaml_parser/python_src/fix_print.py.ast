Module([Expr(Str('Fixer for print.\n\nChange:\n    \'print\'          into \'print()\'\n    \'print ...\'      into \'print(...)\'\n    \'print ... ,\'    into \'print(..., end=" ")\'\n    \'print >>x, ...\' into \'print(..., file=x)\'\n\nNo changes are applied if print_function is imported from __future__\n\n', lineno=14, col_offset=-1), lineno=14, col_offset=-1), ImportFrom(None, [alias('patcomp', None)], 2, lineno=17, col_offset=0), ImportFrom(None, [alias('pytree', None)], 2, lineno=18, col_offset=0), ImportFrom('pgen2', [alias('token', None)], 2, lineno=19, col_offset=0), ImportFrom(None, [alias('fixer_base', None)], 2, lineno=20, col_offset=0), ImportFrom('fixer_util', [alias('Name', None), alias('Call', None), alias('Comma', None), alias('String', None), alias('is_tuple', None)], 2, lineno=21, col_offset=0), Assign([Name('parend_expr', Store(), lineno=24, col_offset=0)], Call(Attribute(Name('patcomp', Load(), lineno=24, col_offset=14), 'compile_pattern', Load(), lineno=24, col_offset=14), [Str("atom< '(' [atom|STRING|NAME] ')' >", lineno=25, col_offset=14)], [], None, None, lineno=24, col_offset=14), lineno=24, col_offset=0), ClassDef('FixPrint', [Attribute(Name('fixer_base', Load(), lineno=29, col_offset=15), 'BaseFix', Load(), lineno=29, col_offset=15)], [Assign([Name('BM_compatible', Store(), lineno=31, col_offset=4)], Name('True', Load(), lineno=31, col_offset=20), lineno=31, col_offset=4), Assign([Name('PATTERN', Store(), lineno=33, col_offset=4)], Str("\n              simple_stmt< any* bare='print' any* > | print_stmt\n              ", lineno=35, col_offset=-1), lineno=33, col_offset=4), FunctionDef('transform', arguments([Name('self', Param(), lineno=37, col_offset=18), Name('node', Param(), lineno=37, col_offset=24), Name('results', Param(), lineno=37, col_offset=30)], None, None, []), [Assert(Name('results', Load(), lineno=38, col_offset=15), None, lineno=38, col_offset=8), Assign([Name('bare_print', Store(), lineno=40, col_offset=8)], Call(Attribute(Name('results', Load(), lineno=40, col_offset=21), 'get', Load(), lineno=40, col_offset=21), [Str('bare', lineno=40, col_offset=33)], [], None, None, lineno=40, col_offset=21), lineno=40, col_offset=8), If(Name('bare_print', Load(), lineno=42, col_offset=11), [Expr(Call(Attribute(Name('bare_print', Load(), lineno=44, col_offset=12), 'replace', Load(), lineno=44, col_offset=12), [Call(Name('Call', Load(), lineno=44, col_offset=31), [Call(Name('Name', Load(), lineno=44, col_offset=36), [Str(u'print', lineno=44, col_offset=41)], [], None, None, lineno=44, col_offset=36), List([], Load(), lineno=44, col_offset=52)], [keyword('prefix', Attribute(Name('bare_print', Load(), lineno=45, col_offset=38), 'prefix', Load(), lineno=45, col_offset=38))], None, None, lineno=44, col_offset=31)], [], None, None, lineno=44, col_offset=12), lineno=44, col_offset=12), Return(None, lineno=46, col_offset=12)], [], lineno=42, col_offset=8), Assert(Compare(Subscript(Attribute(Name('node', Load(), lineno=47, col_offset=15), 'children', Load(), lineno=47, col_offset=15), Index(Num(0, lineno=47, col_offset=29)), Load(), lineno=47, col_offset=15), [Eq()], [Call(Name('Name', Load(), lineno=47, col_offset=35), [Str(u'print', lineno=47, col_offset=40)], [], None, None, lineno=47, col_offset=35)], lineno=47, col_offset=15), None, lineno=47, col_offset=8), Assign([Name('args', Store(), lineno=48, col_offset=8)], Subscript(Attribute(Name('node', Load(), lineno=48, col_offset=15), 'children', Load(), lineno=48, col_offset=15), Slice(Num(1, lineno=48, col_offset=29), None, None), Load(), lineno=48, col_offset=15), lineno=48, col_offset=8), If(BoolOp(And(), [Compare(Call(Name('len', Load(), lineno=49, col_offset=11), [Name('args', Load(), lineno=49, col_offset=15)], [], None, None, lineno=49, col_offset=11), [Eq()], [Num(1, lineno=49, col_offset=24)], lineno=49, col_offset=11), Call(Attribute(Name('parend_expr', Load(), lineno=49, col_offset=30), 'match', Load(), lineno=49, col_offset=30), [Subscript(Name('args', Load(), lineno=49, col_offset=48), Index(Num(0, lineno=49, col_offset=53)), Load(), lineno=49, col_offset=48)], [], None, None, lineno=49, col_offset=30)], lineno=49, col_offset=11), [Return(None, lineno=52, col_offset=12)], [], lineno=49, col_offset=8), Assign([Name('sep', Store(), lineno=54, col_offset=8), Name('end', Store(), lineno=54, col_offset=14), Name('file', Store(), lineno=54, col_offset=20)], Name('None', Load(), lineno=54, col_offset=27), lineno=54, col_offset=8), If(BoolOp(And(), [Name('args', Load(), lineno=55, col_offset=11), Compare(Subscript(Name('args', Load(), lineno=55, col_offset=20), Index(Num(-1, lineno=55, col_offset=26)), Load(), lineno=55, col_offset=20), [Eq()], [Call(Name('Comma', Load(), lineno=55, col_offset=32), [], [], None, None, lineno=55, col_offset=32)], lineno=55, col_offset=20)], lineno=55, col_offset=11), [Assign([Name('args', Store(), lineno=56, col_offset=12)], Subscript(Name('args', Load(), lineno=56, col_offset=19), Slice(None, Num(-1, lineno=56, col_offset=26), None), Load(), lineno=56, col_offset=19), lineno=56, col_offset=12), Assign([Name('end', Store(), lineno=57, col_offset=12)], Str(' ', lineno=57, col_offset=18), lineno=57, col_offset=12)], [], lineno=55, col_offset=8), If(BoolOp(And(), [Name('args', Load(), lineno=58, col_offset=11), Compare(Subscript(Name('args', Load(), lineno=58, col_offset=20), Index(Num(0, lineno=58, col_offset=25)), Load(), lineno=58, col_offset=20), [Eq()], [Call(Attribute(Name('pytree', Load(), lineno=58, col_offset=31), 'Leaf', Load(), lineno=58, col_offset=31), [Attribute(Name('token', Load(), lineno=58, col_offset=43), 'RIGHTSHIFT', Load(), lineno=58, col_offset=43), Str(u'>>', lineno=58, col_offset=61)], [], None, None, lineno=58, col_offset=31)], lineno=58, col_offset=20)], lineno=58, col_offset=11), [Assert(Compare(Call(Name('len', Load(), lineno=59, col_offset=19), [Name('args', Load(), lineno=59, col_offset=23)], [], None, None, lineno=59, col_offset=19), [GtE()], [Num(2, lineno=59, col_offset=32)], lineno=59, col_offset=19), None, lineno=59, col_offset=12), Assign([Name('file', Store(), lineno=60, col_offset=12)], Call(Attribute(Subscript(Name('args', Load(), lineno=60, col_offset=19), Index(Num(1, lineno=60, col_offset=24)), Load(), lineno=60, col_offset=19), 'clone', Load(), lineno=60, col_offset=19), [], [], None, None, lineno=60, col_offset=19), lineno=60, col_offset=12), Assign([Name('args', Store(), lineno=61, col_offset=12)], Subscript(Name('args', Load(), lineno=61, col_offset=19), Slice(Num(3, lineno=61, col_offset=24), None, None), Load(), lineno=61, col_offset=19), lineno=61, col_offset=12)], [], lineno=58, col_offset=8), Assign([Name('l_args', Store(), lineno=63, col_offset=8)], ListComp(Call(Attribute(Name('arg', Load(), lineno=63, col_offset=18), 'clone', Load(), lineno=63, col_offset=18), [], [], None, None, lineno=63, col_offset=18), [comprehension(Name('arg', Store(), lineno=63, col_offset=34), Name('args', Load(), lineno=63, col_offset=41), [])], lineno=63, col_offset=18), lineno=63, col_offset=8), If(Name('l_args', Load(), lineno=64, col_offset=11), [Assign([Attribute(Subscript(Name('l_args', Load(), lineno=65, col_offset=12), Index(Num(0, lineno=65, col_offset=19)), Load(), lineno=65, col_offset=12), 'prefix', Store(), lineno=65, col_offset=12)], Str(u'', lineno=65, col_offset=31), lineno=65, col_offset=12)], [], lineno=64, col_offset=8), If(BoolOp(Or(), [Compare(Name('sep', Load(), lineno=66, col_offset=11), [IsNot()], [Name('None', Load(), lineno=66, col_offset=22)], lineno=66, col_offset=11), Compare(Name('end', Load(), lineno=66, col_offset=30), [IsNot()], [Name('None', Load(), lineno=66, col_offset=41)], lineno=66, col_offset=30), Compare(Name('file', Load(), lineno=66, col_offset=49), [IsNot()], [Name('None', Load(), lineno=66, col_offset=61)], lineno=66, col_offset=49)], lineno=66, col_offset=11), [If(Compare(Name('sep', Load(), lineno=67, col_offset=15), [IsNot()], [Name('None', Load(), lineno=67, col_offset=26)], lineno=67, col_offset=15), [Expr(Call(Attribute(Name('self', Load(), lineno=68, col_offset=16), 'add_kwarg', Load(), lineno=68, col_offset=16), [Name('l_args', Load(), lineno=68, col_offset=31), Str(u'sep', lineno=68, col_offset=39), Call(Name('String', Load(), lineno=68, col_offset=47), [Call(Name('repr', Load(), lineno=68, col_offset=54), [Name('sep', Load(), lineno=68, col_offset=59)], [], None, None, lineno=68, col_offset=54)], [], None, None, lineno=68, col_offset=47)], [], None, None, lineno=68, col_offset=16), lineno=68, col_offset=16)], [], lineno=67, col_offset=12), If(Compare(Name('end', Load(), lineno=69, col_offset=15), [IsNot()], [Name('None', Load(), lineno=69, col_offset=26)], lineno=69, col_offset=15), [Expr(Call(Attribute(Name('self', Load(), lineno=70, col_offset=16), 'add_kwarg', Load(), lineno=70, col_offset=16), [Name('l_args', Load(), lineno=70, col_offset=31), Str(u'end', lineno=70, col_offset=39), Call(Name('String', Load(), lineno=70, col_offset=47), [Call(Name('repr', Load(), lineno=70, col_offset=54), [Name('end', Load(), lineno=70, col_offset=59)], [], None, None, lineno=70, col_offset=54)], [], None, None, lineno=70, col_offset=47)], [], None, None, lineno=70, col_offset=16), lineno=70, col_offset=16)], [], lineno=69, col_offset=12), If(Compare(Name('file', Load(), lineno=71, col_offset=15), [IsNot()], [Name('None', Load(), lineno=71, col_offset=27)], lineno=71, col_offset=15), [Expr(Call(Attribute(Name('self', Load(), lineno=72, col_offset=16), 'add_kwarg', Load(), lineno=72, col_offset=16), [Name('l_args', Load(), lineno=72, col_offset=31), Str(u'file', lineno=72, col_offset=39), Name('file', Load(), lineno=72, col_offset=48)], [], None, None, lineno=72, col_offset=16), lineno=72, col_offset=16)], [], lineno=71, col_offset=12)], [], lineno=66, col_offset=8), Assign([Name('n_stmt', Store(), lineno=73, col_offset=8)], Call(Name('Call', Load(), lineno=73, col_offset=17), [Call(Name('Name', Load(), lineno=73, col_offset=22), [Str(u'print', lineno=73, col_offset=27)], [], None, None, lineno=73, col_offset=22), Name('l_args', Load(), lineno=73, col_offset=38)], [], None, None, lineno=73, col_offset=17), lineno=73, col_offset=8), Assign([Attribute(Name('n_stmt', Load(), lineno=74, col_offset=8), 'prefix', Store(), lineno=74, col_offset=8)], Attribute(Name('node', Load(), lineno=74, col_offset=24), 'prefix', Load(), lineno=74, col_offset=24), lineno=74, col_offset=8), Return(Name('n_stmt', Load(), lineno=75, col_offset=15), lineno=75, col_offset=8)], [], lineno=37, col_offset=4), FunctionDef('add_kwarg', arguments([Name('self', Param(), lineno=77, col_offset=18), Name('l_nodes', Param(), lineno=77, col_offset=24), Name('s_kwd', Param(), lineno=77, col_offset=33), Name('n_expr', Param(), lineno=77, col_offset=40)], None, None, []), [Assign([Attribute(Name('n_expr', Load(), lineno=79, col_offset=8), 'prefix', Store(), lineno=79, col_offset=8)], Str(u'', lineno=79, col_offset=24), lineno=79, col_offset=8), Assign([Name('n_argument', Store(), lineno=80, col_offset=8)], Call(Attribute(Name('pytree', Load(), lineno=80, col_offset=21), 'Node', Load(), lineno=80, col_offset=21), [Attribute(Attribute(Name('self', Load(), lineno=80, col_offset=33), 'syms', Load(), lineno=80, col_offset=33), 'argument', Load(), lineno=80, col_offset=33), Tuple([Call(Name('Name', Load(), lineno=81, col_offset=34), [Name('s_kwd', Load(), lineno=81, col_offset=39)], [], None, None, lineno=81, col_offset=34), Call(Attribute(Name('pytree', Load(), lineno=82, col_offset=34), 'Leaf', Load(), lineno=82, col_offset=34), [Attribute(Name('token', Load(), lineno=82, col_offset=46), 'EQUAL', Load(), lineno=82, col_offset=46), Str(u'=', lineno=82, col_offset=59)], [], None, None, lineno=82, col_offset=34), Name('n_expr', Load(), lineno=83, col_offset=34)], Load(), lineno=81, col_offset=34)], [], None, None, lineno=80, col_offset=21), lineno=80, col_offset=8), If(Name('l_nodes', Load(), lineno=84, col_offset=11), [Expr(Call(Attribute(Name('l_nodes', Load(), lineno=85, col_offset=12), 'append', Load(), lineno=85, col_offset=12), [Call(Name('Comma', Load(), lineno=85, col_offset=27), [], [], None, None, lineno=85, col_offset=27)], [], None, None, lineno=85, col_offset=12), lineno=85, col_offset=12), Assign([Attribute(Name('n_argument', Load(), lineno=86, col_offset=12), 'prefix', Store(), lineno=86, col_offset=12)], Str(u' ', lineno=86, col_offset=32), lineno=86, col_offset=12)], [], lineno=84, col_offset=8), Expr(Call(Attribute(Name('l_nodes', Load(), lineno=87, col_offset=8), 'append', Load(), lineno=87, col_offset=8), [Name('n_argument', Load(), lineno=87, col_offset=23)], [], None, None, lineno=87, col_offset=8), lineno=87, col_offset=8)], [], lineno=77, col_offset=4)], [], lineno=29, col_offset=0)])
