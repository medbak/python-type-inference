Module([Import([alias('sys', None), alias('nntplib', None), alias('marshal', None), alias('time', None), alias('os', None)], lineno=35, col_offset=0), Assign([Name('topdir', Store(), lineno=42, col_offset=0)], Call(Attribute(Attribute(Name('os', Load(), lineno=42, col_offset=9), 'path', Load(), lineno=42, col_offset=9), 'expanduser', Load(), lineno=42, col_offset=9), [Str('~/newspage', lineno=42, col_offset=28)], [], None, None, lineno=42, col_offset=9), lineno=42, col_offset=0), Assign([Name('newshost', Store(), lineno=50, col_offset=0)], Str('news.example.com', lineno=50, col_offset=11), lineno=50, col_offset=0), Assign([Name('treefile', Store(), lineno=53, col_offset=0)], Str('grouptree', lineno=53, col_offset=11), lineno=53, col_offset=0), Assign([Name('descfile', Store(), lineno=58, col_offset=0)], Str('newsgroups', lineno=58, col_offset=11), lineno=58, col_offset=0), Assign([Name('pagedir', Store(), lineno=64, col_offset=0)], Name('topdir', Load(), lineno=64, col_offset=11), lineno=64, col_offset=0), Assign([Name('httppref', Store(), lineno=71, col_offset=0)], Str('', lineno=71, col_offset=11), lineno=71, col_offset=0), Assign([Name('rootpage', Store(), lineno=75, col_offset=0)], Str('root', lineno=75, col_offset=11), lineno=75, col_offset=0), Assign([Name('skipempty', Store(), lineno=79, col_offset=0)], Num(1, lineno=79, col_offset=12), lineno=79, col_offset=0), Assign([Name('pagelinkicon', Store(), lineno=84, col_offset=0)], Str('... <img src="http://pelican.cl.cam.ac.uk/icons/page.xbm"> ', lineno=84, col_offset=15), lineno=84, col_offset=0), Assign([Name('sublistsize', Store(), lineno=93, col_offset=0)], Num(4, lineno=93, col_offset=14), lineno=93, col_offset=0), For(Name('dir', Store(), lineno=98, col_offset=4), Tuple([Attribute(Name('os', Load(), lineno=98, col_offset=11), 'curdir', Load(), lineno=98, col_offset=11), Subscript(Attribute(Name('os', Load(), lineno=98, col_offset=22), 'environ', Load(), lineno=98, col_offset=22), Index(Str('HOME', lineno=98, col_offset=33)), Load(), lineno=98, col_offset=22)], Load(), lineno=98, col_offset=11), [Assign([Name('rcfile', Store(), lineno=99, col_offset=4)], Call(Attribute(Attribute(Name('os', Load(), lineno=99, col_offset=13), 'path', Load(), lineno=99, col_offset=13), 'join', Load(), lineno=99, col_offset=13), [Name('dir', Load(), lineno=99, col_offset=26), Str('.newslistrc.py', lineno=99, col_offset=31)], [], None, None, lineno=99, col_offset=13), lineno=99, col_offset=4), If(Call(Attribute(Attribute(Name('os', Load(), lineno=100, col_offset=7), 'path', Load(), lineno=100, col_offset=7), 'exists', Load(), lineno=100, col_offset=7), [Name('rcfile', Load(), lineno=100, col_offset=22)], [], None, None, lineno=100, col_offset=7), [Print(None, [Name('rcfile', Load(), lineno=101, col_offset=14)], True, lineno=101, col_offset=8), Expr(Call(Name('execfile', Load(), lineno=102, col_offset=8), [Name('rcfile', Load(), lineno=102, col_offset=17)], [], None, None, lineno=102, col_offset=8), lineno=102, col_offset=8), Break( lineno=103, col_offset=8)], [], lineno=100, col_offset=4)], [], lineno=98, col_offset=0), ImportFrom('nntplib', [alias('NNTP', None)], 0, lineno=105, col_offset=0), ImportFrom('stat', [alias('*', None)], 0, lineno=106, col_offset=0), Assign([Name('rcsrev', Store(), lineno=108, col_offset=0)], Str('$Revision: 75354 $', lineno=108, col_offset=9), lineno=108, col_offset=0), Assign([Name('rcsrev', Store(), lineno=109, col_offset=0)], Call(Attribute(Str(' ', lineno=109, col_offset=9), 'join', Load(), lineno=109, col_offset=9), [Call(Name('filter', Load(), lineno=109, col_offset=18), [Lambda(arguments([Name('s', Param(), lineno=109, col_offset=32)], None, None, []), Compare(Str('$', lineno=109, col_offset=35), [NotIn()], [Name('s', Load(), lineno=109, col_offset=46)], lineno=109, col_offset=35), lineno=109, col_offset=25), Call(Attribute(Name('rcsrev', Load(), lineno=109, col_offset=49), 'split', Load(), lineno=109, col_offset=49), [], [], None, None, lineno=109, col_offset=49)], [], None, None, lineno=109, col_offset=18)], [], None, None, lineno=109, col_offset=9), lineno=109, col_offset=0), Assign([Name('desc', Store(), lineno=110, col_offset=0)], Dict([], [], lineno=110, col_offset=7), lineno=110, col_offset=0), Assign([Name('treefile', Store(), lineno=113, col_offset=0)], Call(Attribute(Attribute(Name('os', Load(), lineno=113, col_offset=11), 'path', Load(), lineno=113, col_offset=11), 'join', Load(), lineno=113, col_offset=11), [Name('topdir', Load(), lineno=113, col_offset=24), Name('treefile', Load(), lineno=113, col_offset=31)], [], None, None, lineno=113, col_offset=11), lineno=113, col_offset=0), Assign([Name('descfile', Store(), lineno=114, col_offset=0)], Call(Attribute(Attribute(Name('os', Load(), lineno=114, col_offset=11), 'path', Load(), lineno=114, col_offset=11), 'join', Load(), lineno=114, col_offset=11), [Name('topdir', Load(), lineno=114, col_offset=24), Name('descfile', Load(), lineno=114, col_offset=31)], [], None, None, lineno=114, col_offset=11), lineno=114, col_offset=0), Assign([Name('page', Store(), lineno=115, col_offset=0)], Call(Attribute(Attribute(Name('os', Load(), lineno=115, col_offset=7), 'path', Load(), lineno=115, col_offset=7), 'join', Load(), lineno=115, col_offset=7), [Name('topdir', Load(), lineno=115, col_offset=20), Name('pagedir', Load(), lineno=115, col_offset=27)], [], None, None, lineno=115, col_offset=7), lineno=115, col_offset=0), FunctionDef('addtotree', arguments([Name('tree', Param(), lineno=120, col_offset=14), Name('groups', Param(), lineno=120, col_offset=20)], None, None, []), [Print(None, [Str('Updating tree...', lineno=121, col_offset=10)], True, lineno=121, col_offset=4), For(Name('i', Store(), lineno=122, col_offset=8), Name('groups', Load(), lineno=122, col_offset=13), [Assign([Name('parts', Store(), lineno=123, col_offset=8)], Call(Attribute(Name('i', Load(), lineno=123, col_offset=16), 'split', Load(), lineno=123, col_offset=16), [Str('.', lineno=123, col_offset=24)], [], None, None, lineno=123, col_offset=16), lineno=123, col_offset=8), Expr(Call(Name('makeleaf', Load(), lineno=124, col_offset=8), [Name('tree', Load(), lineno=124, col_offset=17), Name('parts', Load(), lineno=124, col_offset=23)], [], None, None, lineno=124, col_offset=8), lineno=124, col_offset=8)], [], lineno=122, col_offset=4)], [], lineno=120, col_offset=0), FunctionDef('makeleaf', arguments([Name('tree', Param(), lineno=127, col_offset=13), Name('path', Param(), lineno=127, col_offset=18)], None, None, []), [Assign([Name('j', Store(), lineno=128, col_offset=4)], Subscript(Name('path', Load(), lineno=128, col_offset=8), Index(Num(0, lineno=128, col_offset=13)), Load(), lineno=128, col_offset=8), lineno=128, col_offset=4), Assign([Name('l', Store(), lineno=129, col_offset=4)], Call(Name('len', Load(), lineno=129, col_offset=8), [Name('path', Load(), lineno=129, col_offset=12)], [], None, None, lineno=129, col_offset=8), lineno=129, col_offset=4), If(Compare(Name('j', Load(), lineno=131, col_offset=7), [NotIn()], [Name('tree', Load(), lineno=131, col_offset=16)], lineno=131, col_offset=7), [Assign([Subscript(Name('tree', Load(), lineno=132, col_offset=8), Index(Name('j', Load(), lineno=132, col_offset=13)), Store(), lineno=132, col_offset=8)], Dict([], [], lineno=132, col_offset=18), lineno=132, col_offset=8)], [], lineno=131, col_offset=4), If(Compare(Name('l', Load(), lineno=133, col_offset=7), [Eq()], [Num(1, lineno=133, col_offset=12)], lineno=133, col_offset=7), [Assign([Subscript(Subscript(Name('tree', Load(), lineno=134, col_offset=8), Index(Name('j', Load(), lineno=134, col_offset=13)), Load(), lineno=134, col_offset=8), Index(Str('.', lineno=134, col_offset=16)), Store(), lineno=134, col_offset=8)], Str('.', lineno=134, col_offset=23), lineno=134, col_offset=8)], [], lineno=133, col_offset=4), If(Compare(Name('l', Load(), lineno=135, col_offset=7), [Gt()], [Num(1, lineno=135, col_offset=11)], lineno=135, col_offset=7), [Expr(Call(Name('makeleaf', Load(), lineno=136, col_offset=8), [Subscript(Name('tree', Load(), lineno=136, col_offset=17), Index(Name('j', Load(), lineno=136, col_offset=22)), Load(), lineno=136, col_offset=17), Subscript(Name('path', Load(), lineno=136, col_offset=25), Slice(Num(1, lineno=136, col_offset=30), None, None), Load(), lineno=136, col_offset=25)], [], None, None, lineno=136, col_offset=8), lineno=136, col_offset=8)], [], lineno=135, col_offset=4)], [], lineno=127, col_offset=0), FunctionDef('createpage', arguments([Name('root', Param(), lineno=143, col_offset=15), Name('tree', Param(), lineno=143, col_offset=21), Name('p', Param(), lineno=143, col_offset=27)], None, None, []), [Assign([Name('filename', Store(), lineno=144, col_offset=4)], Call(Attribute(Attribute(Name('os', Load(), lineno=144, col_offset=15), 'path', Load(), lineno=144, col_offset=15), 'join', Load(), lineno=144, col_offset=15), [Name('pagedir', Load(), lineno=144, col_offset=28), BinOp(Name('root', Load(), lineno=144, col_offset=37), Add(), Str('.html', lineno=144, col_offset=42), lineno=144, col_offset=37)], [], None, None, lineno=144, col_offset=15), lineno=144, col_offset=4), If(Compare(Name('root', Load(), lineno=145, col_offset=7), [Eq()], [Name('rootpage', Load(), lineno=145, col_offset=15)], lineno=145, col_offset=7), [Assign([Name('detail', Store(), lineno=146, col_offset=8)], Str('', lineno=146, col_offset=17), lineno=146, col_offset=8)], [Assign([Name('detail', Store(), lineno=148, col_offset=8)], BinOp(Str(' under ', lineno=148, col_offset=17), Add(), Name('root', Load(), lineno=148, col_offset=29), lineno=148, col_offset=17), lineno=148, col_offset=8)], lineno=145, col_offset=4), With(Call(Name('open', Load(), lineno=149, col_offset=9), [Name('filename', Load(), lineno=149, col_offset=14), Str('w', lineno=149, col_offset=24)], [], None, None, lineno=149, col_offset=9), Name('f', Store(), lineno=149, col_offset=32), [Expr(Call(Attribute(Name('f', Load(), lineno=151, col_offset=8), 'write', Load(), lineno=151, col_offset=8), [Str('<html>\n<head>\n', lineno=151, col_offset=16)], [], None, None, lineno=151, col_offset=8), lineno=151, col_offset=8), Expr(Call(Attribute(Name('f', Load(), lineno=152, col_offset=8), 'write', Load(), lineno=152, col_offset=8), [BinOp(Str('<title>Newsgroups available%s</title>\n', lineno=152, col_offset=16), Mod(), Name('detail', Load(), lineno=152, col_offset=60), lineno=152, col_offset=16)], [], None, None, lineno=152, col_offset=8), lineno=152, col_offset=8), Expr(Call(Attribute(Name('f', Load(), lineno=153, col_offset=8), 'write', Load(), lineno=153, col_offset=8), [Str('</head>\n<body>\n', lineno=153, col_offset=16)], [], None, None, lineno=153, col_offset=8), lineno=153, col_offset=8), Expr(Call(Attribute(Name('f', Load(), lineno=154, col_offset=8), 'write', Load(), lineno=154, col_offset=8), [BinOp(Str('<h1>Newsgroups available%s</h1>\n', lineno=154, col_offset=16), Mod(), Name('detail', Load(), lineno=154, col_offset=54), lineno=154, col_offset=16)], [], None, None, lineno=154, col_offset=8), lineno=154, col_offset=8), Expr(Call(Attribute(Name('f', Load(), lineno=155, col_offset=8), 'write', Load(), lineno=155, col_offset=8), [BinOp(Str('<a href="%s%s.html">Back to top level</a><p>\n', lineno=155, col_offset=16), Mod(), Tuple([Name('httppref', Load(), lineno=156, col_offset=17), Name('rootpage', Load(), lineno=156, col_offset=27)], Load(), lineno=156, col_offset=17), lineno=155, col_offset=16)], [], None, None, lineno=155, col_offset=8), lineno=155, col_offset=8), Expr(Call(Name('printtree', Load(), lineno=157, col_offset=8), [Name('f', Load(), lineno=157, col_offset=18), Name('tree', Load(), lineno=157, col_offset=21), Num(0, lineno=157, col_offset=27), Name('p', Load(), lineno=157, col_offset=30)], [], None, None, lineno=157, col_offset=8), lineno=157, col_offset=8), Expr(Call(Attribute(Name('f', Load(), lineno=158, col_offset=8), 'write', Load(), lineno=158, col_offset=8), [Str('\n<p>', lineno=158, col_offset=16)], [], None, None, lineno=158, col_offset=8), lineno=158, col_offset=8), Expr(Call(Attribute(Name('f', Load(), lineno=159, col_offset=8), 'write', Load(), lineno=159, col_offset=8), [BinOp(Str("<i>This page automatically created by 'newslist' v. %s.", lineno=159, col_offset=16), Mod(), Name('rcsrev', Load(), lineno=160, col_offset=16), lineno=159, col_offset=16)], [], None, None, lineno=159, col_offset=8), lineno=159, col_offset=8), Expr(Call(Attribute(Name('f', Load(), lineno=161, col_offset=8), 'write', Load(), lineno=161, col_offset=8), [BinOp(Call(Attribute(Name('time', Load(), lineno=161, col_offset=16), 'ctime', Load(), lineno=161, col_offset=16), [Call(Attribute(Name('time', Load(), lineno=161, col_offset=27), 'time', Load(), lineno=161, col_offset=27), [], [], None, None, lineno=161, col_offset=27)], [], None, None, lineno=161, col_offset=16), Add(), Str('</i>\n', lineno=161, col_offset=42), lineno=161, col_offset=16)], [], None, None, lineno=161, col_offset=8), lineno=161, col_offset=8), Expr(Call(Attribute(Name('f', Load(), lineno=162, col_offset=8), 'write', Load(), lineno=162, col_offset=8), [Str('</body>\n</html>\n', lineno=162, col_offset=16)], [], None, None, lineno=162, col_offset=8), lineno=162, col_offset=8)], lineno=149, col_offset=9)], [], lineno=143, col_offset=0), FunctionDef('printtree', arguments([Name('f', Param(), lineno=168, col_offset=14), Name('tree', Param(), lineno=168, col_offset=17), Name('indent', Param(), lineno=168, col_offset=23), Name('p', Param(), lineno=168, col_offset=31)], None, None, []), [Assign([Name('l', Store(), lineno=169, col_offset=4)], Call(Name('len', Load(), lineno=169, col_offset=8), [Name('tree', Load(), lineno=169, col_offset=12)], [], None, None, lineno=169, col_offset=8), lineno=169, col_offset=4), If(BoolOp(And(), [Compare(Name('l', Load(), lineno=171, col_offset=7), [Gt()], [Name('sublistsize', Load(), lineno=171, col_offset=11)], lineno=171, col_offset=7), Compare(Name('indent', Load(), lineno=171, col_offset=27), [Gt()], [Num(0, lineno=171, col_offset=36)], lineno=171, col_offset=27)], lineno=171, col_offset=7), [Expr(Call(Attribute(Name('f', Load(), lineno=173, col_offset=8), 'write', Load(), lineno=173, col_offset=8), [BinOp(Str('<li><b><a href="%s%s.html">', lineno=173, col_offset=16), Mod(), Tuple([Name('httppref', Load(), lineno=173, col_offset=49), Subscript(Name('p', Load(), lineno=173, col_offset=59), Slice(Num(1, lineno=173, col_offset=61), None, None), Load(), lineno=173, col_offset=59)], Load(), lineno=173, col_offset=49), lineno=173, col_offset=16)], [], None, None, lineno=173, col_offset=8), lineno=173, col_offset=8), Expr(Call(Attribute(Name('f', Load(), lineno=174, col_offset=8), 'write', Load(), lineno=174, col_offset=8), [BinOp(Subscript(Name('p', Load(), lineno=174, col_offset=16), Slice(Num(1, lineno=174, col_offset=18), None, None), Load(), lineno=174, col_offset=16), Add(), Str('.*', lineno=174, col_offset=24), lineno=174, col_offset=16)], [], None, None, lineno=174, col_offset=8), lineno=174, col_offset=8), Expr(Call(Attribute(Name('f', Load(), lineno=175, col_offset=8), 'write', Load(), lineno=175, col_offset=8), [BinOp(Str('</a></b>%s\n', lineno=175, col_offset=16), Mod(), Name('pagelinkicon', Load(), lineno=175, col_offset=33), lineno=175, col_offset=16)], [], None, None, lineno=175, col_offset=8), lineno=175, col_offset=8), Expr(Call(Name('createpage', Load(), lineno=176, col_offset=8), [Subscript(Name('p', Load(), lineno=176, col_offset=19), Slice(Num(1, lineno=176, col_offset=21), None, None), Load(), lineno=176, col_offset=19), Name('tree', Load(), lineno=176, col_offset=26), Name('p', Load(), lineno=176, col_offset=32)], [], None, None, lineno=176, col_offset=8), lineno=176, col_offset=8), Return(None, lineno=177, col_offset=8)], [], lineno=171, col_offset=4), Assign([Name('kl', Store(), lineno=179, col_offset=4)], Call(Attribute(Name('tree', Load(), lineno=179, col_offset=9), 'keys', Load(), lineno=179, col_offset=9), [], [], None, None, lineno=179, col_offset=9), lineno=179, col_offset=4), If(Compare(Name('l', Load(), lineno=181, col_offset=7), [Gt()], [Num(1, lineno=181, col_offset=11)], lineno=181, col_offset=7), [Expr(Call(Attribute(Name('kl', Load(), lineno=182, col_offset=8), 'sort', Load(), lineno=182, col_offset=8), [], [], None, None, lineno=182, col_offset=8), lineno=182, col_offset=8), If(Compare(Name('indent', Load(), lineno=183, col_offset=11), [Gt()], [Num(0, lineno=183, col_offset=20)], lineno=183, col_offset=11), [Expr(Call(Attribute(Name('f', Load(), lineno=185, col_offset=12), 'write', Load(), lineno=185, col_offset=12), [BinOp(Str('<li>%s\n<ul>', lineno=185, col_offset=20), Mod(), Subscript(Name('p', Load(), lineno=185, col_offset=37), Slice(Num(1, lineno=185, col_offset=39), None, None), Load(), lineno=185, col_offset=37), lineno=185, col_offset=20)], [], None, None, lineno=185, col_offset=12), lineno=185, col_offset=12)], [Expr(Call(Attribute(Name('f', Load(), lineno=188, col_offset=12), 'write', Load(), lineno=188, col_offset=12), [Str('<ul>', lineno=188, col_offset=20)], [], None, None, lineno=188, col_offset=12), lineno=188, col_offset=12)], lineno=183, col_offset=8), Assign([Name('indent', Store(), lineno=189, col_offset=8)], BinOp(Name('indent', Load(), lineno=189, col_offset=17), Add(), Num(1, lineno=189, col_offset=26), lineno=189, col_offset=17), lineno=189, col_offset=8)], [], lineno=181, col_offset=4), For(Name('i', Store(), lineno=191, col_offset=8), Name('kl', Load(), lineno=191, col_offset=13), [If(Compare(Name('i', Load(), lineno=192, col_offset=11), [Eq()], [Str('.', lineno=192, col_offset=16)], lineno=192, col_offset=11), [Expr(Call(Attribute(Name('f', Load(), lineno=194, col_offset=12), 'write', Load(), lineno=194, col_offset=12), [BinOp(Str('<li><a href="news:%s">%s</a> ', lineno=194, col_offset=20), Mod(), Tuple([Subscript(Name('p', Load(), lineno=194, col_offset=55), Slice(Num(1, lineno=194, col_offset=57), None, None), Load(), lineno=194, col_offset=55), Subscript(Name('p', Load(), lineno=194, col_offset=62), Slice(Num(1, lineno=194, col_offset=64), None, None), Load(), lineno=194, col_offset=62)], Load(), lineno=194, col_offset=55), lineno=194, col_offset=20)], [], None, None, lineno=194, col_offset=12), lineno=194, col_offset=12), If(Compare(Subscript(Name('p', Load(), lineno=195, col_offset=15), Slice(Num(1, lineno=195, col_offset=17), None, None), Load(), lineno=195, col_offset=15), [In()], [Name('desc', Load(), lineno=195, col_offset=24)], lineno=195, col_offset=15), [Expr(Call(Attribute(Name('f', Load(), lineno=196, col_offset=16), 'write', Load(), lineno=196, col_offset=16), [BinOp(Str('     <i>%s</i>\n', lineno=196, col_offset=24), Mod(), Subscript(Name('desc', Load(), lineno=196, col_offset=45), Index(Subscript(Name('p', Load(), lineno=196, col_offset=50), Slice(Num(1, lineno=196, col_offset=52), None, None), Load(), lineno=196, col_offset=50)), Load(), lineno=196, col_offset=45), lineno=196, col_offset=24)], [], None, None, lineno=196, col_offset=16), lineno=196, col_offset=16)], [Expr(Call(Attribute(Name('f', Load(), lineno=198, col_offset=16), 'write', Load(), lineno=198, col_offset=16), [Str('\n', lineno=198, col_offset=24)], [], None, None, lineno=198, col_offset=16), lineno=198, col_offset=16)], lineno=195, col_offset=12)], [Expr(Call(Name('printtree', Load(), lineno=201, col_offset=12), [Name('f', Load(), lineno=201, col_offset=22), Subscript(Name('tree', Load(), lineno=201, col_offset=25), Index(Name('i', Load(), lineno=201, col_offset=30)), Load(), lineno=201, col_offset=25), Name('indent', Load(), lineno=201, col_offset=34), BinOp(BinOp(Name('p', Load(), lineno=201, col_offset=42), Add(), Str('.', lineno=201, col_offset=44), lineno=201, col_offset=42), Add(), Name('i', Load(), lineno=201, col_offset=48), lineno=201, col_offset=47)], [], None, None, lineno=201, col_offset=12), lineno=201, col_offset=12)], lineno=192, col_offset=8)], [], lineno=191, col_offset=4), If(Compare(Name('l', Load(), lineno=203, col_offset=7), [Gt()], [Num(1, lineno=203, col_offset=11)], lineno=203, col_offset=7), [Expr(Call(Attribute(Name('f', Load(), lineno=204, col_offset=8), 'write', Load(), lineno=204, col_offset=8), [Str('\n</ul>', lineno=204, col_offset=16)], [], None, None, lineno=204, col_offset=8), lineno=204, col_offset=8)], [], lineno=203, col_offset=4)], [], lineno=168, col_offset=0), FunctionDef('readdesc', arguments([Name('descfile', Param(), lineno=210, col_offset=13)], None, None, []), [Global(['desc'], lineno=211, col_offset=4), Assign([Name('desc', Store(), lineno=212, col_offset=4)], Dict([], [], lineno=212, col_offset=11), lineno=212, col_offset=4), If(Compare(Name('descfile', Load(), lineno=214, col_offset=7), [Eq()], [Str('', lineno=214, col_offset=19)], lineno=214, col_offset=7), [Return(None, lineno=215, col_offset=8)], [], lineno=214, col_offset=4), TryExcept([With(Call(Name('open', Load(), lineno=218, col_offset=13), [Name('descfile', Load(), lineno=218, col_offset=18), Str('r', lineno=218, col_offset=28)], [], None, None, lineno=218, col_offset=13), Name('d', Store(), lineno=218, col_offset=36), [Print(None, [Str('Reading descriptions...', lineno=219, col_offset=18)], True, lineno=219, col_offset=12), For(Name('l', Store(), lineno=220, col_offset=16), Name('d', Load(), lineno=220, col_offset=21), [Assign([Name('bits', Store(), lineno=221, col_offset=16)], Call(Attribute(Name('l', Load(), lineno=221, col_offset=23), 'split', Load(), lineno=221, col_offset=23), [], [], None, None, lineno=221, col_offset=23), lineno=221, col_offset=16), TryExcept([Assign([Name('grp', Store(), lineno=223, col_offset=20)], Subscript(Name('bits', Load(), lineno=223, col_offset=26), Index(Num(0, lineno=223, col_offset=31)), Load(), lineno=223, col_offset=26), lineno=223, col_offset=20), Assign([Name('dsc', Store(), lineno=224, col_offset=20)], Call(Attribute(Str(' ', lineno=224, col_offset=26), 'join', Load(), lineno=224, col_offset=26), [Subscript(Name('bits', Load(), lineno=224, col_offset=35), Slice(Num(1, lineno=224, col_offset=40), None, None), Load(), lineno=224, col_offset=35)], [], None, None, lineno=224, col_offset=26), lineno=224, col_offset=20), If(Compare(Call(Name('len', Load(), lineno=225, col_offset=23), [Name('dsc', Load(), lineno=225, col_offset=27)], [], None, None, lineno=225, col_offset=23), [Gt()], [Num(1, lineno=225, col_offset=34)], lineno=225, col_offset=23), [Assign([Subscript(Name('desc', Load(), lineno=226, col_offset=24), Index(Name('grp', Load(), lineno=226, col_offset=29)), Store(), lineno=226, col_offset=24)], Name('dsc', Load(), lineno=226, col_offset=36), lineno=226, col_offset=24)], [], lineno=225, col_offset=20)], [ExceptHandler(Name('IndexError', Load(), lineno=227, col_offset=23), None, [Pass( lineno=228, col_offset=20)], lineno=227, col_offset=16)], [], lineno=222, col_offset=16)], [], lineno=220, col_offset=12)], lineno=218, col_offset=13)], [ExceptHandler(Name('IOError', Load(), lineno=229, col_offset=11), None, [Print(None, [BinOp(Str('Failed to open description file ', lineno=230, col_offset=14), Add(), Name('descfile', Load(), lineno=230, col_offset=51), lineno=230, col_offset=14)], True, lineno=230, col_offset=8), Return(None, lineno=231, col_offset=8)], lineno=229, col_offset=4)], [], lineno=217, col_offset=4)], [], lineno=210, col_offset=0), FunctionDef('checkopdir', arguments([Name('pagedir', Param(), lineno=236, col_offset=15)], None, None, []), [If(UnaryOp(Not(), Call(Attribute(Attribute(Name('os', Load(), lineno=237, col_offset=11), 'path', Load(), lineno=237, col_offset=11), 'isdir', Load(), lineno=237, col_offset=11), [Name('pagedir', Load(), lineno=237, col_offset=25)], [], None, None, lineno=237, col_offset=11), lineno=237, col_offset=7), [Print(None, [BinOp(Str('Directory %s does not exist.', lineno=238, col_offset=14), Mod(), Name('pagedir', Load(), lineno=238, col_offset=47), lineno=238, col_offset=14)], True, lineno=238, col_offset=8), Print(None, [Str('Shall I create it for you? (y/n)', lineno=239, col_offset=14)], True, lineno=239, col_offset=8), If(Compare(Subscript(Call(Attribute(Attribute(Name('sys', Load(), lineno=240, col_offset=11), 'stdin', Load(), lineno=240, col_offset=11), 'readline', Load(), lineno=240, col_offset=11), [], [], None, None, lineno=240, col_offset=11), Index(Num(0, lineno=240, col_offset=32)), Load(), lineno=240, col_offset=11), [Eq()], [Str('y', lineno=240, col_offset=38)], lineno=240, col_offset=11), [TryExcept([Expr(Call(Attribute(Name('os', Load(), lineno=242, col_offset=16), 'mkdir', Load(), lineno=242, col_offset=16), [Name('pagedir', Load(), lineno=242, col_offset=25), Num(511, lineno=242, col_offset=34)], [], None, None, lineno=242, col_offset=16), lineno=242, col_offset=16)], [ExceptHandler(None, None, [Print(None, [Str('Sorry - failed!', lineno=244, col_offset=22)], True, lineno=244, col_offset=16), Expr(Call(Attribute(Name('sys', Load(), lineno=245, col_offset=16), 'exit', Load(), lineno=245, col_offset=16), [Num(1, lineno=245, col_offset=25)], [], None, None, lineno=245, col_offset=16), lineno=245, col_offset=16)], lineno=243, col_offset=12)], [], lineno=241, col_offset=12)], [Print(None, [Str('OK. Exiting.', lineno=247, col_offset=18)], True, lineno=247, col_offset=12), Expr(Call(Attribute(Name('sys', Load(), lineno=248, col_offset=12), 'exit', Load(), lineno=248, col_offset=12), [Num(1, lineno=248, col_offset=21)], [], None, None, lineno=248, col_offset=12), lineno=248, col_offset=12)], lineno=240, col_offset=8)], [], lineno=237, col_offset=4)], [], lineno=236, col_offset=0), FunctionDef('readlocallist', arguments([Name('treefile', Param(), lineno=252, col_offset=18)], None, None, []), [Print(None, [Str('Reading current local group list...', lineno=253, col_offset=10)], True, lineno=253, col_offset=4), Assign([Name('tree', Store(), lineno=254, col_offset=4)], Dict([], [], lineno=254, col_offset=11), lineno=254, col_offset=4), TryExcept([Assign([Name('treetime', Store(), lineno=256, col_offset=8)], Call(Attribute(Name('time', Load(), lineno=256, col_offset=19), 'localtime', Load(), lineno=256, col_offset=19), [Subscript(Call(Attribute(Name('os', Load(), lineno=256, col_offset=34), 'stat', Load(), lineno=256, col_offset=34), [Name('treefile', Load(), lineno=256, col_offset=42)], [], None, None, lineno=256, col_offset=34), Index(Name('ST_MTIME', Load(), lineno=256, col_offset=52)), Load(), lineno=256, col_offset=34)], [], None, None, lineno=256, col_offset=19), lineno=256, col_offset=8)], [ExceptHandler(None, None, [Print(None, [BinOp(Str('\n*** Failed to open local group cache ', lineno=258, col_offset=14), Add(), Name('treefile', Load(), lineno=258, col_offset=56), lineno=258, col_offset=14)], True, lineno=258, col_offset=8), Print(None, [Str('If this is the first time you have run newslist, then', lineno=259, col_offset=14)], True, lineno=259, col_offset=8), Print(None, [Str('use the -a option to create it.', lineno=260, col_offset=14)], True, lineno=260, col_offset=8), Expr(Call(Attribute(Name('sys', Load(), lineno=261, col_offset=8), 'exit', Load(), lineno=261, col_offset=8), [Num(1, lineno=261, col_offset=17)], [], None, None, lineno=261, col_offset=8), lineno=261, col_offset=8)], lineno=257, col_offset=4)], [], lineno=255, col_offset=4), Assign([Name('treedate', Store(), lineno=262, col_offset=4)], BinOp(Str('%02d%02d%02d', lineno=262, col_offset=15), Mod(), Tuple([BinOp(Subscript(Name('treetime', Load(), lineno=262, col_offset=33), Index(Num(0, lineno=262, col_offset=42)), Load(), lineno=262, col_offset=33), Mod(), Num(100, lineno=262, col_offset=47), lineno=262, col_offset=33), Subscript(Name('treetime', Load(), lineno=262, col_offset=52), Index(Num(1, lineno=262, col_offset=61)), Load(), lineno=262, col_offset=52), Subscript(Name('treetime', Load(), lineno=262, col_offset=65), Index(Num(2, lineno=262, col_offset=74)), Load(), lineno=262, col_offset=65)], Load(), lineno=262, col_offset=33), lineno=262, col_offset=15), lineno=262, col_offset=4), TryExcept([With(Call(Name('open', Load(), lineno=264, col_offset=13), [Name('treefile', Load(), lineno=264, col_offset=18), Str('rb', lineno=264, col_offset=28)], [], None, None, lineno=264, col_offset=13), Name('dump', Store(), lineno=264, col_offset=37), [Assign([Name('tree', Store(), lineno=265, col_offset=12)], Call(Attribute(Name('marshal', Load(), lineno=265, col_offset=19), 'load', Load(), lineno=265, col_offset=19), [Name('dump', Load(), lineno=265, col_offset=32)], [], None, None, lineno=265, col_offset=19), lineno=265, col_offset=12)], lineno=264, col_offset=13)], [ExceptHandler(Name('IOError', Load(), lineno=266, col_offset=11), None, [Print(None, [BinOp(Str('Cannot open local group list ', lineno=267, col_offset=14), Add(), Name('treefile', Load(), lineno=267, col_offset=48), lineno=267, col_offset=14)], True, lineno=267, col_offset=8)], lineno=266, col_offset=4)], [], lineno=263, col_offset=4), Return(Tuple([Name('tree', Load(), lineno=268, col_offset=12), Name('treedate', Load(), lineno=268, col_offset=18)], Load(), lineno=268, col_offset=12), lineno=268, col_offset=4)], [], lineno=252, col_offset=0), FunctionDef('writelocallist', arguments([Name('treefile', Param(), lineno=270, col_offset=19), Name('tree', Param(), lineno=270, col_offset=29)], None, None, []), [TryExcept([With(Call(Name('open', Load(), lineno=272, col_offset=13), [Name('treefile', Load(), lineno=272, col_offset=18), Str('wb', lineno=272, col_offset=28)], [], None, None, lineno=272, col_offset=13), Name('dump', Store(), lineno=272, col_offset=37), [Assign([Name('groups', Store(), lineno=273, col_offset=12)], Call(Attribute(Name('marshal', Load(), lineno=273, col_offset=21), 'dump', Load(), lineno=273, col_offset=21), [Name('tree', Load(), lineno=273, col_offset=34), Name('dump', Load(), lineno=273, col_offset=40)], [], None, None, lineno=273, col_offset=21), lineno=273, col_offset=12)], lineno=272, col_offset=13), Print(None, [BinOp(Str('Saved list to %s\n', lineno=274, col_offset=14), Mod(), Name('treefile', Load(), lineno=274, col_offset=37), lineno=274, col_offset=14)], True, lineno=274, col_offset=8)], [ExceptHandler(None, None, [Print(None, [Str('Sorry - failed to write to local group cache', lineno=276, col_offset=14), Name('treefile', Load(), lineno=276, col_offset=62)], True, lineno=276, col_offset=8), Print(None, [Str('Does it (or its directory) have the correct permissions?', lineno=277, col_offset=14)], True, lineno=277, col_offset=8), Expr(Call(Attribute(Name('sys', Load(), lineno=278, col_offset=8), 'exit', Load(), lineno=278, col_offset=8), [Num(1, lineno=278, col_offset=17)], [], None, None, lineno=278, col_offset=8), lineno=278, col_offset=8)], lineno=275, col_offset=4)], [], lineno=271, col_offset=4)], [], lineno=270, col_offset=0), FunctionDef('getallgroups', arguments([Name('server', Param(), lineno=282, col_offset=17)], None, None, []), [Print(None, [Str('Getting list of all groups...', lineno=283, col_offset=10)], True, lineno=283, col_offset=4), Assign([Name('treedate', Store(), lineno=284, col_offset=4)], Str('010101', lineno=284, col_offset=15), lineno=284, col_offset=4), Assign([Name('info', Store(), lineno=285, col_offset=4)], Subscript(Call(Attribute(Name('server', Load(), lineno=285, col_offset=11), 'list', Load(), lineno=285, col_offset=11), [], [], None, None, lineno=285, col_offset=11), Index(Num(1, lineno=285, col_offset=25)), Load(), lineno=285, col_offset=11), lineno=285, col_offset=4), Assign([Name('groups', Store(), lineno=286, col_offset=4)], List([], Load(), lineno=286, col_offset=13), lineno=286, col_offset=4), Print(None, [Str('Processing...', lineno=287, col_offset=10)], True, lineno=287, col_offset=4), If(Name('skipempty', Load(), lineno=288, col_offset=7), [Print(None, [Str('\nIgnoring following empty groups:', lineno=289, col_offset=14)], True, lineno=289, col_offset=8)], [], lineno=288, col_offset=4), For(Name('i', Store(), lineno=290, col_offset=8), Name('info', Load(), lineno=290, col_offset=13), [Assign([Name('grpname', Store(), lineno=291, col_offset=8)], Subscript(Call(Attribute(Subscript(Name('i', Load(), lineno=291, col_offset=18), Index(Num(0, lineno=291, col_offset=20)), Load(), lineno=291, col_offset=18), 'split', Load(), lineno=291, col_offset=18), [], [], None, None, lineno=291, col_offset=18), Index(Num(0, lineno=291, col_offset=31)), Load(), lineno=291, col_offset=18), lineno=291, col_offset=8), If(BoolOp(And(), [Name('skipempty', Load(), lineno=292, col_offset=11), Compare(Call(Name('int', Load(), lineno=292, col_offset=25), [Subscript(Name('i', Load(), lineno=292, col_offset=29), Index(Num(1, lineno=292, col_offset=31)), Load(), lineno=292, col_offset=29)], [], None, None, lineno=292, col_offset=25), [Lt()], [Call(Name('int', Load(), lineno=292, col_offset=37), [Subscript(Name('i', Load(), lineno=292, col_offset=41), Index(Num(2, lineno=292, col_offset=43)), Load(), lineno=292, col_offset=41)], [], None, None, lineno=292, col_offset=37)], lineno=292, col_offset=25)], lineno=292, col_offset=11), [Print(None, [BinOp(Name('grpname', Load(), lineno=293, col_offset=18), Add(), Str(' ', lineno=293, col_offset=28), lineno=293, col_offset=18)], False, lineno=293, col_offset=12)], [Expr(Call(Attribute(Name('groups', Load(), lineno=295, col_offset=12), 'append', Load(), lineno=295, col_offset=12), [Name('grpname', Load(), lineno=295, col_offset=26)], [], None, None, lineno=295, col_offset=12), lineno=295, col_offset=12)], lineno=292, col_offset=8)], [], lineno=290, col_offset=4), Print(None, [Str('\n', lineno=296, col_offset=10)], True, lineno=296, col_offset=4), If(Name('skipempty', Load(), lineno=297, col_offset=7), [Print(None, [Str('(End of empty groups)', lineno=298, col_offset=14)], True, lineno=298, col_offset=8)], [], lineno=297, col_offset=4), Return(Name('groups', Load(), lineno=299, col_offset=11), lineno=299, col_offset=4)], [], lineno=282, col_offset=0), FunctionDef('getnewgroups', arguments([Name('server', Param(), lineno=303, col_offset=17), Name('treedate', Param(), lineno=303, col_offset=25)], None, None, []), [Print(None, [BinOp(Str('Getting list of new groups since start of %s...', lineno=304, col_offset=10), Mod(), Name('treedate', Load(), lineno=304, col_offset=62), lineno=304, col_offset=10)], False, lineno=304, col_offset=4), Assign([Name('info', Store(), lineno=305, col_offset=4)], Subscript(Call(Attribute(Name('server', Load(), lineno=305, col_offset=11), 'newgroups', Load(), lineno=305, col_offset=11), [Name('treedate', Load(), lineno=305, col_offset=28), Str('000001', lineno=305, col_offset=38)], [], None, None, lineno=305, col_offset=11), Index(Num(1, lineno=305, col_offset=48)), Load(), lineno=305, col_offset=11), lineno=305, col_offset=4), Print(None, [BinOp(Str('got %d.', lineno=306, col_offset=10), Mod(), Call(Name('len', Load(), lineno=306, col_offset=22), [Name('info', Load(), lineno=306, col_offset=26)], [], None, None, lineno=306, col_offset=22), lineno=306, col_offset=10)], True, lineno=306, col_offset=4), Print(None, [Str('Processing...', lineno=307, col_offset=10)], False, lineno=307, col_offset=4), Assign([Name('groups', Store(), lineno=308, col_offset=4)], List([], Load(), lineno=308, col_offset=13), lineno=308, col_offset=4), For(Name('i', Store(), lineno=309, col_offset=8), Name('info', Load(), lineno=309, col_offset=13), [Assign([Name('grpname', Store(), lineno=310, col_offset=8)], Subscript(Call(Attribute(Name('i', Load(), lineno=310, col_offset=18), 'split', Load(), lineno=310, col_offset=18), [], [], None, None, lineno=310, col_offset=18), Index(Num(0, lineno=310, col_offset=28)), Load(), lineno=310, col_offset=18), lineno=310, col_offset=8), Expr(Call(Attribute(Name('groups', Load(), lineno=311, col_offset=8), 'append', Load(), lineno=311, col_offset=8), [Name('grpname', Load(), lineno=311, col_offset=22)], [], None, None, lineno=311, col_offset=8), lineno=311, col_offset=8)], [], lineno=309, col_offset=4), Print(None, [Str('Done', lineno=312, col_offset=10)], True, lineno=312, col_offset=4), Return(Name('groups', Load(), lineno=313, col_offset=11), lineno=313, col_offset=4)], [], lineno=303, col_offset=0), FunctionDef('main', arguments([], None, None, []), [Assign([Name('tree', Store(), lineno=318, col_offset=4)], Dict([], [], lineno=318, col_offset=11), lineno=318, col_offset=4), Expr(Call(Name('checkopdir', Load(), lineno=321, col_offset=4), [Name('pagedir', Load(), lineno=321, col_offset=15)], [], None, None, lineno=321, col_offset=4), lineno=321, col_offset=4), TryExcept([Print(None, [BinOp(Str('Connecting to %s...', lineno=324, col_offset=14), Mod(), Name('newshost', Load(), lineno=324, col_offset=38), lineno=324, col_offset=14)], True, lineno=324, col_offset=8), If(Compare(Subscript(Attribute(Name('sys', Load(), lineno=325, col_offset=11), 'version', Load(), lineno=325, col_offset=11), Index(Num(0, lineno=325, col_offset=23)), Load(), lineno=325, col_offset=11), [Eq()], [Str('0', lineno=325, col_offset=29)], lineno=325, col_offset=11), [Assign([Name('s', Store(), lineno=326, col_offset=12)], Call(Attribute(Name('NNTP', Load(), lineno=326, col_offset=16), 'init', Load(), lineno=326, col_offset=16), [Name('newshost', Load(), lineno=326, col_offset=26)], [], None, None, lineno=326, col_offset=16), lineno=326, col_offset=12)], [Assign([Name('s', Store(), lineno=328, col_offset=12)], Call(Name('NNTP', Load(), lineno=328, col_offset=16), [Name('newshost', Load(), lineno=328, col_offset=21)], [], None, None, lineno=328, col_offset=16), lineno=328, col_offset=12)], lineno=325, col_offset=8), Assign([Name('connected', Store(), lineno=329, col_offset=8)], Name('True', Load(), lineno=329, col_offset=20), lineno=329, col_offset=8)], [ExceptHandler(Tuple([Attribute(Name('nntplib', Load(), lineno=330, col_offset=12), 'error_temp', Load(), lineno=330, col_offset=12), Attribute(Name('nntplib', Load(), lineno=330, col_offset=32), 'error_perm', Load(), lineno=330, col_offset=32)], Load(), lineno=330, col_offset=12), Name('x', Store(), lineno=330, col_offset=53), [Print(None, [Str('Error connecting to host:', lineno=331, col_offset=14), Name('x', Load(), lineno=331, col_offset=43)], True, lineno=331, col_offset=8), Print(None, [Str("I'll try to use just the local list.", lineno=332, col_offset=14)], True, lineno=332, col_offset=8), Assign([Name('connected', Store(), lineno=333, col_offset=8)], Name('False', Load(), lineno=333, col_offset=20), lineno=333, col_offset=8)], lineno=330, col_offset=4)], [], lineno=323, col_offset=4), If(BoolOp(And(), [Name('connected', Load(), lineno=336, col_offset=7), Compare(Call(Name('len', Load(), lineno=336, col_offset=21), [Attribute(Name('sys', Load(), lineno=336, col_offset=25), 'argv', Load(), lineno=336, col_offset=25)], [], None, None, lineno=336, col_offset=21), [Gt()], [Num(1, lineno=336, col_offset=37)], lineno=336, col_offset=21), Compare(Subscript(Attribute(Name('sys', Load(), lineno=336, col_offset=43), 'argv', Load(), lineno=336, col_offset=43), Index(Num(1, lineno=336, col_offset=52)), Load(), lineno=336, col_offset=43), [Eq()], [Str('-a', lineno=336, col_offset=58)], lineno=336, col_offset=43)], lineno=336, col_offset=7), [Assign([Name('groups', Store(), lineno=337, col_offset=8)], Call(Name('getallgroups', Load(), lineno=337, col_offset=17), [Name('s', Load(), lineno=337, col_offset=30)], [], None, None, lineno=337, col_offset=17), lineno=337, col_offset=8)], [Assign([Tuple([Name('tree', Store(), lineno=343, col_offset=9), Name('treedate', Store(), lineno=343, col_offset=15)], Store(), lineno=343, col_offset=9)], Call(Name('readlocallist', Load(), lineno=343, col_offset=27), [Name('treefile', Load(), lineno=343, col_offset=41)], [], None, None, lineno=343, col_offset=27), lineno=343, col_offset=8), If(Name('connected', Load(), lineno=344, col_offset=11), [Assign([Name('groups', Store(), lineno=345, col_offset=12)], Call(Name('getnewgroups', Load(), lineno=345, col_offset=21), [Name('s', Load(), lineno=345, col_offset=34), Name('treedate', Load(), lineno=345, col_offset=37)], [], None, None, lineno=345, col_offset=21), lineno=345, col_offset=12)], [], lineno=344, col_offset=8)], lineno=336, col_offset=4), If(Name('connected', Load(), lineno=347, col_offset=7), [Expr(Call(Name('addtotree', Load(), lineno=348, col_offset=8), [Name('tree', Load(), lineno=348, col_offset=18), Name('groups', Load(), lineno=348, col_offset=24)], [], None, None, lineno=348, col_offset=8), lineno=348, col_offset=8), Expr(Call(Name('writelocallist', Load(), lineno=349, col_offset=8), [Name('treefile', Load(), lineno=349, col_offset=23), Name('tree', Load(), lineno=349, col_offset=32)], [], None, None, lineno=349, col_offset=8), lineno=349, col_offset=8)], [], lineno=347, col_offset=4), Expr(Call(Name('readdesc', Load(), lineno=352, col_offset=4), [Name('descfile', Load(), lineno=352, col_offset=13)], [], None, None, lineno=352, col_offset=4), lineno=352, col_offset=4), Print(None, [Str('Creating pages...', lineno=354, col_offset=10)], True, lineno=354, col_offset=4), Expr(Call(Name('createpage', Load(), lineno=355, col_offset=4), [Name('rootpage', Load(), lineno=355, col_offset=15), Name('tree', Load(), lineno=355, col_offset=25), Str('', lineno=355, col_offset=31)], [], None, None, lineno=355, col_offset=4), lineno=355, col_offset=4), Print(None, [Str('Done', lineno=356, col_offset=10)], True, lineno=356, col_offset=4)], [], lineno=317, col_offset=0), If(Compare(Name('__name__', Load(), lineno=358, col_offset=3), [Eq()], [Str('__main__', lineno=358, col_offset=15)], lineno=358, col_offset=3), [Expr(Call(Name('main', Load(), lineno=359, col_offset=4), [], [], None, None, lineno=359, col_offset=4), lineno=359, col_offset=4)], [], lineno=358, col_offset=0)])
