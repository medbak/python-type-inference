Module([Import([alias('sys', None)], lineno=8, col_offset=0), ImportFrom('socket', [alias('*', None)], 0, lineno=9, col_offset=0), Import([alias('StringIO', None)], lineno=10, col_offset=0), Import([alias('traceback', None)], lineno=11, col_offset=0), Assign([Name('PORT', Store(), lineno=13, col_offset=0)], Num(4127, lineno=13, col_offset=7), lineno=13, col_offset=0), Assign([Name('BUFSIZE', Store(), lineno=14, col_offset=0)], Num(1024, lineno=14, col_offset=10), lineno=14, col_offset=0), FunctionDef('main', arguments([], None, None, []), [If(Compare(Call(Name('len', Load(), lineno=17, col_offset=7), [Attribute(Name('sys', Load(), lineno=17, col_offset=11), 'argv', Load(), lineno=17, col_offset=11)], [], None, None, lineno=17, col_offset=7), [Gt()], [Num(1, lineno=17, col_offset=23)], lineno=17, col_offset=7), [Assign([Name('port', Store(), lineno=18, col_offset=8)], Call(Name('int', Load(), lineno=18, col_offset=15), [Call(Name('eval', Load(), lineno=18, col_offset=19), [Subscript(Attribute(Name('sys', Load(), lineno=18, col_offset=24), 'argv', Load(), lineno=18, col_offset=24), Index(Num(1, lineno=18, col_offset=33)), Load(), lineno=18, col_offset=24)], [], None, None, lineno=18, col_offset=19)], [], None, None, lineno=18, col_offset=15), lineno=18, col_offset=8)], [Assign([Name('port', Store(), lineno=20, col_offset=8)], Name('PORT', Load(), lineno=20, col_offset=15), lineno=20, col_offset=8)], lineno=17, col_offset=4), Assign([Name('s', Store(), lineno=21, col_offset=4)], Call(Name('socket', Load(), lineno=21, col_offset=8), [Name('AF_INET', Load(), lineno=21, col_offset=15), Name('SOCK_STREAM', Load(), lineno=21, col_offset=24)], [], None, None, lineno=21, col_offset=8), lineno=21, col_offset=4), Expr(Call(Attribute(Name('s', Load(), lineno=22, col_offset=4), 'bind', Load(), lineno=22, col_offset=4), [Tuple([Str('', lineno=22, col_offset=12), Name('port', Load(), lineno=22, col_offset=16)], Load(), lineno=22, col_offset=12)], [], None, None, lineno=22, col_offset=4), lineno=22, col_offset=4), Expr(Call(Attribute(Name('s', Load(), lineno=23, col_offset=4), 'listen', Load(), lineno=23, col_offset=4), [Num(1, lineno=23, col_offset=13)], [], None, None, lineno=23, col_offset=4), lineno=23, col_offset=4), While(Num(1, lineno=24, col_offset=10), [Assign([Tuple([Name('conn', Store(), lineno=25, col_offset=8), Tuple([Name('remotehost', Store(), lineno=25, col_offset=15), Name('remoteport', Store(), lineno=25, col_offset=27)], Store(), lineno=25, col_offset=15)], Store(), lineno=25, col_offset=8)], Call(Attribute(Name('s', Load(), lineno=25, col_offset=41), 'accept', Load(), lineno=25, col_offset=41), [], [], None, None, lineno=25, col_offset=41), lineno=25, col_offset=8), Print(None, [Str('connected by', lineno=26, col_offset=14), Name('remotehost', Load(), lineno=26, col_offset=30), Name('remoteport', Load(), lineno=26, col_offset=42)], True, lineno=26, col_offset=8), Assign([Name('request', Store(), lineno=27, col_offset=8)], Str('', lineno=27, col_offset=18), lineno=27, col_offset=8), While(Num(1, lineno=28, col_offset=14), [Assign([Name('data', Store(), lineno=29, col_offset=12)], Call(Attribute(Name('conn', Load(), lineno=29, col_offset=19), 'recv', Load(), lineno=29, col_offset=19), [Name('BUFSIZE', Load(), lineno=29, col_offset=29)], [], None, None, lineno=29, col_offset=19), lineno=29, col_offset=12), If(UnaryOp(Not(), Name('data', Load(), lineno=30, col_offset=19), lineno=30, col_offset=15), [Break( lineno=31, col_offset=16)], [], lineno=30, col_offset=12), Assign([Name('request', Store(), lineno=32, col_offset=12)], BinOp(Name('request', Load(), lineno=32, col_offset=22), Add(), Name('data', Load(), lineno=32, col_offset=32), lineno=32, col_offset=22), lineno=32, col_offset=12)], [], lineno=28, col_offset=8), Assign([Name('reply', Store(), lineno=33, col_offset=8)], Call(Name('execute', Load(), lineno=33, col_offset=16), [Name('request', Load(), lineno=33, col_offset=24)], [], None, None, lineno=33, col_offset=16), lineno=33, col_offset=8), Expr(Call(Attribute(Name('conn', Load(), lineno=34, col_offset=8), 'send', Load(), lineno=34, col_offset=8), [Name('reply', Load(), lineno=34, col_offset=18)], [], None, None, lineno=34, col_offset=8), lineno=34, col_offset=8), Expr(Call(Attribute(Name('conn', Load(), lineno=35, col_offset=8), 'close', Load(), lineno=35, col_offset=8), [], [], None, None, lineno=35, col_offset=8), lineno=35, col_offset=8)], [], lineno=24, col_offset=4)], [], lineno=16, col_offset=0), FunctionDef('execute', arguments([Name('request', Param(), lineno=37, col_offset=12)], None, None, []), [Assign([Name('stdout', Store(), lineno=38, col_offset=4)], Attribute(Name('sys', Load(), lineno=38, col_offset=13), 'stdout', Load(), lineno=38, col_offset=13), lineno=38, col_offset=4), Assign([Name('stderr', Store(), lineno=39, col_offset=4)], Attribute(Name('sys', Load(), lineno=39, col_offset=13), 'stderr', Load(), lineno=39, col_offset=13), lineno=39, col_offset=4), Assign([Attribute(Name('sys', Load(), lineno=40, col_offset=4), 'stdout', Store(), lineno=40, col_offset=4), Attribute(Name('sys', Load(), lineno=40, col_offset=17), 'stderr', Store(), lineno=40, col_offset=17), Name('fakefile', Store(), lineno=40, col_offset=30)], Call(Attribute(Name('StringIO', Load(), lineno=40, col_offset=41), 'StringIO', Load(), lineno=40, col_offset=41), [], [], None, None, lineno=40, col_offset=41), lineno=40, col_offset=4), TryFinally([TryExcept([Exec(Name('request', Load(), lineno=43, col_offset=17), Dict([], [], lineno=43, col_offset=28), Dict([], [], lineno=43, col_offset=32), lineno=43, col_offset=12)], [ExceptHandler(None, None, [Print(None, [], True, lineno=45, col_offset=12), Expr(Call(Attribute(Name('traceback', Load(), lineno=46, col_offset=12), 'print_exc', Load(), lineno=46, col_offset=12), [Num(100, lineno=46, col_offset=32)], [], None, None, lineno=46, col_offset=12), lineno=46, col_offset=12)], lineno=44, col_offset=8)], [], lineno=42, col_offset=8)], [Assign([Attribute(Name('sys', Load(), lineno=48, col_offset=8), 'stderr', Store(), lineno=48, col_offset=8)], Name('stderr', Load(), lineno=48, col_offset=21), lineno=48, col_offset=8), Assign([Attribute(Name('sys', Load(), lineno=49, col_offset=8), 'stdout', Store(), lineno=49, col_offset=8)], Name('stdout', Load(), lineno=49, col_offset=21), lineno=49, col_offset=8)], lineno=41, col_offset=4), Return(Call(Attribute(Name('fakefile', Load(), lineno=50, col_offset=11), 'getvalue', Load(), lineno=50, col_offset=11), [], [], None, None, lineno=50, col_offset=11), lineno=50, col_offset=4)], [], lineno=37, col_offset=0), Expr(Call(Name('main', Load(), lineno=52, col_offset=0), [], [], None, None, lineno=52, col_offset=0), lineno=52, col_offset=0)])
