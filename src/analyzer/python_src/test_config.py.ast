Module([Expr(Str('Tests for distutils.pypirc.pypirc.', lineno=1, col_offset=0), lineno=1, col_offset=0), Import([alias('sys', None)], lineno=2, col_offset=0), Import([alias('os', None)], lineno=3, col_offset=0), Import([alias('unittest', None)], lineno=4, col_offset=0), Import([alias('tempfile', None)], lineno=5, col_offset=0), Import([alias('shutil', None)], lineno=6, col_offset=0), ImportFrom('distutils.core', [alias('PyPIRCCommand', None)], 0, lineno=8, col_offset=0), ImportFrom('distutils.core', [alias('Distribution', None)], 0, lineno=9, col_offset=0), ImportFrom('distutils.log', [alias('set_threshold', None)], 0, lineno=10, col_offset=0), ImportFrom('distutils.log', [alias('WARN', None)], 0, lineno=11, col_offset=0), ImportFrom('distutils.tests', [alias('support', None)], 0, lineno=13, col_offset=0), Assign([Name('PYPIRC', Store(), lineno=15, col_offset=0)], Str('[distutils]\n\nindex-servers =\n    server1\n    server2\n\n[server1]\nusername:me\npassword:secret\n\n[server2]\nusername:meagain\npassword: secret\nrealm:acme\nrepository:http://another.pypi/\n', lineno=31, col_offset=-1), lineno=15, col_offset=0), Assign([Name('PYPIRC_OLD', Store(), lineno=33, col_offset=0)], Str('[server-login]\nusername:tarek\npassword:secret\n', lineno=37, col_offset=-1), lineno=33, col_offset=0), Assign([Name('WANTED', Store(), lineno=39, col_offset=0)], Str('[distutils]\nindex-servers =\n    pypi\n\n[pypi]\nusername:tarek\npassword:xxx\n', lineno=47, col_offset=-1), lineno=39, col_offset=0), ClassDef('PyPIRCCommandTestCase', [Attribute(Name('support', Load(), lineno=50, col_offset=28), 'TempdirManager', Load(), lineno=50, col_offset=28), Attribute(Name('support', Load(), lineno=51, col_offset=28), 'LoggingSilencer', Load(), lineno=51, col_offset=28), Attribute(Name('support', Load(), lineno=52, col_offset=28), 'EnvironGuard', Load(), lineno=52, col_offset=28), Attribute(Name('unittest', Load(), lineno=53, col_offset=28), 'TestCase', Load(), lineno=53, col_offset=28)], [FunctionDef('setUp', arguments([Name('self', Param(), lineno=55, col_offset=14)], None, None, []), [Expr(Str('Patches the environment.', lineno=56, col_offset=8), lineno=56, col_offset=8), Expr(Call(Attribute(Call(Name('super', Load(), lineno=57, col_offset=8), [Name('PyPIRCCommandTestCase', Load(), lineno=57, col_offset=14), Name('self', Load(), lineno=57, col_offset=37)], [], None, None, lineno=57, col_offset=8), 'setUp', Load(), lineno=57, col_offset=8), [], [], None, None, lineno=57, col_offset=8), lineno=57, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=58, col_offset=8), 'tmp_dir', Store(), lineno=58, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=58, col_offset=23), 'mkdtemp', Load(), lineno=58, col_offset=23), [], [], None, None, lineno=58, col_offset=23), lineno=58, col_offset=8), Assign([Subscript(Attribute(Name('os', Load(), lineno=59, col_offset=8), 'environ', Load(), lineno=59, col_offset=8), Index(Str('HOME', lineno=59, col_offset=19)), Store(), lineno=59, col_offset=8)], Attribute(Name('self', Load(), lineno=59, col_offset=29), 'tmp_dir', Load(), lineno=59, col_offset=29), lineno=59, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=60, col_offset=8), 'rc', Store(), lineno=60, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=60, col_offset=18), 'path', Load(), lineno=60, col_offset=18), 'join', Load(), lineno=60, col_offset=18), [Attribute(Name('self', Load(), lineno=60, col_offset=31), 'tmp_dir', Load(), lineno=60, col_offset=31), Str('.pypirc', lineno=60, col_offset=45)], [], None, None, lineno=60, col_offset=18), lineno=60, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=61, col_offset=8), 'dist', Store(), lineno=61, col_offset=8)], Call(Name('Distribution', Load(), lineno=61, col_offset=20), [], [], None, None, lineno=61, col_offset=20), lineno=61, col_offset=8), ClassDef('command', [Name('PyPIRCCommand', Load(), lineno=63, col_offset=22)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=64, col_offset=25), Name('dist', Param(), lineno=64, col_offset=31)], None, None, []), [Expr(Call(Attribute(Name('PyPIRCCommand', Load(), lineno=65, col_offset=16), '__init__', Load(), lineno=65, col_offset=16), [Name('self', Load(), lineno=65, col_offset=39), Name('dist', Load(), lineno=65, col_offset=45)], [], None, None, lineno=65, col_offset=16), lineno=65, col_offset=16)], [], lineno=64, col_offset=12), FunctionDef('initialize_options', arguments([Name('self', Param(), lineno=66, col_offset=35)], None, None, []), [Pass( lineno=67, col_offset=16)], [], lineno=66, col_offset=12), Assign([Name('finalize_options', Store(), lineno=68, col_offset=12)], Name('initialize_options', Load(), lineno=68, col_offset=31), lineno=68, col_offset=12)], [], lineno=63, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=70, col_offset=8), '_cmd', Store(), lineno=70, col_offset=8)], Name('command', Load(), lineno=70, col_offset=20), lineno=70, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=71, col_offset=8), 'old_threshold', Store(), lineno=71, col_offset=8)], Call(Name('set_threshold', Load(), lineno=71, col_offset=29), [Name('WARN', Load(), lineno=71, col_offset=43)], [], None, None, lineno=71, col_offset=29), lineno=71, col_offset=8)], [], lineno=55, col_offset=4), FunctionDef('tearDown', arguments([Name('self', Param(), lineno=73, col_offset=17)], None, None, []), [Expr(Str('Removes the patch.', lineno=74, col_offset=8), lineno=74, col_offset=8), Expr(Call(Name('set_threshold', Load(), lineno=75, col_offset=8), [Attribute(Name('self', Load(), lineno=75, col_offset=22), 'old_threshold', Load(), lineno=75, col_offset=22)], [], None, None, lineno=75, col_offset=8), lineno=75, col_offset=8), Expr(Call(Attribute(Call(Name('super', Load(), lineno=76, col_offset=8), [Name('PyPIRCCommandTestCase', Load(), lineno=76, col_offset=14), Name('self', Load(), lineno=76, col_offset=37)], [], None, None, lineno=76, col_offset=8), 'tearDown', Load(), lineno=76, col_offset=8), [], [], None, None, lineno=76, col_offset=8), lineno=76, col_offset=8)], [], lineno=73, col_offset=4), FunctionDef('test_server_registration', arguments([Name('self', Param(), lineno=78, col_offset=33)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=84, col_offset=8), 'write_file', Load(), lineno=84, col_offset=8), [Attribute(Name('self', Load(), lineno=84, col_offset=24), 'rc', Load(), lineno=84, col_offset=24), Name('PYPIRC', Load(), lineno=84, col_offset=33)], [], None, None, lineno=84, col_offset=8), lineno=84, col_offset=8), Assign([Name('cmd', Store(), lineno=85, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=85, col_offset=14), '_cmd', Load(), lineno=85, col_offset=14), [Attribute(Name('self', Load(), lineno=85, col_offset=24), 'dist', Load(), lineno=85, col_offset=24)], [], None, None, lineno=85, col_offset=14), lineno=85, col_offset=8), Assign([Name('config', Store(), lineno=86, col_offset=8)], Call(Attribute(Name('cmd', Load(), lineno=86, col_offset=17), '_read_pypirc', Load(), lineno=86, col_offset=17), [], [], None, None, lineno=86, col_offset=17), lineno=86, col_offset=8), Assign([Name('config', Store(), lineno=88, col_offset=8)], Call(Attribute(Name('config', Load(), lineno=88, col_offset=17), 'items', Load(), lineno=88, col_offset=17), [], [], None, None, lineno=88, col_offset=17), lineno=88, col_offset=8), Expr(Call(Attribute(Name('config', Load(), lineno=89, col_offset=8), 'sort', Load(), lineno=89, col_offset=8), [], [], None, None, lineno=89, col_offset=8), lineno=89, col_offset=8), Assign([Name('waited', Store(), lineno=90, col_offset=8)], List([Tuple([Str('password', lineno=90, col_offset=19), Str('secret', lineno=90, col_offset=31)], Load(), lineno=90, col_offset=19), Tuple([Str('realm', lineno=90, col_offset=43), Str('pypi', lineno=90, col_offset=52)], Load(), lineno=90, col_offset=43), Tuple([Str('repository', lineno=91, col_offset=19), Str('http://pypi.python.org/pypi', lineno=91, col_offset=33)], Load(), lineno=91, col_offset=19), Tuple([Str('server', lineno=92, col_offset=19), Str('server1', lineno=92, col_offset=29)], Load(), lineno=92, col_offset=19), Tuple([Str('username', lineno=92, col_offset=42), Str('me', lineno=92, col_offset=54)], Load(), lineno=92, col_offset=42)], Load(), lineno=90, col_offset=17), lineno=90, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=93, col_offset=8), 'assertEqual', Load(), lineno=93, col_offset=8), [Name('config', Load(), lineno=93, col_offset=25), Name('waited', Load(), lineno=93, col_offset=33)], [], None, None, lineno=93, col_offset=8), lineno=93, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=96, col_offset=8), 'write_file', Load(), lineno=96, col_offset=8), [Attribute(Name('self', Load(), lineno=96, col_offset=24), 'rc', Load(), lineno=96, col_offset=24), Name('PYPIRC_OLD', Load(), lineno=96, col_offset=33)], [], None, None, lineno=96, col_offset=8), lineno=96, col_offset=8), Assign([Name('config', Store(), lineno=97, col_offset=8)], Call(Attribute(Name('cmd', Load(), lineno=97, col_offset=17), '_read_pypirc', Load(), lineno=97, col_offset=17), [], [], None, None, lineno=97, col_offset=17), lineno=97, col_offset=8), Assign([Name('config', Store(), lineno=98, col_offset=8)], Call(Attribute(Name('config', Load(), lineno=98, col_offset=17), 'items', Load(), lineno=98, col_offset=17), [], [], None, None, lineno=98, col_offset=17), lineno=98, col_offset=8), Expr(Call(Attribute(Name('config', Load(), lineno=99, col_offset=8), 'sort', Load(), lineno=99, col_offset=8), [], [], None, None, lineno=99, col_offset=8), lineno=99, col_offset=8), Assign([Name('waited', Store(), lineno=100, col_offset=8)], List([Tuple([Str('password', lineno=100, col_offset=19), Str('secret', lineno=100, col_offset=31)], Load(), lineno=100, col_offset=19), Tuple([Str('realm', lineno=100, col_offset=43), Str('pypi', lineno=100, col_offset=52)], Load(), lineno=100, col_offset=43), Tuple([Str('repository', lineno=101, col_offset=19), Str('http://pypi.python.org/pypi', lineno=101, col_offset=33)], Load(), lineno=101, col_offset=19), Tuple([Str('server', lineno=102, col_offset=19), Str('server-login', lineno=102, col_offset=29)], Load(), lineno=102, col_offset=19), Tuple([Str('username', lineno=102, col_offset=47), Str('tarek', lineno=102, col_offset=59)], Load(), lineno=102, col_offset=47)], Load(), lineno=100, col_offset=17), lineno=100, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=103, col_offset=8), 'assertEqual', Load(), lineno=103, col_offset=8), [Name('config', Load(), lineno=103, col_offset=25), Name('waited', Load(), lineno=103, col_offset=33)], [], None, None, lineno=103, col_offset=8), lineno=103, col_offset=8)], [], lineno=78, col_offset=4), FunctionDef('test_server_empty_registration', arguments([Name('self', Param(), lineno=105, col_offset=39)], None, None, []), [Assign([Name('cmd', Store(), lineno=106, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=106, col_offset=14), '_cmd', Load(), lineno=106, col_offset=14), [Attribute(Name('self', Load(), lineno=106, col_offset=24), 'dist', Load(), lineno=106, col_offset=24)], [], None, None, lineno=106, col_offset=14), lineno=106, col_offset=8), Assign([Name('rc', Store(), lineno=107, col_offset=8)], Call(Attribute(Name('cmd', Load(), lineno=107, col_offset=13), '_get_rc_file', Load(), lineno=107, col_offset=13), [], [], None, None, lineno=107, col_offset=13), lineno=107, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=108, col_offset=8), 'assertTrue', Load(), lineno=108, col_offset=8), [UnaryOp(Not(), Call(Attribute(Attribute(Name('os', Load(), lineno=108, col_offset=28), 'path', Load(), lineno=108, col_offset=28), 'exists', Load(), lineno=108, col_offset=28), [Name('rc', Load(), lineno=108, col_offset=43)], [], None, None, lineno=108, col_offset=28), lineno=108, col_offset=24)], [], None, None, lineno=108, col_offset=8), lineno=108, col_offset=8), Expr(Call(Attribute(Name('cmd', Load(), lineno=109, col_offset=8), '_store_pypirc', Load(), lineno=109, col_offset=8), [Str('tarek', lineno=109, col_offset=26), Str('xxx', lineno=109, col_offset=35)], [], None, None, lineno=109, col_offset=8), lineno=109, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=110, col_offset=8), 'assertTrue', Load(), lineno=110, col_offset=8), [Call(Attribute(Attribute(Name('os', Load(), lineno=110, col_offset=24), 'path', Load(), lineno=110, col_offset=24), 'exists', Load(), lineno=110, col_offset=24), [Name('rc', Load(), lineno=110, col_offset=39)], [], None, None, lineno=110, col_offset=24)], [], None, None, lineno=110, col_offset=8), lineno=110, col_offset=8), Assign([Name('f', Store(), lineno=111, col_offset=8)], Call(Name('open', Load(), lineno=111, col_offset=12), [Name('rc', Load(), lineno=111, col_offset=17)], [], None, None, lineno=111, col_offset=12), lineno=111, col_offset=8), TryFinally([Assign([Name('content', Store(), lineno=113, col_offset=12)], Call(Attribute(Name('f', Load(), lineno=113, col_offset=22), 'read', Load(), lineno=113, col_offset=22), [], [], None, None, lineno=113, col_offset=22), lineno=113, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=114, col_offset=12), 'assertEqual', Load(), lineno=114, col_offset=12), [Name('content', Load(), lineno=114, col_offset=29), Name('WANTED', Load(), lineno=114, col_offset=38)], [], None, None, lineno=114, col_offset=12), lineno=114, col_offset=12)], [Expr(Call(Attribute(Name('f', Load(), lineno=116, col_offset=12), 'close', Load(), lineno=116, col_offset=12), [], [], None, None, lineno=116, col_offset=12), lineno=116, col_offset=12)], lineno=112, col_offset=8)], [], lineno=105, col_offset=4)], [], lineno=50, col_offset=0), FunctionDef('test_suite', arguments([], None, None, []), [Return(Call(Attribute(Name('unittest', Load(), lineno=119, col_offset=11), 'makeSuite', Load(), lineno=119, col_offset=11), [Name('PyPIRCCommandTestCase', Load(), lineno=119, col_offset=30)], [], None, None, lineno=119, col_offset=11), lineno=119, col_offset=4)], [], lineno=118, col_offset=0), If(Compare(Name('__name__', Load(), lineno=121, col_offset=3), [Eq()], [Str('__main__', lineno=121, col_offset=15)], lineno=121, col_offset=3), [Expr(Call(Attribute(Name('unittest', Load(), lineno=122, col_offset=4), 'main', Load(), lineno=122, col_offset=4), [], [keyword('defaultTest', Str('test_suite', lineno=122, col_offset=30))], None, None, lineno=122, col_offset=4), lineno=122, col_offset=4)], [], lineno=121, col_offset=0)])
