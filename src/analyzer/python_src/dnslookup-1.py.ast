Module([Expr(Str('Sample program performing domain name lookups and showing off EasyDialogs,\nRes and Dlg in the process', lineno=2, col_offset=-1), lineno=2, col_offset=-1), Import([alias('EasyDialogs', None)], lineno=4, col_offset=0), ImportFrom('Carbon', [alias('Res', None)], 0, lineno=5, col_offset=0), ImportFrom('Carbon', [alias('Dlg', None)], 0, lineno=6, col_offset=0), Import([alias('socket', None)], lineno=7, col_offset=0), Import([alias('string', None)], lineno=8, col_offset=0), Import([alias('macresource', None)], lineno=9, col_offset=0), Assign([Name('ID_MAIN', Store(), lineno=12, col_offset=0)], Num(512, lineno=12, col_offset=8), lineno=12, col_offset=0), Assign([Name('ITEM_LOOKUP_ENTRY', Store(), lineno=14, col_offset=0)], Num(1, lineno=14, col_offset=18), lineno=14, col_offset=0), Assign([Name('ITEM_RESULT', Store(), lineno=15, col_offset=0)], Num(2, lineno=15, col_offset=12), lineno=15, col_offset=0), Assign([Name('ITEM_LOOKUP_BUTTON', Store(), lineno=16, col_offset=0)], Num(3, lineno=16, col_offset=19), lineno=16, col_offset=0), Assign([Name('ITEM_QUIT_BUTTON', Store(), lineno=17, col_offset=0)], Num(4, lineno=17, col_offset=17), lineno=17, col_offset=0), FunctionDef('main', arguments([], None, None, []), [Expr(Str('Main routine: open resource file, call dialog handler', lineno=20, col_offset=4), lineno=20, col_offset=4), Expr(Call(Attribute(Name('macresource', Load(), lineno=21, col_offset=4), 'need', Load(), lineno=21, col_offset=4), [Str('DLOG', lineno=21, col_offset=21), Name('ID_MAIN', Load(), lineno=21, col_offset=29), Str('dnslookup-1.rsrc', lineno=21, col_offset=38)], [], None, None, lineno=21, col_offset=4), lineno=21, col_offset=4), Expr(Call(Name('do_dialog', Load(), lineno=22, col_offset=4), [], [], None, None, lineno=22, col_offset=4), lineno=22, col_offset=4)], [], lineno=19, col_offset=0), FunctionDef('do_dialog', arguments([], None, None, []), [Expr(Str('Post dialog and handle user interaction until quit', lineno=25, col_offset=4), lineno=25, col_offset=4), Assign([Name('my_dlg', Store(), lineno=26, col_offset=4)], Call(Attribute(Name('Dlg', Load(), lineno=26, col_offset=13), 'GetNewDialog', Load(), lineno=26, col_offset=13), [Name('ID_MAIN', Load(), lineno=26, col_offset=30), Num(-1, lineno=26, col_offset=40)], [], None, None, lineno=26, col_offset=13), lineno=26, col_offset=4), While(Num(1, lineno=27, col_offset=10), [Assign([Name('n', Store(), lineno=28, col_offset=8)], Call(Attribute(Name('Dlg', Load(), lineno=28, col_offset=12), 'ModalDialog', Load(), lineno=28, col_offset=12), [Name('None', Load(), lineno=28, col_offset=28)], [], None, None, lineno=28, col_offset=12), lineno=28, col_offset=8), If(Compare(Name('n', Load(), lineno=29, col_offset=11), [Eq()], [Name('ITEM_LOOKUP_BUTTON', Load(), lineno=29, col_offset=16)], lineno=29, col_offset=11), [Assign([Tuple([Name('tp', Store(), lineno=30, col_offset=12), Name('h', Store(), lineno=30, col_offset=16), Name('rect', Store(), lineno=30, col_offset=19)], Store(), lineno=30, col_offset=12)], Call(Attribute(Name('my_dlg', Load(), lineno=30, col_offset=26), 'GetDialogItem', Load(), lineno=30, col_offset=26), [Name('ITEM_LOOKUP_ENTRY', Load(), lineno=30, col_offset=47)], [], None, None, lineno=30, col_offset=26), lineno=30, col_offset=12), Assign([Name('txt', Store(), lineno=31, col_offset=12)], Call(Attribute(Name('Dlg', Load(), lineno=31, col_offset=18), 'GetDialogItemText', Load(), lineno=31, col_offset=18), [Name('h', Load(), lineno=31, col_offset=40)], [], None, None, lineno=31, col_offset=18), lineno=31, col_offset=12), Assign([Tuple([Name('tp', Store(), lineno=33, col_offset=12), Name('h', Store(), lineno=33, col_offset=16), Name('rect', Store(), lineno=33, col_offset=19)], Store(), lineno=33, col_offset=12)], Call(Attribute(Name('my_dlg', Load(), lineno=33, col_offset=26), 'GetDialogItem', Load(), lineno=33, col_offset=26), [Name('ITEM_RESULT', Load(), lineno=33, col_offset=47)], [], None, None, lineno=33, col_offset=26), lineno=33, col_offset=12), Expr(Call(Attribute(Name('Dlg', Load(), lineno=34, col_offset=12), 'SetDialogItemText', Load(), lineno=34, col_offset=12), [Name('h', Load(), lineno=34, col_offset=34), Call(Name('dnslookup', Load(), lineno=34, col_offset=37), [Name('txt', Load(), lineno=34, col_offset=47)], [], None, None, lineno=34, col_offset=37)], [], None, None, lineno=34, col_offset=12), lineno=34, col_offset=12)], [If(Compare(Name('n', Load(), lineno=35, col_offset=13), [Eq()], [Name('ITEM_QUIT_BUTTON', Load(), lineno=35, col_offset=18)], lineno=35, col_offset=13), [Break( lineno=36, col_offset=12)], [], lineno=35, col_offset=13)], lineno=29, col_offset=8)], [], lineno=27, col_offset=4)], [], lineno=24, col_offset=0), FunctionDef('dnslookup', arguments([Name('str', Param(), lineno=38, col_offset=14)], None, None, []), [Expr(Str(' Perform DNS lookup on str.  If first character of digit is numeric,\n        assume that str contains an IP address.  Otherwise, assume that str\n        contains a hostname.', lineno=41, col_offset=-1), lineno=41, col_offset=-1), If(Compare(Name('str', Load(), lineno=42, col_offset=7), [Eq()], [Str('', lineno=42, col_offset=14)], lineno=42, col_offset=7), [Assign([Name('str', Store(), lineno=42, col_offset=18)], Str(' ', lineno=42, col_offset=24), lineno=42, col_offset=18)], [], lineno=42, col_offset=4), If(Compare(Subscript(Name('str', Load(), lineno=43, col_offset=7), Index(Num(0, lineno=43, col_offset=11)), Load(), lineno=43, col_offset=7), [In()], [Attribute(Name('string', Load(), lineno=43, col_offset=17), 'digits', Load(), lineno=43, col_offset=17)], lineno=43, col_offset=7), [TryExcept([Assign([Name('value', Store(), lineno=45, col_offset=12)], Subscript(Call(Attribute(Name('socket', Load(), lineno=45, col_offset=20), 'gethostbyaddr', Load(), lineno=45, col_offset=20), [Name('str', Load(), lineno=45, col_offset=41)], [], None, None, lineno=45, col_offset=20), Index(Num(0, lineno=45, col_offset=46)), Load(), lineno=45, col_offset=20), lineno=45, col_offset=12)], [ExceptHandler(None, None, [Assign([Name('value', Store(), lineno=47, col_offset=12)], Str('Lookup failed', lineno=47, col_offset=20), lineno=47, col_offset=12)], lineno=46, col_offset=8)], [], lineno=44, col_offset=8)], [TryExcept([Assign([Name('value', Store(), lineno=50, col_offset=12)], Call(Attribute(Name('socket', Load(), lineno=50, col_offset=20), 'gethostbyname', Load(), lineno=50, col_offset=20), [Name('str', Load(), lineno=50, col_offset=41)], [], None, None, lineno=50, col_offset=20), lineno=50, col_offset=12)], [ExceptHandler(None, None, [Assign([Name('value', Store(), lineno=52, col_offset=12)], Str('Lookup failed', lineno=52, col_offset=20), lineno=52, col_offset=12)], lineno=51, col_offset=8)], [], lineno=49, col_offset=8)], lineno=43, col_offset=4), Return(Name('value', Load(), lineno=53, col_offset=11), lineno=53, col_offset=4)], [], lineno=38, col_offset=0), Expr(Call(Name('main', Load(), lineno=55, col_offset=0), [], [], None, None, lineno=55, col_offset=0), lineno=55, col_offset=0)])
