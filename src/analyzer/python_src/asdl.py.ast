Module([Expr(Str("An implementation of the Zephyr Abstract Syntax Definition Language.\n\nSee http://asdl.sourceforge.net/ and\nhttp://www.cs.princeton.edu/research/techreps/TR-554-97\n\nOnly supports top level module decl, not view.  I'm guessing that view\nis intended to support the browser and I'm not interested in the\nbrowser.\n\nChanges for Python: Add support for module versions\n", lineno=11, col_offset=-1), lineno=11, col_offset=-1), Import([alias('os', None)], lineno=13, col_offset=0), Import([alias('traceback', None)], lineno=14, col_offset=0), Import([alias('spark', None)], lineno=16, col_offset=0), ClassDef('Token', [Name('object', Load(), lineno=18, col_offset=12)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=21, col_offset=17), Name('type', Param(), lineno=21, col_offset=23), Name('lineno', Param(), lineno=21, col_offset=29)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=22, col_offset=8), 'type', Store(), lineno=22, col_offset=8)], Name('type', Load(), lineno=22, col_offset=20), lineno=22, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=23, col_offset=8), 'lineno', Store(), lineno=23, col_offset=8)], Name('lineno', Load(), lineno=23, col_offset=22), lineno=23, col_offset=8)], [], lineno=21, col_offset=4), FunctionDef('__str__', arguments([Name('self', Param(), lineno=25, col_offset=16)], None, None, []), [Return(Attribute(Name('self', Load(), lineno=26, col_offset=15), 'type', Load(), lineno=26, col_offset=15), lineno=26, col_offset=8)], [], lineno=25, col_offset=4), FunctionDef('__repr__', arguments([Name('self', Param(), lineno=28, col_offset=17)], None, None, []), [Return(Call(Name('str', Load(), lineno=29, col_offset=15), [Name('self', Load(), lineno=29, col_offset=19)], [], None, None, lineno=29, col_offset=15), lineno=29, col_offset=8)], [], lineno=28, col_offset=4)], [], lineno=18, col_offset=0), ClassDef('Id', [Name('Token', Load(), lineno=31, col_offset=9)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=32, col_offset=17), Name('value', Param(), lineno=32, col_offset=23), Name('lineno', Param(), lineno=32, col_offset=30)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=33, col_offset=8), 'type', Store(), lineno=33, col_offset=8)], Str('Id', lineno=33, col_offset=20), lineno=33, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=34, col_offset=8), 'value', Store(), lineno=34, col_offset=8)], Name('value', Load(), lineno=34, col_offset=21), lineno=34, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=35, col_offset=8), 'lineno', Store(), lineno=35, col_offset=8)], Name('lineno', Load(), lineno=35, col_offset=22), lineno=35, col_offset=8)], [], lineno=32, col_offset=4), FunctionDef('__str__', arguments([Name('self', Param(), lineno=37, col_offset=16)], None, None, []), [Return(Attribute(Name('self', Load(), lineno=38, col_offset=15), 'value', Load(), lineno=38, col_offset=15), lineno=38, col_offset=8)], [], lineno=37, col_offset=4)], [], lineno=31, col_offset=0), ClassDef('String', [Name('Token', Load(), lineno=40, col_offset=13)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=41, col_offset=17), Name('value', Param(), lineno=41, col_offset=23), Name('lineno', Param(), lineno=41, col_offset=30)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=42, col_offset=8), 'type', Store(), lineno=42, col_offset=8)], Str('String', lineno=42, col_offset=20), lineno=42, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=43, col_offset=8), 'value', Store(), lineno=43, col_offset=8)], Name('value', Load(), lineno=43, col_offset=21), lineno=43, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=44, col_offset=8), 'lineno', Store(), lineno=44, col_offset=8)], Name('lineno', Load(), lineno=44, col_offset=22), lineno=44, col_offset=8)], [], lineno=41, col_offset=4)], [], lineno=40, col_offset=0), ClassDef('ASDLSyntaxError', [Name('Exception', Load(), lineno=46, col_offset=22)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=48, col_offset=17), Name('lineno', Param(), lineno=48, col_offset=23), Name('token', Param(), lineno=48, col_offset=31), Name('msg', Param(), lineno=48, col_offset=43)], None, None, [Name('None', Load(), lineno=48, col_offset=37), Name('None', Load(), lineno=48, col_offset=47)]), [Assign([Attribute(Name('self', Load(), lineno=49, col_offset=8), 'lineno', Store(), lineno=49, col_offset=8)], Name('lineno', Load(), lineno=49, col_offset=22), lineno=49, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=50, col_offset=8), 'token', Store(), lineno=50, col_offset=8)], Name('token', Load(), lineno=50, col_offset=21), lineno=50, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=51, col_offset=8), 'msg', Store(), lineno=51, col_offset=8)], Name('msg', Load(), lineno=51, col_offset=19), lineno=51, col_offset=8)], [], lineno=48, col_offset=4), FunctionDef('__str__', arguments([Name('self', Param(), lineno=53, col_offset=16)], None, None, []), [If(Compare(Attribute(Name('self', Load(), lineno=54, col_offset=11), 'msg', Load(), lineno=54, col_offset=11), [Is()], [Name('None', Load(), lineno=54, col_offset=23)], lineno=54, col_offset=11), [Return(BinOp(Str("Error at '%s', line %d", lineno=55, col_offset=19), Mod(), Tuple([Attribute(Name('self', Load(), lineno=55, col_offset=47), 'token', Load(), lineno=55, col_offset=47), Attribute(Name('self', Load(), lineno=55, col_offset=59), 'lineno', Load(), lineno=55, col_offset=59)], Load(), lineno=55, col_offset=47), lineno=55, col_offset=19), lineno=55, col_offset=12)], [Return(BinOp(Str('%s, line %d', lineno=57, col_offset=19), Mod(), Tuple([Attribute(Name('self', Load(), lineno=57, col_offset=36), 'msg', Load(), lineno=57, col_offset=36), Attribute(Name('self', Load(), lineno=57, col_offset=46), 'lineno', Load(), lineno=57, col_offset=46)], Load(), lineno=57, col_offset=36), lineno=57, col_offset=19), lineno=57, col_offset=12)], lineno=54, col_offset=8)], [], lineno=53, col_offset=4)], [], lineno=46, col_offset=0), ClassDef('ASDLScanner', [Attribute(Name('spark', Load(), lineno=59, col_offset=18), 'GenericScanner', Load(), lineno=59, col_offset=18), Name('object', Load(), lineno=59, col_offset=40)], [FunctionDef('tokenize', arguments([Name('self', Param(), lineno=61, col_offset=17), Name('input', Param(), lineno=61, col_offset=23)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=62, col_offset=8), 'rv', Store(), lineno=62, col_offset=8)], List([], Load(), lineno=62, col_offset=18), lineno=62, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=63, col_offset=8), 'lineno', Store(), lineno=63, col_offset=8)], Num(1, lineno=63, col_offset=22), lineno=63, col_offset=8), Expr(Call(Attribute(Call(Name('super', Load(), lineno=64, col_offset=8), [Name('ASDLScanner', Load(), lineno=64, col_offset=14), Name('self', Load(), lineno=64, col_offset=27)], [], None, None, lineno=64, col_offset=8), 'tokenize', Load(), lineno=64, col_offset=8), [Name('input', Load(), lineno=64, col_offset=42)], [], None, None, lineno=64, col_offset=8), lineno=64, col_offset=8), Return(Attribute(Name('self', Load(), lineno=65, col_offset=15), 'rv', Load(), lineno=65, col_offset=15), lineno=65, col_offset=8)], [], lineno=61, col_offset=4), FunctionDef('t_id', arguments([Name('self', Param(), lineno=67, col_offset=13), Name('s', Param(), lineno=67, col_offset=19)], None, None, []), [Expr(Str('[\\w\\.]+', lineno=68, col_offset=8), lineno=68, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=71, col_offset=8), 'rv', Load(), lineno=71, col_offset=8), 'append', Load(), lineno=71, col_offset=8), [Call(Name('Id', Load(), lineno=71, col_offset=23), [Name('s', Load(), lineno=71, col_offset=26), Attribute(Name('self', Load(), lineno=71, col_offset=29), 'lineno', Load(), lineno=71, col_offset=29)], [], None, None, lineno=71, col_offset=23)], [], None, None, lineno=71, col_offset=8), lineno=71, col_offset=8)], [], lineno=67, col_offset=4), FunctionDef('t_string', arguments([Name('self', Param(), lineno=73, col_offset=17), Name('s', Param(), lineno=73, col_offset=23)], None, None, []), [Expr(Str('"[^"]*"', lineno=74, col_offset=8), lineno=74, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=75, col_offset=8), 'rv', Load(), lineno=75, col_offset=8), 'append', Load(), lineno=75, col_offset=8), [Call(Name('String', Load(), lineno=75, col_offset=23), [Name('s', Load(), lineno=75, col_offset=30), Attribute(Name('self', Load(), lineno=75, col_offset=33), 'lineno', Load(), lineno=75, col_offset=33)], [], None, None, lineno=75, col_offset=23)], [], None, None, lineno=75, col_offset=8), lineno=75, col_offset=8)], [], lineno=73, col_offset=4), FunctionDef('t_xxx', arguments([Name('self', Param(), lineno=77, col_offset=14), Name('s', Param(), lineno=77, col_offset=20)], None, None, []), [Expr(Str('<=', lineno=78, col_offset=8), lineno=78, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=79, col_offset=8), 'rv', Load(), lineno=79, col_offset=8), 'append', Load(), lineno=79, col_offset=8), [Call(Name('Token', Load(), lineno=79, col_offset=23), [Name('s', Load(), lineno=79, col_offset=29), Attribute(Name('self', Load(), lineno=79, col_offset=32), 'lineno', Load(), lineno=79, col_offset=32)], [], None, None, lineno=79, col_offset=23)], [], None, None, lineno=79, col_offset=8), lineno=79, col_offset=8)], [], lineno=77, col_offset=4), FunctionDef('t_punctuation', arguments([Name('self', Param(), lineno=81, col_offset=22), Name('s', Param(), lineno=81, col_offset=28)], None, None, []), [Expr(Str('[\\{\\}\\*\\=\\|\\(\\)\\,\\?\\:]', lineno=82, col_offset=8), lineno=82, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=83, col_offset=8), 'rv', Load(), lineno=83, col_offset=8), 'append', Load(), lineno=83, col_offset=8), [Call(Name('Token', Load(), lineno=83, col_offset=23), [Name('s', Load(), lineno=83, col_offset=29), Attribute(Name('self', Load(), lineno=83, col_offset=32), 'lineno', Load(), lineno=83, col_offset=32)], [], None, None, lineno=83, col_offset=23)], [], None, None, lineno=83, col_offset=8), lineno=83, col_offset=8)], [], lineno=81, col_offset=4), FunctionDef('t_comment', arguments([Name('self', Param(), lineno=85, col_offset=18), Name('s', Param(), lineno=85, col_offset=24)], None, None, []), [Expr(Str('\\-\\-[^\\n]*', lineno=86, col_offset=8), lineno=86, col_offset=8), Pass( lineno=87, col_offset=8)], [], lineno=85, col_offset=4), FunctionDef('t_newline', arguments([Name('self', Param(), lineno=89, col_offset=18), Name('s', Param(), lineno=89, col_offset=24)], None, None, []), [Expr(Str('\\n', lineno=90, col_offset=8), lineno=90, col_offset=8), AugAssign(Attribute(Name('self', Load(), lineno=91, col_offset=8), 'lineno', Store(), lineno=91, col_offset=8), Add(), Num(1, lineno=91, col_offset=23), lineno=91, col_offset=8)], [], lineno=89, col_offset=4), FunctionDef('t_whitespace', arguments([Name('self', Param(), lineno=93, col_offset=21), Name('s', Param(), lineno=93, col_offset=27)], None, None, []), [Expr(Str('[ \\t]+', lineno=94, col_offset=8), lineno=94, col_offset=8), Pass( lineno=95, col_offset=8)], [], lineno=93, col_offset=4), FunctionDef('t_default', arguments([Name('self', Param(), lineno=97, col_offset=18), Name('s', Param(), lineno=97, col_offset=24)], None, None, []), [Expr(Str(' . +', lineno=98, col_offset=8), lineno=98, col_offset=8), Raise(Name('ValueError', Load(), lineno=99, col_offset=14), BinOp(Str('unmatched input: %s', lineno=99, col_offset=26), Mod(), Repr(Name('s', Load(), lineno=99, col_offset=51), lineno=99, col_offset=50), lineno=99, col_offset=26), None, lineno=99, col_offset=8)], [], lineno=97, col_offset=4)], [], lineno=59, col_offset=0), ClassDef('ASDLParser', [Attribute(Name('spark', Load(), lineno=101, col_offset=17), 'GenericParser', Load(), lineno=101, col_offset=17), Name('object', Load(), lineno=101, col_offset=38)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=102, col_offset=17)], None, None, []), [Expr(Call(Attribute(Call(Name('super', Load(), lineno=103, col_offset=8), [Name('ASDLParser', Load(), lineno=103, col_offset=14), Name('self', Load(), lineno=103, col_offset=26)], [], None, None, lineno=103, col_offset=8), '__init__', Load(), lineno=103, col_offset=8), [Str('module', lineno=103, col_offset=41)], [], None, None, lineno=103, col_offset=8), lineno=103, col_offset=8)], [], lineno=102, col_offset=4), FunctionDef('typestring', arguments([Name('self', Param(), lineno=105, col_offset=19), Name('tok', Param(), lineno=105, col_offset=25)], None, None, []), [Return(Attribute(Name('tok', Load(), lineno=106, col_offset=15), 'type', Load(), lineno=106, col_offset=15), lineno=106, col_offset=8)], [], lineno=105, col_offset=4), FunctionDef('error', arguments([Name('self', Param(), lineno=108, col_offset=14), Name('tok', Param(), lineno=108, col_offset=20)], None, None, []), [Raise(Call(Name('ASDLSyntaxError', Load(), lineno=109, col_offset=14), [Attribute(Name('tok', Load(), lineno=109, col_offset=30), 'lineno', Load(), lineno=109, col_offset=30), Name('tok', Load(), lineno=109, col_offset=42)], [], None, None, lineno=109, col_offset=14), None, None, lineno=109, col_offset=8)], [], lineno=108, col_offset=4), FunctionDef('p_module_0', arguments([Name('self', Param(), lineno=111, col_offset=19), Tuple([Name('module', Store(), lineno=111, col_offset=26), Name('name', Store(), lineno=111, col_offset=34), Name('version', Store(), lineno=111, col_offset=40), Name('_0', Store(), lineno=111, col_offset=49), Name('_1', Store(), lineno=111, col_offset=53)], Store(), lineno=111, col_offset=26)], None, None, []), [Expr(Str(' module ::= Id Id version { } ', lineno=112, col_offset=8), lineno=112, col_offset=8), If(Compare(Attribute(Name('module', Load(), lineno=113, col_offset=11), 'value', Load(), lineno=113, col_offset=11), [NotEq()], [Str('module', lineno=113, col_offset=27)], lineno=113, col_offset=11), [Raise(Call(Name('ASDLSyntaxError', Load(), lineno=114, col_offset=18), [Attribute(Name('module', Load(), lineno=114, col_offset=34), 'lineno', Load(), lineno=114, col_offset=34)], [keyword('msg', BinOp(Str("expected 'module', found %s", lineno=115, col_offset=38), Mod(), Name('module', Load(), lineno=115, col_offset=70), lineno=115, col_offset=38))], None, None, lineno=114, col_offset=18), None, None, lineno=114, col_offset=12)], [], lineno=113, col_offset=8), Return(Call(Name('Module', Load(), lineno=116, col_offset=15), [Name('name', Load(), lineno=116, col_offset=22), Name('None', Load(), lineno=116, col_offset=28), Name('version', Load(), lineno=116, col_offset=34)], [], None, None, lineno=116, col_offset=15), lineno=116, col_offset=8)], [], lineno=111, col_offset=4), FunctionDef('p_module', arguments([Name('self', Param(), lineno=118, col_offset=17), Tuple([Name('module', Store(), lineno=118, col_offset=24), Name('name', Store(), lineno=118, col_offset=32), Name('version', Store(), lineno=118, col_offset=38), Name('_0', Store(), lineno=118, col_offset=47), Name('definitions', Store(), lineno=118, col_offset=51), Name('_1', Store(), lineno=118, col_offset=64)], Store(), lineno=118, col_offset=24)], None, None, []), [Expr(Str(' module ::= Id Id version { definitions } ', lineno=119, col_offset=8), lineno=119, col_offset=8), If(Compare(Attribute(Name('module', Load(), lineno=120, col_offset=11), 'value', Load(), lineno=120, col_offset=11), [NotEq()], [Str('module', lineno=120, col_offset=27)], lineno=120, col_offset=11), [Raise(Call(Name('ASDLSyntaxError', Load(), lineno=121, col_offset=18), [Attribute(Name('module', Load(), lineno=121, col_offset=34), 'lineno', Load(), lineno=121, col_offset=34)], [keyword('msg', BinOp(Str("expected 'module', found %s", lineno=122, col_offset=38), Mod(), Name('module', Load(), lineno=122, col_offset=70), lineno=122, col_offset=38))], None, None, lineno=121, col_offset=18), None, None, lineno=121, col_offset=12)], [], lineno=120, col_offset=8), Return(Call(Name('Module', Load(), lineno=123, col_offset=15), [Name('name', Load(), lineno=123, col_offset=22), Name('definitions', Load(), lineno=123, col_offset=28), Name('version', Load(), lineno=123, col_offset=41)], [], None, None, lineno=123, col_offset=15), lineno=123, col_offset=8)], [], lineno=118, col_offset=4), FunctionDef('p_version', arguments([Name('self', Param(), lineno=125, col_offset=18), Tuple([Name('version', Store(), lineno=125, col_offset=25), Name('V', Store(), lineno=125, col_offset=34)], Store(), lineno=125, col_offset=25)], None, None, []), [Expr(Str('version ::= Id String', lineno=126, col_offset=8), lineno=126, col_offset=8), If(Compare(Attribute(Name('version', Load(), lineno=127, col_offset=11), 'value', Load(), lineno=127, col_offset=11), [NotEq()], [Str('version', lineno=127, col_offset=28)], lineno=127, col_offset=11), [Raise(Call(Name('ASDLSyntaxError', Load(), lineno=128, col_offset=18), [Attribute(Name('version', Load(), lineno=128, col_offset=34), 'lineno', Load(), lineno=128, col_offset=34)], [keyword('msg', BinOp(Str("expected 'version', found %", lineno=129, col_offset=36), Mod(), Name('version', Load(), lineno=129, col_offset=68), lineno=129, col_offset=36))], None, None, lineno=128, col_offset=18), None, None, lineno=128, col_offset=12)], [], lineno=127, col_offset=8), Return(Name('V', Load(), lineno=130, col_offset=15), lineno=130, col_offset=8)], [], lineno=125, col_offset=4), FunctionDef('p_definition_0', arguments([Name('self', Param(), lineno=132, col_offset=23), Tuple([Name('definition', Store(), lineno=132, col_offset=30)], Store(), lineno=132, col_offset=30)], None, None, []), [Expr(Str(' definitions ::= definition ', lineno=133, col_offset=8), lineno=133, col_offset=8), Return(Name('definition', Load(), lineno=134, col_offset=15), lineno=134, col_offset=8)], [], lineno=132, col_offset=4), FunctionDef('p_definition_1', arguments([Name('self', Param(), lineno=136, col_offset=23), Tuple([Name('definitions', Store(), lineno=136, col_offset=30), Name('definition', Store(), lineno=136, col_offset=43)], Store(), lineno=136, col_offset=30)], None, None, []), [Expr(Str(' definitions ::= definition definitions ', lineno=137, col_offset=8), lineno=137, col_offset=8), Return(BinOp(Name('definitions', Load(), lineno=138, col_offset=15), Add(), Name('definition', Load(), lineno=138, col_offset=29), lineno=138, col_offset=15), lineno=138, col_offset=8)], [], lineno=136, col_offset=4), FunctionDef('p_definition', arguments([Name('self', Param(), lineno=140, col_offset=21), Tuple([Name('id', Store(), lineno=140, col_offset=28), Name('_', Store(), lineno=140, col_offset=32), Name('type', Store(), lineno=140, col_offset=35)], Store(), lineno=140, col_offset=28)], None, None, []), [Expr(Str(' definition ::= Id = type ', lineno=141, col_offset=8), lineno=141, col_offset=8), Return(List([Call(Name('Type', Load(), lineno=142, col_offset=16), [Name('id', Load(), lineno=142, col_offset=21), Name('type', Load(), lineno=142, col_offset=25)], [], None, None, lineno=142, col_offset=16)], Load(), lineno=142, col_offset=15), lineno=142, col_offset=8)], [], lineno=140, col_offset=4), FunctionDef('p_type_0', arguments([Name('self', Param(), lineno=144, col_offset=17), Tuple([Name('product', Store(), lineno=144, col_offset=24)], Store(), lineno=144, col_offset=24)], None, None, []), [Expr(Str(' type ::= product ', lineno=145, col_offset=8), lineno=145, col_offset=8), Return(Name('product', Load(), lineno=146, col_offset=15), lineno=146, col_offset=8)], [], lineno=144, col_offset=4), FunctionDef('p_type_1', arguments([Name('self', Param(), lineno=148, col_offset=17), Tuple([Name('sum', Store(), lineno=148, col_offset=24)], Store(), lineno=148, col_offset=24)], None, None, []), [Expr(Str(' type ::= sum ', lineno=149, col_offset=8), lineno=149, col_offset=8), Return(Call(Name('Sum', Load(), lineno=150, col_offset=15), [Name('sum', Load(), lineno=150, col_offset=19)], [], None, None, lineno=150, col_offset=15), lineno=150, col_offset=8)], [], lineno=148, col_offset=4), FunctionDef('p_type_2', arguments([Name('self', Param(), lineno=152, col_offset=17), Tuple([Name('sum', Store(), lineno=152, col_offset=24), Name('id', Store(), lineno=152, col_offset=29), Name('_0', Store(), lineno=152, col_offset=33), Name('attributes', Store(), lineno=152, col_offset=37), Name('_1', Store(), lineno=152, col_offset=49)], Store(), lineno=152, col_offset=24)], None, None, []), [Expr(Str(' type ::= sum Id ( fields ) ', lineno=153, col_offset=8), lineno=153, col_offset=8), If(Compare(Attribute(Name('id', Load(), lineno=154, col_offset=11), 'value', Load(), lineno=154, col_offset=11), [NotEq()], [Str('attributes', lineno=154, col_offset=23)], lineno=154, col_offset=11), [Raise(Call(Name('ASDLSyntaxError', Load(), lineno=155, col_offset=18), [Attribute(Name('id', Load(), lineno=155, col_offset=34), 'lineno', Load(), lineno=155, col_offset=34)], [keyword('msg', BinOp(Str('expected attributes, found %s', lineno=156, col_offset=38), Mod(), Name('id', Load(), lineno=156, col_offset=72), lineno=156, col_offset=38))], None, None, lineno=155, col_offset=18), None, None, lineno=155, col_offset=12)], [], lineno=154, col_offset=8), If(Name('attributes', Load(), lineno=157, col_offset=11), [Expr(Call(Attribute(Name('attributes', Load(), lineno=158, col_offset=12), 'reverse', Load(), lineno=158, col_offset=12), [], [], None, None, lineno=158, col_offset=12), lineno=158, col_offset=12)], [], lineno=157, col_offset=8), Return(Call(Name('Sum', Load(), lineno=159, col_offset=15), [Name('sum', Load(), lineno=159, col_offset=19), Name('attributes', Load(), lineno=159, col_offset=24)], [], None, None, lineno=159, col_offset=15), lineno=159, col_offset=8)], [], lineno=152, col_offset=4), FunctionDef('p_product', arguments([Name('self', Param(), lineno=161, col_offset=18), Tuple([Name('_0', Store(), lineno=161, col_offset=25), Name('fields', Store(), lineno=161, col_offset=29), Name('_1', Store(), lineno=161, col_offset=37)], Store(), lineno=161, col_offset=25)], None, None, []), [Expr(Str(' product ::= ( fields ) ', lineno=162, col_offset=8), lineno=162, col_offset=8), Expr(Call(Attribute(Name('fields', Load(), lineno=164, col_offset=8), 'reverse', Load(), lineno=164, col_offset=8), [], [], None, None, lineno=164, col_offset=8), lineno=164, col_offset=8), Return(Call(Name('Product', Load(), lineno=165, col_offset=15), [Name('fields', Load(), lineno=165, col_offset=23)], [], None, None, lineno=165, col_offset=15), lineno=165, col_offset=8)], [], lineno=161, col_offset=4), FunctionDef('p_sum_0', arguments([Name('self', Param(), lineno=167, col_offset=16), Tuple([Name('constructor', Store(), lineno=167, col_offset=23)], Store(), lineno=167, col_offset=23)], None, None, []), [Expr(Str(' sum ::= constructor ', lineno=168, col_offset=8), lineno=168, col_offset=8), Return(List([Name('constructor', Load(), lineno=169, col_offset=16)], Load(), lineno=169, col_offset=15), lineno=169, col_offset=8)], [], lineno=167, col_offset=4), FunctionDef('p_sum_1', arguments([Name('self', Param(), lineno=171, col_offset=16), Tuple([Name('constructor', Store(), lineno=171, col_offset=23), Name('_', Store(), lineno=171, col_offset=36), Name('sum', Store(), lineno=171, col_offset=39)], Store(), lineno=171, col_offset=23)], None, None, []), [Expr(Str(' sum ::= constructor | sum ', lineno=172, col_offset=8), lineno=172, col_offset=8), Return(BinOp(List([Name('constructor', Load(), lineno=173, col_offset=16)], Load(), lineno=173, col_offset=15), Add(), Name('sum', Load(), lineno=173, col_offset=31), lineno=173, col_offset=15), lineno=173, col_offset=8)], [], lineno=171, col_offset=4), FunctionDef('p_sum_2', arguments([Name('self', Param(), lineno=175, col_offset=16), Tuple([Name('constructor', Store(), lineno=175, col_offset=23), Name('_', Store(), lineno=175, col_offset=36), Name('sum', Store(), lineno=175, col_offset=39)], Store(), lineno=175, col_offset=23)], None, None, []), [Expr(Str(' sum ::= constructor | sum ', lineno=176, col_offset=8), lineno=176, col_offset=8), Return(BinOp(List([Name('constructor', Load(), lineno=177, col_offset=16)], Load(), lineno=177, col_offset=15), Add(), Name('sum', Load(), lineno=177, col_offset=31), lineno=177, col_offset=15), lineno=177, col_offset=8)], [], lineno=175, col_offset=4), FunctionDef('p_constructor_0', arguments([Name('self', Param(), lineno=179, col_offset=24), Tuple([Name('id', Store(), lineno=179, col_offset=31)], Store(), lineno=179, col_offset=31)], None, None, []), [Expr(Str(' constructor ::= Id ', lineno=180, col_offset=8), lineno=180, col_offset=8), Return(Call(Name('Constructor', Load(), lineno=181, col_offset=15), [Name('id', Load(), lineno=181, col_offset=27)], [], None, None, lineno=181, col_offset=15), lineno=181, col_offset=8)], [], lineno=179, col_offset=4), FunctionDef('p_constructor_1', arguments([Name('self', Param(), lineno=183, col_offset=24), Tuple([Name('id', Store(), lineno=183, col_offset=31), Name('_0', Store(), lineno=183, col_offset=35), Name('fields', Store(), lineno=183, col_offset=39), Name('_1', Store(), lineno=183, col_offset=47)], Store(), lineno=183, col_offset=31)], None, None, []), [Expr(Str(' constructor ::= Id ( fields ) ', lineno=184, col_offset=8), lineno=184, col_offset=8), Expr(Call(Attribute(Name('fields', Load(), lineno=186, col_offset=8), 'reverse', Load(), lineno=186, col_offset=8), [], [], None, None, lineno=186, col_offset=8), lineno=186, col_offset=8), Return(Call(Name('Constructor', Load(), lineno=187, col_offset=15), [Name('id', Load(), lineno=187, col_offset=27), Name('fields', Load(), lineno=187, col_offset=31)], [], None, None, lineno=187, col_offset=15), lineno=187, col_offset=8)], [], lineno=183, col_offset=4), FunctionDef('p_fields_0', arguments([Name('self', Param(), lineno=189, col_offset=19), Tuple([Name('field', Store(), lineno=189, col_offset=26)], Store(), lineno=189, col_offset=26)], None, None, []), [Expr(Str(' fields ::= field ', lineno=190, col_offset=8), lineno=190, col_offset=8), Return(List([Name('field', Load(), lineno=191, col_offset=16)], Load(), lineno=191, col_offset=15), lineno=191, col_offset=8)], [], lineno=189, col_offset=4), FunctionDef('p_fields_1', arguments([Name('self', Param(), lineno=193, col_offset=19), Tuple([Name('field', Store(), lineno=193, col_offset=26), Name('_', Store(), lineno=193, col_offset=33), Name('fields', Store(), lineno=193, col_offset=36)], Store(), lineno=193, col_offset=26)], None, None, []), [Expr(Str(' fields ::= field , fields ', lineno=194, col_offset=8), lineno=194, col_offset=8), Return(BinOp(Name('fields', Load(), lineno=195, col_offset=15), Add(), List([Name('field', Load(), lineno=195, col_offset=25)], Load(), lineno=195, col_offset=24), lineno=195, col_offset=15), lineno=195, col_offset=8)], [], lineno=193, col_offset=4), FunctionDef('p_field_0', arguments([Name('self', Param(), lineno=197, col_offset=18), Tuple([Name('type', Store(), lineno=197, col_offset=25)], Store(), lineno=197, col_offset=25)], None, None, []), [Expr(Str(' field ::= Id ', lineno=198, col_offset=8), lineno=198, col_offset=8), Return(Call(Name('Field', Load(), lineno=199, col_offset=15), [Name('type', Load(), lineno=199, col_offset=21)], [], None, None, lineno=199, col_offset=15), lineno=199, col_offset=8)], [], lineno=197, col_offset=4), FunctionDef('p_field_1', arguments([Name('self', Param(), lineno=201, col_offset=18), Tuple([Name('type', Store(), lineno=201, col_offset=25), Name('name', Store(), lineno=201, col_offset=31)], Store(), lineno=201, col_offset=25)], None, None, []), [Expr(Str(' field ::= Id Id ', lineno=202, col_offset=8), lineno=202, col_offset=8), Return(Call(Name('Field', Load(), lineno=203, col_offset=15), [Name('type', Load(), lineno=203, col_offset=21), Name('name', Load(), lineno=203, col_offset=27)], [], None, None, lineno=203, col_offset=15), lineno=203, col_offset=8)], [], lineno=201, col_offset=4), FunctionDef('p_field_2', arguments([Name('self', Param(), lineno=205, col_offset=18), Tuple([Name('type', Store(), lineno=205, col_offset=25), Name('_', Store(), lineno=205, col_offset=31), Name('name', Store(), lineno=205, col_offset=34)], Store(), lineno=205, col_offset=25)], None, None, []), [Expr(Str(' field ::= Id * Id ', lineno=206, col_offset=8), lineno=206, col_offset=8), Return(Call(Name('Field', Load(), lineno=207, col_offset=15), [Name('type', Load(), lineno=207, col_offset=21), Name('name', Load(), lineno=207, col_offset=27)], [keyword('seq', Name('True', Load(), lineno=207, col_offset=37))], None, None, lineno=207, col_offset=15), lineno=207, col_offset=8)], [], lineno=205, col_offset=4), FunctionDef('p_field_3', arguments([Name('self', Param(), lineno=209, col_offset=18), Tuple([Name('type', Store(), lineno=209, col_offset=25), Name('_', Store(), lineno=209, col_offset=31), Name('name', Store(), lineno=209, col_offset=34)], Store(), lineno=209, col_offset=25)], None, None, []), [Expr(Str(' field ::= Id ? Id ', lineno=210, col_offset=8), lineno=210, col_offset=8), Return(Call(Name('Field', Load(), lineno=211, col_offset=15), [Name('type', Load(), lineno=211, col_offset=21), Name('name', Load(), lineno=211, col_offset=27)], [keyword('opt', Name('True', Load(), lineno=211, col_offset=37))], None, None, lineno=211, col_offset=15), lineno=211, col_offset=8)], [], lineno=209, col_offset=4), FunctionDef('p_field_4', arguments([Name('self', Param(), lineno=213, col_offset=18), Tuple([Name('type', Store(), lineno=213, col_offset=25), Name('_', Store(), lineno=213, col_offset=31)], Store(), lineno=213, col_offset=25)], None, None, []), [Expr(Str(' field ::= Id * ', lineno=214, col_offset=8), lineno=214, col_offset=8), Return(Call(Name('Field', Load(), lineno=215, col_offset=15), [Name('type', Load(), lineno=215, col_offset=21)], [keyword('seq', Name('True', Load(), lineno=215, col_offset=31))], None, None, lineno=215, col_offset=15), lineno=215, col_offset=8)], [], lineno=213, col_offset=4), FunctionDef('p_field_5', arguments([Name('self', Param(), lineno=217, col_offset=18), Tuple([Name('type', Store(), lineno=217, col_offset=25), Name('_', Store(), lineno=217, col_offset=31)], Store(), lineno=217, col_offset=25)], None, None, []), [Expr(Str(' field ::= Id ? ', lineno=218, col_offset=8), lineno=218, col_offset=8), Return(Call(Name('Field', Load(), lineno=219, col_offset=15), [Name('type', Load(), lineno=219, col_offset=21)], [keyword('opt', Name('True', Load(), lineno=219, col_offset=31))], None, None, lineno=219, col_offset=15), lineno=219, col_offset=8)], [], lineno=217, col_offset=4)], [], lineno=101, col_offset=0), Assign([Name('builtin_types', Store(), lineno=221, col_offset=0)], Tuple([Str('identifier', lineno=221, col_offset=17), Str('string', lineno=221, col_offset=31), Str('int', lineno=221, col_offset=41), Str('bool', lineno=221, col_offset=48), Str('object', lineno=221, col_offset=56)], Load(), lineno=221, col_offset=17), lineno=221, col_offset=0), ClassDef('AST', [Name('object', Load(), lineno=227, col_offset=10)], [Pass( lineno=228, col_offset=4)], [], lineno=227, col_offset=0), ClassDef('Module', [Name('AST', Load(), lineno=230, col_offset=13)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=231, col_offset=17), Name('name', Param(), lineno=231, col_offset=23), Name('dfns', Param(), lineno=231, col_offset=29), Name('version', Param(), lineno=231, col_offset=35)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=232, col_offset=8), 'name', Store(), lineno=232, col_offset=8)], Name('name', Load(), lineno=232, col_offset=20), lineno=232, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=233, col_offset=8), 'dfns', Store(), lineno=233, col_offset=8)], Name('dfns', Load(), lineno=233, col_offset=20), lineno=233, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=234, col_offset=8), 'version', Store(), lineno=234, col_offset=8)], Name('version', Load(), lineno=234, col_offset=23), lineno=234, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=235, col_offset=8), 'types', Store(), lineno=235, col_offset=8)], Dict([], [], lineno=235, col_offset=21), lineno=235, col_offset=8), For(Name('type', Store(), lineno=236, col_offset=12), Name('dfns', Load(), lineno=236, col_offset=20), [Assign([Subscript(Attribute(Name('self', Load(), lineno=237, col_offset=12), 'types', Load(), lineno=237, col_offset=12), Index(Attribute(Attribute(Name('type', Load(), lineno=237, col_offset=23), 'name', Load(), lineno=237, col_offset=23), 'value', Load(), lineno=237, col_offset=23)), Store(), lineno=237, col_offset=12)], Attribute(Name('type', Load(), lineno=237, col_offset=42), 'value', Load(), lineno=237, col_offset=42), lineno=237, col_offset=12)], [], lineno=236, col_offset=8)], [], lineno=231, col_offset=4), FunctionDef('__repr__', arguments([Name('self', Param(), lineno=239, col_offset=17)], None, None, []), [Return(BinOp(Str('Module(%s, %s)', lineno=240, col_offset=15), Mod(), Tuple([Attribute(Name('self', Load(), lineno=240, col_offset=35), 'name', Load(), lineno=240, col_offset=35), Attribute(Name('self', Load(), lineno=240, col_offset=46), 'dfns', Load(), lineno=240, col_offset=46)], Load(), lineno=240, col_offset=35), lineno=240, col_offset=15), lineno=240, col_offset=8)], [], lineno=239, col_offset=4)], [], lineno=230, col_offset=0), ClassDef('Type', [Name('AST', Load(), lineno=242, col_offset=11)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=243, col_offset=17), Name('name', Param(), lineno=243, col_offset=23), Name('value', Param(), lineno=243, col_offset=29)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=244, col_offset=8), 'name', Store(), lineno=244, col_offset=8)], Name('name', Load(), lineno=244, col_offset=20), lineno=244, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=245, col_offset=8), 'value', Store(), lineno=245, col_offset=8)], Name('value', Load(), lineno=245, col_offset=21), lineno=245, col_offset=8)], [], lineno=243, col_offset=4), FunctionDef('__repr__', arguments([Name('self', Param(), lineno=247, col_offset=17)], None, None, []), [Return(BinOp(Str('Type(%s, %s)', lineno=248, col_offset=15), Mod(), Tuple([Attribute(Name('self', Load(), lineno=248, col_offset=33), 'name', Load(), lineno=248, col_offset=33), Attribute(Name('self', Load(), lineno=248, col_offset=44), 'value', Load(), lineno=248, col_offset=44)], Load(), lineno=248, col_offset=33), lineno=248, col_offset=15), lineno=248, col_offset=8)], [], lineno=247, col_offset=4)], [], lineno=242, col_offset=0), ClassDef('Constructor', [Name('AST', Load(), lineno=250, col_offset=18)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=251, col_offset=17), Name('name', Param(), lineno=251, col_offset=23), Name('fields', Param(), lineno=251, col_offset=29)], None, None, [Name('None', Load(), lineno=251, col_offset=36)]), [Assign([Attribute(Name('self', Load(), lineno=252, col_offset=8), 'name', Store(), lineno=252, col_offset=8)], Name('name', Load(), lineno=252, col_offset=20), lineno=252, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=253, col_offset=8), 'fields', Store(), lineno=253, col_offset=8)], BoolOp(Or(), [Name('fields', Load(), lineno=253, col_offset=22), List([], Load(), lineno=253, col_offset=32)], lineno=253, col_offset=22), lineno=253, col_offset=8)], [], lineno=251, col_offset=4), FunctionDef('__repr__', arguments([Name('self', Param(), lineno=255, col_offset=17)], None, None, []), [Return(BinOp(Str('Constructor(%s, %s)', lineno=256, col_offset=15), Mod(), Tuple([Attribute(Name('self', Load(), lineno=256, col_offset=40), 'name', Load(), lineno=256, col_offset=40), Attribute(Name('self', Load(), lineno=256, col_offset=51), 'fields', Load(), lineno=256, col_offset=51)], Load(), lineno=256, col_offset=40), lineno=256, col_offset=15), lineno=256, col_offset=8)], [], lineno=255, col_offset=4)], [], lineno=250, col_offset=0), ClassDef('Field', [Name('AST', Load(), lineno=258, col_offset=12)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=259, col_offset=17), Name('type', Param(), lineno=259, col_offset=23), Name('name', Param(), lineno=259, col_offset=29), Name('seq', Param(), lineno=259, col_offset=40), Name('opt', Param(), lineno=259, col_offset=51)], None, None, [Name('None', Load(), lineno=259, col_offset=34), Name('False', Load(), lineno=259, col_offset=44), Name('False', Load(), lineno=259, col_offset=55)]), [Assign([Attribute(Name('self', Load(), lineno=260, col_offset=8), 'type', Store(), lineno=260, col_offset=8)], Name('type', Load(), lineno=260, col_offset=20), lineno=260, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=261, col_offset=8), 'name', Store(), lineno=261, col_offset=8)], Name('name', Load(), lineno=261, col_offset=20), lineno=261, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=262, col_offset=8), 'seq', Store(), lineno=262, col_offset=8)], Name('seq', Load(), lineno=262, col_offset=19), lineno=262, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=263, col_offset=8), 'opt', Store(), lineno=263, col_offset=8)], Name('opt', Load(), lineno=263, col_offset=19), lineno=263, col_offset=8)], [], lineno=259, col_offset=4), FunctionDef('__repr__', arguments([Name('self', Param(), lineno=265, col_offset=17)], None, None, []), [If(Attribute(Name('self', Load(), lineno=266, col_offset=11), 'seq', Load(), lineno=266, col_offset=11), [Assign([Name('extra', Store(), lineno=267, col_offset=12)], Str(', seq=True', lineno=267, col_offset=20), lineno=267, col_offset=12)], [If(Attribute(Name('self', Load(), lineno=268, col_offset=13), 'opt', Load(), lineno=268, col_offset=13), [Assign([Name('extra', Store(), lineno=269, col_offset=12)], Str(', opt=True', lineno=269, col_offset=20), lineno=269, col_offset=12)], [Assign([Name('extra', Store(), lineno=271, col_offset=12)], Str('', lineno=271, col_offset=20), lineno=271, col_offset=12)], lineno=268, col_offset=13)], lineno=266, col_offset=8), If(Compare(Attribute(Name('self', Load(), lineno=272, col_offset=11), 'name', Load(), lineno=272, col_offset=11), [Is()], [Name('None', Load(), lineno=272, col_offset=24)], lineno=272, col_offset=11), [Return(BinOp(Str('Field(%s%s)', lineno=273, col_offset=19), Mod(), Tuple([Attribute(Name('self', Load(), lineno=273, col_offset=36), 'type', Load(), lineno=273, col_offset=36), Name('extra', Load(), lineno=273, col_offset=47)], Load(), lineno=273, col_offset=36), lineno=273, col_offset=19), lineno=273, col_offset=12)], [Return(BinOp(Str('Field(%s, %s%s)', lineno=275, col_offset=19), Mod(), Tuple([Attribute(Name('self', Load(), lineno=275, col_offset=40), 'type', Load(), lineno=275, col_offset=40), Attribute(Name('self', Load(), lineno=275, col_offset=51), 'name', Load(), lineno=275, col_offset=51), Name('extra', Load(), lineno=275, col_offset=62)], Load(), lineno=275, col_offset=40), lineno=275, col_offset=19), lineno=275, col_offset=12)], lineno=272, col_offset=8)], [], lineno=265, col_offset=4)], [], lineno=258, col_offset=0), ClassDef('Sum', [Name('AST', Load(), lineno=277, col_offset=10)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=278, col_offset=17), Name('types', Param(), lineno=278, col_offset=23), Name('attributes', Param(), lineno=278, col_offset=30)], None, None, [Name('None', Load(), lineno=278, col_offset=41)]), [Assign([Attribute(Name('self', Load(), lineno=279, col_offset=8), 'types', Store(), lineno=279, col_offset=8)], Name('types', Load(), lineno=279, col_offset=21), lineno=279, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=280, col_offset=8), 'attributes', Store(), lineno=280, col_offset=8)], BoolOp(Or(), [Name('attributes', Load(), lineno=280, col_offset=26), List([], Load(), lineno=280, col_offset=40)], lineno=280, col_offset=26), lineno=280, col_offset=8)], [], lineno=278, col_offset=4), FunctionDef('__repr__', arguments([Name('self', Param(), lineno=282, col_offset=17)], None, None, []), [If(Compare(Attribute(Name('self', Load(), lineno=283, col_offset=11), 'attributes', Load(), lineno=283, col_offset=11), [Is()], [Name('None', Load(), lineno=283, col_offset=30)], lineno=283, col_offset=11), [Return(BinOp(Str('Sum(%s)', lineno=284, col_offset=19), Mod(), Attribute(Name('self', Load(), lineno=284, col_offset=31), 'types', Load(), lineno=284, col_offset=31), lineno=284, col_offset=19), lineno=284, col_offset=12)], [Return(BinOp(Str('Sum(%s, %s)', lineno=286, col_offset=19), Mod(), Tuple([Attribute(Name('self', Load(), lineno=286, col_offset=36), 'types', Load(), lineno=286, col_offset=36), Attribute(Name('self', Load(), lineno=286, col_offset=48), 'attributes', Load(), lineno=286, col_offset=48)], Load(), lineno=286, col_offset=36), lineno=286, col_offset=19), lineno=286, col_offset=12)], lineno=283, col_offset=8)], [], lineno=282, col_offset=4)], [], lineno=277, col_offset=0), ClassDef('Product', [Name('AST', Load(), lineno=288, col_offset=14)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=289, col_offset=17), Name('fields', Param(), lineno=289, col_offset=23)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=290, col_offset=8), 'fields', Store(), lineno=290, col_offset=8)], Name('fields', Load(), lineno=290, col_offset=22), lineno=290, col_offset=8)], [], lineno=289, col_offset=4), FunctionDef('__repr__', arguments([Name('self', Param(), lineno=292, col_offset=17)], None, None, []), [Return(BinOp(Str('Product(%s)', lineno=293, col_offset=15), Mod(), Attribute(Name('self', Load(), lineno=293, col_offset=31), 'fields', Load(), lineno=293, col_offset=31), lineno=293, col_offset=15), lineno=293, col_offset=8)], [], lineno=292, col_offset=4)], [], lineno=288, col_offset=0), ClassDef('VisitorBase', [Name('object', Load(), lineno=295, col_offset=18)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=297, col_offset=17), Name('skip', Param(), lineno=297, col_offset=23)], None, None, [Name('False', Load(), lineno=297, col_offset=28)]), [Assign([Attribute(Name('self', Load(), lineno=298, col_offset=8), 'cache', Store(), lineno=298, col_offset=8)], Dict([], [], lineno=298, col_offset=21), lineno=298, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=299, col_offset=8), 'skip', Store(), lineno=299, col_offset=8)], Name('skip', Load(), lineno=299, col_offset=20), lineno=299, col_offset=8)], [], lineno=297, col_offset=4), FunctionDef('visit', arguments([Name('self', Param(), lineno=301, col_offset=14), Name('object', Param(), lineno=301, col_offset=20)], 'args', None, []), [Assign([Name('meth', Store(), lineno=302, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=302, col_offset=15), '_dispatch', Load(), lineno=302, col_offset=15), [Name('object', Load(), lineno=302, col_offset=30)], [], None, None, lineno=302, col_offset=15), lineno=302, col_offset=8), If(Compare(Name('meth', Load(), lineno=303, col_offset=11), [Is()], [Name('None', Load(), lineno=303, col_offset=19)], lineno=303, col_offset=11), [Return(None, lineno=304, col_offset=12)], [], lineno=303, col_offset=8), TryExcept([Expr(Call(Name('meth', Load(), lineno=306, col_offset=12), [Name('object', Load(), lineno=306, col_offset=17)], [], Name('args', Load(), lineno=306, col_offset=26), None, lineno=306, col_offset=12), lineno=306, col_offset=12)], [ExceptHandler(Name('Exception', Load(), lineno=307, col_offset=15), Name('err', Store(), lineno=307, col_offset=26), [Print(None, [Str('Error visiting', lineno=308, col_offset=18), Call(Name('repr', Load(), lineno=308, col_offset=36), [Name('object', Load(), lineno=308, col_offset=41)], [], None, None, lineno=308, col_offset=36)], True, lineno=308, col_offset=12), Print(None, [Name('err', Load(), lineno=309, col_offset=18)], True, lineno=309, col_offset=12), Expr(Call(Attribute(Name('traceback', Load(), lineno=310, col_offset=12), 'print_exc', Load(), lineno=310, col_offset=12), [], [], None, None, lineno=310, col_offset=12), lineno=310, col_offset=12), If(Call(Name('hasattr', Load(), lineno=312, col_offset=15), [Name('self', Load(), lineno=312, col_offset=23), Str('file', lineno=312, col_offset=29)], [], None, None, lineno=312, col_offset=15), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=313, col_offset=16), 'file', Load(), lineno=313, col_offset=16), 'flush', Load(), lineno=313, col_offset=16), [], [], None, None, lineno=313, col_offset=16), lineno=313, col_offset=16)], [], lineno=312, col_offset=12), Expr(Call(Attribute(Name('os', Load(), lineno=314, col_offset=12), '_exit', Load(), lineno=314, col_offset=12), [Num(1, lineno=314, col_offset=21)], [], None, None, lineno=314, col_offset=12), lineno=314, col_offset=12)], lineno=307, col_offset=8)], [], lineno=305, col_offset=8)], [], lineno=301, col_offset=4), FunctionDef('_dispatch', arguments([Name('self', Param(), lineno=316, col_offset=18), Name('object', Param(), lineno=316, col_offset=24)], None, None, []), [Assert(Call(Name('isinstance', Load(), lineno=317, col_offset=15), [Name('object', Load(), lineno=317, col_offset=26), Name('AST', Load(), lineno=317, col_offset=34)], [], None, None, lineno=317, col_offset=15), Call(Name('repr', Load(), lineno=317, col_offset=40), [Name('object', Load(), lineno=317, col_offset=45)], [], None, None, lineno=317, col_offset=40), lineno=317, col_offset=8), Assign([Name('klass', Store(), lineno=318, col_offset=8)], Attribute(Name('object', Load(), lineno=318, col_offset=16), '__class__', Load(), lineno=318, col_offset=16), lineno=318, col_offset=8), Assign([Name('meth', Store(), lineno=319, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=319, col_offset=15), 'cache', Load(), lineno=319, col_offset=15), 'get', Load(), lineno=319, col_offset=15), [Name('klass', Load(), lineno=319, col_offset=30)], [], None, None, lineno=319, col_offset=15), lineno=319, col_offset=8), If(Compare(Name('meth', Load(), lineno=320, col_offset=11), [Is()], [Name('None', Load(), lineno=320, col_offset=19)], lineno=320, col_offset=11), [Assign([Name('methname', Store(), lineno=321, col_offset=12)], BinOp(Str('visit', lineno=321, col_offset=23), Add(), Attribute(Name('klass', Load(), lineno=321, col_offset=33), '__name__', Load(), lineno=321, col_offset=33), lineno=321, col_offset=23), lineno=321, col_offset=12), If(Attribute(Name('self', Load(), lineno=322, col_offset=15), 'skip', Load(), lineno=322, col_offset=15), [Assign([Name('meth', Store(), lineno=323, col_offset=16)], Call(Name('getattr', Load(), lineno=323, col_offset=23), [Name('self', Load(), lineno=323, col_offset=31), Name('methname', Load(), lineno=323, col_offset=37), Name('None', Load(), lineno=323, col_offset=47)], [], None, None, lineno=323, col_offset=23), lineno=323, col_offset=16)], [Assign([Name('meth', Store(), lineno=325, col_offset=16)], Call(Name('getattr', Load(), lineno=325, col_offset=23), [Name('self', Load(), lineno=325, col_offset=31), Name('methname', Load(), lineno=325, col_offset=37)], [], None, None, lineno=325, col_offset=23), lineno=325, col_offset=16)], lineno=322, col_offset=12), Assign([Subscript(Attribute(Name('self', Load(), lineno=326, col_offset=12), 'cache', Load(), lineno=326, col_offset=12), Index(Name('klass', Load(), lineno=326, col_offset=23)), Store(), lineno=326, col_offset=12)], Name('meth', Load(), lineno=326, col_offset=32), lineno=326, col_offset=12)], [], lineno=320, col_offset=8), Return(Name('meth', Load(), lineno=327, col_offset=15), lineno=327, col_offset=8)], [], lineno=316, col_offset=4)], [], lineno=295, col_offset=0), ClassDef('Check', [Name('VisitorBase', Load(), lineno=329, col_offset=12)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=331, col_offset=17)], None, None, []), [Expr(Call(Attribute(Call(Name('super', Load(), lineno=332, col_offset=8), [Name('Check', Load(), lineno=332, col_offset=14), Name('self', Load(), lineno=332, col_offset=21)], [], None, None, lineno=332, col_offset=8), '__init__', Load(), lineno=332, col_offset=8), [], [keyword('skip', Name('True', Load(), lineno=332, col_offset=41))], None, None, lineno=332, col_offset=8), lineno=332, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=333, col_offset=8), 'cons', Store(), lineno=333, col_offset=8)], Dict([], [], lineno=333, col_offset=20), lineno=333, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=334, col_offset=8), 'errors', Store(), lineno=334, col_offset=8)], Num(0, lineno=334, col_offset=22), lineno=334, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=335, col_offset=8), 'types', Store(), lineno=335, col_offset=8)], Dict([], [], lineno=335, col_offset=21), lineno=335, col_offset=8)], [], lineno=331, col_offset=4), FunctionDef('visitModule', arguments([Name('self', Param(), lineno=337, col_offset=20), Name('mod', Param(), lineno=337, col_offset=26)], None, None, []), [For(Name('dfn', Store(), lineno=338, col_offset=12), Attribute(Name('mod', Load(), lineno=338, col_offset=19), 'dfns', Load(), lineno=338, col_offset=19), [Expr(Call(Attribute(Name('self', Load(), lineno=339, col_offset=12), 'visit', Load(), lineno=339, col_offset=12), [Name('dfn', Load(), lineno=339, col_offset=23)], [], None, None, lineno=339, col_offset=12), lineno=339, col_offset=12)], [], lineno=338, col_offset=8)], [], lineno=337, col_offset=4), FunctionDef('visitType', arguments([Name('self', Param(), lineno=341, col_offset=18), Name('type', Param(), lineno=341, col_offset=24)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=342, col_offset=8), 'visit', Load(), lineno=342, col_offset=8), [Attribute(Name('type', Load(), lineno=342, col_offset=19), 'value', Load(), lineno=342, col_offset=19), Call(Name('str', Load(), lineno=342, col_offset=31), [Attribute(Name('type', Load(), lineno=342, col_offset=35), 'name', Load(), lineno=342, col_offset=35)], [], None, None, lineno=342, col_offset=31)], [], None, None, lineno=342, col_offset=8), lineno=342, col_offset=8)], [], lineno=341, col_offset=4), FunctionDef('visitSum', arguments([Name('self', Param(), lineno=344, col_offset=17), Name('sum', Param(), lineno=344, col_offset=23), Name('name', Param(), lineno=344, col_offset=28)], None, None, []), [For(Name('t', Store(), lineno=345, col_offset=12), Attribute(Name('sum', Load(), lineno=345, col_offset=17), 'types', Load(), lineno=345, col_offset=17), [Expr(Call(Attribute(Name('self', Load(), lineno=346, col_offset=12), 'visit', Load(), lineno=346, col_offset=12), [Name('t', Load(), lineno=346, col_offset=23), Name('name', Load(), lineno=346, col_offset=26)], [], None, None, lineno=346, col_offset=12), lineno=346, col_offset=12)], [], lineno=345, col_offset=8)], [], lineno=344, col_offset=4), FunctionDef('visitConstructor', arguments([Name('self', Param(), lineno=348, col_offset=25), Name('cons', Param(), lineno=348, col_offset=31), Name('name', Param(), lineno=348, col_offset=37)], None, None, []), [Assign([Name('key', Store(), lineno=349, col_offset=8)], Call(Name('str', Load(), lineno=349, col_offset=14), [Attribute(Name('cons', Load(), lineno=349, col_offset=18), 'name', Load(), lineno=349, col_offset=18)], [], None, None, lineno=349, col_offset=14), lineno=349, col_offset=8), Assign([Name('conflict', Store(), lineno=350, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=350, col_offset=19), 'cons', Load(), lineno=350, col_offset=19), 'get', Load(), lineno=350, col_offset=19), [Name('key', Load(), lineno=350, col_offset=33)], [], None, None, lineno=350, col_offset=19), lineno=350, col_offset=8), If(Compare(Name('conflict', Load(), lineno=351, col_offset=11), [Is()], [Name('None', Load(), lineno=351, col_offset=23)], lineno=351, col_offset=11), [Assign([Subscript(Attribute(Name('self', Load(), lineno=352, col_offset=12), 'cons', Load(), lineno=352, col_offset=12), Index(Name('key', Load(), lineno=352, col_offset=22)), Store(), lineno=352, col_offset=12)], Name('name', Load(), lineno=352, col_offset=29), lineno=352, col_offset=12)], [Print(None, [BinOp(Str('Redefinition of constructor %s', lineno=354, col_offset=18), Mod(), Name('key', Load(), lineno=354, col_offset=53), lineno=354, col_offset=18)], True, lineno=354, col_offset=12), Print(None, [BinOp(Str('Defined in %s and %s', lineno=355, col_offset=18), Mod(), Tuple([Name('conflict', Load(), lineno=355, col_offset=44), Name('name', Load(), lineno=355, col_offset=54)], Load(), lineno=355, col_offset=44), lineno=355, col_offset=18)], True, lineno=355, col_offset=12), AugAssign(Attribute(Name('self', Load(), lineno=356, col_offset=12), 'errors', Store(), lineno=356, col_offset=12), Add(), Num(1, lineno=356, col_offset=27), lineno=356, col_offset=12)], lineno=351, col_offset=8), For(Name('f', Store(), lineno=357, col_offset=12), Attribute(Name('cons', Load(), lineno=357, col_offset=17), 'fields', Load(), lineno=357, col_offset=17), [Expr(Call(Attribute(Name('self', Load(), lineno=358, col_offset=12), 'visit', Load(), lineno=358, col_offset=12), [Name('f', Load(), lineno=358, col_offset=23), Name('key', Load(), lineno=358, col_offset=26)], [], None, None, lineno=358, col_offset=12), lineno=358, col_offset=12)], [], lineno=357, col_offset=8)], [], lineno=348, col_offset=4), FunctionDef('visitField', arguments([Name('self', Param(), lineno=360, col_offset=19), Name('field', Param(), lineno=360, col_offset=25), Name('name', Param(), lineno=360, col_offset=32)], None, None, []), [Assign([Name('key', Store(), lineno=361, col_offset=8)], Call(Name('str', Load(), lineno=361, col_offset=14), [Attribute(Name('field', Load(), lineno=361, col_offset=18), 'type', Load(), lineno=361, col_offset=18)], [], None, None, lineno=361, col_offset=14), lineno=361, col_offset=8), Assign([Name('l', Store(), lineno=362, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=362, col_offset=12), 'types', Load(), lineno=362, col_offset=12), 'setdefault', Load(), lineno=362, col_offset=12), [Name('key', Load(), lineno=362, col_offset=34), List([], Load(), lineno=362, col_offset=39)], [], None, None, lineno=362, col_offset=12), lineno=362, col_offset=8), Expr(Call(Attribute(Name('l', Load(), lineno=363, col_offset=8), 'append', Load(), lineno=363, col_offset=8), [Name('name', Load(), lineno=363, col_offset=17)], [], None, None, lineno=363, col_offset=8), lineno=363, col_offset=8)], [], lineno=360, col_offset=4), FunctionDef('visitProduct', arguments([Name('self', Param(), lineno=365, col_offset=21), Name('prod', Param(), lineno=365, col_offset=27), Name('name', Param(), lineno=365, col_offset=33)], None, None, []), [For(Name('f', Store(), lineno=366, col_offset=12), Attribute(Name('prod', Load(), lineno=366, col_offset=17), 'fields', Load(), lineno=366, col_offset=17), [Expr(Call(Attribute(Name('self', Load(), lineno=367, col_offset=12), 'visit', Load(), lineno=367, col_offset=12), [Name('f', Load(), lineno=367, col_offset=23), Name('name', Load(), lineno=367, col_offset=26)], [], None, None, lineno=367, col_offset=12), lineno=367, col_offset=12)], [], lineno=366, col_offset=8)], [], lineno=365, col_offset=4)], [], lineno=329, col_offset=0), FunctionDef('check', arguments([Name('mod', Param(), lineno=369, col_offset=10)], None, None, []), [Assign([Name('v', Store(), lineno=370, col_offset=4)], Call(Name('Check', Load(), lineno=370, col_offset=8), [], [], None, None, lineno=370, col_offset=8), lineno=370, col_offset=4), Expr(Call(Attribute(Name('v', Load(), lineno=371, col_offset=4), 'visit', Load(), lineno=371, col_offset=4), [Name('mod', Load(), lineno=371, col_offset=12)], [], None, None, lineno=371, col_offset=4), lineno=371, col_offset=4), For(Name('t', Store(), lineno=373, col_offset=8), Attribute(Name('v', Load(), lineno=373, col_offset=13), 'types', Load(), lineno=373, col_offset=13), [If(BoolOp(And(), [Compare(Name('t', Load(), lineno=374, col_offset=11), [NotIn()], [Attribute(Name('mod', Load(), lineno=374, col_offset=20), 'types', Load(), lineno=374, col_offset=20)], lineno=374, col_offset=11), UnaryOp(Not(), Compare(Name('t', Load(), lineno=374, col_offset=38), [In()], [Name('builtin_types', Load(), lineno=374, col_offset=43)], lineno=374, col_offset=38), lineno=374, col_offset=34)], lineno=374, col_offset=11), [AugAssign(Attribute(Name('v', Load(), lineno=375, col_offset=12), 'errors', Store(), lineno=375, col_offset=12), Add(), Num(1, lineno=375, col_offset=24), lineno=375, col_offset=12), Assign([Name('uses', Store(), lineno=376, col_offset=12)], Call(Attribute(Str(', ', lineno=376, col_offset=19), 'join', Load(), lineno=376, col_offset=19), [Subscript(Attribute(Name('v', Load(), lineno=376, col_offset=29), 'types', Load(), lineno=376, col_offset=29), Index(Name('t', Load(), lineno=376, col_offset=37)), Load(), lineno=376, col_offset=29)], [], None, None, lineno=376, col_offset=19), lineno=376, col_offset=12), Print(None, [BinOp(Str('Undefined type %s, used in %s', lineno=377, col_offset=18), Mod(), Tuple([Name('t', Load(), lineno=377, col_offset=53), Name('uses', Load(), lineno=377, col_offset=56)], Load(), lineno=377, col_offset=53), lineno=377, col_offset=18)], True, lineno=377, col_offset=12)], [], lineno=374, col_offset=8)], [], lineno=373, col_offset=4), Return(UnaryOp(Not(), Attribute(Name('v', Load(), lineno=379, col_offset=15), 'errors', Load(), lineno=379, col_offset=15), lineno=379, col_offset=11), lineno=379, col_offset=4)], [], lineno=369, col_offset=0), FunctionDef('parse', arguments([Name('file', Param(), lineno=381, col_offset=10)], None, None, []), [Assign([Name('scanner', Store(), lineno=382, col_offset=4)], Call(Name('ASDLScanner', Load(), lineno=382, col_offset=14), [], [], None, None, lineno=382, col_offset=14), lineno=382, col_offset=4), Assign([Name('parser', Store(), lineno=383, col_offset=4)], Call(Name('ASDLParser', Load(), lineno=383, col_offset=13), [], [], None, None, lineno=383, col_offset=13), lineno=383, col_offset=4), Assign([Name('buf', Store(), lineno=385, col_offset=4)], Call(Attribute(Call(Name('open', Load(), lineno=385, col_offset=10), [Name('file', Load(), lineno=385, col_offset=15)], [], None, None, lineno=385, col_offset=10), 'read', Load(), lineno=385, col_offset=10), [], [], None, None, lineno=385, col_offset=10), lineno=385, col_offset=4), Assign([Name('tokens', Store(), lineno=386, col_offset=4)], Call(Attribute(Name('scanner', Load(), lineno=386, col_offset=13), 'tokenize', Load(), lineno=386, col_offset=13), [Name('buf', Load(), lineno=386, col_offset=30)], [], None, None, lineno=386, col_offset=13), lineno=386, col_offset=4), TryExcept([Return(Call(Attribute(Name('parser', Load(), lineno=388, col_offset=15), 'parse', Load(), lineno=388, col_offset=15), [Name('tokens', Load(), lineno=388, col_offset=28)], [], None, None, lineno=388, col_offset=15), lineno=388, col_offset=8)], [ExceptHandler(Name('ASDLSyntaxError', Load(), lineno=389, col_offset=11), Name('err', Store(), lineno=389, col_offset=28), [Print(None, [Name('err', Load(), lineno=390, col_offset=14)], True, lineno=390, col_offset=8), Assign([Name('lines', Store(), lineno=391, col_offset=8)], Call(Attribute(Name('buf', Load(), lineno=391, col_offset=16), 'split', Load(), lineno=391, col_offset=16), [Str('\n', lineno=391, col_offset=26)], [], None, None, lineno=391, col_offset=16), lineno=391, col_offset=8), Print(None, [Subscript(Name('lines', Load(), lineno=392, col_offset=14), Index(BinOp(Attribute(Name('err', Load(), lineno=392, col_offset=20), 'lineno', Load(), lineno=392, col_offset=20), Sub(), Num(1, lineno=392, col_offset=33), lineno=392, col_offset=20)), Load(), lineno=392, col_offset=14)], True, lineno=392, col_offset=8)], lineno=389, col_offset=4)], [], lineno=387, col_offset=4)], [], lineno=381, col_offset=0), If(Compare(Name('__name__', Load(), lineno=394, col_offset=3), [Eq()], [Str('__main__', lineno=394, col_offset=15)], lineno=394, col_offset=3), [Import([alias('glob', None)], lineno=395, col_offset=4), Import([alias('sys', None)], lineno=396, col_offset=4), If(Compare(Call(Name('len', Load(), lineno=398, col_offset=7), [Attribute(Name('sys', Load(), lineno=398, col_offset=11), 'argv', Load(), lineno=398, col_offset=11)], [], None, None, lineno=398, col_offset=7), [Gt()], [Num(1, lineno=398, col_offset=23)], lineno=398, col_offset=7), [Assign([Name('files', Store(), lineno=399, col_offset=8)], Subscript(Attribute(Name('sys', Load(), lineno=399, col_offset=16), 'argv', Load(), lineno=399, col_offset=16), Slice(Num(1, lineno=399, col_offset=25), None, None), Load(), lineno=399, col_offset=16), lineno=399, col_offset=8)], [Assign([Name('testdir', Store(), lineno=401, col_offset=8)], Str('tests', lineno=401, col_offset=18), lineno=401, col_offset=8), Assign([Name('files', Store(), lineno=402, col_offset=8)], Call(Attribute(Name('glob', Load(), lineno=402, col_offset=16), 'glob', Load(), lineno=402, col_offset=16), [BinOp(Name('testdir', Load(), lineno=402, col_offset=26), Add(), Str('/*.asdl', lineno=402, col_offset=36), lineno=402, col_offset=26)], [], None, None, lineno=402, col_offset=16), lineno=402, col_offset=8)], lineno=398, col_offset=4), For(Name('file', Store(), lineno=404, col_offset=8), Name('files', Load(), lineno=404, col_offset=16), [Print(None, [Name('file', Load(), lineno=405, col_offset=14)], True, lineno=405, col_offset=8), Assign([Name('mod', Store(), lineno=406, col_offset=8)], Call(Name('parse', Load(), lineno=406, col_offset=14), [Name('file', Load(), lineno=406, col_offset=20)], [], None, None, lineno=406, col_offset=14), lineno=406, col_offset=8), Print(None, [Str('module', lineno=407, col_offset=14), Attribute(Name('mod', Load(), lineno=407, col_offset=24), 'name', Load(), lineno=407, col_offset=24)], True, lineno=407, col_offset=8), Print(None, [Call(Name('len', Load(), lineno=408, col_offset=14), [Attribute(Name('mod', Load(), lineno=408, col_offset=18), 'dfns', Load(), lineno=408, col_offset=18)], [], None, None, lineno=408, col_offset=14), Str('definitions', lineno=408, col_offset=29)], True, lineno=408, col_offset=8), If(UnaryOp(Not(), Call(Name('check', Load(), lineno=409, col_offset=15), [Name('mod', Load(), lineno=409, col_offset=21)], [], None, None, lineno=409, col_offset=15), lineno=409, col_offset=11), [Print(None, [Str('Check failed', lineno=410, col_offset=18)], True, lineno=410, col_offset=12)], [For(Name('dfn', Store(), lineno=412, col_offset=16), Attribute(Name('mod', Load(), lineno=412, col_offset=23), 'dfns', Load(), lineno=412, col_offset=23), [Print(None, [Attribute(Name('dfn', Load(), lineno=413, col_offset=22), 'type', Load(), lineno=413, col_offset=22)], True, lineno=413, col_offset=16)], [], lineno=412, col_offset=12)], lineno=409, col_offset=8)], [], lineno=404, col_offset=4)], [], lineno=394, col_offset=0)])
