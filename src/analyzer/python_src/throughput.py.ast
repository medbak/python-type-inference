Module([Import([alias('sys', None), alias('time', None)], lineno=15, col_offset=0), ImportFrom('socket', [alias('*', None)], 0, lineno=16, col_offset=0), Assign([Name('MY_PORT', Store(), lineno=18, col_offset=0)], BinOp(Num(50000, lineno=18, col_offset=10), Add(), Num(42, lineno=18, col_offset=18), lineno=18, col_offset=10), lineno=18, col_offset=0), Assign([Name('BUFSIZE', Store(), lineno=20, col_offset=0)], Num(1024, lineno=20, col_offset=10), lineno=20, col_offset=0), FunctionDef('main', arguments([], None, None, []), [If(Compare(Call(Name('len', Load(), lineno=24, col_offset=7), [Attribute(Name('sys', Load(), lineno=24, col_offset=11), 'argv', Load(), lineno=24, col_offset=11)], [], None, None, lineno=24, col_offset=7), [Lt()], [Num(2, lineno=24, col_offset=23)], lineno=24, col_offset=7), [Expr(Call(Name('usage', Load(), lineno=25, col_offset=8), [], [], None, None, lineno=25, col_offset=8), lineno=25, col_offset=8)], [], lineno=24, col_offset=4), If(Compare(Subscript(Attribute(Name('sys', Load(), lineno=26, col_offset=7), 'argv', Load(), lineno=26, col_offset=7), Index(Num(1, lineno=26, col_offset=16)), Load(), lineno=26, col_offset=7), [Eq()], [Str('-s', lineno=26, col_offset=22)], lineno=26, col_offset=7), [Expr(Call(Name('server', Load(), lineno=27, col_offset=8), [], [], None, None, lineno=27, col_offset=8), lineno=27, col_offset=8)], [If(Compare(Subscript(Attribute(Name('sys', Load(), lineno=28, col_offset=9), 'argv', Load(), lineno=28, col_offset=9), Index(Num(1, lineno=28, col_offset=18)), Load(), lineno=28, col_offset=9), [Eq()], [Str('-c', lineno=28, col_offset=24)], lineno=28, col_offset=9), [Expr(Call(Name('client', Load(), lineno=29, col_offset=8), [], [], None, None, lineno=29, col_offset=8), lineno=29, col_offset=8)], [Expr(Call(Name('usage', Load(), lineno=31, col_offset=8), [], [], None, None, lineno=31, col_offset=8), lineno=31, col_offset=8)], lineno=28, col_offset=9)], lineno=26, col_offset=4)], [], lineno=23, col_offset=0), FunctionDef('usage', arguments([], None, None, []), [Assign([Attribute(Name('sys', Load(), lineno=35, col_offset=4), 'stdout', Store(), lineno=35, col_offset=4)], Attribute(Name('sys', Load(), lineno=35, col_offset=17), 'stderr', Load(), lineno=35, col_offset=17), lineno=35, col_offset=4), Print(None, [Str('Usage:    (on host_A) throughput -s [port]', lineno=36, col_offset=10)], True, lineno=36, col_offset=4), Print(None, [Str('and then: (on host_B) throughput -c count host_A [port]', lineno=37, col_offset=10)], True, lineno=37, col_offset=4), Expr(Call(Attribute(Name('sys', Load(), lineno=38, col_offset=4), 'exit', Load(), lineno=38, col_offset=4), [Num(2, lineno=38, col_offset=13)], [], None, None, lineno=38, col_offset=4), lineno=38, col_offset=4)], [], lineno=34, col_offset=0), FunctionDef('server', arguments([], None, None, []), [If(Compare(Call(Name('len', Load(), lineno=42, col_offset=7), [Attribute(Name('sys', Load(), lineno=42, col_offset=11), 'argv', Load(), lineno=42, col_offset=11)], [], None, None, lineno=42, col_offset=7), [Gt()], [Num(2, lineno=42, col_offset=23)], lineno=42, col_offset=7), [Assign([Name('port', Store(), lineno=43, col_offset=8)], Call(Name('eval', Load(), lineno=43, col_offset=15), [Subscript(Attribute(Name('sys', Load(), lineno=43, col_offset=20), 'argv', Load(), lineno=43, col_offset=20), Index(Num(2, lineno=43, col_offset=29)), Load(), lineno=43, col_offset=20)], [], None, None, lineno=43, col_offset=15), lineno=43, col_offset=8)], [Assign([Name('port', Store(), lineno=45, col_offset=8)], Name('MY_PORT', Load(), lineno=45, col_offset=15), lineno=45, col_offset=8)], lineno=42, col_offset=4), Assign([Name('s', Store(), lineno=46, col_offset=4)], Call(Name('socket', Load(), lineno=46, col_offset=8), [Name('AF_INET', Load(), lineno=46, col_offset=15), Name('SOCK_STREAM', Load(), lineno=46, col_offset=24)], [], None, None, lineno=46, col_offset=8), lineno=46, col_offset=4), Expr(Call(Attribute(Name('s', Load(), lineno=47, col_offset=4), 'bind', Load(), lineno=47, col_offset=4), [Tuple([Str('', lineno=47, col_offset=12), Name('port', Load(), lineno=47, col_offset=16)], Load(), lineno=47, col_offset=12)], [], None, None, lineno=47, col_offset=4), lineno=47, col_offset=4), Expr(Call(Attribute(Name('s', Load(), lineno=48, col_offset=4), 'listen', Load(), lineno=48, col_offset=4), [Num(1, lineno=48, col_offset=13)], [], None, None, lineno=48, col_offset=4), lineno=48, col_offset=4), Print(None, [Str('Server ready...', lineno=49, col_offset=10)], True, lineno=49, col_offset=4), While(Num(1, lineno=50, col_offset=10), [Assign([Tuple([Name('conn', Store(), lineno=51, col_offset=8), Tuple([Name('host', Store(), lineno=51, col_offset=15), Name('remoteport', Store(), lineno=51, col_offset=21)], Store(), lineno=51, col_offset=15)], Store(), lineno=51, col_offset=8)], Call(Attribute(Name('s', Load(), lineno=51, col_offset=35), 'accept', Load(), lineno=51, col_offset=35), [], [], None, None, lineno=51, col_offset=35), lineno=51, col_offset=8), While(Num(1, lineno=52, col_offset=14), [Assign([Name('data', Store(), lineno=53, col_offset=12)], Call(Attribute(Name('conn', Load(), lineno=53, col_offset=19), 'recv', Load(), lineno=53, col_offset=19), [Name('BUFSIZE', Load(), lineno=53, col_offset=29)], [], None, None, lineno=53, col_offset=19), lineno=53, col_offset=12), If(UnaryOp(Not(), Name('data', Load(), lineno=54, col_offset=19), lineno=54, col_offset=15), [Break( lineno=55, col_offset=16)], [], lineno=54, col_offset=12), Delete([Name('data', Del(), lineno=56, col_offset=16)], lineno=56, col_offset=12)], [], lineno=52, col_offset=8), Expr(Call(Attribute(Name('conn', Load(), lineno=57, col_offset=8), 'send', Load(), lineno=57, col_offset=8), [Str('OK\n', lineno=57, col_offset=18)], [], None, None, lineno=57, col_offset=8), lineno=57, col_offset=8), Expr(Call(Attribute(Name('conn', Load(), lineno=58, col_offset=8), 'close', Load(), lineno=58, col_offset=8), [], [], None, None, lineno=58, col_offset=8), lineno=58, col_offset=8), Print(None, [Str('Done with', lineno=59, col_offset=14), Name('host', Load(), lineno=59, col_offset=27), Str('port', lineno=59, col_offset=33), Name('remoteport', Load(), lineno=59, col_offset=41)], True, lineno=59, col_offset=8)], [], lineno=50, col_offset=4)], [], lineno=41, col_offset=0), FunctionDef('client', arguments([], None, None, []), [If(Compare(Call(Name('len', Load(), lineno=63, col_offset=7), [Attribute(Name('sys', Load(), lineno=63, col_offset=11), 'argv', Load(), lineno=63, col_offset=11)], [], None, None, lineno=63, col_offset=7), [Lt()], [Num(4, lineno=63, col_offset=23)], lineno=63, col_offset=7), [Expr(Call(Name('usage', Load(), lineno=64, col_offset=8), [], [], None, None, lineno=64, col_offset=8), lineno=64, col_offset=8)], [], lineno=63, col_offset=4), Assign([Name('count', Store(), lineno=65, col_offset=4)], Call(Name('int', Load(), lineno=65, col_offset=12), [Call(Name('eval', Load(), lineno=65, col_offset=16), [Subscript(Attribute(Name('sys', Load(), lineno=65, col_offset=21), 'argv', Load(), lineno=65, col_offset=21), Index(Num(2, lineno=65, col_offset=30)), Load(), lineno=65, col_offset=21)], [], None, None, lineno=65, col_offset=16)], [], None, None, lineno=65, col_offset=12), lineno=65, col_offset=4), Assign([Name('host', Store(), lineno=66, col_offset=4)], Subscript(Attribute(Name('sys', Load(), lineno=66, col_offset=11), 'argv', Load(), lineno=66, col_offset=11), Index(Num(3, lineno=66, col_offset=20)), Load(), lineno=66, col_offset=11), lineno=66, col_offset=4), If(Compare(Call(Name('len', Load(), lineno=67, col_offset=7), [Attribute(Name('sys', Load(), lineno=67, col_offset=11), 'argv', Load(), lineno=67, col_offset=11)], [], None, None, lineno=67, col_offset=7), [Gt()], [Num(4, lineno=67, col_offset=23)], lineno=67, col_offset=7), [Assign([Name('port', Store(), lineno=68, col_offset=8)], Call(Name('eval', Load(), lineno=68, col_offset=15), [Subscript(Attribute(Name('sys', Load(), lineno=68, col_offset=20), 'argv', Load(), lineno=68, col_offset=20), Index(Num(4, lineno=68, col_offset=29)), Load(), lineno=68, col_offset=20)], [], None, None, lineno=68, col_offset=15), lineno=68, col_offset=8)], [Assign([Name('port', Store(), lineno=70, col_offset=8)], Name('MY_PORT', Load(), lineno=70, col_offset=15), lineno=70, col_offset=8)], lineno=67, col_offset=4), Assign([Name('testdata', Store(), lineno=71, col_offset=4)], BinOp(BinOp(Str('x', lineno=71, col_offset=15), Mult(), BinOp(Name('BUFSIZE', Load(), lineno=71, col_offset=22), Sub(), Num(1, lineno=71, col_offset=30), lineno=71, col_offset=22), lineno=71, col_offset=15), Add(), Str('\n', lineno=71, col_offset=35), lineno=71, col_offset=15), lineno=71, col_offset=4), Assign([Name('t1', Store(), lineno=72, col_offset=4)], Call(Attribute(Name('time', Load(), lineno=72, col_offset=9), 'time', Load(), lineno=72, col_offset=9), [], [], None, None, lineno=72, col_offset=9), lineno=72, col_offset=4), Assign([Name('s', Store(), lineno=73, col_offset=4)], Call(Name('socket', Load(), lineno=73, col_offset=8), [Name('AF_INET', Load(), lineno=73, col_offset=15), Name('SOCK_STREAM', Load(), lineno=73, col_offset=24)], [], None, None, lineno=73, col_offset=8), lineno=73, col_offset=4), Assign([Name('t2', Store(), lineno=74, col_offset=4)], Call(Attribute(Name('time', Load(), lineno=74, col_offset=9), 'time', Load(), lineno=74, col_offset=9), [], [], None, None, lineno=74, col_offset=9), lineno=74, col_offset=4), Expr(Call(Attribute(Name('s', Load(), lineno=75, col_offset=4), 'connect', Load(), lineno=75, col_offset=4), [Tuple([Name('host', Load(), lineno=75, col_offset=15), Name('port', Load(), lineno=75, col_offset=21)], Load(), lineno=75, col_offset=15)], [], None, None, lineno=75, col_offset=4), lineno=75, col_offset=4), Assign([Name('t3', Store(), lineno=76, col_offset=4)], Call(Attribute(Name('time', Load(), lineno=76, col_offset=9), 'time', Load(), lineno=76, col_offset=9), [], [], None, None, lineno=76, col_offset=9), lineno=76, col_offset=4), Assign([Name('i', Store(), lineno=77, col_offset=4)], Num(0, lineno=77, col_offset=8), lineno=77, col_offset=4), While(Compare(Name('i', Load(), lineno=78, col_offset=10), [Lt()], [Name('count', Load(), lineno=78, col_offset=14)], lineno=78, col_offset=10), [Assign([Name('i', Store(), lineno=79, col_offset=8)], BinOp(Name('i', Load(), lineno=79, col_offset=12), Add(), Num(1, lineno=79, col_offset=14), lineno=79, col_offset=12), lineno=79, col_offset=8), Expr(Call(Attribute(Name('s', Load(), lineno=80, col_offset=8), 'send', Load(), lineno=80, col_offset=8), [Name('testdata', Load(), lineno=80, col_offset=15)], [], None, None, lineno=80, col_offset=8), lineno=80, col_offset=8)], [], lineno=78, col_offset=4), Expr(Call(Attribute(Name('s', Load(), lineno=81, col_offset=4), 'shutdown', Load(), lineno=81, col_offset=4), [Num(1, lineno=81, col_offset=15)], [], None, None, lineno=81, col_offset=4), lineno=81, col_offset=4), Assign([Name('t4', Store(), lineno=82, col_offset=4)], Call(Attribute(Name('time', Load(), lineno=82, col_offset=9), 'time', Load(), lineno=82, col_offset=9), [], [], None, None, lineno=82, col_offset=9), lineno=82, col_offset=4), Assign([Name('data', Store(), lineno=83, col_offset=4)], Call(Attribute(Name('s', Load(), lineno=83, col_offset=11), 'recv', Load(), lineno=83, col_offset=11), [Name('BUFSIZE', Load(), lineno=83, col_offset=18)], [], None, None, lineno=83, col_offset=11), lineno=83, col_offset=4), Assign([Name('t5', Store(), lineno=84, col_offset=4)], Call(Attribute(Name('time', Load(), lineno=84, col_offset=9), 'time', Load(), lineno=84, col_offset=9), [], [], None, None, lineno=84, col_offset=9), lineno=84, col_offset=4), Print(None, [Name('data', Load(), lineno=85, col_offset=10)], True, lineno=85, col_offset=4), Print(None, [Str('Raw timers:', lineno=86, col_offset=10), Name('t1', Load(), lineno=86, col_offset=25), Name('t2', Load(), lineno=86, col_offset=29), Name('t3', Load(), lineno=86, col_offset=33), Name('t4', Load(), lineno=86, col_offset=37), Name('t5', Load(), lineno=86, col_offset=41)], True, lineno=86, col_offset=4), Print(None, [Str('Intervals:', lineno=87, col_offset=10), BinOp(Name('t2', Load(), lineno=87, col_offset=24), Sub(), Name('t1', Load(), lineno=87, col_offset=27), lineno=87, col_offset=24), BinOp(Name('t3', Load(), lineno=87, col_offset=31), Sub(), Name('t2', Load(), lineno=87, col_offset=34), lineno=87, col_offset=31), BinOp(Name('t4', Load(), lineno=87, col_offset=38), Sub(), Name('t3', Load(), lineno=87, col_offset=41), lineno=87, col_offset=38), BinOp(Name('t5', Load(), lineno=87, col_offset=45), Sub(), Name('t4', Load(), lineno=87, col_offset=48), lineno=87, col_offset=45)], True, lineno=87, col_offset=4), Print(None, [Str('Total:', lineno=88, col_offset=10), BinOp(Name('t5', Load(), lineno=88, col_offset=20), Sub(), Name('t1', Load(), lineno=88, col_offset=23), lineno=88, col_offset=20)], True, lineno=88, col_offset=4), Print(None, [Str('Throughput:', lineno=89, col_offset=10), Call(Name('round', Load(), lineno=89, col_offset=25), [BinOp(BinOp(BinOp(Name('BUFSIZE', Load(), lineno=89, col_offset=32), Mult(), Name('count', Load(), lineno=89, col_offset=40), lineno=89, col_offset=32), Mult(), Num(0.001, lineno=89, col_offset=46), lineno=89, col_offset=45), Div(), BinOp(Name('t5', Load(), lineno=89, col_offset=56), Sub(), Name('t1', Load(), lineno=89, col_offset=59), lineno=89, col_offset=56), lineno=89, col_offset=31), Num(3, lineno=89, col_offset=64)], [], None, None, lineno=89, col_offset=25)], False, lineno=89, col_offset=4), Print(None, [Str('K/sec.', lineno=90, col_offset=10)], True, lineno=90, col_offset=4)], [], lineno=62, col_offset=0), Expr(Call(Name('main', Load(), lineno=93, col_offset=0), [], [], None, None, lineno=93, col_offset=0), lineno=93, col_offset=0)])
