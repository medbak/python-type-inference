Module([Expr(Str('Tests for distutils.command.install_scripts.', lineno=1, col_offset=0), lineno=1, col_offset=0), Import([alias('os', None)], lineno=3, col_offset=0), Import([alias('unittest', None)], lineno=4, col_offset=0), ImportFrom('distutils.command.install_scripts', [alias('install_scripts', None)], 0, lineno=6, col_offset=0), ImportFrom('distutils.core', [alias('Distribution', None)], 0, lineno=7, col_offset=0), ImportFrom('distutils.tests', [alias('support', None)], 0, lineno=9, col_offset=0), ClassDef('InstallScriptsTestCase', [Attribute(Name('support', Load(), lineno=12, col_offset=29), 'TempdirManager', Load(), lineno=12, col_offset=29), Attribute(Name('support', Load(), lineno=13, col_offset=29), 'LoggingSilencer', Load(), lineno=13, col_offset=29), Attribute(Name('unittest', Load(), lineno=14, col_offset=29), 'TestCase', Load(), lineno=14, col_offset=29)], [FunctionDef('test_default_settings', arguments([Name('self', Param(), lineno=16, col_offset=30)], None, None, []), [Assign([Name('dist', Store(), lineno=17, col_offset=8)], Call(Name('Distribution', Load(), lineno=17, col_offset=15), [], [], None, None, lineno=17, col_offset=15), lineno=17, col_offset=8), Assign([Subscript(Attribute(Name('dist', Load(), lineno=18, col_offset=8), 'command_obj', Load(), lineno=18, col_offset=8), Index(Str('build', lineno=18, col_offset=25)), Store(), lineno=18, col_offset=8)], Call(Attribute(Name('support', Load(), lineno=18, col_offset=36), 'DummyCommand', Load(), lineno=18, col_offset=36), [], [keyword('build_scripts', Str('/foo/bar', lineno=19, col_offset=26))], None, None, lineno=18, col_offset=36), lineno=18, col_offset=8), Assign([Subscript(Attribute(Name('dist', Load(), lineno=20, col_offset=8), 'command_obj', Load(), lineno=20, col_offset=8), Index(Str('install', lineno=20, col_offset=25)), Store(), lineno=20, col_offset=8)], Call(Attribute(Name('support', Load(), lineno=20, col_offset=38), 'DummyCommand', Load(), lineno=20, col_offset=38), [], [keyword('install_scripts', Str('/splat/funk', lineno=21, col_offset=28)), keyword('force', Num(1, lineno=22, col_offset=18)), keyword('skip_build', Num(1, lineno=23, col_offset=23))], None, None, lineno=20, col_offset=38), lineno=20, col_offset=8), Assign([Name('cmd', Store(), lineno=25, col_offset=8)], Call(Name('install_scripts', Load(), lineno=25, col_offset=14), [Name('dist', Load(), lineno=25, col_offset=30)], [], None, None, lineno=25, col_offset=14), lineno=25, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=26, col_offset=8), 'assertTrue', Load(), lineno=26, col_offset=8), [UnaryOp(Not(), Attribute(Name('cmd', Load(), lineno=26, col_offset=28), 'force', Load(), lineno=26, col_offset=28), lineno=26, col_offset=24)], [], None, None, lineno=26, col_offset=8), lineno=26, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=27, col_offset=8), 'assertTrue', Load(), lineno=27, col_offset=8), [UnaryOp(Not(), Attribute(Name('cmd', Load(), lineno=27, col_offset=28), 'skip_build', Load(), lineno=27, col_offset=28), lineno=27, col_offset=24)], [], None, None, lineno=27, col_offset=8), lineno=27, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=28, col_offset=8), 'assertTrue', Load(), lineno=28, col_offset=8), [Compare(Attribute(Name('cmd', Load(), lineno=28, col_offset=24), 'build_dir', Load(), lineno=28, col_offset=24), [Is()], [Name('None', Load(), lineno=28, col_offset=41)], lineno=28, col_offset=24)], [], None, None, lineno=28, col_offset=8), lineno=28, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=29, col_offset=8), 'assertTrue', Load(), lineno=29, col_offset=8), [Compare(Attribute(Name('cmd', Load(), lineno=29, col_offset=24), 'install_dir', Load(), lineno=29, col_offset=24), [Is()], [Name('None', Load(), lineno=29, col_offset=43)], lineno=29, col_offset=24)], [], None, None, lineno=29, col_offset=8), lineno=29, col_offset=8), Expr(Call(Attribute(Name('cmd', Load(), lineno=31, col_offset=8), 'finalize_options', Load(), lineno=31, col_offset=8), [], [], None, None, lineno=31, col_offset=8), lineno=31, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=33, col_offset=8), 'assertTrue', Load(), lineno=33, col_offset=8), [Attribute(Name('cmd', Load(), lineno=33, col_offset=24), 'force', Load(), lineno=33, col_offset=24)], [], None, None, lineno=33, col_offset=8), lineno=33, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=34, col_offset=8), 'assertTrue', Load(), lineno=34, col_offset=8), [Attribute(Name('cmd', Load(), lineno=34, col_offset=24), 'skip_build', Load(), lineno=34, col_offset=24)], [], None, None, lineno=34, col_offset=8), lineno=34, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=35, col_offset=8), 'assertEqual', Load(), lineno=35, col_offset=8), [Attribute(Name('cmd', Load(), lineno=35, col_offset=25), 'build_dir', Load(), lineno=35, col_offset=25), Str('/foo/bar', lineno=35, col_offset=40)], [], None, None, lineno=35, col_offset=8), lineno=35, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=36, col_offset=8), 'assertEqual', Load(), lineno=36, col_offset=8), [Attribute(Name('cmd', Load(), lineno=36, col_offset=25), 'install_dir', Load(), lineno=36, col_offset=25), Str('/splat/funk', lineno=36, col_offset=42)], [], None, None, lineno=36, col_offset=8), lineno=36, col_offset=8)], [], lineno=16, col_offset=4), FunctionDef('test_installation', arguments([Name('self', Param(), lineno=38, col_offset=26)], None, None, []), [Assign([Name('source', Store(), lineno=39, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=39, col_offset=17), 'mkdtemp', Load(), lineno=39, col_offset=17), [], [], None, None, lineno=39, col_offset=17), lineno=39, col_offset=8), Assign([Name('expected', Store(), lineno=40, col_offset=8)], List([], Load(), lineno=40, col_offset=19), lineno=40, col_offset=8), FunctionDef('write_script', arguments([Name('name', Param(), lineno=42, col_offset=25), Name('text', Param(), lineno=42, col_offset=31)], None, None, []), [Expr(Call(Attribute(Name('expected', Load(), lineno=43, col_offset=12), 'append', Load(), lineno=43, col_offset=12), [Name('name', Load(), lineno=43, col_offset=28)], [], None, None, lineno=43, col_offset=12), lineno=43, col_offset=12), Assign([Name('f', Store(), lineno=44, col_offset=12)], Call(Name('open', Load(), lineno=44, col_offset=16), [Call(Attribute(Attribute(Name('os', Load(), lineno=44, col_offset=21), 'path', Load(), lineno=44, col_offset=21), 'join', Load(), lineno=44, col_offset=21), [Name('source', Load(), lineno=44, col_offset=34), Name('name', Load(), lineno=44, col_offset=42)], [], None, None, lineno=44, col_offset=21), Str('w', lineno=44, col_offset=49)], [], None, None, lineno=44, col_offset=16), lineno=44, col_offset=12), TryFinally([Expr(Call(Attribute(Name('f', Load(), lineno=46, col_offset=16), 'write', Load(), lineno=46, col_offset=16), [Name('text', Load(), lineno=46, col_offset=24)], [], None, None, lineno=46, col_offset=16), lineno=46, col_offset=16)], [Expr(Call(Attribute(Name('f', Load(), lineno=48, col_offset=16), 'close', Load(), lineno=48, col_offset=16), [], [], None, None, lineno=48, col_offset=16), lineno=48, col_offset=16)], lineno=45, col_offset=12)], [], lineno=42, col_offset=8), Expr(Call(Name('write_script', Load(), lineno=50, col_offset=8), [Str('script1.py', lineno=50, col_offset=21), Str('#! /usr/bin/env python2.3\n# bogus script w/ Python sh-bang\npass\n', lineno=50, col_offset=36)], [], None, None, lineno=50, col_offset=8), lineno=50, col_offset=8), Expr(Call(Name('write_script', Load(), lineno=53, col_offset=8), [Str('script2.py', lineno=53, col_offset=21), Str('#!/usr/bin/python\n# bogus script w/ Python sh-bang\npass\n', lineno=53, col_offset=36)], [], None, None, lineno=53, col_offset=8), lineno=53, col_offset=8), Expr(Call(Name('write_script', Load(), lineno=56, col_offset=8), [Str('shell.sh', lineno=56, col_offset=21), Str('#!/bin/sh\n# bogus shell script w/ sh-bang\nexit 0\n', lineno=56, col_offset=34)], [], None, None, lineno=56, col_offset=8), lineno=56, col_offset=8), Assign([Name('target', Store(), lineno=60, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=60, col_offset=17), 'mkdtemp', Load(), lineno=60, col_offset=17), [], [], None, None, lineno=60, col_offset=17), lineno=60, col_offset=8), Assign([Name('dist', Store(), lineno=61, col_offset=8)], Call(Name('Distribution', Load(), lineno=61, col_offset=15), [], [], None, None, lineno=61, col_offset=15), lineno=61, col_offset=8), Assign([Subscript(Attribute(Name('dist', Load(), lineno=62, col_offset=8), 'command_obj', Load(), lineno=62, col_offset=8), Index(Str('build', lineno=62, col_offset=25)), Store(), lineno=62, col_offset=8)], Call(Attribute(Name('support', Load(), lineno=62, col_offset=36), 'DummyCommand', Load(), lineno=62, col_offset=36), [], [keyword('build_scripts', Name('source', Load(), lineno=62, col_offset=71))], None, None, lineno=62, col_offset=36), lineno=62, col_offset=8), Assign([Subscript(Attribute(Name('dist', Load(), lineno=63, col_offset=8), 'command_obj', Load(), lineno=63, col_offset=8), Index(Str('install', lineno=63, col_offset=25)), Store(), lineno=63, col_offset=8)], Call(Attribute(Name('support', Load(), lineno=63, col_offset=38), 'DummyCommand', Load(), lineno=63, col_offset=38), [], [keyword('install_scripts', Name('target', Load(), lineno=64, col_offset=28)), keyword('force', Num(1, lineno=65, col_offset=18)), keyword('skip_build', Num(1, lineno=66, col_offset=23))], None, None, lineno=63, col_offset=38), lineno=63, col_offset=8), Assign([Name('cmd', Store(), lineno=68, col_offset=8)], Call(Name('install_scripts', Load(), lineno=68, col_offset=14), [Name('dist', Load(), lineno=68, col_offset=30)], [], None, None, lineno=68, col_offset=14), lineno=68, col_offset=8), Expr(Call(Attribute(Name('cmd', Load(), lineno=69, col_offset=8), 'finalize_options', Load(), lineno=69, col_offset=8), [], [], None, None, lineno=69, col_offset=8), lineno=69, col_offset=8), Expr(Call(Attribute(Name('cmd', Load(), lineno=70, col_offset=8), 'run', Load(), lineno=70, col_offset=8), [], [], None, None, lineno=70, col_offset=8), lineno=70, col_offset=8), Assign([Name('installed', Store(), lineno=72, col_offset=8)], Call(Attribute(Name('os', Load(), lineno=72, col_offset=20), 'listdir', Load(), lineno=72, col_offset=20), [Name('target', Load(), lineno=72, col_offset=31)], [], None, None, lineno=72, col_offset=20), lineno=72, col_offset=8), For(Name('name', Store(), lineno=73, col_offset=12), Name('expected', Load(), lineno=73, col_offset=20), [Expr(Call(Attribute(Name('self', Load(), lineno=74, col_offset=12), 'assertTrue', Load(), lineno=74, col_offset=12), [Compare(Name('name', Load(), lineno=74, col_offset=28), [In()], [Name('installed', Load(), lineno=74, col_offset=36)], lineno=74, col_offset=28)], [], None, None, lineno=74, col_offset=12), lineno=74, col_offset=12)], [], lineno=73, col_offset=8)], [], lineno=38, col_offset=4)], [], lineno=12, col_offset=0), FunctionDef('test_suite', arguments([], None, None, []), [Return(Call(Attribute(Name('unittest', Load(), lineno=78, col_offset=11), 'makeSuite', Load(), lineno=78, col_offset=11), [Name('InstallScriptsTestCase', Load(), lineno=78, col_offset=30)], [], None, None, lineno=78, col_offset=11), lineno=78, col_offset=4)], [], lineno=77, col_offset=0), If(Compare(Name('__name__', Load(), lineno=80, col_offset=3), [Eq()], [Str('__main__', lineno=80, col_offset=15)], lineno=80, col_offset=3), [Expr(Call(Attribute(Name('unittest', Load(), lineno=81, col_offset=4), 'main', Load(), lineno=81, col_offset=4), [], [keyword('defaultTest', Str('test_suite', lineno=81, col_offset=30))], None, None, lineno=81, col_offset=4), lineno=81, col_offset=4)], [], lineno=80, col_offset=0)])
