Module([Assign([Name('_cvsid', Store(), lineno=18, col_offset=0)], Str('$Id: dbtables.py 79285 2010-03-22 14:22:26Z jesus.cea $', lineno=18, col_offset=9), lineno=18, col_offset=0), Import([alias('re', None)], lineno=20, col_offset=0), Import([alias('sys', None)], lineno=21, col_offset=0), Import([alias('copy', None)], lineno=22, col_offset=0), Import([alias('random', None)], lineno=23, col_offset=0), Import([alias('struct', None)], lineno=24, col_offset=0), If(Compare(Subscript(Attribute(Name('sys', Load(), lineno=27, col_offset=3), 'version_info', Load(), lineno=27, col_offset=3), Index(Num(0, lineno=27, col_offset=20)), Load(), lineno=27, col_offset=3), [GtE()], [Num(3, lineno=27, col_offset=26)], lineno=27, col_offset=3), [Import([alias('pickle', None)], lineno=28, col_offset=4)], [If(Compare(Attribute(Name('sys', Load(), lineno=30, col_offset=7), 'version_info', Load(), lineno=30, col_offset=7), [Lt()], [Tuple([Num(2, lineno=30, col_offset=27), Num(6, lineno=30, col_offset=30)], Load(), lineno=30, col_offset=27)], lineno=30, col_offset=7), [Import([alias('cPickle', 'pickle')], lineno=31, col_offset=8)], [Import([alias('warnings', None)], lineno=43, col_offset=8), Assign([Name('w', Store(), lineno=44, col_offset=8)], Call(Attribute(Name('warnings', Load(), lineno=44, col_offset=12), 'catch_warnings', Load(), lineno=44, col_offset=12), [], [], None, None, lineno=44, col_offset=12), lineno=44, col_offset=8), Expr(Call(Attribute(Name('w', Load(), lineno=45, col_offset=8), '__enter__', Load(), lineno=45, col_offset=8), [], [], None, None, lineno=45, col_offset=8), lineno=45, col_offset=8), TryFinally([Expr(Call(Attribute(Name('warnings', Load(), lineno=47, col_offset=12), 'filterwarnings', Load(), lineno=47, col_offset=12), [Str('ignore', lineno=47, col_offset=36)], [keyword('message', Str('the cPickle module has been removed in Python 3.0', lineno=48, col_offset=24)), keyword('category', Name('DeprecationWarning', Load(), lineno=49, col_offset=25))], None, None, lineno=47, col_offset=12), lineno=47, col_offset=12), Import([alias('cPickle', 'pickle')], lineno=50, col_offset=12)], [Expr(Call(Attribute(Name('w', Load(), lineno=52, col_offset=12), '__exit__', Load(), lineno=52, col_offset=12), [], [], None, None, lineno=52, col_offset=12), lineno=52, col_offset=12)], lineno=46, col_offset=8), Delete([Name('w', Del(), lineno=53, col_offset=12)], lineno=53, col_offset=8)], lineno=30, col_offset=4)], lineno=27, col_offset=0), TryExcept([ImportFrom('bsddb3', [alias('db', None)], 0, lineno=57, col_offset=4)], [ExceptHandler(Name('ImportError', Load(), lineno=58, col_offset=7), None, [ImportFrom('bsddb', [alias('db', None)], 0, lineno=60, col_offset=4)], lineno=58, col_offset=0)], [], lineno=55, col_offset=0), ClassDef('TableDBError', [Name('StandardError', Load(), lineno=62, col_offset=19)], [Pass( lineno=63, col_offset=4)], [], lineno=62, col_offset=0), ClassDef('TableAlreadyExists', [Name('TableDBError', Load(), lineno=64, col_offset=25)], [Pass( lineno=65, col_offset=4)], [], lineno=64, col_offset=0), ClassDef('Cond', [], [Expr(Str('This condition matches everything', lineno=69, col_offset=4), lineno=69, col_offset=4), FunctionDef('__call__', arguments([Name('self', Param(), lineno=70, col_offset=17), Name('s', Param(), lineno=70, col_offset=23)], None, None, []), [Return(Num(1, lineno=71, col_offset=15), lineno=71, col_offset=8)], [], lineno=70, col_offset=4)], [], lineno=68, col_offset=0), ClassDef('ExactCond', [Name('Cond', Load(), lineno=73, col_offset=16)], [Expr(Str('Acts as an exact match condition function', lineno=74, col_offset=4), lineno=74, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=75, col_offset=17), Name('strtomatch', Param(), lineno=75, col_offset=23)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=76, col_offset=8), 'strtomatch', Store(), lineno=76, col_offset=8)], Name('strtomatch', Load(), lineno=76, col_offset=26), lineno=76, col_offset=8)], [], lineno=75, col_offset=4), FunctionDef('__call__', arguments([Name('self', Param(), lineno=77, col_offset=17), Name('s', Param(), lineno=77, col_offset=23)], None, None, []), [Return(Compare(Name('s', Load(), lineno=78, col_offset=15), [Eq()], [Attribute(Name('self', Load(), lineno=78, col_offset=20), 'strtomatch', Load(), lineno=78, col_offset=20)], lineno=78, col_offset=15), lineno=78, col_offset=8)], [], lineno=77, col_offset=4)], [], lineno=73, col_offset=0), ClassDef('PrefixCond', [Name('Cond', Load(), lineno=80, col_offset=17)], [Expr(Str('Acts as a condition function for matching a string prefix', lineno=81, col_offset=4), lineno=81, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=82, col_offset=17), Name('prefix', Param(), lineno=82, col_offset=23)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=83, col_offset=8), 'prefix', Store(), lineno=83, col_offset=8)], Name('prefix', Load(), lineno=83, col_offset=22), lineno=83, col_offset=8)], [], lineno=82, col_offset=4), FunctionDef('__call__', arguments([Name('self', Param(), lineno=84, col_offset=17), Name('s', Param(), lineno=84, col_offset=23)], None, None, []), [Return(Compare(Subscript(Name('s', Load(), lineno=85, col_offset=15), Slice(None, Call(Name('len', Load(), lineno=85, col_offset=18), [Attribute(Name('self', Load(), lineno=85, col_offset=22), 'prefix', Load(), lineno=85, col_offset=22)], [], None, None, lineno=85, col_offset=18), None), Load(), lineno=85, col_offset=15), [Eq()], [Attribute(Name('self', Load(), lineno=85, col_offset=39), 'prefix', Load(), lineno=85, col_offset=39)], lineno=85, col_offset=15), lineno=85, col_offset=8)], [], lineno=84, col_offset=4)], [], lineno=80, col_offset=0), ClassDef('PostfixCond', [Name('Cond', Load(), lineno=87, col_offset=18)], [Expr(Str('Acts as a condition function for matching a string postfix', lineno=88, col_offset=4), lineno=88, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=89, col_offset=17), Name('postfix', Param(), lineno=89, col_offset=23)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=90, col_offset=8), 'postfix', Store(), lineno=90, col_offset=8)], Name('postfix', Load(), lineno=90, col_offset=23), lineno=90, col_offset=8)], [], lineno=89, col_offset=4), FunctionDef('__call__', arguments([Name('self', Param(), lineno=91, col_offset=17), Name('s', Param(), lineno=91, col_offset=23)], None, None, []), [Return(Compare(Subscript(Name('s', Load(), lineno=92, col_offset=15), Slice(UnaryOp(USub(), Call(Name('len', Load(), lineno=92, col_offset=18), [Attribute(Name('self', Load(), lineno=92, col_offset=22), 'postfix', Load(), lineno=92, col_offset=22)], [], None, None, lineno=92, col_offset=18), lineno=92, col_offset=17), None, None), Load(), lineno=92, col_offset=15), [Eq()], [Attribute(Name('self', Load(), lineno=92, col_offset=41), 'postfix', Load(), lineno=92, col_offset=41)], lineno=92, col_offset=15), lineno=92, col_offset=8)], [], lineno=91, col_offset=4)], [], lineno=87, col_offset=0), ClassDef('LikeCond', [Name('Cond', Load(), lineno=94, col_offset=15)], [Expr(Str("\n    Acts as a function that will match using an SQL 'LIKE' style\n    string.  Case insensitive and % signs are wild cards.\n    This isn't perfect but it should work for the simple common cases.\n    ", lineno=99, col_offset=-1), lineno=99, col_offset=-1), FunctionDef('__init__', arguments([Name('self', Param(), lineno=100, col_offset=17), Name('likestr', Param(), lineno=100, col_offset=23), Name('re_flags', Param(), lineno=100, col_offset=32)], None, None, [Attribute(Name('re', Load(), lineno=100, col_offset=41), 'IGNORECASE', Load(), lineno=100, col_offset=41)]), [Assign([Name('chars_to_escape', Store(), lineno=102, col_offset=8)], Str('.*+()[]?', lineno=102, col_offset=26), lineno=102, col_offset=8), For(Name('char', Store(), lineno=103, col_offset=12), Name('chars_to_escape', Load(), lineno=103, col_offset=20), [Assign([Name('likestr', Store(), lineno=104, col_offset=12)], Call(Attribute(Name('likestr', Load(), lineno=104, col_offset=22), 'replace', Load(), lineno=104, col_offset=22), [Name('char', Load(), lineno=104, col_offset=38), BinOp(Str('\\', lineno=104, col_offset=44), Add(), Name('char', Load(), lineno=104, col_offset=49), lineno=104, col_offset=44)], [], None, None, lineno=104, col_offset=22), lineno=104, col_offset=12)], [], lineno=103, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=106, col_offset=8), 'likestr', Store(), lineno=106, col_offset=8)], Call(Attribute(Name('likestr', Load(), lineno=106, col_offset=23), 'replace', Load(), lineno=106, col_offset=23), [Str('%', lineno=106, col_offset=39), Str('.*', lineno=106, col_offset=44)], [], None, None, lineno=106, col_offset=23), lineno=106, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=107, col_offset=8), 're', Store(), lineno=107, col_offset=8)], Call(Attribute(Name('re', Load(), lineno=107, col_offset=18), 'compile', Load(), lineno=107, col_offset=18), [BinOp(BinOp(Str('^', lineno=107, col_offset=29), Add(), Attribute(Name('self', Load(), lineno=107, col_offset=33), 'likestr', Load(), lineno=107, col_offset=33), lineno=107, col_offset=29), Add(), Str('$', lineno=107, col_offset=46), lineno=107, col_offset=45), Name('re_flags', Load(), lineno=107, col_offset=51)], [], None, None, lineno=107, col_offset=18), lineno=107, col_offset=8)], [], lineno=100, col_offset=4), FunctionDef('__call__', arguments([Name('self', Param(), lineno=108, col_offset=17), Name('s', Param(), lineno=108, col_offset=23)], None, None, []), [Return(Call(Attribute(Attribute(Name('self', Load(), lineno=109, col_offset=15), 're', Load(), lineno=109, col_offset=15), 'match', Load(), lineno=109, col_offset=15), [Name('s', Load(), lineno=109, col_offset=29)], [], None, None, lineno=109, col_offset=15), lineno=109, col_offset=8)], [], lineno=108, col_offset=4)], [], lineno=94, col_offset=0), Assign([Name('_table_names_key', Store(), lineno=114, col_offset=0)], Str('__TABLE_NAMES__', lineno=114, col_offset=19), lineno=114, col_offset=0), Assign([Name('_columns', Store(), lineno=115, col_offset=0)], Str('._COLUMNS__', lineno=115, col_offset=11), lineno=115, col_offset=0), FunctionDef('_columns_key', arguments([Name('table', Param(), lineno=117, col_offset=17)], None, None, []), [Return(BinOp(Name('table', Load(), lineno=118, col_offset=11), Add(), Name('_columns', Load(), lineno=118, col_offset=19), lineno=118, col_offset=11), lineno=118, col_offset=4)], [], lineno=117, col_offset=0), Assign([Name('_data', Store(), lineno=123, col_offset=0)], Str('._DATA_.', lineno=123, col_offset=9), lineno=123, col_offset=0), Assign([Name('_rowid', Store(), lineno=124, col_offset=0)], Str('._ROWID_.', lineno=124, col_offset=9), lineno=124, col_offset=0), Assign([Name('_rowid_str_len', Store(), lineno=126, col_offset=0)], Num(8, lineno=126, col_offset=17), lineno=126, col_offset=0), FunctionDef('_data_key', arguments([Name('table', Param(), lineno=129, col_offset=14), Name('col', Param(), lineno=129, col_offset=21), Name('rowid', Param(), lineno=129, col_offset=26)], None, None, []), [Return(BinOp(BinOp(BinOp(BinOp(Name('table', Load(), lineno=130, col_offset=11), Add(), Name('_data', Load(), lineno=130, col_offset=19), lineno=130, col_offset=11), Add(), Name('col', Load(), lineno=130, col_offset=27), lineno=130, col_offset=25), Add(), Name('_data', Load(), lineno=130, col_offset=33), lineno=130, col_offset=31), Add(), Name('rowid', Load(), lineno=130, col_offset=41), lineno=130, col_offset=39), lineno=130, col_offset=4)], [], lineno=129, col_offset=0), FunctionDef('_search_col_data_key', arguments([Name('table', Param(), lineno=132, col_offset=25), Name('col', Param(), lineno=132, col_offset=32)], None, None, []), [Return(BinOp(BinOp(BinOp(Name('table', Load(), lineno=133, col_offset=11), Add(), Name('_data', Load(), lineno=133, col_offset=19), lineno=133, col_offset=11), Add(), Name('col', Load(), lineno=133, col_offset=27), lineno=133, col_offset=25), Add(), Name('_data', Load(), lineno=133, col_offset=33), lineno=133, col_offset=31), lineno=133, col_offset=4)], [], lineno=132, col_offset=0), FunctionDef('_search_all_data_key', arguments([Name('table', Param(), lineno=135, col_offset=25)], None, None, []), [Return(BinOp(Name('table', Load(), lineno=136, col_offset=11), Add(), Name('_data', Load(), lineno=136, col_offset=19), lineno=136, col_offset=11), lineno=136, col_offset=4)], [], lineno=135, col_offset=0), FunctionDef('_rowid_key', arguments([Name('table', Param(), lineno=138, col_offset=15), Name('rowid', Param(), lineno=138, col_offset=22)], None, None, []), [Return(BinOp(BinOp(BinOp(Name('table', Load(), lineno=139, col_offset=11), Add(), Name('_rowid', Load(), lineno=139, col_offset=19), lineno=139, col_offset=11), Add(), Name('rowid', Load(), lineno=139, col_offset=28), lineno=139, col_offset=26), Add(), Name('_rowid', Load(), lineno=139, col_offset=36), lineno=139, col_offset=34), lineno=139, col_offset=4)], [], lineno=138, col_offset=0), FunctionDef('_search_rowid_key', arguments([Name('table', Param(), lineno=141, col_offset=22)], None, None, []), [Return(BinOp(Name('table', Load(), lineno=142, col_offset=11), Add(), Name('_rowid', Load(), lineno=142, col_offset=19), lineno=142, col_offset=11), lineno=142, col_offset=4)], [], lineno=141, col_offset=0), FunctionDef('contains_metastrings', arguments([Name('s', Param(), lineno=144, col_offset=25)], None, None, []), [Expr(Str('Verify that the given string does not contain any\n    metadata strings that might interfere with dbtables database operation.\n    ', lineno=147, col_offset=-1), lineno=147, col_offset=-1), If(BoolOp(Or(), [Compare(Call(Attribute(Name('s', Load(), lineno=148, col_offset=8), 'find', Load(), lineno=148, col_offset=8), [Name('_table_names_key', Load(), lineno=148, col_offset=15)], [], None, None, lineno=148, col_offset=8), [GtE()], [Num(0, lineno=148, col_offset=36)], lineno=148, col_offset=8), Compare(Call(Attribute(Name('s', Load(), lineno=149, col_offset=8), 'find', Load(), lineno=149, col_offset=8), [Name('_columns', Load(), lineno=149, col_offset=15)], [], None, None, lineno=149, col_offset=8), [GtE()], [Num(0, lineno=149, col_offset=28)], lineno=149, col_offset=8), Compare(Call(Attribute(Name('s', Load(), lineno=150, col_offset=8), 'find', Load(), lineno=150, col_offset=8), [Name('_data', Load(), lineno=150, col_offset=15)], [], None, None, lineno=150, col_offset=8), [GtE()], [Num(0, lineno=150, col_offset=25)], lineno=150, col_offset=8), Compare(Call(Attribute(Name('s', Load(), lineno=151, col_offset=8), 'find', Load(), lineno=151, col_offset=8), [Name('_rowid', Load(), lineno=151, col_offset=15)], [], None, None, lineno=151, col_offset=8), [GtE()], [Num(0, lineno=151, col_offset=26)], lineno=151, col_offset=8)], lineno=148, col_offset=8), [Return(Num(1, lineno=153, col_offset=15), lineno=153, col_offset=8)], [Return(Num(0, lineno=155, col_offset=15), lineno=155, col_offset=8)], lineno=148, col_offset=4)], [], lineno=144, col_offset=0), ClassDef('bsdTableDB', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=159, col_offset=17), Name('filename', Param(), lineno=159, col_offset=23), Name('dbhome', Param(), lineno=159, col_offset=33), Name('create', Param(), lineno=159, col_offset=41), Name('truncate', Param(), lineno=159, col_offset=51), Name('mode', Param(), lineno=159, col_offset=63), Name('recover', Param(), lineno=160, col_offset=17), Name('dbflags', Param(), lineno=160, col_offset=28)], None, None, [Num(0, lineno=159, col_offset=48), Num(0, lineno=159, col_offset=60), Num(384, lineno=159, col_offset=68), Num(0, lineno=160, col_offset=25), Num(0, lineno=160, col_offset=36)]), [Expr(Str('bsdTableDB(filename, dbhome, create=0, truncate=0, mode=0600)\n\n        Open database name in the dbhome Berkeley DB directory.\n        Use keyword arguments when calling this constructor.\n        ', lineno=165, col_offset=-1), lineno=165, col_offset=-1), Assign([Attribute(Name('self', Load(), lineno=166, col_offset=8), 'db', Store(), lineno=166, col_offset=8)], Name('None', Load(), lineno=166, col_offset=18), lineno=166, col_offset=8), Assign([Name('myflags', Store(), lineno=167, col_offset=8)], Attribute(Name('db', Load(), lineno=167, col_offset=18), 'DB_THREAD', Load(), lineno=167, col_offset=18), lineno=167, col_offset=8), If(Name('create', Load(), lineno=168, col_offset=11), [AugAssign(Name('myflags', Store(), lineno=169, col_offset=12), BitOr(), Attribute(Name('db', Load(), lineno=169, col_offset=23), 'DB_CREATE', Load(), lineno=169, col_offset=23), lineno=169, col_offset=12)], [], lineno=168, col_offset=8), Assign([Name('flagsforenv', Store(), lineno=170, col_offset=8)], BinOp(BinOp(BinOp(BinOp(Attribute(Name('db', Load(), lineno=170, col_offset=23), 'DB_INIT_MPOOL', Load(), lineno=170, col_offset=23), BitOr(), Attribute(Name('db', Load(), lineno=170, col_offset=42), 'DB_INIT_LOCK', Load(), lineno=170, col_offset=42), lineno=170, col_offset=23), BitOr(), Attribute(Name('db', Load(), lineno=170, col_offset=60), 'DB_INIT_LOG', Load(), lineno=170, col_offset=60), lineno=170, col_offset=58), BitOr(), Attribute(Name('db', Load(), lineno=171, col_offset=23), 'DB_INIT_TXN', Load(), lineno=171, col_offset=23), lineno=170, col_offset=75), BitOr(), Name('dbflags', Load(), lineno=171, col_offset=40), lineno=171, col_offset=38), lineno=170, col_offset=8), TryExcept([AugAssign(Name('dbflags', Store(), lineno=174, col_offset=12), BitOr(), Attribute(Name('db', Load(), lineno=174, col_offset=23), 'DB_AUTO_COMMIT', Load(), lineno=174, col_offset=23), lineno=174, col_offset=12)], [ExceptHandler(Name('AttributeError', Load(), lineno=175, col_offset=15), None, [Pass( lineno=176, col_offset=12)], lineno=175, col_offset=8)], [], lineno=173, col_offset=8), If(Name('recover', Load(), lineno=177, col_offset=11), [Assign([Name('flagsforenv', Store(), lineno=178, col_offset=12)], BinOp(Name('flagsforenv', Load(), lineno=178, col_offset=26), BitOr(), Attribute(Name('db', Load(), lineno=178, col_offset=40), 'DB_RECOVER', Load(), lineno=178, col_offset=40), lineno=178, col_offset=26), lineno=178, col_offset=12)], [], lineno=177, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=179, col_offset=8), 'env', Store(), lineno=179, col_offset=8)], Call(Attribute(Name('db', Load(), lineno=179, col_offset=19), 'DBEnv', Load(), lineno=179, col_offset=19), [], [], None, None, lineno=179, col_offset=19), lineno=179, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=181, col_offset=8), 'env', Load(), lineno=181, col_offset=8), 'set_lk_detect', Load(), lineno=181, col_offset=8), [Attribute(Name('db', Load(), lineno=181, col_offset=31), 'DB_LOCK_DEFAULT', Load(), lineno=181, col_offset=31)], [], None, None, lineno=181, col_offset=8), lineno=181, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=182, col_offset=8), 'env', Load(), lineno=182, col_offset=8), 'open', Load(), lineno=182, col_offset=8), [Name('dbhome', Load(), lineno=182, col_offset=22), BinOp(Name('myflags', Load(), lineno=182, col_offset=30), BitOr(), Name('flagsforenv', Load(), lineno=182, col_offset=40), lineno=182, col_offset=30)], [], None, None, lineno=182, col_offset=8), lineno=182, col_offset=8), If(Name('truncate', Load(), lineno=183, col_offset=11), [AugAssign(Name('myflags', Store(), lineno=184, col_offset=12), BitOr(), Attribute(Name('db', Load(), lineno=184, col_offset=23), 'DB_TRUNCATE', Load(), lineno=184, col_offset=23), lineno=184, col_offset=12)], [], lineno=183, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=185, col_offset=8), 'db', Store(), lineno=185, col_offset=8)], Call(Attribute(Name('db', Load(), lineno=185, col_offset=18), 'DB', Load(), lineno=185, col_offset=18), [Attribute(Name('self', Load(), lineno=185, col_offset=24), 'env', Load(), lineno=185, col_offset=24)], [], None, None, lineno=185, col_offset=18), lineno=185, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=188, col_offset=8), 'db', Load(), lineno=188, col_offset=8), 'set_get_returns_none', Load(), lineno=188, col_offset=8), [Num(1, lineno=188, col_offset=37)], [], None, None, lineno=188, col_offset=8), lineno=188, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=190, col_offset=8), 'db', Load(), lineno=190, col_offset=8), 'set_flags', Load(), lineno=190, col_offset=8), [Attribute(Name('db', Load(), lineno=190, col_offset=26), 'DB_DUP', Load(), lineno=190, col_offset=26)], [], None, None, lineno=190, col_offset=8), lineno=190, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=191, col_offset=8), 'db', Load(), lineno=191, col_offset=8), 'open', Load(), lineno=191, col_offset=8), [Name('filename', Load(), lineno=191, col_offset=21), Attribute(Name('db', Load(), lineno=191, col_offset=31), 'DB_BTREE', Load(), lineno=191, col_offset=31), BinOp(Name('dbflags', Load(), lineno=191, col_offset=44), BitOr(), Name('myflags', Load(), lineno=191, col_offset=54), lineno=191, col_offset=44), Name('mode', Load(), lineno=191, col_offset=63)], [], None, None, lineno=191, col_offset=8), lineno=191, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=192, col_offset=8), 'dbfilename', Store(), lineno=192, col_offset=8)], Name('filename', Load(), lineno=192, col_offset=26), lineno=192, col_offset=8), If(Compare(Subscript(Attribute(Name('sys', Load(), lineno=194, col_offset=11), 'version_info', Load(), lineno=194, col_offset=11), Index(Num(0, lineno=194, col_offset=28)), Load(), lineno=194, col_offset=11), [GtE()], [Num(3, lineno=194, col_offset=34)], lineno=194, col_offset=11), [ClassDef('cursor_py3k', [Name('object', Load(), lineno=195, col_offset=30)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=196, col_offset=29), Name('dbcursor', Param(), lineno=196, col_offset=35)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=197, col_offset=20), '_dbcursor', Store(), lineno=197, col_offset=20)], Name('dbcursor', Load(), lineno=197, col_offset=37), lineno=197, col_offset=20)], [], lineno=196, col_offset=16), FunctionDef('close', arguments([Name('self', Param(), lineno=199, col_offset=26)], None, None, []), [Return(Call(Attribute(Attribute(Name('self', Load(), lineno=200, col_offset=27), '_dbcursor', Load(), lineno=200, col_offset=27), 'close', Load(), lineno=200, col_offset=27), [], [], None, None, lineno=200, col_offset=27), lineno=200, col_offset=20)], [], lineno=199, col_offset=16), FunctionDef('set_range', arguments([Name('self', Param(), lineno=202, col_offset=30), Name('search', Param(), lineno=202, col_offset=36)], None, None, []), [Assign([Name('v', Store(), lineno=203, col_offset=20)], Call(Attribute(Attribute(Name('self', Load(), lineno=203, col_offset=24), '_dbcursor', Load(), lineno=203, col_offset=24), 'set_range', Load(), lineno=203, col_offset=24), [Call(Name('bytes', Load(), lineno=203, col_offset=49), [Name('search', Load(), lineno=203, col_offset=55), Str('iso8859-1', lineno=203, col_offset=63)], [], None, None, lineno=203, col_offset=49)], [], None, None, lineno=203, col_offset=24), lineno=203, col_offset=20), If(Compare(Name('v', Load(), lineno=204, col_offset=23), [IsNot()], [Name('None', Load(), lineno=204, col_offset=32)], lineno=204, col_offset=23), [Assign([Name('v', Store(), lineno=205, col_offset=24)], Tuple([Call(Attribute(Subscript(Name('v', Load(), lineno=205, col_offset=29), Index(Num(0, lineno=205, col_offset=31)), Load(), lineno=205, col_offset=29), 'decode', Load(), lineno=205, col_offset=29), [Str('iso8859-1', lineno=205, col_offset=41)], [], None, None, lineno=205, col_offset=29), Call(Attribute(Subscript(Name('v', Load(), lineno=206, col_offset=32), Index(Num(1, lineno=206, col_offset=34)), Load(), lineno=206, col_offset=32), 'decode', Load(), lineno=206, col_offset=32), [Str('iso8859-1', lineno=206, col_offset=44)], [], None, None, lineno=206, col_offset=32)], Load(), lineno=205, col_offset=29), lineno=205, col_offset=24)], [], lineno=204, col_offset=20), Return(Name('v', Load(), lineno=207, col_offset=27), lineno=207, col_offset=20)], [], lineno=202, col_offset=16), FunctionDef('__next__', arguments([Name('self', Param(), lineno=209, col_offset=29)], None, None, []), [Assign([Name('v', Store(), lineno=210, col_offset=20)], Call(Call(Name('getattr', Load(), lineno=210, col_offset=24), [Attribute(Name('self', Load(), lineno=210, col_offset=32), '_dbcursor', Load(), lineno=210, col_offset=32), Str('next', lineno=210, col_offset=48)], [], None, None, lineno=210, col_offset=24), [], [], None, None, lineno=210, col_offset=24), lineno=210, col_offset=20), If(Compare(Name('v', Load(), lineno=211, col_offset=23), [IsNot()], [Name('None', Load(), lineno=211, col_offset=32)], lineno=211, col_offset=23), [Assign([Name('v', Store(), lineno=212, col_offset=24)], Tuple([Call(Attribute(Subscript(Name('v', Load(), lineno=212, col_offset=29), Index(Num(0, lineno=212, col_offset=31)), Load(), lineno=212, col_offset=29), 'decode', Load(), lineno=212, col_offset=29), [Str('iso8859-1', lineno=212, col_offset=41)], [], None, None, lineno=212, col_offset=29), Call(Attribute(Subscript(Name('v', Load(), lineno=213, col_offset=32), Index(Num(1, lineno=213, col_offset=34)), Load(), lineno=213, col_offset=32), 'decode', Load(), lineno=213, col_offset=32), [Str('iso8859-1', lineno=213, col_offset=44)], [], None, None, lineno=213, col_offset=32)], Load(), lineno=212, col_offset=29), lineno=212, col_offset=24)], [], lineno=211, col_offset=20), Return(Name('v', Load(), lineno=214, col_offset=27), lineno=214, col_offset=20)], [], lineno=209, col_offset=16)], [], lineno=195, col_offset=12), ClassDef('db_py3k', [Name('object', Load(), lineno=216, col_offset=26)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=217, col_offset=29), Name('db', Param(), lineno=217, col_offset=35)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=218, col_offset=20), '_db', Store(), lineno=218, col_offset=20)], Name('db', Load(), lineno=218, col_offset=31), lineno=218, col_offset=20)], [], lineno=217, col_offset=16), FunctionDef('cursor', arguments([Name('self', Param(), lineno=220, col_offset=27), Name('txn', Param(), lineno=220, col_offset=33)], None, None, [Name('None', Load(), lineno=220, col_offset=37)]), [Return(Call(Name('cursor_py3k', Load(), lineno=221, col_offset=27), [Call(Attribute(Attribute(Name('self', Load(), lineno=221, col_offset=39), '_db', Load(), lineno=221, col_offset=39), 'cursor', Load(), lineno=221, col_offset=39), [], [keyword('txn', Name('txn', Load(), lineno=221, col_offset=59))], None, None, lineno=221, col_offset=39)], [], None, None, lineno=221, col_offset=27), lineno=221, col_offset=20)], [], lineno=220, col_offset=16), FunctionDef('has_key', arguments([Name('self', Param(), lineno=223, col_offset=28), Name('key', Param(), lineno=223, col_offset=34), Name('txn', Param(), lineno=223, col_offset=39)], None, None, [Name('None', Load(), lineno=223, col_offset=43)]), [Return(Call(Call(Name('getattr', Load(), lineno=224, col_offset=27), [Attribute(Name('self', Load(), lineno=224, col_offset=35), '_db', Load(), lineno=224, col_offset=35), Str('has_key', lineno=224, col_offset=44)], [], None, None, lineno=224, col_offset=27), [Call(Name('bytes', Load(), lineno=224, col_offset=55), [Name('key', Load(), lineno=224, col_offset=61), Str('iso8859-1', lineno=224, col_offset=66)], [], None, None, lineno=224, col_offset=55)], [keyword('txn', Name('txn', Load(), lineno=225, col_offset=32))], None, None, lineno=224, col_offset=27), lineno=224, col_offset=20)], [], lineno=223, col_offset=16), FunctionDef('put', arguments([Name('self', Param(), lineno=227, col_offset=24), Name('key', Param(), lineno=227, col_offset=30), Name('value', Param(), lineno=227, col_offset=35), Name('flags', Param(), lineno=227, col_offset=42), Name('txn', Param(), lineno=227, col_offset=51)], None, None, [Num(0, lineno=227, col_offset=48), Name('None', Load(), lineno=227, col_offset=55)]), [Assign([Name('key', Store(), lineno=228, col_offset=20)], Call(Name('bytes', Load(), lineno=228, col_offset=26), [Name('key', Load(), lineno=228, col_offset=32), Str('iso8859-1', lineno=228, col_offset=37)], [], None, None, lineno=228, col_offset=26), lineno=228, col_offset=20), If(Compare(Name('value', Load(), lineno=229, col_offset=23), [IsNot()], [Name('None', Load(), lineno=229, col_offset=36)], lineno=229, col_offset=23), [Assign([Name('value', Store(), lineno=230, col_offset=24)], Call(Name('bytes', Load(), lineno=230, col_offset=32), [Name('value', Load(), lineno=230, col_offset=38), Str('iso8859-1', lineno=230, col_offset=45)], [], None, None, lineno=230, col_offset=32), lineno=230, col_offset=24)], [], lineno=229, col_offset=20), Return(Call(Attribute(Attribute(Name('self', Load(), lineno=231, col_offset=27), '_db', Load(), lineno=231, col_offset=27), 'put', Load(), lineno=231, col_offset=27), [Name('key', Load(), lineno=231, col_offset=40), Name('value', Load(), lineno=231, col_offset=45)], [keyword('flags', Name('flags', Load(), lineno=231, col_offset=58)), keyword('txn', Name('txn', Load(), lineno=231, col_offset=69))], None, None, lineno=231, col_offset=27), lineno=231, col_offset=20)], [], lineno=227, col_offset=16), FunctionDef('put_bytes', arguments([Name('self', Param(), lineno=233, col_offset=30), Name('key', Param(), lineno=233, col_offset=36), Name('value', Param(), lineno=233, col_offset=41), Name('txn', Param(), lineno=233, col_offset=48)], None, None, [Name('None', Load(), lineno=233, col_offset=52)]), [Assign([Name('key', Store(), lineno=234, col_offset=20)], Call(Name('bytes', Load(), lineno=234, col_offset=26), [Name('key', Load(), lineno=234, col_offset=32), Str('iso8859-1', lineno=234, col_offset=37)], [], None, None, lineno=234, col_offset=26), lineno=234, col_offset=20), Return(Call(Attribute(Attribute(Name('self', Load(), lineno=235, col_offset=27), '_db', Load(), lineno=235, col_offset=27), 'put', Load(), lineno=235, col_offset=27), [Name('key', Load(), lineno=235, col_offset=40), Name('value', Load(), lineno=235, col_offset=45)], [keyword('txn', Name('txn', Load(), lineno=235, col_offset=56))], None, None, lineno=235, col_offset=27), lineno=235, col_offset=20)], [], lineno=233, col_offset=16), FunctionDef('get', arguments([Name('self', Param(), lineno=237, col_offset=24), Name('key', Param(), lineno=237, col_offset=30), Name('txn', Param(), lineno=237, col_offset=35), Name('flags', Param(), lineno=237, col_offset=45)], None, None, [Name('None', Load(), lineno=237, col_offset=39), Num(0, lineno=237, col_offset=51)]), [Assign([Name('key', Store(), lineno=238, col_offset=20)], Call(Name('bytes', Load(), lineno=238, col_offset=26), [Name('key', Load(), lineno=238, col_offset=32), Str('iso8859-1', lineno=238, col_offset=37)], [], None, None, lineno=238, col_offset=26), lineno=238, col_offset=20), Assign([Name('v', Store(), lineno=239, col_offset=20)], Call(Attribute(Attribute(Name('self', Load(), lineno=239, col_offset=24), '_db', Load(), lineno=239, col_offset=24), 'get', Load(), lineno=239, col_offset=24), [Name('key', Load(), lineno=239, col_offset=37)], [keyword('txn', Name('txn', Load(), lineno=239, col_offset=46)), keyword('flags', Name('flags', Load(), lineno=239, col_offset=57))], None, None, lineno=239, col_offset=24), lineno=239, col_offset=20), If(Compare(Name('v', Load(), lineno=240, col_offset=23), [IsNot()], [Name('None', Load(), lineno=240, col_offset=32)], lineno=240, col_offset=23), [Assign([Name('v', Store(), lineno=241, col_offset=24)], Call(Attribute(Name('v', Load(), lineno=241, col_offset=28), 'decode', Load(), lineno=241, col_offset=28), [Str('iso8859-1', lineno=241, col_offset=37)], [], None, None, lineno=241, col_offset=28), lineno=241, col_offset=24)], [], lineno=240, col_offset=20), Return(Name('v', Load(), lineno=242, col_offset=27), lineno=242, col_offset=20)], [], lineno=237, col_offset=16), FunctionDef('get_bytes', arguments([Name('self', Param(), lineno=244, col_offset=30), Name('key', Param(), lineno=244, col_offset=36), Name('txn', Param(), lineno=244, col_offset=41), Name('flags', Param(), lineno=244, col_offset=51)], None, None, [Name('None', Load(), lineno=244, col_offset=45), Num(0, lineno=244, col_offset=57)]), [Assign([Name('key', Store(), lineno=245, col_offset=20)], Call(Name('bytes', Load(), lineno=245, col_offset=26), [Name('key', Load(), lineno=245, col_offset=32), Str('iso8859-1', lineno=245, col_offset=37)], [], None, None, lineno=245, col_offset=26), lineno=245, col_offset=20), Return(Call(Attribute(Attribute(Name('self', Load(), lineno=246, col_offset=27), '_db', Load(), lineno=246, col_offset=27), 'get', Load(), lineno=246, col_offset=27), [Name('key', Load(), lineno=246, col_offset=40)], [keyword('txn', Name('txn', Load(), lineno=246, col_offset=49)), keyword('flags', Name('flags', Load(), lineno=246, col_offset=60))], None, None, lineno=246, col_offset=27), lineno=246, col_offset=20)], [], lineno=244, col_offset=16), FunctionDef('delete', arguments([Name('self', Param(), lineno=248, col_offset=27), Name('key', Param(), lineno=248, col_offset=33), Name('txn', Param(), lineno=248, col_offset=38)], None, None, [Name('None', Load(), lineno=248, col_offset=42)]), [Assign([Name('key', Store(), lineno=249, col_offset=20)], Call(Name('bytes', Load(), lineno=249, col_offset=26), [Name('key', Load(), lineno=249, col_offset=32), Str('iso8859-1', lineno=249, col_offset=37)], [], None, None, lineno=249, col_offset=26), lineno=249, col_offset=20), Return(Call(Attribute(Attribute(Name('self', Load(), lineno=250, col_offset=27), '_db', Load(), lineno=250, col_offset=27), 'delete', Load(), lineno=250, col_offset=27), [Name('key', Load(), lineno=250, col_offset=43)], [keyword('txn', Name('txn', Load(), lineno=250, col_offset=52))], None, None, lineno=250, col_offset=27), lineno=250, col_offset=20)], [], lineno=248, col_offset=16), FunctionDef('close', arguments([Name('self', Param(), lineno=252, col_offset=27)], None, None, []), [Return(Call(Attribute(Attribute(Name('self', Load(), lineno=253, col_offset=27), '_db', Load(), lineno=253, col_offset=27), 'close', Load(), lineno=253, col_offset=27), [], [], None, None, lineno=253, col_offset=27), lineno=253, col_offset=20)], [], lineno=252, col_offset=16)], [], lineno=216, col_offset=12), Assign([Attribute(Name('self', Load(), lineno=255, col_offset=12), 'db', Store(), lineno=255, col_offset=12)], Call(Name('db_py3k', Load(), lineno=255, col_offset=22), [Attribute(Name('self', Load(), lineno=255, col_offset=30), 'db', Load(), lineno=255, col_offset=30)], [], None, None, lineno=255, col_offset=22), lineno=255, col_offset=12)], [Pass( lineno=257, col_offset=12)], lineno=194, col_offset=8), Assign([Name('txn', Store(), lineno=260, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=260, col_offset=14), 'env', Load(), lineno=260, col_offset=14), 'txn_begin', Load(), lineno=260, col_offset=14), [], [], None, None, lineno=260, col_offset=14), lineno=260, col_offset=8), TryExcept([If(UnaryOp(Not(), Call(Call(Name('getattr', Load(), lineno=262, col_offset=19), [Attribute(Name('self', Load(), lineno=262, col_offset=27), 'db', Load(), lineno=262, col_offset=27), Str('has_key', lineno=262, col_offset=36)], [], None, None, lineno=262, col_offset=19), [Name('_table_names_key', Load(), lineno=262, col_offset=47), Name('txn', Load(), lineno=262, col_offset=65)], [], None, None, lineno=262, col_offset=19), lineno=262, col_offset=15), [Expr(Call(Call(Name('getattr', Load(), lineno=263, col_offset=16), [Attribute(Name('self', Load(), lineno=263, col_offset=24), 'db', Load(), lineno=263, col_offset=24), Str('put_bytes', lineno=263, col_offset=33), Attribute(Attribute(Name('self', Load(), lineno=263, col_offset=46), 'db', Load(), lineno=263, col_offset=46), 'put', Load(), lineno=263, col_offset=46)], [], None, None, lineno=263, col_offset=16), [Name('_table_names_key', Load(), lineno=264, col_offset=25), Call(Attribute(Name('pickle', Load(), lineno=264, col_offset=43), 'dumps', Load(), lineno=264, col_offset=43), [List([], Load(), lineno=264, col_offset=56), Num(1, lineno=264, col_offset=60)], [], None, None, lineno=264, col_offset=43)], [keyword('txn', Name('txn', Load(), lineno=264, col_offset=68))], None, None, lineno=263, col_offset=16), lineno=263, col_offset=16)], [], lineno=262, col_offset=12)], [ExceptHandler(None, None, [Expr(Call(Attribute(Name('txn', Load(), lineno=267, col_offset=12), 'abort', Load(), lineno=267, col_offset=12), [], [], None, None, lineno=267, col_offset=12), lineno=267, col_offset=12), Raise(None, None, None, lineno=268, col_offset=12)], lineno=266, col_offset=8)], [Expr(Call(Attribute(Name('txn', Load(), lineno=270, col_offset=12), 'commit', Load(), lineno=270, col_offset=12), [], [], None, None, lineno=270, col_offset=12), lineno=270, col_offset=12)], lineno=261, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=272, col_offset=8), '__tablecolumns', Store(), lineno=272, col_offset=8)], Dict([], [], lineno=272, col_offset=30), lineno=272, col_offset=8)], [], lineno=159, col_offset=4), FunctionDef('__del__', arguments([Name('self', Param(), lineno=274, col_offset=16)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=275, col_offset=8), 'close', Load(), lineno=275, col_offset=8), [], [], None, None, lineno=275, col_offset=8), lineno=275, col_offset=8)], [], lineno=274, col_offset=4), FunctionDef('close', arguments([Name('self', Param(), lineno=277, col_offset=14)], None, None, []), [If(Compare(Attribute(Name('self', Load(), lineno=278, col_offset=11), 'db', Load(), lineno=278, col_offset=11), [IsNot()], [Name('None', Load(), lineno=278, col_offset=26)], lineno=278, col_offset=11), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=279, col_offset=12), 'db', Load(), lineno=279, col_offset=12), 'close', Load(), lineno=279, col_offset=12), [], [], None, None, lineno=279, col_offset=12), lineno=279, col_offset=12), Assign([Attribute(Name('self', Load(), lineno=280, col_offset=12), 'db', Store(), lineno=280, col_offset=12)], Name('None', Load(), lineno=280, col_offset=22), lineno=280, col_offset=12)], [], lineno=278, col_offset=8), If(Compare(Attribute(Name('self', Load(), lineno=281, col_offset=11), 'env', Load(), lineno=281, col_offset=11), [IsNot()], [Name('None', Load(), lineno=281, col_offset=27)], lineno=281, col_offset=11), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=282, col_offset=12), 'env', Load(), lineno=282, col_offset=12), 'close', Load(), lineno=282, col_offset=12), [], [], None, None, lineno=282, col_offset=12), lineno=282, col_offset=12), Assign([Attribute(Name('self', Load(), lineno=283, col_offset=12), 'env', Store(), lineno=283, col_offset=12)], Name('None', Load(), lineno=283, col_offset=23), lineno=283, col_offset=12)], [], lineno=281, col_offset=8)], [], lineno=277, col_offset=4), FunctionDef('checkpoint', arguments([Name('self', Param(), lineno=285, col_offset=19), Name('mins', Param(), lineno=285, col_offset=25)], None, None, [Num(0, lineno=285, col_offset=30)]), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=286, col_offset=8), 'env', Load(), lineno=286, col_offset=8), 'txn_checkpoint', Load(), lineno=286, col_offset=8), [Name('mins', Load(), lineno=286, col_offset=32)], [], None, None, lineno=286, col_offset=8), lineno=286, col_offset=8)], [], lineno=285, col_offset=4), FunctionDef('sync', arguments([Name('self', Param(), lineno=288, col_offset=13)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=289, col_offset=8), 'db', Load(), lineno=289, col_offset=8), 'sync', Load(), lineno=289, col_offset=8), [], [], None, None, lineno=289, col_offset=8), lineno=289, col_offset=8)], [], lineno=288, col_offset=4), FunctionDef('_db_print', arguments([Name('self', Param(), lineno=291, col_offset=18)], None, None, []), [Expr(Str('Print the database to stdout for debugging', lineno=292, col_offset=8), lineno=292, col_offset=8), Print(None, [Str('******** Printing raw database for debugging ********', lineno=293, col_offset=14)], True, lineno=293, col_offset=8), Assign([Name('cur', Store(), lineno=294, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=294, col_offset=14), 'db', Load(), lineno=294, col_offset=14), 'cursor', Load(), lineno=294, col_offset=14), [], [], None, None, lineno=294, col_offset=14), lineno=294, col_offset=8), TryExcept([Assign([Tuple([Name('key', Store(), lineno=296, col_offset=12), Name('data', Store(), lineno=296, col_offset=17)], Store(), lineno=296, col_offset=12)], Call(Attribute(Name('cur', Load(), lineno=296, col_offset=24), 'first', Load(), lineno=296, col_offset=24), [], [], None, None, lineno=296, col_offset=24), lineno=296, col_offset=12), While(Num(1, lineno=297, col_offset=18), [Print(None, [Call(Name('repr', Load(), lineno=298, col_offset=22), [Dict([Name('key', Load(), lineno=298, col_offset=28)], [Name('data', Load(), lineno=298, col_offset=33)], lineno=298, col_offset=27)], [], None, None, lineno=298, col_offset=22)], True, lineno=298, col_offset=16), Assign([Name('next', Store(), lineno=299, col_offset=16)], Call(Attribute(Name('cur', Load(), lineno=299, col_offset=23), 'next', Load(), lineno=299, col_offset=23), [], [], None, None, lineno=299, col_offset=23), lineno=299, col_offset=16), If(Name('next', Load(), lineno=300, col_offset=19), [Assign([Tuple([Name('key', Store(), lineno=301, col_offset=20), Name('data', Store(), lineno=301, col_offset=25)], Store(), lineno=301, col_offset=20)], Name('next', Load(), lineno=301, col_offset=32), lineno=301, col_offset=20)], [Expr(Call(Attribute(Name('cur', Load(), lineno=303, col_offset=20), 'close', Load(), lineno=303, col_offset=20), [], [], None, None, lineno=303, col_offset=20), lineno=303, col_offset=20), Return(None, lineno=304, col_offset=20)], lineno=300, col_offset=16)], [], lineno=297, col_offset=12)], [ExceptHandler(Attribute(Name('db', Load(), lineno=305, col_offset=15), 'DBNotFoundError', Load(), lineno=305, col_offset=15), None, [Expr(Call(Attribute(Name('cur', Load(), lineno=306, col_offset=12), 'close', Load(), lineno=306, col_offset=12), [], [], None, None, lineno=306, col_offset=12), lineno=306, col_offset=12)], lineno=305, col_offset=8)], [], lineno=295, col_offset=8)], [], lineno=291, col_offset=4), FunctionDef('CreateTable', arguments([Name('self', Param(), lineno=309, col_offset=20), Name('table', Param(), lineno=309, col_offset=26), Name('columns', Param(), lineno=309, col_offset=33)], None, None, []), [Expr(Str('CreateTable(table, columns) - Create a new table in the database.\n\n        raises TableDBError if it already exists or for other DB errors.\n        ', lineno=313, col_offset=-1), lineno=313, col_offset=-1), Assert(Call(Name('isinstance', Load(), lineno=314, col_offset=15), [Name('columns', Load(), lineno=314, col_offset=26), Name('list', Load(), lineno=314, col_offset=35)], [], None, None, lineno=314, col_offset=15), None, lineno=314, col_offset=8), Assign([Name('txn', Store(), lineno=316, col_offset=8)], Name('None', Load(), lineno=316, col_offset=14), lineno=316, col_offset=8), TryExcept([If(Call(Name('contains_metastrings', Load(), lineno=320, col_offset=15), [Name('table', Load(), lineno=320, col_offset=36)], [], None, None, lineno=320, col_offset=15), [Raise(Call(Name('ValueError', Load(), lineno=321, col_offset=22), [Str('bad table name: contains reserved metastrings', lineno=322, col_offset=20)], [], None, None, lineno=321, col_offset=22), None, None, lineno=321, col_offset=16)], [], lineno=320, col_offset=12), For(Name('column', Store(), lineno=323, col_offset=16), Name('columns', Load(), lineno=323, col_offset=26), [If(Call(Name('contains_metastrings', Load(), lineno=324, col_offset=19), [Name('column', Load(), lineno=324, col_offset=40)], [], None, None, lineno=324, col_offset=19), [Raise(Call(Name('ValueError', Load(), lineno=325, col_offset=26), [Str('bad column name: contains reserved metastrings', lineno=326, col_offset=24)], [], None, None, lineno=325, col_offset=26), None, None, lineno=325, col_offset=20)], [], lineno=324, col_offset=16)], [], lineno=323, col_offset=12), Assign([Name('columnlist_key', Store(), lineno=328, col_offset=12)], Call(Name('_columns_key', Load(), lineno=328, col_offset=29), [Name('table', Load(), lineno=328, col_offset=42)], [], None, None, lineno=328, col_offset=29), lineno=328, col_offset=12), If(Call(Call(Name('getattr', Load(), lineno=329, col_offset=15), [Attribute(Name('self', Load(), lineno=329, col_offset=23), 'db', Load(), lineno=329, col_offset=23), Str('has_key', lineno=329, col_offset=32)], [], None, None, lineno=329, col_offset=15), [Name('columnlist_key', Load(), lineno=329, col_offset=43)], [], None, None, lineno=329, col_offset=15), [Raise(Name('TableAlreadyExists', Load(), lineno=330, col_offset=22), Str('table already exists', lineno=330, col_offset=42), None, lineno=330, col_offset=16)], [], lineno=329, col_offset=12), Assign([Name('txn', Store(), lineno=332, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=332, col_offset=18), 'env', Load(), lineno=332, col_offset=18), 'txn_begin', Load(), lineno=332, col_offset=18), [], [], None, None, lineno=332, col_offset=18), lineno=332, col_offset=12), Expr(Call(Call(Name('getattr', Load(), lineno=334, col_offset=12), [Attribute(Name('self', Load(), lineno=334, col_offset=20), 'db', Load(), lineno=334, col_offset=20), Str('put_bytes', lineno=334, col_offset=29), Attribute(Attribute(Name('self', Load(), lineno=334, col_offset=42), 'db', Load(), lineno=334, col_offset=42), 'put', Load(), lineno=334, col_offset=42)], [], None, None, lineno=334, col_offset=12), [Name('columnlist_key', Load(), lineno=334, col_offset=55), Call(Attribute(Name('pickle', Load(), lineno=335, col_offset=20), 'dumps', Load(), lineno=335, col_offset=20), [Name('columns', Load(), lineno=335, col_offset=33), Num(1, lineno=335, col_offset=42)], [], None, None, lineno=335, col_offset=20)], [keyword('txn', Name('txn', Load(), lineno=335, col_offset=50))], None, None, lineno=334, col_offset=12), lineno=334, col_offset=12), Assign([Name('tablelist', Store(), lineno=338, col_offset=12)], Call(Attribute(Name('pickle', Load(), lineno=338, col_offset=24), 'loads', Load(), lineno=338, col_offset=24), [Call(Call(Name('getattr', Load(), lineno=338, col_offset=37), [Attribute(Name('self', Load(), lineno=338, col_offset=45), 'db', Load(), lineno=338, col_offset=45), Str('get_bytes', lineno=338, col_offset=54), Attribute(Attribute(Name('self', Load(), lineno=339, col_offset=16), 'db', Load(), lineno=339, col_offset=16), 'get', Load(), lineno=339, col_offset=16)], [], None, None, lineno=338, col_offset=37), [Name('_table_names_key', Load(), lineno=339, col_offset=30)], [keyword('txn', Name('txn', Load(), lineno=339, col_offset=52)), keyword('flags', Attribute(Name('db', Load(), lineno=339, col_offset=63), 'DB_RMW', Load(), lineno=339, col_offset=63))], None, None, lineno=338, col_offset=37)], [], None, None, lineno=338, col_offset=24), lineno=338, col_offset=12), Expr(Call(Attribute(Name('tablelist', Load(), lineno=340, col_offset=12), 'append', Load(), lineno=340, col_offset=12), [Name('table', Load(), lineno=340, col_offset=29)], [], None, None, lineno=340, col_offset=12), lineno=340, col_offset=12), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=342, col_offset=12), 'db', Load(), lineno=342, col_offset=12), 'delete', Load(), lineno=342, col_offset=12), [Name('_table_names_key', Load(), lineno=342, col_offset=27)], [keyword('txn', Name('txn', Load(), lineno=342, col_offset=49))], None, None, lineno=342, col_offset=12), lineno=342, col_offset=12), Expr(Call(Call(Name('getattr', Load(), lineno=343, col_offset=12), [Attribute(Name('self', Load(), lineno=343, col_offset=20), 'db', Load(), lineno=343, col_offset=20), Str('put_bytes', lineno=343, col_offset=29), Attribute(Attribute(Name('self', Load(), lineno=343, col_offset=42), 'db', Load(), lineno=343, col_offset=42), 'put', Load(), lineno=343, col_offset=42)], [], None, None, lineno=343, col_offset=12), [Name('_table_names_key', Load(), lineno=343, col_offset=55), Call(Attribute(Name('pickle', Load(), lineno=344, col_offset=20), 'dumps', Load(), lineno=344, col_offset=20), [Name('tablelist', Load(), lineno=344, col_offset=33), Num(1, lineno=344, col_offset=44)], [], None, None, lineno=344, col_offset=20)], [keyword('txn', Name('txn', Load(), lineno=344, col_offset=52))], None, None, lineno=343, col_offset=12), lineno=343, col_offset=12), Expr(Call(Attribute(Name('txn', Load(), lineno=346, col_offset=12), 'commit', Load(), lineno=346, col_offset=12), [], [], None, None, lineno=346, col_offset=12), lineno=346, col_offset=12), Assign([Name('txn', Store(), lineno=347, col_offset=12)], Name('None', Load(), lineno=347, col_offset=18), lineno=347, col_offset=12)], [ExceptHandler(Attribute(Name('db', Load(), lineno=348, col_offset=15), 'DBError', Load(), lineno=348, col_offset=15), Name('dberror', Store(), lineno=348, col_offset=27), [If(Name('txn', Load(), lineno=349, col_offset=15), [Expr(Call(Attribute(Name('txn', Load(), lineno=350, col_offset=16), 'abort', Load(), lineno=350, col_offset=16), [], [], None, None, lineno=350, col_offset=16), lineno=350, col_offset=16)], [], lineno=349, col_offset=12), If(Compare(Attribute(Name('sys', Load(), lineno=351, col_offset=15), 'version_info', Load(), lineno=351, col_offset=15), [Lt()], [Tuple([Num(2, lineno=351, col_offset=35), Num(6, lineno=351, col_offset=38)], Load(), lineno=351, col_offset=35)], lineno=351, col_offset=15), [Raise(Name('TableDBError', Load(), lineno=352, col_offset=22), Subscript(Name('dberror', Load(), lineno=352, col_offset=36), Index(Num(1, lineno=352, col_offset=44)), Load(), lineno=352, col_offset=36), None, lineno=352, col_offset=16)], [Raise(Name('TableDBError', Load(), lineno=354, col_offset=22), Subscript(Attribute(Name('dberror', Load(), lineno=354, col_offset=36), 'args', Load(), lineno=354, col_offset=36), Index(Num(1, lineno=354, col_offset=49)), Load(), lineno=354, col_offset=36), None, lineno=354, col_offset=16)], lineno=351, col_offset=12)], lineno=348, col_offset=8)], [], lineno=317, col_offset=8)], [], lineno=309, col_offset=4), FunctionDef('ListTableColumns', arguments([Name('self', Param(), lineno=357, col_offset=25), Name('table', Param(), lineno=357, col_offset=31)], None, None, []), [Expr(Str("Return a list of columns in the given table.\n        [] if the table doesn't exist.\n        ", lineno=360, col_offset=-1), lineno=360, col_offset=-1), Assert(Call(Name('isinstance', Load(), lineno=361, col_offset=15), [Name('table', Load(), lineno=361, col_offset=26), Name('str', Load(), lineno=361, col_offset=33)], [], None, None, lineno=361, col_offset=15), None, lineno=361, col_offset=8), If(Call(Name('contains_metastrings', Load(), lineno=362, col_offset=11), [Name('table', Load(), lineno=362, col_offset=32)], [], None, None, lineno=362, col_offset=11), [Raise(Name('ValueError', Load(), lineno=363, col_offset=18), Str('bad table name: contains reserved metastrings', lineno=363, col_offset=30), None, lineno=363, col_offset=12)], [], lineno=362, col_offset=8), Assign([Name('columnlist_key', Store(), lineno=365, col_offset=8)], Call(Name('_columns_key', Load(), lineno=365, col_offset=25), [Name('table', Load(), lineno=365, col_offset=38)], [], None, None, lineno=365, col_offset=25), lineno=365, col_offset=8), If(UnaryOp(Not(), Call(Call(Name('getattr', Load(), lineno=366, col_offset=15), [Attribute(Name('self', Load(), lineno=366, col_offset=23), 'db', Load(), lineno=366, col_offset=23), Str('has_key', lineno=366, col_offset=32)], [], None, None, lineno=366, col_offset=15), [Name('columnlist_key', Load(), lineno=366, col_offset=43)], [], None, None, lineno=366, col_offset=15), lineno=366, col_offset=11), [Return(List([], Load(), lineno=367, col_offset=19), lineno=367, col_offset=12)], [], lineno=366, col_offset=8), Assign([Name('pickledcolumnlist', Store(), lineno=368, col_offset=8)], Call(Call(Name('getattr', Load(), lineno=368, col_offset=28), [Attribute(Name('self', Load(), lineno=368, col_offset=36), 'db', Load(), lineno=368, col_offset=36), Str('get_bytes', lineno=368, col_offset=45), Attribute(Attribute(Name('self', Load(), lineno=369, col_offset=16), 'db', Load(), lineno=369, col_offset=16), 'get', Load(), lineno=369, col_offset=16)], [], None, None, lineno=368, col_offset=28), [Name('columnlist_key', Load(), lineno=369, col_offset=29)], [], None, None, lineno=368, col_offset=28), lineno=368, col_offset=8), If(Name('pickledcolumnlist', Load(), lineno=370, col_offset=11), [Return(Call(Attribute(Name('pickle', Load(), lineno=371, col_offset=19), 'loads', Load(), lineno=371, col_offset=19), [Name('pickledcolumnlist', Load(), lineno=371, col_offset=32)], [], None, None, lineno=371, col_offset=19), lineno=371, col_offset=12)], [Return(List([], Load(), lineno=373, col_offset=19), lineno=373, col_offset=12)], lineno=370, col_offset=8)], [], lineno=357, col_offset=4), FunctionDef('ListTables', arguments([Name('self', Param(), lineno=375, col_offset=19)], None, None, []), [Expr(Str('Return a list of tables in this database.', lineno=376, col_offset=8), lineno=376, col_offset=8), Assign([Name('pickledtablelist', Store(), lineno=377, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=377, col_offset=27), 'db', Load(), lineno=377, col_offset=27), 'get_get', Load(), lineno=377, col_offset=27), [Name('_table_names_key', Load(), lineno=377, col_offset=43)], [], None, None, lineno=377, col_offset=27), lineno=377, col_offset=8), If(Name('pickledtablelist', Load(), lineno=378, col_offset=11), [Return(Call(Attribute(Name('pickle', Load(), lineno=379, col_offset=19), 'loads', Load(), lineno=379, col_offset=19), [Name('pickledtablelist', Load(), lineno=379, col_offset=32)], [], None, None, lineno=379, col_offset=19), lineno=379, col_offset=12)], [Return(List([], Load(), lineno=381, col_offset=19), lineno=381, col_offset=12)], lineno=378, col_offset=8)], [], lineno=375, col_offset=4), FunctionDef('CreateOrExtendTable', arguments([Name('self', Param(), lineno=383, col_offset=28), Name('table', Param(), lineno=383, col_offset=34), Name('columns', Param(), lineno=383, col_offset=41)], None, None, []), [Expr(Str('CreateOrExtendTable(table, columns)\n\n        Create a new table in the database.\n\n        If a table of this name already exists, extend it to have any\n        additional columns present in the given list as well as\n        all of its current columns.\n        ', lineno=391, col_offset=-1), lineno=391, col_offset=-1), Assert(Call(Name('isinstance', Load(), lineno=392, col_offset=15), [Name('columns', Load(), lineno=392, col_offset=26), Name('list', Load(), lineno=392, col_offset=35)], [], None, None, lineno=392, col_offset=15), None, lineno=392, col_offset=8), TryExcept([Expr(Call(Attribute(Name('self', Load(), lineno=395, col_offset=12), 'CreateTable', Load(), lineno=395, col_offset=12), [Name('table', Load(), lineno=395, col_offset=29), Name('columns', Load(), lineno=395, col_offset=36)], [], None, None, lineno=395, col_offset=12), lineno=395, col_offset=12)], [ExceptHandler(Name('TableAlreadyExists', Load(), lineno=396, col_offset=15), None, [Assign([Name('txn', Store(), lineno=398, col_offset=12)], Name('None', Load(), lineno=398, col_offset=18), lineno=398, col_offset=12), TryExcept([Assign([Name('columnlist_key', Store(), lineno=400, col_offset=16)], Call(Name('_columns_key', Load(), lineno=400, col_offset=33), [Name('table', Load(), lineno=400, col_offset=46)], [], None, None, lineno=400, col_offset=33), lineno=400, col_offset=16), Assign([Name('txn', Store(), lineno=401, col_offset=16)], Call(Attribute(Attribute(Name('self', Load(), lineno=401, col_offset=22), 'env', Load(), lineno=401, col_offset=22), 'txn_begin', Load(), lineno=401, col_offset=22), [], [], None, None, lineno=401, col_offset=22), lineno=401, col_offset=16), Assign([Name('oldcolumnlist', Store(), lineno=404, col_offset=16)], Call(Attribute(Name('pickle', Load(), lineno=404, col_offset=32), 'loads', Load(), lineno=404, col_offset=32), [Call(Call(Name('getattr', Load(), lineno=405, col_offset=20), [Attribute(Name('self', Load(), lineno=405, col_offset=28), 'db', Load(), lineno=405, col_offset=28), Str('get_bytes', lineno=405, col_offset=37), Attribute(Attribute(Name('self', Load(), lineno=406, col_offset=24), 'db', Load(), lineno=406, col_offset=24), 'get', Load(), lineno=406, col_offset=24)], [], None, None, lineno=405, col_offset=20), [Name('columnlist_key', Load(), lineno=406, col_offset=37)], [keyword('txn', Name('txn', Load(), lineno=406, col_offset=57)), keyword('flags', Attribute(Name('db', Load(), lineno=406, col_offset=68), 'DB_RMW', Load(), lineno=406, col_offset=68))], None, None, lineno=405, col_offset=20)], [], None, None, lineno=404, col_offset=32), lineno=404, col_offset=16), Assign([Name('oldcolumnhash', Store(), lineno=409, col_offset=16)], Dict([], [], lineno=409, col_offset=32), lineno=409, col_offset=16), For(Name('c', Store(), lineno=410, col_offset=20), Name('oldcolumnlist', Load(), lineno=410, col_offset=25), [Assign([Subscript(Name('oldcolumnhash', Load(), lineno=411, col_offset=20), Index(Name('c', Load(), lineno=411, col_offset=34)), Store(), lineno=411, col_offset=20)], Name('c', Load(), lineno=411, col_offset=39), lineno=411, col_offset=20)], [], lineno=410, col_offset=16), Assign([Name('newcolumnlist', Store(), lineno=415, col_offset=16)], Call(Attribute(Name('copy', Load(), lineno=415, col_offset=32), 'copy', Load(), lineno=415, col_offset=32), [Name('oldcolumnlist', Load(), lineno=415, col_offset=42)], [], None, None, lineno=415, col_offset=32), lineno=415, col_offset=16), For(Name('c', Store(), lineno=416, col_offset=20), Name('columns', Load(), lineno=416, col_offset=25), [If(UnaryOp(Not(), Compare(Name('c', Load(), lineno=417, col_offset=27), [In()], [Name('oldcolumnhash', Load(), lineno=417, col_offset=32)], lineno=417, col_offset=27), lineno=417, col_offset=23), [Expr(Call(Attribute(Name('newcolumnlist', Load(), lineno=418, col_offset=24), 'append', Load(), lineno=418, col_offset=24), [Name('c', Load(), lineno=418, col_offset=45)], [], None, None, lineno=418, col_offset=24), lineno=418, col_offset=24)], [], lineno=417, col_offset=20)], [], lineno=416, col_offset=16), If(Compare(Name('newcolumnlist', Load(), lineno=421, col_offset=19), [NotEq()], [Name('oldcolumnlist', Load(), lineno=421, col_offset=36)], lineno=421, col_offset=19), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=423, col_offset=20), 'db', Load(), lineno=423, col_offset=20), 'delete', Load(), lineno=423, col_offset=20), [Name('columnlist_key', Load(), lineno=423, col_offset=35)], [keyword('txn', Name('txn', Load(), lineno=423, col_offset=55))], None, None, lineno=423, col_offset=20), lineno=423, col_offset=20), Expr(Call(Call(Name('getattr', Load(), lineno=424, col_offset=20), [Attribute(Name('self', Load(), lineno=424, col_offset=28), 'db', Load(), lineno=424, col_offset=28), Str('put_bytes', lineno=424, col_offset=37), Attribute(Attribute(Name('self', Load(), lineno=424, col_offset=50), 'db', Load(), lineno=424, col_offset=50), 'put', Load(), lineno=424, col_offset=50)], [], None, None, lineno=424, col_offset=20), [Name('columnlist_key', Load(), lineno=424, col_offset=63), Call(Attribute(Name('pickle', Load(), lineno=425, col_offset=32), 'dumps', Load(), lineno=425, col_offset=32), [Name('newcolumnlist', Load(), lineno=425, col_offset=45), Num(1, lineno=425, col_offset=60)], [], None, None, lineno=425, col_offset=32)], [keyword('txn', Name('txn', Load(), lineno=426, col_offset=36))], None, None, lineno=424, col_offset=20), lineno=424, col_offset=20)], [], lineno=421, col_offset=16), Expr(Call(Attribute(Name('txn', Load(), lineno=428, col_offset=16), 'commit', Load(), lineno=428, col_offset=16), [], [], None, None, lineno=428, col_offset=16), lineno=428, col_offset=16), Assign([Name('txn', Store(), lineno=429, col_offset=16)], Name('None', Load(), lineno=429, col_offset=22), lineno=429, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=431, col_offset=16), '__load_column_info', Load(), lineno=431, col_offset=16), [Name('table', Load(), lineno=431, col_offset=40)], [], None, None, lineno=431, col_offset=16), lineno=431, col_offset=16)], [ExceptHandler(Attribute(Name('db', Load(), lineno=432, col_offset=19), 'DBError', Load(), lineno=432, col_offset=19), Name('dberror', Store(), lineno=432, col_offset=31), [If(Name('txn', Load(), lineno=433, col_offset=19), [Expr(Call(Attribute(Name('txn', Load(), lineno=434, col_offset=20), 'abort', Load(), lineno=434, col_offset=20), [], [], None, None, lineno=434, col_offset=20), lineno=434, col_offset=20)], [], lineno=433, col_offset=16), If(Compare(Attribute(Name('sys', Load(), lineno=435, col_offset=19), 'version_info', Load(), lineno=435, col_offset=19), [Lt()], [Tuple([Num(2, lineno=435, col_offset=39), Num(6, lineno=435, col_offset=42)], Load(), lineno=435, col_offset=39)], lineno=435, col_offset=19), [Raise(Name('TableDBError', Load(), lineno=436, col_offset=26), Subscript(Name('dberror', Load(), lineno=436, col_offset=40), Index(Num(1, lineno=436, col_offset=48)), Load(), lineno=436, col_offset=40), None, lineno=436, col_offset=20)], [Raise(Name('TableDBError', Load(), lineno=438, col_offset=26), Subscript(Attribute(Name('dberror', Load(), lineno=438, col_offset=40), 'args', Load(), lineno=438, col_offset=40), Index(Num(1, lineno=438, col_offset=53)), Load(), lineno=438, col_offset=40), None, lineno=438, col_offset=20)], lineno=435, col_offset=16)], lineno=432, col_offset=12)], [], lineno=399, col_offset=12)], lineno=396, col_offset=8)], [], lineno=394, col_offset=8)], [], lineno=383, col_offset=4), FunctionDef('__load_column_info', arguments([Name('self', Param(), lineno=441, col_offset=27), Name('table', Param(), lineno=441, col_offset=33)], None, None, []), [Expr(Str('initialize the self.__tablecolumns dict', lineno=442, col_offset=8), lineno=442, col_offset=8), TryExcept([Assign([Name('tcolpickles', Store(), lineno=445, col_offset=12)], Call(Call(Name('getattr', Load(), lineno=445, col_offset=26), [Attribute(Name('self', Load(), lineno=445, col_offset=34), 'db', Load(), lineno=445, col_offset=34), Str('get_bytes', lineno=445, col_offset=43), Attribute(Attribute(Name('self', Load(), lineno=446, col_offset=20), 'db', Load(), lineno=446, col_offset=20), 'get', Load(), lineno=446, col_offset=20)], [], None, None, lineno=445, col_offset=26), [Call(Name('_columns_key', Load(), lineno=446, col_offset=33), [Name('table', Load(), lineno=446, col_offset=46)], [], None, None, lineno=446, col_offset=33)], [], None, None, lineno=445, col_offset=26), lineno=445, col_offset=12)], [ExceptHandler(Attribute(Name('db', Load(), lineno=447, col_offset=15), 'DBNotFoundError', Load(), lineno=447, col_offset=15), None, [Raise(Name('TableDBError', Load(), lineno=448, col_offset=18), BinOp(Str('unknown table: %r', lineno=448, col_offset=32), Mod(), Tuple([Name('table', Load(), lineno=448, col_offset=55)], Load(), lineno=448, col_offset=55), lineno=448, col_offset=32), None, lineno=448, col_offset=12)], lineno=447, col_offset=8)], [], lineno=444, col_offset=8), If(UnaryOp(Not(), Name('tcolpickles', Load(), lineno=449, col_offset=15), lineno=449, col_offset=11), [Raise(Name('TableDBError', Load(), lineno=450, col_offset=18), BinOp(Str('unknown table: %r', lineno=450, col_offset=32), Mod(), Tuple([Name('table', Load(), lineno=450, col_offset=55)], Load(), lineno=450, col_offset=55), lineno=450, col_offset=32), None, lineno=450, col_offset=12)], [], lineno=449, col_offset=8), Assign([Subscript(Attribute(Name('self', Load(), lineno=451, col_offset=8), '__tablecolumns', Load(), lineno=451, col_offset=8), Index(Name('table', Load(), lineno=451, col_offset=28)), Store(), lineno=451, col_offset=8)], Call(Attribute(Name('pickle', Load(), lineno=451, col_offset=37), 'loads', Load(), lineno=451, col_offset=37), [Name('tcolpickles', Load(), lineno=451, col_offset=50)], [], None, None, lineno=451, col_offset=37), lineno=451, col_offset=8)], [], lineno=441, col_offset=4), FunctionDef('__new_rowid', arguments([Name('self', Param(), lineno=453, col_offset=20), Name('table', Param(), lineno=453, col_offset=26), Name('txn', Param(), lineno=453, col_offset=33)], None, None, []), [Expr(Str('Create a new unique row identifier', lineno=454, col_offset=8), lineno=454, col_offset=8), Assign([Name('unique', Store(), lineno=455, col_offset=8)], Num(0, lineno=455, col_offset=17), lineno=455, col_offset=8), While(UnaryOp(Not(), Name('unique', Load(), lineno=456, col_offset=18), lineno=456, col_offset=14), [Assign([Name('blist', Store(), lineno=460, col_offset=12)], List([], Load(), lineno=460, col_offset=20), lineno=460, col_offset=12), For(Name('x', Store(), lineno=461, col_offset=16), Call(Name('xrange', Load(), lineno=461, col_offset=21), [Name('_rowid_str_len', Load(), lineno=461, col_offset=28)], [], None, None, lineno=461, col_offset=21), [Expr(Call(Attribute(Name('blist', Load(), lineno=462, col_offset=16), 'append', Load(), lineno=462, col_offset=16), [Call(Attribute(Name('random', Load(), lineno=462, col_offset=29), 'randint', Load(), lineno=462, col_offset=29), [Num(0, lineno=462, col_offset=44), Num(255, lineno=462, col_offset=46)], [], None, None, lineno=462, col_offset=29)], [], None, None, lineno=462, col_offset=16), lineno=462, col_offset=16)], [], lineno=461, col_offset=12), Assign([Name('newid', Store(), lineno=463, col_offset=12)], Call(Attribute(Name('struct', Load(), lineno=463, col_offset=20), 'pack', Load(), lineno=463, col_offset=20), [BinOp(Str('B', lineno=463, col_offset=32), Mult(), Name('_rowid_str_len', Load(), lineno=463, col_offset=36), lineno=463, col_offset=32)], [], Name('blist', Load(), lineno=463, col_offset=53), None, lineno=463, col_offset=20), lineno=463, col_offset=12), If(Compare(Subscript(Attribute(Name('sys', Load(), lineno=465, col_offset=15), 'version_info', Load(), lineno=465, col_offset=15), Index(Num(0, lineno=465, col_offset=32)), Load(), lineno=465, col_offset=15), [GtE()], [Num(3, lineno=465, col_offset=38)], lineno=465, col_offset=15), [Assign([Name('newid', Store(), lineno=466, col_offset=16)], Call(Attribute(Name('newid', Load(), lineno=466, col_offset=24), 'decode', Load(), lineno=466, col_offset=24), [Str('iso8859-1', lineno=466, col_offset=37)], [], None, None, lineno=466, col_offset=24), lineno=466, col_offset=16)], [], lineno=465, col_offset=12), TryExcept([Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=470, col_offset=16), 'db', Load(), lineno=470, col_offset=16), 'put', Load(), lineno=470, col_offset=16), [Call(Name('_rowid_key', Load(), lineno=470, col_offset=28), [Name('table', Load(), lineno=470, col_offset=39), Name('newid', Load(), lineno=470, col_offset=46)], [], None, None, lineno=470, col_offset=28), Name('None', Load(), lineno=470, col_offset=54)], [keyword('txn', Name('txn', Load(), lineno=470, col_offset=64)), keyword('flags', Attribute(Name('db', Load(), lineno=471, col_offset=34), 'DB_NOOVERWRITE', Load(), lineno=471, col_offset=34))], None, None, lineno=470, col_offset=16), lineno=470, col_offset=16)], [ExceptHandler(Attribute(Name('db', Load(), lineno=472, col_offset=19), 'DBKeyExistError', Load(), lineno=472, col_offset=19), None, [Pass( lineno=473, col_offset=16)], lineno=472, col_offset=12)], [Assign([Name('unique', Store(), lineno=475, col_offset=16)], Num(1, lineno=475, col_offset=25), lineno=475, col_offset=16)], lineno=469, col_offset=12)], [], lineno=456, col_offset=8), Return(Name('newid', Load(), lineno=477, col_offset=15), lineno=477, col_offset=8)], [], lineno=453, col_offset=4), FunctionDef('Insert', arguments([Name('self', Param(), lineno=480, col_offset=15), Name('table', Param(), lineno=480, col_offset=21), Name('rowdict', Param(), lineno=480, col_offset=28)], None, None, []), [Expr(Str('Insert(table, datadict) - Insert a new row into the table\n        using the keys+values from rowdict as the column values.\n        ', lineno=483, col_offset=-1), lineno=483, col_offset=-1), Assign([Name('txn', Store(), lineno=485, col_offset=8)], Name('None', Load(), lineno=485, col_offset=14), lineno=485, col_offset=8), TryExcept([If(UnaryOp(Not(), Call(Call(Name('getattr', Load(), lineno=487, col_offset=19), [Attribute(Name('self', Load(), lineno=487, col_offset=27), 'db', Load(), lineno=487, col_offset=27), Str('has_key', lineno=487, col_offset=36)], [], None, None, lineno=487, col_offset=19), [Call(Name('_columns_key', Load(), lineno=487, col_offset=47), [Name('table', Load(), lineno=487, col_offset=60)], [], None, None, lineno=487, col_offset=47)], [], None, None, lineno=487, col_offset=19), lineno=487, col_offset=15), [Raise(Name('TableDBError', Load(), lineno=488, col_offset=22), Str('unknown table', lineno=488, col_offset=36), None, lineno=488, col_offset=16)], [], lineno=487, col_offset=12), If(UnaryOp(Not(), Compare(Name('table', Load(), lineno=491, col_offset=19), [In()], [Attribute(Name('self', Load(), lineno=491, col_offset=28), '__tablecolumns', Load(), lineno=491, col_offset=28)], lineno=491, col_offset=19), lineno=491, col_offset=15), [Expr(Call(Attribute(Name('self', Load(), lineno=492, col_offset=16), '__load_column_info', Load(), lineno=492, col_offset=16), [Name('table', Load(), lineno=492, col_offset=40)], [], None, None, lineno=492, col_offset=16), lineno=492, col_offset=16)], [], lineno=491, col_offset=12), For(Name('column', Store(), lineno=493, col_offset=16), Call(Attribute(Name('rowdict', Load(), lineno=493, col_offset=26), 'keys', Load(), lineno=493, col_offset=26), [], [], None, None, lineno=493, col_offset=26), [If(UnaryOp(Not(), Call(Attribute(Subscript(Attribute(Name('self', Load(), lineno=494, col_offset=23), '__tablecolumns', Load(), lineno=494, col_offset=23), Index(Name('table', Load(), lineno=494, col_offset=43)), Load(), lineno=494, col_offset=23), 'count', Load(), lineno=494, col_offset=23), [Name('column', Load(), lineno=494, col_offset=56)], [], None, None, lineno=494, col_offset=23), lineno=494, col_offset=19), [Raise(Name('TableDBError', Load(), lineno=495, col_offset=26), BinOp(Str('unknown column: %r', lineno=495, col_offset=40), Mod(), Tuple([Name('column', Load(), lineno=495, col_offset=64)], Load(), lineno=495, col_offset=64), lineno=495, col_offset=40), None, lineno=495, col_offset=20)], [], lineno=494, col_offset=16)], [], lineno=493, col_offset=12), Assign([Name('txn', Store(), lineno=498, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=498, col_offset=18), 'env', Load(), lineno=498, col_offset=18), 'txn_begin', Load(), lineno=498, col_offset=18), [], [], None, None, lineno=498, col_offset=18), lineno=498, col_offset=12), Assign([Name('rowid', Store(), lineno=499, col_offset=12)], Call(Attribute(Name('self', Load(), lineno=499, col_offset=20), '__new_rowid', Load(), lineno=499, col_offset=20), [Name('table', Load(), lineno=499, col_offset=37)], [keyword('txn', Name('txn', Load(), lineno=499, col_offset=48))], None, None, lineno=499, col_offset=20), lineno=499, col_offset=12), For(Tuple([Name('column', Store(), lineno=502, col_offset=16), Name('dataitem', Store(), lineno=502, col_offset=24)], Store(), lineno=502, col_offset=16), Call(Attribute(Name('rowdict', Load(), lineno=502, col_offset=36), 'items', Load(), lineno=502, col_offset=36), [], [], None, None, lineno=502, col_offset=36), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=504, col_offset=16), 'db', Load(), lineno=504, col_offset=16), 'put', Load(), lineno=504, col_offset=16), [Call(Name('_data_key', Load(), lineno=504, col_offset=28), [Name('table', Load(), lineno=504, col_offset=38), Name('column', Load(), lineno=504, col_offset=45), Name('rowid', Load(), lineno=504, col_offset=53)], [], None, None, lineno=504, col_offset=28), Name('dataitem', Load(), lineno=504, col_offset=61)], [keyword('txn', Name('txn', Load(), lineno=504, col_offset=75))], None, None, lineno=504, col_offset=16), lineno=504, col_offset=16)], [], lineno=502, col_offset=12), Expr(Call(Attribute(Name('txn', Load(), lineno=506, col_offset=12), 'commit', Load(), lineno=506, col_offset=12), [], [], None, None, lineno=506, col_offset=12), lineno=506, col_offset=12), Assign([Name('txn', Store(), lineno=507, col_offset=12)], Name('None', Load(), lineno=507, col_offset=18), lineno=507, col_offset=12)], [ExceptHandler(Attribute(Name('db', Load(), lineno=509, col_offset=15), 'DBError', Load(), lineno=509, col_offset=15), Name('dberror', Store(), lineno=509, col_offset=27), [Assign([Name('info', Store(), lineno=514, col_offset=12)], Call(Attribute(Name('sys', Load(), lineno=514, col_offset=19), 'exc_info', Load(), lineno=514, col_offset=19), [], [], None, None, lineno=514, col_offset=19), lineno=514, col_offset=12), If(Name('txn', Load(), lineno=515, col_offset=15), [Expr(Call(Attribute(Name('txn', Load(), lineno=516, col_offset=16), 'abort', Load(), lineno=516, col_offset=16), [], [], None, None, lineno=516, col_offset=16), lineno=516, col_offset=16), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=517, col_offset=16), 'db', Load(), lineno=517, col_offset=16), 'delete', Load(), lineno=517, col_offset=16), [Call(Name('_rowid_key', Load(), lineno=517, col_offset=31), [Name('table', Load(), lineno=517, col_offset=42), Name('rowid', Load(), lineno=517, col_offset=49)], [], None, None, lineno=517, col_offset=31)], [], None, None, lineno=517, col_offset=16), lineno=517, col_offset=16)], [], lineno=515, col_offset=12), If(Compare(Attribute(Name('sys', Load(), lineno=518, col_offset=15), 'version_info', Load(), lineno=518, col_offset=15), [Lt()], [Tuple([Num(2, lineno=518, col_offset=35), Num(6, lineno=518, col_offset=38)], Load(), lineno=518, col_offset=35)], lineno=518, col_offset=15), [Raise(Name('TableDBError', Load(), lineno=519, col_offset=22), Subscript(Name('dberror', Load(), lineno=519, col_offset=36), Index(Num(1, lineno=519, col_offset=44)), Load(), lineno=519, col_offset=36), Subscript(Name('info', Load(), lineno=519, col_offset=48), Index(Num(2, lineno=519, col_offset=53)), Load(), lineno=519, col_offset=48), lineno=519, col_offset=16)], [Raise(Name('TableDBError', Load(), lineno=521, col_offset=22), Subscript(Attribute(Name('dberror', Load(), lineno=521, col_offset=36), 'args', Load(), lineno=521, col_offset=36), Index(Num(1, lineno=521, col_offset=49)), Load(), lineno=521, col_offset=36), Subscript(Name('info', Load(), lineno=521, col_offset=53), Index(Num(2, lineno=521, col_offset=58)), Load(), lineno=521, col_offset=53), lineno=521, col_offset=16)], lineno=518, col_offset=12)], lineno=509, col_offset=8)], [], lineno=486, col_offset=8)], [], lineno=480, col_offset=4), FunctionDef('Modify', arguments([Name('self', Param(), lineno=524, col_offset=15), Name('table', Param(), lineno=524, col_offset=21), Name('conditions', Param(), lineno=524, col_offset=28), Name('mappings', Param(), lineno=524, col_offset=43)], None, None, [Dict([], [], lineno=524, col_offset=39), Dict([], [], lineno=524, col_offset=52)]), [Expr(Str("Modify(table, conditions={}, mappings={}) - Modify items in rows matching 'conditions' using mapping functions in 'mappings'\n\n        * table - the table name\n        * conditions - a dictionary keyed on column names containing\n          a condition callable expecting the data string as an\n          argument and returning a boolean.\n        * mappings - a dictionary keyed on column names containing a\n          condition callable expecting the data string as an argument and\n          returning the new string for that column.\n        ", lineno=534, col_offset=-1), lineno=534, col_offset=-1), TryExcept([Assign([Name('matching_rowids', Store(), lineno=537, col_offset=12)], Call(Attribute(Name('self', Load(), lineno=537, col_offset=30), '__Select', Load(), lineno=537, col_offset=30), [Name('table', Load(), lineno=537, col_offset=44), List([], Load(), lineno=537, col_offset=51), Name('conditions', Load(), lineno=537, col_offset=55)], [], None, None, lineno=537, col_offset=30), lineno=537, col_offset=12), Assign([Name('columns', Store(), lineno=540, col_offset=12)], Call(Attribute(Name('mappings', Load(), lineno=540, col_offset=22), 'keys', Load(), lineno=540, col_offset=22), [], [], None, None, lineno=540, col_offset=22), lineno=540, col_offset=12), For(Name('rowid', Store(), lineno=541, col_offset=16), Call(Attribute(Name('matching_rowids', Load(), lineno=541, col_offset=25), 'keys', Load(), lineno=541, col_offset=25), [], [], None, None, lineno=541, col_offset=25), [Assign([Name('txn', Store(), lineno=542, col_offset=16)], Name('None', Load(), lineno=542, col_offset=22), lineno=542, col_offset=16), TryExcept([For(Name('column', Store(), lineno=544, col_offset=24), Name('columns', Load(), lineno=544, col_offset=34), [Assign([Name('txn', Store(), lineno=545, col_offset=24)], Call(Attribute(Attribute(Name('self', Load(), lineno=545, col_offset=30), 'env', Load(), lineno=545, col_offset=30), 'txn_begin', Load(), lineno=545, col_offset=30), [], [], None, None, lineno=545, col_offset=30), lineno=545, col_offset=24), TryExcept([Assign([Name('dataitem', Store(), lineno=548, col_offset=28)], Call(Attribute(Attribute(Name('self', Load(), lineno=548, col_offset=39), 'db', Load(), lineno=548, col_offset=39), 'get', Load(), lineno=548, col_offset=39), [Call(Name('_data_key', Load(), lineno=549, col_offset=32), [Name('table', Load(), lineno=549, col_offset=42), Name('column', Load(), lineno=549, col_offset=49), Name('rowid', Load(), lineno=549, col_offset=57)], [], None, None, lineno=549, col_offset=32)], [keyword('txn', Name('txn', Load(), lineno=550, col_offset=36))], None, None, lineno=548, col_offset=39), lineno=548, col_offset=28), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=551, col_offset=28), 'db', Load(), lineno=551, col_offset=28), 'delete', Load(), lineno=551, col_offset=28), [Call(Name('_data_key', Load(), lineno=552, col_offset=32), [Name('table', Load(), lineno=552, col_offset=42), Name('column', Load(), lineno=552, col_offset=49), Name('rowid', Load(), lineno=552, col_offset=57)], [], None, None, lineno=552, col_offset=32)], [keyword('txn', Name('txn', Load(), lineno=553, col_offset=36))], None, None, lineno=551, col_offset=28), lineno=551, col_offset=28)], [ExceptHandler(Attribute(Name('db', Load(), lineno=554, col_offset=31), 'DBNotFoundError', Load(), lineno=554, col_offset=31), None, [Assign([Name('dataitem', Store(), lineno=557, col_offset=28)], Name('None', Load(), lineno=557, col_offset=39), lineno=557, col_offset=28)], lineno=554, col_offset=24)], [], lineno=547, col_offset=24), Assign([Name('dataitem', Store(), lineno=558, col_offset=24)], Call(Subscript(Name('mappings', Load(), lineno=558, col_offset=35), Index(Name('column', Load(), lineno=558, col_offset=44)), Load(), lineno=558, col_offset=35), [Name('dataitem', Load(), lineno=558, col_offset=52)], [], None, None, lineno=558, col_offset=35), lineno=558, col_offset=24), If(Compare(Name('dataitem', Load(), lineno=559, col_offset=27), [IsNot()], [Name('None', Load(), lineno=559, col_offset=43)], lineno=559, col_offset=27), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=560, col_offset=28), 'db', Load(), lineno=560, col_offset=28), 'put', Load(), lineno=560, col_offset=28), [Call(Name('_data_key', Load(), lineno=561, col_offset=32), [Name('table', Load(), lineno=561, col_offset=42), Name('column', Load(), lineno=561, col_offset=49), Name('rowid', Load(), lineno=561, col_offset=57)], [], None, None, lineno=561, col_offset=32), Name('dataitem', Load(), lineno=562, col_offset=32)], [keyword('txn', Name('txn', Load(), lineno=562, col_offset=46))], None, None, lineno=560, col_offset=28), lineno=560, col_offset=28)], [], lineno=559, col_offset=24), Expr(Call(Attribute(Name('txn', Load(), lineno=563, col_offset=24), 'commit', Load(), lineno=563, col_offset=24), [], [], None, None, lineno=563, col_offset=24), lineno=563, col_offset=24), Assign([Name('txn', Store(), lineno=564, col_offset=24)], Name('None', Load(), lineno=564, col_offset=30), lineno=564, col_offset=24)], [], lineno=544, col_offset=20)], [ExceptHandler(None, None, [If(Name('txn', Load(), lineno=568, col_offset=23), [Expr(Call(Attribute(Name('txn', Load(), lineno=569, col_offset=24), 'abort', Load(), lineno=569, col_offset=24), [], [], None, None, lineno=569, col_offset=24), lineno=569, col_offset=24)], [], lineno=568, col_offset=20), Raise(None, None, None, lineno=570, col_offset=20)], lineno=567, col_offset=16)], [], lineno=543, col_offset=16)], [], lineno=541, col_offset=12)], [ExceptHandler(Attribute(Name('db', Load(), lineno=572, col_offset=15), 'DBError', Load(), lineno=572, col_offset=15), Name('dberror', Store(), lineno=572, col_offset=27), [If(Compare(Attribute(Name('sys', Load(), lineno=573, col_offset=15), 'version_info', Load(), lineno=573, col_offset=15), [Lt()], [Tuple([Num(2, lineno=573, col_offset=35), Num(6, lineno=573, col_offset=38)], Load(), lineno=573, col_offset=35)], lineno=573, col_offset=15), [Raise(Name('TableDBError', Load(), lineno=574, col_offset=22), Subscript(Name('dberror', Load(), lineno=574, col_offset=36), Index(Num(1, lineno=574, col_offset=44)), Load(), lineno=574, col_offset=36), None, lineno=574, col_offset=16)], [Raise(Name('TableDBError', Load(), lineno=576, col_offset=22), Subscript(Attribute(Name('dberror', Load(), lineno=576, col_offset=36), 'args', Load(), lineno=576, col_offset=36), Index(Num(1, lineno=576, col_offset=49)), Load(), lineno=576, col_offset=36), None, lineno=576, col_offset=16)], lineno=573, col_offset=12)], lineno=572, col_offset=8)], [], lineno=536, col_offset=8)], [], lineno=524, col_offset=4), FunctionDef('Delete', arguments([Name('self', Param(), lineno=578, col_offset=15), Name('table', Param(), lineno=578, col_offset=21), Name('conditions', Param(), lineno=578, col_offset=28)], None, None, [Dict([], [], lineno=578, col_offset=39)]), [Expr(Str('Delete(table, conditions) - Delete items matching the given\n        conditions from the table.\n\n        * conditions - a dictionary keyed on column names containing\n          condition functions expecting the data string as an\n          argument and returning a boolean.\n        ', lineno=585, col_offset=-1), lineno=585, col_offset=-1), TryExcept([Assign([Name('matching_rowids', Store(), lineno=588, col_offset=12)], Call(Attribute(Name('self', Load(), lineno=588, col_offset=30), '__Select', Load(), lineno=588, col_offset=30), [Name('table', Load(), lineno=588, col_offset=44), List([], Load(), lineno=588, col_offset=51), Name('conditions', Load(), lineno=588, col_offset=55)], [], None, None, lineno=588, col_offset=30), lineno=588, col_offset=12), Assign([Name('columns', Store(), lineno=591, col_offset=12)], Subscript(Attribute(Name('self', Load(), lineno=591, col_offset=22), '__tablecolumns', Load(), lineno=591, col_offset=22), Index(Name('table', Load(), lineno=591, col_offset=42)), Load(), lineno=591, col_offset=22), lineno=591, col_offset=12), For(Name('rowid', Store(), lineno=592, col_offset=16), Call(Attribute(Name('matching_rowids', Load(), lineno=592, col_offset=25), 'keys', Load(), lineno=592, col_offset=25), [], [], None, None, lineno=592, col_offset=25), [Assign([Name('txn', Store(), lineno=593, col_offset=16)], Name('None', Load(), lineno=593, col_offset=22), lineno=593, col_offset=16), TryExcept([Assign([Name('txn', Store(), lineno=595, col_offset=20)], Call(Attribute(Attribute(Name('self', Load(), lineno=595, col_offset=26), 'env', Load(), lineno=595, col_offset=26), 'txn_begin', Load(), lineno=595, col_offset=26), [], [], None, None, lineno=595, col_offset=26), lineno=595, col_offset=20), For(Name('column', Store(), lineno=596, col_offset=24), Name('columns', Load(), lineno=596, col_offset=34), [TryExcept([Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=599, col_offset=28), 'db', Load(), lineno=599, col_offset=28), 'delete', Load(), lineno=599, col_offset=28), [Call(Name('_data_key', Load(), lineno=599, col_offset=43), [Name('table', Load(), lineno=599, col_offset=53), Name('column', Load(), lineno=599, col_offset=60), Name('rowid', Load(), lineno=599, col_offset=68)], [], None, None, lineno=599, col_offset=43)], [keyword('txn', Name('txn', Load(), lineno=600, col_offset=47))], None, None, lineno=599, col_offset=28), lineno=599, col_offset=28)], [ExceptHandler(Attribute(Name('db', Load(), lineno=601, col_offset=31), 'DBNotFoundError', Load(), lineno=601, col_offset=31), None, [Pass( lineno=603, col_offset=28)], lineno=601, col_offset=24)], [], lineno=598, col_offset=24)], [], lineno=596, col_offset=20), TryExcept([Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=606, col_offset=24), 'db', Load(), lineno=606, col_offset=24), 'delete', Load(), lineno=606, col_offset=24), [Call(Name('_rowid_key', Load(), lineno=606, col_offset=39), [Name('table', Load(), lineno=606, col_offset=50), Name('rowid', Load(), lineno=606, col_offset=57)], [], None, None, lineno=606, col_offset=39)], [keyword('txn', Name('txn', Load(), lineno=606, col_offset=69))], None, None, lineno=606, col_offset=24), lineno=606, col_offset=24)], [ExceptHandler(Attribute(Name('db', Load(), lineno=607, col_offset=27), 'DBNotFoundError', Load(), lineno=607, col_offset=27), None, [Pass( lineno=609, col_offset=24)], lineno=607, col_offset=20)], [], lineno=605, col_offset=20), Expr(Call(Attribute(Name('txn', Load(), lineno=610, col_offset=20), 'commit', Load(), lineno=610, col_offset=20), [], [], None, None, lineno=610, col_offset=20), lineno=610, col_offset=20), Assign([Name('txn', Store(), lineno=611, col_offset=20)], Name('None', Load(), lineno=611, col_offset=26), lineno=611, col_offset=20)], [ExceptHandler(Attribute(Name('db', Load(), lineno=612, col_offset=23), 'DBError', Load(), lineno=612, col_offset=23), Name('dberror', Store(), lineno=612, col_offset=35), [If(Name('txn', Load(), lineno=613, col_offset=23), [Expr(Call(Attribute(Name('txn', Load(), lineno=614, col_offset=24), 'abort', Load(), lineno=614, col_offset=24), [], [], None, None, lineno=614, col_offset=24), lineno=614, col_offset=24)], [], lineno=613, col_offset=20), Raise(None, None, None, lineno=615, col_offset=20)], lineno=612, col_offset=16)], [], lineno=594, col_offset=16)], [], lineno=592, col_offset=12)], [ExceptHandler(Attribute(Name('db', Load(), lineno=616, col_offset=15), 'DBError', Load(), lineno=616, col_offset=15), Name('dberror', Store(), lineno=616, col_offset=27), [If(Compare(Attribute(Name('sys', Load(), lineno=617, col_offset=15), 'version_info', Load(), lineno=617, col_offset=15), [Lt()], [Tuple([Num(2, lineno=617, col_offset=35), Num(6, lineno=617, col_offset=38)], Load(), lineno=617, col_offset=35)], lineno=617, col_offset=15), [Raise(Name('TableDBError', Load(), lineno=618, col_offset=22), Subscript(Name('dberror', Load(), lineno=618, col_offset=36), Index(Num(1, lineno=618, col_offset=44)), Load(), lineno=618, col_offset=36), None, lineno=618, col_offset=16)], [Raise(Name('TableDBError', Load(), lineno=620, col_offset=22), Subscript(Attribute(Name('dberror', Load(), lineno=620, col_offset=36), 'args', Load(), lineno=620, col_offset=36), Index(Num(1, lineno=620, col_offset=49)), Load(), lineno=620, col_offset=36), None, lineno=620, col_offset=16)], lineno=617, col_offset=12)], lineno=616, col_offset=8)], [], lineno=587, col_offset=8)], [], lineno=578, col_offset=4), FunctionDef('Select', arguments([Name('self', Param(), lineno=623, col_offset=15), Name('table', Param(), lineno=623, col_offset=21), Name('columns', Param(), lineno=623, col_offset=28), Name('conditions', Param(), lineno=623, col_offset=37)], None, None, [Dict([], [], lineno=623, col_offset=48)]), [Expr(Str('Select(table, columns, conditions) - retrieve specific row data\n        Returns a list of row column->value mapping dictionaries.\n\n        * columns - a list of which column data to return.  If\n          columns is None, all columns will be returned.\n        * conditions - a dictionary keyed on column names\n          containing callable conditions expecting the data string as an\n          argument and returning a boolean.\n        ', lineno=632, col_offset=-1), lineno=632, col_offset=-1), TryExcept([If(UnaryOp(Not(), Compare(Name('table', Load(), lineno=634, col_offset=19), [In()], [Attribute(Name('self', Load(), lineno=634, col_offset=28), '__tablecolumns', Load(), lineno=634, col_offset=28)], lineno=634, col_offset=19), lineno=634, col_offset=15), [Expr(Call(Attribute(Name('self', Load(), lineno=635, col_offset=16), '__load_column_info', Load(), lineno=635, col_offset=16), [Name('table', Load(), lineno=635, col_offset=40)], [], None, None, lineno=635, col_offset=16), lineno=635, col_offset=16)], [], lineno=634, col_offset=12), If(Compare(Name('columns', Load(), lineno=636, col_offset=15), [Is()], [Name('None', Load(), lineno=636, col_offset=26)], lineno=636, col_offset=15), [Assign([Name('columns', Store(), lineno=637, col_offset=16)], Subscript(Attribute(Name('self', Load(), lineno=637, col_offset=26), '__tablecolumns', Load(), lineno=637, col_offset=26), Index(Name('table', Load(), lineno=637, col_offset=46)), Load(), lineno=637, col_offset=26), lineno=637, col_offset=16)], [], lineno=636, col_offset=12), Assign([Name('matching_rowids', Store(), lineno=638, col_offset=12)], Call(Attribute(Name('self', Load(), lineno=638, col_offset=30), '__Select', Load(), lineno=638, col_offset=30), [Name('table', Load(), lineno=638, col_offset=44), Name('columns', Load(), lineno=638, col_offset=51), Name('conditions', Load(), lineno=638, col_offset=60)], [], None, None, lineno=638, col_offset=30), lineno=638, col_offset=12)], [ExceptHandler(Attribute(Name('db', Load(), lineno=639, col_offset=15), 'DBError', Load(), lineno=639, col_offset=15), Name('dberror', Store(), lineno=639, col_offset=27), [If(Compare(Attribute(Name('sys', Load(), lineno=640, col_offset=15), 'version_info', Load(), lineno=640, col_offset=15), [Lt()], [Tuple([Num(2, lineno=640, col_offset=35), Num(6, lineno=640, col_offset=38)], Load(), lineno=640, col_offset=35)], lineno=640, col_offset=15), [Raise(Name('TableDBError', Load(), lineno=641, col_offset=22), Subscript(Name('dberror', Load(), lineno=641, col_offset=36), Index(Num(1, lineno=641, col_offset=44)), Load(), lineno=641, col_offset=36), None, lineno=641, col_offset=16)], [Raise(Name('TableDBError', Load(), lineno=643, col_offset=22), Subscript(Attribute(Name('dberror', Load(), lineno=643, col_offset=36), 'args', Load(), lineno=643, col_offset=36), Index(Num(1, lineno=643, col_offset=49)), Load(), lineno=643, col_offset=36), None, lineno=643, col_offset=16)], lineno=640, col_offset=12)], lineno=639, col_offset=8)], [], lineno=633, col_offset=8), Return(Call(Attribute(Name('matching_rowids', Load(), lineno=645, col_offset=15), 'values', Load(), lineno=645, col_offset=15), [], [], None, None, lineno=645, col_offset=15), lineno=645, col_offset=8)], [], lineno=623, col_offset=4), FunctionDef('__Select', arguments([Name('self', Param(), lineno=648, col_offset=17), Name('table', Param(), lineno=648, col_offset=23), Name('columns', Param(), lineno=648, col_offset=30), Name('conditions', Param(), lineno=648, col_offset=39)], None, None, []), [Expr(Str('__Select() - Used to implement Select and Delete (above)\n        Returns a dictionary keyed on rowids containing dicts\n        holding the row data for columns listed in the columns param\n        that match the given conditions.\n        * conditions is a dictionary keyed on column names\n        containing callable conditions expecting the data string as an\n        argument and returning a boolean.\n        ', lineno=656, col_offset=-1), lineno=656, col_offset=-1), If(UnaryOp(Not(), Compare(Name('table', Load(), lineno=658, col_offset=15), [In()], [Attribute(Name('self', Load(), lineno=658, col_offset=24), '__tablecolumns', Load(), lineno=658, col_offset=24)], lineno=658, col_offset=15), lineno=658, col_offset=11), [Expr(Call(Attribute(Name('self', Load(), lineno=659, col_offset=12), '__load_column_info', Load(), lineno=659, col_offset=12), [Name('table', Load(), lineno=659, col_offset=36)], [], None, None, lineno=659, col_offset=12), lineno=659, col_offset=12)], [], lineno=658, col_offset=8), If(Compare(Name('columns', Load(), lineno=660, col_offset=11), [Is()], [Name('None', Load(), lineno=660, col_offset=22)], lineno=660, col_offset=11), [Assign([Name('columns', Store(), lineno=661, col_offset=12)], Subscript(Attribute(Name('self', Load(), lineno=661, col_offset=22), 'tablecolumns', Load(), lineno=661, col_offset=22), Index(Name('table', Load(), lineno=661, col_offset=40)), Load(), lineno=661, col_offset=22), lineno=661, col_offset=12)], [], lineno=660, col_offset=8), For(Name('column', Store(), lineno=662, col_offset=12), BinOp(Name('columns', Load(), lineno=662, col_offset=23), Add(), Call(Attribute(Name('conditions', Load(), lineno=662, col_offset=33), 'keys', Load(), lineno=662, col_offset=33), [], [], None, None, lineno=662, col_offset=33), lineno=662, col_offset=23), [If(UnaryOp(Not(), Call(Attribute(Subscript(Attribute(Name('self', Load(), lineno=663, col_offset=19), '__tablecolumns', Load(), lineno=663, col_offset=19), Index(Name('table', Load(), lineno=663, col_offset=39)), Load(), lineno=663, col_offset=19), 'count', Load(), lineno=663, col_offset=19), [Name('column', Load(), lineno=663, col_offset=52)], [], None, None, lineno=663, col_offset=19), lineno=663, col_offset=15), [Raise(Name('TableDBError', Load(), lineno=664, col_offset=22), BinOp(Str('unknown column: %r', lineno=664, col_offset=36), Mod(), Tuple([Name('column', Load(), lineno=664, col_offset=60)], Load(), lineno=664, col_offset=60), lineno=664, col_offset=36), None, lineno=664, col_offset=16)], [], lineno=663, col_offset=12)], [], lineno=662, col_offset=8), Assign([Name('matching_rowids', Store(), lineno=668, col_offset=8)], Dict([], [], lineno=668, col_offset=26), lineno=668, col_offset=8), Assign([Name('rejected_rowids', Store(), lineno=670, col_offset=8)], Dict([], [], lineno=670, col_offset=26), lineno=670, col_offset=8), FunctionDef('cmp_conditions', arguments([Name('atuple', Param(), lineno=674, col_offset=27), Name('btuple', Param(), lineno=674, col_offset=35)], None, None, []), [Assign([Name('a', Store(), lineno=675, col_offset=12)], Subscript(Name('atuple', Load(), lineno=675, col_offset=16), Index(Num(1, lineno=675, col_offset=23)), Load(), lineno=675, col_offset=16), lineno=675, col_offset=12), Assign([Name('b', Store(), lineno=676, col_offset=12)], Subscript(Name('btuple', Load(), lineno=676, col_offset=16), Index(Num(1, lineno=676, col_offset=23)), Load(), lineno=676, col_offset=16), lineno=676, col_offset=12), If(Compare(Call(Name('type', Load(), lineno=677, col_offset=15), [Name('a', Load(), lineno=677, col_offset=20)], [], None, None, lineno=677, col_offset=15), [Is()], [Call(Name('type', Load(), lineno=677, col_offset=26), [Name('b', Load(), lineno=677, col_offset=31)], [], None, None, lineno=677, col_offset=26)], lineno=677, col_offset=15), [FunctionDef('cmp', arguments([Name('a', Param(), lineno=680, col_offset=24), Name('b', Param(), lineno=680, col_offset=27)], None, None, []), [If(Compare(Name('a', Load(), lineno=681, col_offset=23), [Eq()], [Name('b', Load(), lineno=681, col_offset=26)], lineno=681, col_offset=23), [Return(Num(0, lineno=681, col_offset=37), lineno=681, col_offset=30)], [], lineno=681, col_offset=20), If(Compare(Name('a', Load(), lineno=682, col_offset=23), [Lt()], [Name('b', Load(), lineno=682, col_offset=25)], lineno=682, col_offset=23), [Return(Num(-1, lineno=682, col_offset=37), lineno=682, col_offset=29)], [], lineno=682, col_offset=20), Return(Num(1, lineno=683, col_offset=27), lineno=683, col_offset=20)], [], lineno=680, col_offset=16), If(BoolOp(And(), [Call(Name('isinstance', Load(), lineno=685, col_offset=19), [Name('a', Load(), lineno=685, col_offset=30), Name('PrefixCond', Load(), lineno=685, col_offset=33)], [], None, None, lineno=685, col_offset=19), Call(Name('isinstance', Load(), lineno=685, col_offset=49), [Name('b', Load(), lineno=685, col_offset=60), Name('PrefixCond', Load(), lineno=685, col_offset=63)], [], None, None, lineno=685, col_offset=49)], lineno=685, col_offset=19), [Return(Call(Name('cmp', Load(), lineno=687, col_offset=27), [Call(Name('len', Load(), lineno=687, col_offset=31), [Attribute(Name('b', Load(), lineno=687, col_offset=35), 'prefix', Load(), lineno=687, col_offset=35)], [], None, None, lineno=687, col_offset=31), Call(Name('len', Load(), lineno=687, col_offset=46), [Attribute(Name('a', Load(), lineno=687, col_offset=50), 'prefix', Load(), lineno=687, col_offset=50)], [], None, None, lineno=687, col_offset=46)], [], None, None, lineno=687, col_offset=27), lineno=687, col_offset=20)], [], lineno=685, col_offset=16), If(BoolOp(And(), [Call(Name('isinstance', Load(), lineno=688, col_offset=19), [Name('a', Load(), lineno=688, col_offset=30), Name('LikeCond', Load(), lineno=688, col_offset=33)], [], None, None, lineno=688, col_offset=19), Call(Name('isinstance', Load(), lineno=688, col_offset=47), [Name('b', Load(), lineno=688, col_offset=58), Name('LikeCond', Load(), lineno=688, col_offset=61)], [], None, None, lineno=688, col_offset=47)], lineno=688, col_offset=19), [Return(Call(Name('cmp', Load(), lineno=690, col_offset=27), [Call(Name('len', Load(), lineno=690, col_offset=31), [Attribute(Name('b', Load(), lineno=690, col_offset=35), 'likestr', Load(), lineno=690, col_offset=35)], [], None, None, lineno=690, col_offset=31), Call(Name('len', Load(), lineno=690, col_offset=47), [Attribute(Name('a', Load(), lineno=690, col_offset=51), 'likestr', Load(), lineno=690, col_offset=51)], [], None, None, lineno=690, col_offset=47)], [], None, None, lineno=690, col_offset=27), lineno=690, col_offset=20)], [], lineno=688, col_offset=16), Return(Num(0, lineno=691, col_offset=23), lineno=691, col_offset=16)], [], lineno=677, col_offset=12), If(Call(Name('isinstance', Load(), lineno=692, col_offset=15), [Name('a', Load(), lineno=692, col_offset=26), Name('ExactCond', Load(), lineno=692, col_offset=29)], [], None, None, lineno=692, col_offset=15), [Return(Num(-1, lineno=693, col_offset=24), lineno=693, col_offset=16)], [], lineno=692, col_offset=12), If(Call(Name('isinstance', Load(), lineno=694, col_offset=15), [Name('b', Load(), lineno=694, col_offset=26), Name('ExactCond', Load(), lineno=694, col_offset=29)], [], None, None, lineno=694, col_offset=15), [Return(Num(1, lineno=695, col_offset=23), lineno=695, col_offset=16)], [], lineno=694, col_offset=12), If(Call(Name('isinstance', Load(), lineno=696, col_offset=15), [Name('a', Load(), lineno=696, col_offset=26), Name('PrefixCond', Load(), lineno=696, col_offset=29)], [], None, None, lineno=696, col_offset=15), [Return(Num(-1, lineno=697, col_offset=24), lineno=697, col_offset=16)], [], lineno=696, col_offset=12), If(Call(Name('isinstance', Load(), lineno=698, col_offset=15), [Name('b', Load(), lineno=698, col_offset=26), Name('PrefixCond', Load(), lineno=698, col_offset=29)], [], None, None, lineno=698, col_offset=15), [Return(Num(1, lineno=699, col_offset=23), lineno=699, col_offset=16)], [], lineno=698, col_offset=12), Return(Num(0, lineno=701, col_offset=19), lineno=701, col_offset=12)], [], lineno=674, col_offset=8), If(Compare(Attribute(Name('sys', Load(), lineno=703, col_offset=11), 'version_info', Load(), lineno=703, col_offset=11), [Lt()], [Tuple([Num(2, lineno=703, col_offset=31), Num(6, lineno=703, col_offset=34)], Load(), lineno=703, col_offset=31)], lineno=703, col_offset=11), [Assign([Name('conditionlist', Store(), lineno=704, col_offset=12)], Call(Attribute(Name('conditions', Load(), lineno=704, col_offset=28), 'items', Load(), lineno=704, col_offset=28), [], [], None, None, lineno=704, col_offset=28), lineno=704, col_offset=12), Expr(Call(Attribute(Name('conditionlist', Load(), lineno=705, col_offset=12), 'sort', Load(), lineno=705, col_offset=12), [Name('cmp_conditions', Load(), lineno=705, col_offset=31)], [], None, None, lineno=705, col_offset=12), lineno=705, col_offset=12)], [Assign([Name('conditionlist', Store(), lineno=707, col_offset=12)], List([], Load(), lineno=707, col_offset=28), lineno=707, col_offset=12), For(Name('i', Store(), lineno=708, col_offset=16), Call(Attribute(Name('conditions', Load(), lineno=708, col_offset=21), 'items', Load(), lineno=708, col_offset=21), [], [], None, None, lineno=708, col_offset=21), [For(Tuple([Name('j', Store(), lineno=709, col_offset=20), Name('k', Store(), lineno=709, col_offset=23)], Store(), lineno=709, col_offset=20), Call(Name('enumerate', Load(), lineno=709, col_offset=28), [Name('conditionlist', Load(), lineno=709, col_offset=38)], [], None, None, lineno=709, col_offset=28), [Assign([Name('r', Store(), lineno=710, col_offset=20)], Call(Name('cmp_conditions', Load(), lineno=710, col_offset=24), [Name('k', Load(), lineno=710, col_offset=39), Name('i', Load(), lineno=710, col_offset=42)], [], None, None, lineno=710, col_offset=24), lineno=710, col_offset=20), If(Compare(Name('r', Load(), lineno=711, col_offset=23), [Eq()], [Num(1, lineno=711, col_offset=28)], lineno=711, col_offset=23), [Expr(Call(Attribute(Name('conditionlist', Load(), lineno=712, col_offset=24), 'insert', Load(), lineno=712, col_offset=24), [Name('j', Load(), lineno=712, col_offset=45), Name('i', Load(), lineno=712, col_offset=48)], [], None, None, lineno=712, col_offset=24), lineno=712, col_offset=24), Break( lineno=713, col_offset=24)], [], lineno=711, col_offset=20)], [Expr(Call(Attribute(Name('conditionlist', Load(), lineno=715, col_offset=20), 'append', Load(), lineno=715, col_offset=20), [Name('i', Load(), lineno=715, col_offset=41)], [], None, None, lineno=715, col_offset=20), lineno=715, col_offset=20)], lineno=709, col_offset=16)], [], lineno=708, col_offset=12)], lineno=703, col_offset=8), Assign([Name('cur', Store(), lineno=718, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=718, col_offset=14), 'db', Load(), lineno=718, col_offset=14), 'cursor', Load(), lineno=718, col_offset=14), [], [], None, None, lineno=718, col_offset=14), lineno=718, col_offset=8), Assign([Name('column_num', Store(), lineno=719, col_offset=8)], Num(-1, lineno=719, col_offset=22), lineno=719, col_offset=8), For(Tuple([Name('column', Store(), lineno=720, col_offset=12), Name('condition', Store(), lineno=720, col_offset=20)], Store(), lineno=720, col_offset=12), Name('conditionlist', Load(), lineno=720, col_offset=33), [Assign([Name('column_num', Store(), lineno=721, col_offset=12)], BinOp(Name('column_num', Load(), lineno=721, col_offset=25), Add(), Num(1, lineno=721, col_offset=38), lineno=721, col_offset=25), lineno=721, col_offset=12), Assign([Name('searchkey', Store(), lineno=722, col_offset=12)], Call(Name('_search_col_data_key', Load(), lineno=722, col_offset=24), [Name('table', Load(), lineno=722, col_offset=45), Name('column', Load(), lineno=722, col_offset=52)], [], None, None, lineno=722, col_offset=24), lineno=722, col_offset=12), If(Compare(Name('column', Load(), lineno=724, col_offset=15), [In()], [Name('columns', Load(), lineno=724, col_offset=25)], lineno=724, col_offset=15), [Assign([Name('savethiscolumndata', Store(), lineno=725, col_offset=16)], Num(1, lineno=725, col_offset=37), lineno=725, col_offset=16)], [Assign([Name('savethiscolumndata', Store(), lineno=727, col_offset=16)], Num(0, lineno=727, col_offset=37), lineno=727, col_offset=16)], lineno=724, col_offset=12), TryExcept([Assign([Tuple([Name('key', Store(), lineno=730, col_offset=16), Name('data', Store(), lineno=730, col_offset=21)], Store(), lineno=730, col_offset=16)], Call(Attribute(Name('cur', Load(), lineno=730, col_offset=28), 'set_range', Load(), lineno=730, col_offset=28), [Name('searchkey', Load(), lineno=730, col_offset=42)], [], None, None, lineno=730, col_offset=28), lineno=730, col_offset=16), While(Compare(Subscript(Name('key', Load(), lineno=731, col_offset=22), Slice(None, Call(Name('len', Load(), lineno=731, col_offset=27), [Name('searchkey', Load(), lineno=731, col_offset=31)], [], None, None, lineno=731, col_offset=27), None), Load(), lineno=731, col_offset=22), [Eq()], [Name('searchkey', Load(), lineno=731, col_offset=46)], lineno=731, col_offset=22), [Assign([Name('rowid', Store(), lineno=733, col_offset=20)], Subscript(Name('key', Load(), lineno=733, col_offset=28), Slice(UnaryOp(USub(), Name('_rowid_str_len', Load(), lineno=733, col_offset=33), lineno=733, col_offset=32), None, None), Load(), lineno=733, col_offset=28), lineno=733, col_offset=20), If(UnaryOp(Not(), Compare(Name('rowid', Load(), lineno=735, col_offset=27), [In()], [Name('rejected_rowids', Load(), lineno=735, col_offset=36)], lineno=735, col_offset=27), lineno=735, col_offset=23), [If(BoolOp(Or(), [UnaryOp(Not(), Name('condition', Load(), lineno=738, col_offset=31), lineno=738, col_offset=27), Call(Name('condition', Load(), lineno=738, col_offset=44), [Name('data', Load(), lineno=738, col_offset=54)], [], None, None, lineno=738, col_offset=44)], lineno=738, col_offset=27), [If(UnaryOp(Not(), Compare(Name('rowid', Load(), lineno=739, col_offset=35), [In()], [Name('matching_rowids', Load(), lineno=739, col_offset=44)], lineno=739, col_offset=35), lineno=739, col_offset=31), [Assign([Subscript(Name('matching_rowids', Load(), lineno=740, col_offset=32), Index(Name('rowid', Load(), lineno=740, col_offset=48)), Store(), lineno=740, col_offset=32)], Dict([], [], lineno=740, col_offset=57), lineno=740, col_offset=32)], [], lineno=739, col_offset=28), If(Name('savethiscolumndata', Load(), lineno=741, col_offset=31), [Assign([Subscript(Subscript(Name('matching_rowids', Load(), lineno=742, col_offset=32), Index(Name('rowid', Load(), lineno=742, col_offset=48)), Load(), lineno=742, col_offset=32), Index(Name('column', Load(), lineno=742, col_offset=55)), Store(), lineno=742, col_offset=32)], Name('data', Load(), lineno=742, col_offset=65), lineno=742, col_offset=32)], [], lineno=741, col_offset=28)], [If(Compare(Name('rowid', Load(), lineno=744, col_offset=31), [In()], [Name('matching_rowids', Load(), lineno=744, col_offset=40)], lineno=744, col_offset=31), [Delete([Subscript(Name('matching_rowids', Load(), lineno=745, col_offset=36), Index(Name('rowid', Load(), lineno=745, col_offset=52)), Del(), lineno=745, col_offset=36)], lineno=745, col_offset=32)], [], lineno=744, col_offset=28), Assign([Subscript(Name('rejected_rowids', Load(), lineno=746, col_offset=28), Index(Name('rowid', Load(), lineno=746, col_offset=44)), Store(), lineno=746, col_offset=28)], Name('rowid', Load(), lineno=746, col_offset=53), lineno=746, col_offset=28)], lineno=738, col_offset=24)], [], lineno=735, col_offset=20), Assign([Tuple([Name('key', Store(), lineno=748, col_offset=20), Name('data', Store(), lineno=748, col_offset=25)], Store(), lineno=748, col_offset=20)], Call(Attribute(Name('cur', Load(), lineno=748, col_offset=32), 'next', Load(), lineno=748, col_offset=32), [], [], None, None, lineno=748, col_offset=32), lineno=748, col_offset=20)], [], lineno=731, col_offset=16)], [ExceptHandler(Attribute(Name('db', Load(), lineno=750, col_offset=19), 'DBError', Load(), lineno=750, col_offset=19), Name('dberror', Store(), lineno=750, col_offset=31), [If(Compare(Subscript(Attribute(Name('dberror', Load(), lineno=751, col_offset=19), 'args', Load(), lineno=751, col_offset=19), Index(Num(0, lineno=751, col_offset=32)), Load(), lineno=751, col_offset=19), [NotEq()], [Attribute(Name('db', Load(), lineno=751, col_offset=38), 'DB_NOTFOUND', Load(), lineno=751, col_offset=38)], lineno=751, col_offset=19), [Raise(None, None, None, lineno=752, col_offset=20)], [], lineno=751, col_offset=16), Continue( lineno=753, col_offset=16)], lineno=750, col_offset=12)], [], lineno=729, col_offset=12)], [], lineno=720, col_offset=8), Expr(Call(Attribute(Name('cur', Load(), lineno=755, col_offset=8), 'close', Load(), lineno=755, col_offset=8), [], [], None, None, lineno=755, col_offset=8), lineno=755, col_offset=8), Delete([Name('rejected_rowids', Del(), lineno=758, col_offset=12)], lineno=758, col_offset=8), If(Compare(Call(Name('len', Load(), lineno=762, col_offset=11), [Name('columns', Load(), lineno=762, col_offset=15)], [], None, None, lineno=762, col_offset=11), [Gt()], [Num(0, lineno=762, col_offset=26)], lineno=762, col_offset=11), [For(Tuple([Name('rowid', Store(), lineno=763, col_offset=16), Name('rowdata', Store(), lineno=763, col_offset=23)], Store(), lineno=763, col_offset=16), Call(Attribute(Name('matching_rowids', Load(), lineno=763, col_offset=34), 'items', Load(), lineno=763, col_offset=34), [], [], None, None, lineno=763, col_offset=34), [For(Name('column', Store(), lineno=764, col_offset=20), Name('columns', Load(), lineno=764, col_offset=30), [If(Compare(Name('column', Load(), lineno=765, col_offset=23), [In()], [Name('rowdata', Load(), lineno=765, col_offset=33)], lineno=765, col_offset=23), [Continue( lineno=766, col_offset=24)], [], lineno=765, col_offset=20), TryExcept([Assign([Subscript(Name('rowdata', Load(), lineno=768, col_offset=24), Index(Name('column', Load(), lineno=768, col_offset=32)), Store(), lineno=768, col_offset=24)], Call(Attribute(Attribute(Name('self', Load(), lineno=768, col_offset=42), 'db', Load(), lineno=768, col_offset=42), 'get', Load(), lineno=768, col_offset=42), [Call(Name('_data_key', Load(), lineno=769, col_offset=28), [Name('table', Load(), lineno=769, col_offset=38), Name('column', Load(), lineno=769, col_offset=45), Name('rowid', Load(), lineno=769, col_offset=53)], [], None, None, lineno=769, col_offset=28)], [], None, None, lineno=768, col_offset=42), lineno=768, col_offset=24)], [ExceptHandler(Attribute(Name('db', Load(), lineno=770, col_offset=27), 'DBError', Load(), lineno=770, col_offset=27), Name('dberror', Store(), lineno=770, col_offset=39), [If(Compare(Attribute(Name('sys', Load(), lineno=771, col_offset=27), 'version_info', Load(), lineno=771, col_offset=27), [Lt()], [Tuple([Num(2, lineno=771, col_offset=47), Num(6, lineno=771, col_offset=50)], Load(), lineno=771, col_offset=47)], lineno=771, col_offset=27), [If(Compare(Subscript(Name('dberror', Load(), lineno=772, col_offset=31), Index(Num(0, lineno=772, col_offset=39)), Load(), lineno=772, col_offset=31), [NotEq()], [Attribute(Name('db', Load(), lineno=772, col_offset=45), 'DB_NOTFOUND', Load(), lineno=772, col_offset=45)], lineno=772, col_offset=31), [Raise(None, None, None, lineno=773, col_offset=32)], [], lineno=772, col_offset=28)], [If(Compare(Subscript(Attribute(Name('dberror', Load(), lineno=775, col_offset=31), 'args', Load(), lineno=775, col_offset=31), Index(Num(0, lineno=775, col_offset=44)), Load(), lineno=775, col_offset=31), [NotEq()], [Attribute(Name('db', Load(), lineno=775, col_offset=50), 'DB_NOTFOUND', Load(), lineno=775, col_offset=50)], lineno=775, col_offset=31), [Raise(None, None, None, lineno=776, col_offset=32)], [], lineno=775, col_offset=28)], lineno=771, col_offset=24), Assign([Subscript(Name('rowdata', Load(), lineno=777, col_offset=24), Index(Name('column', Load(), lineno=777, col_offset=32)), Store(), lineno=777, col_offset=24)], Name('None', Load(), lineno=777, col_offset=42), lineno=777, col_offset=24)], lineno=770, col_offset=20)], [], lineno=767, col_offset=20)], [], lineno=764, col_offset=16)], [], lineno=763, col_offset=12)], [], lineno=762, col_offset=8), Return(Name('matching_rowids', Load(), lineno=780, col_offset=15), lineno=780, col_offset=8)], [], lineno=648, col_offset=4), FunctionDef('Drop', arguments([Name('self', Param(), lineno=783, col_offset=13), Name('table', Param(), lineno=783, col_offset=19)], None, None, []), [Expr(Str('Remove an entire table from the database', lineno=784, col_offset=8), lineno=784, col_offset=8), Assign([Name('txn', Store(), lineno=785, col_offset=8)], Name('None', Load(), lineno=785, col_offset=14), lineno=785, col_offset=8), TryExcept([Assign([Name('txn', Store(), lineno=787, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=787, col_offset=18), 'env', Load(), lineno=787, col_offset=18), 'txn_begin', Load(), lineno=787, col_offset=18), [], [], None, None, lineno=787, col_offset=18), lineno=787, col_offset=12), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=790, col_offset=12), 'db', Load(), lineno=790, col_offset=12), 'delete', Load(), lineno=790, col_offset=12), [Call(Name('_columns_key', Load(), lineno=790, col_offset=27), [Name('table', Load(), lineno=790, col_offset=40)], [], None, None, lineno=790, col_offset=27)], [keyword('txn', Name('txn', Load(), lineno=790, col_offset=52))], None, None, lineno=790, col_offset=12), lineno=790, col_offset=12), Assign([Name('cur', Store(), lineno=792, col_offset=12)], Call(Attribute(Attribute(Name('self', Load(), lineno=792, col_offset=18), 'db', Load(), lineno=792, col_offset=18), 'cursor', Load(), lineno=792, col_offset=18), [Name('txn', Load(), lineno=792, col_offset=33)], [], None, None, lineno=792, col_offset=18), lineno=792, col_offset=12), Assign([Name('table_key', Store(), lineno=795, col_offset=12)], Call(Name('_search_all_data_key', Load(), lineno=795, col_offset=24), [Name('table', Load(), lineno=795, col_offset=45)], [], None, None, lineno=795, col_offset=24), lineno=795, col_offset=12), While(Num(1, lineno=796, col_offset=18), [TryExcept([Assign([Tuple([Name('key', Store(), lineno=798, col_offset=20), Name('data', Store(), lineno=798, col_offset=25)], Store(), lineno=798, col_offset=20)], Call(Attribute(Name('cur', Load(), lineno=798, col_offset=32), 'set_range', Load(), lineno=798, col_offset=32), [Name('table_key', Load(), lineno=798, col_offset=46)], [], None, None, lineno=798, col_offset=32), lineno=798, col_offset=20)], [ExceptHandler(Attribute(Name('db', Load(), lineno=799, col_offset=23), 'DBNotFoundError', Load(), lineno=799, col_offset=23), None, [Break( lineno=800, col_offset=20)], lineno=799, col_offset=16)], [], lineno=797, col_offset=16), If(Compare(Subscript(Name('key', Load(), lineno=802, col_offset=19), Slice(None, Call(Name('len', Load(), lineno=802, col_offset=24), [Name('table_key', Load(), lineno=802, col_offset=28)], [], None, None, lineno=802, col_offset=24), None), Load(), lineno=802, col_offset=19), [NotEq()], [Name('table_key', Load(), lineno=802, col_offset=43)], lineno=802, col_offset=19), [Break( lineno=803, col_offset=20)], [], lineno=802, col_offset=16), Expr(Call(Attribute(Name('cur', Load(), lineno=804, col_offset=16), 'delete', Load(), lineno=804, col_offset=16), [], [], None, None, lineno=804, col_offset=16), lineno=804, col_offset=16)], [], lineno=796, col_offset=12), Assign([Name('table_key', Store(), lineno=807, col_offset=12)], Call(Name('_search_rowid_key', Load(), lineno=807, col_offset=24), [Name('table', Load(), lineno=807, col_offset=42)], [], None, None, lineno=807, col_offset=24), lineno=807, col_offset=12), While(Num(1, lineno=808, col_offset=18), [TryExcept([Assign([Tuple([Name('key', Store(), lineno=810, col_offset=20), Name('data', Store(), lineno=810, col_offset=25)], Store(), lineno=810, col_offset=20)], Call(Attribute(Name('cur', Load(), lineno=810, col_offset=32), 'set_range', Load(), lineno=810, col_offset=32), [Name('table_key', Load(), lineno=810, col_offset=46)], [], None, None, lineno=810, col_offset=32), lineno=810, col_offset=20)], [ExceptHandler(Attribute(Name('db', Load(), lineno=811, col_offset=23), 'DBNotFoundError', Load(), lineno=811, col_offset=23), None, [Break( lineno=812, col_offset=20)], lineno=811, col_offset=16)], [], lineno=809, col_offset=16), If(Compare(Subscript(Name('key', Load(), lineno=814, col_offset=19), Slice(None, Call(Name('len', Load(), lineno=814, col_offset=24), [Name('table_key', Load(), lineno=814, col_offset=28)], [], None, None, lineno=814, col_offset=24), None), Load(), lineno=814, col_offset=19), [NotEq()], [Name('table_key', Load(), lineno=814, col_offset=43)], lineno=814, col_offset=19), [Break( lineno=815, col_offset=20)], [], lineno=814, col_offset=16), Expr(Call(Attribute(Name('cur', Load(), lineno=816, col_offset=16), 'delete', Load(), lineno=816, col_offset=16), [], [], None, None, lineno=816, col_offset=16), lineno=816, col_offset=16)], [], lineno=808, col_offset=12), Expr(Call(Attribute(Name('cur', Load(), lineno=818, col_offset=12), 'close', Load(), lineno=818, col_offset=12), [], [], None, None, lineno=818, col_offset=12), lineno=818, col_offset=12), Assign([Name('tablelist', Store(), lineno=821, col_offset=12)], Call(Attribute(Name('pickle', Load(), lineno=821, col_offset=24), 'loads', Load(), lineno=821, col_offset=24), [Call(Call(Name('getattr', Load(), lineno=822, col_offset=16), [Attribute(Name('self', Load(), lineno=822, col_offset=24), 'db', Load(), lineno=822, col_offset=24), Str('get_bytes', lineno=822, col_offset=33), Attribute(Attribute(Name('self', Load(), lineno=822, col_offset=46), 'db', Load(), lineno=822, col_offset=46), 'get', Load(), lineno=822, col_offset=46)], [], None, None, lineno=822, col_offset=16), [Name('_table_names_key', Load(), lineno=822, col_offset=59)], [keyword('txn', Name('txn', Load(), lineno=823, col_offset=24)), keyword('flags', Attribute(Name('db', Load(), lineno=823, col_offset=35), 'DB_RMW', Load(), lineno=823, col_offset=35))], None, None, lineno=822, col_offset=16)], [], None, None, lineno=821, col_offset=24), lineno=821, col_offset=12), TryExcept([Expr(Call(Attribute(Name('tablelist', Load(), lineno=825, col_offset=16), 'remove', Load(), lineno=825, col_offset=16), [Name('table', Load(), lineno=825, col_offset=33)], [], None, None, lineno=825, col_offset=16), lineno=825, col_offset=16)], [ExceptHandler(Name('ValueError', Load(), lineno=826, col_offset=19), None, [Pass( lineno=828, col_offset=16)], lineno=826, col_offset=12)], [], lineno=824, col_offset=12), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=830, col_offset=12), 'db', Load(), lineno=830, col_offset=12), 'delete', Load(), lineno=830, col_offset=12), [Name('_table_names_key', Load(), lineno=830, col_offset=27)], [keyword('txn', Name('txn', Load(), lineno=830, col_offset=49))], None, None, lineno=830, col_offset=12), lineno=830, col_offset=12), Expr(Call(Call(Name('getattr', Load(), lineno=831, col_offset=12), [Attribute(Name('self', Load(), lineno=831, col_offset=20), 'db', Load(), lineno=831, col_offset=20), Str('put_bytes', lineno=831, col_offset=29), Attribute(Attribute(Name('self', Load(), lineno=831, col_offset=42), 'db', Load(), lineno=831, col_offset=42), 'put', Load(), lineno=831, col_offset=42)], [], None, None, lineno=831, col_offset=12), [Name('_table_names_key', Load(), lineno=831, col_offset=55), Call(Attribute(Name('pickle', Load(), lineno=832, col_offset=20), 'dumps', Load(), lineno=832, col_offset=20), [Name('tablelist', Load(), lineno=832, col_offset=33), Num(1, lineno=832, col_offset=44)], [], None, None, lineno=832, col_offset=20)], [keyword('txn', Name('txn', Load(), lineno=832, col_offset=52))], None, None, lineno=831, col_offset=12), lineno=831, col_offset=12), Expr(Call(Attribute(Name('txn', Load(), lineno=834, col_offset=12), 'commit', Load(), lineno=834, col_offset=12), [], [], None, None, lineno=834, col_offset=12), lineno=834, col_offset=12), Assign([Name('txn', Store(), lineno=835, col_offset=12)], Name('None', Load(), lineno=835, col_offset=18), lineno=835, col_offset=12), If(Compare(Name('table', Load(), lineno=837, col_offset=15), [In()], [Attribute(Name('self', Load(), lineno=837, col_offset=24), '__tablecolumns', Load(), lineno=837, col_offset=24)], lineno=837, col_offset=15), [Delete([Subscript(Attribute(Name('self', Load(), lineno=838, col_offset=20), '__tablecolumns', Load(), lineno=838, col_offset=20), Index(Name('table', Load(), lineno=838, col_offset=40)), Del(), lineno=838, col_offset=20)], lineno=838, col_offset=16)], [], lineno=837, col_offset=12)], [ExceptHandler(Attribute(Name('db', Load(), lineno=840, col_offset=15), 'DBError', Load(), lineno=840, col_offset=15), Name('dberror', Store(), lineno=840, col_offset=27), [If(Name('txn', Load(), lineno=841, col_offset=15), [Expr(Call(Attribute(Name('txn', Load(), lineno=842, col_offset=16), 'abort', Load(), lineno=842, col_offset=16), [], [], None, None, lineno=842, col_offset=16), lineno=842, col_offset=16)], [], lineno=841, col_offset=12), Raise(Call(Name('TableDBError', Load(), lineno=843, col_offset=18), [Subscript(Attribute(Name('dberror', Load(), lineno=843, col_offset=31), 'args', Load(), lineno=843, col_offset=31), Index(Num(1, lineno=843, col_offset=44)), Load(), lineno=843, col_offset=31)], [], None, None, lineno=843, col_offset=18), None, None, lineno=843, col_offset=12)], lineno=840, col_offset=8)], [], lineno=786, col_offset=8)], [], lineno=783, col_offset=4)], [], lineno=158, col_offset=0)])
