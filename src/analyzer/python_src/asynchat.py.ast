Module([Expr(Str("A class supporting chat-style (command/response) protocols.\n\nThis class adds support for 'chat' style protocols - where one side\nsends a 'command', and the other sends a response (examples would be\nthe common internet protocols - smtp, nntp, ftp, etc..).\n\nThe handle_read() method looks at the input stream for the current\n'terminator' (usually '\\r\\n' for single-line responses, '\\r\\n.\\r\\n'\nfor multi-line output), calling self.found_terminator() on its\nreceipt.\n\nfor example:\nSay you build an async nntp client using this class.  At the start\nof the connection, you'll have self.terminator set to '\\r\\n', in\norder to process the single-line greeting.  Just before issuing a\n'LIST' command you'll set it to '\\r\\n.\\r\\n'.  The output of the LIST\ncommand will be accumulated (using your own 'collect_incoming_data'\nmethod) up to the terminator, and then control will be returned to\nyou - by calling your self.found_terminator() method.\n", lineno=47, col_offset=-1), lineno=47, col_offset=-1), Import([alias('socket', None)], lineno=49, col_offset=0), Import([alias('asyncore', None)], lineno=50, col_offset=0), ImportFrom('collections', [alias('deque', None)], 0, lineno=51, col_offset=0), ImportFrom('sys', [alias('py3kwarning', None)], 0, lineno=52, col_offset=0), ImportFrom('warnings', [alias('filterwarnings', None), alias('catch_warnings', None)], 0, lineno=53, col_offset=0), ClassDef('async_chat', [Attribute(Name('asyncore', Load(), lineno=55, col_offset=18), 'dispatcher', Load(), lineno=55, col_offset=18)], [Expr(Str('This is an abstract class.  You must derive from this class, and add\n    the two methods collect_incoming_data() and found_terminator()', lineno=57, col_offset=-1), lineno=57, col_offset=-1), Assign([Name('ac_in_buffer_size', Store(), lineno=61, col_offset=4)], Num(4096, lineno=61, col_offset=30), lineno=61, col_offset=4), Assign([Name('ac_out_buffer_size', Store(), lineno=62, col_offset=4)], Num(4096, lineno=62, col_offset=30), lineno=62, col_offset=4), FunctionDef('__init__', arguments([Name('self', Param(), lineno=64, col_offset=18), Name('sock', Param(), lineno=64, col_offset=24), Name('map', Param(), lineno=64, col_offset=35)], None, None, [Name('None', Load(), lineno=64, col_offset=29), Name('None', Load(), lineno=64, col_offset=39)]), [Assign([Attribute(Name('self', Load(), lineno=66, col_offset=8), 'ac_in_buffer', Store(), lineno=66, col_offset=8)], Str('', lineno=66, col_offset=28), lineno=66, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=74, col_offset=8), 'incoming', Store(), lineno=74, col_offset=8)], List([], Load(), lineno=74, col_offset=24), lineno=74, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=78, col_offset=8), 'producer_fifo', Store(), lineno=78, col_offset=8)], Call(Name('deque', Load(), lineno=78, col_offset=29), [], [], None, None, lineno=78, col_offset=29), lineno=78, col_offset=8), Expr(Call(Attribute(Attribute(Name('asyncore', Load(), lineno=79, col_offset=8), 'dispatcher', Load(), lineno=79, col_offset=8), '__init__', Load(), lineno=79, col_offset=8), [Name('self', Load(), lineno=79, col_offset=38), Name('sock', Load(), lineno=79, col_offset=44), Name('map', Load(), lineno=79, col_offset=50)], [], None, None, lineno=79, col_offset=8), lineno=79, col_offset=8)], [], lineno=64, col_offset=4), FunctionDef('collect_incoming_data', arguments([Name('self', Param(), lineno=81, col_offset=30), Name('data', Param(), lineno=81, col_offset=36)], None, None, []), [Raise(Call(Name('NotImplementedError', Load(), lineno=82, col_offset=14), [Str('must be implemented in subclass', lineno=82, col_offset=34)], [], None, None, lineno=82, col_offset=14), None, None, lineno=82, col_offset=8)], [], lineno=81, col_offset=4), FunctionDef('_collect_incoming_data', arguments([Name('self', Param(), lineno=84, col_offset=31), Name('data', Param(), lineno=84, col_offset=37)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=85, col_offset=8), 'incoming', Load(), lineno=85, col_offset=8), 'append', Load(), lineno=85, col_offset=8), [Name('data', Load(), lineno=85, col_offset=29)], [], None, None, lineno=85, col_offset=8), lineno=85, col_offset=8)], [], lineno=84, col_offset=4), FunctionDef('_get_data', arguments([Name('self', Param(), lineno=87, col_offset=18)], None, None, []), [Assign([Name('d', Store(), lineno=88, col_offset=8)], Call(Attribute(Str('', lineno=88, col_offset=12), 'join', Load(), lineno=88, col_offset=12), [Attribute(Name('self', Load(), lineno=88, col_offset=20), 'incoming', Load(), lineno=88, col_offset=20)], [], None, None, lineno=88, col_offset=12), lineno=88, col_offset=8), Delete([Subscript(Attribute(Name('self', Load(), lineno=89, col_offset=12), 'incoming', Load(), lineno=89, col_offset=12), Slice(None, None, None), Del(), lineno=89, col_offset=12)], lineno=89, col_offset=8), Return(Name('d', Load(), lineno=90, col_offset=15), lineno=90, col_offset=8)], [], lineno=87, col_offset=4), FunctionDef('found_terminator', arguments([Name('self', Param(), lineno=92, col_offset=25)], None, None, []), [Raise(Call(Name('NotImplementedError', Load(), lineno=93, col_offset=14), [Str('must be implemented in subclass', lineno=93, col_offset=34)], [], None, None, lineno=93, col_offset=14), None, None, lineno=93, col_offset=8)], [], lineno=92, col_offset=4), FunctionDef('set_terminator', arguments([Name('self', Param(), lineno=95, col_offset=24), Name('term', Param(), lineno=95, col_offset=30)], None, None, []), [Expr(Str('Set the input delimiter.  Can be a fixed string of any length, an integer, or None', lineno=96, col_offset=8), lineno=96, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=97, col_offset=8), 'terminator', Store(), lineno=97, col_offset=8)], Name('term', Load(), lineno=97, col_offset=26), lineno=97, col_offset=8)], [], lineno=95, col_offset=4), FunctionDef('get_terminator', arguments([Name('self', Param(), lineno=99, col_offset=24)], None, None, []), [Return(Attribute(Name('self', Load(), lineno=100, col_offset=15), 'terminator', Load(), lineno=100, col_offset=15), lineno=100, col_offset=8)], [], lineno=99, col_offset=4), FunctionDef('handle_read', arguments([Name('self', Param(), lineno=107, col_offset=21)], None, None, []), [TryExcept([Assign([Name('data', Store(), lineno=110, col_offset=12)], Call(Attribute(Name('self', Load(), lineno=110, col_offset=19), 'recv', Load(), lineno=110, col_offset=19), [Attribute(Name('self', Load(), lineno=110, col_offset=30), 'ac_in_buffer_size', Load(), lineno=110, col_offset=30)], [], None, None, lineno=110, col_offset=19), lineno=110, col_offset=12)], [ExceptHandler(Attribute(Name('socket', Load(), lineno=111, col_offset=15), 'error', Load(), lineno=111, col_offset=15), Name('why', Store(), lineno=111, col_offset=29), [Expr(Call(Attribute(Name('self', Load(), lineno=112, col_offset=12), 'handle_error', Load(), lineno=112, col_offset=12), [], [], None, None, lineno=112, col_offset=12), lineno=112, col_offset=12), Return(None, lineno=113, col_offset=12)], lineno=111, col_offset=8)], [], lineno=109, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=115, col_offset=8), 'ac_in_buffer', Store(), lineno=115, col_offset=8)], BinOp(Attribute(Name('self', Load(), lineno=115, col_offset=28), 'ac_in_buffer', Load(), lineno=115, col_offset=28), Add(), Name('data', Load(), lineno=115, col_offset=48), lineno=115, col_offset=28), lineno=115, col_offset=8), While(Attribute(Name('self', Load(), lineno=122, col_offset=14), 'ac_in_buffer', Load(), lineno=122, col_offset=14), [Assign([Name('lb', Store(), lineno=123, col_offset=12)], Call(Name('len', Load(), lineno=123, col_offset=17), [Attribute(Name('self', Load(), lineno=123, col_offset=21), 'ac_in_buffer', Load(), lineno=123, col_offset=21)], [], None, None, lineno=123, col_offset=17), lineno=123, col_offset=12), Assign([Name('terminator', Store(), lineno=124, col_offset=12)], Call(Attribute(Name('self', Load(), lineno=124, col_offset=25), 'get_terminator', Load(), lineno=124, col_offset=25), [], [], None, None, lineno=124, col_offset=25), lineno=124, col_offset=12), If(UnaryOp(Not(), Name('terminator', Load(), lineno=125, col_offset=19), lineno=125, col_offset=15), [Expr(Call(Attribute(Name('self', Load(), lineno=127, col_offset=16), 'collect_incoming_data', Load(), lineno=127, col_offset=16), [Attribute(Name('self', Load(), lineno=127, col_offset=44), 'ac_in_buffer', Load(), lineno=127, col_offset=44)], [], None, None, lineno=127, col_offset=16), lineno=127, col_offset=16), Assign([Attribute(Name('self', Load(), lineno=128, col_offset=16), 'ac_in_buffer', Store(), lineno=128, col_offset=16)], Str('', lineno=128, col_offset=36), lineno=128, col_offset=16)], [If(BoolOp(Or(), [Call(Name('isinstance', Load(), lineno=129, col_offset=17), [Name('terminator', Load(), lineno=129, col_offset=28), Name('int', Load(), lineno=129, col_offset=40)], [], None, None, lineno=129, col_offset=17), Call(Name('isinstance', Load(), lineno=129, col_offset=48), [Name('terminator', Load(), lineno=129, col_offset=59), Name('long', Load(), lineno=129, col_offset=71)], [], None, None, lineno=129, col_offset=48)], lineno=129, col_offset=17), [Assign([Name('n', Store(), lineno=131, col_offset=16)], Name('terminator', Load(), lineno=131, col_offset=20), lineno=131, col_offset=16), If(Compare(Name('lb', Load(), lineno=132, col_offset=19), [Lt()], [Name('n', Load(), lineno=132, col_offset=24)], lineno=132, col_offset=19), [Expr(Call(Attribute(Name('self', Load(), lineno=133, col_offset=20), 'collect_incoming_data', Load(), lineno=133, col_offset=20), [Attribute(Name('self', Load(), lineno=133, col_offset=48), 'ac_in_buffer', Load(), lineno=133, col_offset=48)], [], None, None, lineno=133, col_offset=20), lineno=133, col_offset=20), Assign([Attribute(Name('self', Load(), lineno=134, col_offset=20), 'ac_in_buffer', Store(), lineno=134, col_offset=20)], Str('', lineno=134, col_offset=40), lineno=134, col_offset=20), Assign([Attribute(Name('self', Load(), lineno=135, col_offset=20), 'terminator', Store(), lineno=135, col_offset=20)], BinOp(Attribute(Name('self', Load(), lineno=135, col_offset=38), 'terminator', Load(), lineno=135, col_offset=38), Sub(), Name('lb', Load(), lineno=135, col_offset=56), lineno=135, col_offset=38), lineno=135, col_offset=20)], [Expr(Call(Attribute(Name('self', Load(), lineno=137, col_offset=20), 'collect_incoming_data', Load(), lineno=137, col_offset=20), [Subscript(Attribute(Name('self', Load(), lineno=137, col_offset=48), 'ac_in_buffer', Load(), lineno=137, col_offset=48), Slice(None, Name('n', Load(), lineno=137, col_offset=67), None), Load(), lineno=137, col_offset=48)], [], None, None, lineno=137, col_offset=20), lineno=137, col_offset=20), Assign([Attribute(Name('self', Load(), lineno=138, col_offset=20), 'ac_in_buffer', Store(), lineno=138, col_offset=20)], Subscript(Attribute(Name('self', Load(), lineno=138, col_offset=40), 'ac_in_buffer', Load(), lineno=138, col_offset=40), Slice(Name('n', Load(), lineno=138, col_offset=58), None, None), Load(), lineno=138, col_offset=40), lineno=138, col_offset=20), Assign([Attribute(Name('self', Load(), lineno=139, col_offset=20), 'terminator', Store(), lineno=139, col_offset=20)], Num(0, lineno=139, col_offset=38), lineno=139, col_offset=20), Expr(Call(Attribute(Name('self', Load(), lineno=140, col_offset=20), 'found_terminator', Load(), lineno=140, col_offset=20), [], [], None, None, lineno=140, col_offset=20), lineno=140, col_offset=20)], lineno=132, col_offset=16)], [Assign([Name('terminator_len', Store(), lineno=149, col_offset=16)], Call(Name('len', Load(), lineno=149, col_offset=33), [Name('terminator', Load(), lineno=149, col_offset=37)], [], None, None, lineno=149, col_offset=33), lineno=149, col_offset=16), Assign([Name('index', Store(), lineno=150, col_offset=16)], Call(Attribute(Attribute(Name('self', Load(), lineno=150, col_offset=24), 'ac_in_buffer', Load(), lineno=150, col_offset=24), 'find', Load(), lineno=150, col_offset=24), [Name('terminator', Load(), lineno=150, col_offset=47)], [], None, None, lineno=150, col_offset=24), lineno=150, col_offset=16), If(Compare(Name('index', Load(), lineno=151, col_offset=19), [NotEq()], [Num(-1, lineno=151, col_offset=29)], lineno=151, col_offset=19), [If(Compare(Name('index', Load(), lineno=153, col_offset=23), [Gt()], [Num(0, lineno=153, col_offset=31)], lineno=153, col_offset=23), [Expr(Call(Attribute(Name('self', Load(), lineno=155, col_offset=24), 'collect_incoming_data', Load(), lineno=155, col_offset=24), [Subscript(Attribute(Name('self', Load(), lineno=155, col_offset=52), 'ac_in_buffer', Load(), lineno=155, col_offset=52), Slice(None, Name('index', Load(), lineno=155, col_offset=71), None), Load(), lineno=155, col_offset=52)], [], None, None, lineno=155, col_offset=24), lineno=155, col_offset=24)], [], lineno=153, col_offset=20), Assign([Attribute(Name('self', Load(), lineno=156, col_offset=20), 'ac_in_buffer', Store(), lineno=156, col_offset=20)], Subscript(Attribute(Name('self', Load(), lineno=156, col_offset=40), 'ac_in_buffer', Load(), lineno=156, col_offset=40), Slice(BinOp(Name('index', Load(), lineno=156, col_offset=58), Add(), Name('terminator_len', Load(), lineno=156, col_offset=64), lineno=156, col_offset=58), None, None), Load(), lineno=156, col_offset=40), lineno=156, col_offset=20), Expr(Call(Attribute(Name('self', Load(), lineno=158, col_offset=20), 'found_terminator', Load(), lineno=158, col_offset=20), [], [], None, None, lineno=158, col_offset=20), lineno=158, col_offset=20)], [Assign([Name('index', Store(), lineno=161, col_offset=20)], Call(Name('find_prefix_at_end', Load(), lineno=161, col_offset=28), [Attribute(Name('self', Load(), lineno=161, col_offset=48), 'ac_in_buffer', Load(), lineno=161, col_offset=48), Name('terminator', Load(), lineno=161, col_offset=67)], [], None, None, lineno=161, col_offset=28), lineno=161, col_offset=20), If(Name('index', Load(), lineno=162, col_offset=23), [If(Compare(Name('index', Load(), lineno=163, col_offset=27), [NotEq()], [Name('lb', Load(), lineno=163, col_offset=36)], lineno=163, col_offset=27), [Expr(Call(Attribute(Name('self', Load(), lineno=165, col_offset=28), 'collect_incoming_data', Load(), lineno=165, col_offset=28), [Subscript(Attribute(Name('self', Load(), lineno=165, col_offset=56), 'ac_in_buffer', Load(), lineno=165, col_offset=56), Slice(None, UnaryOp(USub(), Name('index', Load(), lineno=165, col_offset=76), lineno=165, col_offset=75), None), Load(), lineno=165, col_offset=56)], [], None, None, lineno=165, col_offset=28), lineno=165, col_offset=28), Assign([Attribute(Name('self', Load(), lineno=166, col_offset=28), 'ac_in_buffer', Store(), lineno=166, col_offset=28)], Subscript(Attribute(Name('self', Load(), lineno=166, col_offset=48), 'ac_in_buffer', Load(), lineno=166, col_offset=48), Slice(UnaryOp(USub(), Name('index', Load(), lineno=166, col_offset=67), lineno=166, col_offset=66), None, None), Load(), lineno=166, col_offset=48), lineno=166, col_offset=28)], [], lineno=163, col_offset=24), Break( lineno=167, col_offset=24)], [Expr(Call(Attribute(Name('self', Load(), lineno=170, col_offset=24), 'collect_incoming_data', Load(), lineno=170, col_offset=24), [Attribute(Name('self', Load(), lineno=170, col_offset=52), 'ac_in_buffer', Load(), lineno=170, col_offset=52)], [], None, None, lineno=170, col_offset=24), lineno=170, col_offset=24), Assign([Attribute(Name('self', Load(), lineno=171, col_offset=24), 'ac_in_buffer', Store(), lineno=171, col_offset=24)], Str('', lineno=171, col_offset=44), lineno=171, col_offset=24)], lineno=162, col_offset=20)], lineno=151, col_offset=16)], lineno=129, col_offset=17)], lineno=125, col_offset=12)], [], lineno=122, col_offset=8)], [], lineno=107, col_offset=4), FunctionDef('handle_write', arguments([Name('self', Param(), lineno=173, col_offset=22)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=174, col_offset=8), 'initiate_send', Load(), lineno=174, col_offset=8), [], [], None, None, lineno=174, col_offset=8), lineno=174, col_offset=8)], [], lineno=173, col_offset=4), FunctionDef('handle_close', arguments([Name('self', Param(), lineno=176, col_offset=22)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=177, col_offset=8), 'close', Load(), lineno=177, col_offset=8), [], [], None, None, lineno=177, col_offset=8), lineno=177, col_offset=8)], [], lineno=176, col_offset=4), FunctionDef('push', arguments([Name('self', Param(), lineno=179, col_offset=14), Name('data', Param(), lineno=179, col_offset=20)], None, None, []), [Assign([Name('sabs', Store(), lineno=180, col_offset=8)], Attribute(Name('self', Load(), lineno=180, col_offset=15), 'ac_out_buffer_size', Load(), lineno=180, col_offset=15), lineno=180, col_offset=8), If(Compare(Call(Name('len', Load(), lineno=181, col_offset=11), [Name('data', Load(), lineno=181, col_offset=15)], [], None, None, lineno=181, col_offset=11), [Gt()], [Name('sabs', Load(), lineno=181, col_offset=23)], lineno=181, col_offset=11), [For(Name('i', Store(), lineno=182, col_offset=16), Call(Name('xrange', Load(), lineno=182, col_offset=21), [Num(0, lineno=182, col_offset=28), Call(Name('len', Load(), lineno=182, col_offset=31), [Name('data', Load(), lineno=182, col_offset=35)], [], None, None, lineno=182, col_offset=31), Name('sabs', Load(), lineno=182, col_offset=42)], [], None, None, lineno=182, col_offset=21), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=183, col_offset=16), 'producer_fifo', Load(), lineno=183, col_offset=16), 'append', Load(), lineno=183, col_offset=16), [Subscript(Name('data', Load(), lineno=183, col_offset=42), Slice(Name('i', Load(), lineno=183, col_offset=47), BinOp(Name('i', Load(), lineno=183, col_offset=49), Add(), Name('sabs', Load(), lineno=183, col_offset=51), lineno=183, col_offset=49), None), Load(), lineno=183, col_offset=42)], [], None, None, lineno=183, col_offset=16), lineno=183, col_offset=16)], [], lineno=182, col_offset=12)], [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=185, col_offset=12), 'producer_fifo', Load(), lineno=185, col_offset=12), 'append', Load(), lineno=185, col_offset=12), [Name('data', Load(), lineno=185, col_offset=38)], [], None, None, lineno=185, col_offset=12), lineno=185, col_offset=12)], lineno=181, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=186, col_offset=8), 'initiate_send', Load(), lineno=186, col_offset=8), [], [], None, None, lineno=186, col_offset=8), lineno=186, col_offset=8)], [], lineno=179, col_offset=4), FunctionDef('push_with_producer', arguments([Name('self', Param(), lineno=188, col_offset=28), Name('producer', Param(), lineno=188, col_offset=34)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=189, col_offset=8), 'producer_fifo', Load(), lineno=189, col_offset=8), 'append', Load(), lineno=189, col_offset=8), [Name('producer', Load(), lineno=189, col_offset=34)], [], None, None, lineno=189, col_offset=8), lineno=189, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=190, col_offset=8), 'initiate_send', Load(), lineno=190, col_offset=8), [], [], None, None, lineno=190, col_offset=8), lineno=190, col_offset=8)], [], lineno=188, col_offset=4), FunctionDef('readable', arguments([Name('self', Param(), lineno=192, col_offset=18)], None, None, []), [Expr(Str('predicate for inclusion in the readable for select()', lineno=193, col_offset=8), lineno=193, col_offset=8), Return(Num(1, lineno=198, col_offset=15), lineno=198, col_offset=8)], [], lineno=192, col_offset=4), FunctionDef('writable', arguments([Name('self', Param(), lineno=200, col_offset=18)], None, None, []), [Expr(Str('predicate for inclusion in the writable for select()', lineno=201, col_offset=8), lineno=201, col_offset=8), Return(BoolOp(Or(), [Attribute(Name('self', Load(), lineno=202, col_offset=15), 'producer_fifo', Load(), lineno=202, col_offset=15), UnaryOp(Not(), Attribute(Name('self', Load(), lineno=202, col_offset=42), 'connected', Load(), lineno=202, col_offset=42), lineno=202, col_offset=38)], lineno=202, col_offset=15), lineno=202, col_offset=8)], [], lineno=200, col_offset=4), FunctionDef('close_when_done', arguments([Name('self', Param(), lineno=204, col_offset=25)], None, None, []), [Expr(Str('automatically close this channel once the outgoing queue is empty', lineno=205, col_offset=8), lineno=205, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=206, col_offset=8), 'producer_fifo', Load(), lineno=206, col_offset=8), 'append', Load(), lineno=206, col_offset=8), [Name('None', Load(), lineno=206, col_offset=34)], [], None, None, lineno=206, col_offset=8), lineno=206, col_offset=8)], [], lineno=204, col_offset=4), FunctionDef('initiate_send', arguments([Name('self', Param(), lineno=208, col_offset=22)], None, None, []), [While(BoolOp(And(), [Attribute(Name('self', Load(), lineno=209, col_offset=14), 'producer_fifo', Load(), lineno=209, col_offset=14), Attribute(Name('self', Load(), lineno=209, col_offset=37), 'connected', Load(), lineno=209, col_offset=37)], lineno=209, col_offset=14), [Assign([Name('first', Store(), lineno=210, col_offset=12)], Subscript(Attribute(Name('self', Load(), lineno=210, col_offset=20), 'producer_fifo', Load(), lineno=210, col_offset=20), Index(Num(0, lineno=210, col_offset=39)), Load(), lineno=210, col_offset=20), lineno=210, col_offset=12), If(UnaryOp(Not(), Name('first', Load(), lineno=212, col_offset=19), lineno=212, col_offset=15), [Delete([Subscript(Attribute(Name('self', Load(), lineno=213, col_offset=20), 'producer_fifo', Load(), lineno=213, col_offset=20), Index(Num(0, lineno=213, col_offset=39)), Del(), lineno=213, col_offset=20)], lineno=213, col_offset=16), If(Compare(Name('first', Load(), lineno=214, col_offset=19), [Is()], [Name('None', Load(), lineno=214, col_offset=28)], lineno=214, col_offset=19), [Expr(Call(Attribute(Name('self', Load(), lineno=215, col_offset=20), 'handle_close', Load(), lineno=215, col_offset=20), [], [], None, None, lineno=215, col_offset=20), lineno=215, col_offset=20), Return(None, lineno=216, col_offset=20)], [], lineno=214, col_offset=16)], [], lineno=212, col_offset=12), Assign([Name('obs', Store(), lineno=219, col_offset=12)], Attribute(Name('self', Load(), lineno=219, col_offset=18), 'ac_out_buffer_size', Load(), lineno=219, col_offset=18), lineno=219, col_offset=12), TryExcept([With(Call(Name('catch_warnings', Load(), lineno=221, col_offset=21), [], [], None, None, lineno=221, col_offset=21), None, [If(Name('py3kwarning', Load(), lineno=222, col_offset=23), [Expr(Call(Name('filterwarnings', Load(), lineno=223, col_offset=24), [Str('ignore', lineno=223, col_offset=39), Str('.*buffer', lineno=223, col_offset=49), Name('DeprecationWarning', Load(), lineno=223, col_offset=61)], [], None, None, lineno=223, col_offset=24), lineno=223, col_offset=24)], [], lineno=222, col_offset=20), Assign([Name('data', Store(), lineno=224, col_offset=20)], Call(Name('buffer', Load(), lineno=224, col_offset=27), [Name('first', Load(), lineno=224, col_offset=34), Num(0, lineno=224, col_offset=41), Name('obs', Load(), lineno=224, col_offset=44)], [], None, None, lineno=224, col_offset=27), lineno=224, col_offset=20)], lineno=221, col_offset=21)], [ExceptHandler(Name('TypeError', Load(), lineno=225, col_offset=19), None, [Assign([Name('data', Store(), lineno=226, col_offset=16)], Call(Attribute(Name('first', Load(), lineno=226, col_offset=23), 'more', Load(), lineno=226, col_offset=23), [], [], None, None, lineno=226, col_offset=23), lineno=226, col_offset=16), If(Name('data', Load(), lineno=227, col_offset=19), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=228, col_offset=20), 'producer_fifo', Load(), lineno=228, col_offset=20), 'appendleft', Load(), lineno=228, col_offset=20), [Name('data', Load(), lineno=228, col_offset=50)], [], None, None, lineno=228, col_offset=20), lineno=228, col_offset=20)], [Delete([Subscript(Attribute(Name('self', Load(), lineno=230, col_offset=24), 'producer_fifo', Load(), lineno=230, col_offset=24), Index(Num(0, lineno=230, col_offset=43)), Del(), lineno=230, col_offset=24)], lineno=230, col_offset=20)], lineno=227, col_offset=16), Continue( lineno=231, col_offset=16)], lineno=225, col_offset=12)], [], lineno=220, col_offset=12), TryExcept([Assign([Name('num_sent', Store(), lineno=235, col_offset=16)], Call(Attribute(Name('self', Load(), lineno=235, col_offset=27), 'send', Load(), lineno=235, col_offset=27), [Name('data', Load(), lineno=235, col_offset=37)], [], None, None, lineno=235, col_offset=27), lineno=235, col_offset=16)], [ExceptHandler(Attribute(Name('socket', Load(), lineno=236, col_offset=19), 'error', Load(), lineno=236, col_offset=19), None, [Expr(Call(Attribute(Name('self', Load(), lineno=237, col_offset=16), 'handle_error', Load(), lineno=237, col_offset=16), [], [], None, None, lineno=237, col_offset=16), lineno=237, col_offset=16), Return(None, lineno=238, col_offset=16)], lineno=236, col_offset=12)], [], lineno=234, col_offset=12), If(Name('num_sent', Load(), lineno=240, col_offset=15), [If(BoolOp(Or(), [Compare(Name('num_sent', Load(), lineno=241, col_offset=19), [Lt()], [Call(Name('len', Load(), lineno=241, col_offset=30), [Name('data', Load(), lineno=241, col_offset=34)], [], None, None, lineno=241, col_offset=30)], lineno=241, col_offset=19), Compare(Name('obs', Load(), lineno=241, col_offset=43), [Lt()], [Call(Name('len', Load(), lineno=241, col_offset=49), [Name('first', Load(), lineno=241, col_offset=53)], [], None, None, lineno=241, col_offset=49)], lineno=241, col_offset=43)], lineno=241, col_offset=19), [Assign([Subscript(Attribute(Name('self', Load(), lineno=242, col_offset=20), 'producer_fifo', Load(), lineno=242, col_offset=20), Index(Num(0, lineno=242, col_offset=39)), Store(), lineno=242, col_offset=20)], Subscript(Name('first', Load(), lineno=242, col_offset=44), Slice(Name('num_sent', Load(), lineno=242, col_offset=50), None, None), Load(), lineno=242, col_offset=44), lineno=242, col_offset=20)], [Delete([Subscript(Attribute(Name('self', Load(), lineno=244, col_offset=24), 'producer_fifo', Load(), lineno=244, col_offset=24), Index(Num(0, lineno=244, col_offset=43)), Del(), lineno=244, col_offset=24)], lineno=244, col_offset=20)], lineno=241, col_offset=16)], [], lineno=240, col_offset=12), Return(None, lineno=246, col_offset=12)], [], lineno=209, col_offset=8)], [], lineno=208, col_offset=4), FunctionDef('discard_buffers', arguments([Name('self', Param(), lineno=248, col_offset=25)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=250, col_offset=8), 'ac_in_buffer', Store(), lineno=250, col_offset=8)], Str('', lineno=250, col_offset=28), lineno=250, col_offset=8), Delete([Subscript(Attribute(Name('self', Load(), lineno=251, col_offset=12), 'incoming', Load(), lineno=251, col_offset=12), Slice(None, None, None), Del(), lineno=251, col_offset=12)], lineno=251, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=252, col_offset=8), 'producer_fifo', Load(), lineno=252, col_offset=8), 'clear', Load(), lineno=252, col_offset=8), [], [], None, None, lineno=252, col_offset=8), lineno=252, col_offset=8)], [], lineno=248, col_offset=4)], [], lineno=55, col_offset=0), ClassDef('simple_producer', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=256, col_offset=18), Name('data', Param(), lineno=256, col_offset=24), Name('buffer_size', Param(), lineno=256, col_offset=30)], None, None, [Num(512, lineno=256, col_offset=42)]), [Assign([Attribute(Name('self', Load(), lineno=257, col_offset=8), 'data', Store(), lineno=257, col_offset=8)], Name('data', Load(), lineno=257, col_offset=20), lineno=257, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=258, col_offset=8), 'buffer_size', Store(), lineno=258, col_offset=8)], Name('buffer_size', Load(), lineno=258, col_offset=27), lineno=258, col_offset=8)], [], lineno=256, col_offset=4), FunctionDef('more', arguments([Name('self', Param(), lineno=260, col_offset=14)], None, None, []), [If(Compare(Call(Name('len', Load(), lineno=261, col_offset=11), [Attribute(Name('self', Load(), lineno=261, col_offset=16), 'data', Load(), lineno=261, col_offset=16)], [], None, None, lineno=261, col_offset=11), [Gt()], [Attribute(Name('self', Load(), lineno=261, col_offset=29), 'buffer_size', Load(), lineno=261, col_offset=29)], lineno=261, col_offset=11), [Assign([Name('result', Store(), lineno=262, col_offset=12)], Subscript(Attribute(Name('self', Load(), lineno=262, col_offset=21), 'data', Load(), lineno=262, col_offset=21), Slice(None, Attribute(Name('self', Load(), lineno=262, col_offset=32), 'buffer_size', Load(), lineno=262, col_offset=32), None), Load(), lineno=262, col_offset=21), lineno=262, col_offset=12), Assign([Attribute(Name('self', Load(), lineno=263, col_offset=12), 'data', Store(), lineno=263, col_offset=12)], Subscript(Attribute(Name('self', Load(), lineno=263, col_offset=24), 'data', Load(), lineno=263, col_offset=24), Slice(Attribute(Name('self', Load(), lineno=263, col_offset=34), 'buffer_size', Load(), lineno=263, col_offset=34), None, None), Load(), lineno=263, col_offset=24), lineno=263, col_offset=12), Return(Name('result', Load(), lineno=264, col_offset=19), lineno=264, col_offset=12)], [Assign([Name('result', Store(), lineno=266, col_offset=12)], Attribute(Name('self', Load(), lineno=266, col_offset=21), 'data', Load(), lineno=266, col_offset=21), lineno=266, col_offset=12), Assign([Attribute(Name('self', Load(), lineno=267, col_offset=12), 'data', Store(), lineno=267, col_offset=12)], Str('', lineno=267, col_offset=24), lineno=267, col_offset=12), Return(Name('result', Load(), lineno=268, col_offset=19), lineno=268, col_offset=12)], lineno=261, col_offset=8)], [], lineno=260, col_offset=4)], [], lineno=254, col_offset=0), ClassDef('fifo', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=271, col_offset=18), Name('list', Param(), lineno=271, col_offset=24)], None, None, [Name('None', Load(), lineno=271, col_offset=29)]), [If(UnaryOp(Not(), Name('list', Load(), lineno=272, col_offset=15), lineno=272, col_offset=11), [Assign([Attribute(Name('self', Load(), lineno=273, col_offset=12), 'list', Store(), lineno=273, col_offset=12)], Call(Name('deque', Load(), lineno=273, col_offset=24), [], [], None, None, lineno=273, col_offset=24), lineno=273, col_offset=12)], [Assign([Attribute(Name('self', Load(), lineno=275, col_offset=12), 'list', Store(), lineno=275, col_offset=12)], Call(Name('deque', Load(), lineno=275, col_offset=24), [Name('list', Load(), lineno=275, col_offset=30)], [], None, None, lineno=275, col_offset=24), lineno=275, col_offset=12)], lineno=272, col_offset=8)], [], lineno=271, col_offset=4), FunctionDef('__len__', arguments([Name('self', Param(), lineno=277, col_offset=17)], None, None, []), [Return(Call(Name('len', Load(), lineno=278, col_offset=15), [Attribute(Name('self', Load(), lineno=278, col_offset=19), 'list', Load(), lineno=278, col_offset=19)], [], None, None, lineno=278, col_offset=15), lineno=278, col_offset=8)], [], lineno=277, col_offset=4), FunctionDef('is_empty', arguments([Name('self', Param(), lineno=280, col_offset=18)], None, None, []), [Return(UnaryOp(Not(), Attribute(Name('self', Load(), lineno=281, col_offset=19), 'list', Load(), lineno=281, col_offset=19), lineno=281, col_offset=15), lineno=281, col_offset=8)], [], lineno=280, col_offset=4), FunctionDef('first', arguments([Name('self', Param(), lineno=283, col_offset=15)], None, None, []), [Return(Subscript(Attribute(Name('self', Load(), lineno=284, col_offset=15), 'list', Load(), lineno=284, col_offset=15), Index(Num(0, lineno=284, col_offset=25)), Load(), lineno=284, col_offset=15), lineno=284, col_offset=8)], [], lineno=283, col_offset=4), FunctionDef('push', arguments([Name('self', Param(), lineno=286, col_offset=14), Name('data', Param(), lineno=286, col_offset=20)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=287, col_offset=8), 'list', Load(), lineno=287, col_offset=8), 'append', Load(), lineno=287, col_offset=8), [Name('data', Load(), lineno=287, col_offset=25)], [], None, None, lineno=287, col_offset=8), lineno=287, col_offset=8)], [], lineno=286, col_offset=4), FunctionDef('pop', arguments([Name('self', Param(), lineno=289, col_offset=13)], None, None, []), [If(Attribute(Name('self', Load(), lineno=290, col_offset=11), 'list', Load(), lineno=290, col_offset=11), [Return(Tuple([Num(1, lineno=291, col_offset=20), Call(Attribute(Attribute(Name('self', Load(), lineno=291, col_offset=23), 'list', Load(), lineno=291, col_offset=23), 'popleft', Load(), lineno=291, col_offset=23), [], [], None, None, lineno=291, col_offset=23)], Load(), lineno=291, col_offset=20), lineno=291, col_offset=12)], [Return(Tuple([Num(0, lineno=293, col_offset=20), Name('None', Load(), lineno=293, col_offset=23)], Load(), lineno=293, col_offset=20), lineno=293, col_offset=12)], lineno=290, col_offset=8)], [], lineno=289, col_offset=4)], [], lineno=270, col_offset=0), FunctionDef('find_prefix_at_end', arguments([Name('haystack', Param(), lineno=310, col_offset=24), Name('needle', Param(), lineno=310, col_offset=34)], None, None, []), [Assign([Name('l', Store(), lineno=311, col_offset=4)], BinOp(Call(Name('len', Load(), lineno=311, col_offset=8), [Name('needle', Load(), lineno=311, col_offset=12)], [], None, None, lineno=311, col_offset=8), Sub(), Num(1, lineno=311, col_offset=22), lineno=311, col_offset=8), lineno=311, col_offset=4), While(BoolOp(And(), [Name('l', Load(), lineno=312, col_offset=10), UnaryOp(Not(), Call(Attribute(Name('haystack', Load(), lineno=312, col_offset=20), 'endswith', Load(), lineno=312, col_offset=20), [Subscript(Name('needle', Load(), lineno=312, col_offset=38), Slice(None, Name('l', Load(), lineno=312, col_offset=46), None), Load(), lineno=312, col_offset=38)], [], None, None, lineno=312, col_offset=20), lineno=312, col_offset=16)], lineno=312, col_offset=10), [AugAssign(Name('l', Store(), lineno=313, col_offset=8), Sub(), Num(1, lineno=313, col_offset=13), lineno=313, col_offset=8)], [], lineno=312, col_offset=4), Return(Name('l', Load(), lineno=314, col_offset=11), lineno=314, col_offset=4)], [], lineno=310, col_offset=0)])
