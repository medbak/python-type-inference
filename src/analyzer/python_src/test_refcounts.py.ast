Module([Import([alias('unittest', None)], lineno=1, col_offset=0), Import([alias('ctypes', None)], lineno=2, col_offset=0), Import([alias('gc', None)], lineno=3, col_offset=0), Assign([Name('MyCallback', Store(), lineno=5, col_offset=0)], Call(Attribute(Name('ctypes', Load(), lineno=5, col_offset=13), 'CFUNCTYPE', Load(), lineno=5, col_offset=13), [Attribute(Name('ctypes', Load(), lineno=5, col_offset=30), 'c_int', Load(), lineno=5, col_offset=30), Attribute(Name('ctypes', Load(), lineno=5, col_offset=44), 'c_int', Load(), lineno=5, col_offset=44)], [], None, None, lineno=5, col_offset=13), lineno=5, col_offset=0), Assign([Name('OtherCallback', Store(), lineno=6, col_offset=0)], Call(Attribute(Name('ctypes', Load(), lineno=6, col_offset=16), 'CFUNCTYPE', Load(), lineno=6, col_offset=16), [Attribute(Name('ctypes', Load(), lineno=6, col_offset=33), 'c_int', Load(), lineno=6, col_offset=33), Attribute(Name('ctypes', Load(), lineno=6, col_offset=47), 'c_int', Load(), lineno=6, col_offset=47), Attribute(Name('ctypes', Load(), lineno=6, col_offset=61), 'c_ulonglong', Load(), lineno=6, col_offset=61)], [], None, None, lineno=6, col_offset=16), lineno=6, col_offset=0), Import([alias('_ctypes_test', None)], lineno=8, col_offset=0), Assign([Name('dll', Store(), lineno=9, col_offset=0)], Call(Attribute(Name('ctypes', Load(), lineno=9, col_offset=6), 'CDLL', Load(), lineno=9, col_offset=6), [Attribute(Name('_ctypes_test', Load(), lineno=9, col_offset=18), '__file__', Load(), lineno=9, col_offset=18)], [], None, None, lineno=9, col_offset=6), lineno=9, col_offset=0), ClassDef('RefcountTestCase', [Attribute(Name('unittest', Load(), lineno=11, col_offset=23), 'TestCase', Load(), lineno=11, col_offset=23)], [FunctionDef('test_1', arguments([Name('self', Param(), lineno=13, col_offset=15)], None, None, []), [ImportFrom('sys', [alias('getrefcount', 'grc')], 0, lineno=14, col_offset=8), Assign([Name('f', Store(), lineno=16, col_offset=8)], Attribute(Name('dll', Load(), lineno=16, col_offset=12), '_testfunc_callback_i_if', Load(), lineno=16, col_offset=12), lineno=16, col_offset=8), Assign([Attribute(Name('f', Load(), lineno=17, col_offset=8), 'restype', Store(), lineno=17, col_offset=8)], Attribute(Name('ctypes', Load(), lineno=17, col_offset=20), 'c_int', Load(), lineno=17, col_offset=20), lineno=17, col_offset=8), Assign([Attribute(Name('f', Load(), lineno=18, col_offset=8), 'argtypes', Store(), lineno=18, col_offset=8)], List([Attribute(Name('ctypes', Load(), lineno=18, col_offset=22), 'c_int', Load(), lineno=18, col_offset=22), Name('MyCallback', Load(), lineno=18, col_offset=36)], Load(), lineno=18, col_offset=21), lineno=18, col_offset=8), FunctionDef('callback', arguments([Name('value', Param(), lineno=20, col_offset=21)], None, None, []), [Return(Name('value', Load(), lineno=22, col_offset=19), lineno=22, col_offset=12)], [], lineno=20, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=24, col_offset=8), 'assertEqual', Load(), lineno=24, col_offset=8), [Call(Name('grc', Load(), lineno=24, col_offset=25), [Name('callback', Load(), lineno=24, col_offset=29)], [], None, None, lineno=24, col_offset=25), Num(2, lineno=24, col_offset=40)], [], None, None, lineno=24, col_offset=8), lineno=24, col_offset=8), Assign([Name('cb', Store(), lineno=25, col_offset=8)], Call(Name('MyCallback', Load(), lineno=25, col_offset=13), [Name('callback', Load(), lineno=25, col_offset=24)], [], None, None, lineno=25, col_offset=13), lineno=25, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=27, col_offset=8), 'assertTrue', Load(), lineno=27, col_offset=8), [Compare(Call(Name('grc', Load(), lineno=27, col_offset=24), [Name('callback', Load(), lineno=27, col_offset=28)], [], None, None, lineno=27, col_offset=24), [Gt()], [Num(2, lineno=27, col_offset=40)], lineno=27, col_offset=24)], [], None, None, lineno=27, col_offset=8), lineno=27, col_offset=8), Assign([Name('result', Store(), lineno=28, col_offset=8)], Call(Name('f', Load(), lineno=28, col_offset=17), [Num(-10, lineno=28, col_offset=20), Name('cb', Load(), lineno=28, col_offset=24)], [], None, None, lineno=28, col_offset=17), lineno=28, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=29, col_offset=8), 'assertEqual', Load(), lineno=29, col_offset=8), [Name('result', Load(), lineno=29, col_offset=25), Num(-18, lineno=29, col_offset=34)], [], None, None, lineno=29, col_offset=8), lineno=29, col_offset=8), Assign([Name('cb', Store(), lineno=30, col_offset=8)], Name('None', Load(), lineno=30, col_offset=13), lineno=30, col_offset=8), Expr(Call(Attribute(Name('gc', Load(), lineno=32, col_offset=8), 'collect', Load(), lineno=32, col_offset=8), [], [], None, None, lineno=32, col_offset=8), lineno=32, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=34, col_offset=8), 'assertEqual', Load(), lineno=34, col_offset=8), [Call(Name('grc', Load(), lineno=34, col_offset=25), [Name('callback', Load(), lineno=34, col_offset=29)], [], None, None, lineno=34, col_offset=25), Num(2, lineno=34, col_offset=40)], [], None, None, lineno=34, col_offset=8), lineno=34, col_offset=8)], [], lineno=13, col_offset=4), FunctionDef('test_refcount', arguments([Name('self', Param(), lineno=37, col_offset=22)], None, None, []), [ImportFrom('sys', [alias('getrefcount', 'grc')], 0, lineno=38, col_offset=8), FunctionDef('func', arguments([], 'args', None, []), [Pass( lineno=40, col_offset=12)], [], lineno=39, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=42, col_offset=8), 'assertEqual', Load(), lineno=42, col_offset=8), [Call(Name('grc', Load(), lineno=42, col_offset=25), [Name('func', Load(), lineno=42, col_offset=29)], [], None, None, lineno=42, col_offset=25), Num(2, lineno=42, col_offset=36)], [], None, None, lineno=42, col_offset=8), lineno=42, col_offset=8), Assign([Name('f', Store(), lineno=45, col_offset=8)], Call(Name('OtherCallback', Load(), lineno=45, col_offset=12), [Name('func', Load(), lineno=45, col_offset=26)], [], None, None, lineno=45, col_offset=12), lineno=45, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=46, col_offset=8), 'assertTrue', Load(), lineno=46, col_offset=8), [Compare(Call(Name('grc', Load(), lineno=46, col_offset=24), [Name('func', Load(), lineno=46, col_offset=28)], [], None, None, lineno=46, col_offset=24), [Gt()], [Num(2, lineno=46, col_offset=36)], lineno=46, col_offset=24)], [], None, None, lineno=46, col_offset=8), lineno=46, col_offset=8), Delete([Name('f', Del(), lineno=49, col_offset=12)], lineno=49, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=50, col_offset=8), 'assertTrue', Load(), lineno=50, col_offset=8), [Compare(Call(Name('grc', Load(), lineno=50, col_offset=24), [Name('func', Load(), lineno=50, col_offset=28)], [], None, None, lineno=50, col_offset=24), [GtE()], [Num(2, lineno=50, col_offset=37)], lineno=50, col_offset=24)], [], None, None, lineno=50, col_offset=8), lineno=50, col_offset=8), Expr(Call(Attribute(Name('gc', Load(), lineno=53, col_offset=8), 'collect', Load(), lineno=53, col_offset=8), [], [], None, None, lineno=53, col_offset=8), lineno=53, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=54, col_offset=8), 'assertTrue', Load(), lineno=54, col_offset=8), [Compare(Call(Name('grc', Load(), lineno=54, col_offset=24), [Name('func', Load(), lineno=54, col_offset=28)], [], None, None, lineno=54, col_offset=24), [Eq()], [Num(2, lineno=54, col_offset=37)], lineno=54, col_offset=24)], [], None, None, lineno=54, col_offset=8), lineno=54, col_offset=8), ClassDef('X', [Attribute(Name('ctypes', Load(), lineno=56, col_offset=16), 'Structure', Load(), lineno=56, col_offset=16)], [Assign([Name('_fields_', Store(), lineno=57, col_offset=12)], List([Tuple([Str('a', lineno=57, col_offset=25), Name('OtherCallback', Load(), lineno=57, col_offset=30)], Load(), lineno=57, col_offset=25)], Load(), lineno=57, col_offset=23), lineno=57, col_offset=12)], [], lineno=56, col_offset=8), Assign([Name('x', Store(), lineno=58, col_offset=8)], Call(Name('X', Load(), lineno=58, col_offset=12), [], [], None, None, lineno=58, col_offset=12), lineno=58, col_offset=8), Assign([Attribute(Name('x', Load(), lineno=59, col_offset=8), 'a', Store(), lineno=59, col_offset=8)], Call(Name('OtherCallback', Load(), lineno=59, col_offset=14), [Name('func', Load(), lineno=59, col_offset=28)], [], None, None, lineno=59, col_offset=14), lineno=59, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=62, col_offset=8), 'assertTrue', Load(), lineno=62, col_offset=8), [Compare(Call(Name('grc', Load(), lineno=62, col_offset=24), [Name('func', Load(), lineno=62, col_offset=28)], [], None, None, lineno=62, col_offset=24), [Gt()], [Num(2, lineno=62, col_offset=36)], lineno=62, col_offset=24)], [], None, None, lineno=62, col_offset=8), lineno=62, col_offset=8), Delete([Name('x', Del(), lineno=65, col_offset=12)], lineno=65, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=66, col_offset=8), 'assertTrue', Load(), lineno=66, col_offset=8), [Compare(Call(Name('grc', Load(), lineno=66, col_offset=24), [Name('func', Load(), lineno=66, col_offset=28)], [], None, None, lineno=66, col_offset=24), [GtE()], [Num(2, lineno=66, col_offset=37)], lineno=66, col_offset=24)], [], None, None, lineno=66, col_offset=8), lineno=66, col_offset=8), Expr(Call(Attribute(Name('gc', Load(), lineno=69, col_offset=8), 'collect', Load(), lineno=69, col_offset=8), [], [], None, None, lineno=69, col_offset=8), lineno=69, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=70, col_offset=8), 'assertEqual', Load(), lineno=70, col_offset=8), [Call(Name('grc', Load(), lineno=70, col_offset=25), [Name('func', Load(), lineno=70, col_offset=29)], [], None, None, lineno=70, col_offset=25), Num(2, lineno=70, col_offset=36)], [], None, None, lineno=70, col_offset=8), lineno=70, col_offset=8), Assign([Name('f', Store(), lineno=72, col_offset=8)], Call(Name('OtherCallback', Load(), lineno=72, col_offset=12), [Name('func', Load(), lineno=72, col_offset=26)], [], None, None, lineno=72, col_offset=12), lineno=72, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=75, col_offset=8), 'assertTrue', Load(), lineno=75, col_offset=8), [Compare(Call(Name('grc', Load(), lineno=75, col_offset=24), [Name('func', Load(), lineno=75, col_offset=28)], [], None, None, lineno=75, col_offset=24), [Gt()], [Num(2, lineno=75, col_offset=36)], lineno=75, col_offset=24)], [], None, None, lineno=75, col_offset=8), lineno=75, col_offset=8), Assign([Attribute(Name('f', Load(), lineno=78, col_offset=8), 'cycle', Store(), lineno=78, col_offset=8)], Name('f', Load(), lineno=78, col_offset=18), lineno=78, col_offset=8), Delete([Name('f', Del(), lineno=80, col_offset=12)], lineno=80, col_offset=8), Expr(Call(Attribute(Name('gc', Load(), lineno=81, col_offset=8), 'collect', Load(), lineno=81, col_offset=8), [], [], None, None, lineno=81, col_offset=8), lineno=81, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=82, col_offset=8), 'assertEqual', Load(), lineno=82, col_offset=8), [Call(Name('grc', Load(), lineno=82, col_offset=25), [Name('func', Load(), lineno=82, col_offset=29)], [], None, None, lineno=82, col_offset=25), Num(2, lineno=82, col_offset=36)], [], None, None, lineno=82, col_offset=8), lineno=82, col_offset=8)], [], lineno=37, col_offset=4)], [], lineno=11, col_offset=0), ClassDef('AnotherLeak', [Attribute(Name('unittest', Load(), lineno=84, col_offset=18), 'TestCase', Load(), lineno=84, col_offset=18)], [FunctionDef('test_callback', arguments([Name('self', Param(), lineno=85, col_offset=22)], None, None, []), [Import([alias('sys', None)], lineno=86, col_offset=8), Assign([Name('proto', Store(), lineno=88, col_offset=8)], Call(Attribute(Name('ctypes', Load(), lineno=88, col_offset=16), 'CFUNCTYPE', Load(), lineno=88, col_offset=16), [Attribute(Name('ctypes', Load(), lineno=88, col_offset=33), 'c_int', Load(), lineno=88, col_offset=33), Attribute(Name('ctypes', Load(), lineno=88, col_offset=47), 'c_int', Load(), lineno=88, col_offset=47), Attribute(Name('ctypes', Load(), lineno=88, col_offset=61), 'c_int', Load(), lineno=88, col_offset=61)], [], None, None, lineno=88, col_offset=16), lineno=88, col_offset=8), FunctionDef('func', arguments([Name('a', Param(), lineno=89, col_offset=17), Name('b', Param(), lineno=89, col_offset=20)], None, None, []), [Return(BinOp(BinOp(Name('a', Load(), lineno=90, col_offset=19), Mult(), Name('b', Load(), lineno=90, col_offset=23), lineno=90, col_offset=19), Mult(), Num(2, lineno=90, col_offset=27), lineno=90, col_offset=25), lineno=90, col_offset=12)], [], lineno=89, col_offset=8), Assign([Name('f', Store(), lineno=91, col_offset=8)], Call(Name('proto', Load(), lineno=91, col_offset=12), [Name('func', Load(), lineno=91, col_offset=18)], [], None, None, lineno=91, col_offset=12), lineno=91, col_offset=8), Assign([Name('a', Store(), lineno=93, col_offset=8)], Call(Attribute(Name('sys', Load(), lineno=93, col_offset=12), 'getrefcount', Load(), lineno=93, col_offset=12), [Attribute(Name('ctypes', Load(), lineno=93, col_offset=28), 'c_int', Load(), lineno=93, col_offset=28)], [], None, None, lineno=93, col_offset=12), lineno=93, col_offset=8), Expr(Call(Name('f', Load(), lineno=94, col_offset=8), [Num(1, lineno=94, col_offset=10), Num(2, lineno=94, col_offset=13)], [], None, None, lineno=94, col_offset=8), lineno=94, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=95, col_offset=8), 'assertEqual', Load(), lineno=95, col_offset=8), [Call(Attribute(Name('sys', Load(), lineno=95, col_offset=25), 'getrefcount', Load(), lineno=95, col_offset=25), [Attribute(Name('ctypes', Load(), lineno=95, col_offset=41), 'c_int', Load(), lineno=95, col_offset=41)], [], None, None, lineno=95, col_offset=25), Name('a', Load(), lineno=95, col_offset=56)], [], None, None, lineno=95, col_offset=8), lineno=95, col_offset=8)], [], lineno=85, col_offset=4)], [], lineno=84, col_offset=0), If(Compare(Name('__name__', Load(), lineno=97, col_offset=3), [Eq()], [Str('__main__', lineno=97, col_offset=15)], lineno=97, col_offset=3), [Expr(Call(Attribute(Name('unittest', Load(), lineno=98, col_offset=4), 'main', Load(), lineno=98, col_offset=4), [], [], None, None, lineno=98, col_offset=4), lineno=98, col_offset=4)], [], lineno=97, col_offset=0)])
