Module([Import([alias('unittest', None)], lineno=5, col_offset=0), ImportFrom('string', [alias('Template', None)], 0, lineno=6, col_offset=0), ClassDef('Bag', [], [Pass( lineno=10, col_offset=4)], [], lineno=9, col_offset=0), ClassDef('Mapping', [], [FunctionDef('__getitem__', arguments([Name('self', Param(), lineno=13, col_offset=20), Name('name', Param(), lineno=13, col_offset=26)], None, None, []), [Assign([Name('obj', Store(), lineno=14, col_offset=8)], Name('self', Load(), lineno=14, col_offset=14), lineno=14, col_offset=8), For(Name('part', Store(), lineno=15, col_offset=12), Call(Attribute(Name('name', Load(), lineno=15, col_offset=20), 'split', Load(), lineno=15, col_offset=20), [Str('.', lineno=15, col_offset=31)], [], None, None, lineno=15, col_offset=20), [TryExcept([Assign([Name('obj', Store(), lineno=17, col_offset=16)], Call(Name('getattr', Load(), lineno=17, col_offset=22), [Name('obj', Load(), lineno=17, col_offset=30), Name('part', Load(), lineno=17, col_offset=35)], [], None, None, lineno=17, col_offset=22), lineno=17, col_offset=16)], [ExceptHandler(Name('AttributeError', Load(), lineno=18, col_offset=19), None, [Raise(Call(Name('KeyError', Load(), lineno=19, col_offset=22), [Name('name', Load(), lineno=19, col_offset=31)], [], None, None, lineno=19, col_offset=22), None, None, lineno=19, col_offset=16)], lineno=18, col_offset=12)], [], lineno=16, col_offset=12)], [], lineno=15, col_offset=8), Return(Name('obj', Load(), lineno=20, col_offset=15), lineno=20, col_offset=8)], [], lineno=13, col_offset=4)], [], lineno=12, col_offset=0), ClassDef('TestTemplate', [Attribute(Name('unittest', Load(), lineno=23, col_offset=19), 'TestCase', Load(), lineno=23, col_offset=19)], [FunctionDef('test_regular_templates', arguments([Name('self', Param(), lineno=24, col_offset=31)], None, None, []), [Assign([Name('s', Store(), lineno=25, col_offset=8)], Call(Name('Template', Load(), lineno=25, col_offset=12), [Str('$who likes to eat a bag of $what worth $$100', lineno=25, col_offset=21)], [], None, None, lineno=25, col_offset=12), lineno=25, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=26, col_offset=8), 'assertEqual', Load(), lineno=26, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=26, col_offset=25), 'substitute', Load(), lineno=26, col_offset=25), [Call(Name('dict', Load(), lineno=26, col_offset=38), [], [keyword('who', Str('tim', lineno=26, col_offset=47)), keyword('what', Str('ham', lineno=26, col_offset=59))], None, None, lineno=26, col_offset=38)], [], None, None, lineno=26, col_offset=25), Str('tim likes to eat a bag of ham worth $100', lineno=27, col_offset=25)], [], None, None, lineno=26, col_offset=8), lineno=26, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=28, col_offset=8), 'assertRaises', Load(), lineno=28, col_offset=8), [Name('KeyError', Load(), lineno=28, col_offset=26), Attribute(Name('s', Load(), lineno=28, col_offset=36), 'substitute', Load(), lineno=28, col_offset=36), Call(Name('dict', Load(), lineno=28, col_offset=50), [], [keyword('who', Str('tim', lineno=28, col_offset=59))], None, None, lineno=28, col_offset=50)], [], None, None, lineno=28, col_offset=8), lineno=28, col_offset=8)], [], lineno=24, col_offset=4), FunctionDef('test_regular_templates_with_braces', arguments([Name('self', Param(), lineno=30, col_offset=43)], None, None, []), [Assign([Name('s', Store(), lineno=31, col_offset=8)], Call(Name('Template', Load(), lineno=31, col_offset=12), [Str('$who likes ${what} for ${meal}', lineno=31, col_offset=21)], [], None, None, lineno=31, col_offset=12), lineno=31, col_offset=8), Assign([Name('d', Store(), lineno=32, col_offset=8)], Call(Name('dict', Load(), lineno=32, col_offset=12), [], [keyword('who', Str('tim', lineno=32, col_offset=21)), keyword('what', Str('ham', lineno=32, col_offset=33)), keyword('meal', Str('dinner', lineno=32, col_offset=45))], None, None, lineno=32, col_offset=12), lineno=32, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=33, col_offset=8), 'assertEqual', Load(), lineno=33, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=33, col_offset=25), 'substitute', Load(), lineno=33, col_offset=25), [Name('d', Load(), lineno=33, col_offset=38)], [], None, None, lineno=33, col_offset=25), Str('tim likes ham for dinner', lineno=33, col_offset=42)], [], None, None, lineno=33, col_offset=8), lineno=33, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=34, col_offset=8), 'assertRaises', Load(), lineno=34, col_offset=8), [Name('KeyError', Load(), lineno=34, col_offset=26), Attribute(Name('s', Load(), lineno=34, col_offset=36), 'substitute', Load(), lineno=34, col_offset=36), Call(Name('dict', Load(), lineno=35, col_offset=26), [], [keyword('who', Str('tim', lineno=35, col_offset=35)), keyword('what', Str('ham', lineno=35, col_offset=47))], None, None, lineno=35, col_offset=26)], [], None, None, lineno=34, col_offset=8), lineno=34, col_offset=8)], [], lineno=30, col_offset=4), FunctionDef('test_escapes', arguments([Name('self', Param(), lineno=37, col_offset=21)], None, None, []), [Assign([Name('eq', Store(), lineno=38, col_offset=8)], Attribute(Name('self', Load(), lineno=38, col_offset=13), 'assertEqual', Load(), lineno=38, col_offset=13), lineno=38, col_offset=8), Assign([Name('s', Store(), lineno=39, col_offset=8)], Call(Name('Template', Load(), lineno=39, col_offset=12), [Str('$who likes to eat a bag of $$what worth $$100', lineno=39, col_offset=21)], [], None, None, lineno=39, col_offset=12), lineno=39, col_offset=8), Expr(Call(Name('eq', Load(), lineno=40, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=40, col_offset=11), 'substitute', Load(), lineno=40, col_offset=11), [Call(Name('dict', Load(), lineno=40, col_offset=24), [], [keyword('who', Str('tim', lineno=40, col_offset=33)), keyword('what', Str('ham', lineno=40, col_offset=45))], None, None, lineno=40, col_offset=24)], [], None, None, lineno=40, col_offset=11), Str('tim likes to eat a bag of $what worth $100', lineno=41, col_offset=11)], [], None, None, lineno=40, col_offset=8), lineno=40, col_offset=8), Assign([Name('s', Store(), lineno=42, col_offset=8)], Call(Name('Template', Load(), lineno=42, col_offset=12), [Str('$who likes $$', lineno=42, col_offset=21)], [], None, None, lineno=42, col_offset=12), lineno=42, col_offset=8), Expr(Call(Name('eq', Load(), lineno=43, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=43, col_offset=11), 'substitute', Load(), lineno=43, col_offset=11), [Call(Name('dict', Load(), lineno=43, col_offset=24), [], [keyword('who', Str('tim', lineno=43, col_offset=33)), keyword('what', Str('ham', lineno=43, col_offset=45))], None, None, lineno=43, col_offset=24)], [], None, None, lineno=43, col_offset=11), Str('tim likes $', lineno=43, col_offset=54)], [], None, None, lineno=43, col_offset=8), lineno=43, col_offset=8)], [], lineno=37, col_offset=4), FunctionDef('test_percents', arguments([Name('self', Param(), lineno=45, col_offset=22)], None, None, []), [Assign([Name('eq', Store(), lineno=46, col_offset=8)], Attribute(Name('self', Load(), lineno=46, col_offset=13), 'assertEqual', Load(), lineno=46, col_offset=13), lineno=46, col_offset=8), Assign([Name('s', Store(), lineno=47, col_offset=8)], Call(Name('Template', Load(), lineno=47, col_offset=12), [Str('%(foo)s $foo ${foo}', lineno=47, col_offset=21)], [], None, None, lineno=47, col_offset=12), lineno=47, col_offset=8), Assign([Name('d', Store(), lineno=48, col_offset=8)], Call(Name('dict', Load(), lineno=48, col_offset=12), [], [keyword('foo', Str('baz', lineno=48, col_offset=21))], None, None, lineno=48, col_offset=12), lineno=48, col_offset=8), Expr(Call(Name('eq', Load(), lineno=49, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=49, col_offset=11), 'substitute', Load(), lineno=49, col_offset=11), [Name('d', Load(), lineno=49, col_offset=24)], [], None, None, lineno=49, col_offset=11), Str('%(foo)s baz baz', lineno=49, col_offset=28)], [], None, None, lineno=49, col_offset=8), lineno=49, col_offset=8), Expr(Call(Name('eq', Load(), lineno=50, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=50, col_offset=11), 'safe_substitute', Load(), lineno=50, col_offset=11), [Name('d', Load(), lineno=50, col_offset=29)], [], None, None, lineno=50, col_offset=11), Str('%(foo)s baz baz', lineno=50, col_offset=33)], [], None, None, lineno=50, col_offset=8), lineno=50, col_offset=8)], [], lineno=45, col_offset=4), FunctionDef('test_stringification', arguments([Name('self', Param(), lineno=52, col_offset=29)], None, None, []), [Assign([Name('eq', Store(), lineno=53, col_offset=8)], Attribute(Name('self', Load(), lineno=53, col_offset=13), 'assertEqual', Load(), lineno=53, col_offset=13), lineno=53, col_offset=8), Assign([Name('s', Store(), lineno=54, col_offset=8)], Call(Name('Template', Load(), lineno=54, col_offset=12), [Str('tim has eaten $count bags of ham today', lineno=54, col_offset=21)], [], None, None, lineno=54, col_offset=12), lineno=54, col_offset=8), Assign([Name('d', Store(), lineno=55, col_offset=8)], Call(Name('dict', Load(), lineno=55, col_offset=12), [], [keyword('count', Num(7, lineno=55, col_offset=23))], None, None, lineno=55, col_offset=12), lineno=55, col_offset=8), Expr(Call(Name('eq', Load(), lineno=56, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=56, col_offset=11), 'substitute', Load(), lineno=56, col_offset=11), [Name('d', Load(), lineno=56, col_offset=24)], [], None, None, lineno=56, col_offset=11), Str('tim has eaten 7 bags of ham today', lineno=56, col_offset=28)], [], None, None, lineno=56, col_offset=8), lineno=56, col_offset=8), Expr(Call(Name('eq', Load(), lineno=57, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=57, col_offset=11), 'safe_substitute', Load(), lineno=57, col_offset=11), [Name('d', Load(), lineno=57, col_offset=29)], [], None, None, lineno=57, col_offset=11), Str('tim has eaten 7 bags of ham today', lineno=57, col_offset=33)], [], None, None, lineno=57, col_offset=8), lineno=57, col_offset=8), Assign([Name('s', Store(), lineno=58, col_offset=8)], Call(Name('Template', Load(), lineno=58, col_offset=12), [Str('tim has eaten ${count} bags of ham today', lineno=58, col_offset=21)], [], None, None, lineno=58, col_offset=12), lineno=58, col_offset=8), Expr(Call(Name('eq', Load(), lineno=59, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=59, col_offset=11), 'substitute', Load(), lineno=59, col_offset=11), [Name('d', Load(), lineno=59, col_offset=24)], [], None, None, lineno=59, col_offset=11), Str('tim has eaten 7 bags of ham today', lineno=59, col_offset=28)], [], None, None, lineno=59, col_offset=8), lineno=59, col_offset=8)], [], lineno=52, col_offset=4), FunctionDef('test_tupleargs', arguments([Name('self', Param(), lineno=61, col_offset=23)], None, None, []), [Assign([Name('eq', Store(), lineno=62, col_offset=8)], Attribute(Name('self', Load(), lineno=62, col_offset=13), 'assertEqual', Load(), lineno=62, col_offset=13), lineno=62, col_offset=8), Assign([Name('s', Store(), lineno=63, col_offset=8)], Call(Name('Template', Load(), lineno=63, col_offset=12), [Str('$who ate ${meal}', lineno=63, col_offset=21)], [], None, None, lineno=63, col_offset=12), lineno=63, col_offset=8), Assign([Name('d', Store(), lineno=64, col_offset=8)], Call(Name('dict', Load(), lineno=64, col_offset=12), [], [keyword('who', Tuple([Str('tim', lineno=64, col_offset=22), Str('fred', lineno=64, col_offset=29)], Load(), lineno=64, col_offset=22)), keyword('meal', Tuple([Str('ham', lineno=64, col_offset=44), Str('kung pao', lineno=64, col_offset=51)], Load(), lineno=64, col_offset=44))], None, None, lineno=64, col_offset=12), lineno=64, col_offset=8), Expr(Call(Name('eq', Load(), lineno=65, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=65, col_offset=11), 'substitute', Load(), lineno=65, col_offset=11), [Name('d', Load(), lineno=65, col_offset=24)], [], None, None, lineno=65, col_offset=11), Str("('tim', 'fred') ate ('ham', 'kung pao')", lineno=65, col_offset=28)], [], None, None, lineno=65, col_offset=8), lineno=65, col_offset=8), Expr(Call(Name('eq', Load(), lineno=66, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=66, col_offset=11), 'safe_substitute', Load(), lineno=66, col_offset=11), [Name('d', Load(), lineno=66, col_offset=29)], [], None, None, lineno=66, col_offset=11), Str("('tim', 'fred') ate ('ham', 'kung pao')", lineno=66, col_offset=33)], [], None, None, lineno=66, col_offset=8), lineno=66, col_offset=8)], [], lineno=61, col_offset=4), FunctionDef('test_SafeTemplate', arguments([Name('self', Param(), lineno=68, col_offset=26)], None, None, []), [Assign([Name('eq', Store(), lineno=69, col_offset=8)], Attribute(Name('self', Load(), lineno=69, col_offset=13), 'assertEqual', Load(), lineno=69, col_offset=13), lineno=69, col_offset=8), Assign([Name('s', Store(), lineno=70, col_offset=8)], Call(Name('Template', Load(), lineno=70, col_offset=12), [Str('$who likes ${what} for ${meal}', lineno=70, col_offset=21)], [], None, None, lineno=70, col_offset=12), lineno=70, col_offset=8), Expr(Call(Name('eq', Load(), lineno=71, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=71, col_offset=11), 'safe_substitute', Load(), lineno=71, col_offset=11), [Call(Name('dict', Load(), lineno=71, col_offset=29), [], [keyword('who', Str('tim', lineno=71, col_offset=38))], None, None, lineno=71, col_offset=29)], [], None, None, lineno=71, col_offset=11), Str('tim likes ${what} for ${meal}', lineno=71, col_offset=47)], [], None, None, lineno=71, col_offset=8), lineno=71, col_offset=8), Expr(Call(Name('eq', Load(), lineno=72, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=72, col_offset=11), 'safe_substitute', Load(), lineno=72, col_offset=11), [Call(Name('dict', Load(), lineno=72, col_offset=29), [], [keyword('what', Str('ham', lineno=72, col_offset=39))], None, None, lineno=72, col_offset=29)], [], None, None, lineno=72, col_offset=11), Str('$who likes ham for ${meal}', lineno=72, col_offset=48)], [], None, None, lineno=72, col_offset=8), lineno=72, col_offset=8), Expr(Call(Name('eq', Load(), lineno=73, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=73, col_offset=11), 'safe_substitute', Load(), lineno=73, col_offset=11), [Call(Name('dict', Load(), lineno=73, col_offset=29), [], [keyword('what', Str('ham', lineno=73, col_offset=39)), keyword('meal', Str('dinner', lineno=73, col_offset=51))], None, None, lineno=73, col_offset=29)], [], None, None, lineno=73, col_offset=11), Str('$who likes ham for dinner', lineno=74, col_offset=11)], [], None, None, lineno=73, col_offset=8), lineno=73, col_offset=8), Expr(Call(Name('eq', Load(), lineno=75, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=75, col_offset=11), 'safe_substitute', Load(), lineno=75, col_offset=11), [Call(Name('dict', Load(), lineno=75, col_offset=29), [], [keyword('who', Str('tim', lineno=75, col_offset=38)), keyword('what', Str('ham', lineno=75, col_offset=50))], None, None, lineno=75, col_offset=29)], [], None, None, lineno=75, col_offset=11), Str('tim likes ham for ${meal}', lineno=76, col_offset=11)], [], None, None, lineno=75, col_offset=8), lineno=75, col_offset=8), Expr(Call(Name('eq', Load(), lineno=77, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=77, col_offset=11), 'safe_substitute', Load(), lineno=77, col_offset=11), [Call(Name('dict', Load(), lineno=77, col_offset=29), [], [keyword('who', Str('tim', lineno=77, col_offset=38)), keyword('what', Str('ham', lineno=77, col_offset=50)), keyword('meal', Str('dinner', lineno=77, col_offset=62))], None, None, lineno=77, col_offset=29)], [], None, None, lineno=77, col_offset=11), Str('tim likes ham for dinner', lineno=78, col_offset=11)], [], None, None, lineno=77, col_offset=8), lineno=77, col_offset=8)], [], lineno=68, col_offset=4), FunctionDef('test_invalid_placeholders', arguments([Name('self', Param(), lineno=80, col_offset=34)], None, None, []), [Assign([Name('raises', Store(), lineno=81, col_offset=8)], Attribute(Name('self', Load(), lineno=81, col_offset=17), 'assertRaises', Load(), lineno=81, col_offset=17), lineno=81, col_offset=8), Assign([Name('s', Store(), lineno=82, col_offset=8)], Call(Name('Template', Load(), lineno=82, col_offset=12), [Str('$who likes $', lineno=82, col_offset=21)], [], None, None, lineno=82, col_offset=12), lineno=82, col_offset=8), Expr(Call(Name('raises', Load(), lineno=83, col_offset=8), [Name('ValueError', Load(), lineno=83, col_offset=15), Attribute(Name('s', Load(), lineno=83, col_offset=27), 'substitute', Load(), lineno=83, col_offset=27), Call(Name('dict', Load(), lineno=83, col_offset=41), [], [keyword('who', Str('tim', lineno=83, col_offset=50))], None, None, lineno=83, col_offset=41)], [], None, None, lineno=83, col_offset=8), lineno=83, col_offset=8), Assign([Name('s', Store(), lineno=84, col_offset=8)], Call(Name('Template', Load(), lineno=84, col_offset=12), [Str('$who likes ${what)', lineno=84, col_offset=21)], [], None, None, lineno=84, col_offset=12), lineno=84, col_offset=8), Expr(Call(Name('raises', Load(), lineno=85, col_offset=8), [Name('ValueError', Load(), lineno=85, col_offset=15), Attribute(Name('s', Load(), lineno=85, col_offset=27), 'substitute', Load(), lineno=85, col_offset=27), Call(Name('dict', Load(), lineno=85, col_offset=41), [], [keyword('who', Str('tim', lineno=85, col_offset=50))], None, None, lineno=85, col_offset=41)], [], None, None, lineno=85, col_offset=8), lineno=85, col_offset=8), Assign([Name('s', Store(), lineno=86, col_offset=8)], Call(Name('Template', Load(), lineno=86, col_offset=12), [Str('$who likes $100', lineno=86, col_offset=21)], [], None, None, lineno=86, col_offset=12), lineno=86, col_offset=8), Expr(Call(Name('raises', Load(), lineno=87, col_offset=8), [Name('ValueError', Load(), lineno=87, col_offset=15), Attribute(Name('s', Load(), lineno=87, col_offset=27), 'substitute', Load(), lineno=87, col_offset=27), Call(Name('dict', Load(), lineno=87, col_offset=41), [], [keyword('who', Str('tim', lineno=87, col_offset=50))], None, None, lineno=87, col_offset=41)], [], None, None, lineno=87, col_offset=8), lineno=87, col_offset=8)], [], lineno=80, col_offset=4), FunctionDef('test_idpattern_override', arguments([Name('self', Param(), lineno=89, col_offset=32)], None, None, []), [ClassDef('PathPattern', [Name('Template', Load(), lineno=90, col_offset=26)], [Assign([Name('idpattern', Store(), lineno=91, col_offset=12)], Str('[_a-z][._a-z0-9]*', lineno=91, col_offset=24), lineno=91, col_offset=12)], [], lineno=90, col_offset=8), Assign([Name('m', Store(), lineno=92, col_offset=8)], Call(Name('Mapping', Load(), lineno=92, col_offset=12), [], [], None, None, lineno=92, col_offset=12), lineno=92, col_offset=8), Assign([Attribute(Name('m', Load(), lineno=93, col_offset=8), 'bag', Store(), lineno=93, col_offset=8)], Call(Name('Bag', Load(), lineno=93, col_offset=16), [], [], None, None, lineno=93, col_offset=16), lineno=93, col_offset=8), Assign([Attribute(Attribute(Name('m', Load(), lineno=94, col_offset=8), 'bag', Load(), lineno=94, col_offset=8), 'foo', Store(), lineno=94, col_offset=8)], Call(Name('Bag', Load(), lineno=94, col_offset=20), [], [], None, None, lineno=94, col_offset=20), lineno=94, col_offset=8), Assign([Attribute(Attribute(Attribute(Name('m', Load(), lineno=95, col_offset=8), 'bag', Load(), lineno=95, col_offset=8), 'foo', Load(), lineno=95, col_offset=8), 'who', Store(), lineno=95, col_offset=8)], Str('tim', lineno=95, col_offset=24), lineno=95, col_offset=8), Assign([Attribute(Attribute(Name('m', Load(), lineno=96, col_offset=8), 'bag', Load(), lineno=96, col_offset=8), 'what', Store(), lineno=96, col_offset=8)], Str('ham', lineno=96, col_offset=21), lineno=96, col_offset=8), Assign([Name('s', Store(), lineno=97, col_offset=8)], Call(Name('PathPattern', Load(), lineno=97, col_offset=12), [Str('$bag.foo.who likes to eat a bag of $bag.what', lineno=97, col_offset=24)], [], None, None, lineno=97, col_offset=12), lineno=97, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=98, col_offset=8), 'assertEqual', Load(), lineno=98, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=98, col_offset=25), 'substitute', Load(), lineno=98, col_offset=25), [Name('m', Load(), lineno=98, col_offset=38)], [], None, None, lineno=98, col_offset=25), Str('tim likes to eat a bag of ham', lineno=98, col_offset=42)], [], None, None, lineno=98, col_offset=8), lineno=98, col_offset=8)], [], lineno=89, col_offset=4), FunctionDef('test_pattern_override', arguments([Name('self', Param(), lineno=100, col_offset=30)], None, None, []), [ClassDef('MyPattern', [Name('Template', Load(), lineno=101, col_offset=24)], [Assign([Name('pattern', Store(), lineno=102, col_offset=12)], Str('\n            (?P<escaped>@{2})                   |\n            @(?P<named>[_a-z][._a-z0-9]*)       |\n            @{(?P<braced>[_a-z][._a-z0-9]*)}    |\n            (?P<invalid>@)\n            ', lineno=107, col_offset=-1), lineno=102, col_offset=12)], [], lineno=101, col_offset=8), Assign([Name('m', Store(), lineno=108, col_offset=8)], Call(Name('Mapping', Load(), lineno=108, col_offset=12), [], [], None, None, lineno=108, col_offset=12), lineno=108, col_offset=8), Assign([Attribute(Name('m', Load(), lineno=109, col_offset=8), 'bag', Store(), lineno=109, col_offset=8)], Call(Name('Bag', Load(), lineno=109, col_offset=16), [], [], None, None, lineno=109, col_offset=16), lineno=109, col_offset=8), Assign([Attribute(Attribute(Name('m', Load(), lineno=110, col_offset=8), 'bag', Load(), lineno=110, col_offset=8), 'foo', Store(), lineno=110, col_offset=8)], Call(Name('Bag', Load(), lineno=110, col_offset=20), [], [], None, None, lineno=110, col_offset=20), lineno=110, col_offset=8), Assign([Attribute(Attribute(Attribute(Name('m', Load(), lineno=111, col_offset=8), 'bag', Load(), lineno=111, col_offset=8), 'foo', Load(), lineno=111, col_offset=8), 'who', Store(), lineno=111, col_offset=8)], Str('tim', lineno=111, col_offset=24), lineno=111, col_offset=8), Assign([Attribute(Attribute(Name('m', Load(), lineno=112, col_offset=8), 'bag', Load(), lineno=112, col_offset=8), 'what', Store(), lineno=112, col_offset=8)], Str('ham', lineno=112, col_offset=21), lineno=112, col_offset=8), Assign([Name('s', Store(), lineno=113, col_offset=8)], Call(Name('MyPattern', Load(), lineno=113, col_offset=12), [Str('@bag.foo.who likes to eat a bag of @bag.what', lineno=113, col_offset=22)], [], None, None, lineno=113, col_offset=12), lineno=113, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=114, col_offset=8), 'assertEqual', Load(), lineno=114, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=114, col_offset=25), 'substitute', Load(), lineno=114, col_offset=25), [Name('m', Load(), lineno=114, col_offset=38)], [], None, None, lineno=114, col_offset=25), Str('tim likes to eat a bag of ham', lineno=114, col_offset=42)], [], None, None, lineno=114, col_offset=8), lineno=114, col_offset=8), ClassDef('BadPattern', [Name('Template', Load(), lineno=116, col_offset=25)], [Assign([Name('pattern', Store(), lineno=117, col_offset=12)], Str('\n            (?P<badname>.*)                     |\n            (?P<escaped>@{2})                   |\n            @(?P<named>[_a-z][._a-z0-9]*)       |\n            @{(?P<braced>[_a-z][._a-z0-9]*)}    |\n            (?P<invalid>@)                      |\n            ', lineno=123, col_offset=-1), lineno=117, col_offset=12)], [], lineno=116, col_offset=8), Assign([Name('s', Store(), lineno=124, col_offset=8)], Call(Name('BadPattern', Load(), lineno=124, col_offset=12), [Str('@bag.foo.who likes to eat a bag of @bag.what', lineno=124, col_offset=23)], [], None, None, lineno=124, col_offset=12), lineno=124, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=125, col_offset=8), 'assertRaises', Load(), lineno=125, col_offset=8), [Name('ValueError', Load(), lineno=125, col_offset=26), Attribute(Name('s', Load(), lineno=125, col_offset=38), 'substitute', Load(), lineno=125, col_offset=38), Dict([], [], lineno=125, col_offset=52)], [], None, None, lineno=125, col_offset=8), lineno=125, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=126, col_offset=8), 'assertRaises', Load(), lineno=126, col_offset=8), [Name('ValueError', Load(), lineno=126, col_offset=26), Attribute(Name('s', Load(), lineno=126, col_offset=38), 'safe_substitute', Load(), lineno=126, col_offset=38), Dict([], [], lineno=126, col_offset=57)], [], None, None, lineno=126, col_offset=8), lineno=126, col_offset=8)], [], lineno=100, col_offset=4), FunctionDef('test_unicode_values', arguments([Name('self', Param(), lineno=128, col_offset=28)], None, None, []), [Assign([Name('s', Store(), lineno=129, col_offset=8)], Call(Name('Template', Load(), lineno=129, col_offset=12), [Str('$who likes $what', lineno=129, col_offset=21)], [], None, None, lineno=129, col_offset=12), lineno=129, col_offset=8), Assign([Name('d', Store(), lineno=130, col_offset=8)], Call(Name('dict', Load(), lineno=130, col_offset=12), [], [keyword('who', Str(u't\xffm', lineno=130, col_offset=21)), keyword('what', Str(u'f\xfe\x0ced', lineno=130, col_offset=37))], None, None, lineno=130, col_offset=12), lineno=130, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=131, col_offset=8), 'assertEqual', Load(), lineno=131, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=131, col_offset=25), 'substitute', Load(), lineno=131, col_offset=25), [Name('d', Load(), lineno=131, col_offset=38)], [], None, None, lineno=131, col_offset=25), Str(u't\xffm likes f\xfe\x0ced', lineno=131, col_offset=42)], [], None, None, lineno=131, col_offset=8), lineno=131, col_offset=8)], [], lineno=128, col_offset=4), FunctionDef('test_keyword_arguments', arguments([Name('self', Param(), lineno=133, col_offset=31)], None, None, []), [Assign([Name('eq', Store(), lineno=134, col_offset=8)], Attribute(Name('self', Load(), lineno=134, col_offset=13), 'assertEqual', Load(), lineno=134, col_offset=13), lineno=134, col_offset=8), Assign([Name('s', Store(), lineno=135, col_offset=8)], Call(Name('Template', Load(), lineno=135, col_offset=12), [Str('$who likes $what', lineno=135, col_offset=21)], [], None, None, lineno=135, col_offset=12), lineno=135, col_offset=8), Expr(Call(Name('eq', Load(), lineno=136, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=136, col_offset=11), 'substitute', Load(), lineno=136, col_offset=11), [], [keyword('who', Str('tim', lineno=136, col_offset=28)), keyword('what', Str('ham', lineno=136, col_offset=40))], None, None, lineno=136, col_offset=11), Str('tim likes ham', lineno=136, col_offset=48)], [], None, None, lineno=136, col_offset=8), lineno=136, col_offset=8), Expr(Call(Name('eq', Load(), lineno=137, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=137, col_offset=11), 'substitute', Load(), lineno=137, col_offset=11), [Call(Name('dict', Load(), lineno=137, col_offset=24), [], [keyword('who', Str('tim', lineno=137, col_offset=33))], None, None, lineno=137, col_offset=24)], [keyword('what', Str('ham', lineno=137, col_offset=46))], None, None, lineno=137, col_offset=11), Str('tim likes ham', lineno=137, col_offset=54)], [], None, None, lineno=137, col_offset=8), lineno=137, col_offset=8), Expr(Call(Name('eq', Load(), lineno=138, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=138, col_offset=11), 'substitute', Load(), lineno=138, col_offset=11), [Call(Name('dict', Load(), lineno=138, col_offset=24), [], [keyword('who', Str('fred', lineno=138, col_offset=33)), keyword('what', Str('kung pao', lineno=138, col_offset=46))], None, None, lineno=138, col_offset=24)], [keyword('who', Str('tim', lineno=139, col_offset=28)), keyword('what', Str('ham', lineno=139, col_offset=40))], None, None, lineno=138, col_offset=11), Str('tim likes ham', lineno=140, col_offset=11)], [], None, None, lineno=138, col_offset=8), lineno=138, col_offset=8), Assign([Name('s', Store(), lineno=141, col_offset=8)], Call(Name('Template', Load(), lineno=141, col_offset=12), [Str('the mapping is $mapping', lineno=141, col_offset=21)], [], None, None, lineno=141, col_offset=12), lineno=141, col_offset=8), Expr(Call(Name('eq', Load(), lineno=142, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=142, col_offset=11), 'substitute', Load(), lineno=142, col_offset=11), [Call(Name('dict', Load(), lineno=142, col_offset=24), [], [keyword('foo', Str('none', lineno=142, col_offset=33))], None, None, lineno=142, col_offset=24)], [keyword('mapping', Str('bozo', lineno=142, col_offset=50))], None, None, lineno=142, col_offset=11), Str('the mapping is bozo', lineno=143, col_offset=11)], [], None, None, lineno=142, col_offset=8), lineno=142, col_offset=8), Expr(Call(Name('eq', Load(), lineno=144, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=144, col_offset=11), 'substitute', Load(), lineno=144, col_offset=11), [Call(Name('dict', Load(), lineno=144, col_offset=24), [], [keyword('mapping', Str('one', lineno=144, col_offset=37))], None, None, lineno=144, col_offset=24)], [keyword('mapping', Str('two', lineno=144, col_offset=53))], None, None, lineno=144, col_offset=11), Str('the mapping is two', lineno=145, col_offset=11)], [], None, None, lineno=144, col_offset=8), lineno=144, col_offset=8)], [], lineno=133, col_offset=4), FunctionDef('test_keyword_arguments_safe', arguments([Name('self', Param(), lineno=147, col_offset=36)], None, None, []), [Assign([Name('eq', Store(), lineno=148, col_offset=8)], Attribute(Name('self', Load(), lineno=148, col_offset=13), 'assertEqual', Load(), lineno=148, col_offset=13), lineno=148, col_offset=8), Assign([Name('raises', Store(), lineno=149, col_offset=8)], Attribute(Name('self', Load(), lineno=149, col_offset=17), 'assertRaises', Load(), lineno=149, col_offset=17), lineno=149, col_offset=8), Assign([Name('s', Store(), lineno=150, col_offset=8)], Call(Name('Template', Load(), lineno=150, col_offset=12), [Str('$who likes $what', lineno=150, col_offset=21)], [], None, None, lineno=150, col_offset=12), lineno=150, col_offset=8), Expr(Call(Name('eq', Load(), lineno=151, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=151, col_offset=11), 'safe_substitute', Load(), lineno=151, col_offset=11), [], [keyword('who', Str('tim', lineno=151, col_offset=33)), keyword('what', Str('ham', lineno=151, col_offset=45))], None, None, lineno=151, col_offset=11), Str('tim likes ham', lineno=151, col_offset=53)], [], None, None, lineno=151, col_offset=8), lineno=151, col_offset=8), Expr(Call(Name('eq', Load(), lineno=152, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=152, col_offset=11), 'safe_substitute', Load(), lineno=152, col_offset=11), [Call(Name('dict', Load(), lineno=152, col_offset=29), [], [keyword('who', Str('tim', lineno=152, col_offset=38))], None, None, lineno=152, col_offset=29)], [keyword('what', Str('ham', lineno=152, col_offset=51))], None, None, lineno=152, col_offset=11), Str('tim likes ham', lineno=152, col_offset=59)], [], None, None, lineno=152, col_offset=8), lineno=152, col_offset=8), Expr(Call(Name('eq', Load(), lineno=153, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=153, col_offset=11), 'safe_substitute', Load(), lineno=153, col_offset=11), [Call(Name('dict', Load(), lineno=153, col_offset=29), [], [keyword('who', Str('fred', lineno=153, col_offset=38)), keyword('what', Str('kung pao', lineno=153, col_offset=51))], None, None, lineno=153, col_offset=29)], [keyword('who', Str('tim', lineno=154, col_offset=28)), keyword('what', Str('ham', lineno=154, col_offset=40))], None, None, lineno=153, col_offset=11), Str('tim likes ham', lineno=155, col_offset=11)], [], None, None, lineno=153, col_offset=8), lineno=153, col_offset=8), Assign([Name('s', Store(), lineno=156, col_offset=8)], Call(Name('Template', Load(), lineno=156, col_offset=12), [Str('the mapping is $mapping', lineno=156, col_offset=21)], [], None, None, lineno=156, col_offset=12), lineno=156, col_offset=8), Expr(Call(Name('eq', Load(), lineno=157, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=157, col_offset=11), 'safe_substitute', Load(), lineno=157, col_offset=11), [Call(Name('dict', Load(), lineno=157, col_offset=29), [], [keyword('foo', Str('none', lineno=157, col_offset=38))], None, None, lineno=157, col_offset=29)], [keyword('mapping', Str('bozo', lineno=157, col_offset=55))], None, None, lineno=157, col_offset=11), Str('the mapping is bozo', lineno=158, col_offset=11)], [], None, None, lineno=157, col_offset=8), lineno=157, col_offset=8), Expr(Call(Name('eq', Load(), lineno=159, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=159, col_offset=11), 'safe_substitute', Load(), lineno=159, col_offset=11), [Call(Name('dict', Load(), lineno=159, col_offset=29), [], [keyword('mapping', Str('one', lineno=159, col_offset=42))], None, None, lineno=159, col_offset=29)], [keyword('mapping', Str('two', lineno=159, col_offset=58))], None, None, lineno=159, col_offset=11), Str('the mapping is two', lineno=160, col_offset=11)], [], None, None, lineno=159, col_offset=8), lineno=159, col_offset=8), Assign([Name('d', Store(), lineno=161, col_offset=8)], Call(Name('dict', Load(), lineno=161, col_offset=12), [], [keyword('mapping', Str('one', lineno=161, col_offset=25))], None, None, lineno=161, col_offset=12), lineno=161, col_offset=8), Expr(Call(Name('raises', Load(), lineno=162, col_offset=8), [Name('TypeError', Load(), lineno=162, col_offset=15), Attribute(Name('s', Load(), lineno=162, col_offset=26), 'substitute', Load(), lineno=162, col_offset=26), Name('d', Load(), lineno=162, col_offset=40), Dict([], [], lineno=162, col_offset=43)], [], None, None, lineno=162, col_offset=8), lineno=162, col_offset=8), Expr(Call(Name('raises', Load(), lineno=163, col_offset=8), [Name('TypeError', Load(), lineno=163, col_offset=15), Attribute(Name('s', Load(), lineno=163, col_offset=26), 'safe_substitute', Load(), lineno=163, col_offset=26), Name('d', Load(), lineno=163, col_offset=45), Dict([], [], lineno=163, col_offset=48)], [], None, None, lineno=163, col_offset=8), lineno=163, col_offset=8)], [], lineno=147, col_offset=4), FunctionDef('test_delimiter_override', arguments([Name('self', Param(), lineno=165, col_offset=32)], None, None, []), [Assign([Name('eq', Store(), lineno=166, col_offset=8)], Attribute(Name('self', Load(), lineno=166, col_offset=13), 'assertEqual', Load(), lineno=166, col_offset=13), lineno=166, col_offset=8), Assign([Name('raises', Store(), lineno=167, col_offset=8)], Attribute(Name('self', Load(), lineno=167, col_offset=17), 'assertRaises', Load(), lineno=167, col_offset=17), lineno=167, col_offset=8), ClassDef('AmpersandTemplate', [Name('Template', Load(), lineno=168, col_offset=32)], [Assign([Name('delimiter', Store(), lineno=169, col_offset=12)], Str('&', lineno=169, col_offset=24), lineno=169, col_offset=12)], [], lineno=168, col_offset=8), Assign([Name('s', Store(), lineno=170, col_offset=8)], Call(Name('AmpersandTemplate', Load(), lineno=170, col_offset=12), [Str('this &gift is for &{who} &&', lineno=170, col_offset=30)], [], None, None, lineno=170, col_offset=12), lineno=170, col_offset=8), Expr(Call(Name('eq', Load(), lineno=171, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=171, col_offset=11), 'substitute', Load(), lineno=171, col_offset=11), [], [keyword('gift', Str('bud', lineno=171, col_offset=29)), keyword('who', Str('you', lineno=171, col_offset=40))], None, None, lineno=171, col_offset=11), Str('this bud is for you &', lineno=171, col_offset=48)], [], None, None, lineno=171, col_offset=8), lineno=171, col_offset=8), Expr(Call(Name('raises', Load(), lineno=172, col_offset=8), [Name('KeyError', Load(), lineno=172, col_offset=15), Attribute(Name('s', Load(), lineno=172, col_offset=25), 'substitute', Load(), lineno=172, col_offset=25)], [], None, None, lineno=172, col_offset=8), lineno=172, col_offset=8), Expr(Call(Name('eq', Load(), lineno=173, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=173, col_offset=11), 'safe_substitute', Load(), lineno=173, col_offset=11), [], [keyword('gift', Str('bud', lineno=173, col_offset=34)), keyword('who', Str('you', lineno=173, col_offset=45))], None, None, lineno=173, col_offset=11), Str('this bud is for you &', lineno=173, col_offset=53)], [], None, None, lineno=173, col_offset=8), lineno=173, col_offset=8), Expr(Call(Name('eq', Load(), lineno=174, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=174, col_offset=11), 'safe_substitute', Load(), lineno=174, col_offset=11), [], [], None, None, lineno=174, col_offset=11), Str('this &gift is for &{who} &', lineno=174, col_offset=32)], [], None, None, lineno=174, col_offset=8), lineno=174, col_offset=8), Assign([Name('s', Store(), lineno=175, col_offset=8)], Call(Name('AmpersandTemplate', Load(), lineno=175, col_offset=12), [Str('this &gift is for &{who} &', lineno=175, col_offset=30)], [], None, None, lineno=175, col_offset=12), lineno=175, col_offset=8), Expr(Call(Name('raises', Load(), lineno=176, col_offset=8), [Name('ValueError', Load(), lineno=176, col_offset=15), Attribute(Name('s', Load(), lineno=176, col_offset=27), 'substitute', Load(), lineno=176, col_offset=27), Call(Name('dict', Load(), lineno=176, col_offset=41), [], [keyword('gift', Str('bud', lineno=176, col_offset=51)), keyword('who', Str('you', lineno=176, col_offset=62))], None, None, lineno=176, col_offset=41)], [], None, None, lineno=176, col_offset=8), lineno=176, col_offset=8), Expr(Call(Name('eq', Load(), lineno=177, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=177, col_offset=11), 'safe_substitute', Load(), lineno=177, col_offset=11), [], [], None, None, lineno=177, col_offset=11), Str('this &gift is for &{who} &', lineno=177, col_offset=32)], [], None, None, lineno=177, col_offset=8), lineno=177, col_offset=8), ClassDef('PieDelims', [Name('Template', Load(), lineno=179, col_offset=24)], [Assign([Name('delimiter', Store(), lineno=180, col_offset=12)], Str('@', lineno=180, col_offset=24), lineno=180, col_offset=12)], [], lineno=179, col_offset=8), Assign([Name('s', Store(), lineno=181, col_offset=8)], Call(Name('PieDelims', Load(), lineno=181, col_offset=12), [Str('@who likes to eat a bag of @{what} worth $100', lineno=181, col_offset=22)], [], None, None, lineno=181, col_offset=12), lineno=181, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=182, col_offset=8), 'assertEqual', Load(), lineno=182, col_offset=8), [Call(Attribute(Name('s', Load(), lineno=182, col_offset=25), 'substitute', Load(), lineno=182, col_offset=25), [Call(Name('dict', Load(), lineno=182, col_offset=38), [], [keyword('who', Str('tim', lineno=182, col_offset=47)), keyword('what', Str('ham', lineno=182, col_offset=59))], None, None, lineno=182, col_offset=38)], [], None, None, lineno=182, col_offset=25), Str('tim likes to eat a bag of ham worth $100', lineno=183, col_offset=25)], [], None, None, lineno=182, col_offset=8), lineno=182, col_offset=8)], [], lineno=165, col_offset=4)], [], lineno=23, col_offset=0), FunctionDef('test_main', arguments([], None, None, []), [ImportFrom('test', [alias('test_support', None)], 0, lineno=187, col_offset=4), Assign([Name('test_classes', Store(), lineno=188, col_offset=4)], List([Name('TestTemplate', Load(), lineno=188, col_offset=20)], Load(), lineno=188, col_offset=19), lineno=188, col_offset=4), Expr(Call(Attribute(Name('test_support', Load(), lineno=189, col_offset=4), 'run_unittest', Load(), lineno=189, col_offset=4), [], [], Name('test_classes', Load(), lineno=189, col_offset=31), None, lineno=189, col_offset=4), lineno=189, col_offset=4)], [], lineno=186, col_offset=0), If(Compare(Name('__name__', Load(), lineno=192, col_offset=3), [Eq()], [Str('__main__', lineno=192, col_offset=15)], lineno=192, col_offset=3), [Expr(Call(Name('test_main', Load(), lineno=193, col_offset=4), [], [], None, None, lineno=193, col_offset=4), lineno=193, col_offset=4)], [], lineno=192, col_offset=0)])
