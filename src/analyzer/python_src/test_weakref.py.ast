Module([Import([alias('gc', None)], lineno=1, col_offset=0), Import([alias('sys', None)], lineno=2, col_offset=0), Import([alias('unittest', None)], lineno=3, col_offset=0), Import([alias('UserList', None)], lineno=4, col_offset=0), Import([alias('weakref', None)], lineno=5, col_offset=0), Import([alias('operator', None)], lineno=6, col_offset=0), ImportFrom('test', [alias('test_support', None)], 0, lineno=8, col_offset=0), Assign([Name('ref_from_del', Store(), lineno=11, col_offset=0)], Name('None', Load(), lineno=11, col_offset=15), lineno=11, col_offset=0), ClassDef('C', [], [FunctionDef('method', arguments([Name('self', Param(), lineno=14, col_offset=15)], None, None, []), [Pass( lineno=15, col_offset=8)], [], lineno=14, col_offset=4)], [], lineno=13, col_offset=0), ClassDef('Callable', [], [Assign([Name('bar', Store(), lineno=19, col_offset=4)], Name('None', Load(), lineno=19, col_offset=10), lineno=19, col_offset=4), FunctionDef('__call__', arguments([Name('self', Param(), lineno=21, col_offset=17), Name('x', Param(), lineno=21, col_offset=23)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=22, col_offset=8), 'bar', Store(), lineno=22, col_offset=8)], Name('x', Load(), lineno=22, col_offset=19), lineno=22, col_offset=8)], [], lineno=21, col_offset=4)], [], lineno=18, col_offset=0), FunctionDef('create_function', arguments([], None, None, []), [FunctionDef('f', arguments([], None, None, []), [Pass( lineno=26, col_offset=13)], [], lineno=26, col_offset=4), Return(Name('f', Load(), lineno=27, col_offset=11), lineno=27, col_offset=4)], [], lineno=25, col_offset=0), FunctionDef('create_bound_method', arguments([], None, None, []), [Return(Attribute(Call(Name('C', Load(), lineno=30, col_offset=11), [], [], None, None, lineno=30, col_offset=11), 'method', Load(), lineno=30, col_offset=11), lineno=30, col_offset=4)], [], lineno=29, col_offset=0), FunctionDef('create_unbound_method', arguments([], None, None, []), [Return(Attribute(Name('C', Load(), lineno=33, col_offset=11), 'method', Load(), lineno=33, col_offset=11), lineno=33, col_offset=4)], [], lineno=32, col_offset=0), ClassDef('TestBase', [Attribute(Name('unittest', Load(), lineno=36, col_offset=15), 'TestCase', Load(), lineno=36, col_offset=15)], [FunctionDef('setUp', arguments([Name('self', Param(), lineno=38, col_offset=14)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=39, col_offset=8), 'cbcalled', Store(), lineno=39, col_offset=8)], Num(0, lineno=39, col_offset=24), lineno=39, col_offset=8)], [], lineno=38, col_offset=4), FunctionDef('callback', arguments([Name('self', Param(), lineno=41, col_offset=17), Name('ref', Param(), lineno=41, col_offset=23)], None, None, []), [AugAssign(Attribute(Name('self', Load(), lineno=42, col_offset=8), 'cbcalled', Store(), lineno=42, col_offset=8), Add(), Num(1, lineno=42, col_offset=25), lineno=42, col_offset=8)], [], lineno=41, col_offset=4)], [], lineno=36, col_offset=0), ClassDef('ReferencesTestCase', [Name('TestBase', Load(), lineno=45, col_offset=25)], [FunctionDef('test_basic_ref', arguments([Name('self', Param(), lineno=47, col_offset=23)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=48, col_offset=8), 'check_basic_ref', Load(), lineno=48, col_offset=8), [Name('C', Load(), lineno=48, col_offset=29)], [], None, None, lineno=48, col_offset=8), lineno=48, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=49, col_offset=8), 'check_basic_ref', Load(), lineno=49, col_offset=8), [Name('create_function', Load(), lineno=49, col_offset=29)], [], None, None, lineno=49, col_offset=8), lineno=49, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=50, col_offset=8), 'check_basic_ref', Load(), lineno=50, col_offset=8), [Name('create_bound_method', Load(), lineno=50, col_offset=29)], [], None, None, lineno=50, col_offset=8), lineno=50, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=51, col_offset=8), 'check_basic_ref', Load(), lineno=51, col_offset=8), [Name('create_unbound_method', Load(), lineno=51, col_offset=29)], [], None, None, lineno=51, col_offset=8), lineno=51, col_offset=8), Assign([Name('o', Store(), lineno=55, col_offset=8)], Call(Name('C', Load(), lineno=55, col_offset=12), [], [], None, None, lineno=55, col_offset=12), lineno=55, col_offset=8), Assign([Name('wr', Store(), lineno=56, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=56, col_offset=13), 'ref', Load(), lineno=56, col_offset=13), [Name('o', Load(), lineno=56, col_offset=25)], [], None, None, lineno=56, col_offset=13), lineno=56, col_offset=8), Expr(Call(Name('repr', Load(), lineno=57, col_offset=8), [Name('wr', Load(), lineno=57, col_offset=13)], [], None, None, lineno=57, col_offset=8), lineno=57, col_offset=8), Delete([Name('o', Del(), lineno=59, col_offset=12)], lineno=59, col_offset=8), Expr(Call(Name('repr', Load(), lineno=60, col_offset=8), [Name('wr', Load(), lineno=60, col_offset=13)], [], None, None, lineno=60, col_offset=8), lineno=60, col_offset=8)], [], lineno=47, col_offset=4), FunctionDef('test_basic_callback', arguments([Name('self', Param(), lineno=62, col_offset=28)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=63, col_offset=8), 'check_basic_callback', Load(), lineno=63, col_offset=8), [Name('C', Load(), lineno=63, col_offset=34)], [], None, None, lineno=63, col_offset=8), lineno=63, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=64, col_offset=8), 'check_basic_callback', Load(), lineno=64, col_offset=8), [Name('create_function', Load(), lineno=64, col_offset=34)], [], None, None, lineno=64, col_offset=8), lineno=64, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=65, col_offset=8), 'check_basic_callback', Load(), lineno=65, col_offset=8), [Name('create_bound_method', Load(), lineno=65, col_offset=34)], [], None, None, lineno=65, col_offset=8), lineno=65, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=66, col_offset=8), 'check_basic_callback', Load(), lineno=66, col_offset=8), [Name('create_unbound_method', Load(), lineno=66, col_offset=34)], [], None, None, lineno=66, col_offset=8), lineno=66, col_offset=8)], [], lineno=62, col_offset=4), FunctionDef('test_multiple_callbacks', arguments([Name('self', Param(), lineno=68, col_offset=32)], None, None, []), [Assign([Name('o', Store(), lineno=69, col_offset=8)], Call(Name('C', Load(), lineno=69, col_offset=12), [], [], None, None, lineno=69, col_offset=12), lineno=69, col_offset=8), Assign([Name('ref1', Store(), lineno=70, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=70, col_offset=15), 'ref', Load(), lineno=70, col_offset=15), [Name('o', Load(), lineno=70, col_offset=27), Attribute(Name('self', Load(), lineno=70, col_offset=30), 'callback', Load(), lineno=70, col_offset=30)], [], None, None, lineno=70, col_offset=15), lineno=70, col_offset=8), Assign([Name('ref2', Store(), lineno=71, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=71, col_offset=15), 'ref', Load(), lineno=71, col_offset=15), [Name('o', Load(), lineno=71, col_offset=27), Attribute(Name('self', Load(), lineno=71, col_offset=30), 'callback', Load(), lineno=71, col_offset=30)], [], None, None, lineno=71, col_offset=15), lineno=71, col_offset=8), Delete([Name('o', Del(), lineno=72, col_offset=12)], lineno=72, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=73, col_offset=8), 'assertTrue', Load(), lineno=73, col_offset=8), [Compare(Call(Name('ref1', Load(), lineno=73, col_offset=24), [], [], None, None, lineno=73, col_offset=24), [Is()], [Name('None', Load(), lineno=73, col_offset=34)], lineno=73, col_offset=24), Str('expected reference to be invalidated', lineno=74, col_offset=21)], [], None, None, lineno=73, col_offset=8), lineno=73, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=75, col_offset=8), 'assertTrue', Load(), lineno=75, col_offset=8), [Compare(Call(Name('ref2', Load(), lineno=75, col_offset=24), [], [], None, None, lineno=75, col_offset=24), [Is()], [Name('None', Load(), lineno=75, col_offset=34)], lineno=75, col_offset=24), Str('expected reference to be invalidated', lineno=76, col_offset=21)], [], None, None, lineno=75, col_offset=8), lineno=75, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=77, col_offset=8), 'assertTrue', Load(), lineno=77, col_offset=8), [Compare(Attribute(Name('self', Load(), lineno=77, col_offset=24), 'cbcalled', Load(), lineno=77, col_offset=24), [Eq()], [Num(2, lineno=77, col_offset=41)], lineno=77, col_offset=24), Str('callback not called the right number of times', lineno=78, col_offset=21)], [], None, None, lineno=77, col_offset=8), lineno=77, col_offset=8)], [], lineno=68, col_offset=4), FunctionDef('test_multiple_selfref_callbacks', arguments([Name('self', Param(), lineno=80, col_offset=40)], None, None, []), [FunctionDef('callback', arguments([Name('object', Param(), lineno=91, col_offset=21), Name('self', Param(), lineno=91, col_offset=29)], None, None, [Name('self', Load(), lineno=91, col_offset=34)]), [Expr(Call(Attribute(Name('self', Load(), lineno=92, col_offset=12), 'ref', Load(), lineno=92, col_offset=12), [], [], None, None, lineno=92, col_offset=12), lineno=92, col_offset=12)], [], lineno=91, col_offset=8), Assign([Name('c', Store(), lineno=93, col_offset=8)], Call(Name('C', Load(), lineno=93, col_offset=12), [], [], None, None, lineno=93, col_offset=12), lineno=93, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=94, col_offset=8), 'ref', Store(), lineno=94, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=94, col_offset=19), 'ref', Load(), lineno=94, col_offset=19), [Name('c', Load(), lineno=94, col_offset=31), Name('callback', Load(), lineno=94, col_offset=34)], [], None, None, lineno=94, col_offset=19), lineno=94, col_offset=8), Assign([Name('ref1', Store(), lineno=95, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=95, col_offset=15), 'ref', Load(), lineno=95, col_offset=15), [Name('c', Load(), lineno=95, col_offset=27), Name('callback', Load(), lineno=95, col_offset=30)], [], None, None, lineno=95, col_offset=15), lineno=95, col_offset=8), Delete([Name('c', Del(), lineno=96, col_offset=12)], lineno=96, col_offset=8)], [], lineno=80, col_offset=4), FunctionDef('test_proxy_ref', arguments([Name('self', Param(), lineno=98, col_offset=23)], None, None, []), [Assign([Name('o', Store(), lineno=99, col_offset=8)], Call(Name('C', Load(), lineno=99, col_offset=12), [], [], None, None, lineno=99, col_offset=12), lineno=99, col_offset=8), Assign([Attribute(Name('o', Load(), lineno=100, col_offset=8), 'bar', Store(), lineno=100, col_offset=8)], Num(1, lineno=100, col_offset=16), lineno=100, col_offset=8), Assign([Name('ref1', Store(), lineno=101, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=101, col_offset=15), 'proxy', Load(), lineno=101, col_offset=15), [Name('o', Load(), lineno=101, col_offset=29), Attribute(Name('self', Load(), lineno=101, col_offset=32), 'callback', Load(), lineno=101, col_offset=32)], [], None, None, lineno=101, col_offset=15), lineno=101, col_offset=8), Assign([Name('ref2', Store(), lineno=102, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=102, col_offset=15), 'proxy', Load(), lineno=102, col_offset=15), [Name('o', Load(), lineno=102, col_offset=29), Attribute(Name('self', Load(), lineno=102, col_offset=32), 'callback', Load(), lineno=102, col_offset=32)], [], None, None, lineno=102, col_offset=15), lineno=102, col_offset=8), Delete([Name('o', Del(), lineno=103, col_offset=12)], lineno=103, col_offset=8), FunctionDef('check', arguments([Name('proxy', Param(), lineno=105, col_offset=18)], None, None, []), [Expr(Attribute(Name('proxy', Load(), lineno=106, col_offset=12), 'bar', Load(), lineno=106, col_offset=12), lineno=106, col_offset=12)], [], lineno=105, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=108, col_offset=8), 'assertRaises', Load(), lineno=108, col_offset=8), [Attribute(Name('weakref', Load(), lineno=108, col_offset=26), 'ReferenceError', Load(), lineno=108, col_offset=26), Name('check', Load(), lineno=108, col_offset=50), Name('ref1', Load(), lineno=108, col_offset=57)], [], None, None, lineno=108, col_offset=8), lineno=108, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=109, col_offset=8), 'assertRaises', Load(), lineno=109, col_offset=8), [Attribute(Name('weakref', Load(), lineno=109, col_offset=26), 'ReferenceError', Load(), lineno=109, col_offset=26), Name('check', Load(), lineno=109, col_offset=50), Name('ref2', Load(), lineno=109, col_offset=57)], [], None, None, lineno=109, col_offset=8), lineno=109, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=110, col_offset=8), 'assertRaises', Load(), lineno=110, col_offset=8), [Attribute(Name('weakref', Load(), lineno=110, col_offset=26), 'ReferenceError', Load(), lineno=110, col_offset=26), Name('bool', Load(), lineno=110, col_offset=50), Call(Attribute(Name('weakref', Load(), lineno=110, col_offset=56), 'proxy', Load(), lineno=110, col_offset=56), [Call(Name('C', Load(), lineno=110, col_offset=70), [], [], None, None, lineno=110, col_offset=70)], [], None, None, lineno=110, col_offset=56)], [], None, None, lineno=110, col_offset=8), lineno=110, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=111, col_offset=8), 'assertTrue', Load(), lineno=111, col_offset=8), [Compare(Attribute(Name('self', Load(), lineno=111, col_offset=24), 'cbcalled', Load(), lineno=111, col_offset=24), [Eq()], [Num(2, lineno=111, col_offset=41)], lineno=111, col_offset=24)], [], None, None, lineno=111, col_offset=8), lineno=111, col_offset=8)], [], lineno=98, col_offset=4), FunctionDef('check_basic_ref', arguments([Name('self', Param(), lineno=113, col_offset=24), Name('factory', Param(), lineno=113, col_offset=30)], None, None, []), [Assign([Name('o', Store(), lineno=114, col_offset=8)], Call(Name('factory', Load(), lineno=114, col_offset=12), [], [], None, None, lineno=114, col_offset=12), lineno=114, col_offset=8), Assign([Name('ref', Store(), lineno=115, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=115, col_offset=14), 'ref', Load(), lineno=115, col_offset=14), [Name('o', Load(), lineno=115, col_offset=26)], [], None, None, lineno=115, col_offset=14), lineno=115, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=116, col_offset=8), 'assertTrue', Load(), lineno=116, col_offset=8), [Compare(Call(Name('ref', Load(), lineno=116, col_offset=24), [], [], None, None, lineno=116, col_offset=24), [IsNot()], [Name('None', Load(), lineno=116, col_offset=37)], lineno=116, col_offset=24), Str('weak reference to live object should be live', lineno=117, col_offset=21)], [], None, None, lineno=116, col_offset=8), lineno=116, col_offset=8), Assign([Name('o2', Store(), lineno=118, col_offset=8)], Call(Name('ref', Load(), lineno=118, col_offset=13), [], [], None, None, lineno=118, col_offset=13), lineno=118, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=119, col_offset=8), 'assertTrue', Load(), lineno=119, col_offset=8), [Compare(Name('o', Load(), lineno=119, col_offset=24), [Is()], [Name('o2', Load(), lineno=119, col_offset=29)], lineno=119, col_offset=24), Str('<ref>() should return original object if live', lineno=120, col_offset=21)], [], None, None, lineno=119, col_offset=8), lineno=119, col_offset=8)], [], lineno=113, col_offset=4), FunctionDef('check_basic_callback', arguments([Name('self', Param(), lineno=122, col_offset=29), Name('factory', Param(), lineno=122, col_offset=35)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=123, col_offset=8), 'cbcalled', Store(), lineno=123, col_offset=8)], Num(0, lineno=123, col_offset=24), lineno=123, col_offset=8), Assign([Name('o', Store(), lineno=124, col_offset=8)], Call(Name('factory', Load(), lineno=124, col_offset=12), [], [], None, None, lineno=124, col_offset=12), lineno=124, col_offset=8), Assign([Name('ref', Store(), lineno=125, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=125, col_offset=14), 'ref', Load(), lineno=125, col_offset=14), [Name('o', Load(), lineno=125, col_offset=26), Attribute(Name('self', Load(), lineno=125, col_offset=29), 'callback', Load(), lineno=125, col_offset=29)], [], None, None, lineno=125, col_offset=14), lineno=125, col_offset=8), Delete([Name('o', Del(), lineno=126, col_offset=12)], lineno=126, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=127, col_offset=8), 'assertTrue', Load(), lineno=127, col_offset=8), [Compare(Attribute(Name('self', Load(), lineno=127, col_offset=24), 'cbcalled', Load(), lineno=127, col_offset=24), [Eq()], [Num(1, lineno=127, col_offset=41)], lineno=127, col_offset=24), Str("callback did not properly set 'cbcalled'", lineno=128, col_offset=21)], [], None, None, lineno=127, col_offset=8), lineno=127, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=129, col_offset=8), 'assertTrue', Load(), lineno=129, col_offset=8), [Compare(Call(Name('ref', Load(), lineno=129, col_offset=24), [], [], None, None, lineno=129, col_offset=24), [Is()], [Name('None', Load(), lineno=129, col_offset=33)], lineno=129, col_offset=24), Str('ref2 should be dead after deleting object reference', lineno=130, col_offset=21)], [], None, None, lineno=129, col_offset=8), lineno=129, col_offset=8)], [], lineno=122, col_offset=4), FunctionDef('test_ref_reuse', arguments([Name('self', Param(), lineno=132, col_offset=23)], None, None, []), [Assign([Name('o', Store(), lineno=133, col_offset=8)], Call(Name('C', Load(), lineno=133, col_offset=12), [], [], None, None, lineno=133, col_offset=12), lineno=133, col_offset=8), Assign([Name('ref1', Store(), lineno=134, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=134, col_offset=15), 'ref', Load(), lineno=134, col_offset=15), [Name('o', Load(), lineno=134, col_offset=27)], [], None, None, lineno=134, col_offset=15), lineno=134, col_offset=8), Assign([Name('proxy', Store(), lineno=137, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=137, col_offset=16), 'proxy', Load(), lineno=137, col_offset=16), [Name('o', Load(), lineno=137, col_offset=30)], [], None, None, lineno=137, col_offset=16), lineno=137, col_offset=8), Assign([Name('ref2', Store(), lineno=138, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=138, col_offset=15), 'ref', Load(), lineno=138, col_offset=15), [Name('o', Load(), lineno=138, col_offset=27)], [], None, None, lineno=138, col_offset=15), lineno=138, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=139, col_offset=8), 'assertTrue', Load(), lineno=139, col_offset=8), [Compare(Name('ref1', Load(), lineno=139, col_offset=24), [Is()], [Name('ref2', Load(), lineno=139, col_offset=32)], lineno=139, col_offset=24), Str('reference object w/out callback should be re-used', lineno=140, col_offset=21)], [], None, None, lineno=139, col_offset=8), lineno=139, col_offset=8), Assign([Name('o', Store(), lineno=142, col_offset=8)], Call(Name('C', Load(), lineno=142, col_offset=12), [], [], None, None, lineno=142, col_offset=12), lineno=142, col_offset=8), Assign([Name('proxy', Store(), lineno=143, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=143, col_offset=16), 'proxy', Load(), lineno=143, col_offset=16), [Name('o', Load(), lineno=143, col_offset=30)], [], None, None, lineno=143, col_offset=16), lineno=143, col_offset=8), Assign([Name('ref1', Store(), lineno=144, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=144, col_offset=15), 'ref', Load(), lineno=144, col_offset=15), [Name('o', Load(), lineno=144, col_offset=27)], [], None, None, lineno=144, col_offset=15), lineno=144, col_offset=8), Assign([Name('ref2', Store(), lineno=145, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=145, col_offset=15), 'ref', Load(), lineno=145, col_offset=15), [Name('o', Load(), lineno=145, col_offset=27)], [], None, None, lineno=145, col_offset=15), lineno=145, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=146, col_offset=8), 'assertTrue', Load(), lineno=146, col_offset=8), [Compare(Name('ref1', Load(), lineno=146, col_offset=24), [Is()], [Name('ref2', Load(), lineno=146, col_offset=32)], lineno=146, col_offset=24), Str('reference object w/out callback should be re-used', lineno=147, col_offset=21)], [], None, None, lineno=146, col_offset=8), lineno=146, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=148, col_offset=8), 'assertTrue', Load(), lineno=148, col_offset=8), [Compare(Call(Attribute(Name('weakref', Load(), lineno=148, col_offset=24), 'getweakrefcount', Load(), lineno=148, col_offset=24), [Name('o', Load(), lineno=148, col_offset=48)], [], None, None, lineno=148, col_offset=24), [Eq()], [Num(2, lineno=148, col_offset=54)], lineno=148, col_offset=24), Str('wrong weak ref count for object', lineno=149, col_offset=21)], [], None, None, lineno=148, col_offset=8), lineno=148, col_offset=8), Delete([Name('proxy', Del(), lineno=150, col_offset=12)], lineno=150, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=151, col_offset=8), 'assertTrue', Load(), lineno=151, col_offset=8), [Compare(Call(Attribute(Name('weakref', Load(), lineno=151, col_offset=24), 'getweakrefcount', Load(), lineno=151, col_offset=24), [Name('o', Load(), lineno=151, col_offset=48)], [], None, None, lineno=151, col_offset=24), [Eq()], [Num(1, lineno=151, col_offset=54)], lineno=151, col_offset=24), Str('wrong weak ref count for object after deleting proxy', lineno=152, col_offset=21)], [], None, None, lineno=151, col_offset=8), lineno=151, col_offset=8)], [], lineno=132, col_offset=4), FunctionDef('test_proxy_reuse', arguments([Name('self', Param(), lineno=154, col_offset=25)], None, None, []), [Assign([Name('o', Store(), lineno=155, col_offset=8)], Call(Name('C', Load(), lineno=155, col_offset=12), [], [], None, None, lineno=155, col_offset=12), lineno=155, col_offset=8), Assign([Name('proxy1', Store(), lineno=156, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=156, col_offset=17), 'proxy', Load(), lineno=156, col_offset=17), [Name('o', Load(), lineno=156, col_offset=31)], [], None, None, lineno=156, col_offset=17), lineno=156, col_offset=8), Assign([Name('ref', Store(), lineno=157, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=157, col_offset=14), 'ref', Load(), lineno=157, col_offset=14), [Name('o', Load(), lineno=157, col_offset=26)], [], None, None, lineno=157, col_offset=14), lineno=157, col_offset=8), Assign([Name('proxy2', Store(), lineno=158, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=158, col_offset=17), 'proxy', Load(), lineno=158, col_offset=17), [Name('o', Load(), lineno=158, col_offset=31)], [], None, None, lineno=158, col_offset=17), lineno=158, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=159, col_offset=8), 'assertTrue', Load(), lineno=159, col_offset=8), [Compare(Name('proxy1', Load(), lineno=159, col_offset=24), [Is()], [Name('proxy2', Load(), lineno=159, col_offset=34)], lineno=159, col_offset=24), Str('proxy object w/out callback should have been re-used', lineno=160, col_offset=21)], [], None, None, lineno=159, col_offset=8), lineno=159, col_offset=8)], [], lineno=154, col_offset=4), FunctionDef('test_basic_proxy', arguments([Name('self', Param(), lineno=162, col_offset=25)], None, None, []), [Assign([Name('o', Store(), lineno=163, col_offset=8)], Call(Name('C', Load(), lineno=163, col_offset=12), [], [], None, None, lineno=163, col_offset=12), lineno=163, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=164, col_offset=8), 'check_proxy', Load(), lineno=164, col_offset=8), [Name('o', Load(), lineno=164, col_offset=25), Call(Attribute(Name('weakref', Load(), lineno=164, col_offset=28), 'proxy', Load(), lineno=164, col_offset=28), [Name('o', Load(), lineno=164, col_offset=42)], [], None, None, lineno=164, col_offset=28)], [], None, None, lineno=164, col_offset=8), lineno=164, col_offset=8), Assign([Name('L', Store(), lineno=166, col_offset=8)], Call(Attribute(Name('UserList', Load(), lineno=166, col_offset=12), 'UserList', Load(), lineno=166, col_offset=12), [], [], None, None, lineno=166, col_offset=12), lineno=166, col_offset=8), Assign([Name('p', Store(), lineno=167, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=167, col_offset=12), 'proxy', Load(), lineno=167, col_offset=12), [Name('L', Load(), lineno=167, col_offset=26)], [], None, None, lineno=167, col_offset=12), lineno=167, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=168, col_offset=8), 'assertFalse', Load(), lineno=168, col_offset=8), [Name('p', Load(), lineno=168, col_offset=25), Str('proxy for empty UserList should be false', lineno=168, col_offset=28)], [], None, None, lineno=168, col_offset=8), lineno=168, col_offset=8), Expr(Call(Attribute(Name('p', Load(), lineno=169, col_offset=8), 'append', Load(), lineno=169, col_offset=8), [Num(12, lineno=169, col_offset=17)], [], None, None, lineno=169, col_offset=8), lineno=169, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=170, col_offset=8), 'assertEqual', Load(), lineno=170, col_offset=8), [Call(Name('len', Load(), lineno=170, col_offset=25), [Name('L', Load(), lineno=170, col_offset=29)], [], None, None, lineno=170, col_offset=25), Num(1, lineno=170, col_offset=33)], [], None, None, lineno=170, col_offset=8), lineno=170, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=171, col_offset=8), 'assertTrue', Load(), lineno=171, col_offset=8), [Name('p', Load(), lineno=171, col_offset=24), Str('proxy for non-empty UserList should be true', lineno=171, col_offset=27)], [], None, None, lineno=171, col_offset=8), lineno=171, col_offset=8), With(Call(Attribute(Name('test_support', Load(), lineno=172, col_offset=13), 'check_py3k_warnings', Load(), lineno=172, col_offset=13), [], [], None, None, lineno=172, col_offset=13), None, [Assign([Subscript(Name('p', Load(), lineno=173, col_offset=12), Slice(None, None, None), Store(), lineno=173, col_offset=12)], List([Num(2, lineno=173, col_offset=20), Num(3, lineno=173, col_offset=23)], Load(), lineno=173, col_offset=19), lineno=173, col_offset=12)], lineno=172, col_offset=13), Expr(Call(Attribute(Name('self', Load(), lineno=174, col_offset=8), 'assertEqual', Load(), lineno=174, col_offset=8), [Call(Name('len', Load(), lineno=174, col_offset=25), [Name('L', Load(), lineno=174, col_offset=29)], [], None, None, lineno=174, col_offset=25), Num(2, lineno=174, col_offset=33)], [], None, None, lineno=174, col_offset=8), lineno=174, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=175, col_offset=8), 'assertEqual', Load(), lineno=175, col_offset=8), [Call(Name('len', Load(), lineno=175, col_offset=25), [Name('p', Load(), lineno=175, col_offset=29)], [], None, None, lineno=175, col_offset=25), Num(2, lineno=175, col_offset=33)], [], None, None, lineno=175, col_offset=8), lineno=175, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=176, col_offset=8), 'assertIn', Load(), lineno=176, col_offset=8), [Num(3, lineno=176, col_offset=22), Name('p', Load(), lineno=176, col_offset=25), Str("proxy didn't support __contains__() properly", lineno=176, col_offset=28)], [], None, None, lineno=176, col_offset=8), lineno=176, col_offset=8), Assign([Subscript(Name('p', Load(), lineno=177, col_offset=8), Index(Num(1, lineno=177, col_offset=10)), Store(), lineno=177, col_offset=8)], Num(5, lineno=177, col_offset=15), lineno=177, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=178, col_offset=8), 'assertEqual', Load(), lineno=178, col_offset=8), [Subscript(Name('L', Load(), lineno=178, col_offset=25), Index(Num(1, lineno=178, col_offset=27)), Load(), lineno=178, col_offset=25), Num(5, lineno=178, col_offset=31)], [], None, None, lineno=178, col_offset=8), lineno=178, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=179, col_offset=8), 'assertEqual', Load(), lineno=179, col_offset=8), [Subscript(Name('p', Load(), lineno=179, col_offset=25), Index(Num(1, lineno=179, col_offset=27)), Load(), lineno=179, col_offset=25), Num(5, lineno=179, col_offset=31)], [], None, None, lineno=179, col_offset=8), lineno=179, col_offset=8), Assign([Name('L2', Store(), lineno=180, col_offset=8)], Call(Attribute(Name('UserList', Load(), lineno=180, col_offset=13), 'UserList', Load(), lineno=180, col_offset=13), [Name('L', Load(), lineno=180, col_offset=31)], [], None, None, lineno=180, col_offset=13), lineno=180, col_offset=8), Assign([Name('p2', Store(), lineno=181, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=181, col_offset=13), 'proxy', Load(), lineno=181, col_offset=13), [Name('L2', Load(), lineno=181, col_offset=27)], [], None, None, lineno=181, col_offset=13), lineno=181, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=182, col_offset=8), 'assertEqual', Load(), lineno=182, col_offset=8), [Name('p', Load(), lineno=182, col_offset=25), Name('p2', Load(), lineno=182, col_offset=28)], [], None, None, lineno=182, col_offset=8), lineno=182, col_offset=8), Assign([Name('L3', Store(), lineno=184, col_offset=8)], Call(Attribute(Name('UserList', Load(), lineno=184, col_offset=13), 'UserList', Load(), lineno=184, col_offset=13), [Call(Name('range', Load(), lineno=184, col_offset=31), [Num(10, lineno=184, col_offset=37)], [], None, None, lineno=184, col_offset=31)], [], None, None, lineno=184, col_offset=13), lineno=184, col_offset=8), Assign([Name('p3', Store(), lineno=185, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=185, col_offset=13), 'proxy', Load(), lineno=185, col_offset=13), [Name('L3', Load(), lineno=185, col_offset=27)], [], None, None, lineno=185, col_offset=13), lineno=185, col_offset=8), With(Call(Attribute(Name('test_support', Load(), lineno=186, col_offset=13), 'check_py3k_warnings', Load(), lineno=186, col_offset=13), [], [], None, None, lineno=186, col_offset=13), None, [Expr(Call(Attribute(Name('self', Load(), lineno=187, col_offset=12), 'assertEqual', Load(), lineno=187, col_offset=12), [Subscript(Name('L3', Load(), lineno=187, col_offset=29), Slice(None, None, None), Load(), lineno=187, col_offset=29), Subscript(Name('p3', Load(), lineno=187, col_offset=36), Slice(None, None, None), Load(), lineno=187, col_offset=36)], [], None, None, lineno=187, col_offset=12), lineno=187, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=188, col_offset=12), 'assertEqual', Load(), lineno=188, col_offset=12), [Subscript(Name('L3', Load(), lineno=188, col_offset=29), Slice(Num(5, lineno=188, col_offset=32), None, None), Load(), lineno=188, col_offset=29), Subscript(Name('p3', Load(), lineno=188, col_offset=37), Slice(Num(5, lineno=188, col_offset=40), None, None), Load(), lineno=188, col_offset=37)], [], None, None, lineno=188, col_offset=12), lineno=188, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=189, col_offset=12), 'assertEqual', Load(), lineno=189, col_offset=12), [Subscript(Name('L3', Load(), lineno=189, col_offset=29), Slice(None, Num(5, lineno=189, col_offset=33), None), Load(), lineno=189, col_offset=29), Subscript(Name('p3', Load(), lineno=189, col_offset=37), Slice(None, Num(5, lineno=189, col_offset=41), None), Load(), lineno=189, col_offset=37)], [], None, None, lineno=189, col_offset=12), lineno=189, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=190, col_offset=12), 'assertEqual', Load(), lineno=190, col_offset=12), [Subscript(Name('L3', Load(), lineno=190, col_offset=29), Slice(Num(2, lineno=190, col_offset=32), Num(5, lineno=190, col_offset=34), None), Load(), lineno=190, col_offset=29), Subscript(Name('p3', Load(), lineno=190, col_offset=38), Slice(Num(2, lineno=190, col_offset=41), Num(5, lineno=190, col_offset=43), None), Load(), lineno=190, col_offset=38)], [], None, None, lineno=190, col_offset=12), lineno=190, col_offset=12)], lineno=186, col_offset=13)], [], lineno=162, col_offset=4), FunctionDef('test_proxy_unicode', arguments([Name('self', Param(), lineno=192, col_offset=27)], None, None, []), [ClassDef('C', [Name('object', Load(), lineno=194, col_offset=16)], [FunctionDef('__str__', arguments([Name('self', Param(), lineno=195, col_offset=24)], None, None, []), [Return(Str('string', lineno=196, col_offset=23), lineno=196, col_offset=16)], [], lineno=195, col_offset=12), FunctionDef('__unicode__', arguments([Name('self', Param(), lineno=197, col_offset=28)], None, None, []), [Return(Str(u'unicode', lineno=198, col_offset=23), lineno=198, col_offset=16)], [], lineno=197, col_offset=12)], [], lineno=194, col_offset=8), Assign([Name('instance', Store(), lineno=199, col_offset=8)], Call(Name('C', Load(), lineno=199, col_offset=19), [], [], None, None, lineno=199, col_offset=19), lineno=199, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=200, col_offset=8), 'assertIn', Load(), lineno=200, col_offset=8), [Str('__unicode__', lineno=200, col_offset=22), Call(Name('dir', Load(), lineno=200, col_offset=37), [Call(Attribute(Name('weakref', Load(), lineno=200, col_offset=41), 'proxy', Load(), lineno=200, col_offset=41), [Name('instance', Load(), lineno=200, col_offset=55)], [], None, None, lineno=200, col_offset=41)], [], None, None, lineno=200, col_offset=37)], [], None, None, lineno=200, col_offset=8), lineno=200, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=201, col_offset=8), 'assertEqual', Load(), lineno=201, col_offset=8), [Call(Name('unicode', Load(), lineno=201, col_offset=25), [Call(Attribute(Name('weakref', Load(), lineno=201, col_offset=33), 'proxy', Load(), lineno=201, col_offset=33), [Name('instance', Load(), lineno=201, col_offset=47)], [], None, None, lineno=201, col_offset=33)], [], None, None, lineno=201, col_offset=25), Str(u'unicode', lineno=201, col_offset=59)], [], None, None, lineno=201, col_offset=8), lineno=201, col_offset=8)], [], lineno=192, col_offset=4), FunctionDef('test_proxy_index', arguments([Name('self', Param(), lineno=203, col_offset=25)], None, None, []), [ClassDef('C', [], [FunctionDef('__index__', arguments([Name('self', Param(), lineno=205, col_offset=26)], None, None, []), [Return(Num(10, lineno=206, col_offset=23), lineno=206, col_offset=16)], [], lineno=205, col_offset=12)], [], lineno=204, col_offset=8), Assign([Name('o', Store(), lineno=207, col_offset=8)], Call(Name('C', Load(), lineno=207, col_offset=12), [], [], None, None, lineno=207, col_offset=12), lineno=207, col_offset=8), Assign([Name('p', Store(), lineno=208, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=208, col_offset=12), 'proxy', Load(), lineno=208, col_offset=12), [Name('o', Load(), lineno=208, col_offset=26)], [], None, None, lineno=208, col_offset=12), lineno=208, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=209, col_offset=8), 'assertEqual', Load(), lineno=209, col_offset=8), [Call(Attribute(Name('operator', Load(), lineno=209, col_offset=25), 'index', Load(), lineno=209, col_offset=25), [Name('p', Load(), lineno=209, col_offset=40)], [], None, None, lineno=209, col_offset=25), Num(10, lineno=209, col_offset=44)], [], None, None, lineno=209, col_offset=8), lineno=209, col_offset=8)], [], lineno=203, col_offset=4), FunctionDef('test_proxy_div', arguments([Name('self', Param(), lineno=211, col_offset=23)], None, None, []), [ClassDef('C', [], [FunctionDef('__floordiv__', arguments([Name('self', Param(), lineno=213, col_offset=29), Name('other', Param(), lineno=213, col_offset=35)], None, None, []), [Return(Num(42, lineno=214, col_offset=23), lineno=214, col_offset=16)], [], lineno=213, col_offset=12), FunctionDef('__ifloordiv__', arguments([Name('self', Param(), lineno=215, col_offset=30), Name('other', Param(), lineno=215, col_offset=36)], None, None, []), [Return(Num(21, lineno=216, col_offset=23), lineno=216, col_offset=16)], [], lineno=215, col_offset=12)], [], lineno=212, col_offset=8), Assign([Name('o', Store(), lineno=217, col_offset=8)], Call(Name('C', Load(), lineno=217, col_offset=12), [], [], None, None, lineno=217, col_offset=12), lineno=217, col_offset=8), Assign([Name('p', Store(), lineno=218, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=218, col_offset=12), 'proxy', Load(), lineno=218, col_offset=12), [Name('o', Load(), lineno=218, col_offset=26)], [], None, None, lineno=218, col_offset=12), lineno=218, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=219, col_offset=8), 'assertEqual', Load(), lineno=219, col_offset=8), [BinOp(Name('p', Load(), lineno=219, col_offset=25), FloorDiv(), Num(5, lineno=219, col_offset=30), lineno=219, col_offset=25), Num(42, lineno=219, col_offset=33)], [], None, None, lineno=219, col_offset=8), lineno=219, col_offset=8), AugAssign(Name('p', Store(), lineno=220, col_offset=8), FloorDiv(), Num(5, lineno=220, col_offset=14), lineno=220, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=221, col_offset=8), 'assertEqual', Load(), lineno=221, col_offset=8), [Name('p', Load(), lineno=221, col_offset=25), Num(21, lineno=221, col_offset=28)], [], None, None, lineno=221, col_offset=8), lineno=221, col_offset=8)], [], lineno=211, col_offset=4), FunctionDef('test_shared_ref_without_callback', arguments([Name('self', Param(), lineno=231, col_offset=41)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=232, col_offset=8), 'check_shared_without_callback', Load(), lineno=232, col_offset=8), [Attribute(Name('weakref', Load(), lineno=232, col_offset=43), 'ref', Load(), lineno=232, col_offset=43)], [], None, None, lineno=232, col_offset=8), lineno=232, col_offset=8)], [], lineno=231, col_offset=4), FunctionDef('test_shared_proxy_without_callback', arguments([Name('self', Param(), lineno=234, col_offset=43)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=235, col_offset=8), 'check_shared_without_callback', Load(), lineno=235, col_offset=8), [Attribute(Name('weakref', Load(), lineno=235, col_offset=43), 'proxy', Load(), lineno=235, col_offset=43)], [], None, None, lineno=235, col_offset=8), lineno=235, col_offset=8)], [], lineno=234, col_offset=4), FunctionDef('check_shared_without_callback', arguments([Name('self', Param(), lineno=237, col_offset=38), Name('makeref', Param(), lineno=237, col_offset=44)], None, None, []), [Assign([Name('o', Store(), lineno=238, col_offset=8)], Call(Name('Object', Load(), lineno=238, col_offset=12), [Num(1, lineno=238, col_offset=19)], [], None, None, lineno=238, col_offset=12), lineno=238, col_offset=8), Assign([Name('p1', Store(), lineno=239, col_offset=8)], Call(Name('makeref', Load(), lineno=239, col_offset=13), [Name('o', Load(), lineno=239, col_offset=21), Name('None', Load(), lineno=239, col_offset=24)], [], None, None, lineno=239, col_offset=13), lineno=239, col_offset=8), Assign([Name('p2', Store(), lineno=240, col_offset=8)], Call(Name('makeref', Load(), lineno=240, col_offset=13), [Name('o', Load(), lineno=240, col_offset=21), Name('None', Load(), lineno=240, col_offset=24)], [], None, None, lineno=240, col_offset=13), lineno=240, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=241, col_offset=8), 'assertTrue', Load(), lineno=241, col_offset=8), [Compare(Name('p1', Load(), lineno=241, col_offset=24), [Is()], [Name('p2', Load(), lineno=241, col_offset=30)], lineno=241, col_offset=24), Str('both callbacks were None in the C API', lineno=241, col_offset=34)], [], None, None, lineno=241, col_offset=8), lineno=241, col_offset=8), Delete([Name('p1', Del(), lineno=242, col_offset=12), Name('p2', Del(), lineno=242, col_offset=16)], lineno=242, col_offset=8), Assign([Name('p1', Store(), lineno=243, col_offset=8)], Call(Name('makeref', Load(), lineno=243, col_offset=13), [Name('o', Load(), lineno=243, col_offset=21)], [], None, None, lineno=243, col_offset=13), lineno=243, col_offset=8), Assign([Name('p2', Store(), lineno=244, col_offset=8)], Call(Name('makeref', Load(), lineno=244, col_offset=13), [Name('o', Load(), lineno=244, col_offset=21), Name('None', Load(), lineno=244, col_offset=24)], [], None, None, lineno=244, col_offset=13), lineno=244, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=245, col_offset=8), 'assertTrue', Load(), lineno=245, col_offset=8), [Compare(Name('p1', Load(), lineno=245, col_offset=24), [Is()], [Name('p2', Load(), lineno=245, col_offset=30)], lineno=245, col_offset=24), Str('callbacks were NULL, None in the C API', lineno=245, col_offset=34)], [], None, None, lineno=245, col_offset=8), lineno=245, col_offset=8), Delete([Name('p1', Del(), lineno=246, col_offset=12), Name('p2', Del(), lineno=246, col_offset=16)], lineno=246, col_offset=8), Assign([Name('p1', Store(), lineno=247, col_offset=8)], Call(Name('makeref', Load(), lineno=247, col_offset=13), [Name('o', Load(), lineno=247, col_offset=21)], [], None, None, lineno=247, col_offset=13), lineno=247, col_offset=8), Assign([Name('p2', Store(), lineno=248, col_offset=8)], Call(Name('makeref', Load(), lineno=248, col_offset=13), [Name('o', Load(), lineno=248, col_offset=21)], [], None, None, lineno=248, col_offset=13), lineno=248, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=249, col_offset=8), 'assertTrue', Load(), lineno=249, col_offset=8), [Compare(Name('p1', Load(), lineno=249, col_offset=24), [Is()], [Name('p2', Load(), lineno=249, col_offset=30)], lineno=249, col_offset=24), Str('both callbacks were NULL in the C API', lineno=249, col_offset=34)], [], None, None, lineno=249, col_offset=8), lineno=249, col_offset=8), Delete([Name('p1', Del(), lineno=250, col_offset=12), Name('p2', Del(), lineno=250, col_offset=16)], lineno=250, col_offset=8), Assign([Name('p1', Store(), lineno=251, col_offset=8)], Call(Name('makeref', Load(), lineno=251, col_offset=13), [Name('o', Load(), lineno=251, col_offset=21), Name('None', Load(), lineno=251, col_offset=24)], [], None, None, lineno=251, col_offset=13), lineno=251, col_offset=8), Assign([Name('p2', Store(), lineno=252, col_offset=8)], Call(Name('makeref', Load(), lineno=252, col_offset=13), [Name('o', Load(), lineno=252, col_offset=21)], [], None, None, lineno=252, col_offset=13), lineno=252, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=253, col_offset=8), 'assertTrue', Load(), lineno=253, col_offset=8), [Compare(Name('p1', Load(), lineno=253, col_offset=24), [Is()], [Name('p2', Load(), lineno=253, col_offset=30)], lineno=253, col_offset=24), Str('callbacks were None, NULL in the C API', lineno=253, col_offset=34)], [], None, None, lineno=253, col_offset=8), lineno=253, col_offset=8)], [], lineno=237, col_offset=4), FunctionDef('test_callable_proxy', arguments([Name('self', Param(), lineno=255, col_offset=28)], None, None, []), [Assign([Name('o', Store(), lineno=256, col_offset=8)], Call(Name('Callable', Load(), lineno=256, col_offset=12), [], [], None, None, lineno=256, col_offset=12), lineno=256, col_offset=8), Assign([Name('ref1', Store(), lineno=257, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=257, col_offset=15), 'proxy', Load(), lineno=257, col_offset=15), [Name('o', Load(), lineno=257, col_offset=29)], [], None, None, lineno=257, col_offset=15), lineno=257, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=259, col_offset=8), 'check_proxy', Load(), lineno=259, col_offset=8), [Name('o', Load(), lineno=259, col_offset=25), Name('ref1', Load(), lineno=259, col_offset=28)], [], None, None, lineno=259, col_offset=8), lineno=259, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=261, col_offset=8), 'assertTrue', Load(), lineno=261, col_offset=8), [Compare(Call(Name('type', Load(), lineno=261, col_offset=24), [Name('ref1', Load(), lineno=261, col_offset=29)], [], None, None, lineno=261, col_offset=24), [Is()], [Attribute(Name('weakref', Load(), lineno=261, col_offset=38), 'CallableProxyType', Load(), lineno=261, col_offset=38)], lineno=261, col_offset=24), Str('proxy is not of callable type', lineno=262, col_offset=21)], [], None, None, lineno=261, col_offset=8), lineno=261, col_offset=8), Expr(Call(Name('ref1', Load(), lineno=263, col_offset=8), [Str('twinkies!', lineno=263, col_offset=13)], [], None, None, lineno=263, col_offset=8), lineno=263, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=264, col_offset=8), 'assertTrue', Load(), lineno=264, col_offset=8), [Compare(Attribute(Name('o', Load(), lineno=264, col_offset=24), 'bar', Load(), lineno=264, col_offset=24), [Eq()], [Str('twinkies!', lineno=264, col_offset=33)], lineno=264, col_offset=24), Str('call through proxy not passed through to original', lineno=265, col_offset=21)], [], None, None, lineno=264, col_offset=8), lineno=264, col_offset=8), Expr(Call(Name('ref1', Load(), lineno=266, col_offset=8), [], [keyword('x', Str('Splat.', lineno=266, col_offset=15))], None, None, lineno=266, col_offset=8), lineno=266, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=267, col_offset=8), 'assertTrue', Load(), lineno=267, col_offset=8), [Compare(Attribute(Name('o', Load(), lineno=267, col_offset=24), 'bar', Load(), lineno=267, col_offset=24), [Eq()], [Str('Splat.', lineno=267, col_offset=33)], lineno=267, col_offset=24), Str('call through proxy not passed through to original', lineno=268, col_offset=21)], [], None, None, lineno=267, col_offset=8), lineno=267, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=271, col_offset=8), 'assertRaises', Load(), lineno=271, col_offset=8), [Name('TypeError', Load(), lineno=271, col_offset=26), Name('ref1', Load(), lineno=271, col_offset=37)], [], None, None, lineno=271, col_offset=8), lineno=271, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=274, col_offset=8), 'assertRaises', Load(), lineno=274, col_offset=8), [Name('TypeError', Load(), lineno=274, col_offset=26), Name('ref1', Load(), lineno=274, col_offset=37), Num(1, lineno=274, col_offset=43), Num(2, lineno=274, col_offset=46), Num(3, lineno=274, col_offset=49)], [], None, None, lineno=274, col_offset=8), lineno=274, col_offset=8)], [], lineno=255, col_offset=4), FunctionDef('check_proxy', arguments([Name('self', Param(), lineno=276, col_offset=20), Name('o', Param(), lineno=276, col_offset=26), Name('proxy', Param(), lineno=276, col_offset=29)], None, None, []), [Assign([Attribute(Name('o', Load(), lineno=277, col_offset=8), 'foo', Store(), lineno=277, col_offset=8)], Num(1, lineno=277, col_offset=16), lineno=277, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=278, col_offset=8), 'assertTrue', Load(), lineno=278, col_offset=8), [Compare(Attribute(Name('proxy', Load(), lineno=278, col_offset=24), 'foo', Load(), lineno=278, col_offset=24), [Eq()], [Num(1, lineno=278, col_offset=37)], lineno=278, col_offset=24), Str('proxy does not reflect attribute addition', lineno=279, col_offset=21)], [], None, None, lineno=278, col_offset=8), lineno=278, col_offset=8), Assign([Attribute(Name('o', Load(), lineno=280, col_offset=8), 'foo', Store(), lineno=280, col_offset=8)], Num(2, lineno=280, col_offset=16), lineno=280, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=281, col_offset=8), 'assertTrue', Load(), lineno=281, col_offset=8), [Compare(Attribute(Name('proxy', Load(), lineno=281, col_offset=24), 'foo', Load(), lineno=281, col_offset=24), [Eq()], [Num(2, lineno=281, col_offset=37)], lineno=281, col_offset=24), Str('proxy does not reflect attribute modification', lineno=282, col_offset=21)], [], None, None, lineno=281, col_offset=8), lineno=281, col_offset=8), Delete([Attribute(Name('o', Load(), lineno=283, col_offset=12), 'foo', Del(), lineno=283, col_offset=12)], lineno=283, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=284, col_offset=8), 'assertTrue', Load(), lineno=284, col_offset=8), [UnaryOp(Not(), Call(Name('hasattr', Load(), lineno=284, col_offset=28), [Name('proxy', Load(), lineno=284, col_offset=36), Str('foo', lineno=284, col_offset=43)], [], None, None, lineno=284, col_offset=28), lineno=284, col_offset=24), Str('proxy does not reflect attribute removal', lineno=285, col_offset=21)], [], None, None, lineno=284, col_offset=8), lineno=284, col_offset=8), Assign([Attribute(Name('proxy', Load(), lineno=287, col_offset=8), 'foo', Store(), lineno=287, col_offset=8)], Num(1, lineno=287, col_offset=20), lineno=287, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=288, col_offset=8), 'assertTrue', Load(), lineno=288, col_offset=8), [Compare(Attribute(Name('o', Load(), lineno=288, col_offset=24), 'foo', Load(), lineno=288, col_offset=24), [Eq()], [Num(1, lineno=288, col_offset=33)], lineno=288, col_offset=24), Str('object does not reflect attribute addition via proxy', lineno=289, col_offset=21)], [], None, None, lineno=288, col_offset=8), lineno=288, col_offset=8), Assign([Attribute(Name('proxy', Load(), lineno=290, col_offset=8), 'foo', Store(), lineno=290, col_offset=8)], Num(2, lineno=290, col_offset=20), lineno=290, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=291, col_offset=8), 'assertTrue', Load(), lineno=291, col_offset=8), [Compare(Attribute(Name('o', Load(), lineno=292, col_offset=12), 'foo', Load(), lineno=292, col_offset=12), [Eq()], [Num(2, lineno=292, col_offset=21)], lineno=292, col_offset=12), Str('object does not reflect attribute modification via proxy', lineno=293, col_offset=12)], [], None, None, lineno=291, col_offset=8), lineno=291, col_offset=8), Delete([Attribute(Name('proxy', Load(), lineno=294, col_offset=12), 'foo', Del(), lineno=294, col_offset=12)], lineno=294, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=295, col_offset=8), 'assertTrue', Load(), lineno=295, col_offset=8), [UnaryOp(Not(), Call(Name('hasattr', Load(), lineno=295, col_offset=28), [Name('o', Load(), lineno=295, col_offset=36), Str('foo', lineno=295, col_offset=39)], [], None, None, lineno=295, col_offset=28), lineno=295, col_offset=24), Str('object does not reflect attribute removal via proxy', lineno=296, col_offset=21)], [], None, None, lineno=295, col_offset=8), lineno=295, col_offset=8)], [], lineno=276, col_offset=4), FunctionDef('test_proxy_deletion', arguments([Name('self', Param(), lineno=298, col_offset=28)], None, None, []), [ClassDef('Foo', [], [Assign([Name('result', Store(), lineno=301, col_offset=12)], Name('None', Load(), lineno=301, col_offset=21), lineno=301, col_offset=12), FunctionDef('__delitem__', arguments([Name('self', Param(), lineno=302, col_offset=28), Name('accessor', Param(), lineno=302, col_offset=34)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=303, col_offset=16), 'result', Store(), lineno=303, col_offset=16)], Name('accessor', Load(), lineno=303, col_offset=30), lineno=303, col_offset=16)], [], lineno=302, col_offset=12)], [], lineno=300, col_offset=8), Assign([Name('g', Store(), lineno=304, col_offset=8)], Call(Name('Foo', Load(), lineno=304, col_offset=12), [], [], None, None, lineno=304, col_offset=12), lineno=304, col_offset=8), Assign([Name('f', Store(), lineno=305, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=305, col_offset=12), 'proxy', Load(), lineno=305, col_offset=12), [Name('g', Load(), lineno=305, col_offset=26)], [], None, None, lineno=305, col_offset=12), lineno=305, col_offset=8), Delete([Subscript(Name('f', Load(), lineno=306, col_offset=12), Index(Num(0, lineno=306, col_offset=14)), Del(), lineno=306, col_offset=12)], lineno=306, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=307, col_offset=8), 'assertEqual', Load(), lineno=307, col_offset=8), [Attribute(Name('f', Load(), lineno=307, col_offset=25), 'result', Load(), lineno=307, col_offset=25), Num(0, lineno=307, col_offset=35)], [], None, None, lineno=307, col_offset=8), lineno=307, col_offset=8)], [], lineno=298, col_offset=4), FunctionDef('test_proxy_bool', arguments([Name('self', Param(), lineno=309, col_offset=24)], None, None, []), [ClassDef('List', [Name('list', Load(), lineno=311, col_offset=19)], [Pass( lineno=311, col_offset=26)], [], lineno=311, col_offset=8), Assign([Name('lyst', Store(), lineno=312, col_offset=8)], Call(Name('List', Load(), lineno=312, col_offset=15), [], [], None, None, lineno=312, col_offset=15), lineno=312, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=313, col_offset=8), 'assertEqual', Load(), lineno=313, col_offset=8), [Call(Name('bool', Load(), lineno=313, col_offset=25), [Call(Attribute(Name('weakref', Load(), lineno=313, col_offset=30), 'proxy', Load(), lineno=313, col_offset=30), [Name('lyst', Load(), lineno=313, col_offset=44)], [], None, None, lineno=313, col_offset=30)], [], None, None, lineno=313, col_offset=25), Call(Name('bool', Load(), lineno=313, col_offset=52), [Name('lyst', Load(), lineno=313, col_offset=57)], [], None, None, lineno=313, col_offset=52)], [], None, None, lineno=313, col_offset=8), lineno=313, col_offset=8)], [], lineno=309, col_offset=4), FunctionDef('test_getweakrefcount', arguments([Name('self', Param(), lineno=315, col_offset=29)], None, None, []), [Assign([Name('o', Store(), lineno=316, col_offset=8)], Call(Name('C', Load(), lineno=316, col_offset=12), [], [], None, None, lineno=316, col_offset=12), lineno=316, col_offset=8), Assign([Name('ref1', Store(), lineno=317, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=317, col_offset=15), 'ref', Load(), lineno=317, col_offset=15), [Name('o', Load(), lineno=317, col_offset=27)], [], None, None, lineno=317, col_offset=15), lineno=317, col_offset=8), Assign([Name('ref2', Store(), lineno=318, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=318, col_offset=15), 'ref', Load(), lineno=318, col_offset=15), [Name('o', Load(), lineno=318, col_offset=27), Attribute(Name('self', Load(), lineno=318, col_offset=30), 'callback', Load(), lineno=318, col_offset=30)], [], None, None, lineno=318, col_offset=15), lineno=318, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=319, col_offset=8), 'assertTrue', Load(), lineno=319, col_offset=8), [Compare(Call(Attribute(Name('weakref', Load(), lineno=319, col_offset=24), 'getweakrefcount', Load(), lineno=319, col_offset=24), [Name('o', Load(), lineno=319, col_offset=48)], [], None, None, lineno=319, col_offset=24), [Eq()], [Num(2, lineno=319, col_offset=54)], lineno=319, col_offset=24), Str('got wrong number of weak reference objects', lineno=320, col_offset=21)], [], None, None, lineno=319, col_offset=8), lineno=319, col_offset=8), Assign([Name('proxy1', Store(), lineno=322, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=322, col_offset=17), 'proxy', Load(), lineno=322, col_offset=17), [Name('o', Load(), lineno=322, col_offset=31)], [], None, None, lineno=322, col_offset=17), lineno=322, col_offset=8), Assign([Name('proxy2', Store(), lineno=323, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=323, col_offset=17), 'proxy', Load(), lineno=323, col_offset=17), [Name('o', Load(), lineno=323, col_offset=31), Attribute(Name('self', Load(), lineno=323, col_offset=34), 'callback', Load(), lineno=323, col_offset=34)], [], None, None, lineno=323, col_offset=17), lineno=323, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=324, col_offset=8), 'assertTrue', Load(), lineno=324, col_offset=8), [Compare(Call(Attribute(Name('weakref', Load(), lineno=324, col_offset=24), 'getweakrefcount', Load(), lineno=324, col_offset=24), [Name('o', Load(), lineno=324, col_offset=48)], [], None, None, lineno=324, col_offset=24), [Eq()], [Num(4, lineno=324, col_offset=54)], lineno=324, col_offset=24), Str('got wrong number of weak reference objects', lineno=325, col_offset=21)], [], None, None, lineno=324, col_offset=8), lineno=324, col_offset=8), Delete([Name('ref1', Del(), lineno=327, col_offset=12), Name('ref2', Del(), lineno=327, col_offset=18), Name('proxy1', Del(), lineno=327, col_offset=24), Name('proxy2', Del(), lineno=327, col_offset=32)], lineno=327, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=328, col_offset=8), 'assertTrue', Load(), lineno=328, col_offset=8), [Compare(Call(Attribute(Name('weakref', Load(), lineno=328, col_offset=24), 'getweakrefcount', Load(), lineno=328, col_offset=24), [Name('o', Load(), lineno=328, col_offset=48)], [], None, None, lineno=328, col_offset=24), [Eq()], [Num(0, lineno=328, col_offset=54)], lineno=328, col_offset=24), Str('weak reference objects not unlinked from referent when discarded.', lineno=329, col_offset=21)], [], None, None, lineno=328, col_offset=8), lineno=328, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=333, col_offset=8), 'assertTrue', Load(), lineno=333, col_offset=8), [Compare(Call(Attribute(Name('weakref', Load(), lineno=333, col_offset=24), 'getweakrefcount', Load(), lineno=333, col_offset=24), [Num(1, lineno=333, col_offset=48)], [], None, None, lineno=333, col_offset=24), [Eq()], [Num(0, lineno=333, col_offset=54)], lineno=333, col_offset=24), Str('got wrong number of weak reference objects for int', lineno=334, col_offset=21)], [], None, None, lineno=333, col_offset=8), lineno=333, col_offset=8)], [], lineno=315, col_offset=4), FunctionDef('test_getweakrefs', arguments([Name('self', Param(), lineno=336, col_offset=25)], None, None, []), [Assign([Name('o', Store(), lineno=337, col_offset=8)], Call(Name('C', Load(), lineno=337, col_offset=12), [], [], None, None, lineno=337, col_offset=12), lineno=337, col_offset=8), Assign([Name('ref1', Store(), lineno=338, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=338, col_offset=15), 'ref', Load(), lineno=338, col_offset=15), [Name('o', Load(), lineno=338, col_offset=27), Attribute(Name('self', Load(), lineno=338, col_offset=30), 'callback', Load(), lineno=338, col_offset=30)], [], None, None, lineno=338, col_offset=15), lineno=338, col_offset=8), Assign([Name('ref2', Store(), lineno=339, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=339, col_offset=15), 'ref', Load(), lineno=339, col_offset=15), [Name('o', Load(), lineno=339, col_offset=27), Attribute(Name('self', Load(), lineno=339, col_offset=30), 'callback', Load(), lineno=339, col_offset=30)], [], None, None, lineno=339, col_offset=15), lineno=339, col_offset=8), Delete([Name('ref1', Del(), lineno=340, col_offset=12)], lineno=340, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=341, col_offset=8), 'assertTrue', Load(), lineno=341, col_offset=8), [Compare(Call(Attribute(Name('weakref', Load(), lineno=341, col_offset=24), 'getweakrefs', Load(), lineno=341, col_offset=24), [Name('o', Load(), lineno=341, col_offset=44)], [], None, None, lineno=341, col_offset=24), [Eq()], [List([Name('ref2', Load(), lineno=341, col_offset=51)], Load(), lineno=341, col_offset=50)], lineno=341, col_offset=24), Str('list of refs does not match', lineno=342, col_offset=21)], [], None, None, lineno=341, col_offset=8), lineno=341, col_offset=8), Assign([Name('o', Store(), lineno=344, col_offset=8)], Call(Name('C', Load(), lineno=344, col_offset=12), [], [], None, None, lineno=344, col_offset=12), lineno=344, col_offset=8), Assign([Name('ref1', Store(), lineno=345, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=345, col_offset=15), 'ref', Load(), lineno=345, col_offset=15), [Name('o', Load(), lineno=345, col_offset=27), Attribute(Name('self', Load(), lineno=345, col_offset=30), 'callback', Load(), lineno=345, col_offset=30)], [], None, None, lineno=345, col_offset=15), lineno=345, col_offset=8), Assign([Name('ref2', Store(), lineno=346, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=346, col_offset=15), 'ref', Load(), lineno=346, col_offset=15), [Name('o', Load(), lineno=346, col_offset=27), Attribute(Name('self', Load(), lineno=346, col_offset=30), 'callback', Load(), lineno=346, col_offset=30)], [], None, None, lineno=346, col_offset=15), lineno=346, col_offset=8), Delete([Name('ref2', Del(), lineno=347, col_offset=12)], lineno=347, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=348, col_offset=8), 'assertTrue', Load(), lineno=348, col_offset=8), [Compare(Call(Attribute(Name('weakref', Load(), lineno=348, col_offset=24), 'getweakrefs', Load(), lineno=348, col_offset=24), [Name('o', Load(), lineno=348, col_offset=44)], [], None, None, lineno=348, col_offset=24), [Eq()], [List([Name('ref1', Load(), lineno=348, col_offset=51)], Load(), lineno=348, col_offset=50)], lineno=348, col_offset=24), Str('list of refs does not match', lineno=349, col_offset=21)], [], None, None, lineno=348, col_offset=8), lineno=348, col_offset=8), Delete([Name('ref1', Del(), lineno=351, col_offset=12)], lineno=351, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=352, col_offset=8), 'assertTrue', Load(), lineno=352, col_offset=8), [Compare(Call(Attribute(Name('weakref', Load(), lineno=352, col_offset=24), 'getweakrefs', Load(), lineno=352, col_offset=24), [Name('o', Load(), lineno=352, col_offset=44)], [], None, None, lineno=352, col_offset=24), [Eq()], [List([], Load(), lineno=352, col_offset=50)], lineno=352, col_offset=24), Str('list of refs not cleared', lineno=353, col_offset=21)], [], None, None, lineno=352, col_offset=8), lineno=352, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=356, col_offset=8), 'assertTrue', Load(), lineno=356, col_offset=8), [Compare(Call(Attribute(Name('weakref', Load(), lineno=356, col_offset=24), 'getweakrefs', Load(), lineno=356, col_offset=24), [Num(1, lineno=356, col_offset=44)], [], None, None, lineno=356, col_offset=24), [Eq()], [List([], Load(), lineno=356, col_offset=50)], lineno=356, col_offset=24), Str('list of refs does not match for int', lineno=357, col_offset=21)], [], None, None, lineno=356, col_offset=8), lineno=356, col_offset=8)], [], lineno=336, col_offset=4), FunctionDef('test_newstyle_number_ops', arguments([Name('self', Param(), lineno=359, col_offset=33)], None, None, []), [ClassDef('F', [Name('float', Load(), lineno=360, col_offset=16)], [Pass( lineno=361, col_offset=12)], [], lineno=360, col_offset=8), Assign([Name('f', Store(), lineno=362, col_offset=8)], Call(Name('F', Load(), lineno=362, col_offset=12), [Num(2.0, lineno=362, col_offset=14)], [], None, None, lineno=362, col_offset=12), lineno=362, col_offset=8), Assign([Name('p', Store(), lineno=363, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=363, col_offset=12), 'proxy', Load(), lineno=363, col_offset=12), [Name('f', Load(), lineno=363, col_offset=26)], [], None, None, lineno=363, col_offset=12), lineno=363, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=364, col_offset=8), 'assertTrue', Load(), lineno=364, col_offset=8), [Compare(BinOp(Name('p', Load(), lineno=364, col_offset=24), Add(), Num(1.0, lineno=364, col_offset=28), lineno=364, col_offset=24), [Eq()], [Num(3.0, lineno=364, col_offset=35)], lineno=364, col_offset=24)], [], None, None, lineno=364, col_offset=8), lineno=364, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=365, col_offset=8), 'assertTrue', Load(), lineno=365, col_offset=8), [Compare(BinOp(Num(1.0, lineno=365, col_offset=24), Add(), Name('p', Load(), lineno=365, col_offset=30), lineno=365, col_offset=24), [Eq()], [Num(3.0, lineno=365, col_offset=35)], lineno=365, col_offset=24)], [], None, None, lineno=365, col_offset=8), lineno=365, col_offset=8)], [], lineno=359, col_offset=4), FunctionDef('test_callbacks_protected', arguments([Name('self', Param(), lineno=367, col_offset=33)], None, None, []), [ClassDef('BogusError', [Name('Exception', Load(), lineno=370, col_offset=25)], [Pass( lineno=371, col_offset=12)], [], lineno=370, col_offset=8), Assign([Name('data', Store(), lineno=372, col_offset=8)], Dict([], [], lineno=372, col_offset=15), lineno=372, col_offset=8), FunctionDef('remove', arguments([Name('k', Param(), lineno=373, col_offset=19)], None, None, []), [Delete([Subscript(Name('data', Load(), lineno=374, col_offset=16), Index(Name('k', Load(), lineno=374, col_offset=21)), Del(), lineno=374, col_offset=16)], lineno=374, col_offset=12)], [], lineno=373, col_offset=8), FunctionDef('encapsulate', arguments([], None, None, []), [Assign([Name('f', Store(), lineno=376, col_offset=12)], Lambda(arguments([], None, None, []), Tuple([], Load(), lineno=376, col_offset=25), lineno=376, col_offset=16), lineno=376, col_offset=12), Assign([Subscript(Name('data', Load(), lineno=377, col_offset=12), Index(Call(Attribute(Name('weakref', Load(), lineno=377, col_offset=17), 'ref', Load(), lineno=377, col_offset=17), [Name('f', Load(), lineno=377, col_offset=29), Name('remove', Load(), lineno=377, col_offset=32)], [], None, None, lineno=377, col_offset=17)), Store(), lineno=377, col_offset=12)], Name('None', Load(), lineno=377, col_offset=43), lineno=377, col_offset=12), Raise(Name('BogusError', Load(), lineno=378, col_offset=18), None, None, lineno=378, col_offset=12)], [], lineno=375, col_offset=8), TryExcept([Expr(Call(Name('encapsulate', Load(), lineno=380, col_offset=12), [], [], None, None, lineno=380, col_offset=12), lineno=380, col_offset=12)], [ExceptHandler(Name('BogusError', Load(), lineno=381, col_offset=15), None, [Pass( lineno=382, col_offset=12)], lineno=381, col_offset=8)], [Expr(Call(Attribute(Name('self', Load(), lineno=384, col_offset=12), 'fail', Load(), lineno=384, col_offset=12), [Str('exception not properly restored', lineno=384, col_offset=22)], [], None, None, lineno=384, col_offset=12), lineno=384, col_offset=12)], lineno=379, col_offset=8), TryExcept([Expr(Call(Name('encapsulate', Load(), lineno=386, col_offset=12), [], [], None, None, lineno=386, col_offset=12), lineno=386, col_offset=12)], [ExceptHandler(Name('BogusError', Load(), lineno=387, col_offset=15), None, [Pass( lineno=388, col_offset=12)], lineno=387, col_offset=8)], [Expr(Call(Attribute(Name('self', Load(), lineno=390, col_offset=12), 'fail', Load(), lineno=390, col_offset=12), [Str('exception not properly restored', lineno=390, col_offset=22)], [], None, None, lineno=390, col_offset=12), lineno=390, col_offset=12)], lineno=385, col_offset=8)], [], lineno=367, col_offset=4), FunctionDef('test_sf_bug_840829', arguments([Name('self', Param(), lineno=392, col_offset=27)], None, None, []), [Import([alias('gc', None)], lineno=403, col_offset=8), ClassDef('C', [Name('object', Load(), lineno=405, col_offset=16)], [Pass( lineno=406, col_offset=12)], [], lineno=405, col_offset=8), Assign([Name('c', Store(), lineno=408, col_offset=8)], Call(Name('C', Load(), lineno=408, col_offset=12), [], [], None, None, lineno=408, col_offset=12), lineno=408, col_offset=8), Assign([Name('wr', Store(), lineno=409, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=409, col_offset=13), 'ref', Load(), lineno=409, col_offset=13), [Name('c', Load(), lineno=409, col_offset=25), Lambda(arguments([Name('ignore', Param(), lineno=409, col_offset=35)], None, None, []), Call(Attribute(Name('gc', Load(), lineno=409, col_offset=43), 'collect', Load(), lineno=409, col_offset=43), [], [], None, None, lineno=409, col_offset=43), lineno=409, col_offset=28)], [], None, None, lineno=409, col_offset=13), lineno=409, col_offset=8), Delete([Name('c', Del(), lineno=410, col_offset=12)], lineno=410, col_offset=8), Delete([Name('wr', Del(), lineno=413, col_offset=12)], lineno=413, col_offset=8), Assign([Name('c1', Store(), lineno=415, col_offset=8)], Call(Name('C', Load(), lineno=415, col_offset=13), [], [], None, None, lineno=415, col_offset=13), lineno=415, col_offset=8), Assign([Attribute(Name('c1', Load(), lineno=416, col_offset=8), 'i', Store(), lineno=416, col_offset=8)], Call(Name('C', Load(), lineno=416, col_offset=15), [], [], None, None, lineno=416, col_offset=15), lineno=416, col_offset=8), Assign([Name('wr', Store(), lineno=417, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=417, col_offset=13), 'ref', Load(), lineno=417, col_offset=13), [Attribute(Name('c1', Load(), lineno=417, col_offset=25), 'i', Load(), lineno=417, col_offset=25), Lambda(arguments([Name('ignore', Param(), lineno=417, col_offset=38)], None, None, []), Call(Attribute(Name('gc', Load(), lineno=417, col_offset=46), 'collect', Load(), lineno=417, col_offset=46), [], [], None, None, lineno=417, col_offset=46), lineno=417, col_offset=31)], [], None, None, lineno=417, col_offset=13), lineno=417, col_offset=8), Assign([Name('c2', Store(), lineno=419, col_offset=8)], Call(Name('C', Load(), lineno=419, col_offset=13), [], [], None, None, lineno=419, col_offset=13), lineno=419, col_offset=8), Assign([Attribute(Name('c2', Load(), lineno=420, col_offset=8), 'c1', Store(), lineno=420, col_offset=8)], Name('c1', Load(), lineno=420, col_offset=16), lineno=420, col_offset=8), Delete([Name('c1', Del(), lineno=421, col_offset=12)], lineno=421, col_offset=8), Delete([Name('c2', Del(), lineno=430, col_offset=12)], lineno=430, col_offset=8)], [], lineno=392, col_offset=4), FunctionDef('test_callback_in_cycle_1', arguments([Name('self', Param(), lineno=432, col_offset=33)], None, None, []), [Import([alias('gc', None)], lineno=433, col_offset=8), ClassDef('J', [Name('object', Load(), lineno=435, col_offset=16)], [Pass( lineno=436, col_offset=12)], [], lineno=435, col_offset=8), ClassDef('II', [Name('object', Load(), lineno=438, col_offset=17)], [FunctionDef('acallback', arguments([Name('self', Param(), lineno=439, col_offset=26), Name('ignore', Param(), lineno=439, col_offset=32)], None, None, []), [Expr(Attribute(Name('self', Load(), lineno=440, col_offset=16), 'J', Load(), lineno=440, col_offset=16), lineno=440, col_offset=16)], [], lineno=439, col_offset=12)], [], lineno=438, col_offset=8), Assign([Name('I', Store(), lineno=442, col_offset=8)], Call(Name('II', Load(), lineno=442, col_offset=12), [], [], None, None, lineno=442, col_offset=12), lineno=442, col_offset=8), Assign([Attribute(Name('I', Load(), lineno=443, col_offset=8), 'J', Store(), lineno=443, col_offset=8)], Name('J', Load(), lineno=443, col_offset=14), lineno=443, col_offset=8), Assign([Attribute(Name('I', Load(), lineno=444, col_offset=8), 'wr', Store(), lineno=444, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=444, col_offset=15), 'ref', Load(), lineno=444, col_offset=15), [Name('J', Load(), lineno=444, col_offset=27), Attribute(Name('I', Load(), lineno=444, col_offset=30), 'acallback', Load(), lineno=444, col_offset=30)], [], None, None, lineno=444, col_offset=15), lineno=444, col_offset=8), Delete([Name('I', Del(), lineno=469, col_offset=12), Name('J', Del(), lineno=469, col_offset=15), Name('II', Del(), lineno=469, col_offset=18)], lineno=469, col_offset=8), Expr(Call(Attribute(Name('gc', Load(), lineno=470, col_offset=8), 'collect', Load(), lineno=470, col_offset=8), [], [], None, None, lineno=470, col_offset=8), lineno=470, col_offset=8)], [], lineno=432, col_offset=4), FunctionDef('test_callback_in_cycle_2', arguments([Name('self', Param(), lineno=472, col_offset=33)], None, None, []), [Import([alias('gc', None)], lineno=473, col_offset=8), ClassDef('J', [Name('object', Load(), lineno=487, col_offset=16)], [Pass( lineno=488, col_offset=12)], [], lineno=487, col_offset=8), ClassDef('II', [], [FunctionDef('acallback', arguments([Name('self', Param(), lineno=491, col_offset=26), Name('ignore', Param(), lineno=491, col_offset=32)], None, None, []), [Expr(Attribute(Name('self', Load(), lineno=492, col_offset=16), 'J', Load(), lineno=492, col_offset=16), lineno=492, col_offset=16)], [], lineno=491, col_offset=12)], [], lineno=490, col_offset=8), Assign([Name('I', Store(), lineno=494, col_offset=8)], Call(Name('II', Load(), lineno=494, col_offset=12), [], [], None, None, lineno=494, col_offset=12), lineno=494, col_offset=8), Assign([Attribute(Name('I', Load(), lineno=495, col_offset=8), 'J', Store(), lineno=495, col_offset=8)], Name('J', Load(), lineno=495, col_offset=14), lineno=495, col_offset=8), Assign([Attribute(Name('I', Load(), lineno=496, col_offset=8), 'wr', Store(), lineno=496, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=496, col_offset=15), 'ref', Load(), lineno=496, col_offset=15), [Name('J', Load(), lineno=496, col_offset=27), Attribute(Name('I', Load(), lineno=496, col_offset=30), 'acallback', Load(), lineno=496, col_offset=30)], [], None, None, lineno=496, col_offset=15), lineno=496, col_offset=8), Delete([Name('I', Del(), lineno=498, col_offset=12), Name('J', Del(), lineno=498, col_offset=15), Name('II', Del(), lineno=498, col_offset=18)], lineno=498, col_offset=8), Expr(Call(Attribute(Name('gc', Load(), lineno=499, col_offset=8), 'collect', Load(), lineno=499, col_offset=8), [], [], None, None, lineno=499, col_offset=8), lineno=499, col_offset=8)], [], lineno=472, col_offset=4), FunctionDef('test_callback_in_cycle_3', arguments([Name('self', Param(), lineno=501, col_offset=33)], None, None, []), [Import([alias('gc', None)], lineno=502, col_offset=8), ClassDef('C', [], [FunctionDef('cb', arguments([Name('self', Param(), lineno=511, col_offset=19), Name('ignore', Param(), lineno=511, col_offset=25)], None, None, []), [Expr(Attribute(Name('self', Load(), lineno=512, col_offset=16), 'me', Load(), lineno=512, col_offset=16), lineno=512, col_offset=16), Expr(Attribute(Name('self', Load(), lineno=513, col_offset=16), 'c1', Load(), lineno=513, col_offset=16), lineno=513, col_offset=16), Expr(Attribute(Name('self', Load(), lineno=514, col_offset=16), 'wr', Load(), lineno=514, col_offset=16), lineno=514, col_offset=16)], [], lineno=511, col_offset=12)], [], lineno=510, col_offset=8), Assign([Tuple([Name('c1', Store(), lineno=516, col_offset=8), Name('c2', Store(), lineno=516, col_offset=12)], Store(), lineno=516, col_offset=8)], Tuple([Call(Name('C', Load(), lineno=516, col_offset=17), [], [], None, None, lineno=516, col_offset=17), Call(Name('C', Load(), lineno=516, col_offset=22), [], [], None, None, lineno=516, col_offset=22)], Load(), lineno=516, col_offset=17), lineno=516, col_offset=8), Assign([Attribute(Name('c2', Load(), lineno=518, col_offset=8), 'me', Store(), lineno=518, col_offset=8)], Name('c2', Load(), lineno=518, col_offset=16), lineno=518, col_offset=8), Assign([Attribute(Name('c2', Load(), lineno=519, col_offset=8), 'c1', Store(), lineno=519, col_offset=8)], Name('c1', Load(), lineno=519, col_offset=16), lineno=519, col_offset=8), Assign([Attribute(Name('c2', Load(), lineno=520, col_offset=8), 'wr', Store(), lineno=520, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=520, col_offset=16), 'ref', Load(), lineno=520, col_offset=16), [Name('c1', Load(), lineno=520, col_offset=28), Attribute(Name('c2', Load(), lineno=520, col_offset=32), 'cb', Load(), lineno=520, col_offset=32)], [], None, None, lineno=520, col_offset=16), lineno=520, col_offset=8), Delete([Name('c1', Del(), lineno=522, col_offset=12), Name('c2', Del(), lineno=522, col_offset=16)], lineno=522, col_offset=8), Expr(Call(Attribute(Name('gc', Load(), lineno=523, col_offset=8), 'collect', Load(), lineno=523, col_offset=8), [], [], None, None, lineno=523, col_offset=8), lineno=523, col_offset=8)], [], lineno=501, col_offset=4), FunctionDef('test_callback_in_cycle_4', arguments([Name('self', Param(), lineno=525, col_offset=33)], None, None, []), [Import([alias('gc', None)], lineno=526, col_offset=8), ClassDef('C', [Name('object', Load(), lineno=535, col_offset=16)], [FunctionDef('cb', arguments([Name('self', Param(), lineno=536, col_offset=19), Name('ignore', Param(), lineno=536, col_offset=25)], None, None, []), [Expr(Attribute(Name('self', Load(), lineno=537, col_offset=16), 'me', Load(), lineno=537, col_offset=16), lineno=537, col_offset=16), Expr(Attribute(Name('self', Load(), lineno=538, col_offset=16), 'c1', Load(), lineno=538, col_offset=16), lineno=538, col_offset=16), Expr(Attribute(Name('self', Load(), lineno=539, col_offset=16), 'wr', Load(), lineno=539, col_offset=16), lineno=539, col_offset=16)], [], lineno=536, col_offset=12)], [], lineno=535, col_offset=8), ClassDef('D', [], [Pass( lineno=542, col_offset=12)], [], lineno=541, col_offset=8), Assign([Tuple([Name('c1', Store(), lineno=544, col_offset=8), Name('c2', Store(), lineno=544, col_offset=12)], Store(), lineno=544, col_offset=8)], Tuple([Call(Name('D', Load(), lineno=544, col_offset=17), [], [], None, None, lineno=544, col_offset=17), Call(Name('C', Load(), lineno=544, col_offset=22), [], [], None, None, lineno=544, col_offset=22)], Load(), lineno=544, col_offset=17), lineno=544, col_offset=8), Assign([Attribute(Name('c2', Load(), lineno=546, col_offset=8), 'me', Store(), lineno=546, col_offset=8)], Name('c2', Load(), lineno=546, col_offset=16), lineno=546, col_offset=8), Assign([Attribute(Name('c2', Load(), lineno=547, col_offset=8), 'c1', Store(), lineno=547, col_offset=8)], Name('c1', Load(), lineno=547, col_offset=16), lineno=547, col_offset=8), Assign([Attribute(Name('c2', Load(), lineno=548, col_offset=8), 'wr', Store(), lineno=548, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=548, col_offset=16), 'ref', Load(), lineno=548, col_offset=16), [Name('c1', Load(), lineno=548, col_offset=28), Attribute(Name('c2', Load(), lineno=548, col_offset=32), 'cb', Load(), lineno=548, col_offset=32)], [], None, None, lineno=548, col_offset=16), lineno=548, col_offset=8), Delete([Name('c1', Del(), lineno=550, col_offset=12), Name('c2', Del(), lineno=550, col_offset=16), Name('C', Del(), lineno=550, col_offset=20), Name('D', Del(), lineno=550, col_offset=23)], lineno=550, col_offset=8), Expr(Call(Attribute(Name('gc', Load(), lineno=551, col_offset=8), 'collect', Load(), lineno=551, col_offset=8), [], [], None, None, lineno=551, col_offset=8), lineno=551, col_offset=8)], [], lineno=525, col_offset=4), FunctionDef('test_callback_in_cycle_resurrection', arguments([Name('self', Param(), lineno=553, col_offset=44)], None, None, []), [Import([alias('gc', None)], lineno=554, col_offset=8), Assign([Name('alist', Store(), lineno=565, col_offset=8)], List([], Load(), lineno=565, col_offset=16), lineno=565, col_offset=8), ClassDef('C', [Name('object', Load(), lineno=566, col_offset=16)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=567, col_offset=25), Name('value', Param(), lineno=567, col_offset=31)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=568, col_offset=16), 'attribute', Store(), lineno=568, col_offset=16)], Name('value', Load(), lineno=568, col_offset=33), lineno=568, col_offset=16)], [], lineno=567, col_offset=12), FunctionDef('acallback', arguments([Name('self', Param(), lineno=570, col_offset=26), Name('ignore', Param(), lineno=570, col_offset=32)], None, None, []), [Expr(Call(Attribute(Name('alist', Load(), lineno=571, col_offset=16), 'append', Load(), lineno=571, col_offset=16), [Attribute(Name('self', Load(), lineno=571, col_offset=29), 'c', Load(), lineno=571, col_offset=29)], [], None, None, lineno=571, col_offset=16), lineno=571, col_offset=16)], [], lineno=570, col_offset=12)], [], lineno=566, col_offset=8), Assign([Tuple([Name('c1', Store(), lineno=573, col_offset=8), Name('c2', Store(), lineno=573, col_offset=12)], Store(), lineno=573, col_offset=8)], Tuple([Call(Name('C', Load(), lineno=573, col_offset=17), [Num(1, lineno=573, col_offset=19)], [], None, None, lineno=573, col_offset=17), Call(Name('C', Load(), lineno=573, col_offset=23), [Num(2, lineno=573, col_offset=25)], [], None, None, lineno=573, col_offset=23)], Load(), lineno=573, col_offset=17), lineno=573, col_offset=8), Assign([Attribute(Name('c1', Load(), lineno=574, col_offset=8), 'c', Store(), lineno=574, col_offset=8)], Name('c2', Load(), lineno=574, col_offset=15), lineno=574, col_offset=8), Assign([Attribute(Name('c2', Load(), lineno=575, col_offset=8), 'c', Store(), lineno=575, col_offset=8)], Name('c1', Load(), lineno=575, col_offset=15), lineno=575, col_offset=8), Assign([Attribute(Name('c1', Load(), lineno=576, col_offset=8), 'wr', Store(), lineno=576, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=576, col_offset=16), 'ref', Load(), lineno=576, col_offset=16), [Name('c2', Load(), lineno=576, col_offset=28), Attribute(Name('c1', Load(), lineno=576, col_offset=32), 'acallback', Load(), lineno=576, col_offset=32)], [], None, None, lineno=576, col_offset=16), lineno=576, col_offset=8), Assign([Attribute(Name('c2', Load(), lineno=577, col_offset=8), 'wr', Store(), lineno=577, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=577, col_offset=16), 'ref', Load(), lineno=577, col_offset=16), [Name('c1', Load(), lineno=577, col_offset=28), Attribute(Name('c2', Load(), lineno=577, col_offset=32), 'acallback', Load(), lineno=577, col_offset=32)], [], None, None, lineno=577, col_offset=16), lineno=577, col_offset=8), FunctionDef('C_went_away', arguments([Name('ignore', Param(), lineno=579, col_offset=24)], None, None, []), [Expr(Call(Attribute(Name('alist', Load(), lineno=580, col_offset=12), 'append', Load(), lineno=580, col_offset=12), [Str('C went away', lineno=580, col_offset=25)], [], None, None, lineno=580, col_offset=12), lineno=580, col_offset=12)], [], lineno=579, col_offset=8), Assign([Name('wr', Store(), lineno=581, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=581, col_offset=13), 'ref', Load(), lineno=581, col_offset=13), [Name('C', Load(), lineno=581, col_offset=25), Name('C_went_away', Load(), lineno=581, col_offset=28)], [], None, None, lineno=581, col_offset=13), lineno=581, col_offset=8), Delete([Name('c1', Del(), lineno=583, col_offset=12), Name('c2', Del(), lineno=583, col_offset=16), Name('C', Del(), lineno=583, col_offset=20)], lineno=583, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=584, col_offset=8), 'assertEqual', Load(), lineno=584, col_offset=8), [Name('alist', Load(), lineno=584, col_offset=25), List([], Load(), lineno=584, col_offset=32)], [], None, None, lineno=584, col_offset=8), lineno=584, col_offset=8), Expr(Call(Attribute(Name('gc', Load(), lineno=586, col_offset=8), 'collect', Load(), lineno=586, col_offset=8), [], [], None, None, lineno=586, col_offset=8), lineno=586, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=591, col_offset=8), 'assertEqual', Load(), lineno=591, col_offset=8), [Name('alist', Load(), lineno=591, col_offset=25), List([Str('C went away', lineno=591, col_offset=33)], Load(), lineno=591, col_offset=32)], [], None, None, lineno=591, col_offset=8), lineno=591, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=593, col_offset=8), 'assertEqual', Load(), lineno=593, col_offset=8), [Call(Name('wr', Load(), lineno=593, col_offset=25), [], [], None, None, lineno=593, col_offset=25), Name('None', Load(), lineno=593, col_offset=31)], [], None, None, lineno=593, col_offset=8), lineno=593, col_offset=8), Delete([Subscript(Name('alist', Load(), lineno=595, col_offset=12), Slice(None, None, None), Del(), lineno=595, col_offset=12)], lineno=595, col_offset=8), Expr(Call(Attribute(Name('gc', Load(), lineno=596, col_offset=8), 'collect', Load(), lineno=596, col_offset=8), [], [], None, None, lineno=596, col_offset=8), lineno=596, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=597, col_offset=8), 'assertEqual', Load(), lineno=597, col_offset=8), [Name('alist', Load(), lineno=597, col_offset=25), List([], Load(), lineno=597, col_offset=32)], [], None, None, lineno=597, col_offset=8), lineno=597, col_offset=8)], [], lineno=553, col_offset=4), FunctionDef('test_callbacks_on_callback', arguments([Name('self', Param(), lineno=599, col_offset=35)], None, None, []), [Import([alias('gc', None)], lineno=600, col_offset=8), Assign([Name('alist', Store(), lineno=603, col_offset=8)], List([], Load(), lineno=603, col_offset=16), lineno=603, col_offset=8), FunctionDef('safe_callback', arguments([Name('ignore', Param(), lineno=604, col_offset=26)], None, None, []), [Expr(Call(Attribute(Name('alist', Load(), lineno=605, col_offset=12), 'append', Load(), lineno=605, col_offset=12), [Str('safe_callback called', lineno=605, col_offset=25)], [], None, None, lineno=605, col_offset=12), lineno=605, col_offset=12)], [], lineno=604, col_offset=8), ClassDef('C', [Name('object', Load(), lineno=607, col_offset=16)], [FunctionDef('cb', arguments([Name('self', Param(), lineno=608, col_offset=19), Name('ignore', Param(), lineno=608, col_offset=25)], None, None, []), [Expr(Call(Attribute(Name('alist', Load(), lineno=609, col_offset=16), 'append', Load(), lineno=609, col_offset=16), [Str('cb called', lineno=609, col_offset=29)], [], None, None, lineno=609, col_offset=16), lineno=609, col_offset=16)], [], lineno=608, col_offset=12)], [], lineno=607, col_offset=8), Assign([Tuple([Name('c', Store(), lineno=611, col_offset=8), Name('d', Store(), lineno=611, col_offset=11)], Store(), lineno=611, col_offset=8)], Tuple([Call(Name('C', Load(), lineno=611, col_offset=15), [], [], None, None, lineno=611, col_offset=15), Call(Name('C', Load(), lineno=611, col_offset=20), [], [], None, None, lineno=611, col_offset=20)], Load(), lineno=611, col_offset=15), lineno=611, col_offset=8), Assign([Attribute(Name('c', Load(), lineno=612, col_offset=8), 'other', Store(), lineno=612, col_offset=8)], Name('d', Load(), lineno=612, col_offset=18), lineno=612, col_offset=8), Assign([Attribute(Name('d', Load(), lineno=613, col_offset=8), 'other', Store(), lineno=613, col_offset=8)], Name('c', Load(), lineno=613, col_offset=18), lineno=613, col_offset=8), Assign([Name('callback', Store(), lineno=614, col_offset=8)], Attribute(Name('c', Load(), lineno=614, col_offset=19), 'cb', Load(), lineno=614, col_offset=19), lineno=614, col_offset=8), Assign([Attribute(Name('c', Load(), lineno=615, col_offset=8), 'wr', Store(), lineno=615, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=615, col_offset=15), 'ref', Load(), lineno=615, col_offset=15), [Name('d', Load(), lineno=615, col_offset=27), Name('callback', Load(), lineno=615, col_offset=30)], [], None, None, lineno=615, col_offset=15), lineno=615, col_offset=8), Assign([Attribute(Name('d', Load(), lineno=616, col_offset=8), 'wr', Store(), lineno=616, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=616, col_offset=15), 'ref', Load(), lineno=616, col_offset=15), [Name('callback', Load(), lineno=616, col_offset=27), Attribute(Name('d', Load(), lineno=616, col_offset=37), 'cb', Load(), lineno=616, col_offset=37)], [], None, None, lineno=616, col_offset=15), lineno=616, col_offset=8), Assign([Name('external_wr', Store(), lineno=617, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=617, col_offset=22), 'ref', Load(), lineno=617, col_offset=22), [Name('callback', Load(), lineno=617, col_offset=34), Name('safe_callback', Load(), lineno=617, col_offset=44)], [], None, None, lineno=617, col_offset=22), lineno=617, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=618, col_offset=8), 'assertTrue', Load(), lineno=618, col_offset=8), [Compare(Call(Name('external_wr', Load(), lineno=618, col_offset=24), [], [], None, None, lineno=618, col_offset=24), [Is()], [Name('callback', Load(), lineno=618, col_offset=41)], lineno=618, col_offset=24)], [], None, None, lineno=618, col_offset=8), lineno=618, col_offset=8), Delete([Name('callback', Del(), lineno=627, col_offset=12), Name('c', Del(), lineno=627, col_offset=22), Name('d', Del(), lineno=627, col_offset=25), Name('C', Del(), lineno=627, col_offset=28)], lineno=627, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=628, col_offset=8), 'assertEqual', Load(), lineno=628, col_offset=8), [Name('alist', Load(), lineno=628, col_offset=25), List([], Load(), lineno=628, col_offset=32)], [], None, None, lineno=628, col_offset=8), lineno=628, col_offset=8), Expr(Call(Attribute(Name('gc', Load(), lineno=629, col_offset=8), 'collect', Load(), lineno=629, col_offset=8), [], [], None, None, lineno=629, col_offset=8), lineno=629, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=630, col_offset=8), 'assertEqual', Load(), lineno=630, col_offset=8), [Name('alist', Load(), lineno=630, col_offset=25), List([Str('safe_callback called', lineno=630, col_offset=33)], Load(), lineno=630, col_offset=32)], [], None, None, lineno=630, col_offset=8), lineno=630, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=631, col_offset=8), 'assertEqual', Load(), lineno=631, col_offset=8), [Call(Name('external_wr', Load(), lineno=631, col_offset=25), [], [], None, None, lineno=631, col_offset=25), Name('None', Load(), lineno=631, col_offset=40)], [], None, None, lineno=631, col_offset=8), lineno=631, col_offset=8), Delete([Subscript(Name('alist', Load(), lineno=633, col_offset=12), Slice(None, None, None), Del(), lineno=633, col_offset=12)], lineno=633, col_offset=8), Expr(Call(Attribute(Name('gc', Load(), lineno=634, col_offset=8), 'collect', Load(), lineno=634, col_offset=8), [], [], None, None, lineno=634, col_offset=8), lineno=634, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=635, col_offset=8), 'assertEqual', Load(), lineno=635, col_offset=8), [Name('alist', Load(), lineno=635, col_offset=25), List([], Load(), lineno=635, col_offset=32)], [], None, None, lineno=635, col_offset=8), lineno=635, col_offset=8)], [], lineno=599, col_offset=4), FunctionDef('test_gc_during_ref_creation', arguments([Name('self', Param(), lineno=637, col_offset=36)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=638, col_offset=8), 'check_gc_during_creation', Load(), lineno=638, col_offset=8), [Attribute(Name('weakref', Load(), lineno=638, col_offset=38), 'ref', Load(), lineno=638, col_offset=38)], [], None, None, lineno=638, col_offset=8), lineno=638, col_offset=8)], [], lineno=637, col_offset=4), FunctionDef('test_gc_during_proxy_creation', arguments([Name('self', Param(), lineno=640, col_offset=38)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=641, col_offset=8), 'check_gc_during_creation', Load(), lineno=641, col_offset=8), [Attribute(Name('weakref', Load(), lineno=641, col_offset=38), 'proxy', Load(), lineno=641, col_offset=38)], [], None, None, lineno=641, col_offset=8), lineno=641, col_offset=8)], [], lineno=640, col_offset=4), FunctionDef('check_gc_during_creation', arguments([Name('self', Param(), lineno=643, col_offset=33), Name('makeref', Param(), lineno=643, col_offset=39)], None, None, []), [Assign([Name('thresholds', Store(), lineno=644, col_offset=8)], Call(Attribute(Name('gc', Load(), lineno=644, col_offset=21), 'get_threshold', Load(), lineno=644, col_offset=21), [], [], None, None, lineno=644, col_offset=21), lineno=644, col_offset=8), Expr(Call(Attribute(Name('gc', Load(), lineno=645, col_offset=8), 'set_threshold', Load(), lineno=645, col_offset=8), [Num(1, lineno=645, col_offset=25), Num(1, lineno=645, col_offset=28), Num(1, lineno=645, col_offset=31)], [], None, None, lineno=645, col_offset=8), lineno=645, col_offset=8), Expr(Call(Attribute(Name('gc', Load(), lineno=646, col_offset=8), 'collect', Load(), lineno=646, col_offset=8), [], [], None, None, lineno=646, col_offset=8), lineno=646, col_offset=8), ClassDef('A', [], [Pass( lineno=648, col_offset=12)], [], lineno=647, col_offset=8), FunctionDef('callback', arguments([], 'args', None, []), [Pass( lineno=651, col_offset=12)], [], lineno=650, col_offset=8), Assign([Name('referenced', Store(), lineno=653, col_offset=8)], Call(Name('A', Load(), lineno=653, col_offset=21), [], [], None, None, lineno=653, col_offset=21), lineno=653, col_offset=8), Assign([Name('a', Store(), lineno=655, col_offset=8)], Call(Name('A', Load(), lineno=655, col_offset=12), [], [], None, None, lineno=655, col_offset=12), lineno=655, col_offset=8), Assign([Attribute(Name('a', Load(), lineno=656, col_offset=8), 'a', Store(), lineno=656, col_offset=8)], Name('a', Load(), lineno=656, col_offset=14), lineno=656, col_offset=8), Assign([Attribute(Name('a', Load(), lineno=657, col_offset=8), 'wr', Store(), lineno=657, col_offset=8)], Call(Name('makeref', Load(), lineno=657, col_offset=15), [Name('referenced', Load(), lineno=657, col_offset=23)], [], None, None, lineno=657, col_offset=15), lineno=657, col_offset=8), TryFinally([Assign([Name('a', Store(), lineno=662, col_offset=12)], Call(Name('A', Load(), lineno=662, col_offset=16), [], [], None, None, lineno=662, col_offset=16), lineno=662, col_offset=12), Expr(Call(Attribute(Name('weakref', Load(), lineno=663, col_offset=12), 'ref', Load(), lineno=663, col_offset=12), [Name('referenced', Load(), lineno=663, col_offset=24), Name('callback', Load(), lineno=663, col_offset=36)], [], None, None, lineno=663, col_offset=12), lineno=663, col_offset=12)], [Expr(Call(Attribute(Name('gc', Load(), lineno=666, col_offset=12), 'set_threshold', Load(), lineno=666, col_offset=12), [], [], Name('thresholds', Load(), lineno=666, col_offset=30), None, lineno=666, col_offset=12), lineno=666, col_offset=12)], lineno=659, col_offset=8)], [], lineno=643, col_offset=4), FunctionDef('test_ref_created_during_del', arguments([Name('self', Param(), lineno=668, col_offset=36)], None, None, []), [ClassDef('Target', [Name('object', Load(), lineno=673, col_offset=21)], [FunctionDef('__del__', arguments([Name('self', Param(), lineno=674, col_offset=24)], None, None, []), [Global(['ref_from_del'], lineno=675, col_offset=16), Assign([Name('ref_from_del', Store(), lineno=676, col_offset=16)], Call(Attribute(Name('weakref', Load(), lineno=676, col_offset=31), 'ref', Load(), lineno=676, col_offset=31), [Name('self', Load(), lineno=676, col_offset=43)], [], None, None, lineno=676, col_offset=31), lineno=676, col_offset=16)], [], lineno=674, col_offset=12)], [], lineno=673, col_offset=8), Assign([Name('w', Store(), lineno=678, col_offset=8)], Call(Name('Target', Load(), lineno=678, col_offset=12), [], [], None, None, lineno=678, col_offset=12), lineno=678, col_offset=8)], [], lineno=668, col_offset=4), FunctionDef('test_init', arguments([Name('self', Param(), lineno=680, col_offset=18)], None, None, []), [Assign([Name('r', Store(), lineno=683, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=683, col_offset=12), 'ref', Load(), lineno=683, col_offset=12), [Name('Exception', Load(), lineno=683, col_offset=24)], [], None, None, lineno=683, col_offset=12), lineno=683, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=684, col_offset=8), 'assertRaises', Load(), lineno=684, col_offset=8), [Name('TypeError', Load(), lineno=684, col_offset=26), Attribute(Name('r', Load(), lineno=684, col_offset=37), '__init__', Load(), lineno=684, col_offset=37), Num(0, lineno=684, col_offset=49), Num(0, lineno=684, col_offset=52), Num(0, lineno=684, col_offset=55), Num(0, lineno=684, col_offset=58), Num(0, lineno=684, col_offset=61)], [], None, None, lineno=684, col_offset=8), lineno=684, col_offset=8), Expr(Call(Attribute(Name('gc', Load(), lineno=686, col_offset=8), 'collect', Load(), lineno=686, col_offset=8), [], [], None, None, lineno=686, col_offset=8), lineno=686, col_offset=8)], [], lineno=680, col_offset=4), FunctionDef('test_classes', arguments([Name('self', Param(), lineno=688, col_offset=21)], None, None, []), [ClassDef('A', [Name('object', Load(), lineno=691, col_offset=16)], [Pass( lineno=692, col_offset=12)], [], lineno=691, col_offset=8), ClassDef('B', [], [Pass( lineno=694, col_offset=12)], [], lineno=693, col_offset=8), Assign([Name('l', Store(), lineno=695, col_offset=8)], List([], Load(), lineno=695, col_offset=12), lineno=695, col_offset=8), Expr(Call(Attribute(Name('weakref', Load(), lineno=696, col_offset=8), 'ref', Load(), lineno=696, col_offset=8), [Name('int', Load(), lineno=696, col_offset=20)], [], None, None, lineno=696, col_offset=8), lineno=696, col_offset=8), Assign([Name('a', Store(), lineno=697, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=697, col_offset=12), 'ref', Load(), lineno=697, col_offset=12), [Name('A', Load(), lineno=697, col_offset=24), Attribute(Name('l', Load(), lineno=697, col_offset=27), 'append', Load(), lineno=697, col_offset=27)], [], None, None, lineno=697, col_offset=12), lineno=697, col_offset=8), Assign([Name('A', Store(), lineno=698, col_offset=8)], Name('None', Load(), lineno=698, col_offset=12), lineno=698, col_offset=8), Expr(Call(Attribute(Name('gc', Load(), lineno=699, col_offset=8), 'collect', Load(), lineno=699, col_offset=8), [], [], None, None, lineno=699, col_offset=8), lineno=699, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=700, col_offset=8), 'assertEqual', Load(), lineno=700, col_offset=8), [Call(Name('a', Load(), lineno=700, col_offset=25), [], [], None, None, lineno=700, col_offset=25), Name('None', Load(), lineno=700, col_offset=30)], [], None, None, lineno=700, col_offset=8), lineno=700, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=701, col_offset=8), 'assertEqual', Load(), lineno=701, col_offset=8), [Name('l', Load(), lineno=701, col_offset=25), List([Name('a', Load(), lineno=701, col_offset=29)], Load(), lineno=701, col_offset=28)], [], None, None, lineno=701, col_offset=8), lineno=701, col_offset=8), Assign([Name('b', Store(), lineno=702, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=702, col_offset=12), 'ref', Load(), lineno=702, col_offset=12), [Name('B', Load(), lineno=702, col_offset=24), Attribute(Name('l', Load(), lineno=702, col_offset=27), 'append', Load(), lineno=702, col_offset=27)], [], None, None, lineno=702, col_offset=12), lineno=702, col_offset=8), Assign([Name('B', Store(), lineno=703, col_offset=8)], Name('None', Load(), lineno=703, col_offset=12), lineno=703, col_offset=8), Expr(Call(Attribute(Name('gc', Load(), lineno=704, col_offset=8), 'collect', Load(), lineno=704, col_offset=8), [], [], None, None, lineno=704, col_offset=8), lineno=704, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=705, col_offset=8), 'assertEqual', Load(), lineno=705, col_offset=8), [Call(Name('b', Load(), lineno=705, col_offset=25), [], [], None, None, lineno=705, col_offset=25), Name('None', Load(), lineno=705, col_offset=30)], [], None, None, lineno=705, col_offset=8), lineno=705, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=706, col_offset=8), 'assertEqual', Load(), lineno=706, col_offset=8), [Name('l', Load(), lineno=706, col_offset=25), List([Name('a', Load(), lineno=706, col_offset=29), Name('b', Load(), lineno=706, col_offset=32)], Load(), lineno=706, col_offset=28)], [], None, None, lineno=706, col_offset=8), lineno=706, col_offset=8)], [], lineno=688, col_offset=4)], [], lineno=45, col_offset=0), ClassDef('SubclassableWeakrefTestCase', [Name('TestBase', Load(), lineno=709, col_offset=34)], [FunctionDef('test_subclass_refs', arguments([Name('self', Param(), lineno=711, col_offset=27)], None, None, []), [ClassDef('MyRef', [Attribute(Name('weakref', Load(), lineno=712, col_offset=20), 'ref', Load(), lineno=712, col_offset=20)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=713, col_offset=25), Name('ob', Param(), lineno=713, col_offset=31), Name('callback', Param(), lineno=713, col_offset=35), Name('value', Param(), lineno=713, col_offset=50)], None, None, [Name('None', Load(), lineno=713, col_offset=44), Num(42, lineno=713, col_offset=56)]), [Assign([Attribute(Name('self', Load(), lineno=714, col_offset=16), 'value', Store(), lineno=714, col_offset=16)], Name('value', Load(), lineno=714, col_offset=29), lineno=714, col_offset=16), Expr(Call(Attribute(Call(Name('super', Load(), lineno=715, col_offset=16), [Name('MyRef', Load(), lineno=715, col_offset=22), Name('self', Load(), lineno=715, col_offset=29)], [], None, None, lineno=715, col_offset=16), '__init__', Load(), lineno=715, col_offset=16), [Name('ob', Load(), lineno=715, col_offset=44), Name('callback', Load(), lineno=715, col_offset=48)], [], None, None, lineno=715, col_offset=16), lineno=715, col_offset=16)], [], lineno=713, col_offset=12), FunctionDef('__call__', arguments([Name('self', Param(), lineno=716, col_offset=25)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=717, col_offset=16), 'called', Store(), lineno=717, col_offset=16)], Name('True', Load(), lineno=717, col_offset=30), lineno=717, col_offset=16), Return(Call(Attribute(Call(Name('super', Load(), lineno=718, col_offset=23), [Name('MyRef', Load(), lineno=718, col_offset=29), Name('self', Load(), lineno=718, col_offset=36)], [], None, None, lineno=718, col_offset=23), '__call__', Load(), lineno=718, col_offset=23), [], [], None, None, lineno=718, col_offset=23), lineno=718, col_offset=16)], [], lineno=716, col_offset=12)], [], lineno=712, col_offset=8), Assign([Name('o', Store(), lineno=719, col_offset=8)], Call(Name('Object', Load(), lineno=719, col_offset=12), [Str('foo', lineno=719, col_offset=19)], [], None, None, lineno=719, col_offset=12), lineno=719, col_offset=8), Assign([Name('mr', Store(), lineno=720, col_offset=8)], Call(Name('MyRef', Load(), lineno=720, col_offset=13), [Name('o', Load(), lineno=720, col_offset=19)], [keyword('value', Num(24, lineno=720, col_offset=28))], None, None, lineno=720, col_offset=13), lineno=720, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=721, col_offset=8), 'assertTrue', Load(), lineno=721, col_offset=8), [Compare(Call(Name('mr', Load(), lineno=721, col_offset=24), [], [], None, None, lineno=721, col_offset=24), [Is()], [Name('o', Load(), lineno=721, col_offset=32)], lineno=721, col_offset=24)], [], None, None, lineno=721, col_offset=8), lineno=721, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=722, col_offset=8), 'assertTrue', Load(), lineno=722, col_offset=8), [Attribute(Name('mr', Load(), lineno=722, col_offset=24), 'called', Load(), lineno=722, col_offset=24)], [], None, None, lineno=722, col_offset=8), lineno=722, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=723, col_offset=8), 'assertEqual', Load(), lineno=723, col_offset=8), [Attribute(Name('mr', Load(), lineno=723, col_offset=25), 'value', Load(), lineno=723, col_offset=25), Num(24, lineno=723, col_offset=35)], [], None, None, lineno=723, col_offset=8), lineno=723, col_offset=8), Delete([Name('o', Del(), lineno=724, col_offset=12)], lineno=724, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=725, col_offset=8), 'assertTrue', Load(), lineno=725, col_offset=8), [Compare(Call(Name('mr', Load(), lineno=725, col_offset=24), [], [], None, None, lineno=725, col_offset=24), [Is()], [Name('None', Load(), lineno=725, col_offset=32)], lineno=725, col_offset=24)], [], None, None, lineno=725, col_offset=8), lineno=725, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=726, col_offset=8), 'assertTrue', Load(), lineno=726, col_offset=8), [Attribute(Name('mr', Load(), lineno=726, col_offset=24), 'called', Load(), lineno=726, col_offset=24)], [], None, None, lineno=726, col_offset=8), lineno=726, col_offset=8)], [], lineno=711, col_offset=4), FunctionDef('test_subclass_refs_dont_replace_standard_refs', arguments([Name('self', Param(), lineno=728, col_offset=54)], None, None, []), [ClassDef('MyRef', [Attribute(Name('weakref', Load(), lineno=729, col_offset=20), 'ref', Load(), lineno=729, col_offset=20)], [Pass( lineno=730, col_offset=12)], [], lineno=729, col_offset=8), Assign([Name('o', Store(), lineno=731, col_offset=8)], Call(Name('Object', Load(), lineno=731, col_offset=12), [Num(42, lineno=731, col_offset=19)], [], None, None, lineno=731, col_offset=12), lineno=731, col_offset=8), Assign([Name('r1', Store(), lineno=732, col_offset=8)], Call(Name('MyRef', Load(), lineno=732, col_offset=13), [Name('o', Load(), lineno=732, col_offset=19)], [], None, None, lineno=732, col_offset=13), lineno=732, col_offset=8), Assign([Name('r2', Store(), lineno=733, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=733, col_offset=13), 'ref', Load(), lineno=733, col_offset=13), [Name('o', Load(), lineno=733, col_offset=25)], [], None, None, lineno=733, col_offset=13), lineno=733, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=734, col_offset=8), 'assertTrue', Load(), lineno=734, col_offset=8), [Compare(Name('r1', Load(), lineno=734, col_offset=24), [IsNot()], [Name('r2', Load(), lineno=734, col_offset=34)], lineno=734, col_offset=24)], [], None, None, lineno=734, col_offset=8), lineno=734, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=735, col_offset=8), 'assertEqual', Load(), lineno=735, col_offset=8), [Call(Attribute(Name('weakref', Load(), lineno=735, col_offset=25), 'getweakrefs', Load(), lineno=735, col_offset=25), [Name('o', Load(), lineno=735, col_offset=45)], [], None, None, lineno=735, col_offset=25), List([Name('r2', Load(), lineno=735, col_offset=50), Name('r1', Load(), lineno=735, col_offset=54)], Load(), lineno=735, col_offset=49)], [], None, None, lineno=735, col_offset=8), lineno=735, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=736, col_offset=8), 'assertEqual', Load(), lineno=736, col_offset=8), [Call(Attribute(Name('weakref', Load(), lineno=736, col_offset=25), 'getweakrefcount', Load(), lineno=736, col_offset=25), [Name('o', Load(), lineno=736, col_offset=49)], [], None, None, lineno=736, col_offset=25), Num(2, lineno=736, col_offset=53)], [], None, None, lineno=736, col_offset=8), lineno=736, col_offset=8), Assign([Name('r3', Store(), lineno=737, col_offset=8)], Call(Name('MyRef', Load(), lineno=737, col_offset=13), [Name('o', Load(), lineno=737, col_offset=19)], [], None, None, lineno=737, col_offset=13), lineno=737, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=738, col_offset=8), 'assertEqual', Load(), lineno=738, col_offset=8), [Call(Attribute(Name('weakref', Load(), lineno=738, col_offset=25), 'getweakrefcount', Load(), lineno=738, col_offset=25), [Name('o', Load(), lineno=738, col_offset=49)], [], None, None, lineno=738, col_offset=25), Num(3, lineno=738, col_offset=53)], [], None, None, lineno=738, col_offset=8), lineno=738, col_offset=8), Assign([Name('refs', Store(), lineno=739, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=739, col_offset=15), 'getweakrefs', Load(), lineno=739, col_offset=15), [Name('o', Load(), lineno=739, col_offset=35)], [], None, None, lineno=739, col_offset=15), lineno=739, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=740, col_offset=8), 'assertEqual', Load(), lineno=740, col_offset=8), [Call(Name('len', Load(), lineno=740, col_offset=25), [Name('refs', Load(), lineno=740, col_offset=29)], [], None, None, lineno=740, col_offset=25), Num(3, lineno=740, col_offset=36)], [], None, None, lineno=740, col_offset=8), lineno=740, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=741, col_offset=8), 'assertTrue', Load(), lineno=741, col_offset=8), [Compare(Name('r2', Load(), lineno=741, col_offset=24), [Is()], [Subscript(Name('refs', Load(), lineno=741, col_offset=30), Index(Num(0, lineno=741, col_offset=35)), Load(), lineno=741, col_offset=30)], lineno=741, col_offset=24)], [], None, None, lineno=741, col_offset=8), lineno=741, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=742, col_offset=8), 'assertIn', Load(), lineno=742, col_offset=8), [Name('r1', Load(), lineno=742, col_offset=22), Subscript(Name('refs', Load(), lineno=742, col_offset=26), Slice(Num(1, lineno=742, col_offset=31), None, None), Load(), lineno=742, col_offset=26)], [], None, None, lineno=742, col_offset=8), lineno=742, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=743, col_offset=8), 'assertIn', Load(), lineno=743, col_offset=8), [Name('r3', Load(), lineno=743, col_offset=22), Subscript(Name('refs', Load(), lineno=743, col_offset=26), Slice(Num(1, lineno=743, col_offset=31), None, None), Load(), lineno=743, col_offset=26)], [], None, None, lineno=743, col_offset=8), lineno=743, col_offset=8)], [], lineno=728, col_offset=4), FunctionDef('test_subclass_refs_dont_conflate_callbacks', arguments([Name('self', Param(), lineno=745, col_offset=51)], None, None, []), [ClassDef('MyRef', [Attribute(Name('weakref', Load(), lineno=746, col_offset=20), 'ref', Load(), lineno=746, col_offset=20)], [Pass( lineno=747, col_offset=12)], [], lineno=746, col_offset=8), Assign([Name('o', Store(), lineno=748, col_offset=8)], Call(Name('Object', Load(), lineno=748, col_offset=12), [Num(42, lineno=748, col_offset=19)], [], None, None, lineno=748, col_offset=12), lineno=748, col_offset=8), Assign([Name('r1', Store(), lineno=749, col_offset=8)], Call(Name('MyRef', Load(), lineno=749, col_offset=13), [Name('o', Load(), lineno=749, col_offset=19), Name('id', Load(), lineno=749, col_offset=22)], [], None, None, lineno=749, col_offset=13), lineno=749, col_offset=8), Assign([Name('r2', Store(), lineno=750, col_offset=8)], Call(Name('MyRef', Load(), lineno=750, col_offset=13), [Name('o', Load(), lineno=750, col_offset=19), Name('str', Load(), lineno=750, col_offset=22)], [], None, None, lineno=750, col_offset=13), lineno=750, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=751, col_offset=8), 'assertTrue', Load(), lineno=751, col_offset=8), [Compare(Name('r1', Load(), lineno=751, col_offset=24), [IsNot()], [Name('r2', Load(), lineno=751, col_offset=34)], lineno=751, col_offset=24)], [], None, None, lineno=751, col_offset=8), lineno=751, col_offset=8), Assign([Name('refs', Store(), lineno=752, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=752, col_offset=15), 'getweakrefs', Load(), lineno=752, col_offset=15), [Name('o', Load(), lineno=752, col_offset=35)], [], None, None, lineno=752, col_offset=15), lineno=752, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=753, col_offset=8), 'assertIn', Load(), lineno=753, col_offset=8), [Name('r1', Load(), lineno=753, col_offset=22), Name('refs', Load(), lineno=753, col_offset=26)], [], None, None, lineno=753, col_offset=8), lineno=753, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=754, col_offset=8), 'assertIn', Load(), lineno=754, col_offset=8), [Name('r2', Load(), lineno=754, col_offset=22), Name('refs', Load(), lineno=754, col_offset=26)], [], None, None, lineno=754, col_offset=8), lineno=754, col_offset=8)], [], lineno=745, col_offset=4), FunctionDef('test_subclass_refs_with_slots', arguments([Name('self', Param(), lineno=756, col_offset=38)], None, None, []), [ClassDef('MyRef', [Attribute(Name('weakref', Load(), lineno=757, col_offset=20), 'ref', Load(), lineno=757, col_offset=20)], [Assign([Name('__slots__', Store(), lineno=758, col_offset=12)], Tuple([Str('slot1', lineno=758, col_offset=24), Str('slot2', lineno=758, col_offset=33)], Load(), lineno=758, col_offset=24), lineno=758, col_offset=12), FunctionDef('__new__', arguments([Name('type', Param(), lineno=759, col_offset=24), Name('ob', Param(), lineno=759, col_offset=30), Name('callback', Param(), lineno=759, col_offset=34), Name('slot1', Param(), lineno=759, col_offset=44), Name('slot2', Param(), lineno=759, col_offset=51)], None, None, []), [Return(Call(Attribute(Attribute(Name('weakref', Load(), lineno=760, col_offset=23), 'ref', Load(), lineno=760, col_offset=23), '__new__', Load(), lineno=760, col_offset=23), [Name('type', Load(), lineno=760, col_offset=43), Name('ob', Load(), lineno=760, col_offset=49), Name('callback', Load(), lineno=760, col_offset=53)], [], None, None, lineno=760, col_offset=23), lineno=760, col_offset=16)], [], lineno=759, col_offset=12), FunctionDef('__init__', arguments([Name('self', Param(), lineno=761, col_offset=25), Name('ob', Param(), lineno=761, col_offset=31), Name('callback', Param(), lineno=761, col_offset=35), Name('slot1', Param(), lineno=761, col_offset=45), Name('slot2', Param(), lineno=761, col_offset=52)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=762, col_offset=16), 'slot1', Store(), lineno=762, col_offset=16)], Name('slot1', Load(), lineno=762, col_offset=29), lineno=762, col_offset=16), Assign([Attribute(Name('self', Load(), lineno=763, col_offset=16), 'slot2', Store(), lineno=763, col_offset=16)], Name('slot2', Load(), lineno=763, col_offset=29), lineno=763, col_offset=16)], [], lineno=761, col_offset=12), FunctionDef('meth', arguments([Name('self', Param(), lineno=764, col_offset=21)], None, None, []), [Return(BinOp(Attribute(Name('self', Load(), lineno=765, col_offset=23), 'slot1', Load(), lineno=765, col_offset=23), Add(), Attribute(Name('self', Load(), lineno=765, col_offset=36), 'slot2', Load(), lineno=765, col_offset=36), lineno=765, col_offset=23), lineno=765, col_offset=16)], [], lineno=764, col_offset=12)], [], lineno=757, col_offset=8), Assign([Name('o', Store(), lineno=766, col_offset=8)], Call(Name('Object', Load(), lineno=766, col_offset=12), [Num(42, lineno=766, col_offset=19)], [], None, None, lineno=766, col_offset=12), lineno=766, col_offset=8), Assign([Name('r', Store(), lineno=767, col_offset=8)], Call(Name('MyRef', Load(), lineno=767, col_offset=12), [Name('o', Load(), lineno=767, col_offset=18), Name('None', Load(), lineno=767, col_offset=21), Str('abc', lineno=767, col_offset=27), Str('def', lineno=767, col_offset=34)], [], None, None, lineno=767, col_offset=12), lineno=767, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=768, col_offset=8), 'assertEqual', Load(), lineno=768, col_offset=8), [Attribute(Name('r', Load(), lineno=768, col_offset=25), 'slot1', Load(), lineno=768, col_offset=25), Str('abc', lineno=768, col_offset=34)], [], None, None, lineno=768, col_offset=8), lineno=768, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=769, col_offset=8), 'assertEqual', Load(), lineno=769, col_offset=8), [Attribute(Name('r', Load(), lineno=769, col_offset=25), 'slot2', Load(), lineno=769, col_offset=25), Str('def', lineno=769, col_offset=34)], [], None, None, lineno=769, col_offset=8), lineno=769, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=770, col_offset=8), 'assertEqual', Load(), lineno=770, col_offset=8), [Call(Attribute(Name('r', Load(), lineno=770, col_offset=25), 'meth', Load(), lineno=770, col_offset=25), [], [], None, None, lineno=770, col_offset=25), Str('abcdef', lineno=770, col_offset=35)], [], None, None, lineno=770, col_offset=8), lineno=770, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=771, col_offset=8), 'assertFalse', Load(), lineno=771, col_offset=8), [Call(Name('hasattr', Load(), lineno=771, col_offset=25), [Name('r', Load(), lineno=771, col_offset=33), Str('__dict__', lineno=771, col_offset=36)], [], None, None, lineno=771, col_offset=25)], [], None, None, lineno=771, col_offset=8), lineno=771, col_offset=8)], [], lineno=756, col_offset=4), FunctionDef('test_subclass_refs_with_cycle', arguments([Name('self', Param(), lineno=773, col_offset=38)], None, None, []), [ClassDef('MyRef', [Attribute(Name('weakref', Load(), lineno=780, col_offset=20), 'ref', Load(), lineno=780, col_offset=20)], [Pass( lineno=781, col_offset=12)], [], lineno=780, col_offset=8), FunctionDef('callback', arguments([Name('w', Param(), lineno=785, col_offset=21)], None, None, []), [AugAssign(Attribute(Name('self', Load(), lineno=786, col_offset=12), 'cbcalled', Store(), lineno=786, col_offset=12), Add(), Num(1, lineno=786, col_offset=29), lineno=786, col_offset=12)], [], lineno=785, col_offset=8), Assign([Name('o', Store(), lineno=788, col_offset=8)], Call(Name('C', Load(), lineno=788, col_offset=12), [], [], None, None, lineno=788, col_offset=12), lineno=788, col_offset=8), Assign([Name('r1', Store(), lineno=789, col_offset=8)], Call(Name('MyRef', Load(), lineno=789, col_offset=13), [Name('o', Load(), lineno=789, col_offset=19), Name('callback', Load(), lineno=789, col_offset=22)], [], None, None, lineno=789, col_offset=13), lineno=789, col_offset=8), Assign([Attribute(Name('r1', Load(), lineno=790, col_offset=8), 'o', Store(), lineno=790, col_offset=8)], Name('o', Load(), lineno=790, col_offset=15), lineno=790, col_offset=8), Delete([Name('o', Del(), lineno=791, col_offset=12)], lineno=791, col_offset=8), Delete([Name('r1', Del(), lineno=793, col_offset=12)], lineno=793, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=795, col_offset=8), 'assertEqual', Load(), lineno=795, col_offset=8), [Attribute(Name('self', Load(), lineno=795, col_offset=25), 'cbcalled', Load(), lineno=795, col_offset=25), Num(0, lineno=795, col_offset=40)], [], None, None, lineno=795, col_offset=8), lineno=795, col_offset=8), Assign([Name('o', Store(), lineno=799, col_offset=8)], Call(Name('C', Load(), lineno=799, col_offset=12), [], [], None, None, lineno=799, col_offset=12), lineno=799, col_offset=8), Assign([Name('r1', Store(), lineno=800, col_offset=8)], Call(Name('MyRef', Load(), lineno=800, col_offset=13), [Name('o', Load(), lineno=800, col_offset=19), Name('callback', Load(), lineno=800, col_offset=22)], [], None, None, lineno=800, col_offset=13), lineno=800, col_offset=8), Assign([Name('r2', Store(), lineno=801, col_offset=8)], Call(Name('MyRef', Load(), lineno=801, col_offset=13), [Name('o', Load(), lineno=801, col_offset=19), Name('callback', Load(), lineno=801, col_offset=22)], [], None, None, lineno=801, col_offset=13), lineno=801, col_offset=8), Assign([Attribute(Name('r1', Load(), lineno=802, col_offset=8), 'r', Store(), lineno=802, col_offset=8)], Name('r2', Load(), lineno=802, col_offset=15), lineno=802, col_offset=8), Assign([Attribute(Name('r2', Load(), lineno=803, col_offset=8), 'o', Store(), lineno=803, col_offset=8)], Name('o', Load(), lineno=803, col_offset=15), lineno=803, col_offset=8), Delete([Name('o', Del(), lineno=804, col_offset=12)], lineno=804, col_offset=8), Delete([Name('r2', Del(), lineno=805, col_offset=12)], lineno=805, col_offset=8), Delete([Name('r1', Del(), lineno=807, col_offset=12)], lineno=807, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=809, col_offset=8), 'assertEqual', Load(), lineno=809, col_offset=8), [Attribute(Name('self', Load(), lineno=809, col_offset=25), 'cbcalled', Load(), lineno=809, col_offset=25), Num(0, lineno=809, col_offset=40)], [], None, None, lineno=809, col_offset=8), lineno=809, col_offset=8)], [], lineno=773, col_offset=4)], [], lineno=709, col_offset=0), ClassDef('Object', [], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=813, col_offset=17), Name('arg', Param(), lineno=813, col_offset=23)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=814, col_offset=8), 'arg', Store(), lineno=814, col_offset=8)], Name('arg', Load(), lineno=814, col_offset=19), lineno=814, col_offset=8)], [], lineno=813, col_offset=4), FunctionDef('__repr__', arguments([Name('self', Param(), lineno=815, col_offset=17)], None, None, []), [Return(BinOp(Str('<Object %r>', lineno=816, col_offset=15), Mod(), Attribute(Name('self', Load(), lineno=816, col_offset=31), 'arg', Load(), lineno=816, col_offset=31), lineno=816, col_offset=15), lineno=816, col_offset=8)], [], lineno=815, col_offset=4)], [], lineno=812, col_offset=0), ClassDef('MappingTestCase', [Name('TestBase', Load(), lineno=819, col_offset=22)], [Assign([Name('COUNT', Store(), lineno=821, col_offset=4)], Num(10, lineno=821, col_offset=12), lineno=821, col_offset=4), FunctionDef('test_weak_values', arguments([Name('self', Param(), lineno=823, col_offset=25)], None, None, []), [Assign([Tuple([Name('dict', Store(), lineno=827, col_offset=8), Name('objects', Store(), lineno=827, col_offset=14)], Store(), lineno=827, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=827, col_offset=24), 'make_weak_valued_dict', Load(), lineno=827, col_offset=24), [], [], None, None, lineno=827, col_offset=24), lineno=827, col_offset=8), For(Name('o', Store(), lineno=828, col_offset=12), Name('objects', Load(), lineno=828, col_offset=17), [Expr(Call(Attribute(Name('self', Load(), lineno=829, col_offset=12), 'assertTrue', Load(), lineno=829, col_offset=12), [Compare(Call(Attribute(Name('weakref', Load(), lineno=829, col_offset=28), 'getweakrefcount', Load(), lineno=829, col_offset=28), [Name('o', Load(), lineno=829, col_offset=52)], [], None, None, lineno=829, col_offset=28), [Eq()], [Num(1, lineno=829, col_offset=58)], lineno=829, col_offset=28), BinOp(Str('wrong number of weak references to %r!', lineno=830, col_offset=25), Mod(), Name('o', Load(), lineno=830, col_offset=68), lineno=830, col_offset=25)], [], None, None, lineno=829, col_offset=12), lineno=829, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=831, col_offset=12), 'assertTrue', Load(), lineno=831, col_offset=12), [Compare(Name('o', Load(), lineno=831, col_offset=28), [Is()], [Subscript(Name('dict', Load(), lineno=831, col_offset=33), Index(Attribute(Name('o', Load(), lineno=831, col_offset=38), 'arg', Load(), lineno=831, col_offset=38)), Load(), lineno=831, col_offset=33)], lineno=831, col_offset=28), Str('wrong object returned by weak dict!', lineno=832, col_offset=25)], [], None, None, lineno=831, col_offset=12), lineno=831, col_offset=12)], [], lineno=828, col_offset=8), Assign([Name('items1', Store(), lineno=833, col_offset=8)], Call(Attribute(Name('dict', Load(), lineno=833, col_offset=17), 'items', Load(), lineno=833, col_offset=17), [], [], None, None, lineno=833, col_offset=17), lineno=833, col_offset=8), Assign([Name('items2', Store(), lineno=834, col_offset=8)], Call(Attribute(Call(Attribute(Name('dict', Load(), lineno=834, col_offset=17), 'copy', Load(), lineno=834, col_offset=17), [], [], None, None, lineno=834, col_offset=17), 'items', Load(), lineno=834, col_offset=17), [], [], None, None, lineno=834, col_offset=17), lineno=834, col_offset=8), Expr(Call(Attribute(Name('items1', Load(), lineno=835, col_offset=8), 'sort', Load(), lineno=835, col_offset=8), [], [], None, None, lineno=835, col_offset=8), lineno=835, col_offset=8), Expr(Call(Attribute(Name('items2', Load(), lineno=836, col_offset=8), 'sort', Load(), lineno=836, col_offset=8), [], [], None, None, lineno=836, col_offset=8), lineno=836, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=837, col_offset=8), 'assertTrue', Load(), lineno=837, col_offset=8), [Compare(Name('items1', Load(), lineno=837, col_offset=24), [Eq()], [Name('items2', Load(), lineno=837, col_offset=34)], lineno=837, col_offset=24), Str('cloning of weak-valued dictionary did not work!', lineno=838, col_offset=21)], [], None, None, lineno=837, col_offset=8), lineno=837, col_offset=8), Delete([Name('items1', Del(), lineno=839, col_offset=12), Name('items2', Del(), lineno=839, col_offset=20)], lineno=839, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=840, col_offset=8), 'assertTrue', Load(), lineno=840, col_offset=8), [Compare(Call(Name('len', Load(), lineno=840, col_offset=24), [Name('dict', Load(), lineno=840, col_offset=28)], [], None, None, lineno=840, col_offset=24), [Eq()], [Attribute(Name('self', Load(), lineno=840, col_offset=37), 'COUNT', Load(), lineno=840, col_offset=37)], lineno=840, col_offset=24)], [], None, None, lineno=840, col_offset=8), lineno=840, col_offset=8), Delete([Subscript(Name('objects', Load(), lineno=841, col_offset=12), Index(Num(0, lineno=841, col_offset=20)), Del(), lineno=841, col_offset=12)], lineno=841, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=842, col_offset=8), 'assertTrue', Load(), lineno=842, col_offset=8), [Compare(Call(Name('len', Load(), lineno=842, col_offset=24), [Name('dict', Load(), lineno=842, col_offset=28)], [], None, None, lineno=842, col_offset=24), [Eq()], [BinOp(Attribute(Name('self', Load(), lineno=842, col_offset=38), 'COUNT', Load(), lineno=842, col_offset=38), Sub(), Num(1, lineno=842, col_offset=51), lineno=842, col_offset=38)], lineno=842, col_offset=24), Str('deleting object did not cause dictionary update', lineno=843, col_offset=21)], [], None, None, lineno=842, col_offset=8), lineno=842, col_offset=8), Delete([Name('objects', Del(), lineno=844, col_offset=12), Name('o', Del(), lineno=844, col_offset=21)], lineno=844, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=845, col_offset=8), 'assertTrue', Load(), lineno=845, col_offset=8), [Compare(Call(Name('len', Load(), lineno=845, col_offset=24), [Name('dict', Load(), lineno=845, col_offset=28)], [], None, None, lineno=845, col_offset=24), [Eq()], [Num(0, lineno=845, col_offset=37)], lineno=845, col_offset=24), Str('deleting the values did not clear the dictionary', lineno=846, col_offset=21)], [], None, None, lineno=845, col_offset=8), lineno=845, col_offset=8), Assign([Name('dict', Store(), lineno=848, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=848, col_offset=15), 'WeakValueDictionary', Load(), lineno=848, col_offset=15), [], [], None, None, lineno=848, col_offset=15), lineno=848, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=849, col_offset=8), 'assertRaises', Load(), lineno=849, col_offset=8), [Name('KeyError', Load(), lineno=849, col_offset=26), Attribute(Name('dict', Load(), lineno=849, col_offset=36), '__getitem__', Load(), lineno=849, col_offset=36), Num(1, lineno=849, col_offset=54)], [], None, None, lineno=849, col_offset=8), lineno=849, col_offset=8), Assign([Subscript(Name('dict', Load(), lineno=850, col_offset=8), Index(Num(2, lineno=850, col_offset=13)), Store(), lineno=850, col_offset=8)], Call(Name('C', Load(), lineno=850, col_offset=18), [], [], None, None, lineno=850, col_offset=18), lineno=850, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=851, col_offset=8), 'assertRaises', Load(), lineno=851, col_offset=8), [Name('KeyError', Load(), lineno=851, col_offset=26), Attribute(Name('dict', Load(), lineno=851, col_offset=36), '__getitem__', Load(), lineno=851, col_offset=36), Num(2, lineno=851, col_offset=54)], [], None, None, lineno=851, col_offset=8), lineno=851, col_offset=8)], [], lineno=823, col_offset=4), FunctionDef('test_weak_keys', arguments([Name('self', Param(), lineno=853, col_offset=23)], None, None, []), [Assign([Tuple([Name('dict', Store(), lineno=858, col_offset=8), Name('objects', Store(), lineno=858, col_offset=14)], Store(), lineno=858, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=858, col_offset=24), 'make_weak_keyed_dict', Load(), lineno=858, col_offset=24), [], [], None, None, lineno=858, col_offset=24), lineno=858, col_offset=8), For(Name('o', Store(), lineno=859, col_offset=12), Name('objects', Load(), lineno=859, col_offset=17), [Expr(Call(Attribute(Name('self', Load(), lineno=860, col_offset=12), 'assertTrue', Load(), lineno=860, col_offset=12), [Compare(Call(Attribute(Name('weakref', Load(), lineno=860, col_offset=28), 'getweakrefcount', Load(), lineno=860, col_offset=28), [Name('o', Load(), lineno=860, col_offset=52)], [], None, None, lineno=860, col_offset=28), [Eq()], [Num(1, lineno=860, col_offset=58)], lineno=860, col_offset=28), BinOp(Str('wrong number of weak references to %r!', lineno=861, col_offset=25), Mod(), Name('o', Load(), lineno=861, col_offset=68), lineno=861, col_offset=25)], [], None, None, lineno=860, col_offset=12), lineno=860, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=862, col_offset=12), 'assertTrue', Load(), lineno=862, col_offset=12), [Compare(Attribute(Name('o', Load(), lineno=862, col_offset=28), 'arg', Load(), lineno=862, col_offset=28), [Is()], [Subscript(Name('dict', Load(), lineno=862, col_offset=37), Index(Name('o', Load(), lineno=862, col_offset=42)), Load(), lineno=862, col_offset=37)], lineno=862, col_offset=28), Str('wrong object returned by weak dict!', lineno=863, col_offset=25)], [], None, None, lineno=862, col_offset=12), lineno=862, col_offset=12)], [], lineno=859, col_offset=8), Assign([Name('items1', Store(), lineno=864, col_offset=8)], Call(Attribute(Name('dict', Load(), lineno=864, col_offset=17), 'items', Load(), lineno=864, col_offset=17), [], [], None, None, lineno=864, col_offset=17), lineno=864, col_offset=8), Assign([Name('items2', Store(), lineno=865, col_offset=8)], Call(Attribute(Call(Attribute(Name('dict', Load(), lineno=865, col_offset=17), 'copy', Load(), lineno=865, col_offset=17), [], [], None, None, lineno=865, col_offset=17), 'items', Load(), lineno=865, col_offset=17), [], [], None, None, lineno=865, col_offset=17), lineno=865, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=866, col_offset=8), 'assertTrue', Load(), lineno=866, col_offset=8), [Compare(Call(Name('set', Load(), lineno=866, col_offset=24), [Name('items1', Load(), lineno=866, col_offset=28)], [], None, None, lineno=866, col_offset=24), [Eq()], [Call(Name('set', Load(), lineno=866, col_offset=39), [Name('items2', Load(), lineno=866, col_offset=43)], [], None, None, lineno=866, col_offset=39)], lineno=866, col_offset=24), Str('cloning of weak-keyed dictionary did not work!', lineno=867, col_offset=21)], [], None, None, lineno=866, col_offset=8), lineno=866, col_offset=8), Delete([Name('items1', Del(), lineno=868, col_offset=12), Name('items2', Del(), lineno=868, col_offset=20)], lineno=868, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=869, col_offset=8), 'assertTrue', Load(), lineno=869, col_offset=8), [Compare(Call(Name('len', Load(), lineno=869, col_offset=24), [Name('dict', Load(), lineno=869, col_offset=28)], [], None, None, lineno=869, col_offset=24), [Eq()], [Attribute(Name('self', Load(), lineno=869, col_offset=37), 'COUNT', Load(), lineno=869, col_offset=37)], lineno=869, col_offset=24)], [], None, None, lineno=869, col_offset=8), lineno=869, col_offset=8), Delete([Subscript(Name('objects', Load(), lineno=870, col_offset=12), Index(Num(0, lineno=870, col_offset=20)), Del(), lineno=870, col_offset=12)], lineno=870, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=871, col_offset=8), 'assertTrue', Load(), lineno=871, col_offset=8), [Compare(Call(Name('len', Load(), lineno=871, col_offset=24), [Name('dict', Load(), lineno=871, col_offset=28)], [], None, None, lineno=871, col_offset=24), [Eq()], [BinOp(Attribute(Name('self', Load(), lineno=871, col_offset=38), 'COUNT', Load(), lineno=871, col_offset=38), Sub(), Num(1, lineno=871, col_offset=51), lineno=871, col_offset=38)], lineno=871, col_offset=24), Str('deleting object did not cause dictionary update', lineno=872, col_offset=21)], [], None, None, lineno=871, col_offset=8), lineno=871, col_offset=8), Delete([Name('objects', Del(), lineno=873, col_offset=12), Name('o', Del(), lineno=873, col_offset=21)], lineno=873, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=874, col_offset=8), 'assertTrue', Load(), lineno=874, col_offset=8), [Compare(Call(Name('len', Load(), lineno=874, col_offset=24), [Name('dict', Load(), lineno=874, col_offset=28)], [], None, None, lineno=874, col_offset=24), [Eq()], [Num(0, lineno=874, col_offset=37)], lineno=874, col_offset=24), Str('deleting the keys did not clear the dictionary', lineno=875, col_offset=21)], [], None, None, lineno=874, col_offset=8), lineno=874, col_offset=8), Assign([Name('o', Store(), lineno=876, col_offset=8)], Call(Name('Object', Load(), lineno=876, col_offset=12), [Num(42, lineno=876, col_offset=19)], [], None, None, lineno=876, col_offset=12), lineno=876, col_offset=8), Assign([Subscript(Name('dict', Load(), lineno=877, col_offset=8), Index(Name('o', Load(), lineno=877, col_offset=13)), Store(), lineno=877, col_offset=8)], Str('What is the meaning of the universe?', lineno=877, col_offset=18), lineno=877, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=878, col_offset=8), 'assertIn', Load(), lineno=878, col_offset=8), [Name('o', Load(), lineno=878, col_offset=22), Name('dict', Load(), lineno=878, col_offset=25)], [], None, None, lineno=878, col_offset=8), lineno=878, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=879, col_offset=8), 'assertNotIn', Load(), lineno=879, col_offset=8), [Num(34, lineno=879, col_offset=25), Name('dict', Load(), lineno=879, col_offset=29)], [], None, None, lineno=879, col_offset=8), lineno=879, col_offset=8)], [], lineno=853, col_offset=4), FunctionDef('test_weak_keyed_iters', arguments([Name('self', Param(), lineno=881, col_offset=30)], None, None, []), [Assign([Tuple([Name('dict', Store(), lineno=882, col_offset=8), Name('objects', Store(), lineno=882, col_offset=14)], Store(), lineno=882, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=882, col_offset=24), 'make_weak_keyed_dict', Load(), lineno=882, col_offset=24), [], [], None, None, lineno=882, col_offset=24), lineno=882, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=883, col_offset=8), 'check_iters', Load(), lineno=883, col_offset=8), [Name('dict', Load(), lineno=883, col_offset=25)], [], None, None, lineno=883, col_offset=8), lineno=883, col_offset=8), Assign([Name('refs', Store(), lineno=886, col_offset=8)], Call(Attribute(Name('dict', Load(), lineno=886, col_offset=15), 'keyrefs', Load(), lineno=886, col_offset=15), [], [], None, None, lineno=886, col_offset=15), lineno=886, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=887, col_offset=8), 'assertEqual', Load(), lineno=887, col_offset=8), [Call(Name('len', Load(), lineno=887, col_offset=25), [Name('refs', Load(), lineno=887, col_offset=29)], [], None, None, lineno=887, col_offset=25), Call(Name('len', Load(), lineno=887, col_offset=36), [Name('objects', Load(), lineno=887, col_offset=40)], [], None, None, lineno=887, col_offset=36)], [], None, None, lineno=887, col_offset=8), lineno=887, col_offset=8), Assign([Name('objects2', Store(), lineno=888, col_offset=8)], Call(Name('list', Load(), lineno=888, col_offset=19), [Name('objects', Load(), lineno=888, col_offset=24)], [], None, None, lineno=888, col_offset=19), lineno=888, col_offset=8), For(Name('wr', Store(), lineno=889, col_offset=12), Name('refs', Load(), lineno=889, col_offset=18), [Assign([Name('ob', Store(), lineno=890, col_offset=12)], Call(Name('wr', Load(), lineno=890, col_offset=17), [], [], None, None, lineno=890, col_offset=17), lineno=890, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=891, col_offset=12), 'assertIn', Load(), lineno=891, col_offset=12), [Name('ob', Load(), lineno=891, col_offset=26), Name('dict', Load(), lineno=891, col_offset=30)], [], None, None, lineno=891, col_offset=12), lineno=891, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=892, col_offset=12), 'assertEqual', Load(), lineno=892, col_offset=12), [Attribute(Name('ob', Load(), lineno=892, col_offset=29), 'arg', Load(), lineno=892, col_offset=29), Subscript(Name('dict', Load(), lineno=892, col_offset=37), Index(Name('ob', Load(), lineno=892, col_offset=42)), Load(), lineno=892, col_offset=37)], [], None, None, lineno=892, col_offset=12), lineno=892, col_offset=12), Expr(Call(Attribute(Name('objects2', Load(), lineno=893, col_offset=12), 'remove', Load(), lineno=893, col_offset=12), [Name('ob', Load(), lineno=893, col_offset=28)], [], None, None, lineno=893, col_offset=12), lineno=893, col_offset=12)], [], lineno=889, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=894, col_offset=8), 'assertEqual', Load(), lineno=894, col_offset=8), [Call(Name('len', Load(), lineno=894, col_offset=25), [Name('objects2', Load(), lineno=894, col_offset=29)], [], None, None, lineno=894, col_offset=25), Num(0, lineno=894, col_offset=40)], [], None, None, lineno=894, col_offset=8), lineno=894, col_offset=8), Assign([Name('objects2', Store(), lineno=897, col_offset=8)], Call(Name('list', Load(), lineno=897, col_offset=19), [Name('objects', Load(), lineno=897, col_offset=24)], [], None, None, lineno=897, col_offset=19), lineno=897, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=898, col_offset=8), 'assertEqual', Load(), lineno=898, col_offset=8), [Call(Name('len', Load(), lineno=898, col_offset=25), [Call(Name('list', Load(), lineno=898, col_offset=29), [Call(Attribute(Name('dict', Load(), lineno=898, col_offset=34), 'iterkeyrefs', Load(), lineno=898, col_offset=34), [], [], None, None, lineno=898, col_offset=34)], [], None, None, lineno=898, col_offset=29)], [], None, None, lineno=898, col_offset=25), Call(Name('len', Load(), lineno=898, col_offset=56), [Name('objects', Load(), lineno=898, col_offset=60)], [], None, None, lineno=898, col_offset=56)], [], None, None, lineno=898, col_offset=8), lineno=898, col_offset=8), For(Name('wr', Store(), lineno=899, col_offset=12), Call(Attribute(Name('dict', Load(), lineno=899, col_offset=18), 'iterkeyrefs', Load(), lineno=899, col_offset=18), [], [], None, None, lineno=899, col_offset=18), [Assign([Name('ob', Store(), lineno=900, col_offset=12)], Call(Name('wr', Load(), lineno=900, col_offset=17), [], [], None, None, lineno=900, col_offset=17), lineno=900, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=901, col_offset=12), 'assertIn', Load(), lineno=901, col_offset=12), [Name('ob', Load(), lineno=901, col_offset=26), Name('dict', Load(), lineno=901, col_offset=30)], [], None, None, lineno=901, col_offset=12), lineno=901, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=902, col_offset=12), 'assertEqual', Load(), lineno=902, col_offset=12), [Attribute(Name('ob', Load(), lineno=902, col_offset=29), 'arg', Load(), lineno=902, col_offset=29), Subscript(Name('dict', Load(), lineno=902, col_offset=37), Index(Name('ob', Load(), lineno=902, col_offset=42)), Load(), lineno=902, col_offset=37)], [], None, None, lineno=902, col_offset=12), lineno=902, col_offset=12), Expr(Call(Attribute(Name('objects2', Load(), lineno=903, col_offset=12), 'remove', Load(), lineno=903, col_offset=12), [Name('ob', Load(), lineno=903, col_offset=28)], [], None, None, lineno=903, col_offset=12), lineno=903, col_offset=12)], [], lineno=899, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=904, col_offset=8), 'assertEqual', Load(), lineno=904, col_offset=8), [Call(Name('len', Load(), lineno=904, col_offset=25), [Name('objects2', Load(), lineno=904, col_offset=29)], [], None, None, lineno=904, col_offset=25), Num(0, lineno=904, col_offset=40)], [], None, None, lineno=904, col_offset=8), lineno=904, col_offset=8)], [], lineno=881, col_offset=4), FunctionDef('test_weak_valued_iters', arguments([Name('self', Param(), lineno=906, col_offset=31)], None, None, []), [Assign([Tuple([Name('dict', Store(), lineno=907, col_offset=8), Name('objects', Store(), lineno=907, col_offset=14)], Store(), lineno=907, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=907, col_offset=24), 'make_weak_valued_dict', Load(), lineno=907, col_offset=24), [], [], None, None, lineno=907, col_offset=24), lineno=907, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=908, col_offset=8), 'check_iters', Load(), lineno=908, col_offset=8), [Name('dict', Load(), lineno=908, col_offset=25)], [], None, None, lineno=908, col_offset=8), lineno=908, col_offset=8), Assign([Name('refs', Store(), lineno=911, col_offset=8)], Call(Attribute(Name('dict', Load(), lineno=911, col_offset=15), 'valuerefs', Load(), lineno=911, col_offset=15), [], [], None, None, lineno=911, col_offset=15), lineno=911, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=912, col_offset=8), 'assertEqual', Load(), lineno=912, col_offset=8), [Call(Name('len', Load(), lineno=912, col_offset=25), [Name('refs', Load(), lineno=912, col_offset=29)], [], None, None, lineno=912, col_offset=25), Call(Name('len', Load(), lineno=912, col_offset=36), [Name('objects', Load(), lineno=912, col_offset=40)], [], None, None, lineno=912, col_offset=36)], [], None, None, lineno=912, col_offset=8), lineno=912, col_offset=8), Assign([Name('objects2', Store(), lineno=913, col_offset=8)], Call(Name('list', Load(), lineno=913, col_offset=19), [Name('objects', Load(), lineno=913, col_offset=24)], [], None, None, lineno=913, col_offset=19), lineno=913, col_offset=8), For(Name('wr', Store(), lineno=914, col_offset=12), Name('refs', Load(), lineno=914, col_offset=18), [Assign([Name('ob', Store(), lineno=915, col_offset=12)], Call(Name('wr', Load(), lineno=915, col_offset=17), [], [], None, None, lineno=915, col_offset=17), lineno=915, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=916, col_offset=12), 'assertEqual', Load(), lineno=916, col_offset=12), [Name('ob', Load(), lineno=916, col_offset=29), Subscript(Name('dict', Load(), lineno=916, col_offset=33), Index(Attribute(Name('ob', Load(), lineno=916, col_offset=38), 'arg', Load(), lineno=916, col_offset=38)), Load(), lineno=916, col_offset=33)], [], None, None, lineno=916, col_offset=12), lineno=916, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=917, col_offset=12), 'assertEqual', Load(), lineno=917, col_offset=12), [Attribute(Name('ob', Load(), lineno=917, col_offset=29), 'arg', Load(), lineno=917, col_offset=29), Attribute(Subscript(Name('dict', Load(), lineno=917, col_offset=37), Index(Attribute(Name('ob', Load(), lineno=917, col_offset=42), 'arg', Load(), lineno=917, col_offset=42)), Load(), lineno=917, col_offset=37), 'arg', Load(), lineno=917, col_offset=37)], [], None, None, lineno=917, col_offset=12), lineno=917, col_offset=12), Expr(Call(Attribute(Name('objects2', Load(), lineno=918, col_offset=12), 'remove', Load(), lineno=918, col_offset=12), [Name('ob', Load(), lineno=918, col_offset=28)], [], None, None, lineno=918, col_offset=12), lineno=918, col_offset=12)], [], lineno=914, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=919, col_offset=8), 'assertEqual', Load(), lineno=919, col_offset=8), [Call(Name('len', Load(), lineno=919, col_offset=25), [Name('objects2', Load(), lineno=919, col_offset=29)], [], None, None, lineno=919, col_offset=25), Num(0, lineno=919, col_offset=40)], [], None, None, lineno=919, col_offset=8), lineno=919, col_offset=8), Assign([Name('objects2', Store(), lineno=922, col_offset=8)], Call(Name('list', Load(), lineno=922, col_offset=19), [Name('objects', Load(), lineno=922, col_offset=24)], [], None, None, lineno=922, col_offset=19), lineno=922, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=923, col_offset=8), 'assertEqual', Load(), lineno=923, col_offset=8), [Call(Name('len', Load(), lineno=923, col_offset=25), [Call(Name('list', Load(), lineno=923, col_offset=29), [Call(Attribute(Name('dict', Load(), lineno=923, col_offset=34), 'itervaluerefs', Load(), lineno=923, col_offset=34), [], [], None, None, lineno=923, col_offset=34)], [], None, None, lineno=923, col_offset=29)], [], None, None, lineno=923, col_offset=25), Call(Name('len', Load(), lineno=923, col_offset=58), [Name('objects', Load(), lineno=923, col_offset=62)], [], None, None, lineno=923, col_offset=58)], [], None, None, lineno=923, col_offset=8), lineno=923, col_offset=8), For(Name('wr', Store(), lineno=924, col_offset=12), Call(Attribute(Name('dict', Load(), lineno=924, col_offset=18), 'itervaluerefs', Load(), lineno=924, col_offset=18), [], [], None, None, lineno=924, col_offset=18), [Assign([Name('ob', Store(), lineno=925, col_offset=12)], Call(Name('wr', Load(), lineno=925, col_offset=17), [], [], None, None, lineno=925, col_offset=17), lineno=925, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=926, col_offset=12), 'assertEqual', Load(), lineno=926, col_offset=12), [Name('ob', Load(), lineno=926, col_offset=29), Subscript(Name('dict', Load(), lineno=926, col_offset=33), Index(Attribute(Name('ob', Load(), lineno=926, col_offset=38), 'arg', Load(), lineno=926, col_offset=38)), Load(), lineno=926, col_offset=33)], [], None, None, lineno=926, col_offset=12), lineno=926, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=927, col_offset=12), 'assertEqual', Load(), lineno=927, col_offset=12), [Attribute(Name('ob', Load(), lineno=927, col_offset=29), 'arg', Load(), lineno=927, col_offset=29), Attribute(Subscript(Name('dict', Load(), lineno=927, col_offset=37), Index(Attribute(Name('ob', Load(), lineno=927, col_offset=42), 'arg', Load(), lineno=927, col_offset=42)), Load(), lineno=927, col_offset=37), 'arg', Load(), lineno=927, col_offset=37)], [], None, None, lineno=927, col_offset=12), lineno=927, col_offset=12), Expr(Call(Attribute(Name('objects2', Load(), lineno=928, col_offset=12), 'remove', Load(), lineno=928, col_offset=12), [Name('ob', Load(), lineno=928, col_offset=28)], [], None, None, lineno=928, col_offset=12), lineno=928, col_offset=12)], [], lineno=924, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=929, col_offset=8), 'assertEqual', Load(), lineno=929, col_offset=8), [Call(Name('len', Load(), lineno=929, col_offset=25), [Name('objects2', Load(), lineno=929, col_offset=29)], [], None, None, lineno=929, col_offset=25), Num(0, lineno=929, col_offset=40)], [], None, None, lineno=929, col_offset=8), lineno=929, col_offset=8)], [], lineno=906, col_offset=4), FunctionDef('check_iters', arguments([Name('self', Param(), lineno=931, col_offset=20), Name('dict', Param(), lineno=931, col_offset=26)], None, None, []), [Assign([Name('items', Store(), lineno=933, col_offset=8)], Call(Attribute(Name('dict', Load(), lineno=933, col_offset=16), 'items', Load(), lineno=933, col_offset=16), [], [], None, None, lineno=933, col_offset=16), lineno=933, col_offset=8), For(Name('item', Store(), lineno=934, col_offset=12), Call(Attribute(Name('dict', Load(), lineno=934, col_offset=20), 'iteritems', Load(), lineno=934, col_offset=20), [], [], None, None, lineno=934, col_offset=20), [Expr(Call(Attribute(Name('items', Load(), lineno=935, col_offset=12), 'remove', Load(), lineno=935, col_offset=12), [Name('item', Load(), lineno=935, col_offset=25)], [], None, None, lineno=935, col_offset=12), lineno=935, col_offset=12)], [], lineno=934, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=936, col_offset=8), 'assertTrue', Load(), lineno=936, col_offset=8), [Compare(Call(Name('len', Load(), lineno=936, col_offset=24), [Name('items', Load(), lineno=936, col_offset=28)], [], None, None, lineno=936, col_offset=24), [Eq()], [Num(0, lineno=936, col_offset=38)], lineno=936, col_offset=24), Str('iteritems() did not touch all items', lineno=936, col_offset=41)], [], None, None, lineno=936, col_offset=8), lineno=936, col_offset=8), Assign([Name('keys', Store(), lineno=939, col_offset=8)], Call(Attribute(Name('dict', Load(), lineno=939, col_offset=15), 'keys', Load(), lineno=939, col_offset=15), [], [], None, None, lineno=939, col_offset=15), lineno=939, col_offset=8), For(Name('k', Store(), lineno=940, col_offset=12), Name('dict', Load(), lineno=940, col_offset=17), [Expr(Call(Attribute(Name('keys', Load(), lineno=941, col_offset=12), 'remove', Load(), lineno=941, col_offset=12), [Name('k', Load(), lineno=941, col_offset=24)], [], None, None, lineno=941, col_offset=12), lineno=941, col_offset=12)], [], lineno=940, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=942, col_offset=8), 'assertTrue', Load(), lineno=942, col_offset=8), [Compare(Call(Name('len', Load(), lineno=942, col_offset=24), [Name('keys', Load(), lineno=942, col_offset=28)], [], None, None, lineno=942, col_offset=24), [Eq()], [Num(0, lineno=942, col_offset=37)], lineno=942, col_offset=24), Str('__iter__() did not touch all keys', lineno=942, col_offset=40)], [], None, None, lineno=942, col_offset=8), lineno=942, col_offset=8), Assign([Name('keys', Store(), lineno=945, col_offset=8)], Call(Attribute(Name('dict', Load(), lineno=945, col_offset=15), 'keys', Load(), lineno=945, col_offset=15), [], [], None, None, lineno=945, col_offset=15), lineno=945, col_offset=8), For(Name('k', Store(), lineno=946, col_offset=12), Call(Attribute(Name('dict', Load(), lineno=946, col_offset=17), 'iterkeys', Load(), lineno=946, col_offset=17), [], [], None, None, lineno=946, col_offset=17), [Expr(Call(Attribute(Name('keys', Load(), lineno=947, col_offset=12), 'remove', Load(), lineno=947, col_offset=12), [Name('k', Load(), lineno=947, col_offset=24)], [], None, None, lineno=947, col_offset=12), lineno=947, col_offset=12)], [], lineno=946, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=948, col_offset=8), 'assertTrue', Load(), lineno=948, col_offset=8), [Compare(Call(Name('len', Load(), lineno=948, col_offset=24), [Name('keys', Load(), lineno=948, col_offset=28)], [], None, None, lineno=948, col_offset=24), [Eq()], [Num(0, lineno=948, col_offset=37)], lineno=948, col_offset=24), Str('iterkeys() did not touch all keys', lineno=948, col_offset=40)], [], None, None, lineno=948, col_offset=8), lineno=948, col_offset=8), Assign([Name('values', Store(), lineno=951, col_offset=8)], Call(Attribute(Name('dict', Load(), lineno=951, col_offset=17), 'values', Load(), lineno=951, col_offset=17), [], [], None, None, lineno=951, col_offset=17), lineno=951, col_offset=8), For(Name('v', Store(), lineno=952, col_offset=12), Call(Attribute(Name('dict', Load(), lineno=952, col_offset=17), 'itervalues', Load(), lineno=952, col_offset=17), [], [], None, None, lineno=952, col_offset=17), [Expr(Call(Attribute(Name('values', Load(), lineno=953, col_offset=12), 'remove', Load(), lineno=953, col_offset=12), [Name('v', Load(), lineno=953, col_offset=26)], [], None, None, lineno=953, col_offset=12), lineno=953, col_offset=12)], [], lineno=952, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=954, col_offset=8), 'assertTrue', Load(), lineno=954, col_offset=8), [Compare(Call(Name('len', Load(), lineno=954, col_offset=24), [Name('values', Load(), lineno=954, col_offset=28)], [], None, None, lineno=954, col_offset=24), [Eq()], [Num(0, lineno=954, col_offset=39)], lineno=954, col_offset=24), Str('itervalues() did not touch all values', lineno=955, col_offset=21)], [], None, None, lineno=954, col_offset=8), lineno=954, col_offset=8)], [], lineno=931, col_offset=4), FunctionDef('test_make_weak_keyed_dict_from_dict', arguments([Name('self', Param(), lineno=957, col_offset=44)], None, None, []), [Assign([Name('o', Store(), lineno=958, col_offset=8)], Call(Name('Object', Load(), lineno=958, col_offset=12), [Num(3, lineno=958, col_offset=19)], [], None, None, lineno=958, col_offset=12), lineno=958, col_offset=8), Assign([Name('dict', Store(), lineno=959, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=959, col_offset=15), 'WeakKeyDictionary', Load(), lineno=959, col_offset=15), [Dict([Name('o', Load(), lineno=959, col_offset=42)], [Num(364, lineno=959, col_offset=44)], lineno=959, col_offset=41)], [], None, None, lineno=959, col_offset=15), lineno=959, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=960, col_offset=8), 'assertTrue', Load(), lineno=960, col_offset=8), [Compare(Subscript(Name('dict', Load(), lineno=960, col_offset=24), Index(Name('o', Load(), lineno=960, col_offset=29)), Load(), lineno=960, col_offset=24), [Eq()], [Num(364, lineno=960, col_offset=35)], lineno=960, col_offset=24)], [], None, None, lineno=960, col_offset=8), lineno=960, col_offset=8)], [], lineno=957, col_offset=4), FunctionDef('test_make_weak_keyed_dict_from_weak_keyed_dict', arguments([Name('self', Param(), lineno=962, col_offset=55)], None, None, []), [Assign([Name('o', Store(), lineno=963, col_offset=8)], Call(Name('Object', Load(), lineno=963, col_offset=12), [Num(3, lineno=963, col_offset=19)], [], None, None, lineno=963, col_offset=12), lineno=963, col_offset=8), Assign([Name('dict', Store(), lineno=964, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=964, col_offset=15), 'WeakKeyDictionary', Load(), lineno=964, col_offset=15), [Dict([Name('o', Load(), lineno=964, col_offset=42)], [Num(364, lineno=964, col_offset=44)], lineno=964, col_offset=41)], [], None, None, lineno=964, col_offset=15), lineno=964, col_offset=8), Assign([Name('dict2', Store(), lineno=965, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=965, col_offset=16), 'WeakKeyDictionary', Load(), lineno=965, col_offset=16), [Name('dict', Load(), lineno=965, col_offset=42)], [], None, None, lineno=965, col_offset=16), lineno=965, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=966, col_offset=8), 'assertTrue', Load(), lineno=966, col_offset=8), [Compare(Subscript(Name('dict', Load(), lineno=966, col_offset=24), Index(Name('o', Load(), lineno=966, col_offset=29)), Load(), lineno=966, col_offset=24), [Eq()], [Num(364, lineno=966, col_offset=35)], lineno=966, col_offset=24)], [], None, None, lineno=966, col_offset=8), lineno=966, col_offset=8)], [], lineno=962, col_offset=4), FunctionDef('make_weak_keyed_dict', arguments([Name('self', Param(), lineno=968, col_offset=29)], None, None, []), [Assign([Name('dict', Store(), lineno=969, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=969, col_offset=15), 'WeakKeyDictionary', Load(), lineno=969, col_offset=15), [], [], None, None, lineno=969, col_offset=15), lineno=969, col_offset=8), Assign([Name('objects', Store(), lineno=970, col_offset=8)], Call(Name('map', Load(), lineno=970, col_offset=18), [Name('Object', Load(), lineno=970, col_offset=22), Call(Name('range', Load(), lineno=970, col_offset=30), [Attribute(Name('self', Load(), lineno=970, col_offset=36), 'COUNT', Load(), lineno=970, col_offset=36)], [], None, None, lineno=970, col_offset=30)], [], None, None, lineno=970, col_offset=18), lineno=970, col_offset=8), For(Name('o', Store(), lineno=971, col_offset=12), Name('objects', Load(), lineno=971, col_offset=17), [Assign([Subscript(Name('dict', Load(), lineno=972, col_offset=12), Index(Name('o', Load(), lineno=972, col_offset=17)), Store(), lineno=972, col_offset=12)], Attribute(Name('o', Load(), lineno=972, col_offset=22), 'arg', Load(), lineno=972, col_offset=22), lineno=972, col_offset=12)], [], lineno=971, col_offset=8), Return(Tuple([Name('dict', Load(), lineno=973, col_offset=15), Name('objects', Load(), lineno=973, col_offset=21)], Load(), lineno=973, col_offset=15), lineno=973, col_offset=8)], [], lineno=968, col_offset=4), FunctionDef('make_weak_valued_dict', arguments([Name('self', Param(), lineno=975, col_offset=30)], None, None, []), [Assign([Name('dict', Store(), lineno=976, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=976, col_offset=15), 'WeakValueDictionary', Load(), lineno=976, col_offset=15), [], [], None, None, lineno=976, col_offset=15), lineno=976, col_offset=8), Assign([Name('objects', Store(), lineno=977, col_offset=8)], Call(Name('map', Load(), lineno=977, col_offset=18), [Name('Object', Load(), lineno=977, col_offset=22), Call(Name('range', Load(), lineno=977, col_offset=30), [Attribute(Name('self', Load(), lineno=977, col_offset=36), 'COUNT', Load(), lineno=977, col_offset=36)], [], None, None, lineno=977, col_offset=30)], [], None, None, lineno=977, col_offset=18), lineno=977, col_offset=8), For(Name('o', Store(), lineno=978, col_offset=12), Name('objects', Load(), lineno=978, col_offset=17), [Assign([Subscript(Name('dict', Load(), lineno=979, col_offset=12), Index(Attribute(Name('o', Load(), lineno=979, col_offset=17), 'arg', Load(), lineno=979, col_offset=17)), Store(), lineno=979, col_offset=12)], Name('o', Load(), lineno=979, col_offset=26), lineno=979, col_offset=12)], [], lineno=978, col_offset=8), Return(Tuple([Name('dict', Load(), lineno=980, col_offset=15), Name('objects', Load(), lineno=980, col_offset=21)], Load(), lineno=980, col_offset=15), lineno=980, col_offset=8)], [], lineno=975, col_offset=4), FunctionDef('check_popitem', arguments([Name('self', Param(), lineno=982, col_offset=22), Name('klass', Param(), lineno=982, col_offset=28), Name('key1', Param(), lineno=982, col_offset=35), Name('value1', Param(), lineno=982, col_offset=41), Name('key2', Param(), lineno=982, col_offset=49), Name('value2', Param(), lineno=982, col_offset=55)], None, None, []), [Assign([Name('weakdict', Store(), lineno=983, col_offset=8)], Call(Name('klass', Load(), lineno=983, col_offset=19), [], [], None, None, lineno=983, col_offset=19), lineno=983, col_offset=8), Assign([Subscript(Name('weakdict', Load(), lineno=984, col_offset=8), Index(Name('key1', Load(), lineno=984, col_offset=17)), Store(), lineno=984, col_offset=8)], Name('value1', Load(), lineno=984, col_offset=25), lineno=984, col_offset=8), Assign([Subscript(Name('weakdict', Load(), lineno=985, col_offset=8), Index(Name('key2', Load(), lineno=985, col_offset=17)), Store(), lineno=985, col_offset=8)], Name('value2', Load(), lineno=985, col_offset=25), lineno=985, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=986, col_offset=8), 'assertTrue', Load(), lineno=986, col_offset=8), [Compare(Call(Name('len', Load(), lineno=986, col_offset=24), [Name('weakdict', Load(), lineno=986, col_offset=28)], [], None, None, lineno=986, col_offset=24), [Eq()], [Num(2, lineno=986, col_offset=41)], lineno=986, col_offset=24)], [], None, None, lineno=986, col_offset=8), lineno=986, col_offset=8), Assign([Tuple([Name('k', Store(), lineno=987, col_offset=8), Name('v', Store(), lineno=987, col_offset=11)], Store(), lineno=987, col_offset=8)], Call(Attribute(Name('weakdict', Load(), lineno=987, col_offset=15), 'popitem', Load(), lineno=987, col_offset=15), [], [], None, None, lineno=987, col_offset=15), lineno=987, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=988, col_offset=8), 'assertTrue', Load(), lineno=988, col_offset=8), [Compare(Call(Name('len', Load(), lineno=988, col_offset=24), [Name('weakdict', Load(), lineno=988, col_offset=28)], [], None, None, lineno=988, col_offset=24), [Eq()], [Num(1, lineno=988, col_offset=41)], lineno=988, col_offset=24)], [], None, None, lineno=988, col_offset=8), lineno=988, col_offset=8), If(Compare(Name('k', Load(), lineno=989, col_offset=11), [Is()], [Name('key1', Load(), lineno=989, col_offset=16)], lineno=989, col_offset=11), [Expr(Call(Attribute(Name('self', Load(), lineno=990, col_offset=12), 'assertTrue', Load(), lineno=990, col_offset=12), [Compare(Name('v', Load(), lineno=990, col_offset=28), [Is()], [Name('value1', Load(), lineno=990, col_offset=33)], lineno=990, col_offset=28)], [], None, None, lineno=990, col_offset=12), lineno=990, col_offset=12)], [Expr(Call(Attribute(Name('self', Load(), lineno=992, col_offset=12), 'assertTrue', Load(), lineno=992, col_offset=12), [Compare(Name('v', Load(), lineno=992, col_offset=28), [Is()], [Name('value2', Load(), lineno=992, col_offset=33)], lineno=992, col_offset=28)], [], None, None, lineno=992, col_offset=12), lineno=992, col_offset=12)], lineno=989, col_offset=8), Assign([Tuple([Name('k', Store(), lineno=993, col_offset=8), Name('v', Store(), lineno=993, col_offset=11)], Store(), lineno=993, col_offset=8)], Call(Attribute(Name('weakdict', Load(), lineno=993, col_offset=15), 'popitem', Load(), lineno=993, col_offset=15), [], [], None, None, lineno=993, col_offset=15), lineno=993, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=994, col_offset=8), 'assertTrue', Load(), lineno=994, col_offset=8), [Compare(Call(Name('len', Load(), lineno=994, col_offset=24), [Name('weakdict', Load(), lineno=994, col_offset=28)], [], None, None, lineno=994, col_offset=24), [Eq()], [Num(0, lineno=994, col_offset=41)], lineno=994, col_offset=24)], [], None, None, lineno=994, col_offset=8), lineno=994, col_offset=8), If(Compare(Name('k', Load(), lineno=995, col_offset=11), [Is()], [Name('key1', Load(), lineno=995, col_offset=16)], lineno=995, col_offset=11), [Expr(Call(Attribute(Name('self', Load(), lineno=996, col_offset=12), 'assertTrue', Load(), lineno=996, col_offset=12), [Compare(Name('v', Load(), lineno=996, col_offset=28), [Is()], [Name('value1', Load(), lineno=996, col_offset=33)], lineno=996, col_offset=28)], [], None, None, lineno=996, col_offset=12), lineno=996, col_offset=12)], [Expr(Call(Attribute(Name('self', Load(), lineno=998, col_offset=12), 'assertTrue', Load(), lineno=998, col_offset=12), [Compare(Name('v', Load(), lineno=998, col_offset=28), [Is()], [Name('value2', Load(), lineno=998, col_offset=33)], lineno=998, col_offset=28)], [], None, None, lineno=998, col_offset=12), lineno=998, col_offset=12)], lineno=995, col_offset=8)], [], lineno=982, col_offset=4), FunctionDef('test_weak_valued_dict_popitem', arguments([Name('self', Param(), lineno=1000, col_offset=38)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=1001, col_offset=8), 'check_popitem', Load(), lineno=1001, col_offset=8), [Attribute(Name('weakref', Load(), lineno=1001, col_offset=27), 'WeakValueDictionary', Load(), lineno=1001, col_offset=27), Str('key1', lineno=1002, col_offset=27), Call(Name('C', Load(), lineno=1002, col_offset=35), [], [], None, None, lineno=1002, col_offset=35), Str('key2', lineno=1002, col_offset=40), Call(Name('C', Load(), lineno=1002, col_offset=48), [], [], None, None, lineno=1002, col_offset=48)], [], None, None, lineno=1001, col_offset=8), lineno=1001, col_offset=8)], [], lineno=1000, col_offset=4), FunctionDef('test_weak_keyed_dict_popitem', arguments([Name('self', Param(), lineno=1004, col_offset=37)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=1005, col_offset=8), 'check_popitem', Load(), lineno=1005, col_offset=8), [Attribute(Name('weakref', Load(), lineno=1005, col_offset=27), 'WeakKeyDictionary', Load(), lineno=1005, col_offset=27), Call(Name('C', Load(), lineno=1006, col_offset=27), [], [], None, None, lineno=1006, col_offset=27), Str('value 1', lineno=1006, col_offset=32), Call(Name('C', Load(), lineno=1006, col_offset=43), [], [], None, None, lineno=1006, col_offset=43), Str('value 2', lineno=1006, col_offset=48)], [], None, None, lineno=1005, col_offset=8), lineno=1005, col_offset=8)], [], lineno=1004, col_offset=4), FunctionDef('check_setdefault', arguments([Name('self', Param(), lineno=1008, col_offset=25), Name('klass', Param(), lineno=1008, col_offset=31), Name('key', Param(), lineno=1008, col_offset=38), Name('value1', Param(), lineno=1008, col_offset=43), Name('value2', Param(), lineno=1008, col_offset=51)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=1009, col_offset=8), 'assertTrue', Load(), lineno=1009, col_offset=8), [Compare(Name('value1', Load(), lineno=1009, col_offset=24), [IsNot()], [Name('value2', Load(), lineno=1009, col_offset=38)], lineno=1009, col_offset=24), Str('invalid test -- value parameters must be distinct objects', lineno=1010, col_offset=21)], [], None, None, lineno=1009, col_offset=8), lineno=1009, col_offset=8), Assign([Name('weakdict', Store(), lineno=1012, col_offset=8)], Call(Name('klass', Load(), lineno=1012, col_offset=19), [], [], None, None, lineno=1012, col_offset=19), lineno=1012, col_offset=8), Assign([Name('o', Store(), lineno=1013, col_offset=8)], Call(Attribute(Name('weakdict', Load(), lineno=1013, col_offset=12), 'setdefault', Load(), lineno=1013, col_offset=12), [Name('key', Load(), lineno=1013, col_offset=32), Name('value1', Load(), lineno=1013, col_offset=37)], [], None, None, lineno=1013, col_offset=12), lineno=1013, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1014, col_offset=8), 'assertIs', Load(), lineno=1014, col_offset=8), [Name('o', Load(), lineno=1014, col_offset=22), Name('value1', Load(), lineno=1014, col_offset=25)], [], None, None, lineno=1014, col_offset=8), lineno=1014, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1015, col_offset=8), 'assertIn', Load(), lineno=1015, col_offset=8), [Name('key', Load(), lineno=1015, col_offset=22), Name('weakdict', Load(), lineno=1015, col_offset=27)], [], None, None, lineno=1015, col_offset=8), lineno=1015, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1016, col_offset=8), 'assertIs', Load(), lineno=1016, col_offset=8), [Call(Attribute(Name('weakdict', Load(), lineno=1016, col_offset=22), 'get', Load(), lineno=1016, col_offset=22), [Name('key', Load(), lineno=1016, col_offset=35)], [], None, None, lineno=1016, col_offset=22), Name('value1', Load(), lineno=1016, col_offset=41)], [], None, None, lineno=1016, col_offset=8), lineno=1016, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1017, col_offset=8), 'assertIs', Load(), lineno=1017, col_offset=8), [Subscript(Name('weakdict', Load(), lineno=1017, col_offset=22), Index(Name('key', Load(), lineno=1017, col_offset=31)), Load(), lineno=1017, col_offset=22), Name('value1', Load(), lineno=1017, col_offset=37)], [], None, None, lineno=1017, col_offset=8), lineno=1017, col_offset=8), Assign([Name('o', Store(), lineno=1019, col_offset=8)], Call(Attribute(Name('weakdict', Load(), lineno=1019, col_offset=12), 'setdefault', Load(), lineno=1019, col_offset=12), [Name('key', Load(), lineno=1019, col_offset=32), Name('value2', Load(), lineno=1019, col_offset=37)], [], None, None, lineno=1019, col_offset=12), lineno=1019, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1020, col_offset=8), 'assertIs', Load(), lineno=1020, col_offset=8), [Name('o', Load(), lineno=1020, col_offset=22), Name('value1', Load(), lineno=1020, col_offset=25)], [], None, None, lineno=1020, col_offset=8), lineno=1020, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1021, col_offset=8), 'assertIn', Load(), lineno=1021, col_offset=8), [Name('key', Load(), lineno=1021, col_offset=22), Name('weakdict', Load(), lineno=1021, col_offset=27)], [], None, None, lineno=1021, col_offset=8), lineno=1021, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1022, col_offset=8), 'assertIs', Load(), lineno=1022, col_offset=8), [Call(Attribute(Name('weakdict', Load(), lineno=1022, col_offset=22), 'get', Load(), lineno=1022, col_offset=22), [Name('key', Load(), lineno=1022, col_offset=35)], [], None, None, lineno=1022, col_offset=22), Name('value1', Load(), lineno=1022, col_offset=41)], [], None, None, lineno=1022, col_offset=8), lineno=1022, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1023, col_offset=8), 'assertIs', Load(), lineno=1023, col_offset=8), [Subscript(Name('weakdict', Load(), lineno=1023, col_offset=22), Index(Name('key', Load(), lineno=1023, col_offset=31)), Load(), lineno=1023, col_offset=22), Name('value1', Load(), lineno=1023, col_offset=37)], [], None, None, lineno=1023, col_offset=8), lineno=1023, col_offset=8)], [], lineno=1008, col_offset=4), FunctionDef('test_weak_valued_dict_setdefault', arguments([Name('self', Param(), lineno=1025, col_offset=41)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=1026, col_offset=8), 'check_setdefault', Load(), lineno=1026, col_offset=8), [Attribute(Name('weakref', Load(), lineno=1026, col_offset=30), 'WeakValueDictionary', Load(), lineno=1026, col_offset=30), Str('key', lineno=1027, col_offset=30), Call(Name('C', Load(), lineno=1027, col_offset=37), [], [], None, None, lineno=1027, col_offset=37), Call(Name('C', Load(), lineno=1027, col_offset=42), [], [], None, None, lineno=1027, col_offset=42)], [], None, None, lineno=1026, col_offset=8), lineno=1026, col_offset=8)], [], lineno=1025, col_offset=4), FunctionDef('test_weak_keyed_dict_setdefault', arguments([Name('self', Param(), lineno=1029, col_offset=40)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=1030, col_offset=8), 'check_setdefault', Load(), lineno=1030, col_offset=8), [Attribute(Name('weakref', Load(), lineno=1030, col_offset=30), 'WeakKeyDictionary', Load(), lineno=1030, col_offset=30), Call(Name('C', Load(), lineno=1031, col_offset=30), [], [], None, None, lineno=1031, col_offset=30), Str('value 1', lineno=1031, col_offset=35), Str('value 2', lineno=1031, col_offset=46)], [], None, None, lineno=1030, col_offset=8), lineno=1030, col_offset=8)], [], lineno=1029, col_offset=4), FunctionDef('check_update', arguments([Name('self', Param(), lineno=1033, col_offset=21), Name('klass', Param(), lineno=1033, col_offset=27), Name('dict', Param(), lineno=1033, col_offset=34)], None, None, []), [Assign([Name('weakdict', Store(), lineno=1038, col_offset=8)], Call(Name('klass', Load(), lineno=1038, col_offset=19), [], [], None, None, lineno=1038, col_offset=19), lineno=1038, col_offset=8), Expr(Call(Attribute(Name('weakdict', Load(), lineno=1039, col_offset=8), 'update', Load(), lineno=1039, col_offset=8), [Name('dict', Load(), lineno=1039, col_offset=24)], [], None, None, lineno=1039, col_offset=8), lineno=1039, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1040, col_offset=8), 'assertEqual', Load(), lineno=1040, col_offset=8), [Call(Name('len', Load(), lineno=1040, col_offset=25), [Name('weakdict', Load(), lineno=1040, col_offset=29)], [], None, None, lineno=1040, col_offset=25), Call(Name('len', Load(), lineno=1040, col_offset=40), [Name('dict', Load(), lineno=1040, col_offset=44)], [], None, None, lineno=1040, col_offset=40)], [], None, None, lineno=1040, col_offset=8), lineno=1040, col_offset=8), For(Name('k', Store(), lineno=1041, col_offset=12), Call(Attribute(Name('weakdict', Load(), lineno=1041, col_offset=17), 'keys', Load(), lineno=1041, col_offset=17), [], [], None, None, lineno=1041, col_offset=17), [Expr(Call(Attribute(Name('self', Load(), lineno=1042, col_offset=12), 'assertIn', Load(), lineno=1042, col_offset=12), [Name('k', Load(), lineno=1042, col_offset=26), Name('dict', Load(), lineno=1042, col_offset=29), Str('mysterious new key appeared in weak dict', lineno=1043, col_offset=25)], [], None, None, lineno=1042, col_offset=12), lineno=1042, col_offset=12), Assign([Name('v', Store(), lineno=1044, col_offset=12)], Call(Attribute(Name('dict', Load(), lineno=1044, col_offset=16), 'get', Load(), lineno=1044, col_offset=16), [Name('k', Load(), lineno=1044, col_offset=25)], [], None, None, lineno=1044, col_offset=16), lineno=1044, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=1045, col_offset=12), 'assertIs', Load(), lineno=1045, col_offset=12), [Name('v', Load(), lineno=1045, col_offset=26), Subscript(Name('weakdict', Load(), lineno=1045, col_offset=29), Index(Name('k', Load(), lineno=1045, col_offset=38)), Load(), lineno=1045, col_offset=29)], [], None, None, lineno=1045, col_offset=12), lineno=1045, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=1046, col_offset=12), 'assertIs', Load(), lineno=1046, col_offset=12), [Name('v', Load(), lineno=1046, col_offset=26), Call(Attribute(Name('weakdict', Load(), lineno=1046, col_offset=29), 'get', Load(), lineno=1046, col_offset=29), [Name('k', Load(), lineno=1046, col_offset=42)], [], None, None, lineno=1046, col_offset=29)], [], None, None, lineno=1046, col_offset=12), lineno=1046, col_offset=12)], [], lineno=1041, col_offset=8), For(Name('k', Store(), lineno=1047, col_offset=12), Call(Attribute(Name('dict', Load(), lineno=1047, col_offset=17), 'keys', Load(), lineno=1047, col_offset=17), [], [], None, None, lineno=1047, col_offset=17), [Expr(Call(Attribute(Name('self', Load(), lineno=1048, col_offset=12), 'assertIn', Load(), lineno=1048, col_offset=12), [Name('k', Load(), lineno=1048, col_offset=26), Name('weakdict', Load(), lineno=1048, col_offset=29), Str('original key disappeared in weak dict', lineno=1049, col_offset=25)], [], None, None, lineno=1048, col_offset=12), lineno=1048, col_offset=12), Assign([Name('v', Store(), lineno=1050, col_offset=12)], Subscript(Name('dict', Load(), lineno=1050, col_offset=16), Index(Name('k', Load(), lineno=1050, col_offset=21)), Load(), lineno=1050, col_offset=16), lineno=1050, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=1051, col_offset=12), 'assertIs', Load(), lineno=1051, col_offset=12), [Name('v', Load(), lineno=1051, col_offset=26), Subscript(Name('weakdict', Load(), lineno=1051, col_offset=29), Index(Name('k', Load(), lineno=1051, col_offset=38)), Load(), lineno=1051, col_offset=29)], [], None, None, lineno=1051, col_offset=12), lineno=1051, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=1052, col_offset=12), 'assertIs', Load(), lineno=1052, col_offset=12), [Name('v', Load(), lineno=1052, col_offset=26), Call(Attribute(Name('weakdict', Load(), lineno=1052, col_offset=29), 'get', Load(), lineno=1052, col_offset=29), [Name('k', Load(), lineno=1052, col_offset=42)], [], None, None, lineno=1052, col_offset=29)], [], None, None, lineno=1052, col_offset=12), lineno=1052, col_offset=12)], [], lineno=1047, col_offset=8)], [], lineno=1033, col_offset=4), FunctionDef('test_weak_valued_dict_update', arguments([Name('self', Param(), lineno=1054, col_offset=37)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=1055, col_offset=8), 'check_update', Load(), lineno=1055, col_offset=8), [Attribute(Name('weakref', Load(), lineno=1055, col_offset=26), 'WeakValueDictionary', Load(), lineno=1055, col_offset=26), Dict([Num(1, lineno=1056, col_offset=27), Str('a', lineno=1056, col_offset=35), Call(Name('C', Load(), lineno=1056, col_offset=45), [], [], None, None, lineno=1056, col_offset=45)], [Call(Name('C', Load(), lineno=1056, col_offset=30), [], [], None, None, lineno=1056, col_offset=30), Call(Name('C', Load(), lineno=1056, col_offset=40), [], [], None, None, lineno=1056, col_offset=40), Call(Name('C', Load(), lineno=1056, col_offset=50), [], [], None, None, lineno=1056, col_offset=50)], lineno=1056, col_offset=26)], [], None, None, lineno=1055, col_offset=8), lineno=1055, col_offset=8)], [], lineno=1054, col_offset=4), FunctionDef('test_weak_keyed_dict_update', arguments([Name('self', Param(), lineno=1058, col_offset=36)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=1059, col_offset=8), 'check_update', Load(), lineno=1059, col_offset=8), [Attribute(Name('weakref', Load(), lineno=1059, col_offset=26), 'WeakKeyDictionary', Load(), lineno=1059, col_offset=26), Dict([Call(Name('C', Load(), lineno=1060, col_offset=27), [], [], None, None, lineno=1060, col_offset=27), Call(Name('C', Load(), lineno=1060, col_offset=35), [], [], None, None, lineno=1060, col_offset=35), Call(Name('C', Load(), lineno=1060, col_offset=43), [], [], None, None, lineno=1060, col_offset=43)], [Num(1, lineno=1060, col_offset=32), Num(2, lineno=1060, col_offset=40), Num(3, lineno=1060, col_offset=48)], lineno=1060, col_offset=26)], [], None, None, lineno=1059, col_offset=8), lineno=1059, col_offset=8)], [], lineno=1058, col_offset=4), FunctionDef('test_weak_keyed_delitem', arguments([Name('self', Param(), lineno=1062, col_offset=32)], None, None, []), [Assign([Name('d', Store(), lineno=1063, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=1063, col_offset=12), 'WeakKeyDictionary', Load(), lineno=1063, col_offset=12), [], [], None, None, lineno=1063, col_offset=12), lineno=1063, col_offset=8), Assign([Name('o1', Store(), lineno=1064, col_offset=8)], Call(Name('Object', Load(), lineno=1064, col_offset=13), [Str('1', lineno=1064, col_offset=20)], [], None, None, lineno=1064, col_offset=13), lineno=1064, col_offset=8), Assign([Name('o2', Store(), lineno=1065, col_offset=8)], Call(Name('Object', Load(), lineno=1065, col_offset=13), [Str('2', lineno=1065, col_offset=20)], [], None, None, lineno=1065, col_offset=13), lineno=1065, col_offset=8), Assign([Subscript(Name('d', Load(), lineno=1066, col_offset=8), Index(Name('o1', Load(), lineno=1066, col_offset=10)), Store(), lineno=1066, col_offset=8)], Str('something', lineno=1066, col_offset=16), lineno=1066, col_offset=8), Assign([Subscript(Name('d', Load(), lineno=1067, col_offset=8), Index(Name('o2', Load(), lineno=1067, col_offset=10)), Store(), lineno=1067, col_offset=8)], Str('something', lineno=1067, col_offset=16), lineno=1067, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1068, col_offset=8), 'assertTrue', Load(), lineno=1068, col_offset=8), [Compare(Call(Name('len', Load(), lineno=1068, col_offset=24), [Name('d', Load(), lineno=1068, col_offset=28)], [], None, None, lineno=1068, col_offset=24), [Eq()], [Num(2, lineno=1068, col_offset=34)], lineno=1068, col_offset=24)], [], None, None, lineno=1068, col_offset=8), lineno=1068, col_offset=8), Delete([Subscript(Name('d', Load(), lineno=1069, col_offset=12), Index(Name('o1', Load(), lineno=1069, col_offset=14)), Del(), lineno=1069, col_offset=12)], lineno=1069, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1070, col_offset=8), 'assertTrue', Load(), lineno=1070, col_offset=8), [Compare(Call(Name('len', Load(), lineno=1070, col_offset=24), [Name('d', Load(), lineno=1070, col_offset=28)], [], None, None, lineno=1070, col_offset=24), [Eq()], [Num(1, lineno=1070, col_offset=34)], lineno=1070, col_offset=24)], [], None, None, lineno=1070, col_offset=8), lineno=1070, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1071, col_offset=8), 'assertTrue', Load(), lineno=1071, col_offset=8), [Compare(Call(Attribute(Name('d', Load(), lineno=1071, col_offset=24), 'keys', Load(), lineno=1071, col_offset=24), [], [], None, None, lineno=1071, col_offset=24), [Eq()], [List([Name('o2', Load(), lineno=1071, col_offset=37)], Load(), lineno=1071, col_offset=36)], lineno=1071, col_offset=24)], [], None, None, lineno=1071, col_offset=8), lineno=1071, col_offset=8)], [], lineno=1062, col_offset=4), FunctionDef('test_weak_valued_delitem', arguments([Name('self', Param(), lineno=1073, col_offset=33)], None, None, []), [Assign([Name('d', Store(), lineno=1074, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=1074, col_offset=12), 'WeakValueDictionary', Load(), lineno=1074, col_offset=12), [], [], None, None, lineno=1074, col_offset=12), lineno=1074, col_offset=8), Assign([Name('o1', Store(), lineno=1075, col_offset=8)], Call(Name('Object', Load(), lineno=1075, col_offset=13), [Str('1', lineno=1075, col_offset=20)], [], None, None, lineno=1075, col_offset=13), lineno=1075, col_offset=8), Assign([Name('o2', Store(), lineno=1076, col_offset=8)], Call(Name('Object', Load(), lineno=1076, col_offset=13), [Str('2', lineno=1076, col_offset=20)], [], None, None, lineno=1076, col_offset=13), lineno=1076, col_offset=8), Assign([Subscript(Name('d', Load(), lineno=1077, col_offset=8), Index(Str('something', lineno=1077, col_offset=10)), Store(), lineno=1077, col_offset=8)], Name('o1', Load(), lineno=1077, col_offset=25), lineno=1077, col_offset=8), Assign([Subscript(Name('d', Load(), lineno=1078, col_offset=8), Index(Str('something else', lineno=1078, col_offset=10)), Store(), lineno=1078, col_offset=8)], Name('o2', Load(), lineno=1078, col_offset=30), lineno=1078, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1079, col_offset=8), 'assertTrue', Load(), lineno=1079, col_offset=8), [Compare(Call(Name('len', Load(), lineno=1079, col_offset=24), [Name('d', Load(), lineno=1079, col_offset=28)], [], None, None, lineno=1079, col_offset=24), [Eq()], [Num(2, lineno=1079, col_offset=34)], lineno=1079, col_offset=24)], [], None, None, lineno=1079, col_offset=8), lineno=1079, col_offset=8), Delete([Subscript(Name('d', Load(), lineno=1080, col_offset=12), Index(Str('something', lineno=1080, col_offset=14)), Del(), lineno=1080, col_offset=12)], lineno=1080, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1081, col_offset=8), 'assertTrue', Load(), lineno=1081, col_offset=8), [Compare(Call(Name('len', Load(), lineno=1081, col_offset=24), [Name('d', Load(), lineno=1081, col_offset=28)], [], None, None, lineno=1081, col_offset=24), [Eq()], [Num(1, lineno=1081, col_offset=34)], lineno=1081, col_offset=24)], [], None, None, lineno=1081, col_offset=8), lineno=1081, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1082, col_offset=8), 'assertTrue', Load(), lineno=1082, col_offset=8), [Compare(Call(Attribute(Name('d', Load(), lineno=1082, col_offset=24), 'items', Load(), lineno=1082, col_offset=24), [], [], None, None, lineno=1082, col_offset=24), [Eq()], [List([Tuple([Str('something else', lineno=1082, col_offset=39), Name('o2', Load(), lineno=1082, col_offset=57)], Load(), lineno=1082, col_offset=39)], Load(), lineno=1082, col_offset=37)], lineno=1082, col_offset=24)], [], None, None, lineno=1082, col_offset=8), lineno=1082, col_offset=8)], [], lineno=1073, col_offset=4), FunctionDef('test_weak_keyed_bad_delitem', arguments([Name('self', Param(), lineno=1084, col_offset=36)], None, None, []), [Assign([Name('d', Store(), lineno=1085, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=1085, col_offset=12), 'WeakKeyDictionary', Load(), lineno=1085, col_offset=12), [], [], None, None, lineno=1085, col_offset=12), lineno=1085, col_offset=8), Assign([Name('o', Store(), lineno=1086, col_offset=8)], Call(Name('Object', Load(), lineno=1086, col_offset=12), [Str('1', lineno=1086, col_offset=19)], [], None, None, lineno=1086, col_offset=12), lineno=1086, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1089, col_offset=8), 'assertRaises', Load(), lineno=1089, col_offset=8), [Name('KeyError', Load(), lineno=1089, col_offset=26), Attribute(Name('d', Load(), lineno=1089, col_offset=36), '__delitem__', Load(), lineno=1089, col_offset=36), Name('o', Load(), lineno=1089, col_offset=51)], [], None, None, lineno=1089, col_offset=8), lineno=1089, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1090, col_offset=8), 'assertRaises', Load(), lineno=1090, col_offset=8), [Name('KeyError', Load(), lineno=1090, col_offset=26), Attribute(Name('d', Load(), lineno=1090, col_offset=36), '__getitem__', Load(), lineno=1090, col_offset=36), Name('o', Load(), lineno=1090, col_offset=51)], [], None, None, lineno=1090, col_offset=8), lineno=1090, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1094, col_offset=8), 'assertRaises', Load(), lineno=1094, col_offset=8), [Name('TypeError', Load(), lineno=1094, col_offset=26), Attribute(Name('d', Load(), lineno=1094, col_offset=37), '__delitem__', Load(), lineno=1094, col_offset=37), Num(13, lineno=1094, col_offset=53)], [], None, None, lineno=1094, col_offset=8), lineno=1094, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1095, col_offset=8), 'assertRaises', Load(), lineno=1095, col_offset=8), [Name('TypeError', Load(), lineno=1095, col_offset=26), Attribute(Name('d', Load(), lineno=1095, col_offset=37), '__getitem__', Load(), lineno=1095, col_offset=37), Num(13, lineno=1095, col_offset=53)], [], None, None, lineno=1095, col_offset=8), lineno=1095, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1096, col_offset=8), 'assertRaises', Load(), lineno=1096, col_offset=8), [Name('TypeError', Load(), lineno=1096, col_offset=26), Attribute(Name('d', Load(), lineno=1096, col_offset=37), '__setitem__', Load(), lineno=1096, col_offset=37), Num(13, lineno=1096, col_offset=53), Num(13, lineno=1096, col_offset=57)], [], None, None, lineno=1096, col_offset=8), lineno=1096, col_offset=8)], [], lineno=1084, col_offset=4), FunctionDef('test_weak_keyed_cascading_deletes', arguments([Name('self', Param(), lineno=1098, col_offset=42)], None, None, []), [Assign([Name('d', Store(), lineno=1103, col_offset=8)], Call(Attribute(Name('weakref', Load(), lineno=1103, col_offset=12), 'WeakKeyDictionary', Load(), lineno=1103, col_offset=12), [], [], None, None, lineno=1103, col_offset=12), lineno=1103, col_offset=8), Assign([Name('mutate', Store(), lineno=1104, col_offset=8)], Name('False', Load(), lineno=1104, col_offset=17), lineno=1104, col_offset=8), ClassDef('C', [Name('object', Load(), lineno=1106, col_offset=16)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=1107, col_offset=25), Name('i', Param(), lineno=1107, col_offset=31)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=1108, col_offset=16), 'value', Store(), lineno=1108, col_offset=16)], Name('i', Load(), lineno=1108, col_offset=29), lineno=1108, col_offset=16)], [], lineno=1107, col_offset=12), FunctionDef('__hash__', arguments([Name('self', Param(), lineno=1109, col_offset=25)], None, None, []), [Return(Call(Name('hash', Load(), lineno=1110, col_offset=23), [Attribute(Name('self', Load(), lineno=1110, col_offset=28), 'value', Load(), lineno=1110, col_offset=28)], [], None, None, lineno=1110, col_offset=23), lineno=1110, col_offset=16)], [], lineno=1109, col_offset=12), FunctionDef('__eq__', arguments([Name('self', Param(), lineno=1111, col_offset=23), Name('other', Param(), lineno=1111, col_offset=29)], None, None, []), [If(Name('mutate', Load(), lineno=1112, col_offset=19), [Delete([Subscript(Name('objs', Load(), lineno=1115, col_offset=24), Index(Num(-1, lineno=1115, col_offset=30)), Del(), lineno=1115, col_offset=24)], lineno=1115, col_offset=20)], [], lineno=1112, col_offset=16), Return(Compare(Attribute(Name('self', Load(), lineno=1116, col_offset=23), 'value', Load(), lineno=1116, col_offset=23), [Eq()], [Attribute(Name('other', Load(), lineno=1116, col_offset=37), 'value', Load(), lineno=1116, col_offset=37)], lineno=1116, col_offset=23), lineno=1116, col_offset=16)], [], lineno=1111, col_offset=12)], [], lineno=1106, col_offset=8), Assign([Name('objs', Store(), lineno=1118, col_offset=8)], ListComp(Call(Name('C', Load(), lineno=1118, col_offset=16), [Name('i', Load(), lineno=1118, col_offset=18)], [], None, None, lineno=1118, col_offset=16), [comprehension(Name('i', Store(), lineno=1118, col_offset=25), Call(Name('range', Load(), lineno=1118, col_offset=30), [Num(4, lineno=1118, col_offset=36)], [], None, None, lineno=1118, col_offset=30), [])], lineno=1118, col_offset=16), lineno=1118, col_offset=8), For(Name('o', Store(), lineno=1119, col_offset=12), Name('objs', Load(), lineno=1119, col_offset=17), [Assign([Subscript(Name('d', Load(), lineno=1120, col_offset=12), Index(Name('o', Load(), lineno=1120, col_offset=14)), Store(), lineno=1120, col_offset=12)], Attribute(Name('o', Load(), lineno=1120, col_offset=19), 'value', Load(), lineno=1120, col_offset=19), lineno=1120, col_offset=12)], [], lineno=1119, col_offset=8), Delete([Name('o', Del(), lineno=1121, col_offset=12)], lineno=1121, col_offset=8), Assign([Name('objs', Store(), lineno=1123, col_offset=8)], Call(Attribute(Name('d', Load(), lineno=1123, col_offset=15), 'keys', Load(), lineno=1123, col_offset=15), [], [], None, None, lineno=1123, col_offset=15), lineno=1123, col_offset=8), Expr(Call(Attribute(Name('objs', Load(), lineno=1126, col_offset=8), 'reverse', Load(), lineno=1126, col_offset=8), [], [], None, None, lineno=1126, col_offset=8), lineno=1126, col_offset=8), Assign([Name('mutate', Store(), lineno=1135, col_offset=8)], Name('True', Load(), lineno=1135, col_offset=17), lineno=1135, col_offset=8), Assign([Name('count', Store(), lineno=1136, col_offset=8)], Num(0, lineno=1136, col_offset=16), lineno=1136, col_offset=8), For(Name('o', Store(), lineno=1137, col_offset=12), Name('objs', Load(), lineno=1137, col_offset=17), [AugAssign(Name('count', Store(), lineno=1138, col_offset=12), Add(), Num(1, lineno=1138, col_offset=21), lineno=1138, col_offset=12), Delete([Subscript(Name('d', Load(), lineno=1139, col_offset=16), Index(Name('o', Load(), lineno=1139, col_offset=18)), Del(), lineno=1139, col_offset=16)], lineno=1139, col_offset=12)], [], lineno=1137, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1140, col_offset=8), 'assertEqual', Load(), lineno=1140, col_offset=8), [Call(Name('len', Load(), lineno=1140, col_offset=25), [Name('d', Load(), lineno=1140, col_offset=29)], [], None, None, lineno=1140, col_offset=25), Num(0, lineno=1140, col_offset=33)], [], None, None, lineno=1140, col_offset=8), lineno=1140, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=1141, col_offset=8), 'assertEqual', Load(), lineno=1141, col_offset=8), [Name('count', Load(), lineno=1141, col_offset=25), Num(2, lineno=1141, col_offset=32)], [], None, None, lineno=1141, col_offset=8), lineno=1141, col_offset=8)], [], lineno=1098, col_offset=4)], [], lineno=819, col_offset=0), ImportFrom('test', [alias('mapping_tests', None)], 0, lineno=1143, col_offset=0), ClassDef('WeakValueDictionaryTestCase', [Attribute(Name('mapping_tests', Load(), lineno=1145, col_offset=34), 'BasicTestMappingProtocol', Load(), lineno=1145, col_offset=34)], [Expr(Str('Check that WeakValueDictionary conforms to the mapping protocol', lineno=1146, col_offset=4), lineno=1146, col_offset=4), Assign([Name('__ref', Store(), lineno=1147, col_offset=4)], Dict([Str('key1', lineno=1147, col_offset=13), Str('key2', lineno=1147, col_offset=31), Str('key3', lineno=1147, col_offset=49)], [Call(Name('Object', Load(), lineno=1147, col_offset=20), [Num(1, lineno=1147, col_offset=27)], [], None, None, lineno=1147, col_offset=20), Call(Name('Object', Load(), lineno=1147, col_offset=38), [Num(2, lineno=1147, col_offset=45)], [], None, None, lineno=1147, col_offset=38), Call(Name('Object', Load(), lineno=1147, col_offset=56), [Num(3, lineno=1147, col_offset=63)], [], None, None, lineno=1147, col_offset=56)], lineno=1147, col_offset=12), lineno=1147, col_offset=4), Assign([Name('type2test', Store(), lineno=1148, col_offset=4)], Attribute(Name('weakref', Load(), lineno=1148, col_offset=16), 'WeakValueDictionary', Load(), lineno=1148, col_offset=16), lineno=1148, col_offset=4), FunctionDef('_reference', arguments([Name('self', Param(), lineno=1149, col_offset=19)], None, None, []), [Return(Call(Attribute(Attribute(Name('self', Load(), lineno=1150, col_offset=15), '__ref', Load(), lineno=1150, col_offset=15), 'copy', Load(), lineno=1150, col_offset=15), [], [], None, None, lineno=1150, col_offset=15), lineno=1150, col_offset=8)], [], lineno=1149, col_offset=4)], [], lineno=1145, col_offset=0), ClassDef('WeakKeyDictionaryTestCase', [Attribute(Name('mapping_tests', Load(), lineno=1152, col_offset=32), 'BasicTestMappingProtocol', Load(), lineno=1152, col_offset=32)], [Expr(Str('Check that WeakKeyDictionary conforms to the mapping protocol', lineno=1153, col_offset=4), lineno=1153, col_offset=4), Assign([Name('__ref', Store(), lineno=1154, col_offset=4)], Dict([Call(Name('Object', Load(), lineno=1154, col_offset=13), [Str('key1', lineno=1154, col_offset=20)], [], None, None, lineno=1154, col_offset=13), Call(Name('Object', Load(), lineno=1154, col_offset=31), [Str('key2', lineno=1154, col_offset=38)], [], None, None, lineno=1154, col_offset=31), Call(Name('Object', Load(), lineno=1154, col_offset=49), [Str('key3', lineno=1154, col_offset=56)], [], None, None, lineno=1154, col_offset=49)], [Num(1, lineno=1154, col_offset=28), Num(2, lineno=1154, col_offset=46), Num(3, lineno=1154, col_offset=64)], lineno=1154, col_offset=12), lineno=1154, col_offset=4), Assign([Name('type2test', Store(), lineno=1155, col_offset=4)], Attribute(Name('weakref', Load(), lineno=1155, col_offset=16), 'WeakKeyDictionary', Load(), lineno=1155, col_offset=16), lineno=1155, col_offset=4), FunctionDef('_reference', arguments([Name('self', Param(), lineno=1156, col_offset=19)], None, None, []), [Return(Call(Attribute(Attribute(Name('self', Load(), lineno=1157, col_offset=15), '__ref', Load(), lineno=1157, col_offset=15), 'copy', Load(), lineno=1157, col_offset=15), [], [], None, None, lineno=1157, col_offset=15), lineno=1157, col_offset=8)], [], lineno=1156, col_offset=4)], [], lineno=1152, col_offset=0), Assign([Name('libreftest', Store(), lineno=1159, col_offset=0)], Str(' Doctest for examples in the library reference: weakref.rst\n\n>>> import weakref\n>>> class Dict(dict):\n...     pass\n...\n>>> obj = Dict(red=1, green=2, blue=3)   # this object is weak referencable\n>>> r = weakref.ref(obj)\n>>> print r() is obj\nTrue\n\n>>> import weakref\n>>> class Object:\n...     pass\n...\n>>> o = Object()\n>>> r = weakref.ref(o)\n>>> o2 = r()\n>>> o is o2\nTrue\n>>> del o, o2\n>>> print r()\nNone\n\n>>> import weakref\n>>> class ExtendedRef(weakref.ref):\n...     def __init__(self, ob, callback=None, **annotations):\n...         super(ExtendedRef, self).__init__(ob, callback)\n...         self.__counter = 0\n...         for k, v in annotations.iteritems():\n...             setattr(self, k, v)\n...     def __call__(self):\n...         \'\'\'Return a pair containing the referent and the number of\n...         times the reference has been called.\n...         \'\'\'\n...         ob = super(ExtendedRef, self).__call__()\n...         if ob is not None:\n...             self.__counter += 1\n...             ob = (ob, self.__counter)\n...         return ob\n...\n>>> class A:   # not in docs from here, just testing the ExtendedRef\n...     pass\n...\n>>> a = A()\n>>> r = ExtendedRef(a, foo=1, bar="baz")\n>>> r.foo\n1\n>>> r.bar\n\'baz\'\n>>> r()[1]\n1\n>>> r()[1]\n2\n>>> r()[0] is a\nTrue\n\n\n>>> import weakref\n>>> _id2obj_dict = weakref.WeakValueDictionary()\n>>> def remember(obj):\n...     oid = id(obj)\n...     _id2obj_dict[oid] = obj\n...     return oid\n...\n>>> def id2obj(oid):\n...     return _id2obj_dict[oid]\n...\n>>> a = A()             # from here, just testing\n>>> a_id = remember(a)\n>>> id2obj(a_id) is a\nTrue\n>>> del a\n>>> try:\n...     id2obj(a_id)\n... except KeyError:\n...     print \'OK\'\n... else:\n...     print \'WeakValueDictionary error\'\nOK\n\n', lineno=1240, col_offset=-1), lineno=1159, col_offset=0), Assign([Name('__test__', Store(), lineno=1242, col_offset=0)], Dict([Str('libreftest', lineno=1242, col_offset=12)], [Name('libreftest', Load(), lineno=1242, col_offset=27)], lineno=1242, col_offset=11), lineno=1242, col_offset=0), FunctionDef('test_main', arguments([], None, None, []), [Expr(Call(Attribute(Name('test_support', Load(), lineno=1245, col_offset=4), 'run_unittest', Load(), lineno=1245, col_offset=4), [Name('ReferencesTestCase', Load(), lineno=1246, col_offset=8), Name('MappingTestCase', Load(), lineno=1247, col_offset=8), Name('WeakValueDictionaryTestCase', Load(), lineno=1248, col_offset=8), Name('WeakKeyDictionaryTestCase', Load(), lineno=1249, col_offset=8), Name('SubclassableWeakrefTestCase', Load(), lineno=1250, col_offset=8)], [], None, None, lineno=1245, col_offset=4), lineno=1245, col_offset=4), Expr(Call(Attribute(Name('test_support', Load(), lineno=1252, col_offset=4), 'run_doctest', Load(), lineno=1252, col_offset=4), [Subscript(Attribute(Name('sys', Load(), lineno=1252, col_offset=29), 'modules', Load(), lineno=1252, col_offset=29), Index(Name('__name__', Load(), lineno=1252, col_offset=41)), Load(), lineno=1252, col_offset=29)], [], None, None, lineno=1252, col_offset=4), lineno=1252, col_offset=4)], [], lineno=1244, col_offset=0), If(Compare(Name('__name__', Load(), lineno=1255, col_offset=3), [Eq()], [Str('__main__', lineno=1255, col_offset=15)], lineno=1255, col_offset=3), [Expr(Call(Name('test_main', Load(), lineno=1256, col_offset=4), [], [], None, None, lineno=1256, col_offset=4), lineno=1256, col_offset=4)], [], lineno=1255, col_offset=0)])
