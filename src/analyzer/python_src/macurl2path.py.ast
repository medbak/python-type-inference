Module([Expr(Str('Macintosh-specific module for conversion between pathnames and URLs.\n\nDo not import directly; use urllib instead.', lineno=3, col_offset=-1), lineno=3, col_offset=-1), Import([alias('urllib', None)], lineno=5, col_offset=0), Import([alias('os', None)], lineno=6, col_offset=0), Assign([Name('__all__', Store(), lineno=8, col_offset=0)], List([Str('url2pathname', lineno=8, col_offset=11), Str('pathname2url', lineno=8, col_offset=26)], Load(), lineno=8, col_offset=10), lineno=8, col_offset=0), FunctionDef('url2pathname', arguments([Name('pathname', Param(), lineno=10, col_offset=17)], None, None, []), [Expr(Str("OS-specific conversion from a relative URL of the 'file' scheme\n    to a file system path; not recommended for general use.", lineno=12, col_offset=-1), lineno=12, col_offset=-1), Assign([Name('tp', Store(), lineno=16, col_offset=4)], Subscript(Call(Attribute(Name('urllib', Load(), lineno=16, col_offset=9), 'splittype', Load(), lineno=16, col_offset=9), [Name('pathname', Load(), lineno=16, col_offset=26)], [], None, None, lineno=16, col_offset=9), Index(Num(0, lineno=16, col_offset=36)), Load(), lineno=16, col_offset=9), lineno=16, col_offset=4), If(BoolOp(And(), [Name('tp', Load(), lineno=17, col_offset=7), Compare(Name('tp', Load(), lineno=17, col_offset=14), [NotEq()], [Str('file', lineno=17, col_offset=20)], lineno=17, col_offset=14)], lineno=17, col_offset=7), [Raise(Name('RuntimeError', Load(), lineno=18, col_offset=14), Str('Cannot convert non-local URL to pathname', lineno=18, col_offset=28), None, lineno=18, col_offset=8)], [], lineno=17, col_offset=4), If(Compare(Subscript(Name('pathname', Load(), lineno=20, col_offset=7), Slice(None, Num(3, lineno=20, col_offset=17), None), Load(), lineno=20, col_offset=7), [Eq()], [Str('///', lineno=20, col_offset=23)], lineno=20, col_offset=7), [Assign([Name('pathname', Store(), lineno=21, col_offset=8)], Subscript(Name('pathname', Load(), lineno=21, col_offset=19), Slice(Num(2, lineno=21, col_offset=28), None, None), Load(), lineno=21, col_offset=19), lineno=21, col_offset=8)], [If(Compare(Subscript(Name('pathname', Load(), lineno=22, col_offset=9), Slice(None, Num(2, lineno=22, col_offset=19), None), Load(), lineno=22, col_offset=9), [Eq()], [Str('//', lineno=22, col_offset=25)], lineno=22, col_offset=9), [Raise(Name('RuntimeError', Load(), lineno=23, col_offset=14), Str('Cannot convert non-local URL to pathname', lineno=23, col_offset=28), None, lineno=23, col_offset=8)], [], lineno=22, col_offset=9)], lineno=20, col_offset=4), Assign([Name('components', Store(), lineno=24, col_offset=4)], Call(Attribute(Name('pathname', Load(), lineno=24, col_offset=17), 'split', Load(), lineno=24, col_offset=17), [Str('/', lineno=24, col_offset=32)], [], None, None, lineno=24, col_offset=17), lineno=24, col_offset=4), Assign([Name('i', Store(), lineno=26, col_offset=4)], Num(0, lineno=26, col_offset=8), lineno=26, col_offset=4), While(Compare(Name('i', Load(), lineno=27, col_offset=10), [Lt()], [Call(Name('len', Load(), lineno=27, col_offset=14), [Name('components', Load(), lineno=27, col_offset=18)], [], None, None, lineno=27, col_offset=14)], lineno=27, col_offset=10), [If(Compare(Subscript(Name('components', Load(), lineno=28, col_offset=11), Index(Name('i', Load(), lineno=28, col_offset=22)), Load(), lineno=28, col_offset=11), [Eq()], [Str('.', lineno=28, col_offset=28)], lineno=28, col_offset=11), [Delete([Subscript(Name('components', Load(), lineno=29, col_offset=16), Index(Name('i', Load(), lineno=29, col_offset=27)), Del(), lineno=29, col_offset=16)], lineno=29, col_offset=12)], [If(BoolOp(And(), [Compare(Subscript(Name('components', Load(), lineno=30, col_offset=13), Index(Name('i', Load(), lineno=30, col_offset=24)), Load(), lineno=30, col_offset=13), [Eq()], [Str('..', lineno=30, col_offset=30)], lineno=30, col_offset=13), Compare(Name('i', Load(), lineno=30, col_offset=39), [Gt()], [Num(0, lineno=30, col_offset=43)], lineno=30, col_offset=39), Compare(Subscript(Name('components', Load(), lineno=31, col_offset=34), Index(BinOp(Name('i', Load(), lineno=31, col_offset=45), Sub(), Num(1, lineno=31, col_offset=47), lineno=31, col_offset=45)), Load(), lineno=31, col_offset=34), [NotIn()], [Tuple([Str('', lineno=31, col_offset=58), Str('..', lineno=31, col_offset=62)], Load(), lineno=31, col_offset=58)], lineno=31, col_offset=34)], lineno=30, col_offset=13), [Delete([Subscript(Name('components', Load(), lineno=32, col_offset=16), Slice(BinOp(Name('i', Load(), lineno=32, col_offset=27), Sub(), Num(1, lineno=32, col_offset=29), lineno=32, col_offset=27), BinOp(Name('i', Load(), lineno=32, col_offset=31), Add(), Num(1, lineno=32, col_offset=33), lineno=32, col_offset=31), None), Del(), lineno=32, col_offset=16)], lineno=32, col_offset=12), Assign([Name('i', Store(), lineno=33, col_offset=12)], BinOp(Name('i', Load(), lineno=33, col_offset=16), Sub(), Num(1, lineno=33, col_offset=18), lineno=33, col_offset=16), lineno=33, col_offset=12)], [If(BoolOp(And(), [Compare(Subscript(Name('components', Load(), lineno=34, col_offset=13), Index(Name('i', Load(), lineno=34, col_offset=24)), Load(), lineno=34, col_offset=13), [Eq()], [Str('', lineno=34, col_offset=30)], lineno=34, col_offset=13), Compare(Name('i', Load(), lineno=34, col_offset=37), [Gt()], [Num(0, lineno=34, col_offset=41)], lineno=34, col_offset=37), Compare(Subscript(Name('components', Load(), lineno=34, col_offset=47), Index(BinOp(Name('i', Load(), lineno=34, col_offset=58), Sub(), Num(1, lineno=34, col_offset=60), lineno=34, col_offset=58)), Load(), lineno=34, col_offset=47), [NotEq()], [Str('', lineno=34, col_offset=66)], lineno=34, col_offset=47)], lineno=34, col_offset=13), [Delete([Subscript(Name('components', Load(), lineno=35, col_offset=16), Index(Name('i', Load(), lineno=35, col_offset=27)), Del(), lineno=35, col_offset=16)], lineno=35, col_offset=12)], [Assign([Name('i', Store(), lineno=37, col_offset=12)], BinOp(Name('i', Load(), lineno=37, col_offset=16), Add(), Num(1, lineno=37, col_offset=18), lineno=37, col_offset=16), lineno=37, col_offset=12)], lineno=34, col_offset=13)], lineno=30, col_offset=13)], lineno=28, col_offset=8)], [], lineno=27, col_offset=4), If(UnaryOp(Not(), Subscript(Name('components', Load(), lineno=38, col_offset=11), Index(Num(0, lineno=38, col_offset=22)), Load(), lineno=38, col_offset=11), lineno=38, col_offset=7), [Assign([Name('rv', Store(), lineno=40, col_offset=8)], Call(Attribute(Str(':', lineno=40, col_offset=13), 'join', Load(), lineno=40, col_offset=13), [Subscript(Name('components', Load(), lineno=40, col_offset=22), Slice(Num(1, lineno=40, col_offset=33), None, None), Load(), lineno=40, col_offset=22)], [], None, None, lineno=40, col_offset=13), lineno=40, col_offset=8)], [Assign([Name('i', Store(), lineno=44, col_offset=8)], Num(0, lineno=44, col_offset=12), lineno=44, col_offset=8), While(BoolOp(And(), [Compare(Name('i', Load(), lineno=45, col_offset=14), [Lt()], [Call(Name('len', Load(), lineno=45, col_offset=18), [Name('components', Load(), lineno=45, col_offset=22)], [], None, None, lineno=45, col_offset=18)], lineno=45, col_offset=14), Compare(Subscript(Name('components', Load(), lineno=45, col_offset=38), Index(Name('i', Load(), lineno=45, col_offset=49)), Load(), lineno=45, col_offset=38), [Eq()], [Str('..', lineno=45, col_offset=55)], lineno=45, col_offset=38)], lineno=45, col_offset=14), [Assign([Subscript(Name('components', Load(), lineno=46, col_offset=12), Index(Name('i', Load(), lineno=46, col_offset=23)), Store(), lineno=46, col_offset=12)], Str('', lineno=46, col_offset=28), lineno=46, col_offset=12), Assign([Name('i', Store(), lineno=47, col_offset=12)], BinOp(Name('i', Load(), lineno=47, col_offset=16), Add(), Num(1, lineno=47, col_offset=20), lineno=47, col_offset=16), lineno=47, col_offset=12)], [], lineno=45, col_offset=8), Assign([Name('rv', Store(), lineno=48, col_offset=8)], BinOp(Str(':', lineno=48, col_offset=13), Add(), Call(Attribute(Str(':', lineno=48, col_offset=19), 'join', Load(), lineno=48, col_offset=19), [Name('components', Load(), lineno=48, col_offset=28)], [], None, None, lineno=48, col_offset=19), lineno=48, col_offset=13), lineno=48, col_offset=8)], lineno=38, col_offset=4), Return(Call(Attribute(Name('urllib', Load(), lineno=50, col_offset=11), 'unquote', Load(), lineno=50, col_offset=11), [Name('rv', Load(), lineno=50, col_offset=26)], [], None, None, lineno=50, col_offset=11), lineno=50, col_offset=4)], [], lineno=10, col_offset=0), FunctionDef('pathname2url', arguments([Name('pathname', Param(), lineno=52, col_offset=17)], None, None, []), [Expr(Str("OS-specific conversion from a file system path to a relative URL\n    of the 'file' scheme; not recommended for general use.", lineno=54, col_offset=-1), lineno=54, col_offset=-1), If(Compare(Str('/', lineno=55, col_offset=7), [In()], [Name('pathname', Load(), lineno=55, col_offset=14)], lineno=55, col_offset=7), [Raise(Name('RuntimeError', Load(), lineno=56, col_offset=14), Str('Cannot convert pathname containing slashes', lineno=56, col_offset=28), None, lineno=56, col_offset=8)], [], lineno=55, col_offset=4), Assign([Name('components', Store(), lineno=57, col_offset=4)], Call(Attribute(Name('pathname', Load(), lineno=57, col_offset=17), 'split', Load(), lineno=57, col_offset=17), [Str(':', lineno=57, col_offset=32)], [], None, None, lineno=57, col_offset=17), lineno=57, col_offset=4), If(Compare(Subscript(Name('components', Load(), lineno=59, col_offset=7), Index(Num(0, lineno=59, col_offset=18)), Load(), lineno=59, col_offset=7), [Eq()], [Str('', lineno=59, col_offset=24)], lineno=59, col_offset=7), [Delete([Subscript(Name('components', Load(), lineno=60, col_offset=12), Index(Num(0, lineno=60, col_offset=23)), Del(), lineno=60, col_offset=12)], lineno=60, col_offset=8)], [], lineno=59, col_offset=4), If(Compare(Subscript(Name('components', Load(), lineno=61, col_offset=7), Index(Num(-1, lineno=61, col_offset=19)), Load(), lineno=61, col_offset=7), [Eq()], [Str('', lineno=61, col_offset=25)], lineno=61, col_offset=7), [Delete([Subscript(Name('components', Load(), lineno=62, col_offset=12), Index(Num(-1, lineno=62, col_offset=24)), Del(), lineno=62, col_offset=12)], lineno=62, col_offset=8)], [], lineno=61, col_offset=4), For(Name('i', Store(), lineno=64, col_offset=8), Call(Name('range', Load(), lineno=64, col_offset=13), [Call(Name('len', Load(), lineno=64, col_offset=19), [Name('components', Load(), lineno=64, col_offset=23)], [], None, None, lineno=64, col_offset=19)], [], None, None, lineno=64, col_offset=13), [If(Compare(Subscript(Name('components', Load(), lineno=65, col_offset=11), Index(Name('i', Load(), lineno=65, col_offset=22)), Load(), lineno=65, col_offset=11), [Eq()], [Str('', lineno=65, col_offset=28)], lineno=65, col_offset=11), [Assign([Subscript(Name('components', Load(), lineno=66, col_offset=12), Index(Name('i', Load(), lineno=66, col_offset=23)), Store(), lineno=66, col_offset=12)], Str('..', lineno=66, col_offset=28), lineno=66, col_offset=12)], [], lineno=65, col_offset=8)], [], lineno=64, col_offset=4), Assign([Name('components', Store(), lineno=68, col_offset=4)], Call(Name('map', Load(), lineno=68, col_offset=17), [Name('_pncomp2url', Load(), lineno=68, col_offset=21), Name('components', Load(), lineno=68, col_offset=34)], [], None, None, lineno=68, col_offset=17), lineno=68, col_offset=4), If(Call(Attribute(Attribute(Name('os', Load(), lineno=70, col_offset=7), 'path', Load(), lineno=70, col_offset=7), 'isabs', Load(), lineno=70, col_offset=7), [Name('pathname', Load(), lineno=70, col_offset=21)], [], None, None, lineno=70, col_offset=7), [Return(BinOp(Str('/', lineno=71, col_offset=15), Add(), Call(Attribute(Str('/', lineno=71, col_offset=21), 'join', Load(), lineno=71, col_offset=21), [Name('components', Load(), lineno=71, col_offset=30)], [], None, None, lineno=71, col_offset=21), lineno=71, col_offset=15), lineno=71, col_offset=8)], [Return(Call(Attribute(Str('/', lineno=73, col_offset=15), 'join', Load(), lineno=73, col_offset=15), [Name('components', Load(), lineno=73, col_offset=24)], [], None, None, lineno=73, col_offset=15), lineno=73, col_offset=8)], lineno=70, col_offset=4)], [], lineno=52, col_offset=0), FunctionDef('_pncomp2url', arguments([Name('component', Param(), lineno=75, col_offset=16)], None, None, []), [Assign([Name('component', Store(), lineno=76, col_offset=4)], Call(Attribute(Name('urllib', Load(), lineno=76, col_offset=16), 'quote', Load(), lineno=76, col_offset=16), [Subscript(Name('component', Load(), lineno=76, col_offset=29), Slice(None, Num(31, lineno=76, col_offset=40), None), Load(), lineno=76, col_offset=29)], [keyword('safe', Str('', lineno=76, col_offset=50))], None, None, lineno=76, col_offset=16), lineno=76, col_offset=4), Return(Name('component', Load(), lineno=77, col_offset=11), lineno=77, col_offset=4)], [], lineno=75, col_offset=0), FunctionDef('test', arguments([], None, None, []), [For(Name('url', Store(), lineno=80, col_offset=8), List([Str('index.html', lineno=80, col_offset=16), Str('bar/index.html', lineno=81, col_offset=16), Str('/foo/bar/index.html', lineno=82, col_offset=16), Str('/foo/bar/', lineno=83, col_offset=16), Str('/', lineno=84, col_offset=16)], Load(), lineno=80, col_offset=15), [Print(None, [BinOp(Str('%r -> %r', lineno=85, col_offset=14), Mod(), Tuple([Name('url', Load(), lineno=85, col_offset=28), Call(Name('url2pathname', Load(), lineno=85, col_offset=33), [Name('url', Load(), lineno=85, col_offset=46)], [], None, None, lineno=85, col_offset=33)], Load(), lineno=85, col_offset=28), lineno=85, col_offset=14)], True, lineno=85, col_offset=8)], [], lineno=80, col_offset=4), For(Name('path', Store(), lineno=86, col_offset=8), List([Str('drive:', lineno=86, col_offset=17), Str('drive:dir:', lineno=87, col_offset=17), Str('drive:dir:file', lineno=88, col_offset=17), Str('drive:file', lineno=89, col_offset=17), Str('file', lineno=90, col_offset=17), Str(':file', lineno=91, col_offset=17), Str(':dir:', lineno=92, col_offset=17), Str(':dir:file', lineno=93, col_offset=17)], Load(), lineno=86, col_offset=16), [Print(None, [BinOp(Str('%r -> %r', lineno=94, col_offset=14), Mod(), Tuple([Name('path', Load(), lineno=94, col_offset=28), Call(Name('pathname2url', Load(), lineno=94, col_offset=34), [Name('path', Load(), lineno=94, col_offset=47)], [], None, None, lineno=94, col_offset=34)], Load(), lineno=94, col_offset=28), lineno=94, col_offset=14)], True, lineno=94, col_offset=8)], [], lineno=86, col_offset=4)], [], lineno=79, col_offset=0), If(Compare(Name('__name__', Load(), lineno=96, col_offset=3), [Eq()], [Str('__main__', lineno=96, col_offset=15)], lineno=96, col_offset=3), [Expr(Call(Name('test', Load(), lineno=97, col_offset=4), [], [], None, None, lineno=97, col_offset=4), lineno=97, col_offset=4)], [], lineno=96, col_offset=0)])
