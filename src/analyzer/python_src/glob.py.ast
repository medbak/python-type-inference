Module([Expr(Str('Filename globbing utility.', lineno=1, col_offset=0), lineno=1, col_offset=0), Import([alias('sys', None)], lineno=3, col_offset=0), Import([alias('os', None)], lineno=4, col_offset=0), Import([alias('re', None)], lineno=5, col_offset=0), Import([alias('fnmatch', None)], lineno=6, col_offset=0), Assign([Name('__all__', Store(), lineno=8, col_offset=0)], List([Str('glob', lineno=8, col_offset=11), Str('iglob', lineno=8, col_offset=19)], Load(), lineno=8, col_offset=10), lineno=8, col_offset=0), FunctionDef('glob', arguments([Name('pathname', Param(), lineno=10, col_offset=9)], None, None, []), [Expr(Str('Return a list of paths matching a pathname pattern.\n\n    The pattern may contain simple shell-style wildcards a la fnmatch.\n\n    ', lineno=15, col_offset=-1), lineno=15, col_offset=-1), Return(Call(Name('list', Load(), lineno=16, col_offset=11), [Call(Name('iglob', Load(), lineno=16, col_offset=16), [Name('pathname', Load(), lineno=16, col_offset=22)], [], None, None, lineno=16, col_offset=16)], [], None, None, lineno=16, col_offset=11), lineno=16, col_offset=4)], [], lineno=10, col_offset=0), FunctionDef('iglob', arguments([Name('pathname', Param(), lineno=18, col_offset=10)], None, None, []), [Expr(Str('Return an iterator which yields the paths matching a pathname pattern.\n\n    The pattern may contain simple shell-style wildcards a la fnmatch.\n\n    ', lineno=23, col_offset=-1), lineno=23, col_offset=-1), If(UnaryOp(Not(), Call(Name('has_magic', Load(), lineno=24, col_offset=11), [Name('pathname', Load(), lineno=24, col_offset=21)], [], None, None, lineno=24, col_offset=11), lineno=24, col_offset=7), [If(Call(Attribute(Attribute(Name('os', Load(), lineno=25, col_offset=11), 'path', Load(), lineno=25, col_offset=11), 'lexists', Load(), lineno=25, col_offset=11), [Name('pathname', Load(), lineno=25, col_offset=27)], [], None, None, lineno=25, col_offset=11), [Expr(Yield(Name('pathname', Load(), lineno=26, col_offset=18), lineno=26, col_offset=12), lineno=26, col_offset=12)], [], lineno=25, col_offset=8), Return(None, lineno=27, col_offset=8)], [], lineno=24, col_offset=4), Assign([Tuple([Name('dirname', Store(), lineno=28, col_offset=4), Name('basename', Store(), lineno=28, col_offset=13)], Store(), lineno=28, col_offset=4)], Call(Attribute(Attribute(Name('os', Load(), lineno=28, col_offset=24), 'path', Load(), lineno=28, col_offset=24), 'split', Load(), lineno=28, col_offset=24), [Name('pathname', Load(), lineno=28, col_offset=38)], [], None, None, lineno=28, col_offset=24), lineno=28, col_offset=4), If(UnaryOp(Not(), Name('dirname', Load(), lineno=29, col_offset=11), lineno=29, col_offset=7), [For(Name('name', Store(), lineno=30, col_offset=12), Call(Name('glob1', Load(), lineno=30, col_offset=20), [Attribute(Name('os', Load(), lineno=30, col_offset=26), 'curdir', Load(), lineno=30, col_offset=26), Name('basename', Load(), lineno=30, col_offset=37)], [], None, None, lineno=30, col_offset=20), [Expr(Yield(Name('name', Load(), lineno=31, col_offset=18), lineno=31, col_offset=12), lineno=31, col_offset=12)], [], lineno=30, col_offset=8), Return(None, lineno=32, col_offset=8)], [], lineno=29, col_offset=4), If(Call(Name('has_magic', Load(), lineno=33, col_offset=7), [Name('dirname', Load(), lineno=33, col_offset=17)], [], None, None, lineno=33, col_offset=7), [Assign([Name('dirs', Store(), lineno=34, col_offset=8)], Call(Name('iglob', Load(), lineno=34, col_offset=15), [Name('dirname', Load(), lineno=34, col_offset=21)], [], None, None, lineno=34, col_offset=15), lineno=34, col_offset=8)], [Assign([Name('dirs', Store(), lineno=36, col_offset=8)], List([Name('dirname', Load(), lineno=36, col_offset=16)], Load(), lineno=36, col_offset=15), lineno=36, col_offset=8)], lineno=33, col_offset=4), If(Call(Name('has_magic', Load(), lineno=37, col_offset=7), [Name('basename', Load(), lineno=37, col_offset=17)], [], None, None, lineno=37, col_offset=7), [Assign([Name('glob_in_dir', Store(), lineno=38, col_offset=8)], Name('glob1', Load(), lineno=38, col_offset=22), lineno=38, col_offset=8)], [Assign([Name('glob_in_dir', Store(), lineno=40, col_offset=8)], Name('glob0', Load(), lineno=40, col_offset=22), lineno=40, col_offset=8)], lineno=37, col_offset=4), For(Name('dirname', Store(), lineno=41, col_offset=8), Name('dirs', Load(), lineno=41, col_offset=19), [For(Name('name', Store(), lineno=42, col_offset=12), Call(Name('glob_in_dir', Load(), lineno=42, col_offset=20), [Name('dirname', Load(), lineno=42, col_offset=32), Name('basename', Load(), lineno=42, col_offset=41)], [], None, None, lineno=42, col_offset=20), [Expr(Yield(Call(Attribute(Attribute(Name('os', Load(), lineno=43, col_offset=18), 'path', Load(), lineno=43, col_offset=18), 'join', Load(), lineno=43, col_offset=18), [Name('dirname', Load(), lineno=43, col_offset=31), Name('name', Load(), lineno=43, col_offset=40)], [], None, None, lineno=43, col_offset=18), lineno=43, col_offset=12), lineno=43, col_offset=12)], [], lineno=42, col_offset=8)], [], lineno=41, col_offset=4)], [], lineno=18, col_offset=0), FunctionDef('glob1', arguments([Name('dirname', Param(), lineno=49, col_offset=10), Name('pattern', Param(), lineno=49, col_offset=19)], None, None, []), [If(UnaryOp(Not(), Name('dirname', Load(), lineno=50, col_offset=11), lineno=50, col_offset=7), [Assign([Name('dirname', Store(), lineno=51, col_offset=8)], Attribute(Name('os', Load(), lineno=51, col_offset=18), 'curdir', Load(), lineno=51, col_offset=18), lineno=51, col_offset=8)], [], lineno=50, col_offset=4), If(BoolOp(And(), [Call(Name('isinstance', Load(), lineno=52, col_offset=7), [Name('pattern', Load(), lineno=52, col_offset=18), Name('unicode', Load(), lineno=52, col_offset=27)], [], None, None, lineno=52, col_offset=7), UnaryOp(Not(), Call(Name('isinstance', Load(), lineno=52, col_offset=44), [Name('dirname', Load(), lineno=52, col_offset=55), Name('unicode', Load(), lineno=52, col_offset=64)], [], None, None, lineno=52, col_offset=44), lineno=52, col_offset=40)], lineno=52, col_offset=7), [Assign([Name('dirname', Store(), lineno=53, col_offset=8)], Call(Name('unicode', Load(), lineno=53, col_offset=18), [Name('dirname', Load(), lineno=53, col_offset=26), BoolOp(Or(), [Call(Attribute(Name('sys', Load(), lineno=53, col_offset=35), 'getfilesystemencoding', Load(), lineno=53, col_offset=35), [], [], None, None, lineno=53, col_offset=35), Call(Attribute(Name('sys', Load(), lineno=54, col_offset=35), 'getdefaultencoding', Load(), lineno=54, col_offset=35), [], [], None, None, lineno=54, col_offset=35)], lineno=53, col_offset=35)], [], None, None, lineno=53, col_offset=18), lineno=53, col_offset=8)], [], lineno=52, col_offset=4), TryExcept([Assign([Name('names', Store(), lineno=56, col_offset=8)], Call(Attribute(Name('os', Load(), lineno=56, col_offset=16), 'listdir', Load(), lineno=56, col_offset=16), [Name('dirname', Load(), lineno=56, col_offset=27)], [], None, None, lineno=56, col_offset=16), lineno=56, col_offset=8)], [ExceptHandler(Attribute(Name('os', Load(), lineno=57, col_offset=11), 'error', Load(), lineno=57, col_offset=11), None, [Return(List([], Load(), lineno=58, col_offset=15), lineno=58, col_offset=8)], lineno=57, col_offset=4)], [], lineno=55, col_offset=4), If(Compare(Subscript(Name('pattern', Load(), lineno=59, col_offset=7), Index(Num(0, lineno=59, col_offset=15)), Load(), lineno=59, col_offset=7), [NotEq()], [Str('.', lineno=59, col_offset=21)], lineno=59, col_offset=7), [Assign([Name('names', Store(), lineno=60, col_offset=8)], Call(Name('filter', Load(), lineno=60, col_offset=16), [Lambda(arguments([Name('x', Param(), lineno=60, col_offset=30)], None, None, []), Compare(Subscript(Name('x', Load(), lineno=60, col_offset=33), Index(Num(0, lineno=60, col_offset=35)), Load(), lineno=60, col_offset=33), [NotEq()], [Str('.', lineno=60, col_offset=41)], lineno=60, col_offset=33), lineno=60, col_offset=23), Name('names', Load(), lineno=60, col_offset=46)], [], None, None, lineno=60, col_offset=16), lineno=60, col_offset=8)], [], lineno=59, col_offset=4), Return(Call(Attribute(Name('fnmatch', Load(), lineno=61, col_offset=11), 'filter', Load(), lineno=61, col_offset=11), [Name('names', Load(), lineno=61, col_offset=26), Name('pattern', Load(), lineno=61, col_offset=33)], [], None, None, lineno=61, col_offset=11), lineno=61, col_offset=4)], [], lineno=49, col_offset=0), FunctionDef('glob0', arguments([Name('dirname', Param(), lineno=63, col_offset=10), Name('basename', Param(), lineno=63, col_offset=19)], None, None, []), [If(Compare(Name('basename', Load(), lineno=64, col_offset=7), [Eq()], [Str('', lineno=64, col_offset=19)], lineno=64, col_offset=7), [If(Call(Attribute(Attribute(Name('os', Load(), lineno=67, col_offset=11), 'path', Load(), lineno=67, col_offset=11), 'isdir', Load(), lineno=67, col_offset=11), [Name('dirname', Load(), lineno=67, col_offset=25)], [], None, None, lineno=67, col_offset=11), [Return(List([Name('basename', Load(), lineno=68, col_offset=20)], Load(), lineno=68, col_offset=19), lineno=68, col_offset=12)], [], lineno=67, col_offset=8)], [If(Call(Attribute(Attribute(Name('os', Load(), lineno=70, col_offset=11), 'path', Load(), lineno=70, col_offset=11), 'lexists', Load(), lineno=70, col_offset=11), [Call(Attribute(Attribute(Name('os', Load(), lineno=70, col_offset=27), 'path', Load(), lineno=70, col_offset=27), 'join', Load(), lineno=70, col_offset=27), [Name('dirname', Load(), lineno=70, col_offset=40), Name('basename', Load(), lineno=70, col_offset=49)], [], None, None, lineno=70, col_offset=27)], [], None, None, lineno=70, col_offset=11), [Return(List([Name('basename', Load(), lineno=71, col_offset=20)], Load(), lineno=71, col_offset=19), lineno=71, col_offset=12)], [], lineno=70, col_offset=8)], lineno=64, col_offset=4), Return(List([], Load(), lineno=72, col_offset=11), lineno=72, col_offset=4)], [], lineno=63, col_offset=0), Assign([Name('magic_check', Store(), lineno=75, col_offset=0)], Call(Attribute(Name('re', Load(), lineno=75, col_offset=14), 'compile', Load(), lineno=75, col_offset=14), [Str('[*?[]', lineno=75, col_offset=25)], [], None, None, lineno=75, col_offset=14), lineno=75, col_offset=0), FunctionDef('has_magic', arguments([Name('s', Param(), lineno=77, col_offset=14)], None, None, []), [Return(Compare(Call(Attribute(Name('magic_check', Load(), lineno=78, col_offset=11), 'search', Load(), lineno=78, col_offset=11), [Name('s', Load(), lineno=78, col_offset=30)], [], None, None, lineno=78, col_offset=11), [IsNot()], [Name('None', Load(), lineno=78, col_offset=40)], lineno=78, col_offset=11), lineno=78, col_offset=4)], [], lineno=77, col_offset=0)])
