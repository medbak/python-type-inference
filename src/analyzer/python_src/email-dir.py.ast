Module([Expr(Str('Send the contents of a directory as a MIME message.', lineno=3, col_offset=0), lineno=3, col_offset=0), Import([alias('os', None)], lineno=5, col_offset=0), Import([alias('sys', None)], lineno=6, col_offset=0), Import([alias('smtplib', None)], lineno=7, col_offset=0), Import([alias('mimetypes', None)], lineno=9, col_offset=0), ImportFrom('optparse', [alias('OptionParser', None)], 0, lineno=11, col_offset=0), ImportFrom('email', [alias('encoders', None)], 0, lineno=13, col_offset=0), ImportFrom('email.message', [alias('Message', None)], 0, lineno=14, col_offset=0), ImportFrom('email.mime.audio', [alias('MIMEAudio', None)], 0, lineno=15, col_offset=0), ImportFrom('email.mime.base', [alias('MIMEBase', None)], 0, lineno=16, col_offset=0), ImportFrom('email.mime.image', [alias('MIMEImage', None)], 0, lineno=17, col_offset=0), ImportFrom('email.mime.multipart', [alias('MIMEMultipart', None)], 0, lineno=18, col_offset=0), ImportFrom('email.mime.text', [alias('MIMEText', None)], 0, lineno=19, col_offset=0), Assign([Name('COMMASPACE', Store(), lineno=21, col_offset=0)], Str(', ', lineno=21, col_offset=13), lineno=21, col_offset=0), FunctionDef('main', arguments([], None, None, []), [Assign([Name('parser', Store(), lineno=25, col_offset=4)], Call(Name('OptionParser', Load(), lineno=25, col_offset=13), [], [keyword('usage', Str('Send the contents of a directory as a MIME message.\n\nUsage: %prog [options]\n\nUnless the -o option is given, the email is sent by forwarding to your local\nSMTP server, which then does the normal delivery process.  Your local machine\nmust be running an SMTP server.\n', lineno=33, col_offset=-1))], None, None, lineno=25, col_offset=13), lineno=25, col_offset=4), Expr(Call(Attribute(Name('parser', Load(), lineno=34, col_offset=4), 'add_option', Load(), lineno=34, col_offset=4), [Str('-d', lineno=34, col_offset=22), Str('--directory', lineno=34, col_offset=28)], [keyword('type', Str('string', lineno=35, col_offset=27)), keyword('action', Str('store', lineno=35, col_offset=44)), keyword('help', Str("Mail the contents of the specified directory,\n                      otherwise use the current directory.  Only the regular\n                      files in the directory are sent, and we don't recurse to\n                      subdirectories.", lineno=39, col_offset=-1))], None, None, lineno=34, col_offset=4), lineno=34, col_offset=4), Expr(Call(Attribute(Name('parser', Load(), lineno=40, col_offset=4), 'add_option', Load(), lineno=40, col_offset=4), [Str('-o', lineno=40, col_offset=22), Str('--output', lineno=40, col_offset=28)], [keyword('type', Str('string', lineno=41, col_offset=27)), keyword('action', Str('store', lineno=41, col_offset=44)), keyword('metavar', Str('FILE', lineno=41, col_offset=61)), keyword('help', Str('Print the composed message to FILE instead of\n                      sending the message to the SMTP server.', lineno=43, col_offset=-1))], None, None, lineno=40, col_offset=4), lineno=40, col_offset=4), Expr(Call(Attribute(Name('parser', Load(), lineno=44, col_offset=4), 'add_option', Load(), lineno=44, col_offset=4), [Str('-s', lineno=44, col_offset=22), Str('--sender', lineno=44, col_offset=28)], [keyword('type', Str('string', lineno=45, col_offset=27)), keyword('action', Str('store', lineno=45, col_offset=44)), keyword('metavar', Str('SENDER', lineno=45, col_offset=61)), keyword('help', Str('The value of the From: header (required)', lineno=46, col_offset=27))], None, None, lineno=44, col_offset=4), lineno=44, col_offset=4), Expr(Call(Attribute(Name('parser', Load(), lineno=47, col_offset=4), 'add_option', Load(), lineno=47, col_offset=4), [Str('-r', lineno=47, col_offset=22), Str('--recipient', lineno=47, col_offset=28)], [keyword('type', Str('string', lineno=48, col_offset=27)), keyword('action', Str('append', lineno=48, col_offset=44)), keyword('metavar', Str('RECIPIENT', lineno=48, col_offset=62)), keyword('default', List([], Load(), lineno=49, col_offset=30)), keyword('dest', Str('recipients', lineno=49, col_offset=39)), keyword('help', Str('A To: header value (at least one required)', lineno=50, col_offset=27))], None, None, lineno=47, col_offset=4), lineno=47, col_offset=4), Assign([Tuple([Name('opts', Store(), lineno=51, col_offset=4), Name('args', Store(), lineno=51, col_offset=10)], Store(), lineno=51, col_offset=4)], Call(Attribute(Name('parser', Load(), lineno=51, col_offset=17), 'parse_args', Load(), lineno=51, col_offset=17), [], [], None, None, lineno=51, col_offset=17), lineno=51, col_offset=4), If(BoolOp(Or(), [UnaryOp(Not(), Attribute(Name('opts', Load(), lineno=52, col_offset=11), 'sender', Load(), lineno=52, col_offset=11), lineno=52, col_offset=7), UnaryOp(Not(), Attribute(Name('opts', Load(), lineno=52, col_offset=30), 'recipients', Load(), lineno=52, col_offset=30), lineno=52, col_offset=26)], lineno=52, col_offset=7), [Expr(Call(Attribute(Name('parser', Load(), lineno=53, col_offset=8), 'print_help', Load(), lineno=53, col_offset=8), [], [], None, None, lineno=53, col_offset=8), lineno=53, col_offset=8), Expr(Call(Attribute(Name('sys', Load(), lineno=54, col_offset=8), 'exit', Load(), lineno=54, col_offset=8), [Num(1, lineno=54, col_offset=17)], [], None, None, lineno=54, col_offset=8), lineno=54, col_offset=8)], [], lineno=52, col_offset=4), Assign([Name('directory', Store(), lineno=55, col_offset=4)], Attribute(Name('opts', Load(), lineno=55, col_offset=16), 'directory', Load(), lineno=55, col_offset=16), lineno=55, col_offset=4), If(UnaryOp(Not(), Name('directory', Load(), lineno=56, col_offset=11), lineno=56, col_offset=7), [Assign([Name('directory', Store(), lineno=57, col_offset=8)], Str('.', lineno=57, col_offset=20), lineno=57, col_offset=8)], [], lineno=56, col_offset=4), Assign([Name('outer', Store(), lineno=59, col_offset=4)], Call(Name('MIMEMultipart', Load(), lineno=59, col_offset=12), [], [], None, None, lineno=59, col_offset=12), lineno=59, col_offset=4), Assign([Subscript(Name('outer', Load(), lineno=60, col_offset=4), Index(Str('Subject', lineno=60, col_offset=10)), Store(), lineno=60, col_offset=4)], BinOp(Str('Contents of directory %s', lineno=60, col_offset=23), Mod(), Call(Attribute(Attribute(Name('os', Load(), lineno=60, col_offset=52), 'path', Load(), lineno=60, col_offset=52), 'abspath', Load(), lineno=60, col_offset=52), [Name('directory', Load(), lineno=60, col_offset=68)], [], None, None, lineno=60, col_offset=52), lineno=60, col_offset=23), lineno=60, col_offset=4), Assign([Subscript(Name('outer', Load(), lineno=61, col_offset=4), Index(Str('To', lineno=61, col_offset=10)), Store(), lineno=61, col_offset=4)], Call(Attribute(Name('COMMASPACE', Load(), lineno=61, col_offset=18), 'join', Load(), lineno=61, col_offset=18), [Attribute(Name('opts', Load(), lineno=61, col_offset=34), 'recipients', Load(), lineno=61, col_offset=34)], [], None, None, lineno=61, col_offset=18), lineno=61, col_offset=4), Assign([Subscript(Name('outer', Load(), lineno=62, col_offset=4), Index(Str('From', lineno=62, col_offset=10)), Store(), lineno=62, col_offset=4)], Attribute(Name('opts', Load(), lineno=62, col_offset=20), 'sender', Load(), lineno=62, col_offset=20), lineno=62, col_offset=4), Assign([Attribute(Name('outer', Load(), lineno=63, col_offset=4), 'preamble', Store(), lineno=63, col_offset=4)], Str('You will not see this in a MIME-aware mail reader.\n', lineno=63, col_offset=21), lineno=63, col_offset=4), For(Name('filename', Store(), lineno=65, col_offset=8), Call(Attribute(Name('os', Load(), lineno=65, col_offset=20), 'listdir', Load(), lineno=65, col_offset=20), [Name('directory', Load(), lineno=65, col_offset=31)], [], None, None, lineno=65, col_offset=20), [Assign([Name('path', Store(), lineno=66, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=66, col_offset=15), 'path', Load(), lineno=66, col_offset=15), 'join', Load(), lineno=66, col_offset=15), [Name('directory', Load(), lineno=66, col_offset=28), Name('filename', Load(), lineno=66, col_offset=39)], [], None, None, lineno=66, col_offset=15), lineno=66, col_offset=8), If(UnaryOp(Not(), Call(Attribute(Attribute(Name('os', Load(), lineno=67, col_offset=15), 'path', Load(), lineno=67, col_offset=15), 'isfile', Load(), lineno=67, col_offset=15), [Name('path', Load(), lineno=67, col_offset=30)], [], None, None, lineno=67, col_offset=15), lineno=67, col_offset=11), [Continue( lineno=68, col_offset=12)], [], lineno=67, col_offset=8), Assign([Tuple([Name('ctype', Store(), lineno=72, col_offset=8), Name('encoding', Store(), lineno=72, col_offset=15)], Store(), lineno=72, col_offset=8)], Call(Attribute(Name('mimetypes', Load(), lineno=72, col_offset=26), 'guess_type', Load(), lineno=72, col_offset=26), [Name('path', Load(), lineno=72, col_offset=47)], [], None, None, lineno=72, col_offset=26), lineno=72, col_offset=8), If(BoolOp(Or(), [Compare(Name('ctype', Load(), lineno=73, col_offset=11), [Is()], [Name('None', Load(), lineno=73, col_offset=20)], lineno=73, col_offset=11), Compare(Name('encoding', Load(), lineno=73, col_offset=28), [IsNot()], [Name('None', Load(), lineno=73, col_offset=44)], lineno=73, col_offset=28)], lineno=73, col_offset=11), [Assign([Name('ctype', Store(), lineno=76, col_offset=12)], Str('application/octet-stream', lineno=76, col_offset=20), lineno=76, col_offset=12)], [], lineno=73, col_offset=8), Assign([Tuple([Name('maintype', Store(), lineno=77, col_offset=8), Name('subtype', Store(), lineno=77, col_offset=18)], Store(), lineno=77, col_offset=8)], Call(Attribute(Name('ctype', Load(), lineno=77, col_offset=28), 'split', Load(), lineno=77, col_offset=28), [Str('/', lineno=77, col_offset=40), Num(1, lineno=77, col_offset=45)], [], None, None, lineno=77, col_offset=28), lineno=77, col_offset=8), If(Compare(Name('maintype', Load(), lineno=78, col_offset=11), [Eq()], [Str('text', lineno=78, col_offset=23)], lineno=78, col_offset=11), [Assign([Name('fp', Store(), lineno=79, col_offset=12)], Call(Name('open', Load(), lineno=79, col_offset=17), [Name('path', Load(), lineno=79, col_offset=22)], [], None, None, lineno=79, col_offset=17), lineno=79, col_offset=12), Assign([Name('msg', Store(), lineno=81, col_offset=12)], Call(Name('MIMEText', Load(), lineno=81, col_offset=18), [Call(Attribute(Name('fp', Load(), lineno=81, col_offset=27), 'read', Load(), lineno=81, col_offset=27), [], [], None, None, lineno=81, col_offset=27)], [keyword('_subtype', Name('subtype', Load(), lineno=81, col_offset=47))], None, None, lineno=81, col_offset=18), lineno=81, col_offset=12), Expr(Call(Attribute(Name('fp', Load(), lineno=82, col_offset=12), 'close', Load(), lineno=82, col_offset=12), [], [], None, None, lineno=82, col_offset=12), lineno=82, col_offset=12)], [If(Compare(Name('maintype', Load(), lineno=83, col_offset=13), [Eq()], [Str('image', lineno=83, col_offset=25)], lineno=83, col_offset=13), [Assign([Name('fp', Store(), lineno=84, col_offset=12)], Call(Name('open', Load(), lineno=84, col_offset=17), [Name('path', Load(), lineno=84, col_offset=22), Str('rb', lineno=84, col_offset=28)], [], None, None, lineno=84, col_offset=17), lineno=84, col_offset=12), Assign([Name('msg', Store(), lineno=85, col_offset=12)], Call(Name('MIMEImage', Load(), lineno=85, col_offset=18), [Call(Attribute(Name('fp', Load(), lineno=85, col_offset=28), 'read', Load(), lineno=85, col_offset=28), [], [], None, None, lineno=85, col_offset=28)], [keyword('_subtype', Name('subtype', Load(), lineno=85, col_offset=48))], None, None, lineno=85, col_offset=18), lineno=85, col_offset=12), Expr(Call(Attribute(Name('fp', Load(), lineno=86, col_offset=12), 'close', Load(), lineno=86, col_offset=12), [], [], None, None, lineno=86, col_offset=12), lineno=86, col_offset=12)], [If(Compare(Name('maintype', Load(), lineno=87, col_offset=13), [Eq()], [Str('audio', lineno=87, col_offset=25)], lineno=87, col_offset=13), [Assign([Name('fp', Store(), lineno=88, col_offset=12)], Call(Name('open', Load(), lineno=88, col_offset=17), [Name('path', Load(), lineno=88, col_offset=22), Str('rb', lineno=88, col_offset=28)], [], None, None, lineno=88, col_offset=17), lineno=88, col_offset=12), Assign([Name('msg', Store(), lineno=89, col_offset=12)], Call(Name('MIMEAudio', Load(), lineno=89, col_offset=18), [Call(Attribute(Name('fp', Load(), lineno=89, col_offset=28), 'read', Load(), lineno=89, col_offset=28), [], [], None, None, lineno=89, col_offset=28)], [keyword('_subtype', Name('subtype', Load(), lineno=89, col_offset=48))], None, None, lineno=89, col_offset=18), lineno=89, col_offset=12), Expr(Call(Attribute(Name('fp', Load(), lineno=90, col_offset=12), 'close', Load(), lineno=90, col_offset=12), [], [], None, None, lineno=90, col_offset=12), lineno=90, col_offset=12)], [Assign([Name('fp', Store(), lineno=92, col_offset=12)], Call(Name('open', Load(), lineno=92, col_offset=17), [Name('path', Load(), lineno=92, col_offset=22), Str('rb', lineno=92, col_offset=28)], [], None, None, lineno=92, col_offset=17), lineno=92, col_offset=12), Assign([Name('msg', Store(), lineno=93, col_offset=12)], Call(Name('MIMEBase', Load(), lineno=93, col_offset=18), [Name('maintype', Load(), lineno=93, col_offset=27), Name('subtype', Load(), lineno=93, col_offset=37)], [], None, None, lineno=93, col_offset=18), lineno=93, col_offset=12), Expr(Call(Attribute(Name('msg', Load(), lineno=94, col_offset=12), 'set_payload', Load(), lineno=94, col_offset=12), [Call(Attribute(Name('fp', Load(), lineno=94, col_offset=28), 'read', Load(), lineno=94, col_offset=28), [], [], None, None, lineno=94, col_offset=28)], [], None, None, lineno=94, col_offset=12), lineno=94, col_offset=12), Expr(Call(Attribute(Name('fp', Load(), lineno=95, col_offset=12), 'close', Load(), lineno=95, col_offset=12), [], [], None, None, lineno=95, col_offset=12), lineno=95, col_offset=12), Expr(Call(Attribute(Name('encoders', Load(), lineno=97, col_offset=12), 'encode_base64', Load(), lineno=97, col_offset=12), [Name('msg', Load(), lineno=97, col_offset=35)], [], None, None, lineno=97, col_offset=12), lineno=97, col_offset=12)], lineno=87, col_offset=13)], lineno=83, col_offset=13)], lineno=78, col_offset=8), Expr(Call(Attribute(Name('msg', Load(), lineno=99, col_offset=8), 'add_header', Load(), lineno=99, col_offset=8), [Str('Content-Disposition', lineno=99, col_offset=23), Str('attachment', lineno=99, col_offset=46)], [keyword('filename', Name('filename', Load(), lineno=99, col_offset=69))], None, None, lineno=99, col_offset=8), lineno=99, col_offset=8), Expr(Call(Attribute(Name('outer', Load(), lineno=100, col_offset=8), 'attach', Load(), lineno=100, col_offset=8), [Name('msg', Load(), lineno=100, col_offset=21)], [], None, None, lineno=100, col_offset=8), lineno=100, col_offset=8)], [], lineno=65, col_offset=4), Assign([Name('composed', Store(), lineno=102, col_offset=4)], Call(Attribute(Name('outer', Load(), lineno=102, col_offset=15), 'as_string', Load(), lineno=102, col_offset=15), [], [], None, None, lineno=102, col_offset=15), lineno=102, col_offset=4), If(Attribute(Name('opts', Load(), lineno=103, col_offset=7), 'output', Load(), lineno=103, col_offset=7), [Assign([Name('fp', Store(), lineno=104, col_offset=8)], Call(Name('open', Load(), lineno=104, col_offset=13), [Attribute(Name('opts', Load(), lineno=104, col_offset=18), 'output', Load(), lineno=104, col_offset=18), Str('w', lineno=104, col_offset=31)], [], None, None, lineno=104, col_offset=13), lineno=104, col_offset=8), Expr(Call(Attribute(Name('fp', Load(), lineno=105, col_offset=8), 'write', Load(), lineno=105, col_offset=8), [Name('composed', Load(), lineno=105, col_offset=17)], [], None, None, lineno=105, col_offset=8), lineno=105, col_offset=8), Expr(Call(Attribute(Name('fp', Load(), lineno=106, col_offset=8), 'close', Load(), lineno=106, col_offset=8), [], [], None, None, lineno=106, col_offset=8), lineno=106, col_offset=8)], [Assign([Name('s', Store(), lineno=108, col_offset=8)], Call(Attribute(Name('smtplib', Load(), lineno=108, col_offset=12), 'SMTP', Load(), lineno=108, col_offset=12), [], [], None, None, lineno=108, col_offset=12), lineno=108, col_offset=8), Expr(Call(Attribute(Name('s', Load(), lineno=109, col_offset=8), 'sendmail', Load(), lineno=109, col_offset=8), [Attribute(Name('opts', Load(), lineno=109, col_offset=19), 'sender', Load(), lineno=109, col_offset=19), Attribute(Name('opts', Load(), lineno=109, col_offset=32), 'recipients', Load(), lineno=109, col_offset=32), Name('composed', Load(), lineno=109, col_offset=49)], [], None, None, lineno=109, col_offset=8), lineno=109, col_offset=8), Expr(Call(Attribute(Name('s', Load(), lineno=110, col_offset=8), 'quit', Load(), lineno=110, col_offset=8), [], [], None, None, lineno=110, col_offset=8), lineno=110, col_offset=8)], lineno=103, col_offset=4)], [], lineno=24, col_offset=0), If(Compare(Name('__name__', Load(), lineno=113, col_offset=3), [Eq()], [Str('__main__', lineno=113, col_offset=15)], lineno=113, col_offset=3), [Expr(Call(Name('main', Load(), lineno=114, col_offset=4), [], [], None, None, lineno=114, col_offset=4), lineno=114, col_offset=4)], [], lineno=113, col_offset=0)])
