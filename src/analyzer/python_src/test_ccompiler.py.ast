Module([Expr(Str('Tests for distutils.ccompiler.', lineno=1, col_offset=0), lineno=1, col_offset=0), Import([alias('os', None)], lineno=2, col_offset=0), Import([alias('unittest', None)], lineno=3, col_offset=0), ImportFrom('test.test_support', [alias('captured_stdout', None)], 0, lineno=4, col_offset=0), ImportFrom('distutils.ccompiler', [alias('gen_lib_options', None), alias('CCompiler', None), alias('get_default_compiler', None), alias('customize_compiler', None)], 0, lineno=6, col_offset=0), ImportFrom('distutils', [alias('debug', None)], 0, lineno=8, col_offset=0), ImportFrom('distutils.tests', [alias('support', None)], 0, lineno=9, col_offset=0), ClassDef('FakeCompiler', [Name('object', Load(), lineno=11, col_offset=19)], [FunctionDef('library_dir_option', arguments([Name('self', Param(), lineno=12, col_offset=27), Name('dir', Param(), lineno=12, col_offset=33)], None, None, []), [Return(BinOp(Str('-L', lineno=13, col_offset=15), Add(), Name('dir', Load(), lineno=13, col_offset=22), lineno=13, col_offset=15), lineno=13, col_offset=8)], [], lineno=12, col_offset=4), FunctionDef('runtime_library_dir_option', arguments([Name('self', Param(), lineno=15, col_offset=35), Name('dir', Param(), lineno=15, col_offset=41)], None, None, []), [Return(List([Str('-cool', lineno=16, col_offset=16), BinOp(Str('-R', lineno=16, col_offset=25), Add(), Name('dir', Load(), lineno=16, col_offset=32), lineno=16, col_offset=25)], Load(), lineno=16, col_offset=15), lineno=16, col_offset=8)], [], lineno=15, col_offset=4), FunctionDef('find_library_file', arguments([Name('self', Param(), lineno=18, col_offset=26), Name('dirs', Param(), lineno=18, col_offset=32), Name('lib', Param(), lineno=18, col_offset=38), Name('debug', Param(), lineno=18, col_offset=43)], None, None, [Num(0, lineno=18, col_offset=49)]), [Return(Str('found', lineno=19, col_offset=15), lineno=19, col_offset=8)], [], lineno=18, col_offset=4), FunctionDef('library_option', arguments([Name('self', Param(), lineno=21, col_offset=23), Name('lib', Param(), lineno=21, col_offset=29)], None, None, []), [Return(BinOp(Str('-l', lineno=22, col_offset=15), Add(), Name('lib', Load(), lineno=22, col_offset=22), lineno=22, col_offset=15), lineno=22, col_offset=8)], [], lineno=21, col_offset=4)], [], lineno=11, col_offset=0), ClassDef('CCompilerTestCase', [Attribute(Name('support', Load(), lineno=24, col_offset=24), 'EnvironGuard', Load(), lineno=24, col_offset=24), Attribute(Name('unittest', Load(), lineno=24, col_offset=46), 'TestCase', Load(), lineno=24, col_offset=46)], [FunctionDef('test_gen_lib_options', arguments([Name('self', Param(), lineno=26, col_offset=29)], None, None, []), [Assign([Name('compiler', Store(), lineno=27, col_offset=8)], Call(Name('FakeCompiler', Load(), lineno=27, col_offset=19), [], [], None, None, lineno=27, col_offset=19), lineno=27, col_offset=8), Assign([Name('libdirs', Store(), lineno=28, col_offset=8)], List([Str('lib1', lineno=28, col_offset=19), Str('lib2', lineno=28, col_offset=27)], Load(), lineno=28, col_offset=18), lineno=28, col_offset=8), Assign([Name('runlibdirs', Store(), lineno=29, col_offset=8)], List([Str('runlib1', lineno=29, col_offset=22)], Load(), lineno=29, col_offset=21), lineno=29, col_offset=8), Assign([Name('libs', Store(), lineno=30, col_offset=8)], List([Call(Attribute(Attribute(Name('os', Load(), lineno=30, col_offset=16), 'path', Load(), lineno=30, col_offset=16), 'join', Load(), lineno=30, col_offset=16), [Str('dir', lineno=30, col_offset=29), Str('name', lineno=30, col_offset=36)], [], None, None, lineno=30, col_offset=16), Str('name2', lineno=30, col_offset=45)], Load(), lineno=30, col_offset=15), lineno=30, col_offset=8), Assign([Name('opts', Store(), lineno=32, col_offset=8)], Call(Name('gen_lib_options', Load(), lineno=32, col_offset=15), [Name('compiler', Load(), lineno=32, col_offset=31), Name('libdirs', Load(), lineno=32, col_offset=41), Name('runlibdirs', Load(), lineno=32, col_offset=50), Name('libs', Load(), lineno=32, col_offset=62)], [], None, None, lineno=32, col_offset=15), lineno=32, col_offset=8), Assign([Name('wanted', Store(), lineno=33, col_offset=8)], List([Str('-Llib1', lineno=33, col_offset=18), Str('-Llib2', lineno=33, col_offset=28), Str('-cool', lineno=33, col_offset=38), Str('-Rrunlib1', lineno=33, col_offset=47), Str('found', lineno=33, col_offset=60), Str('-lname2', lineno=34, col_offset=18)], Load(), lineno=33, col_offset=17), lineno=33, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=35, col_offset=8), 'assertEqual', Load(), lineno=35, col_offset=8), [Name('opts', Load(), lineno=35, col_offset=25), Name('wanted', Load(), lineno=35, col_offset=31)], [], None, None, lineno=35, col_offset=8), lineno=35, col_offset=8)], [], lineno=26, col_offset=4), FunctionDef('test_debug_print', arguments([Name('self', Param(), lineno=37, col_offset=25)], None, None, []), [ClassDef('MyCCompiler', [Name('CCompiler', Load(), lineno=39, col_offset=26)], [Assign([Name('executables', Store(), lineno=40, col_offset=12)], Dict([], [], lineno=40, col_offset=26), lineno=40, col_offset=12)], [], lineno=39, col_offset=8), Assign([Name('compiler', Store(), lineno=42, col_offset=8)], Call(Name('MyCCompiler', Load(), lineno=42, col_offset=19), [], [], None, None, lineno=42, col_offset=19), lineno=42, col_offset=8), With(Call(Name('captured_stdout', Load(), lineno=43, col_offset=13), [], [], None, None, lineno=43, col_offset=13), Name('stdout', Store(), lineno=43, col_offset=34), [Expr(Call(Attribute(Name('compiler', Load(), lineno=44, col_offset=12), 'debug_print', Load(), lineno=44, col_offset=12), [Str('xxx', lineno=44, col_offset=33)], [], None, None, lineno=44, col_offset=12), lineno=44, col_offset=12)], lineno=43, col_offset=13), Expr(Call(Attribute(Name('stdout', Load(), lineno=45, col_offset=8), 'seek', Load(), lineno=45, col_offset=8), [Num(0, lineno=45, col_offset=20)], [], None, None, lineno=45, col_offset=8), lineno=45, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=46, col_offset=8), 'assertEqual', Load(), lineno=46, col_offset=8), [Call(Attribute(Name('stdout', Load(), lineno=46, col_offset=25), 'read', Load(), lineno=46, col_offset=25), [], [], None, None, lineno=46, col_offset=25), Str('', lineno=46, col_offset=40)], [], None, None, lineno=46, col_offset=8), lineno=46, col_offset=8), Assign([Attribute(Name('debug', Load(), lineno=48, col_offset=8), 'DEBUG', Store(), lineno=48, col_offset=8)], Name('True', Load(), lineno=48, col_offset=22), lineno=48, col_offset=8), TryFinally([With(Call(Name('captured_stdout', Load(), lineno=50, col_offset=17), [], [], None, None, lineno=50, col_offset=17), Name('stdout', Store(), lineno=50, col_offset=38), [Expr(Call(Attribute(Name('compiler', Load(), lineno=51, col_offset=16), 'debug_print', Load(), lineno=51, col_offset=16), [Str('xxx', lineno=51, col_offset=37)], [], None, None, lineno=51, col_offset=16), lineno=51, col_offset=16)], lineno=50, col_offset=17), Expr(Call(Attribute(Name('stdout', Load(), lineno=52, col_offset=12), 'seek', Load(), lineno=52, col_offset=12), [Num(0, lineno=52, col_offset=24)], [], None, None, lineno=52, col_offset=12), lineno=52, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=53, col_offset=12), 'assertEqual', Load(), lineno=53, col_offset=12), [Call(Attribute(Name('stdout', Load(), lineno=53, col_offset=29), 'read', Load(), lineno=53, col_offset=29), [], [], None, None, lineno=53, col_offset=29), Str('xxx\n', lineno=53, col_offset=44)], [], None, None, lineno=53, col_offset=12), lineno=53, col_offset=12)], [Assign([Attribute(Name('debug', Load(), lineno=55, col_offset=12), 'DEBUG', Store(), lineno=55, col_offset=12)], Name('False', Load(), lineno=55, col_offset=26), lineno=55, col_offset=12)], lineno=49, col_offset=8)], [], lineno=37, col_offset=4), FunctionDef('test_customize_compiler', arguments([Name('self', Param(), lineno=57, col_offset=32)], None, None, []), [If(Compare(Call(Name('get_default_compiler', Load(), lineno=60, col_offset=11), [], [], None, None, lineno=60, col_offset=11), [NotEq()], [Str('unix', lineno=60, col_offset=37)], lineno=60, col_offset=11), [Return(None, lineno=61, col_offset=12)], [], lineno=60, col_offset=8), Assign([Subscript(Attribute(Name('os', Load(), lineno=63, col_offset=8), 'environ', Load(), lineno=63, col_offset=8), Index(Str('AR', lineno=63, col_offset=19)), Store(), lineno=63, col_offset=8)], Str('my_ar', lineno=63, col_offset=27), lineno=63, col_offset=8), Assign([Subscript(Attribute(Name('os', Load(), lineno=64, col_offset=8), 'environ', Load(), lineno=64, col_offset=8), Index(Str('ARFLAGS', lineno=64, col_offset=19)), Store(), lineno=64, col_offset=8)], Str('-arflags', lineno=64, col_offset=32), lineno=64, col_offset=8), ClassDef('compiler', [], [Assign([Name('compiler_type', Store(), lineno=68, col_offset=12)], Str('unix', lineno=68, col_offset=28), lineno=68, col_offset=12), FunctionDef('set_executables', arguments([Name('self', Param(), lineno=70, col_offset=32)], None, 'kw', []), [Assign([Attribute(Name('self', Load(), lineno=71, col_offset=16), 'exes', Store(), lineno=71, col_offset=16)], Name('kw', Load(), lineno=71, col_offset=28), lineno=71, col_offset=16)], [], lineno=70, col_offset=12)], [], lineno=67, col_offset=8), Assign([Name('comp', Store(), lineno=73, col_offset=8)], Call(Name('compiler', Load(), lineno=73, col_offset=15), [], [], None, None, lineno=73, col_offset=15), lineno=73, col_offset=8), Expr(Call(Name('customize_compiler', Load(), lineno=74, col_offset=8), [Name('comp', Load(), lineno=74, col_offset=27)], [], None, None, lineno=74, col_offset=8), lineno=74, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=75, col_offset=8), 'assertEqual', Load(), lineno=75, col_offset=8), [Subscript(Attribute(Name('comp', Load(), lineno=75, col_offset=25), 'exes', Load(), lineno=75, col_offset=25), Index(Str('archiver', lineno=75, col_offset=35)), Load(), lineno=75, col_offset=25), Str('my_ar -arflags', lineno=75, col_offset=48)], [], None, None, lineno=75, col_offset=8), lineno=75, col_offset=8)], [], lineno=57, col_offset=4)], [], lineno=24, col_offset=0), FunctionDef('test_suite', arguments([], None, None, []), [Return(Call(Attribute(Name('unittest', Load(), lineno=78, col_offset=11), 'makeSuite', Load(), lineno=78, col_offset=11), [Name('CCompilerTestCase', Load(), lineno=78, col_offset=30)], [], None, None, lineno=78, col_offset=11), lineno=78, col_offset=4)], [], lineno=77, col_offset=0), If(Compare(Name('__name__', Load(), lineno=80, col_offset=3), [Eq()], [Str('__main__', lineno=80, col_offset=15)], lineno=80, col_offset=3), [Expr(Call(Attribute(Name('unittest', Load(), lineno=81, col_offset=4), 'main', Load(), lineno=81, col_offset=4), [], [keyword('defaultTest', Str('test_suite', lineno=81, col_offset=30))], None, None, lineno=81, col_offset=4), lineno=81, col_offset=4)], [], lineno=80, col_offset=0)])
