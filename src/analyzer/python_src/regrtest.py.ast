Module([Expr(Str('Run the Python regression test using the compiler\n\nThis test runs the standard Python test suite using bytecode generated\nby this compiler instead of by the builtin compiler.\n\nThe regression test is run with the interpreter in verbose mode so\nthat import problems can be observed easily.\n', lineno=8, col_offset=-1), lineno=8, col_offset=-1), ImportFrom('compiler', [alias('compileFile', None)], 0, lineno=10, col_offset=0), Import([alias('os', None)], lineno=12, col_offset=0), Import([alias('sys', None)], lineno=13, col_offset=0), Import([alias('test', None)], lineno=14, col_offset=0), Import([alias('tempfile', None)], lineno=15, col_offset=0), FunctionDef('copy_test_suite', arguments([], None, None, []), [Assign([Name('dest', Store(), lineno=18, col_offset=4)], Call(Attribute(Name('tempfile', Load(), lineno=18, col_offset=11), 'mkdtemp', Load(), lineno=18, col_offset=11), [], [], None, None, lineno=18, col_offset=11), lineno=18, col_offset=4), Expr(Call(Attribute(Name('os', Load(), lineno=19, col_offset=4), 'system', Load(), lineno=19, col_offset=4), [BinOp(Str('cp -r %s/* %s', lineno=19, col_offset=14), Mod(), Tuple([Subscript(Attribute(Name('test', Load(), lineno=19, col_offset=33), '__path__', Load(), lineno=19, col_offset=33), Index(Num(0, lineno=19, col_offset=47)), Load(), lineno=19, col_offset=33), Name('dest', Load(), lineno=19, col_offset=51)], Load(), lineno=19, col_offset=33), lineno=19, col_offset=14)], [], None, None, lineno=19, col_offset=4), lineno=19, col_offset=4), Print(None, [Str('Creating copy of test suite in', lineno=20, col_offset=10), Name('dest', Load(), lineno=20, col_offset=44)], True, lineno=20, col_offset=4), Return(Name('dest', Load(), lineno=21, col_offset=11), lineno=21, col_offset=4)], [], lineno=17, col_offset=0), FunctionDef('copy_library', arguments([], None, None, []), [Assign([Name('dest', Store(), lineno=24, col_offset=4)], Call(Attribute(Name('tempfile', Load(), lineno=24, col_offset=11), 'mkdtemp', Load(), lineno=24, col_offset=11), [], [], None, None, lineno=24, col_offset=11), lineno=24, col_offset=4), Assign([Name('libdir', Store(), lineno=25, col_offset=4)], Subscript(Call(Attribute(Attribute(Name('os', Load(), lineno=25, col_offset=13), 'path', Load(), lineno=25, col_offset=13), 'split', Load(), lineno=25, col_offset=13), [Subscript(Attribute(Name('test', Load(), lineno=25, col_offset=27), '__path__', Load(), lineno=25, col_offset=27), Index(Num(0, lineno=25, col_offset=41)), Load(), lineno=25, col_offset=27)], [], None, None, lineno=25, col_offset=13), Index(Num(0, lineno=25, col_offset=45)), Load(), lineno=25, col_offset=13), lineno=25, col_offset=4), Print(None, [Str('Found standard library in', lineno=26, col_offset=10), Name('libdir', Load(), lineno=26, col_offset=39)], True, lineno=26, col_offset=4), Print(None, [Str('Creating copy of standard library in', lineno=27, col_offset=10), Name('dest', Load(), lineno=27, col_offset=50)], True, lineno=27, col_offset=4), Expr(Call(Attribute(Name('os', Load(), lineno=28, col_offset=4), 'system', Load(), lineno=28, col_offset=4), [BinOp(Str('cp -r %s/* %s', lineno=28, col_offset=14), Mod(), Tuple([Name('libdir', Load(), lineno=28, col_offset=33), Name('dest', Load(), lineno=28, col_offset=41)], Load(), lineno=28, col_offset=33), lineno=28, col_offset=14)], [], None, None, lineno=28, col_offset=4), lineno=28, col_offset=4), Return(Name('dest', Load(), lineno=29, col_offset=11), lineno=29, col_offset=4)], [], lineno=23, col_offset=0), FunctionDef('compile_files', arguments([Name('dir', Param(), lineno=31, col_offset=18)], None, None, []), [Print(None, [Str('Compiling', lineno=32, col_offset=10), Name('dir', Load(), lineno=32, col_offset=23), Str('\n\t', lineno=32, col_offset=28)], False, lineno=32, col_offset=4), Assign([Name('line_len', Store(), lineno=33, col_offset=4)], Num(10, lineno=33, col_offset=15), lineno=33, col_offset=4), For(Name('file', Store(), lineno=34, col_offset=8), Call(Attribute(Name('os', Load(), lineno=34, col_offset=16), 'listdir', Load(), lineno=34, col_offset=16), [Name('dir', Load(), lineno=34, col_offset=27)], [], None, None, lineno=34, col_offset=16), [Assign([Tuple([Name('base', Store(), lineno=35, col_offset=8), Name('ext', Store(), lineno=35, col_offset=14)], Store(), lineno=35, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=35, col_offset=20), 'path', Load(), lineno=35, col_offset=20), 'splitext', Load(), lineno=35, col_offset=20), [Name('file', Load(), lineno=35, col_offset=37)], [], None, None, lineno=35, col_offset=20), lineno=35, col_offset=8), If(Compare(Name('ext', Load(), lineno=36, col_offset=11), [Eq()], [Str('.py', lineno=36, col_offset=18)], lineno=36, col_offset=11), [Assign([Name('source', Store(), lineno=37, col_offset=12)], Call(Attribute(Attribute(Name('os', Load(), lineno=37, col_offset=21), 'path', Load(), lineno=37, col_offset=21), 'join', Load(), lineno=37, col_offset=21), [Name('dir', Load(), lineno=37, col_offset=34), Name('file', Load(), lineno=37, col_offset=39)], [], None, None, lineno=37, col_offset=21), lineno=37, col_offset=12), Assign([Name('line_len', Store(), lineno=38, col_offset=12)], BinOp(BinOp(Name('line_len', Load(), lineno=38, col_offset=23), Add(), Call(Name('len', Load(), lineno=38, col_offset=34), [Name('file', Load(), lineno=38, col_offset=38)], [], None, None, lineno=38, col_offset=34), lineno=38, col_offset=23), Add(), Num(1, lineno=38, col_offset=46), lineno=38, col_offset=44), lineno=38, col_offset=12), If(Compare(Name('line_len', Load(), lineno=39, col_offset=15), [Gt()], [Num(75, lineno=39, col_offset=26)], lineno=39, col_offset=15), [Print(None, [Str('\n\t', lineno=40, col_offset=22)], False, lineno=40, col_offset=16), Assign([Name('line_len', Store(), lineno=41, col_offset=16)], BinOp(Call(Name('len', Load(), lineno=41, col_offset=27), [Name('source', Load(), lineno=41, col_offset=31)], [], None, None, lineno=41, col_offset=27), Add(), Num(9, lineno=41, col_offset=41), lineno=41, col_offset=27), lineno=41, col_offset=16)], [], lineno=39, col_offset=12), Print(None, [Name('file', Load(), lineno=42, col_offset=18)], False, lineno=42, col_offset=12), TryExcept([Expr(Call(Name('compileFile', Load(), lineno=44, col_offset=16), [Name('source', Load(), lineno=44, col_offset=28)], [], None, None, lineno=44, col_offset=16), lineno=44, col_offset=16)], [ExceptHandler(Name('SyntaxError', Load(), lineno=45, col_offset=19), Name('err', Store(), lineno=45, col_offset=32), [Print(None, [Name('err', Load(), lineno=46, col_offset=22)], True, lineno=46, col_offset=16), Continue( lineno=47, col_offset=16)], lineno=45, col_offset=12)], [], lineno=43, col_offset=12), Expr(Call(Attribute(Name('os', Load(), lineno=49, col_offset=12), 'chmod', Load(), lineno=49, col_offset=12), [BinOp(Name('source', Load(), lineno=49, col_offset=21), Add(), Str('c', lineno=49, col_offset=30), lineno=49, col_offset=21), Num(444, lineno=49, col_offset=35)], [], None, None, lineno=49, col_offset=12), lineno=49, col_offset=12)], [If(Compare(Name('file', Load(), lineno=50, col_offset=13), [Eq()], [Str('CVS', lineno=50, col_offset=21)], lineno=50, col_offset=13), [Pass( lineno=51, col_offset=12)], [Assign([Name('path', Store(), lineno=53, col_offset=12)], Call(Attribute(Attribute(Name('os', Load(), lineno=53, col_offset=19), 'path', Load(), lineno=53, col_offset=19), 'join', Load(), lineno=53, col_offset=19), [Name('dir', Load(), lineno=53, col_offset=32), Name('file', Load(), lineno=53, col_offset=37)], [], None, None, lineno=53, col_offset=19), lineno=53, col_offset=12), If(Call(Attribute(Attribute(Name('os', Load(), lineno=54, col_offset=15), 'path', Load(), lineno=54, col_offset=15), 'isdir', Load(), lineno=54, col_offset=15), [Name('path', Load(), lineno=54, col_offset=29)], [], None, None, lineno=54, col_offset=15), [Print(None, [], True, lineno=55, col_offset=16), Print(None, [], True, lineno=56, col_offset=16), Expr(Call(Name('compile_files', Load(), lineno=57, col_offset=16), [Name('path', Load(), lineno=57, col_offset=30)], [], None, None, lineno=57, col_offset=16), lineno=57, col_offset=16), Print(None, [Str('\t', lineno=58, col_offset=22)], False, lineno=58, col_offset=16), Assign([Name('line_len', Store(), lineno=59, col_offset=16)], Num(10, lineno=59, col_offset=27), lineno=59, col_offset=16)], [], lineno=54, col_offset=12)], lineno=50, col_offset=13)], lineno=36, col_offset=8)], [], lineno=34, col_offset=4), Print(None, [], True, lineno=60, col_offset=4)], [], lineno=31, col_offset=0), FunctionDef('run_regrtest', arguments([Name('lib_dir', Param(), lineno=62, col_offset=17)], None, None, []), [Assign([Name('test_dir', Store(), lineno=63, col_offset=4)], Call(Attribute(Attribute(Name('os', Load(), lineno=63, col_offset=15), 'path', Load(), lineno=63, col_offset=15), 'join', Load(), lineno=63, col_offset=15), [Name('lib_dir', Load(), lineno=63, col_offset=28), Str('test', lineno=63, col_offset=37)], [], None, None, lineno=63, col_offset=15), lineno=63, col_offset=4), Expr(Call(Attribute(Name('os', Load(), lineno=64, col_offset=4), 'chdir', Load(), lineno=64, col_offset=4), [Name('test_dir', Load(), lineno=64, col_offset=13)], [], None, None, lineno=64, col_offset=4), lineno=64, col_offset=4), Expr(Call(Attribute(Name('os', Load(), lineno=65, col_offset=4), 'system', Load(), lineno=65, col_offset=4), [BinOp(Str('PYTHONPATH=%s %s -v regrtest.py', lineno=65, col_offset=14), Mod(), Tuple([Name('lib_dir', Load(), lineno=65, col_offset=51), Attribute(Name('sys', Load(), lineno=65, col_offset=60), 'executable', Load(), lineno=65, col_offset=60)], Load(), lineno=65, col_offset=51), lineno=65, col_offset=14)], [], None, None, lineno=65, col_offset=4), lineno=65, col_offset=4)], [], lineno=62, col_offset=0), FunctionDef('cleanup', arguments([Name('dir', Param(), lineno=67, col_offset=12)], None, None, []), [Expr(Call(Attribute(Name('os', Load(), lineno=68, col_offset=4), 'system', Load(), lineno=68, col_offset=4), [BinOp(Str('rm -rf %s', lineno=68, col_offset=14), Mod(), Name('dir', Load(), lineno=68, col_offset=28), lineno=68, col_offset=14)], [], None, None, lineno=68, col_offset=4), lineno=68, col_offset=4)], [], lineno=67, col_offset=0), FunctionDef('main', arguments([], None, None, []), [Assign([Name('lib_dir', Store(), lineno=71, col_offset=4)], Call(Name('copy_library', Load(), lineno=71, col_offset=14), [], [], None, None, lineno=71, col_offset=14), lineno=71, col_offset=4), Expr(Call(Name('compile_files', Load(), lineno=72, col_offset=4), [Name('lib_dir', Load(), lineno=72, col_offset=18)], [], None, None, lineno=72, col_offset=4), lineno=72, col_offset=4), Expr(Call(Name('run_regrtest', Load(), lineno=73, col_offset=4), [Name('lib_dir', Load(), lineno=73, col_offset=17)], [], None, None, lineno=73, col_offset=4), lineno=73, col_offset=4), Expr(Call(Name('raw_input', Load(), lineno=74, col_offset=4), [Str('Cleanup?', lineno=74, col_offset=14)], [], None, None, lineno=74, col_offset=4), lineno=74, col_offset=4), Expr(Call(Name('cleanup', Load(), lineno=75, col_offset=4), [Name('lib_dir', Load(), lineno=75, col_offset=12)], [], None, None, lineno=75, col_offset=4), lineno=75, col_offset=4)], [], lineno=70, col_offset=0), If(Compare(Name('__name__', Load(), lineno=77, col_offset=3), [Eq()], [Str('__main__', lineno=77, col_offset=15)], lineno=77, col_offset=3), [Expr(Call(Name('main', Load(), lineno=78, col_offset=4), [], [], None, None, lineno=78, col_offset=4), lineno=78, col_offset=4)], [], lineno=77, col_offset=0)])
