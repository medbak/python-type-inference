Module([Import([alias('sys', None)], lineno=6, col_offset=0), Import([alias('string', None)], lineno=7, col_offset=0), ImportFrom('socket', [alias('*', None)], 0, lineno=8, col_offset=0), Assign([Name('PORT', Store(), lineno=10, col_offset=0)], Num(4127, lineno=10, col_offset=7), lineno=10, col_offset=0), Assign([Name('BUFSIZE', Store(), lineno=11, col_offset=0)], Num(1024, lineno=11, col_offset=10), lineno=11, col_offset=0), FunctionDef('main', arguments([], None, None, []), [If(Compare(Call(Name('len', Load(), lineno=14, col_offset=7), [Attribute(Name('sys', Load(), lineno=14, col_offset=11), 'argv', Load(), lineno=14, col_offset=11)], [], None, None, lineno=14, col_offset=7), [Lt()], [Num(3, lineno=14, col_offset=23)], lineno=14, col_offset=7), [Print(None, [Str('usage: rpython host command', lineno=15, col_offset=14)], True, lineno=15, col_offset=8), Expr(Call(Attribute(Name('sys', Load(), lineno=16, col_offset=8), 'exit', Load(), lineno=16, col_offset=8), [Num(2, lineno=16, col_offset=17)], [], None, None, lineno=16, col_offset=8), lineno=16, col_offset=8)], [], lineno=14, col_offset=4), Assign([Name('host', Store(), lineno=17, col_offset=4)], Subscript(Attribute(Name('sys', Load(), lineno=17, col_offset=11), 'argv', Load(), lineno=17, col_offset=11), Index(Num(1, lineno=17, col_offset=20)), Load(), lineno=17, col_offset=11), lineno=17, col_offset=4), Assign([Name('port', Store(), lineno=18, col_offset=4)], Name('PORT', Load(), lineno=18, col_offset=11), lineno=18, col_offset=4), Assign([Name('i', Store(), lineno=19, col_offset=4)], Call(Attribute(Name('string', Load(), lineno=19, col_offset=8), 'find', Load(), lineno=19, col_offset=8), [Name('host', Load(), lineno=19, col_offset=20), Str(':', lineno=19, col_offset=26)], [], None, None, lineno=19, col_offset=8), lineno=19, col_offset=4), If(Compare(Name('i', Load(), lineno=20, col_offset=7), [GtE()], [Num(0, lineno=20, col_offset=12)], lineno=20, col_offset=7), [Assign([Name('port', Store(), lineno=21, col_offset=8)], Call(Attribute(Name('string', Load(), lineno=21, col_offset=15), 'atoi', Load(), lineno=21, col_offset=15), [Subscript(Name('port', Load(), lineno=21, col_offset=27), Slice(BinOp(Name('i', Load(), lineno=21, col_offset=32), Add(), Num(1, lineno=21, col_offset=34), lineno=21, col_offset=32), None, None), Load(), lineno=21, col_offset=27)], [], None, None, lineno=21, col_offset=15), lineno=21, col_offset=8), Assign([Name('host', Store(), lineno=22, col_offset=8)], Subscript(Name('host', Load(), lineno=22, col_offset=15), Slice(None, Name('i', Load(), lineno=22, col_offset=21), None), Load(), lineno=22, col_offset=15), lineno=22, col_offset=8)], [], lineno=20, col_offset=4), Assign([Name('command', Store(), lineno=23, col_offset=4)], Call(Attribute(Name('string', Load(), lineno=23, col_offset=14), 'join', Load(), lineno=23, col_offset=14), [Subscript(Attribute(Name('sys', Load(), lineno=23, col_offset=26), 'argv', Load(), lineno=23, col_offset=26), Slice(Num(2, lineno=23, col_offset=35), None, None), Load(), lineno=23, col_offset=26)], [], None, None, lineno=23, col_offset=14), lineno=23, col_offset=4), Assign([Name('s', Store(), lineno=24, col_offset=4)], Call(Name('socket', Load(), lineno=24, col_offset=8), [Name('AF_INET', Load(), lineno=24, col_offset=15), Name('SOCK_STREAM', Load(), lineno=24, col_offset=24)], [], None, None, lineno=24, col_offset=8), lineno=24, col_offset=4), Expr(Call(Attribute(Name('s', Load(), lineno=25, col_offset=4), 'connect', Load(), lineno=25, col_offset=4), [Tuple([Name('host', Load(), lineno=25, col_offset=15), Name('port', Load(), lineno=25, col_offset=21)], Load(), lineno=25, col_offset=15)], [], None, None, lineno=25, col_offset=4), lineno=25, col_offset=4), Expr(Call(Attribute(Name('s', Load(), lineno=26, col_offset=4), 'send', Load(), lineno=26, col_offset=4), [Name('command', Load(), lineno=26, col_offset=11)], [], None, None, lineno=26, col_offset=4), lineno=26, col_offset=4), Expr(Call(Attribute(Name('s', Load(), lineno=27, col_offset=4), 'shutdown', Load(), lineno=27, col_offset=4), [Num(1, lineno=27, col_offset=15)], [], None, None, lineno=27, col_offset=4), lineno=27, col_offset=4), Assign([Name('reply', Store(), lineno=28, col_offset=4)], Str('', lineno=28, col_offset=12), lineno=28, col_offset=4), While(Num(1, lineno=29, col_offset=10), [Assign([Name('data', Store(), lineno=30, col_offset=8)], Call(Attribute(Name('s', Load(), lineno=30, col_offset=15), 'recv', Load(), lineno=30, col_offset=15), [Name('BUFSIZE', Load(), lineno=30, col_offset=22)], [], None, None, lineno=30, col_offset=15), lineno=30, col_offset=8), If(UnaryOp(Not(), Name('data', Load(), lineno=31, col_offset=15), lineno=31, col_offset=11), [Break( lineno=31, col_offset=21)], [], lineno=31, col_offset=8), Assign([Name('reply', Store(), lineno=32, col_offset=8)], BinOp(Name('reply', Load(), lineno=32, col_offset=16), Add(), Name('data', Load(), lineno=32, col_offset=24), lineno=32, col_offset=16), lineno=32, col_offset=8)], [], lineno=29, col_offset=4), Print(None, [Name('reply', Load(), lineno=33, col_offset=10)], False, lineno=33, col_offset=4)], [], lineno=13, col_offset=0), Expr(Call(Name('main', Load(), lineno=35, col_offset=0), [], [], None, None, lineno=35, col_offset=0), lineno=35, col_offset=0)])
