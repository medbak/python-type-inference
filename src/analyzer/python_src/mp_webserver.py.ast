Module([Import([alias('os', None)], lineno=15, col_offset=0), Import([alias('sys', None)], lineno=16, col_offset=0), ImportFrom('multiprocessing', [alias('Process', None), alias('current_process', None), alias('freeze_support', None)], 0, lineno=18, col_offset=0), ImportFrom('BaseHTTPServer', [alias('HTTPServer', None)], 0, lineno=19, col_offset=0), ImportFrom('SimpleHTTPServer', [alias('SimpleHTTPRequestHandler', None)], 0, lineno=20, col_offset=0), If(Compare(Attribute(Name('sys', Load(), lineno=22, col_offset=3), 'platform', Load(), lineno=22, col_offset=3), [Eq()], [Str('win32', lineno=22, col_offset=19)], lineno=22, col_offset=3), [Import([alias('multiprocessing.reduction', None)], lineno=23, col_offset=4)], [], lineno=22, col_offset=0), FunctionDef('note', arguments([Name('format', Param(), lineno=26, col_offset=9)], 'args', None, []), [Expr(Call(Attribute(Attribute(Name('sys', Load(), lineno=27, col_offset=4), 'stderr', Load(), lineno=27, col_offset=4), 'write', Load(), lineno=27, col_offset=4), [BinOp(Str('[%s]\t%s\n', lineno=27, col_offset=21), Mod(), Tuple([Attribute(Call(Name('current_process', Load(), lineno=27, col_offset=37), [], [], None, None, lineno=27, col_offset=37), 'name', Load(), lineno=27, col_offset=37), BinOp(Name('format', Load(), lineno=27, col_offset=61), Mod(), Name('args', Load(), lineno=27, col_offset=68), lineno=27, col_offset=61)], Load(), lineno=27, col_offset=37), lineno=27, col_offset=21)], [], None, None, lineno=27, col_offset=4), lineno=27, col_offset=4)], [], lineno=26, col_offset=0), ClassDef('RequestHandler', [Name('SimpleHTTPRequestHandler', Load(), lineno=30, col_offset=21)], [FunctionDef('log_message', arguments([Name('self', Param(), lineno=32, col_offset=20), Name('format', Param(), lineno=32, col_offset=26)], 'args', None, []), [Expr(Call(Name('note', Load(), lineno=33, col_offset=8), [Name('format', Load(), lineno=33, col_offset=13)], [], Name('args', Load(), lineno=33, col_offset=22), None, lineno=33, col_offset=8), lineno=33, col_offset=8)], [], lineno=32, col_offset=4)], [], lineno=30, col_offset=0), FunctionDef('serve_forever', arguments([Name('server', Param(), lineno=35, col_offset=18)], None, None, []), [Expr(Call(Name('note', Load(), lineno=36, col_offset=4), [Str('starting server', lineno=36, col_offset=9)], [], None, None, lineno=36, col_offset=4), lineno=36, col_offset=4), TryExcept([Expr(Call(Attribute(Name('server', Load(), lineno=38, col_offset=8), 'serve_forever', Load(), lineno=38, col_offset=8), [], [], None, None, lineno=38, col_offset=8), lineno=38, col_offset=8)], [ExceptHandler(Name('KeyboardInterrupt', Load(), lineno=39, col_offset=11), None, [Pass( lineno=40, col_offset=8)], lineno=39, col_offset=4)], [], lineno=37, col_offset=4)], [], lineno=35, col_offset=0), FunctionDef('runpool', arguments([Name('address', Param(), lineno=43, col_offset=12), Name('number_of_processes', Param(), lineno=43, col_offset=21)], None, None, []), [Assign([Name('server', Store(), lineno=45, col_offset=4)], Call(Name('HTTPServer', Load(), lineno=45, col_offset=13), [Name('address', Load(), lineno=45, col_offset=24), Name('RequestHandler', Load(), lineno=45, col_offset=33)], [], None, None, lineno=45, col_offset=13), lineno=45, col_offset=4), For(Name('i', Store(), lineno=48, col_offset=8), Call(Name('range', Load(), lineno=48, col_offset=13), [BinOp(Name('number_of_processes', Load(), lineno=48, col_offset=19), Sub(), Num(1, lineno=48, col_offset=39), lineno=48, col_offset=19)], [], None, None, lineno=48, col_offset=13), [Expr(Call(Attribute(Call(Name('Process', Load(), lineno=49, col_offset=8), [], [keyword('target', Name('serve_forever', Load(), lineno=49, col_offset=23)), keyword('args', Tuple([Name('server', Load(), lineno=49, col_offset=44)], Load(), lineno=49, col_offset=44))], None, None, lineno=49, col_offset=8), 'start', Load(), lineno=49, col_offset=8), [], [], None, None, lineno=49, col_offset=8), lineno=49, col_offset=8)], [], lineno=48, col_offset=4), Expr(Call(Name('serve_forever', Load(), lineno=52, col_offset=4), [Name('server', Load(), lineno=52, col_offset=18)], [], None, None, lineno=52, col_offset=4), lineno=52, col_offset=4)], [], lineno=43, col_offset=0), FunctionDef('test', arguments([], None, None, []), [Assign([Name('DIR', Store(), lineno=56, col_offset=4)], Call(Attribute(Attribute(Name('os', Load(), lineno=56, col_offset=10), 'path', Load(), lineno=56, col_offset=10), 'join', Load(), lineno=56, col_offset=10), [Call(Attribute(Attribute(Name('os', Load(), lineno=56, col_offset=23), 'path', Load(), lineno=56, col_offset=23), 'dirname', Load(), lineno=56, col_offset=23), [Name('__file__', Load(), lineno=56, col_offset=39)], [], None, None, lineno=56, col_offset=23), Str('..', lineno=56, col_offset=50)], [], None, None, lineno=56, col_offset=10), lineno=56, col_offset=4), Assign([Name('ADDRESS', Store(), lineno=57, col_offset=4)], Tuple([Str('localhost', lineno=57, col_offset=15), Num(8000, lineno=57, col_offset=28)], Load(), lineno=57, col_offset=15), lineno=57, col_offset=4), Assign([Name('NUMBER_OF_PROCESSES', Store(), lineno=58, col_offset=4)], Num(4, lineno=58, col_offset=26), lineno=58, col_offset=4), Print(None, [BinOp(Str('Serving at http://%s:%d using %d worker processes', lineno=60, col_offset=10), Mod(), Tuple([Subscript(Name('ADDRESS', Load(), lineno=61, col_offset=11), Index(Num(0, lineno=61, col_offset=19)), Load(), lineno=61, col_offset=11), Subscript(Name('ADDRESS', Load(), lineno=61, col_offset=23), Index(Num(1, lineno=61, col_offset=31)), Load(), lineno=61, col_offset=23), Name('NUMBER_OF_PROCESSES', Load(), lineno=61, col_offset=35)], Load(), lineno=61, col_offset=11), lineno=60, col_offset=10)], True, lineno=60, col_offset=4), Print(None, [BinOp(Str('To exit press Ctrl-', lineno=62, col_offset=10), Add(), Subscript(List([Str('C', lineno=62, col_offset=35), Str('Break', lineno=62, col_offset=40)], Load(), lineno=62, col_offset=34), Index(Compare(Attribute(Name('sys', Load(), lineno=62, col_offset=49), 'platform', Load(), lineno=62, col_offset=49), [Eq()], [Str('win32', lineno=62, col_offset=63)], lineno=62, col_offset=49)), Load(), lineno=62, col_offset=34), lineno=62, col_offset=10)], True, lineno=62, col_offset=4), Expr(Call(Attribute(Name('os', Load(), lineno=64, col_offset=4), 'chdir', Load(), lineno=64, col_offset=4), [Name('DIR', Load(), lineno=64, col_offset=13)], [], None, None, lineno=64, col_offset=4), lineno=64, col_offset=4), Expr(Call(Name('runpool', Load(), lineno=65, col_offset=4), [Name('ADDRESS', Load(), lineno=65, col_offset=12), Name('NUMBER_OF_PROCESSES', Load(), lineno=65, col_offset=21)], [], None, None, lineno=65, col_offset=4), lineno=65, col_offset=4)], [], lineno=55, col_offset=0), If(Compare(Name('__name__', Load(), lineno=68, col_offset=3), [Eq()], [Str('__main__', lineno=68, col_offset=15)], lineno=68, col_offset=3), [Expr(Call(Name('freeze_support', Load(), lineno=69, col_offset=4), [], [], None, None, lineno=69, col_offset=4), lineno=69, col_offset=4), Expr(Call(Name('test', Load(), lineno=70, col_offset=4), [], [], None, None, lineno=70, col_offset=4), lineno=70, col_offset=4)], [], lineno=68, col_offset=0)])
