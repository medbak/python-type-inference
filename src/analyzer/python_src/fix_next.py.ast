Module([Expr(Str('Fixer for it.next() -> next(it), per PEP 3114.', lineno=1, col_offset=0), lineno=1, col_offset=0), ImportFrom('pgen2', [alias('token', None)], 2, lineno=9, col_offset=0), ImportFrom('pygram', [alias('python_symbols', 'syms')], 2, lineno=10, col_offset=0), ImportFrom(None, [alias('fixer_base', None)], 2, lineno=11, col_offset=0), ImportFrom('fixer_util', [alias('Name', None), alias('Call', None), alias('find_binding', None)], 2, lineno=12, col_offset=0), Assign([Name('bind_warning', Store(), lineno=14, col_offset=0)], Str('Calls to builtin next() possibly shadowed by global binding', lineno=14, col_offset=15), lineno=14, col_offset=0), ClassDef('FixNext', [Attribute(Name('fixer_base', Load(), lineno=17, col_offset=14), 'BaseFix', Load(), lineno=17, col_offset=14)], [Assign([Name('BM_compatible', Store(), lineno=18, col_offset=4)], Name('True', Load(), lineno=18, col_offset=20), lineno=18, col_offset=4), Assign([Name('PATTERN', Store(), lineno=19, col_offset=4)], Str("\n    power< base=any+ trailer< '.' attr='next' > trailer< '(' ')' > >\n    |\n    power< head=any+ trailer< '.' attr='next' > not trailer< '(' ')' > >\n    |\n    classdef< 'class' any+ ':'\n              suite< any*\n                     funcdef< 'def'\n                              name='next'\n                              parameters< '(' NAME ')' > any+ >\n                     any* > >\n    |\n    global=global_stmt< 'global' any* 'next' any* >\n    ", lineno=32, col_offset=-1), lineno=19, col_offset=4), Assign([Name('order', Store(), lineno=34, col_offset=4)], Str('pre', lineno=34, col_offset=12), lineno=34, col_offset=4), FunctionDef('start_tree', arguments([Name('self', Param(), lineno=36, col_offset=19), Name('tree', Param(), lineno=36, col_offset=25), Name('filename', Param(), lineno=36, col_offset=31)], None, None, []), [Expr(Call(Attribute(Call(Name('super', Load(), lineno=37, col_offset=8), [Name('FixNext', Load(), lineno=37, col_offset=14), Name('self', Load(), lineno=37, col_offset=23)], [], None, None, lineno=37, col_offset=8), 'start_tree', Load(), lineno=37, col_offset=8), [Name('tree', Load(), lineno=37, col_offset=40), Name('filename', Load(), lineno=37, col_offset=46)], [], None, None, lineno=37, col_offset=8), lineno=37, col_offset=8), Assign([Name('n', Store(), lineno=39, col_offset=8)], Call(Name('find_binding', Load(), lineno=39, col_offset=12), [Str(u'next', lineno=39, col_offset=25), Name('tree', Load(), lineno=39, col_offset=34)], [], None, None, lineno=39, col_offset=12), lineno=39, col_offset=8), If(Name('n', Load(), lineno=40, col_offset=11), [Expr(Call(Attribute(Name('self', Load(), lineno=41, col_offset=12), 'warning', Load(), lineno=41, col_offset=12), [Name('n', Load(), lineno=41, col_offset=25), Name('bind_warning', Load(), lineno=41, col_offset=28)], [], None, None, lineno=41, col_offset=12), lineno=41, col_offset=12), Assign([Attribute(Name('self', Load(), lineno=42, col_offset=12), 'shadowed_next', Store(), lineno=42, col_offset=12)], Name('True', Load(), lineno=42, col_offset=33), lineno=42, col_offset=12)], [Assign([Attribute(Name('self', Load(), lineno=44, col_offset=12), 'shadowed_next', Store(), lineno=44, col_offset=12)], Name('False', Load(), lineno=44, col_offset=33), lineno=44, col_offset=12)], lineno=40, col_offset=8)], [], lineno=36, col_offset=4), FunctionDef('transform', arguments([Name('self', Param(), lineno=46, col_offset=18), Name('node', Param(), lineno=46, col_offset=24), Name('results', Param(), lineno=46, col_offset=30)], None, None, []), [Assert(Name('results', Load(), lineno=47, col_offset=15), None, lineno=47, col_offset=8), Assign([Name('base', Store(), lineno=49, col_offset=8)], Call(Attribute(Name('results', Load(), lineno=49, col_offset=15), 'get', Load(), lineno=49, col_offset=15), [Str('base', lineno=49, col_offset=27)], [], None, None, lineno=49, col_offset=15), lineno=49, col_offset=8), Assign([Name('attr', Store(), lineno=50, col_offset=8)], Call(Attribute(Name('results', Load(), lineno=50, col_offset=15), 'get', Load(), lineno=50, col_offset=15), [Str('attr', lineno=50, col_offset=27)], [], None, None, lineno=50, col_offset=15), lineno=50, col_offset=8), Assign([Name('name', Store(), lineno=51, col_offset=8)], Call(Attribute(Name('results', Load(), lineno=51, col_offset=15), 'get', Load(), lineno=51, col_offset=15), [Str('name', lineno=51, col_offset=27)], [], None, None, lineno=51, col_offset=15), lineno=51, col_offset=8), If(Name('base', Load(), lineno=53, col_offset=11), [If(Attribute(Name('self', Load(), lineno=54, col_offset=15), 'shadowed_next', Load(), lineno=54, col_offset=15), [Expr(Call(Attribute(Name('attr', Load(), lineno=55, col_offset=16), 'replace', Load(), lineno=55, col_offset=16), [Call(Name('Name', Load(), lineno=55, col_offset=29), [Str(u'__next__', lineno=55, col_offset=34)], [keyword('prefix', Attribute(Name('attr', Load(), lineno=55, col_offset=54), 'prefix', Load(), lineno=55, col_offset=54))], None, None, lineno=55, col_offset=29)], [], None, None, lineno=55, col_offset=16), lineno=55, col_offset=16)], [Assign([Name('base', Store(), lineno=57, col_offset=16)], ListComp(Call(Attribute(Name('n', Load(), lineno=57, col_offset=24), 'clone', Load(), lineno=57, col_offset=24), [], [], None, None, lineno=57, col_offset=24), [comprehension(Name('n', Store(), lineno=57, col_offset=38), Name('base', Load(), lineno=57, col_offset=43), [])], lineno=57, col_offset=24), lineno=57, col_offset=16), Assign([Attribute(Subscript(Name('base', Load(), lineno=58, col_offset=16), Index(Num(0, lineno=58, col_offset=21)), Load(), lineno=58, col_offset=16), 'prefix', Store(), lineno=58, col_offset=16)], Str(u'', lineno=58, col_offset=33), lineno=58, col_offset=16), Expr(Call(Attribute(Name('node', Load(), lineno=59, col_offset=16), 'replace', Load(), lineno=59, col_offset=16), [Call(Name('Call', Load(), lineno=59, col_offset=29), [Call(Name('Name', Load(), lineno=59, col_offset=34), [Str(u'next', lineno=59, col_offset=39)], [keyword('prefix', Attribute(Name('node', Load(), lineno=59, col_offset=55), 'prefix', Load(), lineno=59, col_offset=55))], None, None, lineno=59, col_offset=34), Name('base', Load(), lineno=59, col_offset=69)], [], None, None, lineno=59, col_offset=29)], [], None, None, lineno=59, col_offset=16), lineno=59, col_offset=16)], lineno=54, col_offset=12)], [If(Name('name', Load(), lineno=60, col_offset=13), [Assign([Name('n', Store(), lineno=61, col_offset=12)], Call(Name('Name', Load(), lineno=61, col_offset=16), [Str(u'__next__', lineno=61, col_offset=21)], [keyword('prefix', Attribute(Name('name', Load(), lineno=61, col_offset=41), 'prefix', Load(), lineno=61, col_offset=41))], None, None, lineno=61, col_offset=16), lineno=61, col_offset=12), Expr(Call(Attribute(Name('name', Load(), lineno=62, col_offset=12), 'replace', Load(), lineno=62, col_offset=12), [Name('n', Load(), lineno=62, col_offset=25)], [], None, None, lineno=62, col_offset=12), lineno=62, col_offset=12)], [If(Name('attr', Load(), lineno=63, col_offset=13), [If(Call(Name('is_assign_target', Load(), lineno=67, col_offset=15), [Name('node', Load(), lineno=67, col_offset=32)], [], None, None, lineno=67, col_offset=15), [Assign([Name('head', Store(), lineno=68, col_offset=16)], Subscript(Name('results', Load(), lineno=68, col_offset=23), Index(Str('head', lineno=68, col_offset=31)), Load(), lineno=68, col_offset=23), lineno=68, col_offset=16), If(Compare(Call(Attribute(Call(Attribute(Str('', lineno=69, col_offset=19), 'join', Load(), lineno=69, col_offset=19), [ListComp(Call(Name('str', Load(), lineno=69, col_offset=28), [Name('n', Load(), lineno=69, col_offset=32)], [], None, None, lineno=69, col_offset=28), [comprehension(Name('n', Store(), lineno=69, col_offset=39), Name('head', Load(), lineno=69, col_offset=44), [])], lineno=69, col_offset=28)], [], None, None, lineno=69, col_offset=19), 'strip', Load(), lineno=69, col_offset=19), [], [], None, None, lineno=69, col_offset=19), [Eq()], [Str(u'__builtin__', lineno=69, col_offset=62)], lineno=69, col_offset=19), [Expr(Call(Attribute(Name('self', Load(), lineno=70, col_offset=20), 'warning', Load(), lineno=70, col_offset=20), [Name('node', Load(), lineno=70, col_offset=33), Name('bind_warning', Load(), lineno=70, col_offset=39)], [], None, None, lineno=70, col_offset=20), lineno=70, col_offset=20)], [], lineno=69, col_offset=16), Return(None, lineno=71, col_offset=16)], [], lineno=67, col_offset=12), Expr(Call(Attribute(Name('attr', Load(), lineno=72, col_offset=12), 'replace', Load(), lineno=72, col_offset=12), [Call(Name('Name', Load(), lineno=72, col_offset=25), [Str(u'__next__', lineno=72, col_offset=30)], [], None, None, lineno=72, col_offset=25)], [], None, None, lineno=72, col_offset=12), lineno=72, col_offset=12)], [If(Compare(Str('global', lineno=73, col_offset=13), [In()], [Name('results', Load(), lineno=73, col_offset=25)], lineno=73, col_offset=13), [Expr(Call(Attribute(Name('self', Load(), lineno=74, col_offset=12), 'warning', Load(), lineno=74, col_offset=12), [Name('node', Load(), lineno=74, col_offset=25), Name('bind_warning', Load(), lineno=74, col_offset=31)], [], None, None, lineno=74, col_offset=12), lineno=74, col_offset=12), Assign([Attribute(Name('self', Load(), lineno=75, col_offset=12), 'shadowed_next', Store(), lineno=75, col_offset=12)], Name('True', Load(), lineno=75, col_offset=33), lineno=75, col_offset=12)], [], lineno=73, col_offset=13)], lineno=63, col_offset=13)], lineno=60, col_offset=13)], lineno=53, col_offset=8)], [], lineno=46, col_offset=4)], [], lineno=17, col_offset=0), FunctionDef('is_assign_target', arguments([Name('node', Param(), lineno=81, col_offset=21)], None, None, []), [Assign([Name('assign', Store(), lineno=82, col_offset=4)], Call(Name('find_assign', Load(), lineno=82, col_offset=13), [Name('node', Load(), lineno=82, col_offset=25)], [], None, None, lineno=82, col_offset=13), lineno=82, col_offset=4), If(Compare(Name('assign', Load(), lineno=83, col_offset=7), [Is()], [Name('None', Load(), lineno=83, col_offset=17)], lineno=83, col_offset=7), [Return(Name('False', Load(), lineno=84, col_offset=15), lineno=84, col_offset=8)], [], lineno=83, col_offset=4), For(Name('child', Store(), lineno=86, col_offset=8), Attribute(Name('assign', Load(), lineno=86, col_offset=17), 'children', Load(), lineno=86, col_offset=17), [If(Compare(Attribute(Name('child', Load(), lineno=87, col_offset=11), 'type', Load(), lineno=87, col_offset=11), [Eq()], [Attribute(Name('token', Load(), lineno=87, col_offset=25), 'EQUAL', Load(), lineno=87, col_offset=25)], lineno=87, col_offset=11), [Return(Name('False', Load(), lineno=88, col_offset=19), lineno=88, col_offset=12)], [If(Call(Name('is_subtree', Load(), lineno=89, col_offset=13), [Name('child', Load(), lineno=89, col_offset=24), Name('node', Load(), lineno=89, col_offset=31)], [], None, None, lineno=89, col_offset=13), [Return(Name('True', Load(), lineno=90, col_offset=19), lineno=90, col_offset=12)], [], lineno=89, col_offset=13)], lineno=87, col_offset=8)], [], lineno=86, col_offset=4), Return(Name('False', Load(), lineno=91, col_offset=11), lineno=91, col_offset=4)], [], lineno=81, col_offset=0), FunctionDef('find_assign', arguments([Name('node', Param(), lineno=93, col_offset=16)], None, None, []), [If(Compare(Attribute(Name('node', Load(), lineno=94, col_offset=7), 'type', Load(), lineno=94, col_offset=7), [Eq()], [Attribute(Name('syms', Load(), lineno=94, col_offset=20), 'expr_stmt', Load(), lineno=94, col_offset=20)], lineno=94, col_offset=7), [Return(Name('node', Load(), lineno=95, col_offset=15), lineno=95, col_offset=8)], [], lineno=94, col_offset=4), If(BoolOp(Or(), [Compare(Attribute(Name('node', Load(), lineno=96, col_offset=7), 'type', Load(), lineno=96, col_offset=7), [Eq()], [Attribute(Name('syms', Load(), lineno=96, col_offset=20), 'simple_stmt', Load(), lineno=96, col_offset=20)], lineno=96, col_offset=7), Compare(Attribute(Name('node', Load(), lineno=96, col_offset=40), 'parent', Load(), lineno=96, col_offset=40), [Is()], [Name('None', Load(), lineno=96, col_offset=55)], lineno=96, col_offset=40)], lineno=96, col_offset=7), [Return(Name('None', Load(), lineno=97, col_offset=15), lineno=97, col_offset=8)], [], lineno=96, col_offset=4), Return(Call(Name('find_assign', Load(), lineno=98, col_offset=11), [Attribute(Name('node', Load(), lineno=98, col_offset=23), 'parent', Load(), lineno=98, col_offset=23)], [], None, None, lineno=98, col_offset=11), lineno=98, col_offset=4)], [], lineno=93, col_offset=0), FunctionDef('is_subtree', arguments([Name('root', Param(), lineno=100, col_offset=15), Name('node', Param(), lineno=100, col_offset=21)], None, None, []), [If(Compare(Name('root', Load(), lineno=101, col_offset=7), [Eq()], [Name('node', Load(), lineno=101, col_offset=15)], lineno=101, col_offset=7), [Return(Name('True', Load(), lineno=102, col_offset=15), lineno=102, col_offset=8)], [], lineno=101, col_offset=4), Return(Call(Name('any', Load(), lineno=103, col_offset=11), [GeneratorExp(Call(Name('is_subtree', Load(), lineno=103, col_offset=15), [Name('c', Load(), lineno=103, col_offset=26), Name('node', Load(), lineno=103, col_offset=29)], [], None, None, lineno=103, col_offset=15), [comprehension(Name('c', Store(), lineno=103, col_offset=39), Attribute(Name('root', Load(), lineno=103, col_offset=44), 'children', Load(), lineno=103, col_offset=44), [])], lineno=103, col_offset=15)], [], None, None, lineno=103, col_offset=11), lineno=103, col_offset=4)], [], lineno=100, col_offset=0)])
