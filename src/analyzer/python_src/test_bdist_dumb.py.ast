Module([Expr(Str('Tests for distutils.command.bdist_dumb.', lineno=1, col_offset=0), lineno=1, col_offset=0), Import([alias('unittest', None)], lineno=3, col_offset=0), Import([alias('sys', None)], lineno=4, col_offset=0), Import([alias('os', None)], lineno=5, col_offset=0), TryExcept([Import([alias('zlib', None)], lineno=10, col_offset=4)], [ExceptHandler(Name('ImportError', Load(), lineno=11, col_offset=7), None, [Assign([Name('zlib', Store(), lineno=12, col_offset=4)], Name('None', Load(), lineno=12, col_offset=11), lineno=12, col_offset=4)], lineno=11, col_offset=0)], [], lineno=9, col_offset=0), ImportFrom('test.test_support', [alias('run_unittest', None)], 0, lineno=14, col_offset=0), ImportFrom('distutils.core', [alias('Distribution', None)], 0, lineno=16, col_offset=0), ImportFrom('distutils.command.bdist_dumb', [alias('bdist_dumb', None)], 0, lineno=17, col_offset=0), ImportFrom('distutils.tests', [alias('support', None)], 0, lineno=18, col_offset=0), Assign([Name('SETUP_PY', Store(), lineno=20, col_offset=0)], Str("from distutils.core import setup\nimport foo\n\nsetup(name='foo', version='0.1', py_modules=['foo'],\n      url='xxx', author='xxx', author_email='xxx')\n\n", lineno=27, col_offset=-1), lineno=20, col_offset=0), ClassDef('BuildDumbTestCase', [Attribute(Name('support', Load(), lineno=29, col_offset=24), 'TempdirManager', Load(), lineno=29, col_offset=24), Attribute(Name('support', Load(), lineno=30, col_offset=24), 'LoggingSilencer', Load(), lineno=30, col_offset=24), Attribute(Name('support', Load(), lineno=31, col_offset=24), 'EnvironGuard', Load(), lineno=31, col_offset=24), Attribute(Name('unittest', Load(), lineno=32, col_offset=24), 'TestCase', Load(), lineno=32, col_offset=24)], [FunctionDef('setUp', arguments([Name('self', Param(), lineno=34, col_offset=14)], None, None, []), [Expr(Call(Attribute(Call(Name('super', Load(), lineno=35, col_offset=8), [Name('BuildDumbTestCase', Load(), lineno=35, col_offset=14), Name('self', Load(), lineno=35, col_offset=33)], [], None, None, lineno=35, col_offset=8), 'setUp', Load(), lineno=35, col_offset=8), [], [], None, None, lineno=35, col_offset=8), lineno=35, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=36, col_offset=8), 'old_location', Store(), lineno=36, col_offset=8)], Call(Attribute(Name('os', Load(), lineno=36, col_offset=28), 'getcwd', Load(), lineno=36, col_offset=28), [], [], None, None, lineno=36, col_offset=28), lineno=36, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=37, col_offset=8), 'old_sys_argv', Store(), lineno=37, col_offset=8)], Tuple([Attribute(Name('sys', Load(), lineno=37, col_offset=28), 'argv', Load(), lineno=37, col_offset=28), Subscript(Attribute(Name('sys', Load(), lineno=37, col_offset=38), 'argv', Load(), lineno=37, col_offset=38), Slice(None, None, None), Load(), lineno=37, col_offset=38)], Load(), lineno=37, col_offset=28), lineno=37, col_offset=8)], [], lineno=34, col_offset=4), FunctionDef('tearDown', arguments([Name('self', Param(), lineno=39, col_offset=17)], None, None, []), [Expr(Call(Attribute(Name('os', Load(), lineno=40, col_offset=8), 'chdir', Load(), lineno=40, col_offset=8), [Attribute(Name('self', Load(), lineno=40, col_offset=17), 'old_location', Load(), lineno=40, col_offset=17)], [], None, None, lineno=40, col_offset=8), lineno=40, col_offset=8), Assign([Attribute(Name('sys', Load(), lineno=41, col_offset=8), 'argv', Store(), lineno=41, col_offset=8)], Subscript(Attribute(Name('self', Load(), lineno=41, col_offset=19), 'old_sys_argv', Load(), lineno=41, col_offset=19), Index(Num(0, lineno=41, col_offset=37)), Load(), lineno=41, col_offset=19), lineno=41, col_offset=8), Assign([Subscript(Attribute(Name('sys', Load(), lineno=42, col_offset=8), 'argv', Load(), lineno=42, col_offset=8), Slice(None, None, None), Store(), lineno=42, col_offset=8)], Subscript(Attribute(Name('self', Load(), lineno=42, col_offset=22), 'old_sys_argv', Load(), lineno=42, col_offset=22), Index(Num(1, lineno=42, col_offset=40)), Load(), lineno=42, col_offset=22), lineno=42, col_offset=8), Expr(Call(Attribute(Call(Name('super', Load(), lineno=43, col_offset=8), [Name('BuildDumbTestCase', Load(), lineno=43, col_offset=14), Name('self', Load(), lineno=43, col_offset=33)], [], None, None, lineno=43, col_offset=8), 'tearDown', Load(), lineno=43, col_offset=8), [], [], None, None, lineno=43, col_offset=8), lineno=43, col_offset=8)], [], lineno=39, col_offset=4), FunctionDef('test_simple_built', arguments([Name('self', Param(), lineno=46, col_offset=26)], None, None, []), [Assign([Name('tmp_dir', Store(), lineno=49, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=49, col_offset=18), 'mkdtemp', Load(), lineno=49, col_offset=18), [], [], None, None, lineno=49, col_offset=18), lineno=49, col_offset=8), Assign([Name('pkg_dir', Store(), lineno=50, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=50, col_offset=18), 'path', Load(), lineno=50, col_offset=18), 'join', Load(), lineno=50, col_offset=18), [Name('tmp_dir', Load(), lineno=50, col_offset=31), Str('foo', lineno=50, col_offset=40)], [], None, None, lineno=50, col_offset=18), lineno=50, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=51, col_offset=8), 'mkdir', Load(), lineno=51, col_offset=8), [Name('pkg_dir', Load(), lineno=51, col_offset=17)], [], None, None, lineno=51, col_offset=8), lineno=51, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=52, col_offset=8), 'write_file', Load(), lineno=52, col_offset=8), [Tuple([Name('pkg_dir', Load(), lineno=52, col_offset=25), Str('setup.py', lineno=52, col_offset=34)], Load(), lineno=52, col_offset=25), Name('SETUP_PY', Load(), lineno=52, col_offset=47)], [], None, None, lineno=52, col_offset=8), lineno=52, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=53, col_offset=8), 'write_file', Load(), lineno=53, col_offset=8), [Tuple([Name('pkg_dir', Load(), lineno=53, col_offset=25), Str('foo.py', lineno=53, col_offset=34)], Load(), lineno=53, col_offset=25), Str('#', lineno=53, col_offset=45)], [], None, None, lineno=53, col_offset=8), lineno=53, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=54, col_offset=8), 'write_file', Load(), lineno=54, col_offset=8), [Tuple([Name('pkg_dir', Load(), lineno=54, col_offset=25), Str('MANIFEST.in', lineno=54, col_offset=34)], Load(), lineno=54, col_offset=25), Str('include foo.py', lineno=54, col_offset=50)], [], None, None, lineno=54, col_offset=8), lineno=54, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=55, col_offset=8), 'write_file', Load(), lineno=55, col_offset=8), [Tuple([Name('pkg_dir', Load(), lineno=55, col_offset=25), Str('README', lineno=55, col_offset=34)], Load(), lineno=55, col_offset=25), Str('', lineno=55, col_offset=45)], [], None, None, lineno=55, col_offset=8), lineno=55, col_offset=8), Assign([Name('dist', Store(), lineno=57, col_offset=8)], Call(Name('Distribution', Load(), lineno=57, col_offset=15), [Dict([Str('name', lineno=57, col_offset=29), Str('version', lineno=57, col_offset=44), Str('py_modules', lineno=58, col_offset=29), Str('url', lineno=59, col_offset=29), Str('author', lineno=59, col_offset=43), Str('author_email', lineno=60, col_offset=29)], [Str('foo', lineno=57, col_offset=37), Str('0.1', lineno=57, col_offset=55), List([Str('foo', lineno=58, col_offset=44)], Load(), lineno=58, col_offset=43), Str('xxx', lineno=59, col_offset=36), Str('xxx', lineno=59, col_offset=53), Str('xxx', lineno=60, col_offset=45)], lineno=57, col_offset=28)], [], None, None, lineno=57, col_offset=15), lineno=57, col_offset=8), Assign([Attribute(Name('dist', Load(), lineno=61, col_offset=8), 'script_name', Store(), lineno=61, col_offset=8)], Str('setup.py', lineno=61, col_offset=27), lineno=61, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=62, col_offset=8), 'chdir', Load(), lineno=62, col_offset=8), [Name('pkg_dir', Load(), lineno=62, col_offset=17)], [], None, None, lineno=62, col_offset=8), lineno=62, col_offset=8), Assign([Attribute(Name('sys', Load(), lineno=64, col_offset=8), 'argv', Store(), lineno=64, col_offset=8)], List([Str('setup.py', lineno=64, col_offset=20)], Load(), lineno=64, col_offset=19), lineno=64, col_offset=8), Assign([Name('cmd', Store(), lineno=65, col_offset=8)], Call(Name('bdist_dumb', Load(), lineno=65, col_offset=14), [Name('dist', Load(), lineno=65, col_offset=25)], [], None, None, lineno=65, col_offset=14), lineno=65, col_offset=8), Assign([Attribute(Name('cmd', Load(), lineno=69, col_offset=8), 'format', Store(), lineno=69, col_offset=8)], Str('zip', lineno=69, col_offset=21), lineno=69, col_offset=8), Expr(Call(Attribute(Name('cmd', Load(), lineno=71, col_offset=8), 'ensure_finalized', Load(), lineno=71, col_offset=8), [], [], None, None, lineno=71, col_offset=8), lineno=71, col_offset=8), Expr(Call(Attribute(Name('cmd', Load(), lineno=72, col_offset=8), 'run', Load(), lineno=72, col_offset=8), [], [], None, None, lineno=72, col_offset=8), lineno=72, col_offset=8), Assign([Name('dist_created', Store(), lineno=75, col_offset=8)], Call(Attribute(Name('os', Load(), lineno=75, col_offset=23), 'listdir', Load(), lineno=75, col_offset=23), [Call(Attribute(Attribute(Name('os', Load(), lineno=75, col_offset=34), 'path', Load(), lineno=75, col_offset=34), 'join', Load(), lineno=75, col_offset=34), [Name('pkg_dir', Load(), lineno=75, col_offset=47), Str('dist', lineno=75, col_offset=56)], [], None, None, lineno=75, col_offset=34)], [], None, None, lineno=75, col_offset=23), lineno=75, col_offset=8), Assign([Name('base', Store(), lineno=76, col_offset=8)], BinOp(Str('%s.%s', lineno=76, col_offset=15), Mod(), Tuple([Call(Attribute(Name('dist', Load(), lineno=76, col_offset=26), 'get_fullname', Load(), lineno=76, col_offset=26), [], [], None, None, lineno=76, col_offset=26), Attribute(Name('cmd', Load(), lineno=76, col_offset=47), 'plat_name', Load(), lineno=76, col_offset=47)], Load(), lineno=76, col_offset=26), lineno=76, col_offset=15), lineno=76, col_offset=8), If(Compare(Attribute(Name('os', Load(), lineno=77, col_offset=11), 'name', Load(), lineno=77, col_offset=11), [Eq()], [Str('os2', lineno=77, col_offset=22)], lineno=77, col_offset=11), [Assign([Name('base', Store(), lineno=78, col_offset=12)], Call(Attribute(Name('base', Load(), lineno=78, col_offset=19), 'replace', Load(), lineno=78, col_offset=19), [Str(':', lineno=78, col_offset=32), Str('-', lineno=78, col_offset=37)], [], None, None, lineno=78, col_offset=19), lineno=78, col_offset=12)], [], lineno=77, col_offset=8), Assign([Name('wanted', Store(), lineno=80, col_offset=8)], List([BinOp(Str('%s.zip', lineno=80, col_offset=18), Mod(), Name('base', Load(), lineno=80, col_offset=29), lineno=80, col_offset=18)], Load(), lineno=80, col_offset=17), lineno=80, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=81, col_offset=8), 'assertEqual', Load(), lineno=81, col_offset=8), [Name('dist_created', Load(), lineno=81, col_offset=25), Name('wanted', Load(), lineno=81, col_offset=39)], [], None, None, lineno=81, col_offset=8), lineno=81, col_offset=8)], [Call(Attribute(Name('unittest', Load(), lineno=45, col_offset=5), 'skipUnless', Load(), lineno=45, col_offset=5), [Name('zlib', Load(), lineno=45, col_offset=25), Str('requires zlib', lineno=45, col_offset=31)], [], None, None, lineno=45, col_offset=5)], lineno=45, col_offset=4), FunctionDef('test_finalize_options', arguments([Name('self', Param(), lineno=86, col_offset=30)], None, None, []), [Assign([Tuple([Name('pkg_dir', Store(), lineno=87, col_offset=8), Name('dist', Store(), lineno=87, col_offset=17)], Store(), lineno=87, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=87, col_offset=24), 'create_dist', Load(), lineno=87, col_offset=24), [], [], None, None, lineno=87, col_offset=24), lineno=87, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=88, col_offset=8), 'chdir', Load(), lineno=88, col_offset=8), [Name('pkg_dir', Load(), lineno=88, col_offset=17)], [], None, None, lineno=88, col_offset=8), lineno=88, col_offset=8), Assign([Name('cmd', Store(), lineno=89, col_offset=8)], Call(Name('bdist_dumb', Load(), lineno=89, col_offset=14), [Name('dist', Load(), lineno=89, col_offset=25)], [], None, None, lineno=89, col_offset=14), lineno=89, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=90, col_offset=8), 'assertEqual', Load(), lineno=90, col_offset=8), [Attribute(Name('cmd', Load(), lineno=90, col_offset=25), 'bdist_dir', Load(), lineno=90, col_offset=25), Name('None', Load(), lineno=90, col_offset=40)], [], None, None, lineno=90, col_offset=8), lineno=90, col_offset=8), Expr(Call(Attribute(Name('cmd', Load(), lineno=91, col_offset=8), 'finalize_options', Load(), lineno=91, col_offset=8), [], [], None, None, lineno=91, col_offset=8), lineno=91, col_offset=8), Assign([Name('base', Store(), lineno=94, col_offset=8)], Attribute(Call(Attribute(Name('cmd', Load(), lineno=94, col_offset=15), 'get_finalized_command', Load(), lineno=94, col_offset=15), [Str('bdist', lineno=94, col_offset=41)], [], None, None, lineno=94, col_offset=15), 'bdist_base', Load(), lineno=94, col_offset=15), lineno=94, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=95, col_offset=8), 'assertEqual', Load(), lineno=95, col_offset=8), [Attribute(Name('cmd', Load(), lineno=95, col_offset=25), 'bdist_dir', Load(), lineno=95, col_offset=25), Call(Attribute(Attribute(Name('os', Load(), lineno=95, col_offset=40), 'path', Load(), lineno=95, col_offset=40), 'join', Load(), lineno=95, col_offset=40), [Name('base', Load(), lineno=95, col_offset=53), Str('dumb', lineno=95, col_offset=59)], [], None, None, lineno=95, col_offset=40)], [], None, None, lineno=95, col_offset=8), lineno=95, col_offset=8), Assign([Name('default', Store(), lineno=98, col_offset=8)], Subscript(Attribute(Name('cmd', Load(), lineno=98, col_offset=18), 'default_format', Load(), lineno=98, col_offset=18), Index(Attribute(Name('os', Load(), lineno=98, col_offset=37), 'name', Load(), lineno=98, col_offset=37)), Load(), lineno=98, col_offset=18), lineno=98, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=99, col_offset=8), 'assertEqual', Load(), lineno=99, col_offset=8), [Attribute(Name('cmd', Load(), lineno=99, col_offset=25), 'format', Load(), lineno=99, col_offset=25), Name('default', Load(), lineno=99, col_offset=37)], [], None, None, lineno=99, col_offset=8), lineno=99, col_offset=8)], [], lineno=86, col_offset=4)], [], lineno=29, col_offset=0), FunctionDef('test_suite', arguments([], None, None, []), [Return(Call(Attribute(Name('unittest', Load(), lineno=102, col_offset=11), 'makeSuite', Load(), lineno=102, col_offset=11), [Name('BuildDumbTestCase', Load(), lineno=102, col_offset=30)], [], None, None, lineno=102, col_offset=11), lineno=102, col_offset=4)], [], lineno=101, col_offset=0), If(Compare(Name('__name__', Load(), lineno=104, col_offset=3), [Eq()], [Str('__main__', lineno=104, col_offset=15)], lineno=104, col_offset=3), [Expr(Call(Name('run_unittest', Load(), lineno=105, col_offset=4), [Call(Name('test_suite', Load(), lineno=105, col_offset=17), [], [], None, None, lineno=105, col_offset=17)], [], None, None, lineno=105, col_offset=4), lineno=105, col_offset=4)], [], lineno=104, col_offset=0)])
