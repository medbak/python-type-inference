Module([Expr(Str('Pseudo terminal utilities.', lineno=1, col_offset=0), lineno=1, col_offset=0), ImportFrom('select', [alias('select', None)], 0, lineno=9, col_offset=0), Import([alias('os', None)], lineno=10, col_offset=0), Import([alias('tty', None)], lineno=11, col_offset=0), Assign([Name('__all__', Store(), lineno=13, col_offset=0)], List([Str('openpty', lineno=13, col_offset=11), Str('fork', lineno=13, col_offset=21), Str('spawn', lineno=13, col_offset=28)], Load(), lineno=13, col_offset=10), lineno=13, col_offset=0), Assign([Name('STDIN_FILENO', Store(), lineno=15, col_offset=0)], Num(0, lineno=15, col_offset=15), lineno=15, col_offset=0), Assign([Name('STDOUT_FILENO', Store(), lineno=16, col_offset=0)], Num(1, lineno=16, col_offset=16), lineno=16, col_offset=0), Assign([Name('STDERR_FILENO', Store(), lineno=17, col_offset=0)], Num(2, lineno=17, col_offset=16), lineno=17, col_offset=0), Assign([Name('CHILD', Store(), lineno=19, col_offset=0)], Num(0, lineno=19, col_offset=8), lineno=19, col_offset=0), FunctionDef('openpty', arguments([], None, None, []), [Expr(Str('openpty() -> (master_fd, slave_fd)\n    Open a pty master/slave pair, using os.openpty() if possible.', lineno=23, col_offset=-1), lineno=23, col_offset=-1), TryExcept([Return(Call(Attribute(Name('os', Load(), lineno=26, col_offset=15), 'openpty', Load(), lineno=26, col_offset=15), [], [], None, None, lineno=26, col_offset=15), lineno=26, col_offset=8)], [ExceptHandler(Tuple([Name('AttributeError', Load(), lineno=27, col_offset=12), Name('OSError', Load(), lineno=27, col_offset=28)], Load(), lineno=27, col_offset=12), None, [Pass( lineno=28, col_offset=8)], lineno=27, col_offset=4)], [], lineno=25, col_offset=4), Assign([Tuple([Name('master_fd', Store(), lineno=29, col_offset=4), Name('slave_name', Store(), lineno=29, col_offset=15)], Store(), lineno=29, col_offset=4)], Call(Name('_open_terminal', Load(), lineno=29, col_offset=28), [], [], None, None, lineno=29, col_offset=28), lineno=29, col_offset=4), Assign([Name('slave_fd', Store(), lineno=30, col_offset=4)], Call(Name('slave_open', Load(), lineno=30, col_offset=15), [Name('slave_name', Load(), lineno=30, col_offset=26)], [], None, None, lineno=30, col_offset=15), lineno=30, col_offset=4), Return(Tuple([Name('master_fd', Load(), lineno=31, col_offset=11), Name('slave_fd', Load(), lineno=31, col_offset=22)], Load(), lineno=31, col_offset=11), lineno=31, col_offset=4)], [], lineno=21, col_offset=0), FunctionDef('master_open', arguments([], None, None, []), [Expr(Str('master_open() -> (master_fd, slave_name)\n    Open a pty master and return the fd, and the filename of the slave end.\n    Deprecated, use openpty() instead.', lineno=36, col_offset=-1), lineno=36, col_offset=-1), TryExcept([Assign([Tuple([Name('master_fd', Store(), lineno=39, col_offset=8), Name('slave_fd', Store(), lineno=39, col_offset=19)], Store(), lineno=39, col_offset=8)], Call(Attribute(Name('os', Load(), lineno=39, col_offset=30), 'openpty', Load(), lineno=39, col_offset=30), [], [], None, None, lineno=39, col_offset=30), lineno=39, col_offset=8)], [ExceptHandler(Tuple([Name('AttributeError', Load(), lineno=40, col_offset=12), Name('OSError', Load(), lineno=40, col_offset=28)], Load(), lineno=40, col_offset=12), None, [Pass( lineno=41, col_offset=8)], lineno=40, col_offset=4)], [Assign([Name('slave_name', Store(), lineno=43, col_offset=8)], Call(Attribute(Name('os', Load(), lineno=43, col_offset=21), 'ttyname', Load(), lineno=43, col_offset=21), [Name('slave_fd', Load(), lineno=43, col_offset=32)], [], None, None, lineno=43, col_offset=21), lineno=43, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=44, col_offset=8), 'close', Load(), lineno=44, col_offset=8), [Name('slave_fd', Load(), lineno=44, col_offset=17)], [], None, None, lineno=44, col_offset=8), lineno=44, col_offset=8), Return(Tuple([Name('master_fd', Load(), lineno=45, col_offset=15), Name('slave_name', Load(), lineno=45, col_offset=26)], Load(), lineno=45, col_offset=15), lineno=45, col_offset=8)], lineno=38, col_offset=4), Return(Call(Name('_open_terminal', Load(), lineno=47, col_offset=11), [], [], None, None, lineno=47, col_offset=11), lineno=47, col_offset=4)], [], lineno=33, col_offset=0), FunctionDef('_open_terminal', arguments([], None, None, []), [Expr(Str('Open pty master and return (master_fd, tty_name).\n    SGI and generic BSD version, for when openpty() fails.', lineno=51, col_offset=-1), lineno=51, col_offset=-1), TryExcept([Import([alias('sgi', None)], lineno=53, col_offset=8)], [ExceptHandler(Name('ImportError', Load(), lineno=54, col_offset=11), None, [Pass( lineno=55, col_offset=8)], lineno=54, col_offset=4)], [TryExcept([Assign([Tuple([Name('tty_name', Store(), lineno=58, col_offset=12), Name('master_fd', Store(), lineno=58, col_offset=22)], Store(), lineno=58, col_offset=12)], Call(Attribute(Name('sgi', Load(), lineno=58, col_offset=34), '_getpty', Load(), lineno=58, col_offset=34), [Attribute(Name('os', Load(), lineno=58, col_offset=46), 'O_RDWR', Load(), lineno=58, col_offset=46), Num(438, lineno=58, col_offset=57), Num(0, lineno=58, col_offset=63)], [], None, None, lineno=58, col_offset=34), lineno=58, col_offset=12)], [ExceptHandler(Name('IOError', Load(), lineno=59, col_offset=15), Name('msg', Store(), lineno=59, col_offset=24), [Raise(Attribute(Name('os', Load(), lineno=60, col_offset=18), 'error', Load(), lineno=60, col_offset=18), Name('msg', Load(), lineno=60, col_offset=28), None, lineno=60, col_offset=12)], lineno=59, col_offset=8)], [], lineno=57, col_offset=8), Return(Tuple([Name('master_fd', Load(), lineno=61, col_offset=15), Name('tty_name', Load(), lineno=61, col_offset=26)], Load(), lineno=61, col_offset=15), lineno=61, col_offset=8)], lineno=52, col_offset=4), For(Name('x', Store(), lineno=62, col_offset=8), Str('pqrstuvwxyzPQRST', lineno=62, col_offset=13), [For(Name('y', Store(), lineno=63, col_offset=12), Str('0123456789abcdef', lineno=63, col_offset=17), [Assign([Name('pty_name', Store(), lineno=64, col_offset=12)], BinOp(BinOp(Str('/dev/pty', lineno=64, col_offset=23), Add(), Name('x', Load(), lineno=64, col_offset=36), lineno=64, col_offset=23), Add(), Name('y', Load(), lineno=64, col_offset=40), lineno=64, col_offset=38), lineno=64, col_offset=12), TryExcept([Assign([Name('fd', Store(), lineno=66, col_offset=16)], Call(Attribute(Name('os', Load(), lineno=66, col_offset=21), 'open', Load(), lineno=66, col_offset=21), [Name('pty_name', Load(), lineno=66, col_offset=29), Attribute(Name('os', Load(), lineno=66, col_offset=39), 'O_RDWR', Load(), lineno=66, col_offset=39)], [], None, None, lineno=66, col_offset=21), lineno=66, col_offset=16)], [ExceptHandler(Attribute(Name('os', Load(), lineno=67, col_offset=19), 'error', Load(), lineno=67, col_offset=19), None, [Continue( lineno=68, col_offset=16)], lineno=67, col_offset=12)], [], lineno=65, col_offset=12), Return(Tuple([Name('fd', Load(), lineno=69, col_offset=20), BinOp(BinOp(Str('/dev/tty', lineno=69, col_offset=24), Add(), Name('x', Load(), lineno=69, col_offset=37), lineno=69, col_offset=24), Add(), Name('y', Load(), lineno=69, col_offset=41), lineno=69, col_offset=39)], Load(), lineno=69, col_offset=20), lineno=69, col_offset=12)], [], lineno=63, col_offset=8)], [], lineno=62, col_offset=4), Raise(Attribute(Name('os', Load(), lineno=70, col_offset=10), 'error', Load(), lineno=70, col_offset=10), Str('out of pty devices', lineno=70, col_offset=20), None, lineno=70, col_offset=4)], [], lineno=49, col_offset=0), FunctionDef('slave_open', arguments([Name('tty_name', Param(), lineno=72, col_offset=15)], None, None, []), [Expr(Str('slave_open(tty_name) -> slave_fd\n    Open the pty slave and acquire the controlling terminal, returning\n    opened filedescriptor.\n    Deprecated, use openpty() instead.', lineno=76, col_offset=-1), lineno=76, col_offset=-1), Assign([Name('result', Store(), lineno=78, col_offset=4)], Call(Attribute(Name('os', Load(), lineno=78, col_offset=13), 'open', Load(), lineno=78, col_offset=13), [Name('tty_name', Load(), lineno=78, col_offset=21), Attribute(Name('os', Load(), lineno=78, col_offset=31), 'O_RDWR', Load(), lineno=78, col_offset=31)], [], None, None, lineno=78, col_offset=13), lineno=78, col_offset=4), TryExcept([ImportFrom('fcntl', [alias('ioctl', None), alias('I_PUSH', None)], 0, lineno=80, col_offset=8)], [ExceptHandler(Name('ImportError', Load(), lineno=81, col_offset=11), None, [Return(Name('result', Load(), lineno=82, col_offset=15), lineno=82, col_offset=8)], lineno=81, col_offset=4)], [], lineno=79, col_offset=4), TryExcept([Expr(Call(Name('ioctl', Load(), lineno=84, col_offset=8), [Name('result', Load(), lineno=84, col_offset=14), Name('I_PUSH', Load(), lineno=84, col_offset=22), Str('ptem', lineno=84, col_offset=30)], [], None, None, lineno=84, col_offset=8), lineno=84, col_offset=8), Expr(Call(Name('ioctl', Load(), lineno=85, col_offset=8), [Name('result', Load(), lineno=85, col_offset=14), Name('I_PUSH', Load(), lineno=85, col_offset=22), Str('ldterm', lineno=85, col_offset=30)], [], None, None, lineno=85, col_offset=8), lineno=85, col_offset=8)], [ExceptHandler(Name('IOError', Load(), lineno=86, col_offset=11), None, [Pass( lineno=87, col_offset=8)], lineno=86, col_offset=4)], [], lineno=83, col_offset=4), Return(Name('result', Load(), lineno=88, col_offset=11), lineno=88, col_offset=4)], [], lineno=72, col_offset=0), FunctionDef('fork', arguments([], None, None, []), [Expr(Str('fork() -> (pid, master_fd)\n    Fork and make the child a session leader with a controlling terminal.', lineno=92, col_offset=-1), lineno=92, col_offset=-1), TryExcept([Assign([Tuple([Name('pid', Store(), lineno=95, col_offset=8), Name('fd', Store(), lineno=95, col_offset=13)], Store(), lineno=95, col_offset=8)], Call(Attribute(Name('os', Load(), lineno=95, col_offset=18), 'forkpty', Load(), lineno=95, col_offset=18), [], [], None, None, lineno=95, col_offset=18), lineno=95, col_offset=8)], [ExceptHandler(Tuple([Name('AttributeError', Load(), lineno=96, col_offset=12), Name('OSError', Load(), lineno=96, col_offset=28)], Load(), lineno=96, col_offset=12), None, [Pass( lineno=97, col_offset=8)], lineno=96, col_offset=4)], [If(Compare(Name('pid', Load(), lineno=99, col_offset=11), [Eq()], [Name('CHILD', Load(), lineno=99, col_offset=18)], lineno=99, col_offset=11), [TryExcept([Expr(Call(Attribute(Name('os', Load(), lineno=101, col_offset=16), 'setsid', Load(), lineno=101, col_offset=16), [], [], None, None, lineno=101, col_offset=16), lineno=101, col_offset=16)], [ExceptHandler(Name('OSError', Load(), lineno=102, col_offset=19), None, [Pass( lineno=104, col_offset=16)], lineno=102, col_offset=12)], [], lineno=100, col_offset=12)], [], lineno=99, col_offset=8), Return(Tuple([Name('pid', Load(), lineno=105, col_offset=15), Name('fd', Load(), lineno=105, col_offset=20)], Load(), lineno=105, col_offset=15), lineno=105, col_offset=8)], lineno=94, col_offset=4), Assign([Tuple([Name('master_fd', Store(), lineno=107, col_offset=4), Name('slave_fd', Store(), lineno=107, col_offset=15)], Store(), lineno=107, col_offset=4)], Call(Name('openpty', Load(), lineno=107, col_offset=26), [], [], None, None, lineno=107, col_offset=26), lineno=107, col_offset=4), Assign([Name('pid', Store(), lineno=108, col_offset=4)], Call(Attribute(Name('os', Load(), lineno=108, col_offset=10), 'fork', Load(), lineno=108, col_offset=10), [], [], None, None, lineno=108, col_offset=10), lineno=108, col_offset=4), If(Compare(Name('pid', Load(), lineno=109, col_offset=7), [Eq()], [Name('CHILD', Load(), lineno=109, col_offset=14)], lineno=109, col_offset=7), [Expr(Call(Attribute(Name('os', Load(), lineno=111, col_offset=8), 'setsid', Load(), lineno=111, col_offset=8), [], [], None, None, lineno=111, col_offset=8), lineno=111, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=112, col_offset=8), 'close', Load(), lineno=112, col_offset=8), [Name('master_fd', Load(), lineno=112, col_offset=17)], [], None, None, lineno=112, col_offset=8), lineno=112, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=115, col_offset=8), 'dup2', Load(), lineno=115, col_offset=8), [Name('slave_fd', Load(), lineno=115, col_offset=16), Name('STDIN_FILENO', Load(), lineno=115, col_offset=26)], [], None, None, lineno=115, col_offset=8), lineno=115, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=116, col_offset=8), 'dup2', Load(), lineno=116, col_offset=8), [Name('slave_fd', Load(), lineno=116, col_offset=16), Name('STDOUT_FILENO', Load(), lineno=116, col_offset=26)], [], None, None, lineno=116, col_offset=8), lineno=116, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=117, col_offset=8), 'dup2', Load(), lineno=117, col_offset=8), [Name('slave_fd', Load(), lineno=117, col_offset=16), Name('STDERR_FILENO', Load(), lineno=117, col_offset=26)], [], None, None, lineno=117, col_offset=8), lineno=117, col_offset=8), If(Compare(Name('slave_fd', Load(), lineno=118, col_offset=12), [Gt()], [Name('STDERR_FILENO', Load(), lineno=118, col_offset=23)], lineno=118, col_offset=12), [Expr(Call(Attribute(Name('os', Load(), lineno=119, col_offset=12), 'close', Load(), lineno=119, col_offset=12), [Name('slave_fd', Load(), lineno=119, col_offset=22)], [], None, None, lineno=119, col_offset=12), lineno=119, col_offset=12)], [], lineno=118, col_offset=8), Assign([Name('tmp_fd', Store(), lineno=122, col_offset=8)], Call(Attribute(Name('os', Load(), lineno=122, col_offset=17), 'open', Load(), lineno=122, col_offset=17), [Call(Attribute(Name('os', Load(), lineno=122, col_offset=25), 'ttyname', Load(), lineno=122, col_offset=25), [Name('STDOUT_FILENO', Load(), lineno=122, col_offset=36)], [], None, None, lineno=122, col_offset=25), Attribute(Name('os', Load(), lineno=122, col_offset=52), 'O_RDWR', Load(), lineno=122, col_offset=52)], [], None, None, lineno=122, col_offset=17), lineno=122, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=123, col_offset=8), 'close', Load(), lineno=123, col_offset=8), [Name('tmp_fd', Load(), lineno=123, col_offset=17)], [], None, None, lineno=123, col_offset=8), lineno=123, col_offset=8)], [Expr(Call(Attribute(Name('os', Load(), lineno=125, col_offset=8), 'close', Load(), lineno=125, col_offset=8), [Name('slave_fd', Load(), lineno=125, col_offset=17)], [], None, None, lineno=125, col_offset=8), lineno=125, col_offset=8)], lineno=109, col_offset=4), Return(Tuple([Name('pid', Load(), lineno=128, col_offset=11), Name('master_fd', Load(), lineno=128, col_offset=16)], Load(), lineno=128, col_offset=11), lineno=128, col_offset=4)], [], lineno=90, col_offset=0), FunctionDef('_writen', arguments([Name('fd', Param(), lineno=130, col_offset=12), Name('data', Param(), lineno=130, col_offset=16)], None, None, []), [Expr(Str('Write all the data to a descriptor.', lineno=131, col_offset=4), lineno=131, col_offset=4), While(Compare(Name('data', Load(), lineno=132, col_offset=10), [NotEq()], [Str('', lineno=132, col_offset=18)], lineno=132, col_offset=10), [Assign([Name('n', Store(), lineno=133, col_offset=8)], Call(Attribute(Name('os', Load(), lineno=133, col_offset=12), 'write', Load(), lineno=133, col_offset=12), [Name('fd', Load(), lineno=133, col_offset=21), Name('data', Load(), lineno=133, col_offset=25)], [], None, None, lineno=133, col_offset=12), lineno=133, col_offset=8), Assign([Name('data', Store(), lineno=134, col_offset=8)], Subscript(Name('data', Load(), lineno=134, col_offset=15), Slice(Name('n', Load(), lineno=134, col_offset=20), None, None), Load(), lineno=134, col_offset=15), lineno=134, col_offset=8)], [], lineno=132, col_offset=4)], [], lineno=130, col_offset=0), FunctionDef('_read', arguments([Name('fd', Param(), lineno=136, col_offset=10)], None, None, []), [Expr(Str('Default read function.', lineno=137, col_offset=4), lineno=137, col_offset=4), Return(Call(Attribute(Name('os', Load(), lineno=138, col_offset=11), 'read', Load(), lineno=138, col_offset=11), [Name('fd', Load(), lineno=138, col_offset=19), Num(1024, lineno=138, col_offset=23)], [], None, None, lineno=138, col_offset=11), lineno=138, col_offset=4)], [], lineno=136, col_offset=0), FunctionDef('_copy', arguments([Name('master_fd', Param(), lineno=140, col_offset=10), Name('master_read', Param(), lineno=140, col_offset=21), Name('stdin_read', Param(), lineno=140, col_offset=40)], None, None, [Name('_read', Load(), lineno=140, col_offset=33), Name('_read', Load(), lineno=140, col_offset=51)]), [Expr(Str('Parent copy loop.\n    Copies\n            pty master -> standard output   (master_read)\n            standard input -> pty master    (stdin_read)', lineno=144, col_offset=-1), lineno=144, col_offset=-1), While(Num(1, lineno=145, col_offset=10), [Assign([Tuple([Name('rfds', Store(), lineno=146, col_offset=8), Name('wfds', Store(), lineno=146, col_offset=14), Name('xfds', Store(), lineno=146, col_offset=20)], Store(), lineno=146, col_offset=8)], Call(Name('select', Load(), lineno=146, col_offset=27), [List([Name('master_fd', Load(), lineno=147, col_offset=17), Name('STDIN_FILENO', Load(), lineno=147, col_offset=28)], Load(), lineno=147, col_offset=16), List([], Load(), lineno=147, col_offset=43), List([], Load(), lineno=147, col_offset=47)], [], None, None, lineno=146, col_offset=27), lineno=146, col_offset=8), If(Compare(Name('master_fd', Load(), lineno=148, col_offset=11), [In()], [Name('rfds', Load(), lineno=148, col_offset=24)], lineno=148, col_offset=11), [Assign([Name('data', Store(), lineno=149, col_offset=12)], Call(Name('master_read', Load(), lineno=149, col_offset=19), [Name('master_fd', Load(), lineno=149, col_offset=31)], [], None, None, lineno=149, col_offset=19), lineno=149, col_offset=12), Expr(Call(Attribute(Name('os', Load(), lineno=150, col_offset=12), 'write', Load(), lineno=150, col_offset=12), [Name('STDOUT_FILENO', Load(), lineno=150, col_offset=21), Name('data', Load(), lineno=150, col_offset=36)], [], None, None, lineno=150, col_offset=12), lineno=150, col_offset=12)], [], lineno=148, col_offset=8), If(Compare(Name('STDIN_FILENO', Load(), lineno=151, col_offset=11), [In()], [Name('rfds', Load(), lineno=151, col_offset=27)], lineno=151, col_offset=11), [Assign([Name('data', Store(), lineno=152, col_offset=12)], Call(Name('stdin_read', Load(), lineno=152, col_offset=19), [Name('STDIN_FILENO', Load(), lineno=152, col_offset=30)], [], None, None, lineno=152, col_offset=19), lineno=152, col_offset=12), Expr(Call(Name('_writen', Load(), lineno=153, col_offset=12), [Name('master_fd', Load(), lineno=153, col_offset=20), Name('data', Load(), lineno=153, col_offset=31)], [], None, None, lineno=153, col_offset=12), lineno=153, col_offset=12)], [], lineno=151, col_offset=8)], [], lineno=145, col_offset=4)], [], lineno=140, col_offset=0), FunctionDef('spawn', arguments([Name('argv', Param(), lineno=155, col_offset=10), Name('master_read', Param(), lineno=155, col_offset=16), Name('stdin_read', Param(), lineno=155, col_offset=35)], None, None, [Name('_read', Load(), lineno=155, col_offset=28), Name('_read', Load(), lineno=155, col_offset=46)]), [Expr(Str('Create a spawned process.', lineno=156, col_offset=4), lineno=156, col_offset=4), If(Compare(Call(Name('type', Load(), lineno=157, col_offset=7), [Name('argv', Load(), lineno=157, col_offset=12)], [], None, None, lineno=157, col_offset=7), [Eq()], [Call(Name('type', Load(), lineno=157, col_offset=21), [Str('', lineno=157, col_offset=26)], [], None, None, lineno=157, col_offset=21)], lineno=157, col_offset=7), [Assign([Name('argv', Store(), lineno=158, col_offset=8)], Tuple([Name('argv', Load(), lineno=158, col_offset=16)], Load(), lineno=158, col_offset=16), lineno=158, col_offset=8)], [], lineno=157, col_offset=4), Assign([Tuple([Name('pid', Store(), lineno=159, col_offset=4), Name('master_fd', Store(), lineno=159, col_offset=9)], Store(), lineno=159, col_offset=4)], Call(Name('fork', Load(), lineno=159, col_offset=21), [], [], None, None, lineno=159, col_offset=21), lineno=159, col_offset=4), If(Compare(Name('pid', Load(), lineno=160, col_offset=7), [Eq()], [Name('CHILD', Load(), lineno=160, col_offset=14)], lineno=160, col_offset=7), [Expr(Call(Attribute(Name('os', Load(), lineno=161, col_offset=8), 'execlp', Load(), lineno=161, col_offset=8), [Subscript(Name('argv', Load(), lineno=161, col_offset=18), Index(Num(0, lineno=161, col_offset=23)), Load(), lineno=161, col_offset=18)], [], Name('argv', Load(), lineno=161, col_offset=28), None, lineno=161, col_offset=8), lineno=161, col_offset=8)], [], lineno=160, col_offset=4), TryExcept([Assign([Name('mode', Store(), lineno=163, col_offset=8)], Call(Attribute(Name('tty', Load(), lineno=163, col_offset=15), 'tcgetattr', Load(), lineno=163, col_offset=15), [Name('STDIN_FILENO', Load(), lineno=163, col_offset=29)], [], None, None, lineno=163, col_offset=15), lineno=163, col_offset=8), Expr(Call(Attribute(Name('tty', Load(), lineno=164, col_offset=8), 'setraw', Load(), lineno=164, col_offset=8), [Name('STDIN_FILENO', Load(), lineno=164, col_offset=19)], [], None, None, lineno=164, col_offset=8), lineno=164, col_offset=8), Assign([Name('restore', Store(), lineno=165, col_offset=8)], Num(1, lineno=165, col_offset=18), lineno=165, col_offset=8)], [ExceptHandler(Attribute(Name('tty', Load(), lineno=166, col_offset=11), 'error', Load(), lineno=166, col_offset=11), None, [Assign([Name('restore', Store(), lineno=167, col_offset=8)], Num(0, lineno=167, col_offset=18), lineno=167, col_offset=8)], lineno=166, col_offset=4)], [], lineno=162, col_offset=4), TryExcept([Expr(Call(Name('_copy', Load(), lineno=169, col_offset=8), [Name('master_fd', Load(), lineno=169, col_offset=14), Name('master_read', Load(), lineno=169, col_offset=25), Name('stdin_read', Load(), lineno=169, col_offset=38)], [], None, None, lineno=169, col_offset=8), lineno=169, col_offset=8)], [ExceptHandler(Tuple([Name('IOError', Load(), lineno=170, col_offset=12), Name('OSError', Load(), lineno=170, col_offset=21)], Load(), lineno=170, col_offset=12), None, [If(Name('restore', Load(), lineno=171, col_offset=11), [Expr(Call(Attribute(Name('tty', Load(), lineno=172, col_offset=12), 'tcsetattr', Load(), lineno=172, col_offset=12), [Name('STDIN_FILENO', Load(), lineno=172, col_offset=26), Attribute(Name('tty', Load(), lineno=172, col_offset=40), 'TCSAFLUSH', Load(), lineno=172, col_offset=40), Name('mode', Load(), lineno=172, col_offset=55)], [], None, None, lineno=172, col_offset=12), lineno=172, col_offset=12)], [], lineno=171, col_offset=8)], lineno=170, col_offset=4)], [], lineno=168, col_offset=4), Expr(Call(Attribute(Name('os', Load(), lineno=174, col_offset=4), 'close', Load(), lineno=174, col_offset=4), [Name('master_fd', Load(), lineno=174, col_offset=13)], [], None, None, lineno=174, col_offset=4), lineno=174, col_offset=4)], [], lineno=155, col_offset=0)])
