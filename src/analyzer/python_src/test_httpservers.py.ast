Module([Expr(Str('Unittests for the various HTTPServer modules.\n\nWritten by Cody A.W. Somerville <cody-somerville@ubuntu.com>,\nJosip Dzolonga, and Michael Otteneder for the 2007/08 GHOP contest.\n', lineno=5, col_offset=-1), lineno=5, col_offset=-1), ImportFrom('BaseHTTPServer', [alias('BaseHTTPRequestHandler', None), alias('HTTPServer', None)], 0, lineno=7, col_offset=0), ImportFrom('SimpleHTTPServer', [alias('SimpleHTTPRequestHandler', None)], 0, lineno=8, col_offset=0), ImportFrom('CGIHTTPServer', [alias('CGIHTTPRequestHandler', None)], 0, lineno=9, col_offset=0), Import([alias('CGIHTTPServer', None)], lineno=10, col_offset=0), Import([alias('os', None)], lineno=12, col_offset=0), Import([alias('sys', None)], lineno=13, col_offset=0), Import([alias('re', None)], lineno=14, col_offset=0), Import([alias('base64', None)], lineno=15, col_offset=0), Import([alias('shutil', None)], lineno=16, col_offset=0), Import([alias('urllib', None)], lineno=17, col_offset=0), Import([alias('httplib', None)], lineno=18, col_offset=0), Import([alias('tempfile', None)], lineno=19, col_offset=0), Import([alias('unittest', None)], lineno=21, col_offset=0), ImportFrom('StringIO', [alias('StringIO', None)], 0, lineno=23, col_offset=0), ImportFrom('test', [alias('test_support', None)], 0, lineno=25, col_offset=0), Assign([Name('threading', Store(), lineno=26, col_offset=0)], Call(Attribute(Name('test_support', Load(), lineno=26, col_offset=12), 'import_module', Load(), lineno=26, col_offset=12), [Str('threading', lineno=26, col_offset=39)], [], None, None, lineno=26, col_offset=12), lineno=26, col_offset=0), ClassDef('NoLogRequestHandler', [], [FunctionDef('log_message', arguments([Name('self', Param(), lineno=30, col_offset=20)], 'args', None, []), [Pass( lineno=32, col_offset=8)], [], lineno=30, col_offset=4)], [], lineno=29, col_offset=0), ClassDef('SocketlessRequestHandler', [Name('BaseHTTPRequestHandler', Load(), lineno=34, col_offset=31)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=35, col_offset=17)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=36, col_offset=8), 'get_called', Store(), lineno=36, col_offset=8)], Name('False', Load(), lineno=36, col_offset=26), lineno=36, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=37, col_offset=8), 'protocol_version', Store(), lineno=37, col_offset=8)], Str('HTTP/1.1', lineno=37, col_offset=32), lineno=37, col_offset=8)], [], lineno=35, col_offset=4), FunctionDef('do_GET', arguments([Name('self', Param(), lineno=39, col_offset=15)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=40, col_offset=8), 'get_called', Store(), lineno=40, col_offset=8)], Name('True', Load(), lineno=40, col_offset=26), lineno=40, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=41, col_offset=8), 'send_response', Load(), lineno=41, col_offset=8), [Num(200, lineno=41, col_offset=27)], [], None, None, lineno=41, col_offset=8), lineno=41, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=42, col_offset=8), 'send_header', Load(), lineno=42, col_offset=8), [Str('Content-Type', lineno=42, col_offset=25), Str('text/html', lineno=42, col_offset=41)], [], None, None, lineno=42, col_offset=8), lineno=42, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=43, col_offset=8), 'end_headers', Load(), lineno=43, col_offset=8), [], [], None, None, lineno=43, col_offset=8), lineno=43, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=44, col_offset=8), 'wfile', Load(), lineno=44, col_offset=8), 'write', Load(), lineno=44, col_offset=8), [Str('<html><body>Data</body></html>\r\n', lineno=44, col_offset=25)], [], None, None, lineno=44, col_offset=8), lineno=44, col_offset=8)], [], lineno=39, col_offset=4), FunctionDef('log_message', arguments([Name('self', Param(), lineno=46, col_offset=20), Name('format', Param(), lineno=46, col_offset=26)], 'args', None, []), [Pass( lineno=47, col_offset=8)], [], lineno=46, col_offset=4)], [], lineno=34, col_offset=0), ClassDef('TestServerThread', [Attribute(Name('threading', Load(), lineno=51, col_offset=23), 'Thread', Load(), lineno=51, col_offset=23)], [FunctionDef('__init__', arguments([Name('self', Param(), lineno=52, col_offset=17), Name('test_object', Param(), lineno=52, col_offset=23), Name('request_handler', Param(), lineno=52, col_offset=36)], None, None, []), [Expr(Call(Attribute(Attribute(Name('threading', Load(), lineno=53, col_offset=8), 'Thread', Load(), lineno=53, col_offset=8), '__init__', Load(), lineno=53, col_offset=8), [Name('self', Load(), lineno=53, col_offset=34)], [], None, None, lineno=53, col_offset=8), lineno=53, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=54, col_offset=8), 'request_handler', Store(), lineno=54, col_offset=8)], Name('request_handler', Load(), lineno=54, col_offset=31), lineno=54, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=55, col_offset=8), 'test_object', Store(), lineno=55, col_offset=8)], Name('test_object', Load(), lineno=55, col_offset=27), lineno=55, col_offset=8)], [], lineno=52, col_offset=4), FunctionDef('run', arguments([Name('self', Param(), lineno=57, col_offset=12)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=58, col_offset=8), 'server', Store(), lineno=58, col_offset=8)], Call(Name('HTTPServer', Load(), lineno=58, col_offset=22), [Tuple([Str('', lineno=58, col_offset=34), Num(0, lineno=58, col_offset=38)], Load(), lineno=58, col_offset=34), Attribute(Name('self', Load(), lineno=58, col_offset=42), 'request_handler', Load(), lineno=58, col_offset=42)], [], None, None, lineno=58, col_offset=22), lineno=58, col_offset=8), Assign([Attribute(Attribute(Name('self', Load(), lineno=59, col_offset=8), 'test_object', Load(), lineno=59, col_offset=8), 'PORT', Store(), lineno=59, col_offset=8)], Subscript(Call(Attribute(Attribute(Attribute(Name('self', Load(), lineno=59, col_offset=32), 'server', Load(), lineno=59, col_offset=32), 'socket', Load(), lineno=59, col_offset=32), 'getsockname', Load(), lineno=59, col_offset=32), [], [], None, None, lineno=59, col_offset=32), Index(Num(1, lineno=59, col_offset=65)), Load(), lineno=59, col_offset=32), lineno=59, col_offset=8), Expr(Call(Attribute(Attribute(Attribute(Name('self', Load(), lineno=60, col_offset=8), 'test_object', Load(), lineno=60, col_offset=8), 'server_started', Load(), lineno=60, col_offset=8), 'set', Load(), lineno=60, col_offset=8), [], [], None, None, lineno=60, col_offset=8), lineno=60, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=61, col_offset=8), 'test_object', Store(), lineno=61, col_offset=8)], Name('None', Load(), lineno=61, col_offset=27), lineno=61, col_offset=8), TryFinally([Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=63, col_offset=12), 'server', Load(), lineno=63, col_offset=12), 'serve_forever', Load(), lineno=63, col_offset=12), [Num(0.05, lineno=63, col_offset=38)], [], None, None, lineno=63, col_offset=12), lineno=63, col_offset=12)], [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=65, col_offset=12), 'server', Load(), lineno=65, col_offset=12), 'server_close', Load(), lineno=65, col_offset=12), [], [], None, None, lineno=65, col_offset=12), lineno=65, col_offset=12)], lineno=62, col_offset=8)], [], lineno=57, col_offset=4), FunctionDef('stop', arguments([Name('self', Param(), lineno=67, col_offset=13)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=68, col_offset=8), 'server', Load(), lineno=68, col_offset=8), 'shutdown', Load(), lineno=68, col_offset=8), [], [], None, None, lineno=68, col_offset=8), lineno=68, col_offset=8)], [], lineno=67, col_offset=4)], [], lineno=51, col_offset=0), ClassDef('BaseTestCase', [Attribute(Name('unittest', Load(), lineno=71, col_offset=19), 'TestCase', Load(), lineno=71, col_offset=19)], [FunctionDef('setUp', arguments([Name('self', Param(), lineno=72, col_offset=14)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=73, col_offset=8), '_threads', Store(), lineno=73, col_offset=8)], Call(Attribute(Name('test_support', Load(), lineno=73, col_offset=24), 'threading_setup', Load(), lineno=73, col_offset=24), [], [], None, None, lineno=73, col_offset=24), lineno=73, col_offset=8), Assign([Attribute(Name('os', Load(), lineno=74, col_offset=8), 'environ', Store(), lineno=74, col_offset=8)], Call(Attribute(Name('test_support', Load(), lineno=74, col_offset=21), 'EnvironmentVarGuard', Load(), lineno=74, col_offset=21), [], [], None, None, lineno=74, col_offset=21), lineno=74, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=75, col_offset=8), 'server_started', Store(), lineno=75, col_offset=8)], Call(Attribute(Name('threading', Load(), lineno=75, col_offset=30), 'Event', Load(), lineno=75, col_offset=30), [], [], None, None, lineno=75, col_offset=30), lineno=75, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=76, col_offset=8), 'thread', Store(), lineno=76, col_offset=8)], Call(Name('TestServerThread', Load(), lineno=76, col_offset=22), [Name('self', Load(), lineno=76, col_offset=39), Attribute(Name('self', Load(), lineno=76, col_offset=45), 'request_handler', Load(), lineno=76, col_offset=45)], [], None, None, lineno=76, col_offset=22), lineno=76, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=77, col_offset=8), 'thread', Load(), lineno=77, col_offset=8), 'start', Load(), lineno=77, col_offset=8), [], [], None, None, lineno=77, col_offset=8), lineno=77, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=78, col_offset=8), 'server_started', Load(), lineno=78, col_offset=8), 'wait', Load(), lineno=78, col_offset=8), [], [], None, None, lineno=78, col_offset=8), lineno=78, col_offset=8)], [], lineno=72, col_offset=4), FunctionDef('tearDown', arguments([Name('self', Param(), lineno=80, col_offset=17)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=81, col_offset=8), 'thread', Load(), lineno=81, col_offset=8), 'stop', Load(), lineno=81, col_offset=8), [], [], None, None, lineno=81, col_offset=8), lineno=81, col_offset=8), Expr(Call(Attribute(Attribute(Name('os', Load(), lineno=82, col_offset=8), 'environ', Load(), lineno=82, col_offset=8), '__exit__', Load(), lineno=82, col_offset=8), [], [], None, None, lineno=82, col_offset=8), lineno=82, col_offset=8), Expr(Call(Attribute(Name('test_support', Load(), lineno=83, col_offset=8), 'threading_cleanup', Load(), lineno=83, col_offset=8), [], [], Attribute(Name('self', Load(), lineno=83, col_offset=40), '_threads', Load(), lineno=83, col_offset=40), None, lineno=83, col_offset=8), lineno=83, col_offset=8)], [], lineno=80, col_offset=4), FunctionDef('request', arguments([Name('self', Param(), lineno=85, col_offset=16), Name('uri', Param(), lineno=85, col_offset=22), Name('method', Param(), lineno=85, col_offset=27), Name('body', Param(), lineno=85, col_offset=41), Name('headers', Param(), lineno=85, col_offset=52)], None, None, [Str('GET', lineno=85, col_offset=34), Name('None', Load(), lineno=85, col_offset=46), Dict([], [], lineno=85, col_offset=60)]), [Assign([Attribute(Name('self', Load(), lineno=86, col_offset=8), 'connection', Store(), lineno=86, col_offset=8)], Call(Attribute(Name('httplib', Load(), lineno=86, col_offset=26), 'HTTPConnection', Load(), lineno=86, col_offset=26), [Str('localhost', lineno=86, col_offset=49), Attribute(Name('self', Load(), lineno=86, col_offset=62), 'PORT', Load(), lineno=86, col_offset=62)], [], None, None, lineno=86, col_offset=26), lineno=86, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=87, col_offset=8), 'connection', Load(), lineno=87, col_offset=8), 'request', Load(), lineno=87, col_offset=8), [Name('method', Load(), lineno=87, col_offset=32), Name('uri', Load(), lineno=87, col_offset=40), Name('body', Load(), lineno=87, col_offset=45), Name('headers', Load(), lineno=87, col_offset=51)], [], None, None, lineno=87, col_offset=8), lineno=87, col_offset=8), Return(Call(Attribute(Attribute(Name('self', Load(), lineno=88, col_offset=15), 'connection', Load(), lineno=88, col_offset=15), 'getresponse', Load(), lineno=88, col_offset=15), [], [], None, None, lineno=88, col_offset=15), lineno=88, col_offset=8)], [], lineno=85, col_offset=4)], [], lineno=71, col_offset=0), ClassDef('BaseHTTPRequestHandlerTestCase', [Attribute(Name('unittest', Load(), lineno=90, col_offset=37), 'TestCase', Load(), lineno=90, col_offset=37)], [Expr(Str('Test the functionaility of the BaseHTTPServer focussing on\n    BaseHTTPRequestHandler.\n    ', lineno=93, col_offset=-1), lineno=93, col_offset=-1), Assign([Name('HTTPResponseMatch', Store(), lineno=95, col_offset=4)], Call(Attribute(Name('re', Load(), lineno=95, col_offset=24), 'compile', Load(), lineno=95, col_offset=24), [Str('HTTP/1.[0-9]+ 200 OK', lineno=95, col_offset=35)], [], None, None, lineno=95, col_offset=24), lineno=95, col_offset=4), FunctionDef('setUp', arguments([Name('self', Param(), lineno=97, col_offset=15)], None, None, []), [Assign([Attribute(Name('self', Load(), lineno=98, col_offset=8), 'handler', Store(), lineno=98, col_offset=8)], Call(Name('SocketlessRequestHandler', Load(), lineno=98, col_offset=23), [], [], None, None, lineno=98, col_offset=23), lineno=98, col_offset=8)], [], lineno=97, col_offset=4), FunctionDef('send_typical_request', arguments([Name('self', Param(), lineno=100, col_offset=29), Name('message', Param(), lineno=100, col_offset=35)], None, None, []), [Assign([Name('input', Store(), lineno=101, col_offset=8)], Call(Name('StringIO', Load(), lineno=101, col_offset=16), [Name('message', Load(), lineno=101, col_offset=25)], [], None, None, lineno=101, col_offset=16), lineno=101, col_offset=8), Assign([Name('output', Store(), lineno=102, col_offset=8)], Call(Name('StringIO', Load(), lineno=102, col_offset=17), [], [], None, None, lineno=102, col_offset=17), lineno=102, col_offset=8), Assign([Attribute(Attribute(Name('self', Load(), lineno=103, col_offset=8), 'handler', Load(), lineno=103, col_offset=8), 'rfile', Store(), lineno=103, col_offset=8)], Name('input', Load(), lineno=103, col_offset=29), lineno=103, col_offset=8), Assign([Attribute(Attribute(Name('self', Load(), lineno=104, col_offset=8), 'handler', Load(), lineno=104, col_offset=8), 'wfile', Store(), lineno=104, col_offset=8)], Name('output', Load(), lineno=104, col_offset=29), lineno=104, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=105, col_offset=8), 'handler', Load(), lineno=105, col_offset=8), 'handle_one_request', Load(), lineno=105, col_offset=8), [], [], None, None, lineno=105, col_offset=8), lineno=105, col_offset=8), Expr(Call(Attribute(Name('output', Load(), lineno=106, col_offset=8), 'seek', Load(), lineno=106, col_offset=8), [Num(0, lineno=106, col_offset=20)], [], None, None, lineno=106, col_offset=8), lineno=106, col_offset=8), Return(Call(Attribute(Name('output', Load(), lineno=107, col_offset=15), 'readlines', Load(), lineno=107, col_offset=15), [], [], None, None, lineno=107, col_offset=15), lineno=107, col_offset=8)], [], lineno=100, col_offset=4), FunctionDef('verify_get_called', arguments([Name('self', Param(), lineno=109, col_offset=26)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=110, col_offset=8), 'assertTrue', Load(), lineno=110, col_offset=8), [Attribute(Attribute(Name('self', Load(), lineno=110, col_offset=24), 'handler', Load(), lineno=110, col_offset=24), 'get_called', Load(), lineno=110, col_offset=24)], [], None, None, lineno=110, col_offset=8), lineno=110, col_offset=8)], [], lineno=109, col_offset=4), FunctionDef('verify_expected_headers', arguments([Name('self', Param(), lineno=112, col_offset=32), Name('headers', Param(), lineno=112, col_offset=38)], None, None, []), [For(Name('fieldName', Store(), lineno=113, col_offset=12), Tuple([Str('Server: ', lineno=113, col_offset=25), Str('Date: ', lineno=113, col_offset=37), Str('Content-Type: ', lineno=113, col_offset=47)], Load(), lineno=113, col_offset=25), [Expr(Call(Attribute(Name('self', Load(), lineno=114, col_offset=12), 'assertEqual', Load(), lineno=114, col_offset=12), [Call(Name('sum', Load(), lineno=114, col_offset=29), [GeneratorExp(Call(Attribute(Name('h', Load(), lineno=114, col_offset=33), 'startswith', Load(), lineno=114, col_offset=33), [Name('fieldName', Load(), lineno=114, col_offset=46)], [], None, None, lineno=114, col_offset=33), [comprehension(Name('h', Store(), lineno=114, col_offset=61), Name('headers', Load(), lineno=114, col_offset=66), [])], lineno=114, col_offset=33)], [], None, None, lineno=114, col_offset=29), Num(1, lineno=114, col_offset=76)], [], None, None, lineno=114, col_offset=12), lineno=114, col_offset=12)], [], lineno=113, col_offset=8)], [], lineno=112, col_offset=4), FunctionDef('verify_http_server_response', arguments([Name('self', Param(), lineno=116, col_offset=36), Name('response', Param(), lineno=116, col_offset=42)], None, None, []), [Assign([Name('match', Store(), lineno=117, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=117, col_offset=16), 'HTTPResponseMatch', Load(), lineno=117, col_offset=16), 'search', Load(), lineno=117, col_offset=16), [Name('response', Load(), lineno=117, col_offset=46)], [], None, None, lineno=117, col_offset=16), lineno=117, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=118, col_offset=8), 'assertTrue', Load(), lineno=118, col_offset=8), [Compare(Name('match', Load(), lineno=118, col_offset=24), [IsNot()], [Name('None', Load(), lineno=118, col_offset=37)], lineno=118, col_offset=24)], [], None, None, lineno=118, col_offset=8), lineno=118, col_offset=8)], [], lineno=116, col_offset=4), FunctionDef('test_http_1_1', arguments([Name('self', Param(), lineno=120, col_offset=22)], None, None, []), [Assign([Name('result', Store(), lineno=121, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=121, col_offset=17), 'send_typical_request', Load(), lineno=121, col_offset=17), [Str('GET / HTTP/1.1\r\n\r\n', lineno=121, col_offset=43)], [], None, None, lineno=121, col_offset=17), lineno=121, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=122, col_offset=8), 'verify_http_server_response', Load(), lineno=122, col_offset=8), [Subscript(Name('result', Load(), lineno=122, col_offset=41), Index(Num(0, lineno=122, col_offset=48)), Load(), lineno=122, col_offset=41)], [], None, None, lineno=122, col_offset=8), lineno=122, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=123, col_offset=8), 'verify_expected_headers', Load(), lineno=123, col_offset=8), [Subscript(Name('result', Load(), lineno=123, col_offset=37), Slice(Num(1, lineno=123, col_offset=44), Num(-1, lineno=123, col_offset=47), None), Load(), lineno=123, col_offset=37)], [], None, None, lineno=123, col_offset=8), lineno=123, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=124, col_offset=8), 'verify_get_called', Load(), lineno=124, col_offset=8), [], [], None, None, lineno=124, col_offset=8), lineno=124, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=125, col_offset=8), 'assertEqual', Load(), lineno=125, col_offset=8), [Subscript(Name('result', Load(), lineno=125, col_offset=25), Index(Num(-1, lineno=125, col_offset=33)), Load(), lineno=125, col_offset=25), Str('<html><body>Data</body></html>\r\n', lineno=125, col_offset=37)], [], None, None, lineno=125, col_offset=8), lineno=125, col_offset=8)], [], lineno=120, col_offset=4), FunctionDef('test_http_1_0', arguments([Name('self', Param(), lineno=127, col_offset=22)], None, None, []), [Assign([Name('result', Store(), lineno=128, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=128, col_offset=17), 'send_typical_request', Load(), lineno=128, col_offset=17), [Str('GET / HTTP/1.0\r\n\r\n', lineno=128, col_offset=43)], [], None, None, lineno=128, col_offset=17), lineno=128, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=129, col_offset=8), 'verify_http_server_response', Load(), lineno=129, col_offset=8), [Subscript(Name('result', Load(), lineno=129, col_offset=41), Index(Num(0, lineno=129, col_offset=48)), Load(), lineno=129, col_offset=41)], [], None, None, lineno=129, col_offset=8), lineno=129, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=130, col_offset=8), 'verify_expected_headers', Load(), lineno=130, col_offset=8), [Subscript(Name('result', Load(), lineno=130, col_offset=37), Slice(Num(1, lineno=130, col_offset=44), Num(-1, lineno=130, col_offset=47), None), Load(), lineno=130, col_offset=37)], [], None, None, lineno=130, col_offset=8), lineno=130, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=131, col_offset=8), 'verify_get_called', Load(), lineno=131, col_offset=8), [], [], None, None, lineno=131, col_offset=8), lineno=131, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=132, col_offset=8), 'assertEqual', Load(), lineno=132, col_offset=8), [Subscript(Name('result', Load(), lineno=132, col_offset=25), Index(Num(-1, lineno=132, col_offset=33)), Load(), lineno=132, col_offset=25), Str('<html><body>Data</body></html>\r\n', lineno=132, col_offset=37)], [], None, None, lineno=132, col_offset=8), lineno=132, col_offset=8)], [], lineno=127, col_offset=4), FunctionDef('test_http_0_9', arguments([Name('self', Param(), lineno=134, col_offset=22)], None, None, []), [Assign([Name('result', Store(), lineno=135, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=135, col_offset=17), 'send_typical_request', Load(), lineno=135, col_offset=17), [Str('GET / HTTP/0.9\r\n\r\n', lineno=135, col_offset=43)], [], None, None, lineno=135, col_offset=17), lineno=135, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=136, col_offset=8), 'assertEqual', Load(), lineno=136, col_offset=8), [Call(Name('len', Load(), lineno=136, col_offset=25), [Name('result', Load(), lineno=136, col_offset=29)], [], None, None, lineno=136, col_offset=25), Num(1, lineno=136, col_offset=38)], [], None, None, lineno=136, col_offset=8), lineno=136, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=137, col_offset=8), 'assertEqual', Load(), lineno=137, col_offset=8), [Subscript(Name('result', Load(), lineno=137, col_offset=25), Index(Num(0, lineno=137, col_offset=32)), Load(), lineno=137, col_offset=25), Str('<html><body>Data</body></html>\r\n', lineno=137, col_offset=36)], [], None, None, lineno=137, col_offset=8), lineno=137, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=138, col_offset=8), 'verify_get_called', Load(), lineno=138, col_offset=8), [], [], None, None, lineno=138, col_offset=8), lineno=138, col_offset=8)], [], lineno=134, col_offset=4), FunctionDef('test_with_continue_1_0', arguments([Name('self', Param(), lineno=140, col_offset=31)], None, None, []), [Assign([Name('result', Store(), lineno=141, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=141, col_offset=17), 'send_typical_request', Load(), lineno=141, col_offset=17), [Str('GET / HTTP/1.0\r\nExpect: 100-continue\r\n\r\n', lineno=141, col_offset=43)], [], None, None, lineno=141, col_offset=17), lineno=141, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=142, col_offset=8), 'verify_http_server_response', Load(), lineno=142, col_offset=8), [Subscript(Name('result', Load(), lineno=142, col_offset=41), Index(Num(0, lineno=142, col_offset=48)), Load(), lineno=142, col_offset=41)], [], None, None, lineno=142, col_offset=8), lineno=142, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=143, col_offset=8), 'verify_expected_headers', Load(), lineno=143, col_offset=8), [Subscript(Name('result', Load(), lineno=143, col_offset=37), Slice(Num(1, lineno=143, col_offset=44), Num(-1, lineno=143, col_offset=47), None), Load(), lineno=143, col_offset=37)], [], None, None, lineno=143, col_offset=8), lineno=143, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=144, col_offset=8), 'verify_get_called', Load(), lineno=144, col_offset=8), [], [], None, None, lineno=144, col_offset=8), lineno=144, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=145, col_offset=8), 'assertEqual', Load(), lineno=145, col_offset=8), [Subscript(Name('result', Load(), lineno=145, col_offset=25), Index(Num(-1, lineno=145, col_offset=33)), Load(), lineno=145, col_offset=25), Str('<html><body>Data</body></html>\r\n', lineno=145, col_offset=37)], [], None, None, lineno=145, col_offset=8), lineno=145, col_offset=8)], [], lineno=140, col_offset=4)], [], lineno=90, col_offset=0), ClassDef('BaseHTTPServerTestCase', [Name('BaseTestCase', Load(), lineno=148, col_offset=29)], [ClassDef('request_handler', [Name('NoLogRequestHandler', Load(), lineno=149, col_offset=26), Name('BaseHTTPRequestHandler', Load(), lineno=149, col_offset=47)], [Assign([Name('protocol_version', Store(), lineno=150, col_offset=8)], Str('HTTP/1.1', lineno=150, col_offset=27), lineno=150, col_offset=8), Assign([Name('default_request_version', Store(), lineno=151, col_offset=8)], Str('HTTP/1.1', lineno=151, col_offset=34), lineno=151, col_offset=8), FunctionDef('do_TEST', arguments([Name('self', Param(), lineno=153, col_offset=20)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=154, col_offset=12), 'send_response', Load(), lineno=154, col_offset=12), [Num(204, lineno=154, col_offset=31)], [], None, None, lineno=154, col_offset=12), lineno=154, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=155, col_offset=12), 'send_header', Load(), lineno=155, col_offset=12), [Str('Content-Type', lineno=155, col_offset=29), Str('text/html', lineno=155, col_offset=45)], [], None, None, lineno=155, col_offset=12), lineno=155, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=156, col_offset=12), 'send_header', Load(), lineno=156, col_offset=12), [Str('Connection', lineno=156, col_offset=29), Str('close', lineno=156, col_offset=43)], [], None, None, lineno=156, col_offset=12), lineno=156, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=157, col_offset=12), 'end_headers', Load(), lineno=157, col_offset=12), [], [], None, None, lineno=157, col_offset=12), lineno=157, col_offset=12)], [], lineno=153, col_offset=8), FunctionDef('do_KEEP', arguments([Name('self', Param(), lineno=159, col_offset=20)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=160, col_offset=12), 'send_response', Load(), lineno=160, col_offset=12), [Num(204, lineno=160, col_offset=31)], [], None, None, lineno=160, col_offset=12), lineno=160, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=161, col_offset=12), 'send_header', Load(), lineno=161, col_offset=12), [Str('Content-Type', lineno=161, col_offset=29), Str('text/html', lineno=161, col_offset=45)], [], None, None, lineno=161, col_offset=12), lineno=161, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=162, col_offset=12), 'send_header', Load(), lineno=162, col_offset=12), [Str('Connection', lineno=162, col_offset=29), Str('keep-alive', lineno=162, col_offset=43)], [], None, None, lineno=162, col_offset=12), lineno=162, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=163, col_offset=12), 'end_headers', Load(), lineno=163, col_offset=12), [], [], None, None, lineno=163, col_offset=12), lineno=163, col_offset=12)], [], lineno=159, col_offset=8), FunctionDef('do_KEYERROR', arguments([Name('self', Param(), lineno=165, col_offset=24)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=166, col_offset=12), 'send_error', Load(), lineno=166, col_offset=12), [Num(999, lineno=166, col_offset=28)], [], None, None, lineno=166, col_offset=12), lineno=166, col_offset=12)], [], lineno=165, col_offset=8), FunctionDef('do_CUSTOM', arguments([Name('self', Param(), lineno=168, col_offset=22)], None, None, []), [Expr(Call(Attribute(Name('self', Load(), lineno=169, col_offset=12), 'send_response', Load(), lineno=169, col_offset=12), [Num(999, lineno=169, col_offset=31)], [], None, None, lineno=169, col_offset=12), lineno=169, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=170, col_offset=12), 'send_header', Load(), lineno=170, col_offset=12), [Str('Content-Type', lineno=170, col_offset=29), Str('text/html', lineno=170, col_offset=45)], [], None, None, lineno=170, col_offset=12), lineno=170, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=171, col_offset=12), 'send_header', Load(), lineno=171, col_offset=12), [Str('Connection', lineno=171, col_offset=29), Str('close', lineno=171, col_offset=43)], [], None, None, lineno=171, col_offset=12), lineno=171, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=172, col_offset=12), 'end_headers', Load(), lineno=172, col_offset=12), [], [], None, None, lineno=172, col_offset=12), lineno=172, col_offset=12)], [], lineno=168, col_offset=8)], [], lineno=149, col_offset=4), FunctionDef('setUp', arguments([Name('self', Param(), lineno=174, col_offset=14)], None, None, []), [Expr(Call(Attribute(Name('BaseTestCase', Load(), lineno=175, col_offset=8), 'setUp', Load(), lineno=175, col_offset=8), [Name('self', Load(), lineno=175, col_offset=27)], [], None, None, lineno=175, col_offset=8), lineno=175, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=176, col_offset=8), 'con', Store(), lineno=176, col_offset=8)], Call(Attribute(Name('httplib', Load(), lineno=176, col_offset=19), 'HTTPConnection', Load(), lineno=176, col_offset=19), [Str('localhost', lineno=176, col_offset=42), Attribute(Name('self', Load(), lineno=176, col_offset=55), 'PORT', Load(), lineno=176, col_offset=55)], [], None, None, lineno=176, col_offset=19), lineno=176, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=177, col_offset=8), 'con', Load(), lineno=177, col_offset=8), 'connect', Load(), lineno=177, col_offset=8), [], [], None, None, lineno=177, col_offset=8), lineno=177, col_offset=8)], [], lineno=174, col_offset=4), FunctionDef('test_command', arguments([Name('self', Param(), lineno=179, col_offset=21)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=180, col_offset=8), 'con', Load(), lineno=180, col_offset=8), 'request', Load(), lineno=180, col_offset=8), [Str('GET', lineno=180, col_offset=25), Str('/', lineno=180, col_offset=32)], [], None, None, lineno=180, col_offset=8), lineno=180, col_offset=8), Assign([Name('res', Store(), lineno=181, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=181, col_offset=14), 'con', Load(), lineno=181, col_offset=14), 'getresponse', Load(), lineno=181, col_offset=14), [], [], None, None, lineno=181, col_offset=14), lineno=181, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=182, col_offset=8), 'assertEqual', Load(), lineno=182, col_offset=8), [Attribute(Name('res', Load(), lineno=182, col_offset=25), 'status', Load(), lineno=182, col_offset=25), Num(501, lineno=182, col_offset=37)], [], None, None, lineno=182, col_offset=8), lineno=182, col_offset=8)], [], lineno=179, col_offset=4), FunctionDef('test_request_line_trimming', arguments([Name('self', Param(), lineno=184, col_offset=35)], None, None, []), [Assign([Attribute(Attribute(Name('self', Load(), lineno=185, col_offset=8), 'con', Load(), lineno=185, col_offset=8), '_http_vsn_str', Store(), lineno=185, col_offset=8)], Str('HTTP/1.1\n', lineno=185, col_offset=33), lineno=185, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=186, col_offset=8), 'con', Load(), lineno=186, col_offset=8), 'putrequest', Load(), lineno=186, col_offset=8), [Str('GET', lineno=186, col_offset=28), Str('/', lineno=186, col_offset=35)], [], None, None, lineno=186, col_offset=8), lineno=186, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=187, col_offset=8), 'con', Load(), lineno=187, col_offset=8), 'endheaders', Load(), lineno=187, col_offset=8), [], [], None, None, lineno=187, col_offset=8), lineno=187, col_offset=8), Assign([Name('res', Store(), lineno=188, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=188, col_offset=14), 'con', Load(), lineno=188, col_offset=14), 'getresponse', Load(), lineno=188, col_offset=14), [], [], None, None, lineno=188, col_offset=14), lineno=188, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=189, col_offset=8), 'assertEqual', Load(), lineno=189, col_offset=8), [Attribute(Name('res', Load(), lineno=189, col_offset=25), 'status', Load(), lineno=189, col_offset=25), Num(501, lineno=189, col_offset=37)], [], None, None, lineno=189, col_offset=8), lineno=189, col_offset=8)], [], lineno=184, col_offset=4), FunctionDef('test_version_bogus', arguments([Name('self', Param(), lineno=191, col_offset=27)], None, None, []), [Assign([Attribute(Attribute(Name('self', Load(), lineno=192, col_offset=8), 'con', Load(), lineno=192, col_offset=8), '_http_vsn_str', Store(), lineno=192, col_offset=8)], Str('FUBAR', lineno=192, col_offset=33), lineno=192, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=193, col_offset=8), 'con', Load(), lineno=193, col_offset=8), 'putrequest', Load(), lineno=193, col_offset=8), [Str('GET', lineno=193, col_offset=28), Str('/', lineno=193, col_offset=35)], [], None, None, lineno=193, col_offset=8), lineno=193, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=194, col_offset=8), 'con', Load(), lineno=194, col_offset=8), 'endheaders', Load(), lineno=194, col_offset=8), [], [], None, None, lineno=194, col_offset=8), lineno=194, col_offset=8), Assign([Name('res', Store(), lineno=195, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=195, col_offset=14), 'con', Load(), lineno=195, col_offset=14), 'getresponse', Load(), lineno=195, col_offset=14), [], [], None, None, lineno=195, col_offset=14), lineno=195, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=196, col_offset=8), 'assertEqual', Load(), lineno=196, col_offset=8), [Attribute(Name('res', Load(), lineno=196, col_offset=25), 'status', Load(), lineno=196, col_offset=25), Num(400, lineno=196, col_offset=37)], [], None, None, lineno=196, col_offset=8), lineno=196, col_offset=8)], [], lineno=191, col_offset=4), FunctionDef('test_version_digits', arguments([Name('self', Param(), lineno=198, col_offset=28)], None, None, []), [Assign([Attribute(Attribute(Name('self', Load(), lineno=199, col_offset=8), 'con', Load(), lineno=199, col_offset=8), '_http_vsn_str', Store(), lineno=199, col_offset=8)], Str('HTTP/9.9.9', lineno=199, col_offset=33), lineno=199, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=200, col_offset=8), 'con', Load(), lineno=200, col_offset=8), 'putrequest', Load(), lineno=200, col_offset=8), [Str('GET', lineno=200, col_offset=28), Str('/', lineno=200, col_offset=35)], [], None, None, lineno=200, col_offset=8), lineno=200, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=201, col_offset=8), 'con', Load(), lineno=201, col_offset=8), 'endheaders', Load(), lineno=201, col_offset=8), [], [], None, None, lineno=201, col_offset=8), lineno=201, col_offset=8), Assign([Name('res', Store(), lineno=202, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=202, col_offset=14), 'con', Load(), lineno=202, col_offset=14), 'getresponse', Load(), lineno=202, col_offset=14), [], [], None, None, lineno=202, col_offset=14), lineno=202, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=203, col_offset=8), 'assertEqual', Load(), lineno=203, col_offset=8), [Attribute(Name('res', Load(), lineno=203, col_offset=25), 'status', Load(), lineno=203, col_offset=25), Num(400, lineno=203, col_offset=37)], [], None, None, lineno=203, col_offset=8), lineno=203, col_offset=8)], [], lineno=198, col_offset=4), FunctionDef('test_version_none_get', arguments([Name('self', Param(), lineno=205, col_offset=30)], None, None, []), [Assign([Attribute(Attribute(Name('self', Load(), lineno=206, col_offset=8), 'con', Load(), lineno=206, col_offset=8), '_http_vsn_str', Store(), lineno=206, col_offset=8)], Str('', lineno=206, col_offset=33), lineno=206, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=207, col_offset=8), 'con', Load(), lineno=207, col_offset=8), 'putrequest', Load(), lineno=207, col_offset=8), [Str('GET', lineno=207, col_offset=28), Str('/', lineno=207, col_offset=35)], [], None, None, lineno=207, col_offset=8), lineno=207, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=208, col_offset=8), 'con', Load(), lineno=208, col_offset=8), 'endheaders', Load(), lineno=208, col_offset=8), [], [], None, None, lineno=208, col_offset=8), lineno=208, col_offset=8), Assign([Name('res', Store(), lineno=209, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=209, col_offset=14), 'con', Load(), lineno=209, col_offset=14), 'getresponse', Load(), lineno=209, col_offset=14), [], [], None, None, lineno=209, col_offset=14), lineno=209, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=210, col_offset=8), 'assertEqual', Load(), lineno=210, col_offset=8), [Attribute(Name('res', Load(), lineno=210, col_offset=25), 'status', Load(), lineno=210, col_offset=25), Num(501, lineno=210, col_offset=37)], [], None, None, lineno=210, col_offset=8), lineno=210, col_offset=8)], [], lineno=205, col_offset=4), FunctionDef('test_version_none', arguments([Name('self', Param(), lineno=212, col_offset=26)], None, None, []), [Assign([Attribute(Attribute(Name('self', Load(), lineno=213, col_offset=8), 'con', Load(), lineno=213, col_offset=8), '_http_vsn_str', Store(), lineno=213, col_offset=8)], Str('', lineno=213, col_offset=33), lineno=213, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=214, col_offset=8), 'con', Load(), lineno=214, col_offset=8), 'putrequest', Load(), lineno=214, col_offset=8), [Str('PUT', lineno=214, col_offset=28), Str('/', lineno=214, col_offset=35)], [], None, None, lineno=214, col_offset=8), lineno=214, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=215, col_offset=8), 'con', Load(), lineno=215, col_offset=8), 'endheaders', Load(), lineno=215, col_offset=8), [], [], None, None, lineno=215, col_offset=8), lineno=215, col_offset=8), Assign([Name('res', Store(), lineno=216, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=216, col_offset=14), 'con', Load(), lineno=216, col_offset=14), 'getresponse', Load(), lineno=216, col_offset=14), [], [], None, None, lineno=216, col_offset=14), lineno=216, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=217, col_offset=8), 'assertEqual', Load(), lineno=217, col_offset=8), [Attribute(Name('res', Load(), lineno=217, col_offset=25), 'status', Load(), lineno=217, col_offset=25), Num(400, lineno=217, col_offset=37)], [], None, None, lineno=217, col_offset=8), lineno=217, col_offset=8)], [], lineno=212, col_offset=4), FunctionDef('test_version_invalid', arguments([Name('self', Param(), lineno=219, col_offset=29)], None, None, []), [Assign([Attribute(Attribute(Name('self', Load(), lineno=220, col_offset=8), 'con', Load(), lineno=220, col_offset=8), '_http_vsn', Store(), lineno=220, col_offset=8)], Num(99, lineno=220, col_offset=29), lineno=220, col_offset=8), Assign([Attribute(Attribute(Name('self', Load(), lineno=221, col_offset=8), 'con', Load(), lineno=221, col_offset=8), '_http_vsn_str', Store(), lineno=221, col_offset=8)], Str('HTTP/9.9', lineno=221, col_offset=33), lineno=221, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=222, col_offset=8), 'con', Load(), lineno=222, col_offset=8), 'putrequest', Load(), lineno=222, col_offset=8), [Str('GET', lineno=222, col_offset=28), Str('/', lineno=222, col_offset=35)], [], None, None, lineno=222, col_offset=8), lineno=222, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=223, col_offset=8), 'con', Load(), lineno=223, col_offset=8), 'endheaders', Load(), lineno=223, col_offset=8), [], [], None, None, lineno=223, col_offset=8), lineno=223, col_offset=8), Assign([Name('res', Store(), lineno=224, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=224, col_offset=14), 'con', Load(), lineno=224, col_offset=14), 'getresponse', Load(), lineno=224, col_offset=14), [], [], None, None, lineno=224, col_offset=14), lineno=224, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=225, col_offset=8), 'assertEqual', Load(), lineno=225, col_offset=8), [Attribute(Name('res', Load(), lineno=225, col_offset=25), 'status', Load(), lineno=225, col_offset=25), Num(505, lineno=225, col_offset=37)], [], None, None, lineno=225, col_offset=8), lineno=225, col_offset=8)], [], lineno=219, col_offset=4), FunctionDef('test_send_blank', arguments([Name('self', Param(), lineno=227, col_offset=24)], None, None, []), [Assign([Attribute(Attribute(Name('self', Load(), lineno=228, col_offset=8), 'con', Load(), lineno=228, col_offset=8), '_http_vsn_str', Store(), lineno=228, col_offset=8)], Str('', lineno=228, col_offset=33), lineno=228, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=229, col_offset=8), 'con', Load(), lineno=229, col_offset=8), 'putrequest', Load(), lineno=229, col_offset=8), [Str('', lineno=229, col_offset=28), Str('', lineno=229, col_offset=32)], [], None, None, lineno=229, col_offset=8), lineno=229, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=230, col_offset=8), 'con', Load(), lineno=230, col_offset=8), 'endheaders', Load(), lineno=230, col_offset=8), [], [], None, None, lineno=230, col_offset=8), lineno=230, col_offset=8), Assign([Name('res', Store(), lineno=231, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=231, col_offset=14), 'con', Load(), lineno=231, col_offset=14), 'getresponse', Load(), lineno=231, col_offset=14), [], [], None, None, lineno=231, col_offset=14), lineno=231, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=232, col_offset=8), 'assertEqual', Load(), lineno=232, col_offset=8), [Attribute(Name('res', Load(), lineno=232, col_offset=25), 'status', Load(), lineno=232, col_offset=25), Num(400, lineno=232, col_offset=37)], [], None, None, lineno=232, col_offset=8), lineno=232, col_offset=8)], [], lineno=227, col_offset=4), FunctionDef('test_header_close', arguments([Name('self', Param(), lineno=234, col_offset=26)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=235, col_offset=8), 'con', Load(), lineno=235, col_offset=8), 'putrequest', Load(), lineno=235, col_offset=8), [Str('GET', lineno=235, col_offset=28), Str('/', lineno=235, col_offset=35)], [], None, None, lineno=235, col_offset=8), lineno=235, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=236, col_offset=8), 'con', Load(), lineno=236, col_offset=8), 'putheader', Load(), lineno=236, col_offset=8), [Str('Connection', lineno=236, col_offset=27), Str('close', lineno=236, col_offset=41)], [], None, None, lineno=236, col_offset=8), lineno=236, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=237, col_offset=8), 'con', Load(), lineno=237, col_offset=8), 'endheaders', Load(), lineno=237, col_offset=8), [], [], None, None, lineno=237, col_offset=8), lineno=237, col_offset=8), Assign([Name('res', Store(), lineno=238, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=238, col_offset=14), 'con', Load(), lineno=238, col_offset=14), 'getresponse', Load(), lineno=238, col_offset=14), [], [], None, None, lineno=238, col_offset=14), lineno=238, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=239, col_offset=8), 'assertEqual', Load(), lineno=239, col_offset=8), [Attribute(Name('res', Load(), lineno=239, col_offset=25), 'status', Load(), lineno=239, col_offset=25), Num(501, lineno=239, col_offset=37)], [], None, None, lineno=239, col_offset=8), lineno=239, col_offset=8)], [], lineno=234, col_offset=4), FunctionDef('test_head_keep_alive', arguments([Name('self', Param(), lineno=241, col_offset=29)], None, None, []), [Assign([Attribute(Attribute(Name('self', Load(), lineno=242, col_offset=8), 'con', Load(), lineno=242, col_offset=8), '_http_vsn_str', Store(), lineno=242, col_offset=8)], Str('HTTP/1.1', lineno=242, col_offset=33), lineno=242, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=243, col_offset=8), 'con', Load(), lineno=243, col_offset=8), 'putrequest', Load(), lineno=243, col_offset=8), [Str('GET', lineno=243, col_offset=28), Str('/', lineno=243, col_offset=35)], [], None, None, lineno=243, col_offset=8), lineno=243, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=244, col_offset=8), 'con', Load(), lineno=244, col_offset=8), 'putheader', Load(), lineno=244, col_offset=8), [Str('Connection', lineno=244, col_offset=27), Str('keep-alive', lineno=244, col_offset=41)], [], None, None, lineno=244, col_offset=8), lineno=244, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=245, col_offset=8), 'con', Load(), lineno=245, col_offset=8), 'endheaders', Load(), lineno=245, col_offset=8), [], [], None, None, lineno=245, col_offset=8), lineno=245, col_offset=8), Assign([Name('res', Store(), lineno=246, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=246, col_offset=14), 'con', Load(), lineno=246, col_offset=14), 'getresponse', Load(), lineno=246, col_offset=14), [], [], None, None, lineno=246, col_offset=14), lineno=246, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=247, col_offset=8), 'assertEqual', Load(), lineno=247, col_offset=8), [Attribute(Name('res', Load(), lineno=247, col_offset=25), 'status', Load(), lineno=247, col_offset=25), Num(501, lineno=247, col_offset=37)], [], None, None, lineno=247, col_offset=8), lineno=247, col_offset=8)], [], lineno=241, col_offset=4), FunctionDef('test_handler', arguments([Name('self', Param(), lineno=249, col_offset=21)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=250, col_offset=8), 'con', Load(), lineno=250, col_offset=8), 'request', Load(), lineno=250, col_offset=8), [Str('TEST', lineno=250, col_offset=25), Str('/', lineno=250, col_offset=33)], [], None, None, lineno=250, col_offset=8), lineno=250, col_offset=8), Assign([Name('res', Store(), lineno=251, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=251, col_offset=14), 'con', Load(), lineno=251, col_offset=14), 'getresponse', Load(), lineno=251, col_offset=14), [], [], None, None, lineno=251, col_offset=14), lineno=251, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=252, col_offset=8), 'assertEqual', Load(), lineno=252, col_offset=8), [Attribute(Name('res', Load(), lineno=252, col_offset=25), 'status', Load(), lineno=252, col_offset=25), Num(204, lineno=252, col_offset=37)], [], None, None, lineno=252, col_offset=8), lineno=252, col_offset=8)], [], lineno=249, col_offset=4), FunctionDef('test_return_header_keep_alive', arguments([Name('self', Param(), lineno=254, col_offset=38)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=255, col_offset=8), 'con', Load(), lineno=255, col_offset=8), 'request', Load(), lineno=255, col_offset=8), [Str('KEEP', lineno=255, col_offset=25), Str('/', lineno=255, col_offset=33)], [], None, None, lineno=255, col_offset=8), lineno=255, col_offset=8), Assign([Name('res', Store(), lineno=256, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=256, col_offset=14), 'con', Load(), lineno=256, col_offset=14), 'getresponse', Load(), lineno=256, col_offset=14), [], [], None, None, lineno=256, col_offset=14), lineno=256, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=257, col_offset=8), 'assertEqual', Load(), lineno=257, col_offset=8), [Call(Attribute(Name('res', Load(), lineno=257, col_offset=25), 'getheader', Load(), lineno=257, col_offset=25), [Str('Connection', lineno=257, col_offset=39)], [], None, None, lineno=257, col_offset=25), Str('keep-alive', lineno=257, col_offset=54)], [], None, None, lineno=257, col_offset=8), lineno=257, col_offset=8), Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=258, col_offset=8), 'con', Load(), lineno=258, col_offset=8), 'request', Load(), lineno=258, col_offset=8), [Str('TEST', lineno=258, col_offset=25), Str('/', lineno=258, col_offset=33)], [], None, None, lineno=258, col_offset=8), lineno=258, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=259, col_offset=8), 'addCleanup', Load(), lineno=259, col_offset=8), [Attribute(Attribute(Name('self', Load(), lineno=259, col_offset=24), 'con', Load(), lineno=259, col_offset=24), 'close', Load(), lineno=259, col_offset=24)], [], None, None, lineno=259, col_offset=8), lineno=259, col_offset=8)], [], lineno=254, col_offset=4), FunctionDef('test_internal_key_error', arguments([Name('self', Param(), lineno=261, col_offset=32)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=262, col_offset=8), 'con', Load(), lineno=262, col_offset=8), 'request', Load(), lineno=262, col_offset=8), [Str('KEYERROR', lineno=262, col_offset=25), Str('/', lineno=262, col_offset=37)], [], None, None, lineno=262, col_offset=8), lineno=262, col_offset=8), Assign([Name('res', Store(), lineno=263, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=263, col_offset=14), 'con', Load(), lineno=263, col_offset=14), 'getresponse', Load(), lineno=263, col_offset=14), [], [], None, None, lineno=263, col_offset=14), lineno=263, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=264, col_offset=8), 'assertEqual', Load(), lineno=264, col_offset=8), [Attribute(Name('res', Load(), lineno=264, col_offset=25), 'status', Load(), lineno=264, col_offset=25), Num(999, lineno=264, col_offset=37)], [], None, None, lineno=264, col_offset=8), lineno=264, col_offset=8)], [], lineno=261, col_offset=4), FunctionDef('test_return_custom_status', arguments([Name('self', Param(), lineno=266, col_offset=34)], None, None, []), [Expr(Call(Attribute(Attribute(Name('self', Load(), lineno=267, col_offset=8), 'con', Load(), lineno=267, col_offset=8), 'request', Load(), lineno=267, col_offset=8), [Str('CUSTOM', lineno=267, col_offset=25), Str('/', lineno=267, col_offset=35)], [], None, None, lineno=267, col_offset=8), lineno=267, col_offset=8), Assign([Name('res', Store(), lineno=268, col_offset=8)], Call(Attribute(Attribute(Name('self', Load(), lineno=268, col_offset=14), 'con', Load(), lineno=268, col_offset=14), 'getresponse', Load(), lineno=268, col_offset=14), [], [], None, None, lineno=268, col_offset=14), lineno=268, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=269, col_offset=8), 'assertEqual', Load(), lineno=269, col_offset=8), [Attribute(Name('res', Load(), lineno=269, col_offset=25), 'status', Load(), lineno=269, col_offset=25), Num(999, lineno=269, col_offset=37)], [], None, None, lineno=269, col_offset=8), lineno=269, col_offset=8)], [], lineno=266, col_offset=4)], [], lineno=148, col_offset=0), ClassDef('SimpleHTTPServerTestCase', [Name('BaseTestCase', Load(), lineno=272, col_offset=31)], [ClassDef('request_handler', [Name('NoLogRequestHandler', Load(), lineno=273, col_offset=26), Name('SimpleHTTPRequestHandler', Load(), lineno=273, col_offset=47)], [Pass( lineno=274, col_offset=8)], [], lineno=273, col_offset=4), FunctionDef('setUp', arguments([Name('self', Param(), lineno=276, col_offset=14)], None, None, []), [Expr(Call(Attribute(Name('BaseTestCase', Load(), lineno=277, col_offset=8), 'setUp', Load(), lineno=277, col_offset=8), [Name('self', Load(), lineno=277, col_offset=27)], [], None, None, lineno=277, col_offset=8), lineno=277, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=278, col_offset=8), 'cwd', Store(), lineno=278, col_offset=8)], Call(Attribute(Name('os', Load(), lineno=278, col_offset=19), 'getcwd', Load(), lineno=278, col_offset=19), [], [], None, None, lineno=278, col_offset=19), lineno=278, col_offset=8), Assign([Name('basetempdir', Store(), lineno=279, col_offset=8)], Call(Attribute(Name('tempfile', Load(), lineno=279, col_offset=22), 'gettempdir', Load(), lineno=279, col_offset=22), [], [], None, None, lineno=279, col_offset=22), lineno=279, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=280, col_offset=8), 'chdir', Load(), lineno=280, col_offset=8), [Name('basetempdir', Load(), lineno=280, col_offset=17)], [], None, None, lineno=280, col_offset=8), lineno=280, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=281, col_offset=8), 'data', Store(), lineno=281, col_offset=8)], Str('We are the knights who say Ni!', lineno=281, col_offset=20), lineno=281, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=282, col_offset=8), 'tempdir', Store(), lineno=282, col_offset=8)], Call(Attribute(Name('tempfile', Load(), lineno=282, col_offset=23), 'mkdtemp', Load(), lineno=282, col_offset=23), [], [keyword('dir', Name('basetempdir', Load(), lineno=282, col_offset=44))], None, None, lineno=282, col_offset=23), lineno=282, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=283, col_offset=8), 'tempdir_name', Store(), lineno=283, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=283, col_offset=28), 'path', Load(), lineno=283, col_offset=28), 'basename', Load(), lineno=283, col_offset=28), [Attribute(Name('self', Load(), lineno=283, col_offset=45), 'tempdir', Load(), lineno=283, col_offset=45)], [], None, None, lineno=283, col_offset=28), lineno=283, col_offset=8), Assign([Name('temp', Store(), lineno=284, col_offset=8)], Call(Name('open', Load(), lineno=284, col_offset=15), [Call(Attribute(Attribute(Name('os', Load(), lineno=284, col_offset=20), 'path', Load(), lineno=284, col_offset=20), 'join', Load(), lineno=284, col_offset=20), [Attribute(Name('self', Load(), lineno=284, col_offset=33), 'tempdir', Load(), lineno=284, col_offset=33), Str('test', lineno=284, col_offset=47)], [], None, None, lineno=284, col_offset=20), Str('wb', lineno=284, col_offset=56)], [], None, None, lineno=284, col_offset=15), lineno=284, col_offset=8), Expr(Call(Attribute(Name('temp', Load(), lineno=285, col_offset=8), 'write', Load(), lineno=285, col_offset=8), [Attribute(Name('self', Load(), lineno=285, col_offset=19), 'data', Load(), lineno=285, col_offset=19)], [], None, None, lineno=285, col_offset=8), lineno=285, col_offset=8), Expr(Call(Attribute(Name('temp', Load(), lineno=286, col_offset=8), 'close', Load(), lineno=286, col_offset=8), [], [], None, None, lineno=286, col_offset=8), lineno=286, col_offset=8)], [], lineno=276, col_offset=4), FunctionDef('tearDown', arguments([Name('self', Param(), lineno=288, col_offset=17)], None, None, []), [TryFinally([Expr(Call(Attribute(Name('os', Load(), lineno=290, col_offset=12), 'chdir', Load(), lineno=290, col_offset=12), [Attribute(Name('self', Load(), lineno=290, col_offset=21), 'cwd', Load(), lineno=290, col_offset=21)], [], None, None, lineno=290, col_offset=12), lineno=290, col_offset=12), TryExcept([Expr(Call(Attribute(Name('shutil', Load(), lineno=292, col_offset=16), 'rmtree', Load(), lineno=292, col_offset=16), [Attribute(Name('self', Load(), lineno=292, col_offset=30), 'tempdir', Load(), lineno=292, col_offset=30)], [], None, None, lineno=292, col_offset=16), lineno=292, col_offset=16)], [ExceptHandler(None, None, [Pass( lineno=294, col_offset=16)], lineno=293, col_offset=12)], [], lineno=291, col_offset=12)], [Expr(Call(Attribute(Name('BaseTestCase', Load(), lineno=296, col_offset=12), 'tearDown', Load(), lineno=296, col_offset=12), [Name('self', Load(), lineno=296, col_offset=34)], [], None, None, lineno=296, col_offset=12), lineno=296, col_offset=12)], lineno=289, col_offset=8)], [], lineno=288, col_offset=4), FunctionDef('check_status_and_reason', arguments([Name('self', Param(), lineno=298, col_offset=32), Name('response', Param(), lineno=298, col_offset=38), Name('status', Param(), lineno=298, col_offset=48), Name('data', Param(), lineno=298, col_offset=56)], None, None, [Name('None', Load(), lineno=298, col_offset=61)]), [Assign([Name('body', Store(), lineno=299, col_offset=8)], Call(Attribute(Name('response', Load(), lineno=299, col_offset=15), 'read', Load(), lineno=299, col_offset=15), [], [], None, None, lineno=299, col_offset=15), lineno=299, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=300, col_offset=8), 'assertTrue', Load(), lineno=300, col_offset=8), [Name('response', Load(), lineno=300, col_offset=24)], [], None, None, lineno=300, col_offset=8), lineno=300, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=301, col_offset=8), 'assertEqual', Load(), lineno=301, col_offset=8), [Attribute(Name('response', Load(), lineno=301, col_offset=25), 'status', Load(), lineno=301, col_offset=25), Name('status', Load(), lineno=301, col_offset=42)], [], None, None, lineno=301, col_offset=8), lineno=301, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=302, col_offset=8), 'assertIsNotNone', Load(), lineno=302, col_offset=8), [Attribute(Name('response', Load(), lineno=302, col_offset=29), 'reason', Load(), lineno=302, col_offset=29)], [], None, None, lineno=302, col_offset=8), lineno=302, col_offset=8), If(Name('data', Load(), lineno=303, col_offset=11), [Expr(Call(Attribute(Name('self', Load(), lineno=304, col_offset=12), 'assertEqual', Load(), lineno=304, col_offset=12), [Name('data', Load(), lineno=304, col_offset=29), Name('body', Load(), lineno=304, col_offset=35)], [], None, None, lineno=304, col_offset=12), lineno=304, col_offset=12)], [], lineno=303, col_offset=8)], [], lineno=298, col_offset=4), FunctionDef('test_get', arguments([Name('self', Param(), lineno=306, col_offset=17)], None, None, []), [Assign([Name('response', Store(), lineno=308, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=308, col_offset=19), 'request', Load(), lineno=308, col_offset=19), [BinOp(Attribute(Name('self', Load(), lineno=308, col_offset=32), 'tempdir_name', Load(), lineno=308, col_offset=32), Add(), Str('/test', lineno=308, col_offset=52), lineno=308, col_offset=32)], [], None, None, lineno=308, col_offset=19), lineno=308, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=309, col_offset=8), 'check_status_and_reason', Load(), lineno=309, col_offset=8), [Name('response', Load(), lineno=309, col_offset=37), Num(200, lineno=309, col_offset=47)], [keyword('data', Attribute(Name('self', Load(), lineno=309, col_offset=57), 'data', Load(), lineno=309, col_offset=57))], None, None, lineno=309, col_offset=8), lineno=309, col_offset=8), Assign([Name('response', Store(), lineno=310, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=310, col_offset=19), 'request', Load(), lineno=310, col_offset=19), [BinOp(Attribute(Name('self', Load(), lineno=310, col_offset=32), 'tempdir_name', Load(), lineno=310, col_offset=32), Add(), Str('/', lineno=310, col_offset=52), lineno=310, col_offset=32)], [], None, None, lineno=310, col_offset=19), lineno=310, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=311, col_offset=8), 'check_status_and_reason', Load(), lineno=311, col_offset=8), [Name('response', Load(), lineno=311, col_offset=37), Num(200, lineno=311, col_offset=47)], [], None, None, lineno=311, col_offset=8), lineno=311, col_offset=8), Assign([Name('response', Store(), lineno=312, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=312, col_offset=19), 'request', Load(), lineno=312, col_offset=19), [Attribute(Name('self', Load(), lineno=312, col_offset=32), 'tempdir_name', Load(), lineno=312, col_offset=32)], [], None, None, lineno=312, col_offset=19), lineno=312, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=313, col_offset=8), 'check_status_and_reason', Load(), lineno=313, col_offset=8), [Name('response', Load(), lineno=313, col_offset=37), Num(301, lineno=313, col_offset=47)], [], None, None, lineno=313, col_offset=8), lineno=313, col_offset=8), Assign([Name('response', Store(), lineno=314, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=314, col_offset=19), 'request', Load(), lineno=314, col_offset=19), [Str('/ThisDoesNotExist', lineno=314, col_offset=32)], [], None, None, lineno=314, col_offset=19), lineno=314, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=315, col_offset=8), 'check_status_and_reason', Load(), lineno=315, col_offset=8), [Name('response', Load(), lineno=315, col_offset=37), Num(404, lineno=315, col_offset=47)], [], None, None, lineno=315, col_offset=8), lineno=315, col_offset=8), Assign([Name('response', Store(), lineno=316, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=316, col_offset=19), 'request', Load(), lineno=316, col_offset=19), [BinOp(BinOp(Str('/', lineno=316, col_offset=32), Add(), Str('ThisDoesNotExist', lineno=316, col_offset=38), lineno=316, col_offset=32), Add(), Str('/', lineno=316, col_offset=59), lineno=316, col_offset=57)], [], None, None, lineno=316, col_offset=19), lineno=316, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=317, col_offset=8), 'check_status_and_reason', Load(), lineno=317, col_offset=8), [Name('response', Load(), lineno=317, col_offset=37), Num(404, lineno=317, col_offset=47)], [], None, None, lineno=317, col_offset=8), lineno=317, col_offset=8), Assign([Name('f', Store(), lineno=318, col_offset=8)], Call(Name('open', Load(), lineno=318, col_offset=12), [Call(Attribute(Attribute(Name('os', Load(), lineno=318, col_offset=17), 'path', Load(), lineno=318, col_offset=17), 'join', Load(), lineno=318, col_offset=17), [Attribute(Name('self', Load(), lineno=318, col_offset=30), 'tempdir_name', Load(), lineno=318, col_offset=30), Str('index.html', lineno=318, col_offset=49)], [], None, None, lineno=318, col_offset=17), Str('w', lineno=318, col_offset=64)], [], None, None, lineno=318, col_offset=12), lineno=318, col_offset=8), Assign([Name('response', Store(), lineno=319, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=319, col_offset=19), 'request', Load(), lineno=319, col_offset=19), [BinOp(BinOp(Str('/', lineno=319, col_offset=32), Add(), Attribute(Name('self', Load(), lineno=319, col_offset=38), 'tempdir_name', Load(), lineno=319, col_offset=38), lineno=319, col_offset=32), Add(), Str('/', lineno=319, col_offset=58), lineno=319, col_offset=56)], [], None, None, lineno=319, col_offset=19), lineno=319, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=320, col_offset=8), 'check_status_and_reason', Load(), lineno=320, col_offset=8), [Name('response', Load(), lineno=320, col_offset=37), Num(200, lineno=320, col_offset=47)], [], None, None, lineno=320, col_offset=8), lineno=320, col_offset=8), If(Compare(Attribute(Name('os', Load(), lineno=321, col_offset=11), 'name', Load(), lineno=321, col_offset=11), [Eq()], [Str('posix', lineno=321, col_offset=22)], lineno=321, col_offset=11), [Expr(Call(Attribute(Name('os', Load(), lineno=323, col_offset=12), 'chmod', Load(), lineno=323, col_offset=12), [Attribute(Name('self', Load(), lineno=323, col_offset=21), 'tempdir', Load(), lineno=323, col_offset=21), Num(0, lineno=323, col_offset=35)], [], None, None, lineno=323, col_offset=12), lineno=323, col_offset=12), Assign([Name('response', Store(), lineno=324, col_offset=12)], Call(Attribute(Name('self', Load(), lineno=324, col_offset=23), 'request', Load(), lineno=324, col_offset=23), [BinOp(Attribute(Name('self', Load(), lineno=324, col_offset=36), 'tempdir_name', Load(), lineno=324, col_offset=36), Add(), Str('/', lineno=324, col_offset=56), lineno=324, col_offset=36)], [], None, None, lineno=324, col_offset=23), lineno=324, col_offset=12), Expr(Call(Attribute(Name('self', Load(), lineno=325, col_offset=12), 'check_status_and_reason', Load(), lineno=325, col_offset=12), [Name('response', Load(), lineno=325, col_offset=41), Num(404, lineno=325, col_offset=51)], [], None, None, lineno=325, col_offset=12), lineno=325, col_offset=12), Expr(Call(Attribute(Name('os', Load(), lineno=326, col_offset=12), 'chmod', Load(), lineno=326, col_offset=12), [Attribute(Name('self', Load(), lineno=326, col_offset=21), 'tempdir', Load(), lineno=326, col_offset=21), Num(493, lineno=326, col_offset=35)], [], None, None, lineno=326, col_offset=12), lineno=326, col_offset=12)], [], lineno=321, col_offset=8)], [], lineno=306, col_offset=4), FunctionDef('test_head', arguments([Name('self', Param(), lineno=328, col_offset=18)], None, None, []), [Assign([Name('response', Store(), lineno=329, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=329, col_offset=19), 'request', Load(), lineno=329, col_offset=19), [BinOp(Attribute(Name('self', Load(), lineno=330, col_offset=12), 'tempdir_name', Load(), lineno=330, col_offset=12), Add(), Str('/test', lineno=330, col_offset=32), lineno=330, col_offset=12)], [keyword('method', Str('HEAD', lineno=330, col_offset=48))], None, None, lineno=329, col_offset=19), lineno=329, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=331, col_offset=8), 'check_status_and_reason', Load(), lineno=331, col_offset=8), [Name('response', Load(), lineno=331, col_offset=37), Num(200, lineno=331, col_offset=47)], [], None, None, lineno=331, col_offset=8), lineno=331, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=332, col_offset=8), 'assertEqual', Load(), lineno=332, col_offset=8), [Call(Attribute(Name('response', Load(), lineno=332, col_offset=25), 'getheader', Load(), lineno=332, col_offset=25), [Str('content-length', lineno=332, col_offset=44)], [], None, None, lineno=332, col_offset=25), Call(Name('str', Load(), lineno=333, col_offset=25), [Call(Name('len', Load(), lineno=333, col_offset=29), [Attribute(Name('self', Load(), lineno=333, col_offset=33), 'data', Load(), lineno=333, col_offset=33)], [], None, None, lineno=333, col_offset=29)], [], None, None, lineno=333, col_offset=25)], [], None, None, lineno=332, col_offset=8), lineno=332, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=334, col_offset=8), 'assertEqual', Load(), lineno=334, col_offset=8), [Call(Attribute(Name('response', Load(), lineno=334, col_offset=25), 'getheader', Load(), lineno=334, col_offset=25), [Str('content-type', lineno=334, col_offset=44)], [], None, None, lineno=334, col_offset=25), Str('application/octet-stream', lineno=335, col_offset=25)], [], None, None, lineno=334, col_offset=8), lineno=334, col_offset=8)], [], lineno=328, col_offset=4), FunctionDef('test_invalid_requests', arguments([Name('self', Param(), lineno=337, col_offset=30)], None, None, []), [Assign([Name('response', Store(), lineno=338, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=338, col_offset=19), 'request', Load(), lineno=338, col_offset=19), [Str('/', lineno=338, col_offset=32)], [keyword('method', Str('FOO', lineno=338, col_offset=44))], None, None, lineno=338, col_offset=19), lineno=338, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=339, col_offset=8), 'check_status_and_reason', Load(), lineno=339, col_offset=8), [Name('response', Load(), lineno=339, col_offset=37), Num(501, lineno=339, col_offset=47)], [], None, None, lineno=339, col_offset=8), lineno=339, col_offset=8), Assign([Name('response', Store(), lineno=341, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=341, col_offset=19), 'request', Load(), lineno=341, col_offset=19), [Str('/', lineno=341, col_offset=32)], [keyword('method', Str('get', lineno=341, col_offset=44))], None, None, lineno=341, col_offset=19), lineno=341, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=342, col_offset=8), 'check_status_and_reason', Load(), lineno=342, col_offset=8), [Name('response', Load(), lineno=342, col_offset=37), Num(501, lineno=342, col_offset=47)], [], None, None, lineno=342, col_offset=8), lineno=342, col_offset=8), Assign([Name('response', Store(), lineno=343, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=343, col_offset=19), 'request', Load(), lineno=343, col_offset=19), [Str('/', lineno=343, col_offset=32)], [keyword('method', Str('GETs', lineno=343, col_offset=44))], None, None, lineno=343, col_offset=19), lineno=343, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=344, col_offset=8), 'check_status_and_reason', Load(), lineno=344, col_offset=8), [Name('response', Load(), lineno=344, col_offset=37), Num(501, lineno=344, col_offset=47)], [], None, None, lineno=344, col_offset=8), lineno=344, col_offset=8)], [], lineno=337, col_offset=4)], [], lineno=272, col_offset=0), Assign([Name('cgi_file1', Store(), lineno=347, col_offset=0)], Str('#!%s\n\nprint "Content-type: text/html"\nprint\nprint "Hello World"\n', lineno=353, col_offset=-1), lineno=347, col_offset=0), Assign([Name('cgi_file2', Store(), lineno=355, col_offset=0)], Str('#!%s\nimport cgi\n\nprint "Content-type: text/html"\nprint\n\nform = cgi.FieldStorage()\nprint "%%s, %%s, %%s" %% (form.getfirst("spam"), form.getfirst("eggs"),\n                          form.getfirst("bacon"))\n', lineno=365, col_offset=-1), lineno=355, col_offset=0), ClassDef('CGIHTTPServerTestCase', [Name('BaseTestCase', Load(), lineno=367, col_offset=28)], [ClassDef('request_handler', [Name('NoLogRequestHandler', Load(), lineno=368, col_offset=26), Name('CGIHTTPRequestHandler', Load(), lineno=368, col_offset=47)], [Pass( lineno=369, col_offset=8)], [], lineno=368, col_offset=4), FunctionDef('setUp', arguments([Name('self', Param(), lineno=371, col_offset=14)], None, None, []), [Expr(Call(Attribute(Name('BaseTestCase', Load(), lineno=372, col_offset=8), 'setUp', Load(), lineno=372, col_offset=8), [Name('self', Load(), lineno=372, col_offset=27)], [], None, None, lineno=372, col_offset=8), lineno=372, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=373, col_offset=8), 'parent_dir', Store(), lineno=373, col_offset=8)], Call(Attribute(Name('tempfile', Load(), lineno=373, col_offset=26), 'mkdtemp', Load(), lineno=373, col_offset=26), [], [], None, None, lineno=373, col_offset=26), lineno=373, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=374, col_offset=8), 'cgi_dir', Store(), lineno=374, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=374, col_offset=23), 'path', Load(), lineno=374, col_offset=23), 'join', Load(), lineno=374, col_offset=23), [Attribute(Name('self', Load(), lineno=374, col_offset=36), 'parent_dir', Load(), lineno=374, col_offset=36), Str('cgi-bin', lineno=374, col_offset=53)], [], None, None, lineno=374, col_offset=23), lineno=374, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=375, col_offset=8), 'mkdir', Load(), lineno=375, col_offset=8), [Attribute(Name('self', Load(), lineno=375, col_offset=17), 'cgi_dir', Load(), lineno=375, col_offset=17)], [], None, None, lineno=375, col_offset=8), lineno=375, col_offset=8), If(Call(Name('hasattr', Load(), lineno=379, col_offset=11), [Name('os', Load(), lineno=379, col_offset=19), Str('symlink', lineno=379, col_offset=23)], [], None, None, lineno=379, col_offset=11), [Assign([Attribute(Name('self', Load(), lineno=380, col_offset=12), 'pythonexe', Store(), lineno=380, col_offset=12)], Call(Attribute(Attribute(Name('os', Load(), lineno=380, col_offset=29), 'path', Load(), lineno=380, col_offset=29), 'join', Load(), lineno=380, col_offset=29), [Attribute(Name('self', Load(), lineno=380, col_offset=42), 'parent_dir', Load(), lineno=380, col_offset=42), Str('python', lineno=380, col_offset=59)], [], None, None, lineno=380, col_offset=29), lineno=380, col_offset=12), Expr(Call(Attribute(Name('os', Load(), lineno=381, col_offset=12), 'symlink', Load(), lineno=381, col_offset=12), [Attribute(Name('sys', Load(), lineno=381, col_offset=23), 'executable', Load(), lineno=381, col_offset=23), Attribute(Name('self', Load(), lineno=381, col_offset=39), 'pythonexe', Load(), lineno=381, col_offset=39)], [], None, None, lineno=381, col_offset=12), lineno=381, col_offset=12)], [Assign([Attribute(Name('self', Load(), lineno=383, col_offset=12), 'pythonexe', Store(), lineno=383, col_offset=12)], Attribute(Name('sys', Load(), lineno=383, col_offset=29), 'executable', Load(), lineno=383, col_offset=29), lineno=383, col_offset=12)], lineno=379, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=385, col_offset=8), 'file1_path', Store(), lineno=385, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=385, col_offset=26), 'path', Load(), lineno=385, col_offset=26), 'join', Load(), lineno=385, col_offset=26), [Attribute(Name('self', Load(), lineno=385, col_offset=39), 'cgi_dir', Load(), lineno=385, col_offset=39), Str('file1.py', lineno=385, col_offset=53)], [], None, None, lineno=385, col_offset=26), lineno=385, col_offset=8), With(Call(Name('open', Load(), lineno=386, col_offset=13), [Attribute(Name('self', Load(), lineno=386, col_offset=18), 'file1_path', Load(), lineno=386, col_offset=18), Str('w', lineno=386, col_offset=35)], [], None, None, lineno=386, col_offset=13), Name('file1', Store(), lineno=386, col_offset=43), [Expr(Call(Attribute(Name('file1', Load(), lineno=387, col_offset=12), 'write', Load(), lineno=387, col_offset=12), [BinOp(Name('cgi_file1', Load(), lineno=387, col_offset=24), Mod(), Attribute(Name('self', Load(), lineno=387, col_offset=36), 'pythonexe', Load(), lineno=387, col_offset=36), lineno=387, col_offset=24)], [], None, None, lineno=387, col_offset=12), lineno=387, col_offset=12)], lineno=386, col_offset=13), Expr(Call(Attribute(Name('os', Load(), lineno=388, col_offset=8), 'chmod', Load(), lineno=388, col_offset=8), [Attribute(Name('self', Load(), lineno=388, col_offset=17), 'file1_path', Load(), lineno=388, col_offset=17), Num(511, lineno=388, col_offset=34)], [], None, None, lineno=388, col_offset=8), lineno=388, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=390, col_offset=8), 'file2_path', Store(), lineno=390, col_offset=8)], Call(Attribute(Attribute(Name('os', Load(), lineno=390, col_offset=26), 'path', Load(), lineno=390, col_offset=26), 'join', Load(), lineno=390, col_offset=26), [Attribute(Name('self', Load(), lineno=390, col_offset=39), 'cgi_dir', Load(), lineno=390, col_offset=39), Str('file2.py', lineno=390, col_offset=53)], [], None, None, lineno=390, col_offset=26), lineno=390, col_offset=8), With(Call(Name('open', Load(), lineno=391, col_offset=13), [Attribute(Name('self', Load(), lineno=391, col_offset=18), 'file2_path', Load(), lineno=391, col_offset=18), Str('w', lineno=391, col_offset=35)], [], None, None, lineno=391, col_offset=13), Name('file2', Store(), lineno=391, col_offset=43), [Expr(Call(Attribute(Name('file2', Load(), lineno=392, col_offset=12), 'write', Load(), lineno=392, col_offset=12), [BinOp(Name('cgi_file2', Load(), lineno=392, col_offset=24), Mod(), Attribute(Name('self', Load(), lineno=392, col_offset=36), 'pythonexe', Load(), lineno=392, col_offset=36), lineno=392, col_offset=24)], [], None, None, lineno=392, col_offset=12), lineno=392, col_offset=12)], lineno=391, col_offset=13), Expr(Call(Attribute(Name('os', Load(), lineno=393, col_offset=8), 'chmod', Load(), lineno=393, col_offset=8), [Attribute(Name('self', Load(), lineno=393, col_offset=17), 'file2_path', Load(), lineno=393, col_offset=17), Num(511, lineno=393, col_offset=34)], [], None, None, lineno=393, col_offset=8), lineno=393, col_offset=8), Assign([Attribute(Name('self', Load(), lineno=395, col_offset=8), 'cwd', Store(), lineno=395, col_offset=8)], Call(Attribute(Name('os', Load(), lineno=395, col_offset=19), 'getcwd', Load(), lineno=395, col_offset=19), [], [], None, None, lineno=395, col_offset=19), lineno=395, col_offset=8), Expr(Call(Attribute(Name('os', Load(), lineno=396, col_offset=8), 'chdir', Load(), lineno=396, col_offset=8), [Attribute(Name('self', Load(), lineno=396, col_offset=17), 'parent_dir', Load(), lineno=396, col_offset=17)], [], None, None, lineno=396, col_offset=8), lineno=396, col_offset=8)], [], lineno=371, col_offset=4), FunctionDef('tearDown', arguments([Name('self', Param(), lineno=398, col_offset=17)], None, None, []), [TryFinally([Expr(Call(Attribute(Name('os', Load(), lineno=400, col_offset=12), 'chdir', Load(), lineno=400, col_offset=12), [Attribute(Name('self', Load(), lineno=400, col_offset=21), 'cwd', Load(), lineno=400, col_offset=21)], [], None, None, lineno=400, col_offset=12), lineno=400, col_offset=12), If(Compare(Attribute(Name('self', Load(), lineno=401, col_offset=15), 'pythonexe', Load(), lineno=401, col_offset=15), [NotEq()], [Attribute(Name('sys', Load(), lineno=401, col_offset=33), 'executable', Load(), lineno=401, col_offset=33)], lineno=401, col_offset=15), [Expr(Call(Attribute(Name('os', Load(), lineno=402, col_offset=16), 'remove', Load(), lineno=402, col_offset=16), [Attribute(Name('self', Load(), lineno=402, col_offset=26), 'pythonexe', Load(), lineno=402, col_offset=26)], [], None, None, lineno=402, col_offset=16), lineno=402, col_offset=16)], [], lineno=401, col_offset=12), Expr(Call(Attribute(Name('os', Load(), lineno=403, col_offset=12), 'remove', Load(), lineno=403, col_offset=12), [Attribute(Name('self', Load(), lineno=403, col_offset=22), 'file1_path', Load(), lineno=403, col_offset=22)], [], None, None, lineno=403, col_offset=12), lineno=403, col_offset=12), Expr(Call(Attribute(Name('os', Load(), lineno=404, col_offset=12), 'remove', Load(), lineno=404, col_offset=12), [Attribute(Name('self', Load(), lineno=404, col_offset=22), 'file2_path', Load(), lineno=404, col_offset=22)], [], None, None, lineno=404, col_offset=12), lineno=404, col_offset=12), Expr(Call(Attribute(Name('os', Load(), lineno=405, col_offset=12), 'rmdir', Load(), lineno=405, col_offset=12), [Attribute(Name('self', Load(), lineno=405, col_offset=21), 'cgi_dir', Load(), lineno=405, col_offset=21)], [], None, None, lineno=405, col_offset=12), lineno=405, col_offset=12), Expr(Call(Attribute(Name('os', Load(), lineno=406, col_offset=12), 'rmdir', Load(), lineno=406, col_offset=12), [Attribute(Name('self', Load(), lineno=406, col_offset=21), 'parent_dir', Load(), lineno=406, col_offset=21)], [], None, None, lineno=406, col_offset=12), lineno=406, col_offset=12)], [Expr(Call(Attribute(Name('BaseTestCase', Load(), lineno=408, col_offset=12), 'tearDown', Load(), lineno=408, col_offset=12), [Name('self', Load(), lineno=408, col_offset=34)], [], None, None, lineno=408, col_offset=12), lineno=408, col_offset=12)], lineno=399, col_offset=8)], [], lineno=398, col_offset=4), FunctionDef('test_url_collapse_path_split', arguments([Name('self', Param(), lineno=410, col_offset=37)], None, None, []), [Assign([Name('test_vectors', Store(), lineno=411, col_offset=8)], Dict([Str('', lineno=412, col_offset=12), Str('..', lineno=413, col_offset=12), Str('/.//..', lineno=414, col_offset=12), Str('/', lineno=415, col_offset=12), Str('//', lineno=416, col_offset=12), Str('/\\', lineno=417, col_offset=12), Str('/.//', lineno=418, col_offset=12), Str('cgi-bin/file1.py', lineno=419, col_offset=12), Str('/cgi-bin/file1.py', lineno=420, col_offset=12), Str('a', lineno=421, col_offset=12), Str('/a', lineno=422, col_offset=12), Str('//a', lineno=423, col_offset=12), Str('./a', lineno=424, col_offset=12), Str('./C:/', lineno=425, col_offset=12), Str('/a/b', lineno=426, col_offset=12), Str('/a/b/', lineno=427, col_offset=12), Str('/a/b/c/..', lineno=428, col_offset=12), Str('/a/b/c/../d', lineno=429, col_offset=12), Str('/a/b/c/../d/e/../f', lineno=430, col_offset=12), Str('/a/b/c/../d/e/../../f', lineno=431, col_offset=12), Str('/a/b/c/../d/e/.././././..//f', lineno=432, col_offset=12), Str('../a/b/c/../d/e/.././././..//f', lineno=433, col_offset=12), Str('/a/b/c/../d/e/../../../f', lineno=434, col_offset=12), Str('/a/b/c/../d/e/../../../../f', lineno=435, col_offset=12), Str('/a/b/c/../d/e/../../../../../f', lineno=436, col_offset=12), Str('/a/b/c/../d/e/../../../../f/..', lineno=437, col_offset=12)], [Tuple([Str('/', lineno=412, col_offset=17), Str('', lineno=412, col_offset=22)], Load(), lineno=412, col_offset=17), Name('IndexError', Load(), lineno=413, col_offset=18), Name('IndexError', Load(), lineno=414, col_offset=22), Tuple([Str('/', lineno=415, col_offset=18), Str('', lineno=415, col_offset=23)], Load(), lineno=415, col_offset=18), Tuple([Str('/', lineno=416, col_offset=19), Str('', lineno=416, col_offset=24)], Load(), lineno=416, col_offset=19), Tuple([Str('/', lineno=417, col_offset=20), Str('\\', lineno=417, col_offset=25)], Load(), lineno=417, col_offset=20), Tuple([Str('/', lineno=418, col_offset=21), Str('', lineno=418, col_offset=26)], Load(), lineno=418, col_offset=21), Tuple([Str('/cgi-bin', lineno=419, col_offset=33), Str('file1.py', lineno=419, col_offset=45)], Load(), lineno=419, col_offset=33), Tuple([Str('/cgi-bin', lineno=420, col_offset=34), Str('file1.py', lineno=420, col_offset=46)], Load(), lineno=420, col_offset=34), Tuple([Str('/', lineno=421, col_offset=18), Str('a', lineno=421, col_offset=23)], Load(), lineno=421, col_offset=18), Tuple([Str('/', lineno=422, col_offset=19), Str('a', lineno=422, col_offset=24)], Load(), lineno=422, col_offset=19), Tuple([Str('/', lineno=423, col_offset=20), Str('a', lineno=423, col_offset=25)], Load(), lineno=423, col_offset=20), Tuple([Str('/', lineno=424, col_offset=20), Str('a', lineno=424, col_offset=25)], Load(), lineno=424, col_offset=20), Tuple([Str('/C:', lineno=425, col_offset=22), Str('', lineno=425, col_offset=29)], Load(), lineno=425, col_offset=22), Tuple([Str('/a', lineno=426, col_offset=21), Str('b', lineno=426, col_offset=27)], Load(), lineno=426, col_offset=21), Tuple([Str('/a/b', lineno=427, col_offset=22), Str('', lineno=427, col_offset=30)], Load(), lineno=427, col_offset=22), Tuple([Str('/a/b', lineno=428, col_offset=26), Str('', lineno=428, col_offset=34)], Load(), lineno=428, col_offset=26), Tuple([Str('/a/b', lineno=429, col_offset=28), Str('d', lineno=429, col_offset=36)], Load(), lineno=429, col_offset=28), Tuple([Str('/a/b/d', lineno=430, col_offset=35), Str('f', lineno=430, col_offset=45)], Load(), lineno=430, col_offset=35), Tuple([Str('/a/b', lineno=431, col_offset=38), Str('f', lineno=431, col_offset=46)], Load(), lineno=431, col_offset=38), Tuple([Str('/a/b', lineno=432, col_offset=45), Str('f', lineno=432, col_offset=53)], Load(), lineno=432, col_offset=45), Name('IndexError', Load(), lineno=433, col_offset=46), Tuple([Str('/a', lineno=434, col_offset=41), Str('f', lineno=434, col_offset=47)], Load(), lineno=434, col_offset=41), Tuple([Str('/', lineno=435, col_offset=44), Str('f', lineno=435, col_offset=49)], Load(), lineno=435, col_offset=44), Name('IndexError', Load(), lineno=436, col_offset=46), Tuple([Str('/', lineno=437, col_offset=47), Str('', lineno=437, col_offset=52)], Load(), lineno=437, col_offset=47)], lineno=411, col_offset=23), lineno=411, col_offset=8), For(Tuple([Name('path', Store(), lineno=439, col_offset=12), Name('expected', Store(), lineno=439, col_offset=18)], Store(), lineno=439, col_offset=12), Call(Attribute(Name('test_vectors', Load(), lineno=439, col_offset=30), 'iteritems', Load(), lineno=439, col_offset=30), [], [], None, None, lineno=439, col_offset=30), [If(BoolOp(And(), [Call(Name('isinstance', Load(), lineno=440, col_offset=15), [Name('expected', Load(), lineno=440, col_offset=26), Name('type', Load(), lineno=440, col_offset=36)], [], None, None, lineno=440, col_offset=15), Call(Name('issubclass', Load(), lineno=440, col_offset=46), [Name('expected', Load(), lineno=440, col_offset=57), Name('Exception', Load(), lineno=440, col_offset=67)], [], None, None, lineno=440, col_offset=46)], lineno=440, col_offset=15), [Expr(Call(Attribute(Name('self', Load(), lineno=441, col_offset=16), 'assertRaises', Load(), lineno=441, col_offset=16), [Name('expected', Load(), lineno=441, col_offset=34), Attribute(Name('CGIHTTPServer', Load(), lineno=442, col_offset=34), '_url_collapse_path_split', Load(), lineno=442, col_offset=34), Name('path', Load(), lineno=442, col_offset=74)], [], None, None, lineno=441, col_offset=16), lineno=441, col_offset=16)], [Assign([Name('actual', Store(), lineno=444, col_offset=16)], Call(Attribute(Name('CGIHTTPServer', Load(), lineno=444, col_offset=25), '_url_collapse_path_split', Load(), lineno=444, col_offset=25), [Name('path', Load(), lineno=444, col_offset=64)], [], None, None, lineno=444, col_offset=25), lineno=444, col_offset=16), Expr(Call(Attribute(Name('self', Load(), lineno=445, col_offset=16), 'assertEqual', Load(), lineno=445, col_offset=16), [Name('expected', Load(), lineno=445, col_offset=33), Name('actual', Load(), lineno=445, col_offset=43)], [keyword('msg', BinOp(Str('path = %r\nGot:    %r\nWanted: %r', lineno=446, col_offset=37), Mod(), Tuple([Name('path', Load(), lineno=447, col_offset=34), Name('actual', Load(), lineno=447, col_offset=40), Name('expected', Load(), lineno=447, col_offset=48)], Load(), lineno=447, col_offset=34), lineno=446, col_offset=37))], None, None, lineno=445, col_offset=16), lineno=445, col_offset=16)], lineno=440, col_offset=12)], [], lineno=439, col_offset=8)], [], lineno=410, col_offset=4), FunctionDef('test_headers_and_content', arguments([Name('self', Param(), lineno=449, col_offset=33)], None, None, []), [Assign([Name('res', Store(), lineno=450, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=450, col_offset=14), 'request', Load(), lineno=450, col_offset=14), [Str('/cgi-bin/file1.py', lineno=450, col_offset=27)], [], None, None, lineno=450, col_offset=14), lineno=450, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=451, col_offset=8), 'assertEqual', Load(), lineno=451, col_offset=8), [Tuple([Str('Hello World\n', lineno=451, col_offset=26), Str('text/html', lineno=451, col_offset=43), Num(200, lineno=451, col_offset=56)], Load(), lineno=451, col_offset=26), Tuple([Call(Attribute(Name('res', Load(), lineno=452, col_offset=13), 'read', Load(), lineno=452, col_offset=13), [], [], None, None, lineno=452, col_offset=13), Call(Attribute(Name('res', Load(), lineno=452, col_offset=25), 'getheader', Load(), lineno=452, col_offset=25), [Str('Content-type', lineno=452, col_offset=39)], [], None, None, lineno=452, col_offset=25), Attribute(Name('res', Load(), lineno=452, col_offset=56), 'status', Load(), lineno=452, col_offset=56)], Load(), lineno=452, col_offset=13)], [], None, None, lineno=451, col_offset=8), lineno=451, col_offset=8)], [], lineno=449, col_offset=4), FunctionDef('test_post', arguments([Name('self', Param(), lineno=454, col_offset=18)], None, None, []), [Assign([Name('params', Store(), lineno=455, col_offset=8)], Call(Attribute(Name('urllib', Load(), lineno=455, col_offset=17), 'urlencode', Load(), lineno=455, col_offset=17), [Dict([Str('spam', lineno=455, col_offset=35), Str('eggs', lineno=455, col_offset=47), Str('bacon', lineno=455, col_offset=66)], [Num(1, lineno=455, col_offset=44), Str('python', lineno=455, col_offset=56), Num(123456, lineno=455, col_offset=76)], lineno=455, col_offset=34)], [], None, None, lineno=455, col_offset=17), lineno=455, col_offset=8), Assign([Name('headers', Store(), lineno=456, col_offset=8)], Dict([Str('Content-type', lineno=456, col_offset=19)], [Str('application/x-www-form-urlencoded', lineno=456, col_offset=36)], lineno=456, col_offset=18), lineno=456, col_offset=8), Assign([Name('res', Store(), lineno=457, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=457, col_offset=14), 'request', Load(), lineno=457, col_offset=14), [Str('/cgi-bin/file2.py', lineno=457, col_offset=27), Str('POST', lineno=457, col_offset=48), Name('params', Load(), lineno=457, col_offset=56), Name('headers', Load(), lineno=457, col_offset=64)], [], None, None, lineno=457, col_offset=14), lineno=457, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=459, col_offset=8), 'assertEqual', Load(), lineno=459, col_offset=8), [Call(Attribute(Name('res', Load(), lineno=459, col_offset=25), 'read', Load(), lineno=459, col_offset=25), [], [], None, None, lineno=459, col_offset=25), Str('1, python, 123456\n', lineno=459, col_offset=37)], [], None, None, lineno=459, col_offset=8), lineno=459, col_offset=8)], [], lineno=454, col_offset=4), FunctionDef('test_invaliduri', arguments([Name('self', Param(), lineno=461, col_offset=24)], None, None, []), [Assign([Name('res', Store(), lineno=462, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=462, col_offset=14), 'request', Load(), lineno=462, col_offset=14), [Str('/cgi-bin/invalid', lineno=462, col_offset=27)], [], None, None, lineno=462, col_offset=14), lineno=462, col_offset=8), Expr(Call(Attribute(Name('res', Load(), lineno=463, col_offset=8), 'read', Load(), lineno=463, col_offset=8), [], [], None, None, lineno=463, col_offset=8), lineno=463, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=464, col_offset=8), 'assertEqual', Load(), lineno=464, col_offset=8), [Attribute(Name('res', Load(), lineno=464, col_offset=25), 'status', Load(), lineno=464, col_offset=25), Num(404, lineno=464, col_offset=37)], [], None, None, lineno=464, col_offset=8), lineno=464, col_offset=8)], [], lineno=461, col_offset=4), FunctionDef('test_authorization', arguments([Name('self', Param(), lineno=466, col_offset=27)], None, None, []), [Assign([Name('headers', Store(), lineno=467, col_offset=8)], Dict([Str('Authorization', lineno=467, col_offset=19)], [BinOp(Str('Basic %s', lineno=467, col_offset=37), Mod(), Call(Attribute(Name('base64', Load(), lineno=468, col_offset=19), 'b64encode', Load(), lineno=468, col_offset=19), [Str('username:pass', lineno=468, col_offset=36)], [], None, None, lineno=468, col_offset=19), lineno=467, col_offset=37)], lineno=467, col_offset=18), lineno=467, col_offset=8), Assign([Name('res', Store(), lineno=469, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=469, col_offset=14), 'request', Load(), lineno=469, col_offset=14), [Str('/cgi-bin/file1.py', lineno=469, col_offset=27), Str('GET', lineno=469, col_offset=48)], [keyword('headers', Name('headers', Load(), lineno=469, col_offset=63))], None, None, lineno=469, col_offset=14), lineno=469, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=470, col_offset=8), 'assertEqual', Load(), lineno=470, col_offset=8), [Tuple([Str('Hello World\n', lineno=470, col_offset=26), Str('text/html', lineno=470, col_offset=43), Num(200, lineno=470, col_offset=56)], Load(), lineno=470, col_offset=26), Tuple([Call(Attribute(Name('res', Load(), lineno=471, col_offset=17), 'read', Load(), lineno=471, col_offset=17), [], [], None, None, lineno=471, col_offset=17), Call(Attribute(Name('res', Load(), lineno=471, col_offset=29), 'getheader', Load(), lineno=471, col_offset=29), [Str('Content-type', lineno=471, col_offset=43)], [], None, None, lineno=471, col_offset=29), Attribute(Name('res', Load(), lineno=471, col_offset=60), 'status', Load(), lineno=471, col_offset=60)], Load(), lineno=471, col_offset=17)], [], None, None, lineno=470, col_offset=8), lineno=470, col_offset=8)], [], lineno=466, col_offset=4), FunctionDef('test_no_leading_slash', arguments([Name('self', Param(), lineno=473, col_offset=30)], None, None, []), [Assign([Name('res', Store(), lineno=475, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=475, col_offset=14), 'request', Load(), lineno=475, col_offset=14), [Str('cgi-bin/file1.py', lineno=475, col_offset=27)], [], None, None, lineno=475, col_offset=14), lineno=475, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=476, col_offset=8), 'assertEqual', Load(), lineno=476, col_offset=8), [Tuple([Str('Hello World\n', lineno=476, col_offset=26), Str('text/html', lineno=476, col_offset=43), Num(200, lineno=476, col_offset=56)], Load(), lineno=476, col_offset=26), Tuple([Call(Attribute(Name('res', Load(), lineno=477, col_offset=14), 'read', Load(), lineno=477, col_offset=14), [], [], None, None, lineno=477, col_offset=14), Call(Attribute(Name('res', Load(), lineno=477, col_offset=26), 'getheader', Load(), lineno=477, col_offset=26), [Str('Content-type', lineno=477, col_offset=40)], [], None, None, lineno=477, col_offset=26), Attribute(Name('res', Load(), lineno=477, col_offset=57), 'status', Load(), lineno=477, col_offset=57)], Load(), lineno=477, col_offset=14)], [], None, None, lineno=476, col_offset=8), lineno=476, col_offset=8)], [], lineno=473, col_offset=4), FunctionDef('test_os_environ_is_not_altered', arguments([Name('self', Param(), lineno=479, col_offset=39)], None, None, []), [Assign([Name('signature', Store(), lineno=480, col_offset=8)], Str('Test CGI Server', lineno=480, col_offset=20), lineno=480, col_offset=8), Assign([Subscript(Attribute(Name('os', Load(), lineno=481, col_offset=8), 'environ', Load(), lineno=481, col_offset=8), Index(Str('SERVER_SOFTWARE', lineno=481, col_offset=19)), Store(), lineno=481, col_offset=8)], Name('signature', Load(), lineno=481, col_offset=40), lineno=481, col_offset=8), Assign([Name('res', Store(), lineno=482, col_offset=8)], Call(Attribute(Name('self', Load(), lineno=482, col_offset=14), 'request', Load(), lineno=482, col_offset=14), [Str('/cgi-bin/file1.py', lineno=482, col_offset=27)], [], None, None, lineno=482, col_offset=14), lineno=482, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=483, col_offset=8), 'assertEqual', Load(), lineno=483, col_offset=8), [Tuple([Str('Hello World\n', lineno=483, col_offset=26), Str('text/html', lineno=483, col_offset=44), Num(200, lineno=483, col_offset=57)], Load(), lineno=483, col_offset=26), Tuple([Call(Attribute(Name('res', Load(), lineno=484, col_offset=17), 'read', Load(), lineno=484, col_offset=17), [], [], None, None, lineno=484, col_offset=17), Call(Attribute(Name('res', Load(), lineno=484, col_offset=29), 'getheader', Load(), lineno=484, col_offset=29), [Str('Content-type', lineno=484, col_offset=43)], [], None, None, lineno=484, col_offset=29), Attribute(Name('res', Load(), lineno=484, col_offset=60), 'status', Load(), lineno=484, col_offset=60)], Load(), lineno=484, col_offset=17)], [], None, None, lineno=483, col_offset=8), lineno=483, col_offset=8), Expr(Call(Attribute(Name('self', Load(), lineno=485, col_offset=8), 'assertEqual', Load(), lineno=485, col_offset=8), [Subscript(Attribute(Name('os', Load(), lineno=485, col_offset=25), 'environ', Load(), lineno=485, col_offset=25), Index(Str('SERVER_SOFTWARE', lineno=485, col_offset=36)), Load(), lineno=485, col_offset=25), Name('signature', Load(), lineno=485, col_offset=56)], [], None, None, lineno=485, col_offset=8), lineno=485, col_offset=8)], [], lineno=479, col_offset=4)], [], lineno=367, col_offset=0), FunctionDef('test_main', arguments([Name('verbose', Param(), lineno=487, col_offset=14)], None, None, [Name('None', Load(), lineno=487, col_offset=22)]), [TryFinally([Assign([Name('cwd', Store(), lineno=489, col_offset=8)], Call(Attribute(Name('os', Load(), lineno=489, col_offset=14), 'getcwd', Load(), lineno=489, col_offset=14), [], [], None, None, lineno=489, col_offset=14), lineno=489, col_offset=8), Expr(Call(Attribute(Name('test_support', Load(), lineno=490, col_offset=8), 'run_unittest', Load(), lineno=490, col_offset=8), [Name('BaseHTTPRequestHandlerTestCase', Load(), lineno=490, col_offset=34), Name('BaseHTTPServerTestCase', Load(), lineno=491, col_offset=34), Name('SimpleHTTPServerTestCase', Load(), lineno=492, col_offset=34), Name('CGIHTTPServerTestCase', Load(), lineno=493, col_offset=34)], [], None, None, lineno=490, col_offset=8), lineno=490, col_offset=8)], [Expr(Call(Attribute(Name('os', Load(), lineno=496, col_offset=8), 'chdir', Load(), lineno=496, col_offset=8), [Name('cwd', Load(), lineno=496, col_offset=17)], [], None, None, lineno=496, col_offset=8), lineno=496, col_offset=8)], lineno=488, col_offset=4)], [], lineno=487, col_offset=0), If(Compare(Name('__name__', Load(), lineno=498, col_offset=3), [Eq()], [Str('__main__', lineno=498, col_offset=15)], lineno=498, col_offset=3), [Expr(Call(Name('test_main', Load(), lineno=499, col_offset=4), [], [], None, None, lineno=499, col_offset=4), lineno=499, col_offset=4)], [], lineno=498, col_offset=0)])
