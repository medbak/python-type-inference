all: analyzer doc

analyzer:
	ocamlbuild -classic-display main.native -cflag -dtypes

doc:
	ocamlbuild -classic-display doc.docdir/index.html
#       HTML files generated by ocamldoc have "iso-8859-1" character set. The below command changes it to UTF-8.
	find doc.docdir/ -type f -name "*.html" -exec sed -i "" "s/charset=iso-8859-1/charset=UTF-8/g" {} \;

clean:
	rm -rf _build
	rm -rf doc.docdir
